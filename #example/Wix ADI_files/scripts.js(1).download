function cssTimeToMilliseconds(a){return Math.floor(parseFloat(a)*(a.endsWith("ms")?1:1e3))}function calculateTotalAnimationsDurations(a){var b=a.css(["transitionDuration","transitionDelay","animationDuration","animationDelay","animationIterationCount"]),c=cssTimeToMilliseconds(b.transitionDuration)+cssTimeToMilliseconds(b.transitionDelay),d=cssTimeToMilliseconds(b.animationDuration)*parseInt(b.animationIterationCount,10)+cssTimeToMilliseconds(b.animationDelay);return c<1&&(c=0),d<1&&(d=0),Promise.resolve({transitionTotalDuration:c,animationTotalDuration:d})}function waitForAnimation(a,b,c){return new Promise(function(d){var e,f;b>c?(e="transitionend",f=b):(e="animationend",f=c);var g=_.once(d),h=function(b){b.target===a[0]?g():a.one(e,h)};a.one(e,h);var i=f+ANIMATION_TIMEOUT_DELTA;setTimeout(g,i)})}function getStageBackgroundColorsFactory(a,b){return function(c){var d=b.toDarkColor(c.mainColor,c),e=a(d).hsv(),f=e[0],g=e[1],h=g<.05?0:.2,i=f,j=(i+30)%360,k=a.hsv(i,h,.8).alpha(.6),l=a.hsv(j,h,.9).alpha(.3),m=a.hsv(i,h,.5).alpha(.1);return{gradientStart:k,gradientEnd:l,active:a.hsv(i,h,.5).alpha(.15),hover:m}}}function memoize(a,b,c){if(c){var d="_memoized_"+b,e=c.get;return a[d]=MEMOIZE_IDENTIFIER,__assign({},c,{get:function(){return this[d]===MEMOIZE_IDENTIFIER&&(this[d]=e.call(this)),this[d]}})}}function FeatureListFactory(a,b,c,d,e,f){var g=function(){function e(e){e.preset?(this.featureDetector=b,this.listItemFeatureDetector=c,this.listData=this.data=this.createDataFromPreset(e)):(this.featureDetector=a,this.listItemFeatureDetector=d,this.data=this.getLayoutElementFromSection(e),this.listData=e)}return e.prototype.createDataFromPreset=function(a){return a.preset.data.isList&&this.listItemFeatureDetector.enhanceListItemWithRealStructure(a),this.featureDetector.enhanceWithRealStructure(a,a.preset.data.groups[0].layouts[0])},e.prototype.getLayoutElementFromSection=function(a){var b=a.groups.find(function(a){return"ListHeader"!==a.contentType&&"ListFooter"!==a.contentType});if(b&&b.segments[0])return b.segments[0].getLENoError()},Object.defineProperty(e.prototype,"horizontalTextAlignment",{get:function(){return this.featureDetector.getHorizontalTextAlignment(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasColumns",{get:function(){return this.featureDetector.hasColumns(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfColumns",{get:function(){return this.featureDetector.getNumberOfColumns(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isColumnBG",{get:function(){return this.featureDetector.isColumnBG(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.featureDetector.getTextWidth(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMediaStretched",{get:function(){return this.featureDetector.isMediaStretched(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCoastToCoast",{get:function(){return this.featureDetector.isMediaStrip(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaType",{get:function(){return this.featureDetector.getMediaType(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaUrls",{get:function(){return this.featureDetector.getMediaUrls(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaObjects",{get:function(){return this.featureDetector.getMediaObjects(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaWidth",{get:function(){return this.featureDetector.getMediaWidth(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startsWithMedia",{get:function(){return this.featureDetector.startsWithMedia(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endsWithMedia",{get:function(){return this.featureDetector.endsWithMedia(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaPosition",{get:function(){return void 0===this.hasMedia||void 0===this.hasText?[]:this.featureDetector.getMediaPosition(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textPosition",{get:function(){return void 0===this.hasMedia||void 0===this.hasText?[]:this.featureDetector.getTextPosition(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasMedia",{get:function(){return this.featureDetector.hasMedia(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasText",{get:function(){return this.featureDetector.hasText(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return this.featureDetector.getColumns(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isList",{get:function(){return this.featureDetector.isList(this.listData)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isListZigZag",{get:function(){if(this.isList)return this.featureDetector.isListZigZag(this.listData)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasListHeader",{get:function(){return this.featureDetector.hasListHeader(this.listData)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfListItemsInRow",{get:function(){if(this.isList)return this.listItemFeatureDetector.getNumberOfItemsInRow(this.listData)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listItemTextWidth",{get:function(){if(this.isList)return this.textWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listItemHorizontalTextAlignment",{get:function(){if(this.isList)return this.horizontalTextAlignment},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listItemTextPosition",{get:function(){if(this.isList)return this.textPosition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listItemMediaPosition",{get:function(){if(this.isList)return this.mediaPosition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasTextBox",{get:function(){return!!this.hasText&&this.featureDetector.hasBox(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPattern",{get:function(){return this.featureDetector.hasPattern(this.data)},enumerable:!0,configurable:!0}),e.prototype.isSameMedia=function(a){return this.hasMedia&&a.hasMedia&&this.mediaUrls[0]===a.mediaUrls[0]},e.prototype.isSameTextAlignment=function(a){return this.hasText&&a.hasText&&this.horizontalTextAlignment===a.horizontalTextAlignment},e}();return __decorate([memoize],g.prototype,"horizontalTextAlignment",null),__decorate([memoize],g.prototype,"hasColumns",null),__decorate([memoize],g.prototype,"numberOfColumns",null),__decorate([memoize],g.prototype,"isColumnBG",null),__decorate([memoize],g.prototype,"textWidth",null),__decorate([memoize],g.prototype,"isMediaStretched",null),__decorate([memoize],g.prototype,"isCoastToCoast",null),__decorate([memoize],g.prototype,"mediaType",null),__decorate([memoize],g.prototype,"mediaUrls",null),__decorate([memoize],g.prototype,"mediaObjects",null),__decorate([memoize],g.prototype,"mediaWidth",null),__decorate([memoize],g.prototype,"startsWithMedia",null),__decorate([memoize],g.prototype,"endsWithMedia",null),__decorate([memoize],g.prototype,"mediaPosition",null),__decorate([memoize],g.prototype,"textPosition",null),__decorate([memoize],g.prototype,"hasMedia",null),__decorate([memoize],g.prototype,"hasText",null),__decorate([memoize],g.prototype,"columns",null),__decorate([memoize],g.prototype,"isList",null),__decorate([memoize],g.prototype,"isListZigZag",null),__decorate([memoize],g.prototype,"hasListHeader",null),__decorate([memoize],g.prototype,"numberOfListItemsInRow",null),__decorate([memoize],g.prototype,"listItemTextWidth",null),__decorate([memoize],g.prototype,"listItemHorizontalTextAlignment",null),__decorate([memoize],g.prototype,"listItemTextPosition",null),__decorate([memoize],g.prototype,"listItemMediaPosition",null),__decorate([memoize],g.prototype,"hasTextBox",null),__decorate([memoize],g.prototype,"hasPattern",null),g}getStageBackgroundColorsFactory.$inject=["chroma","themeChooserUtils"],FeatureListFactory.$inject=["sectionFeatureDetector","presetFeatureDetector","presetListItemFeatureDetector","sectionListItemFeatureDetector","LayoutUtils","clusters"],function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=1)}([function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(23);b.reduceDbStory=d.default,b.SiteUpdateType={ChangeKit:"changeKit",AddPage:"addPage",DeletePage:"deletePage",MovePage:"movePage",RenamePage:"renamePage",SetHomepage:"setHomepage",AddSection:"addSection",DeleteSection:"deleteSection",MoveSection:"moveSection",ChangeSectionLayout:"changeSectionLayout",UpdateSection:"updateSection",AddListItem:"addListItem",RemoveListItem:"removeListItem"},b.FieldType={Text:"text"},b.FieldSubType={Title:"title",Subtitle:"subTitle",Button:"button",Media:"media",Paragraph:"loongText"};var e=function(){function a(){this.actionsThatRerender=[],this.actionsThatNeedRerender=[]}return a}();b.SiteUpdateConfig=e},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.assign(window,{core:window.core||{},ob:window.ob||{}}),c(2),c(3),c(5),c(6);var d=c(7);angular.module("siteGeneratorBuilderInternal").service("headless",d.default);var e=c(24),f=c(25);angular.module("siteGeneratorBuilderInternal").component("headlessTest",{template:f,controller:e.default});var g=c(26);angular.module("siteGeneratorBuilderInternal").factory("consumerBiLoggerSanitizer",function(){return g})},function(a,b,c){"use strict";angular.module("siteGeneratorCommon",["siteGeneratorStaticsConsumerTranslations","siteGeneratorStaticsPreload","siteGeneratorAppCore","commonControlsApp","smartAssist","organizeMediaDialog","onboardingServerJsApiApp","siteGeneratorStaticsMetadataApp","wixAngular","wixAngularStorage","fedops","LocalStorageModule","cgNotify"]),angular.module("siteGeneratorContentManagerInternal",[]),angular.module("siteGeneratorLocationManagerInternal",[]),angular.module("siteGeneratorTourManagerInternal",[]),angular.module("siteGeneratorBuilderInternal",[]),angular.module("siteGeneratorIntroInternal",["siteGeneratorAppCore"]),angular.module("siteGeneratorEditorInternal",[]),angular.module("siteGeneratorPresetInternal",[]),angular.module("siteGeneratorStaticsConsumerAppInternal",["siteGeneratorCommon","siteGeneratorContentManagerInternal","siteGeneratorLocationManagerInternal","siteGeneratorTourManagerInternal","siteGeneratorBuilderInternal","siteGeneratorIntroInternal","siteGeneratorEditorInternal","siteGeneratorPresetInternal"]),angular.module("siteGeneratorStaticsConsumerAppConfig",["siteGeneratorStaticsConsumerAppInternal","siteGeneratorIntroInternal","ui.router"]),angular.module("siteGeneratorStaticsConsumerDebug",[]),angular.module("siteGeneratorStaticsConsumerApp",["wix.ab-translate","siteGeneratorStaticsConsumerAppConfig","exceptionOverwrite","ui.router","google.places","ui.tree","xeditable","720kb.socialshare","ngAnimate","ngMessages","ngMaterial","dndLists","cgNotify","wix.common.bi","color.picker"]).config(["$translateProvider","abTranslateProvider","experimentManagerProvider",function(a,b,c){var d=a.preferredLanguage(),e=a.translations()[d],f=b.abTranslate.default(c.experiments,e);a.translations(d,f),a.use(d)}]).controller("AppCtrl",["$scope","assistantManager","flags","$injector",function(a,b,c,d){var e=this;if(a.$on("$stateChangeSuccess",function(a,b){var c=b.url.split("/").filter(function(a){return""!==a});c.length>0&&(e.state=c[0])}),a.$watch(function(){return b.isInActiveTask()},function(a){return e.isAssistantOn=a}),this.flags=c,c.debug){console.log("flag is on, initializing configuratorManager");d.get("configuratorManager").init()}}])},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(4),e=function(){function a(b,c,d,e,f){var g=this;this.$rootScope=b,this.$window=c,this.preloaderService=d,this.flags=e,this.applicationState=f,this.isBuilder=this.isState(config.STATES.BUILDER),this.isIntro=this.isState(config.STATES.INTRO),b.$on("$stateChangeStart",function(a,b,c,d){return g.onStateChangeStart(a,b,c,d)}),a.bodyFlags.forEach(function(a){e[a]&&g.setBodyAttr(a,e[a])})}return a.$inject=["$rootScope","$window","preloaderService","flags","applicationState"],a.prototype.setBodyAttr=function(a,b){this.$window.document.body.setAttribute("data-experiment-"+_.kebabCase(a),b)},a.prototype.isState=function(a){return function(b,c){return void 0===c&&(c=!1),c?b.name===a:0===b.name.indexOf(a)}},a.prototype.onStateChangeStart=function(a,b,c,d){var e=this,f=this.isIntro(d)&&this.isIntro(b,!0),g=!this.isIntro(d)&&this.isIntro(b,!0),h=this.isBuilder(d)&&!c.storyId,i=this.isState(config.STATES.BUILDER_STORY_PREVIEW)(d)&&this.flags.previewRevision;!g&&(f||h||i)?a.preventDefault():this.isBuilder(d)&&this.isIntro(b)&&(this.$window.onbeforeunload=null,this.$window.setTimeout(function(){return e.$window.location.reload(!0)}))},a}();e.bodyFlags=["popover","pagesDropDownNewDesign","mergedHeader","mobileEditorBrowserHeight","listItemSlideShow","tourDockZIndexBugFix","newAssistantMenu","smartAssist","newColorationPalettes","assistantBucketsNoSkip","smartAssistBeta","headerDesignMenuCab","newAssistantMenuTopBarOverlap"],angular.module("siteGeneratorStaticsConsumerAppInternal").component("appMain",{template:d,controller:e,transclude:!0})},function(a,b){a.exports="<div class='main-container'>\n<div class='main' ng-transclude=''></div>\n<div class='main-helpers'>\n<spinner></spinner>\n<visual-validation></visual-validation>\n<div class='header-layout-solver' header-layout-solver=''></div>\n</div>\n<open-site-loader adi-automation='open-site-loader' class='animate-if' ng-if='$ctrl.preloaderService.isShown'></open-site-loader>\n<assistant-dock class='tour-dock-interactive tour-dock-stationary' ng-if='!$ctrl.applicationState.isInMobileEditMode()'></assistant-dock>\n<headless-test ng-if='$ctrl.flags.headlessApi'></headless-test>\n</div>\n"},function(a,b,c){"use strict";var d={ADD_SECTION_HELP:"add-section-help",ADD_PAGE_HELP:"add-page-help",BUSINESS_CARD_HELP:"business-card-help",AFTER_PAGE_ADD:"popup-after-page-add",AFTER_PAGE_ADD_HELP:"popup-after-page-add-help",AFTER_PAGE_ADD_FIRST_TIME:"popup-page-add-first-time",SECTION_REPLACE_HELP:"section-replace-help",SECTION_COLORS_HELP:"section-colors-help",SECTION_ANIMATIONS_HELP:"section-animations-help",SECTION_BACKGROUNDS_HELP:"section-background-help",SECTION_FONT_HELP:"section-font-help",CONFIRM_DELETE_LIST_ITEM:"confirm-delete-list-item",LIST_PANEL_HELP:"list-panel-help",MEDIA_SETTINGS_PANEL_HELP:"media-settings-panel-help",SHOW_HIDE_NODE:"show-hide-node-popup",SINGLE_PANEL_HELP:"single-panel-help",SOCIAL_PANEL_HELP:"social-panel-help",LIST_SPAN_TOOLS_DELETE:"list-span-tools-delete",LIST_SPAN_TOOLS_DELETE_HELP:"list-span-tools-delete-help",MOVE_SECTION:"move-section",MOVE_SECTION_HELP:"move-section-help",DELETE_SECTION:"delete-section",DELETE_SECTION_HELP:"delete-section-help",DESIGN_PANEL_HELP:"design-panel-help",COLORATION_PANEL_HELP:"coloration-panel-help",ANIMATION_PANEL_HELP:"animation-panel-help",PAGES_PANEL_HELP:"pages-panel-help",PAGE_DELETE_CONFIRM:"confirm-page-delete",TPA_PAGE_DELETE_CONFIRM:"tpa-confirm-page-delete",SEO_PANEL_HELP:"seo-panel-help",GOTO_EDITOR:"goto-editor",PUBLISH_CHOOSE_DOMAIN_HELP:"publish-choose-domain-help",PUBLISH_CONGRATS_HELP:"publish-congrats-help",PUBLISH_CONNECT_DOMAIN_HELP:"publish-connect-domain-help",FAKEBROWSER_CONNECT_DOMAIN_HELP:"fakebrowser-connect-domain-help",TOPBAR_CONNECT_DOMAIN_HELP:"topbar-connect-domain-help",BUSINESS_DETAILS:"business-details",PUBLISH_FAILED:"publish-failed",HOME_HELP:"home-help",TPA_HELP:"tpa-help",TPA_AFTER_UPDATE:"tpa-after-update",LINK_DETAILS_HELP:"link-details-help",SESSION_EXPIRED:"session-expired",CONFLICTING_CHANGES:"conflicting-changes",SITE_NOT_MANAGED_BY_OB:"site-not-managed-by-ob",FIELD_VISIBILITY_SHOW_HIDE:"field-visibility-show-hide",TIME_TO_PUBLISH:"time-to-publish",AUTOSAVE:"autosave",SAVE_VALIDATION_ERROR:"save-failure",STORY_ARCHIVED:"story-archived",DS_SAVE_PUBLISH_DISABLED_ON_SERVER:"ds-save-publish-disabled-on-server",PALETTE_COLOR:"choose-color",MENU_TOOLTIP_HELP:"menu-tooltip-help",FONT_PANEL_HELP:"font-panel-help",LINK_PHONE_HELP:"help.link.phone",DEBUG_MAP_STYLE:"map-style",WELCOME_TO_MOBILE_EDITOR_EXISTING:"welcome-to-mobile-editor-existing",WELCOME_TO_MOBILE_EDITOR_NEW:"welcome-to-mobile-editor-new",AFFECTS_ONLY_MOBILE_EDITOR:"affects-only-mobile-editor",DISABLED_TRANSPARENT_HEADER_TOOLTIP_HELP:"disabled-transparent-header-tooltip-help",COLOR_SETTINGS:"color-settings"};angular.module("siteGeneratorStaticsConsumerAppInternal").constant("CONSUMER_DIALOGS",d)},function(a,b,c){"use strict";angular.module("siteGeneratorCommon").config(["$logProvider","flagsProvider","wixAngularTopologyProvider","fedopsLoggerProvider","localStorageServiceProvider","applicationParameters","tpaAppInstanceHolder","clientTopology","sdkConfigProvider",function(a,b,c,d,e,f,g,h,i){f.clientTopology=h,c.setStaticsUrl(h.staticsUrl),d.setAppName("site-generator-statics-consumer"),a.debugEnabled(-1!==window.location.href.indexOf("debug")),e.setPrefix("ob"),i.registerAppDefIdGetter(function(){return f.getCurrentlyManaged()}),i.registerAppInstanceIdGetter(function(){return g.getCurrentlyManagedInstance.bind(g)}),b.designKit=!0,b.consumerMode=!0,h.production||!1===b.silentBI||(b.silentBI=!0),b.autoCrop=3}]),angular.module("siteGeneratorStaticsConsumerAppConfig").config(["$compileProvider","$logProvider","experimentManagerProvider","nrNgClientProvider","flagsProvider","clientTopology","CCSvgIconServiceProvider","ccFlagsProvider",function(a,b,c,d,e,f,g,h){g.setSpritePrefix(""),0===location.hash.indexOf("#!/builder")&&d.reportFinishedEnabled(!1);var i=void 0!==f.experiments,j=i?Object.keys(f.experiments):[];i&&(d.tag("experiments",j.filter(function(a){return"false"!==f.experiments[a]}).sort().join(" ")),c.setExperiments(f.experiments)),f.production&&(a.debugInfoEnabled(!1),b.debugEnabled(!1)),j.forEach(function(a){var b=c.getExperimentValue(a),d=a.split("."),f=d[d.length-1];void 0===b||"false"===b||!1===b?(e[f]=!1,h[f]=!1):"true"===b||!0===b?(e[f]=!0,h[f]=!0):(e[f]=b,h[f]=b)}),(window.location.href.split("?")[1]||"").split("&").map(function(a){var b=a.split("="),c=b[0],d=b[1];void 0===d&&(d=!0),"true"!==d&&"false"!==d||(d="true"===d),e[c]=d,h[c]=d}),e.moveToEditorText||(e.moveToEditorText="go"),e.newColorationPalettes&&(e.newColorationUpdateKitPalettes=!0,e.newColorationCustomPalette=!0),e.dataFlags=c.isExperimentEnabled("specs.ob.dataFlags")}]).run(["contentElements",function(a){a.load()}]).run(["clientTopology","flags","cmsApi","jsApiManager","wixWizIntegration","CcDialogBuilder","ccTooltipManager","experimentManager","headless","$window","applicationState",function(a,b,c,d,e,f,g,h,i,j,k){function l(a,c){return h.loadExperiment(c,!1).then(function(c){return b[a]="true"===c||!0===c})}b.contentVersionId&&c.setContentVersionId(b.contentVersionId),"en"!==a.locale&&c.setLocale(a.locale),a.esi&&(d.setEditorSessionId(a.esi),e.setSessionId(a.esi)),l("businessManagerPhase3","specs.wos.businessManagerPhase3"),l("businessManagerPhase4","specs.wos.businessManagerPhase4"),l("displayWixBookings","specs.wos.displayWixBookings"),l("displayMusicManager","specs.wos.DisplayMusicManager"),f.setIsSilentCallback(k.isSilent),f.setIsHelpDraggableCallback(function(){return b.dragHelpPopup}),g.setIsSilentCallback(k.isSilent),b.headlessApi&&(j.headless=i,b.silentMode=!0,b.noTour=!0,b.smartAssist=!1,b.noSpinners=!0,b.mobileEditor=!0)}]).run(["localizedComponentAttributes","$translate",function(a,b){var c=[{key:"contactForm",messagePrefix:"viewer.contact-form.attributes."},{key:"modelTree",messagePrefix:"modelTree."},{key:"defaults",messagePrefix:"defaults."},{key:"dropDownMenu",messagePrefix:"viewer.drop-down-menu."}];_.each(c,function(c){var d=c.key,e=a.getAttributesTemplateByType(d);if(e){var f=_.clone(e);_.each(_.keys(f),function(a){f[a]=b.instant(c.messagePrefix+a)}),a.setLocalizedAttributes(d,f)}})}])},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(8),e=c(0),f=function(){function a(a,b,c,e,f,g){var h=this;this.overlayManager=a,this.applicationState=b,this.$q=c,this.$injector=e,this.$window=f,this.storyServices=g,this.actions=Object.keys(d.default).reduce(function(a,b){return a[b]=h.$injector.invoke(d.default[b]),a},{}),this.changeKitType="changeKit",this.typesShouldRunOnce=[this.changeKitType]}return a.$inject=["overlayManager","applicationState","$q","$injector","$window","storyServices"],a.prototype.filterAndValidateActions=function(a,b){return _.each(this.typesShouldRunOnce,function(c){var d=_.filter(a,{type:c});d.length&&(d.pop(),d.forEach(function(a){return b[a.originalIndex]={result:"SKIPPED"}}),a=_.filter(a,function(a){return-1===d.indexOf(a)}))}),a},a.prototype.reorderActions=function(a){var b=_.findIndex(a,{type:this.changeKitType});if(-1!==b&&a.length!==b){var c=a.splice(b,1)[0];a.push(c)}return a},a.prototype.makeResponse=function(){var a=this,b=this.storyServices.story.getCurrentState(),c={};return this.overlayManager.listSpanManager.getAll().forEach(function(b){return c[b.listNodeId]=a.overlayManager.listSpanManager.getListSpanLayout(b).height}),e.reduceDbStory({blob:b,isDraft:b.isDraft,storyId:this.storyServices.story.getSourceObject().dbStory.storyId,sectionHeights:c,revision:b.revision})},a.prototype.invoke=function(a){var b=this;a.forEach(function(a,b){return a.originalIndex=b});var c=[],d=this.filterAndValidateActions(a,c),e=this.reorderActions(d);this.$window.console.log("invoke headless",e);var f=this.applicationState.disableMobileEditor();return e.forEach(function(a){f=f.then(function(){return b.actions[a.type](a.data).then(function(){return c[a.originalIndex]={result:"OK"}},function(){return c[a.originalIndex]={result:"ERROR"},b.$q.when()})})}),f.then(function(){return b.applicationState.goToMobilePage(b.storyServices.story.selectedPage)}).then(function(){return{siteData:b.makeResponse(),results:c}})},a.prototype.buildSite=function(a){var b=this;return this.actions.buildSite(a).then(function(){return b.makeResponse()})},a}();b.default=f},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(9),e=c(10),f=c(11),g=c(12),h=c(13),i=c(14),j=c(15),k=c(16),l=c(17),m=c(18),n=c(19),o=c(20),p=c(21),q=c(22);b.default={buildSite:j.default,addPage:d.default,deletePage:h.default,setHomepage:l.default,renamePage:k.default,movePage:q.default,changeKit:e.default,deleteSection:f.default,addSection:g.default,addListItem:i.default,removeListItem:m.default,moveSection:n.default,updateSection:o.default,changeSectionLayout:p.default}},function(a,b,c){"use strict";function d(a,b,c,d){return function(e){return a.addPage(e.alias,e.afterPageId).then(function(){return b.refresh()}).then(function(){return c.calcMenuAnchors()}).then(function(){return d.captureOperation()})}}d.$inject=["pagesManager","menuService","consumerMenu","undoRedo"],Object.defineProperty(b,"__esModule",{value:!0}),b.default=d},function(a,b,c){"use strict";function d(a,b){return function(c){return a.setThemeByID({color:c.id,font:c.id}).then(function(){return b.captureOperation()})}}d.$inject=["themeChooser","undoRedo"],Object.defineProperty(b,"__esModule",{value:!0}),b.default=d},function(a,b,c){"use strict";function d(a,b,c){return function(c){var d=c.pageId&&a.getPageNodeById(c.pageId),e=d&&c.sectionId&&_.find(d.children,{id:c.sectionId});return e&&b.deleteSection(e,"more-actions")}}d.$inject=["modelTree","sectionManager","undoRedo"],Object.defineProperty(b,"__esModule",{value:!0}),b.default=d},function(a,b,c){"use strict";function d(a,b,c){return function(a){console.log("adding section "+a.alias);var d={ceType:a.ceType,id:a.alias,rawSectionBrief:{cardinality:a.cardinality,ceType:a.ceType}},e=c.getPageNodeById(a.pageId);return b.makeSectionInPage(e,d,a.afterSectionId)}}d.$inject=["pagesManager","sectionManager","modelTree"],Object.defineProperty(b,"__esModule",{value:!0}),b.default=d},function(a,b,c){"use strict";function d(a){return function(b){return a.deletePage(b.pageId)}}d.$inject=["pagesPanelManager"],Object.defineProperty(b,"__esModule",{value:!0}),b.default=d},function(a,b,c){"use strict";function d(a,b){return function(c){console.log("adding list item"+c);var d=b.getPageNodeById(c.pageId),e=_.find(d.children,{id:c.sectionId});return e.isList()&&a.createItemNodeAndAddToList(e)}}d.$inject=["listPanelManager","modelTree"],Object.defineProperty(b,"__esModule",{value:!0}),b.default=d},function(a,b,c){"use strict";function d(a,b){return function(b){return a.initByHeadless(b)}}d.$inject=["initService","introManager"],Object.defineProperty(b,"__esModule",{value:!0}),b.default=d},function(a,b,c){"use strict";function d(a,b,c,d,e){return function(f){return f.name&&(c.getNodeById(f.pageId)||e.reject(),f.name=b.fixPageNameIfNeeded(f.name),a.renamePage(f.pageId,f.name)),e.when().then(function(){return d.captureOperation()})}}d.$inject=["pagesManager","pagesPanelManager","modelTree","undoRedo","$p"],Object.defineProperty(b,"__esModule",{value:!0}),b.default=d},function(a,b,c){"use strict";function d(a,b,c,d){return function(e){return b.getNodeById(e.pageId)||d.reject(),a.setHomeById(e.pageId),d.when().then(function(){return c.captureOperation()})}}d.$inject=["pagesManager","modelTree","undoRedo","$p"],Object.defineProperty(b,"__esModule",{value:!0}),b.default=d},function(a,b,c){"use strict";function d(a,b,c){return function(d){console.log("Removing list item"+d);var e=c.getPageNodeById(d.pageId),f=e&&_.find(e.children,{id:d.sectionId}),g=f&&f.isList()&&_.find(f.children,{id:f.id+"."+d.listItemNumber});if(g&&g.isListItem){var h=b.nodeIndexAndStatus(f,g);return a.removeListItem(f,g,h.indexInVisibleItemsIgnoringHeader)}console.log(g?"Can't delete list header/footer":"Couldn't find node")}}d.$inject=["sectionManager","nodeManipulationService","modelTree"],Object.defineProperty(b,"__esModule",{value:!0}),b.default=d},function(a,b,c){"use strict";function d(a,b,c,d,e){return function(f){return a.moveSectionOnPage(f.pageId,f.sectionId,f.afterSectionId).then(function(){return b.reRender(c.BODY,f.pageId)}).then(function(){return d.calcMenuAnchors()}).then(function(){return e.captureOperation()})}}d.$inject=["simpleSolutionManager","storyServices","sitePartTypes","consumerMenu","undoRedo"],Object.defineProperty(b,"__esModule",{value:!0}),b.default=d},function(a,b,c){"use strict";function d(a){return function(b){return console.log("updating section "+b.sectionId+" in page "+b.pageId),a.updateSection(b)}}d.$inject=["sectionManager"],Object.defineProperty(b,"__esModule",{value:!0}),b.default=d},function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i){return function(j){var k=h.getNodeById(j.pageId),l=h.getNodeById(j.sectionId),m=d.getAllLayoutPresets(!1,l.contentElementType),n=c.getNodeSitePart(l),o=a.create(builder.PresetsStrategyType.Generic,builder.PresetsStrategyMode.Change);return o.preparePreset(m,j.desktopLayoutId,l,!1).then(function(a){return e.handlePreviewSelected(a,!0,j.pageId,n)}).then(function(){return g.getLgByNodeId(n,j.pageId,j.sectionId).segments[0].mobileLg.segments[0].getLENoError()?i.when():f.prepareForMobileRendering([k]).then(function(){return f.renderMobilePages([k])})}).then(function(){return o.preparePreset(m,j.mobileLayoutId,l,!0).then(function(a){return b.handlePreviewSelected(a,j.pageId,n)})})}}d.$inject=["presetsStrategyFactory","mobileSectionManager","modelTreeHelpers","defaultsService","sectionManager","storyServices","layoutSolver","modelTree","$p"],Object.defineProperty(b,"__esModule",{value:!0}),b.default=d},function(a,b,c){"use strict";function d(a,b,c,d){return function(e){return d.when().then(function(){return a.movePageAfterPage(e.pageId,e.afterPageId)}).then(function(){return b.refresh()}).then(function(){return c.captureOperation()})}}d.$inject=["pagesManager","menuService","undoRedo","$p"],Object.defineProperty(b,"__esModule",{value:!0}),b.default=d},function(a,b,c){"use strict";function d(a){var b=e({},a);if(b.isDraft)return{draft:!0,instanceId:b.storyId};var c=b.blob.bft.data.children,d=c.find(function(a){return"GeneralDescription"===a.contentElementType}),g=c.find(function(a){return"footer"===a.id}),j=d&&i(b,d),k=g&&i(b,g);return{draft:!1,pages:c.filter(function(a){return"Page"===a.contentElementType}).map(function(a){var c=f(a,["id","lastRenderRevision",["displayName","title"],["userHidden","visible",function(a){return!a}]]);return e({},c,{sections:h(b,a.children)})}),header:j,footer:k,revision:b.revision,instanceId:b.storyId,homePageId:b.blob.bft.homePageId,currentPageGeometry:b.sectionHeights,kit:{mainKit:b.blob.selectedStyle.mainKit}}}var e=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};Object.defineProperty(b,"__esModule",{value:!0}),b.default=d;var f=function(a,b){var c={};return b.forEach(function(b){"string"==typeof b?c[b]=a[b]:b[2]&&"function"==typeof b[2]?c[b[1]]=b[2](a[b[0]]):c[b[1]]=a[b[0]]}),c},g=function(a,b){var c=a.blob.locale.contentElements[b.id.replace(/\./g,"_")];return Object.keys(c).map(function(a){var d=c[a];return{key:a,type:d.type,subtype:d.subType,label:"LABEL",visible:b.argsMatchingPolicy[a],mobileVisible:b.argsMatchingPolicy[a]&&!b.mobileArgsPolicy[a],value:c[a].value}})},h=function(a,b){return b.filter(function(a){return!a.userHidden}).map(function(b){return i(a,b)})},i=function(a,b){var c=f(b,["id",["alias","title"],["userHidden","visible",function(a){return!a}],["contentElementType","ceType"]]);return b.children&&b.children.length?e({},c,{children:h(a,b.children)}):e({},c,{fields:g(a,b)})}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(0),e=function(){function a(a,b,c,d,e,f,g,h,i){this.$q=a,this.$window=b,this.$timeout=c,this.localStorageService=d,this.$element=e,this.themeChooser=f,this.applicationState=g,this.storyApi=h,this.modelTree=i,this.error="",this.json="",this.initHelps(),this.buttonStyle={border:"3px solid #999",cursor:"pointer",boxShadow:"0px 0px 3px 3px #999",padding:3,left:"calc(50% - 50px)",position:"relative",width:100,margin:"10px 0"},this.selectStyle={border:"1px solid lightblue",width:100},this.blueButtonStyle={border:"1px solid #00f",margin:3,padding:3}}return a.$inject=["$q","$window","$timeout","localStorageService","$element","themeChooser","applicationState","storyApi","modelTree"],a.prototype.getFirstPageNode=function(){var a=this.getAllPageNodes();return a&&a[0]},a.prototype.getAllPageNodes=function(){return this.modelTree&&this.modelTree.getPagesNodes()},a.prototype.builderState=function(){return-1===this.$window.location.href.indexOf("intro")},a.prototype.getTop=function(){return-590},a.prototype.$onInit=function(){var a=this,b=1024,c=10;this.$element.css({position:"absolute",left:"calc((100% - "+b+"px) / 2)",top:this.getTop(),width:b,height:600,background:"white",border:"solid blue",borderWidth:"1px 1px 0 1px",display:"flex",paddingBottom:c,flexDirection:"column"}),this.$element.find("hr").css("height",c),this.$element.find("hr").on("click",function(){return a.$element.css("top",parseInt(a.$element.css("top"),10)?0:a.getTop())})},a.prototype.reset=function(){this.error="",this.json="",
this.helpMessage=""},a.prototype.warmup=function(){var a=this;this.helpMessage="Creating blank site.....";var b={templateMetaSiteId:"bb80349d-97a4-48a5-b9f2-8ddc2463709a",suggestedSiteName:"name",creationPhase:"DuringIntro"};this.storyApi.create2(b).then(function(b){a.localStorageService.clearAll();var c=b.instanceId+":"+b.metaSiteId;a.$window.location.href=a.$window.location.pathname+(a.$window.location.search||"?")+"&"+Math.random()+"#!/builder/story/"+c+"?headlessApi"},function(b){return a.helpMessage=b})},a.prototype.build=function(){var a,b=this;this.$q.when().then(function(){if(a=JSON.parse(b.json),!Array.isArray(a)||1!==a.length)throw new Error("the json must be array of size 1");var c=a[0];if(!(c.category&&c.category.industryId&&c.category.structureId&&c.name))throw new Error("need to have name, industry and structure");return c.category.manualAliases=[],c.category.block=!1,b.$window.console.log("building site...",c),b.$window.headless.buildSite(c)}).then(function(a){b.$window.console.log("finished build",a),b.reset()}).catch(function(c){b.$window.console.log("fail to invoke headless build",a,c.stack),b.reportError(c)})},a.prototype.validateActions=function(a){if(!Array.isArray(a))throw new Error("the json must be array");if(!a.every(function(a){return"string"==typeof a.type&&"object"==typeof a.data}))throw new Error('each array element in the json must have string property "type" and object property "data"')},a.prototype.update=function(){var a,b=this;this.$q.when().then(function(){return a=JSON.parse(b.json),b.validateActions(a),b.$window.console.log("start invoking headless actions",a),b.$window.headless.invoke(a)}).then(function(c){b.$window.console.log("finish invoking headless actions",a),b.reset(),b.helpMessage=JSON.stringify(c,null,2),b.$window.console.log("Response data",c)}).catch(function(c){b.$window.console.log("fail to invoke headless actions",a,c.stack),b.reportError(c)})},a.prototype.getKitsForHelp=function(){return this.themeChooser.getRegularThemes().map(function(a){return a.displayName+": "+a.id}).join("\n")},a.prototype.getSomeTerms=function(){return[{term:"School",industryId:"57d57436f3844487709d90cc",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School Blog",industryId:"5d6dd907beb2ba4daa3946b4",structureId:"b0a520919b99728bae200018"},{term:"School Blogger",industryId:"5d6dd907beb2ba4daa3946b4",structureId:"b0a520919b99728bae200018"},{term:"School Choir",industryId:"23c432cc83ddc73ad3ddcb3d",structureId:"02c27dfb52b10a2442c8b9db"},{term:"School Bag Manufacturer",industryId:"26d27710f9cec0657f890546",structureId:"bfefcdf90455208ce57fba0d"},{term:"School Project",industryId:"d9afb557af9390741c5ce35b",structureId:"c8bef80cfea853a15d6562a6"},{term:"School of Music",industryId:"9ae489697fe8f69572c8a4db",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Musical Arts",industryId:"9ae489697fe8f69572c8a4db",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Jazz",industryId:"50c274987982e7528ad6a0a4",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Infantry",industryId:"fd730e0fc09bbde2cadb2fd2",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Sportfishing",industryId:"17de70150d36b3e303f66a57",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Dental Medicine",industryId:"c41d652901114802b7b94731",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Homeopathy",industryId:"521f54098e960e5fd73a9dd9",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School Counselor",industryId:"f58760c40260496737aa5904",structureId:"28e95344ac1c3b2a8f8b4cdc"},{term:"School of Business",industryId:"b85e554832b37d4a51d2bba4",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Dentistry",industryId:"c41d652901114802b7b94731",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Hindu Studies",industryId:"f4d8d9cb889fca8a037dd0ed",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Accounting",industryId:"418d612911b5eae41bf6c2c9",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Medicine",industryId:"36b29cec410200a2ab848e64",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Optometry",industryId:"45eb25aabb351e8b455bdade",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Buddhism",industryId:"a3413064981ed51ee264cb44",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Reflexology",industryId:"5ffe77e0825e4c78185dc4dc",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Pharmacy",industryId:"e2df1a9f2303b7f7e692fb95",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School for The Deaf",industryId:"fa86e88f6c793c3fd02eaa13",structureId:"d92c36de57e30d8ba567d7de"},{term:"School of Biological Sciences",industryId:"c3fd13d4000e090b425a671e",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School for the Hearing Impaired",industryId:"fa86e88f6c793c3fd02eaa13",structureId:"d92c36de57e30d8ba567d7de"},{term:"School of Biology",industryId:"c3fd13d4000e090b425a671e",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Environmental Studies",industryId:"c36550c89656f90a5dedcd12",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Body Piercing",industryId:"da63ef5ba5a593b6dbf8a28c",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School Bus Manufacturer",industryId:"8632e13c921e57ec06794e35",structureId:"bfefcdf90455208ce57fba0d"},{term:"School Supplies Manufacturer",industryId:"3421e87799c8866972fd627e",structureId:"bfefcdf90455208ce57fba0d"},{term:"School Bus Service",industryId:"8632e13c921e57ec06794e35",structureId:"9961911671709492501a101d"},{term:"School Supply Store",industryId:"3421e87799c8866972fd627e",structureId:"e1a2f009d01ba711cb49a6cb"},{term:"School of Veterinary Medicine",industryId:"c0250da8e70668daaf986c76",structureId:"ae9e8b38d6271d38e4ff7314"},{term:"School of Hair Design",industryId:"f67ab1a7a38ef9ae20cd784d",structureId:"ae9e8b38d6271d38e4ff7314"}]},a.prototype.getPagesForHelp=function(a,b){return this.modelTree.getPagesNodes().map(function(c){var d=c.getDisplayName()+": "+c.getId(),e="";return a&&(e="\n"+c.children.filter(function(a){return!a.userHidden&&(!b||a.isList())}).map(function(a){return"\t"+a.contentElementType+": "+a.getId()+(a.isList()?" (List)":"")}).join("\n")),d+e}).join("\n")},a.prototype.reportError=function(a){this.error=a.stack,this.$window.setTimeout(function(){throw a})},a.prototype.help=function(a){this.helpMessage="";var b=[];if(this.json.length>0)try{b=JSON.parse(this.json)}catch(a){return void this.reportError(a)}this.error="",this.json=JSON.stringify(b.concat(a.buildExample()),null,2),this.helpMessage=a.buildMessage()},Object.defineProperty(a.prototype,"sections",{get:function(){var a=this.getFirstPageNode();if(a){return a.children.map(function(a){return{id:a.id,name:a.alias||a.contentElementType}}).slice(1)}return[]},enumerable:!0,configurable:!0}),a.prototype.initHelps=function(){var a=this;this.helps=[{title:"Add Page",buildExample:function(){return{type:d.SiteUpdateType.AddPage,data:{alias:"The Team",afterPageId:null}}},buildMessage:function(){return"Available page ids:\n"+a.getPagesForHelp(!0)}},{title:"Delete Page",buildExample:function(){var b=a.getFirstPageNode(),c=b&&b.getId();return{type:d.SiteUpdateType.DeletePage,data:{pageId:c}}},buildMessage:function(){return"Available page ids:\n"+a.getPagesForHelp(!0)}},{title:"Set Homepage",buildExample:function(){var b=a.getFirstPageNode(),c=b&&b.getId();return{type:d.SiteUpdateType.SetHomepage,data:{pageId:c}}},buildMessage:function(){return"Available page ids:\n"+a.getPagesForHelp(!0)}},{title:"Rename Page",buildExample:function(){var b=a.getFirstPageNode(),c=b&&b.getId();return{type:d.SiteUpdateType.RenamePage,data:{pageId:c||"",name:"Spaghetti Monster"}}},buildMessage:function(){return"Available page ids:\n"+a.getPagesForHelp()}},{title:"Delete Section",buildExample:function(){var b=a.getFirstPageNode(),c=b&&b.getId(),e=c&&b.children&&b.children[1]&&b.children[1].id;return{type:d.SiteUpdateType.DeleteSection,data:{pageId:c||"",sectionId:e||""}}},buildMessage:function(){return"Available page ids and sections:\n"+a.getPagesForHelp(!0)}},{title:"Add Section",buildExample:function(){var b=a.getFirstPageNode(),c=b&&b.getId(),e=c&&b.children&&b.children[1]&&b.children[1].id;return{type:d.SiteUpdateType.AddSection,data:{pageId:c||"",afterSectionId:e||"",alias:"Service",ceType:"Service",cardinality:3}}},buildMessage:function(){return"Available page ids:\n"+a.getPagesForHelp()}},{title:"Move Section",buildExample:function(){var b=a.getFirstPageNode(),c=b&&b.getId(),e=c&&b.children&&b.children[1]&&b.children[1].id,f=c&&b.children&&b.children.length-1||0,g=c&&b.children&&b.children[f]&&b.children[f].id;return{type:d.SiteUpdateType.MoveSection,data:{pageId:c||"",sectionId:e||"",afterSectionId:g||""}}},buildMessage:function(){return"Available page ids and sections:\n"+a.getPagesForHelp(!0,!0)}},{title:"Add List Item",buildExample:function(){var b=a.getFirstPageNode(),c=b&&b.getId(),e=c&&b.children&&b.children[1]&&b.children[1].id;return{type:d.SiteUpdateType.AddListItem,data:{pageId:c||"",sectionId:e||""}}},buildMessage:function(){return"Available page ids and sections:\n"+a.getPagesForHelp(!0,!0)}},{title:"Remove List Item",buildExample:function(){var b=a.getFirstPageNode(),c=b&&b.getId(),e=c&&b.children&&b.children[1]&&b.children[1].id;return{type:d.SiteUpdateType.RemoveListItem,data:{pageId:c||"",sectionId:e||"",listItemNumber:0}}},buildMessage:function(){return"Available page ids and sections:\n"+a.getPagesForHelp(!0,!0)}},{title:"Change Kit",buildExample:function(){return{type:d.SiteUpdateType.ChangeKit,data:{id:"56e80ad06c755b9a00887e26"}}},buildMessage:function(){return"Available kits ids:\n"+a.getKitsForHelp()}},{title:"Change Section Layout",buildExample:function(){var b=a.getFirstPageNode(),c=b&&b.getId(),e=c&&b.children&&b.children[1]&&b.children[1].id;return{type:d.SiteUpdateType.ChangeSectionLayout,data:{pageId:c||"",sectionId:e||"",mobileLayoutId:"",desktopLayoutId:""}}},buildMessage:function(){return"Available page ids and sections:\n"+a.getPagesForHelp(!0)}},{title:"Move Page",buildExample:function(){var b=a.getAllPageNodes(),c=b[0]&&b[0].getId(),e=b[1]&&b[1].getId();return{type:d.SiteUpdateType.MovePage,data:{pageId:c||"",afterPageId:e||""}}},buildMessage:function(){return"Available page ids:\n"+a.getPagesForHelp()}},{title:"Update Section",buildExample:function(){var b=a.getFirstPageNode(),c=b&&b.getId();if(!(c&&b.children&&b.children.length))return{};var e=a.theSection&&b.children.find(function(b){return b.id===a.theSection.id});if(!e)return{};var f,g=e.id;e&&e.children&&e.children.length&&(e=e.children[1],f=e.id);var h={id:g,ceType:e.contentElement.type,title:e.alias||e.contentElement.type,visible:!0,fields:_.collect(e.contentElement.values,function(a,b){return{key:b,type:a.type,subtype:a.subType,visible:!0,label:"label",value:a.value}})},i={type:d.SiteUpdateType.UpdateSection,data:{pageId:c,sectionId:g,sectionData:h}};return f&&(i.data.listItemId=f),i},buildMessage:function(){return"pick a section from the drop down and click UpdateSection to create the update message"}},{title:"Build Site",buildExample:function(){var b=a.getSomeTerms();return{name:"mybusiness",category:b[_.random(0,b.length)],socialLinks:[],lastSearchedTerm:"boom",serviceOffer:[],validCategory:!0}},buildMessage:function(){return"Some terms to use:\n"+JSON.stringify(a.getSomeTerms(),null,2)}}]},a}();b.default=e},function(a,b){a.exports="<textarea ng-model='$ctrl.json' ng-show='$ctrl.builderState()' ng-style='{fontFamily: &#39;monospace&#39;, borderBottom: &#39;1px solid gray&#39;, width: &#39;100%&#39;, height: 200, flexShrink: 0}'></textarea>\n<p ng-show='!$ctrl.builderState()'>\n<button ng-click='$ctrl.warmup()' ng-style='$ctrl.buttonStyle'>Warm up</button>\n</p>\n<p ng-show='$ctrl.builderState()'>\n<button ng-click='$ctrl.update()' ng-style='$ctrl.buttonStyle'>Update</button>\n</p>\n<p ng-show='$ctrl.builderState()'>\n<button ng-click='$ctrl.build()' ng-style='$ctrl.buttonStyle'>Build</button>\n</p>\n<p ng-show='$ctrl.builderState()'>\n<button ng-click='$ctrl.reset()' ng-style='$ctrl.buttonStyle'>Reset</button>\n</p>\n<p>\n<button ng-click='$ctrl.help(help)' ng-repeat='help in $ctrl.helps' ng-style='$ctrl.blueButtonStyle'>{{help.title}}</button>\n</p>\n<p>\nSections:\n<select ng-model='$ctrl.theSection' ng-options='section as section.name for section in $ctrl.sections track by section.id' ng-style='$ctrl.selectStyle'></select>\n</p>\n<p ng-if='$ctrl.helpMessage'>Help:</p>\n<pre ng-if='$ctrl.helpMessage' ng-style='{overflow: &#39;auto&#39;, borderTop: &#39;1px solid gray&#39;}'>{{$ctrl.helpMessage}}</pre>\n<pre ng-if='$ctrl.error' ng-style='{overflow: &#39;auto&#39;, background: &#39;red&#39;, color: &#39;white&#39;}'>{{$ctrl.error}}</pre>\n<hr ng-style='{position: &#39;absolute&#39;, bottom: 0, width: &#39;100%&#39;, background: &#39;blue&#39;, cursor: &#39;pointer&#39;}'>\n"},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(27);b.sanitizeEmail=d.sanitizeEmail,b.sanitizePhone=d.sanitizePhone,b.sanitizePII=d.sanitizePII},function(a,b,c){"use strict";function d(a){var b=/(\w+[^\s]*)@(\w+\.\w+)/g;return a.replace(b,function(a,b,c){return h.hashEmail(b,c)})}function e(a){return i.validateEmail(a)?d(a):a}function f(a){if(!i.validatePhone(a))return a;var b=a.substr(0,a.length-h.PHONE_NUM_DIGITS_TO_HASH),c=a.substr(b.length);return h.hashPhone(b,c)}function g(a){return i.validateString(a)?d(a):a}Object.defineProperty(b,"__esModule",{value:!0});var h=c(28),i=c(29);b.sanitizeEmail=e,b.sanitizePhone=f,b.sanitizePII=g},function(a,b,c){"use strict";function d(a,b){return"@"+b}function e(a,c){return void 0===a&&(a=""),void 0===c&&(c=""),""+a+Array(b.PHONE_NUM_DIGITS_TO_HASH+1).join("*")}Object.defineProperty(b,"__esModule",{value:!0}),b.PHONE_NUM_DIGITS_TO_HASH=5,b.hashEmail=d,b.hashPhone=e},function(a,b,c){"use strict";function d(a){return"string"==typeof a&&a.length>0}function e(a){return d(a)&&-1!==a.indexOf("@")}function f(a){return d(a)&&a.length>2}Object.defineProperty(b,"__esModule",{value:!0}),b.validateString=d,b.validateEmail=e,b.validatePhone=f}]);var config;!function(a){angular.module("siteGeneratorCommon").config(["wixBiLoggerProvider",function(a){var b=function(a){return a.getMetaSiteId()};b.$inject=["consumerBiLoggerHelpers"],a.setConfig({adapter:"onboarding",defaultEventArgs:{msid:b}})}])}(config||(config={}));var intro;!function(a){a.INTRO_STATES={INTRO:"intro",INTRO_CATEGORY_SEARCH:"intro.category-search",INTRO_BLOCKED_CATEGORY:"intro.blocked-category",INTRO_SERVICES_OFFER:"intro.service-offer",INTRO_IMPORT_SITE_CONTENT:"intro.import-site-content",INTRO_BUSINESS_NAME:"intro.business-name",INTRO_BUSINESS_LOCATION:"intro.business-location",INTRO_BUSINESS_DATES:"intro.business-dates",INTRO_EVENT_DETAILS:"intro.event-details",INTRO_SEARCH_CONFIRM:"intro.search-confirm",INTRO_IMPORT_SITE_CONFIRM:"intro.import-site-confirm",INTRO_SELECT_USER:"intro.select-user",INTRO_EDIT_USER:"intro.edit-user"}}(intro||(intro={}));var builder;!function(a){a.BUILDER_STATES={BUILDER:"builder",BUILDER_STORY:"builder.story",BUILDER_STORY_PREVIEW:"builder.story.preview",BUILDER_ADD_SECTION:"builder.story.add",BUILDER_ADD_PAGE:"builder.story.add-page",BUILDER_EDIT:"builder.story.edit",BUILDER_MEDIA_SETTINGS:"builder.story.edit.media-settings",BUILDER_NEW_MEDIA_SETTINGS:"builder.story.new-media-settings",BUILDER_DESIGN:"builder.story.design",BUILDER_DESIGN_KITS:"builder.story.design.kits",BUILDER_DESIGN_KIT:"builder.story.design.kit",BUILDER_DESIGN_KIT_COLORATION:"builder.story.design.coloration",BUILDER_DESIGN_KIT_COLORATION_ADVANCED:"builder.story.design.advancedpaletteediting",BUILDER_DESIGN_KIT_FONTS_NEW:"builder.story.design.fonts",BUILDER_DESIGN_KIT_ANIMATIONS:"builder.story.design.animations",BUILDER_SECTION_DESIGN_ANIMATIONS:"builder.story.section-animations",BUILDER_SLIDESHOW_ANIMATIONS:"builder.story.slideshow-animations",BUILDER_SECTION_DESIGN_BACKGROUND:"builder.story.section-background",BUILDER_SECTION_DESIGN_COLORS:"builder.story.section-colors",BUILDER_SECTION_DESIGN_FONTS:"builder.story.section-fonts",BUILDER_SWITCH_PRESET:"builder.story.switch-preset",BUILDER_PAGES:"builder.story.pages",BUILDER_SELECTED_PAGE:"builder.story.page",BUILDER_PAGES_SEO:"builder.story.pages.seo",BUILDER_HOMEPAGE_SEO:"builder.story.pages.hompage-seo"}}(builder||(builder={}));var playground;!function(a){a.PLAYGROUND_STATES={CC_PLAYGROUND:"playground",BACKDROP_PLAYGROUND:"backdrop",LOGO_COLOR_PLAYGROUND:"logo-color-playground",ANALYSIS_PLAYGROUND:"analysis"}}(playground||(playground={}));var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},config;!function(a){a.STATES=__assign({},intro.INTRO_STATES,builder.BUILDER_STATES,playground.PLAYGROUND_STATES),a.STATE_PARAMS_KEY={MODEL:"model",GEO_SEARCH:"geosearch"},a.STATE_PARAMS_VALUES={MODEL_NOT_FOUND:"not-found",MODEL_FOUND_EST:"found-est",MODEL_FOUND:"found",GEO_SEARCH_FIRST_TIME:"first-time",GEO_SEARCH_NOT_FOUND:"not-found",GEO_SEARCH_EST_FAILED:"est-failed"},a.BACKGROUND_PANEL_MODE={HEADER_MODE:"header",LIST_MODE:"list"},angular.module("siteGeneratorStaticsConsumerAppInternal").config(["previewScaleProvider",function(a){function b(a,b){return.55*a/Viewer.ViewerDesktopBaseSize}a.range({viewport:[1280,Number.POSITIVE_INFINITY],stage:[1280,Number.POSITIVE_INFINITY],scale:function(a,c){return Math.min(1,b(a,c))}}).range({viewport:[0,Number.POSITIVE_INFINITY],stage:[300,1280],scale:function(a,c){var d=(c-300)/Viewer.ViewerDesktopBaseSize;return Math.min(d,b(a,c))}})}]),angular.module("siteGeneratorStaticsConsumerAppConfig").config(["$stateProvider","$urlRouterProvider","$locationProvider","flagsProvider",function(b,c,d,e){var f=317,g=function(a){return a.initDropTarget()};g.$inject=["dropTargetCalculator"];var h=function(){setTimeout(function(){$("#preview-content").offset({left:f})},4e3)},i=function(a,b){a.setScaleFactor(PreviewScale.MaxScaleFactor),(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0)&&h()};i.$inject=["previewScale","flags"];var j=function(a,b){a.setScaleFactor(PreviewScale.MaxScaleFactor)};j.$inject=["previewScale","flags"];var k=function(a,b,c){a.showMediaSettings(),i(b,c)};k.$inject=["nodeEditorManager","previewScale","flags"];var l=function(a){a.hideMediaSettings()};l.$inject=["nodeEditorManager"];var m=function(a,b){a.unlockDropTarget(),a.clearDropTarget(),a.listSpanManager.clearPlaceholder(),b.reset(!0)};m.$inject=["overlayManager","previewScale"];var n=function(a){a.clearContentFocus()};n.$inject=["applicationState"];var o=function(a,b){b.resetFocus(a.contentId)};o.$inject=["$stateParams","contentElementFieldManager"];var p=function(a){a.init()};p.$inject=["revisionReloader"];var q=function(a){a.reset()};q.$inject=["revisionReloader"];var r=function(a){a.showBackdrop=!0};r.$inject=["overlayManager"];var s=function(a){a.showBackdrop=!1};s.$inject=["overlayManager"];var t=function(a,b,c){c.loaded().then(function(){a.goToPageSeo(b.homePageId)})};t.$inject=["applicationState","modelTree","initService"];var u=b.state(a.STATES.INTRO,{url:"/"+a.STATES.INTRO,template:"<intro></intro>"});Object.keys(a.STATES).map(function(b){return a.STATES[b]}).filter(function(b){return 0===b.indexOf(a.STATES.INTRO+".")}).forEach(function(a){var b=a.replace(".","-");u=u.state(a,{url:"/"+a.replace("intro.",""),template:"<"+b+"></"+b+">",resolve:{hideContent:["introStep",function(a){return a.hideContent()}]}})}),u.state(a.STATES.BUILDER,{url:"/builder?silent&industryId&structureId&businessName",params:{silent:{value:"false",squash:!0}},template:void 0,views:{"builder-panel":{template:'<div ui-view=""></div>'}},data:{}}).state(a.STATES.BUILDER_STORY,{url:"/story/{storyId}",template:"<story-container></story-container>",mobile:!0,onEnter:n}).state(a.STATES.BUILDER_STORY_PREVIEW,{url:"/preview",template:"<story-container></story-container>",mobile:!0,onEnter:p,onExit:q}).state(a.STATES.BUILDER_ADD_SECTION,{url:"/add",template:"<add-section></add-section>",data:{panelWidth:builder.PreviewList.PreviewListWidth+174},onEnter:g,onExit:m}).state(a.STATES.BUILDER_ADD_PAGE,{url:"/add-page",template:'<add-section data-page-mode="1"></add-section>',data:{panelWidth:builder.PreviewList.PreviewListWidth+174}}).state(a.STATES.BUILDER_PAGES,{url:"/pages",template:e.refactorPagesPanel?"<pages-panel-split></pages-panel-split>":"<pages-panel></pages-panel>",data:{panelWidth:300},onEnter:n}).state(a.STATES.BUILDER_SELECTED_PAGE,{url:"/page/{pageId}",template:e.refactorPagesPanel?"<pages-panel-split></pages-panel-split>":"<pages-panel></pages-panel>",mobile:!0,data:{panelWidth:300}}).state(a.STATES.BUILDER_PAGES_SEO,{url:"/seo/{pageId}",template:"<seo-panel></seo-panel>",data:{panelWidth:300},onEnter:r,onExit:s}).state(a.STATES.BUILDER_EDIT,{url:"/edit/{contentId}/{childId}",template:"<builder-edit></builder-edit>",mobile:!0,data:{panelWidth:f},onEnter:i,onExit:o}).state(a.STATES.BUILDER_MEDIA_SETTINGS,{url:"/edit/{contentId}/{childId}",template:"<builder-edit></builder-edit>",mobile:!0,data:{panelWidth:f},onEnter:k,onExit:l}).state(a.STATES.BUILDER_SWITCH_PRESET,{url:"/switch-preset/{contentId}",template:"<switch-preset></switch-preset>",data:{panelWidth:builder.PreviewList.PreviewListWidth,mobilePanelWidth:builder.PreviewList.MobilePreviewListWidth},mobile:!0}).state(a.STATES.BUILDER_DESIGN,{url:"/design",abstract:!0,template:"<ui-view/>",onExit:j,data:{panelWidth:300}}).state(a.STATES.BUILDER_DESIGN_KITS,{url:"/kits",template:"<design-panel></design-panel>",data:{panelWidth:300}}).state(a.STATES.BUILDER_DESIGN_KIT,{url:"/kit",template:"<design-panel-kit></design-panel-kit>",data:{panelWidth:300}}).state(a.STATES.BUILDER_DESIGN_KIT_COLORATION,{url:"/coloration",template:"<coloration-panel></coloration-panel>"}).state(a.STATES.BUILDER_DESIGN_KIT_COLORATION_ADVANCED,{url:"/advanced",template:"<advanced-palette-editing></advanced-palette-editing>"}).state(a.STATES.BUILDER_DESIGN_KIT_FONTS_NEW,{url:"/fonts/",template:"<font-panel></font-panel>",data:{panelWidth:300}}).state(a.STATES.BUILDER_DESIGN_KIT_ANIMATIONS,{url:"/animations",template:"<animation-panel></animation-panel>",data:{panelWidth:300}}).state(a.STATES.BUILDER_NEW_MEDIA_SETTINGS,{url:"/media-settings/{contentId}/{childId}",template:"<media-settings-panel-new></media-settings-panel-new>",data:{panelWidth:360}}).state(a.STATES.BUILDER_SECTION_DESIGN_ANIMATIONS,{url:"/section-animations/{contentId}",template:"<section-animation-panel></section-animation-panel>",data:{panelWidth:360}}).state(a.STATES.BUILDER_SLIDESHOW_ANIMATIONS,{url:"/slideshow-animations/{contentId}",template:"<slideshow-animation-panel></slideshow-animation-panel>",data:{panelWidth:360}}).state(a.STATES.BUILDER_SECTION_DESIGN_BACKGROUND,{url:"/section-backgrounds/{contentId}/{mode}",template:"<section-background-panel></section-background-panel>",data:{panelWidth:360}}).state(a.STATES.BUILDER_SECTION_DESIGN_FONTS,{url:"/section-font/{contentId}",template:"<section-font-panel></section-font-panel>",data:{panelWidth:360}}).state(a.STATES.BUILDER_SECTION_DESIGN_COLORS,{url:"/section-color/{contentId}",template:"<switch-color></switch-color>",data:{panelWidth:builder.PreviewList.PreviewListWidth}}).state(a.STATES.BUILDER_HOMEPAGE_SEO,{url:"/homepage-seo",onEnter:t}).state("image-search-debug",{url:"/image-search-debug",template:"<image-search-debug>"}).state("server-side-test",{url:"/server-side-test",template:"<server-side-test>"}).state("tester",{url:"/tester",template:"<tester>"}).state(a.STATES.CC_PLAYGROUND,{url:"/playground?panel",params:{panel:{value:"all",squash:!0}},template:'<cc-playground visible-panel-label="{{panel}}" cc-scrollbar class="cc-playground"></cc-playground>',controller:["$scope","$stateParams",function(a,b){return a.panel=b.panel}]}).state(a.STATES.BACKDROP_PLAYGROUND,{url:"/backdrop",template:"<backdrop-playground></backdrop-playground>"}).state(a.STATES.LOGO_COLOR_PLAYGROUND,{url:"/logo-color-playground",template:"<logo-color-playground></logo-color-playground>"}).state(a.STATES.ANALYSIS_PLAYGROUND,{url:"/analysis",template:"<analysis-playground></analysis-playground>"}),d.hashPrefix("!"),c.otherwise("/"+a.STATES.INTRO)}])}(config||(config={}));var BuilderEdit=function(){function a(a){this.$stateParams=a,this.contentId=this.$stateParams.contentId,this.childId=this.$stateParams.childId}return a.$inject=["$stateParams"],a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("builderEdit",{templateUrl:"views/builder-edit.html",controller:BuilderEdit});var ListEnterEnd=function(){function a(a){this.$timeout=a}return a.$inject=["$timeout"],a.prototype.link=function(a,b,c){if(a.$last&&c.listEnterEnd){var d=this.buildCallbackFrom(c.listEnterEnd,a),e=this.calculateTotalAnimationsDurations(b),f=e.transitionTotalDuration,g=e.animationTotalDuration;if(g<1&&f<1)return void d();var h=g>f?["animationend",g]:["transitionend",f],i=h[0],j=h[1];this.listenToOwnEventOnce(b,i,d,j)}},a.prototype.buildCallbackFrom=function(a,b){return function(){return b.$applyAsync(a)}},a.prototype.calculateTotalAnimationsDurations=function(a){var b=a.css(["transitionDuration","transitionDelay","animationDuration","animationDelay","animationIterationCount"]);return{transitionTotalDuration:this.cssTimeToMilliseconds(b.transitionDuration)+this.cssTimeToMilliseconds(b.transitionDelay),animationTotalDuration:this.cssTimeToMilliseconds(b.animationDuration)*parseInt(b.animationIterationCount,10)+this.cssTimeToMilliseconds(b.animationDelay)}},a.prototype.cssTimeToMilliseconds=function(a){return Math.floor(parseFloat(a)*(a.endsWith("ms")?1:1e3))},a.prototype.listenToOwnEventOnce=function(b,c,d,e){var f=_.once(d),g=function(a){a.target===b[0]?f():b.one(c,g)};b.one(c,g);var h=e+a.TIMEOUT_DELTA;this.$timeout(f,h)},a}();ListEnterEnd.TIMEOUT_DELTA=500,angular.module("siteGeneratorCommon").directive("listEnterEnd",["$timeout",function(a){return new ListEnterEnd(a)}]);var UrlParser=function(){function a(){}return a.prototype.queryParams=function(){var a={},b=window.location.href.split("?").filter(function(a,b){return 0!==b});return _.flatten(_.map(b,function(a){return a.split("#")[0].split("&")})).forEach(function(b){var c=b.split("=");a[c[0]]=c[1]}),a},a.prototype.getQueryStringValueByKey=function(a){var b=this.queryParams();return b.hasOwnProperty(a)?b[a]:""},a}();angular.module("siteGeneratorCommon").service("urlParser",UrlParser);var helpers;!function(a){var b=function(){function a(a,b,c,d,e){void 0===e&&(e=".cc-panel-body"),this.$timeout=a,this.$element=b,this.selectedSelector=c,this.popupSelector=d,this.panelBodySelector=e}return Object.defineProperty(a.prototype,"panelBody",{get:function(){if(!this._panelBody){var a=this.$element.find(this.panelBodySelector);a.length&&(this._panelBody=a)}return this._panelBody},enumerable:!0,configurable:!0}),a.prototype.scrollToExposePopup=function(){var a=this;this.$timeout(function(){var b=a.$element.find(a.selectedSelector);a._popup=a.$element.find(a.popupSelector);var c=a._popup[0].scrollHeight,d=a.panelBody.scrollTop()+a.panelBody.height(),e=b.position().top+b.outerHeight(!0)+c,f=Math.min(0,d-e);e>a.panelBody[0].scrollHeight&&(a.paddingAdded=!0,a.panelBody.css("padding-bottom",c)),a.panelBody.animate({scrollTop:"-="+f})})},a.prototype.reset=function(){this.paddingAdded&&(this.paddingAdded=!1,this.panelBody.css("padding-bottom",0).animate({scrollTop:this.panelBody[0].scrollHeight-this.panelBody.height()-this._popup[0].scrollHeight}))},a}();a.PopupScroller=b}(helpers||(helpers={}));var helpers;!function(a){var b=function(){function a(a,b,c,d,e){this.$timeout=a,this.assistantManager=b,this.$q=c,this.$element=d,this.options=e,this.options=Object.assign({selectedSelector:".-selected",scrollableContainerSelector:".cc-panel-body",selectedIconSize:12},this.options)}return a.prototype.scrollToSelected=function(a){var b=this;return void 0===a&&(a="animated"),!1!==this.assistantManager.getCustomTaskData("scrollToSelectedBackground")?this.$q(function(c){b.$timeout(function(){var d=b.$element.find(b.options.selectedSelector);b.doAnimatedVerticalScroll({childToScrollTo:d,scrollableContainer:b.$element.find(b.options.scrollableContainerSelector),calculateScroll:function(a){return Math.max(0,a-(b.options.considerSelectedIcon?b.options.selectedIconSize:0))},duration:"animated"===a?1e3:0}).then(c)},100)}):this.$q.when()},a.prototype.doAnimatedVerticalScroll=function(a){var b=a.calculateScroll,c=a.childToScrollTo,d=a.scrollableContainer,e=a.duration;return this.$q(function(a){d.animate({scrollTop:b(c[0].offsetTop)},e,function(){a()})})},a}();a.ScrollTo=b}(helpers||(helpers={}));var ModelTreeHelpers=function(){function a(a,b){this.modelTree=a,this.sitePartTypes=b}return a.$inject=["modelTree","sitePartTypes"],a.prototype.getAllNodesWithContentElement=function(a){void 0===a&&(a=!1);var b=this.modelTree.getPagesNodes(),c=a?b.filter(function(a){return!a.hidePage}):b;return this.getNodesWithContentElementOfPages(c)},a.prototype.isAllPagesHidden=function(){return this.modelTree.getPagesNodes().every(function(a){return a.hidePage})},a.prototype.getNodesWithContentElement=function(a){return _.flatten(a.map(function(a){return a.isList()?a.children:a}))},a.prototype.getNodesWithContentElementOfPages=function(a){var b=this;return _.flatten(a.map(function(a){return b.getNodesWithContentElement(a.children.filter(function(a){return"PageHeader"!==a.contentElementType}))}))},a.prototype.getNodesOfPageWOPageHeader=function(a){return a.children.filter(function(a){return"PageHeader"!==a.contentElementType})},a.prototype.isItemOfList=function(a){return a.isListItem&&!a.isListHeader()&&!a.isListFooter()},a.prototype.getItemsOfList=function(a){return a.children.slice(1,-1)},a.prototype.isPageOfNodeHidden=function(a){var b=this.modelTree.getPageNodeById(a.containerPageId);return b&&b.hidePage},a.prototype.getAllSocialsRelatedNodes=function(){var a=[],b=this.getHeaderAndFooterNodes(),c=this.modelTree.getNodesByContentElementName("Contact"),d=c?c.filter(function(a){return a.containerPageId}):[];return a.concat(b,d)},a.prototype.getHeaderAndFooterNodes=function(){return this.modelTree.getNodesByContentElementName("GeneralDescription")},a.prototype.getSocialNode=function(){return this.modelTree.getNodeByContentElementName("Social")},a.prototype.getNodeSitePart=function(a){var b=this.getHeaderAndFooterNodes(),c=b.indexOf(a);return-1===c?this.sitePartTypes.BODY:0===c?this.sitePartTypes.HEADER:this.sitePartTypes.FOOTER},a.prototype.validateNode=function(a){return!!a&&this.isNodeInTreeModel(a)},a.prototype.isNodeInTreeModel=function(a){return!!this.modelTree.traverse(function(b){return b===a})},a.prototype.getPositionInPage=function(a){var b=a.isListItem?this.modelTree.findIdentifyingNode(a):a,c=this.modelTree.getPageNodeById(b.containerPageId);if(c){return this.getNodesOfPageWOPageHeader(c).indexOf(b)+1}return-1},a.prototype.getPageAliasById=function(a){var b=this.modelTree.getPageNodeById(a);return b?b.alias:""},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("modelTreeHelpers",ModelTreeHelpers),angular.module("siteGeneratorIntroInternal").factory("fullStoryLoader",function(){return wixFullstoryLoader});var MonitoringSteps=function(){function a(){var a=this;this.steps=[],this.toString=function(){return a.steps.map(function(a){return a.name}).join(" => ")}}return a.prototype.with=function(b){this.steps.push({name:b,start:a.getTimestamp()})},a.prototype.without=function(a){var b=this.lastIndexOf(a);b>=0&&this.steps.splice(b,1)},a.prototype.durationOf=function(b){var c=this.lastIndexOf(b);return c>=0?Math.round(a.getTimestamp()-this.steps[c].start):-1},a.prototype.clear=function(){this.steps=[]},a.prototype.lastIndexOf=function(a){for(var b=this.steps.length-1;b>=0;b--)if(this.steps[b].name===a)return b;return-1},a}()
;MonitoringSteps.getTimestamp="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};var MonitoringBI=function(){function a(a,b,c){var d=this;this.consumerBiLogger=a,this.consumerBiLoggerHelpers=b,this.flags=c,this.handlers={failToFitLayoutCanTFindAProperLayout:{start:function(a){var b=a.nodeId,c=a.sectionType,e=a.sectionAlias,f=a.reason;return d.consumerBiLogger.contentEditor.failToFitLayoutCanTFindAProperLayout(b,c,e,f)}},failoverReArrangeLayout:{start:function(a){var b=a.nodeId,c=a.sectionType,e=a.sectionAlias;return d.consumerBiLogger.contentEditor.failoverReArrangeLayout(b,c,e)}},failoverReArrangeSolution:{start:function(a){var b=a.nodeId,c=a.sectionType,e=a.sectionAlias;return d.consumerBiLogger.contentEditor.failoverReArrangeSolution(b,c,e)}},imageCropZoomInZoomOut:{start:function(a){var b=a.nodeId,c=a.sectionType,e=a.sectionAlias,f=a.zoomType;return d.consumerBiLogger.contentEditor.imageCropZoomInZoomOut(b,c,e,f)}},imageCropSuccess:{end:function(a,b){var c=b.nodeId,e=b.sectionType,f=b.sectionAlias;return d.consumerBiLogger.contentEditor.imageCropSuccess(c,e,f)}},imageCropCancel:{end:function(a,b){var c=b.nodeId,e=b.sectionType,f=b.sectionAlias;return d.consumerBiLogger.contentEditor.imageCropCancel(c,e,f)}}}}return a.prototype.mark=function(a){a.init?this.markInit(a):this.markHandler(a.name,a.data)},a.prototype.measure=function(a,b){a.init?this.measureInit(a,b):this.measureHandler(a.name,b,a.data)},a.prototype.markHandler=function(a,b){var c=this.handlers[a];c&&"function"==typeof c.start&&c.start(b)},a.prototype.markInit=function(a){var b=a.parent?a.parent:a.name,c=a.parent?a.name:"";this.consumerBiLogger.builder.loadingPhaseInInitStart(b,c),this.flags.debugMode&&console.log("%c>> "+b+"::"+c+" %c"+this.consumerBiLoggerHelpers.getLoadTime()+"ms","color:#0066ff","color:#00cc00")},a.prototype.measureInit=function(a,b){var c=a.parent?a.parent:a.name,d=a.parent?a.name:"";this.consumerBiLogger.builder.loadingPhaseInInitComplete(b,c,d),this.flags.debugMode&&console.log("%c<< "+c+"::"+d+" %c"+b+"ms %c"+this.consumerBiLoggerHelpers.getLoadTime()+"ms","color:#8c1aff","color:#e68a00","color:#00cc00")},a.prototype.measureHandler=function(a,b,c){var d=this.handlers[a];d&&"function"==typeof d.end&&d.end(b,c)},a}(),__assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},ConsumerMonitoring=function(){function a(a,b,c,d,e,f,g,h,i){var j=this;this.performance=a,this.$window=b,this.$timeout=c,this.flags=d,this.storyServices=e,this.nrNgClient=f,this.obFedops=g,this.consumerBiLogger=h,this.consumerBiLoggerHelpers=i,this.steps=new MonitoringSteps,this.bi=new MonitoringBI(this.consumerBiLogger,this.consumerBiLoggerHelpers,this.flags),this.userFlags="",this.reportErrors=!0,this.errorSlidingWindowTime=10,this.errorSlidingWindowNumber=50,this.errorsSlidingWindow=helpers.aFixedLengthQueue(this.errorSlidingWindowNumber),this.error=function(a,b){return j.detailedError(a,"",new Error(a),b)},this.warning=function(a,b){return j.detailedWarning(a,"",b)},this.onErrorHandler=function(a,b,c,d,e){return j.detailedError(a,"",e)},this.canUsePerformance=function(a){return"function"==typeof a.mark&&"function"==typeof a.measure},this.doIfPerformance=function(a){return j.safeDoIfGet(function(){return j.performance},j.canUsePerformance,a)},this.doIfFedops=function(a){return function(b){return j.safeDoIfGet(function(){return j.interactionName(a)},function(a){return a},b)}},this.doIfDuration=function(a){return function(b){return j.safeDoIfGet(function(){return j.steps.durationOf(a)},function(a){return a>=0},b)}};var k=_.get(this.storyServices,"story.flags","");k&&(this.userFlags=JSON.stringify(k)),c(function(){var a=j.$window.onerror;a&&Array.isArray(a.errors)&&a.errors.forEach(function(a){return j.onErrorHandler.apply(null,a)}),b.onerror=j.onErrorHandler},0,!1)}return a.$inject=["performance","$window","$timeout","flags","storyServices","nrNgClient","obFedops","consumerBiLogger","consumerBiLoggerHelpers"],a.prototype.detailedWarning=function(a,b,c){void 0===c&&(c={});var d=this.steps.toString();this.steps.clear(),this.consumerBiLogger.err(BIErrorCodes.GeneralWarning,this.biError(a,b,null,d,c)),this.nrNgClient.addPageAction("warning",this.relicError(a,b,null,d,c))},a.prototype.detailedError=function(a,b,c,d){void 0===d&&(d={});var e=(new Date).getTime();this.errorsSlidingWindow.push(e),this.reportErrors&&(this.errorsSlidingWindow.length()===this.errorSlidingWindowNumber&&e-this.errorsSlidingWindow.peek()<1e3*this.errorSlidingWindowTime?(this.reportErrors=!1,this.reportExcessiveErrors("Stopped reporting error BI due to excessive errors","Error burst",null,d)):this.reportDetailedError(a,b,c,d))},a.prototype.reportExcessiveErrors=function(a,b,c,d){void 0===d&&(d={});var e=this.steps.toString();this.steps.clear(),this.consumerBiLogger.err(BIErrorCodes.ExcessiveErrors,this.biError(a,b,c,e,d)),this.nrNgClient.addPageAction("error",this.relicError(a,b,c,e,d))},a.prototype.reportDetailedError=function(a,b,c,d){void 0===d&&(d={});var e=this.steps.toString();this.steps.clear(),this.consumerBiLogger.err(BIErrorCodes.GeneralError,this.biError(a,b,c,e,d)),this.nrNgClient.addPageAction("error",this.relicError(a,b,c,e,d))},a.prototype.mark=function(a){this.steps.with(a.name),this.bi.mark(a),this.markDuration(a)},a.prototype.measure=function(a){var b=this.measureDuration(a);return this.bi.measure(a,b),this.steps.without(a.name),b},a.prototype.relicError=function(a,b,c,d,e){return __assign({message:a,cause:b,stack:c?c.stack:"",steps:d,flags:this.userFlags},e)},a.prototype.biError=function(a,b,c,d,e){return["message: "+a,"cause: "+b,"stack: "+(c?c.stack:""),"flags: "+this.userFlags,"steps: "+d,"extra: "+(e?JSON.stringify(e):"")].join("\n------\n")},a.prototype.safeDoIfGet=function(a,b,c){var d=a();if(b(d))try{c(d)}catch(a){}},a.prototype.interactionName=function(a){var b=a.data&&a.data.isNewSite?a.name+"New":a.name+"Existing";return this.obFedops.interactions[b]||this.obFedops.interactions[a.name]},a.prototype.markDuration=function(a){this.doIfPerformance(function(b){return b.mark("start-"+a.name)}),this.doIfFedops(a)(function(b){return b.started(a.name)}),this.nrNgClient.addPageAction("mark",__assign({step:a.name},a.data))},a.prototype.measureDuration=function(a){var b=-1,c=-1;this.doIfPerformance(function(c){var d=["start-"+a.name,"end-"+a.name];c.mark("end-"+a.name),c.measure.apply(c,[a.name].concat(d)),c.clearMarks.apply(c,d);var e=c.getEntriesByName(a.name,"measure");b=Math.round(e.pop().duration)}),this.doIfFedops(a)(function(b){return b.ended(a.name)}),this.doIfDuration(a.name)(function(a){return c=a});var d=-1!==b?b:c;return-1!==d&&this.nrNgClient.addPageAction("measure",__assign({step:a.name,duration:d},a.data)),d},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("obMonitoring",ConsumerMonitoring).service("performance",function(){return window.performance}).run(["obMonitoring",function(a){}]);var ObFedops=function(){function a(a){var b=this;this.fedopsLogger=a,this.interactions={initExisting:{started:function(){b.fedopsLogger.interactionStarted("init-existing")},ended:function(){b.fedopsLogger.interactionEnded("init-existing")}},initNew:{started:function(){b.fedopsLogger.interactionStarted("init-new")},ended:function(){b.fedopsLogger.interactionEnded("init-new")}},addSection:{started:function(){b.fedopsLogger.interactionStarted("add-section")},ended:function(){b.fedopsLogger.interactionEnded("add-section")}},changeDesignKit:{started:function(){b.fedopsLogger.interactionStarted("change-design-kit")},ended:function(){b.fedopsLogger.interactionEnded("change-design-kit")}}}}return a.$inject=["fedopsLogger"],a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("obFedops",ObFedops),angular.module("siteGeneratorStaticsConsumerAppInternal").filter("trustUrl",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]);var BusinessCardEditable=function(){function a(b,c,d,e,f,g,h,i,j,k,l){this.$scope=b,this.logoManager=c,this.socialLinkManager=d,this.consumerBiLogger=e,this.userDetailsService=f,this.miscUtils=g,this.applicationParameters=h,this.validation=i,this.$translate=j,this.flags=k,this.osUtils=l,this.prepareData();var m={persistence:new intro.IntroLogoPersistence(this.data.media,this.miscUtils),onFieldChanged:this.onFieldChanged.bind(this),usePlaceholderOnDelete:!0};this.logoManager.setContext(m),null==a.logoManagerInstance&&(a.logoManagerInstance=this.logoManager),this.handleProblemsInWebsiteAddress()}return a.$inject=["$scope","logoManager","socialLinkManager","consumerBiLogger","userDetailsService","miscUtils","applicationParameters","validation","$translate","flags","osUtils"],a.getBusinessCardDataModel=function(b){return{logo:a.logoManagerInstance.getMediaUrl(),businessName:b.name,email:b.contactDetails.email||"",fullAddress:b.contactDetails.address?b.contactDetails.address.fullAddress:"",phone:b.contactDetails.phone||"",fax:b.contactDetails.fax||"",website:b.contactDetails.website||"",socialLinks:_.clone(b.socialLinks,!0)}},a.prototype.$postLink=function(){a.initializedBusinessCardValues=a.getBusinessCardDataModel(this.data)},a.prototype.prepareData=function(){var a=this;this.view=this.$scope.view||"intro",this.data.contactDetails=this.data.contactDetails||{},this.data.socialLinks=this.data.socialLinks||[],this.data.media=this.data.media||{},this.normalizeAddress(),this.data.contactDetails.email||this.userDetailsService.getUserDetails().then(function(b){a.data.contactDetails.email=b.email})},a.prototype.normalizeAddress=function(){this.data.contactDetails.address=this.data.contactDetails.address||{};var a=this.data.contactDetails.address.fullAddress;this.data.contactDetails.address.fullAddress=_.isString(a)?a.trim():""},a.prototype.getOrigin=function(){return this.view},a.prototype.showWebsiteAddressError=function(){this.isWebsiteAddressValid=!1},a.prototype.hideWebsiteAddressError=function(){this.isWebsiteAddressValid=!0},a.prototype.handleProblemsInWebsiteAddress=function(){this.validation.isWebsite(this.data.contactDetails.website)?this.hideWebsiteAddressError():this.showWebsiteAddressError()},a.prototype.addEmptySocialLink=function(){var a={platform:"",url:""};this.data.socialLinks.push(a),this.osUtils.isIE||(this.focusedSocial=a)},a.prototype.deleteSocialLink=function(a){var b=this.data.socialLinks.indexOf(a);b>=0&&this.data.socialLinks.splice(b,1),this.onFieldChanged(a.platform,"social",a.url,"")},a.prototype.onSocialChanged=function(a){a.platform=this.socialLinkManager.getPlatformNameByUrl(a.url)},a.prototype.enableAddSocialLink=function(){var b=this.flags.introWebsiteAddressField?a.maxLinksForWebsiteAddressFlag:this.applicationParameters.maxSocialLinks;return(this.data.socialLinks||[]).length<b},a.prototype.isLinkInvalid=function(a){return!a.platform&&a.url},a.prototype.onFieldChanged=function(a,b,c,d,e){if(d!==c){var f=d?d.length:0,g="edit";g=d?g:"remove",g=c?g:"add",this.consumerBiLogger.intro.infoCardAddEditRemoveInfo(a,b,f,g,this.view,e||null)}},a.prototype.blurEventTargetOnEnter=function(a){"Enter"!==a.key&&13!==a.which||a.target.blur()},a.prototype.$onDestroy=function(){a.logoManagerInstance.cleanUp(),a.logoManagerInstance.doneWithThisContext()},a}();BusinessCardEditable.maxLinksForWebsiteAddressFlag=6,BusinessCardEditable.logoManagerInstance=null,BusinessCardEditable.fieldToIntroManagerPath={logo:"media.logos[0].url",businessName:"name",email:"contactDetails.email",fullAddress:"contactDetails.address.fullAddress",phone:"contactDetails.phone",fax:"contactDetails.fax",website:"contactDetails.website",socialLinks:"socialLinks"},angular.module("siteGeneratorCommon").component("businessCardEditable",{controller:BusinessCardEditable,templateUrl:"views/business-card/business-card-editable.html",bindings:{data:"=",view:"@?"}});var FileUploadSelect=function(){function a(a,b,c){this.$element=a,this.$scope=b,this.$timeout=c}return a.$inject=["$element","$scope","$timeout"],a.prototype.$postLink=function(){var a=this;this.$element.find("input").on("change",function(b){var c=b.target.files[0];c&&a.$timeout(function(){a.onSelect({$file:c}),b.target.value=null},0,!1)})},a}();angular.module("siteGeneratorCommon").component("fileUploadSelect",{bindings:{onSelect:"&"},templateUrl:"views/common/file-upload-select.html",controller:FileUploadSelect});var LogoCEWStep;!function(a){a[a.SHOULD_I_EXTRACT_STEP=3e3]="SHOULD_I_EXTRACT_STEP",a[a.CREATING_PALETTE_STEP=3100]="CREATING_PALETTE_STEP",a[a.SHOULD_I_SAVE_STEP=3200]="SHOULD_I_SAVE_STEP"}(LogoCEWStep||(LogoCEWStep={}));var LogoColorExtractionWizard=function(){function a(a,b,c,d,e){this.logoManager=a,this.consumerBiLogger=b,this.$log=c,this.$timeout=d,this.$scope=e,this.allSteps=[LogoCEWStep.SHOULD_I_EXTRACT_STEP,LogoCEWStep.CREATING_PALETTE_STEP,LogoCEWStep.SHOULD_I_SAVE_STEP],this.stepButtonWasClicked=[],this.logoWasChanged=!1,this.processingNewLogo=!1,void 0===this.autoStartPreparePalette&&(this.autoStartPreparePalette=!0);var f={persistence:this.logoPersistence,onFieldChanged:this.onLogoChanged.bind(this),usePlaceholderOnDelete:!1};this.logoManager.setContext(f),this.textsPrefix=this.context+".logoExtraction",this.currentStep=_.isUndefined(this.firstStep)?LogoCEWStep.SHOULD_I_EXTRACT_STEP:this.firstStep()}return a.$inject=["logoManager","consumerBiLogger","$log","$timeout","$scope"],a.prototype.$postLink=function(){this.currentStep===LogoCEWStep.CREATING_PALETTE_STEP?(this.refreshPalettePromise(),this.showPaletteCreation()):this.autoStartPreparePalette&&this.refreshPalettePromise()},a.prototype.refreshPalettePromise=function(){this.palettePromise=this.getPreparePalettePromise({logoOrigin:this.logoOrigin()})},a.prototype.getContent=function(a){return this.textsPrefix+".step"+a+".content"},a.prototype.getTitle=function(a){return this.textsPrefix+".step"+a+".title"},a.prototype.getSecondaryButtonText=function(a){return this.textsPrefix+".step"+a+".skip"},a.prototype.getPrimaryButtonText=function(a){return this.textsPrefix+".step"+a+".button"},a.prototype.setCurrentStep=function(a){this.stepButtonWasClicked[a]=!1,this.currentStep=a},a.prototype.showStepTexts=function(a){return a===this.currentStep&&!this.aboutToReplaceLogo()},a.prototype.showStep=function(a){return a===this.currentStep},a.prototype.aboutToReplaceLogo=function(){return this.currentStep===LogoCEWStep.SHOULD_I_SAVE_STEP&&(this.processingNewLogo||this.logoManager.uploadingLogo)},a.prototype.showPrimaryButton=function(a){return a===this.currentStep&&a!==LogoCEWStep.CREATING_PALETTE_STEP&&!this.aboutToReplaceLogo()},a.prototype.showSecondaryButton=function(a){return a===this.currentStep&&a!==LogoCEWStep.CREATING_PALETTE_STEP&&!this.aboutToReplaceLogo()},a.prototype.showPalettePreview=function(){return this.currentStep!==LogoCEWStep.SHOULD_I_EXTRACT_STEP&&!this.aboutToReplaceLogo()&&this.colorsAsHex},a.prototype.showWrappingCircle=function(){return this.currentStep===LogoCEWStep.CREATING_PALETTE_STEP},a.prototype.inShouldISaveStep=function(){return this.currentStep===LogoCEWStep.SHOULD_I_SAVE_STEP},a.prototype.enableEdit=function(){return this.enableReplaceLogo&&(this.currentStep===LogoCEWStep.SHOULD_I_EXTRACT_STEP||this.currentStep===LogoCEWStep.SHOULD_I_SAVE_STEP&&!this.processingNewLogo)},a.prototype.getFadeClass=function(a){return a===LogoCEWStep.CREATING_PALETTE_STEP?"fade-up":"fade-down"},a.prototype.getButtonClasses=function(a){switch(this.context){case"tour":return["tour-button"];case"builder":return["-medium",a?"p9-primary":"p9b-text-button"]}},a.prototype.clickSecondaryButton=function(a){this.stepButtonWasClicked[a]=!0,this.onSkipClick({logoExtractorStep:a}),this.updateModel(),this.onDone({logoColoration:null})},a.prototype.clickPrimaryButton=function(a){var b=this;switch(this.stepButtonWasClicked[a]=!0,this.palettePromise||this.refreshPalettePromise(),a){case LogoCEWStep.SHOULD_I_EXTRACT_STEP:this.onCreatePaletteClick({logoExtractorStep:a}),this.showPaletteCreation();break;case LogoCEWStep.SHOULD_I_SAVE_STEP:this.palettePromise.then(function(a){b.onSavePaletteClick({logoColoration:a}),b.updateModel(),b.onDone({logoColoration:a})})}},a.prototype.onLogoChanged=function(a,b,c,d,e){var f=this;if(d!==c){var g=d?d.length:0,h="edit";h=d?h:"remove",h=c?h:"add",this.consumerBiLogger.intro.infoCardAddEditRemoveInfo(a,b,g,h,this.logoClickOrigin(),e||null),this.$scope.$apply(function(){f.logoWasChanged=!0,f.processingNewLogo=!0,f.colorsAsHex=void 0}),this.refreshPalettePromise(),this.currentStep!==LogoCEWStep.SHOULD_I_EXTRACT_STEP&&this.showPaletteCreation()}},a.prototype.doneShowingPalettePreview=function(){this.currentStep=LogoCEWStep.SHOULD_I_SAVE_STEP,this.processingNewLogo=!1},a.prototype.showPaletteCreation=function(){var a=this;this.palettePromise.then(function(b){a.$timeout(function(){a.currentStep=LogoCEWStep.CREATING_PALETTE_STEP,a.colorsAsHex=void 0}),a.$timeout(function(){var c=b.colors;a.colorsAsHex=_.uniq([c.mainColor,c.secondaryColor,c.thirdColor,c.fourthColor,c.white,c.black].filter(function(a){return!!a}))})}).catch(function(b){a.$log.error("Failed while getting palette from logo.",b)})},a.prototype.updateModel=function(){this.updateLogoInModel&&this.logoWasChanged&&this.updateLogoInModel()},a.prototype.logoOrigin=function(){return this.logoWasChanged?BIOrigins.WelcomeTour:BIOrigins.InfoCard},a.prototype.logoClickOrigin=function(){return this.currentStep===LogoCEWStep.SHOULD_I_EXTRACT_STEP?"welcomeTour-before-extraction":"welcomeTour-after-extraction"},a.prototype.$onDestroy=function(){this.logoManager.doneWithThisContext()},a}();LogoColorExtractionWizard.view="logoCEW",angular.module("siteGeneratorStaticsConsumerAppInternal").component("logoColorExtractionWizard",{templateUrl:"views/common/logo-color-extraction-wizard.html",controller:LogoColorExtractionWizard,bindings:{context:"@",firstStep:"&?",logoPersistence:"=",getPreparePalettePromise:"&",enableReplaceLogo:"=",autoStartPreparePalette:"<",updateLogoInModel:"&?",onSkipClick:"&",onCreatePaletteClick:"&",onSavePaletteClick:"&",onDone:"&"}});var ColorCircle=function(){function a(){}return a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("colorCircle",{templateUrl:"views/common/color-circle.html",controller:ColorCircle,bindings:{color:"=",number:"="}});var PalettePreview=function(){function a(a,b){var c=this;this.$timeout=a,this.$scope=b,this.timeBeforeFirstPause=600,this.timePerColorMs=700,this.$scope.$watch("$ctrl.colors",function(){c.colors&&(c.diminished=!1,c.$timeout(function(){c.diminished=!0,c.onDone()},c.timeBeforeFirstPause+c.colors.length*c.timePerColorMs))})}return a.$inject=["$timeout","$scope"],a.prototype.previewCursorClass=function(){return this.colors?"palette-preview-cursor-"+this.colors.length+"-colors":""},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("palettePreview",{templateUrl:"views/common/palette-preview.html",controller:PalettePreview,bindings:{colors:"=",onDone:"&"}});var HiddenBackground=function(){function a(a,b,c,d,e){this.contentElementFieldManager=a,this.applicationState=b,this.$state=c,this.sectionBackgroundManager=d,this.nodeFetcher=e,this.init()}return a.$inject=["contentElementFieldManager","applicationState","$state","sectionBackgroundManager","nodeFetcher"],a.prototype.init=function(){this.node=this.nodeFetcher.getCurrentActiveNode()},Object.defineProperty(a.prototype,"showElement",{get:function(){return this.sectionBackgroundManager.isBackgroundHidden()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shouldShowHideLink",{get:function(){if(this.node){return 1!==this.contentElementFieldManager.getNodeFields(this.node.contentElement,this.node).filter(function(a){return a.active}).length}},enumerable:!0,configurable:!0}),a.prototype.replaceDesignClick=function(){this.applicationState.goToSwitchPresetMode(this.$state.name)},a.prototype.hideMediaClick=function(){this.sectionBackgroundManager.hideMedia()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("hiddenBackground",{templateUrl:"views/common/hidden-background.html",controller:HiddenBackground});var FieldTrack=function(){function a(){this.require="ngModel",this.scope={fieldTrack:"&"}}return a.prototype.link=function(a,b,c,d){var e=this;["input","textarea"].forEach(function(c){var f=b[0].tagName.toLowerCase()===c?b:b.find(c);f.on("focus",function(){return e.onFocus(d)}),f.on("blur",function(){return e.onBlur(d,a.fieldTrack)})})},a.prototype.onFocus=function(a){this.lastKnownValue=a.$viewValue},a.prototype.onBlur=function(a,b){var c=a.$viewValue;c!==this.lastKnownValue&&b({$old:this.lastKnownValue,$value:c}),this.lastKnownValue=c},a}();angular.module("siteGeneratorCommon").directive("fieldTrack",function(){return new FieldTrack}),angular.module("siteGeneratorCommon").component("preloaderCompleted",{templateUrl:"views/animations/preloader-completed.html"});var EmptyController=function(){function a(){}return a}();angular.module("siteGeneratorCommon").component("preloaderPublishCompleted",{templateUrl:"views/animations/preloader-publish-completed.html",bindings:{inProgress:"=",completed:"=",inverted:"="},controller:EmptyController});var builder;!function(a){var b=function(){function a(a,b){this.top=a,this.height=b}return a.prototype.getBottom=function(){return this.top+this.height},a.prototype.scale=function(b){return new a(this.top*b,this.height*b)},a}();a.OverlayLayout=b}(builder||(builder={}));var ListSpanManager=function(){function a(a,b,c,d,e,f,g,h,i,j){this.solutionSantaMediator=a,this.$q=b,this.renderedModelMobileAdapter=c,this.documentServicesMediator=d,this.previewScale=e,this.isMobileEditMode=f,this.sitePartTypes=g,this.layoutSolver=h,this.flags=i,this.mergedHeaderService=j,this.listSpanState="",this.listSpans=[],this.getMinPartHeight={}}return a.prototype.equals=function(a,b){return a&&b&&a.sitePart===b.sitePart&&a.node.id===b.node.id},a.prototype.setChangeSectionHeightState=function(a){void 0===a&&(a=!1),this.listSpanState=a?"changeHeight":""},Object.defineProperty(a.prototype,"isChangeSectionHeightState",{get:function(){return"changeHeight"===this.listSpanState},enumerable:!0,configurable:!0}),a.prototype.setSitePartListSpans=function(a,b,c){void 0===c&&(c=function(){return 0}),this.getMinPartHeight[a]=c,this.listSpans=_.reject(this.listSpans,{sitePart:a}).concat(b)},a.prototype.getByNodeId=function(a,b){void 0===b&&(b=this.sitePartTypes.BODY);var c=_.find(this.listSpans,function(c){return 0===a.indexOf(c.node.id)&&c.sitePart===b});return _.clone(c)},a.prototype.getAll=function(){return this.listSpans},a.prototype.getAllInBody=function(){return this.getAllInSitePart(this.sitePartTypes.BODY)},a.prototype.getAllInHeader=function(){return this.getAllInSitePart(this.sitePartTypes.HEADER)},a.prototype.getAllInFooter=function(){return this.getAllInSitePart(this.sitePartTypes.FOOTER)},a.prototype.isBodyEmpty=function(){return _.isEmpty(this.getAllInBody())},a.prototype.getAllInSitePart=function(a){return _.filter(this.listSpans,{sitePart:a})},a.prototype.getLgForCalcWith=function(a){return"horizontal"===a.orientation?_.find(a.groups,function(a){return"ListFooter"===a.contentType})||SolutionManager.getMaxHeightLg(a.groups):a.groups&&_.last(a.groups)},a.prototype.getFirstLayout=function(a){var b=a.groups&&_.first(a.groups);return this.flags.listItemSlideShow&&"horizontal"===a.orientation?a.groups&&_.find(a.groups,function(a){return"ListHeader"===a.contentType})||b:b},a.prototype.getListSpanLayout=function(a){var b=this.getFirstLayout(a),c=this.getLgForCalcWith(a);if(b){var d=this.calcLayoutGroupLayout(b,a.index).top,e=this.calcLayoutGroupLayout(c,a.index),f=e.top+e.height-d;return new builder.OverlayLayout(d,f)}return new builder.OverlayLayout(0,0)},a.prototype.getNodeTopRelativeToListSpan=function(a,b){var c=_.find(b.groups,function(b){return _.find(b.segments,function(b){return b.node&&b.node.id===a})});if(c){return c.getBoundingTop()-this.getListSpanLayout(b).top}return 0},a.prototype.getListSpanAbsoluteLayout=function(a){var b=this.getListSpanLayout(a),c=b.height,d=b.top;switch(a.sitePart){case this.sitePartTypes.BODY:d+=this.getHeaderHeight();break;case this.sitePartTypes.FOOTER:d+=this.getHeaderHeight()+this.getBodyHeight()}return new builder.OverlayLayout(d,c)},a.prototype.rerenderFromIndex=function(a){void 0===a&&(a=0);var b=this.getAllInSitePart(this.sitePartTypes.BODY),c=this.getAllInSitePart(this.sitePartTypes.FOOTER),d=0;if(a>0){var e=b[a-1],f=this.getListSpanLayout(e);d=f.top+f.height}var g=b.slice(a),h=this.rerenderListSpans(g,d),i=this.rerenderListSpans(c,0);return this.$q.all([h,i])},a.prototype.setListSpanTop=function(a,b){var c=this.getListSpanLayout(a).top,d=b-c;return this.solutionSantaMediator.moveLayoutGroupArrayByOffset(a.groups,d)},a.prototype.moveListSpanByOffset=function(a,b){return this.solutionSantaMediator.moveLayoutGroupArrayByOffset(a.groups,b)},a.prototype.toggleListSpanVisibility=function(a,b){return this.solutionSantaMediator.setLayoutGroupsVisibility(a.groups,b)},a.prototype.moveListSpansByOffset=function(a,b){var c=this;return a.map(function(a){return c.moveListSpanByOffset(a,b)})},a.prototype.setPlaceholder=function(a,b){this.solutionSantaMediator.setPlaceholder(a,b)},a.prototype.clearPlaceholder=function(){this.solutionSantaMediator.clearPlaceholder()},a.prototype.shouldMoveLayout=function(a,b){return this.flags.mergedHeader&&a===this.sitePartTypes.BODY&&0===b&&this.mergedHeaderService.isHeaderMerged()},a.prototype.calcLayoutGroupLayout=function(a,b){var c=a.getBoundingTop(),d=a.getBoundingHeight();if(this.shouldMoveLayout(a.sitePart,b)){c+=a.isMobile()?this.layoutSolver.getMobileHeaderHeight(a.page):this.layoutSolver.getHeaderHeight(a.page)}return new builder.OverlayLayout(c,d)},a.prototype.getLayoutGroupAbsoluteLayout=function(a){var b=this.calcLayoutGroupLayout(a),c=b.height,d=b.top;switch(a.sitePart){case this.sitePartTypes.BODY:d+=this.getHeaderHeight();break;case this.sitePartTypes.HEADER:"footer"===a.page&&(d+=this.getHeaderHeight()+this.getBodyHeight())}return new builder.OverlayLayout(d,c)},a.prototype.isInViewport=function(a,b){var c=this.documentServicesMediator.getSiteScroll().y;return a<=c+$(Overlay.ViewportSelector).height()&&b>=c},a.prototype.getLayoutGroupsInViewport=function(){var a=this,b=this.previewScale.getScale(),c=this.getAll();return _(c).map("groups").flatten(!0).filter(function(c){var d=a.getLayoutGroupAbsoluteLayout(c).scale(b),e=d.height,f=d.top;return a.isInViewport(f,f+e)}).value()},a.prototype.getHeaderHeight=function(){return this.getSitePartHeight(this.sitePartTypes.HEADER)},a.prototype.getBodyHeight=function(){return this.getSitePartHeight(this.sitePartTypes.BODY)},a.prototype.getListSpanHeightByNodeId=function(a){return this.getListSpanAbsoluteLayout(this.getByNodeId(a)).height},a.prototype.getSegmentByNodeId=function(a,b){var c=this.getByNodeId(a,b);if(c)return _(c.groups).map("segments").flatten().value().find(function(b){return b.node.id===a})},a.prototype.getSitePartHeight=function(a){var b=this,c=_(this.listSpans).filter({sitePart:a}).sum(function(a){return b.getListSpanLayout(a).height}),d=this.getMinPartHeight[a]&&this.getMinPartHeight[a]()||0;return Math.max(c,d)},a.prototype.rerenderListSpans=function(a,b){var c=this;void 0===b&&(b=0);var d=b,e=a.map(function(a){var b=c.getListSpanLayout(a).height,e=c.setListSpanTop(a,d);return d+=b,e});return this.$q.all(e)},a}();ListSpanManager.MinBodyHeight=505;var utils;!function(a){function b(a){var c=!1;return{then:function(d,e,f){return b(a.then(d&&function(a){return!c&&d(a)},e&&function(a){return!c&&e(a)},f&&function(a){return!c&&f(a)}))},catch:function(d){return b(a.catch(d&&function(a){return!c&&d(a)}))},finally:function(d){return b(a.finally(d&&function(){return!c&&d()}))},stop:function(){c=!0}}}a.stoppable=b}(utils||(utils={}));var AnimationChanges=function(){function a(){var a=this;this.cbs=[],this.perform=function(){a.registered=!1;var b=a.cbs;a.cbs=[],b.forEach(function(a){return a()})}}return a.prototype.add=function(a){this.cbs.push(a),this.registered||(this.registered=!0,requestAnimationFrame(this.perform))},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("animationChanges",AnimationChanges);var AnimationHelper;!function(a){a.onAnimationEnd=function(a){return 1!==a.length?(console.warn("AnimationHelper.onAnimationEnd(): expected one element, but got "+a.length),Promise.resolve()):calculateTotalAnimationsDurations(a).then(function(b){var c=b.transitionTotalDuration,d=b.animationTotalDuration;return 0===d&&0===c?Promise.resolve():waitForAnimation(a,c,d)})}}(AnimationHelper||(AnimationHelper={}));var ANIMATION_TIMEOUT_DELTA=500,BaseDropDown=function(){function a(a){this.timeout=a,this.showDropdown=!1}return a.prototype.showDropDown=function(){this.showDropdown=!0},a.prototype.hideDropDown=function(){this.showDropdown=!1},a.prototype.isShowDropDown=function(){return this.showDropdown},a.prototype.isDropdownClicked=function(a,b){for(var c=0;c<b.length;c++)if(0!==$(a).closest(b[c]).length)return!0;return!1},a.prototype.onDropdownClose=function(){document.body.onclick=null},a.prototype.closeWhenClickOutside=function(a,b){var c=this;document.body.onclick=function(d){var e=d.target;if(e){c.isDropdownClicked(e,a)||(c.timeout(function(){b?b():c.hideDropDown()}),c.onDropdownClose())}}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").directive("adjustToScale",["previewScale","$parse",function(a,b){return{restrict:"A",scope:!1,link:function(c,d,e){function f(){var a=e.baseHeight||e.adjustToScale;return a?b(a)(c):null}function g(){return e.baseWidth?b(e.baseWidth)(c):null}function h(a,b,c){var e={};"number"==typeof c&&(e.height=c*a),"number"==typeof b&&(e.width=b*a),d.css(e)}c.$watch(function(){return a.getScale()},function(a){return h(a,g(),f())}),c.$watch(function(){return f()},function(b){return h(a.getScale(),g(),f())}),c.$watch(function(){return g()},function(b){return h(a.getScale(),b,f())})}}}]);var DesignPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=this;this.initService=a,this.CONSUMER_DIALOGS=b,this.applicationState=c,this.themeChooser=d,this.CcDialogBuilder=e,this.contentManager=f,this.designKitManager=g,this.consumerBiLogger=h,this.obMonitoring=i,this.storyServices=j,this.$element=k,this.flags=l,this.$translate=m,this.$timeout=n,this.assistantManager=o,this.previewScale=p,this.kitUtils=q,this.layoutSelectionStoreProvider=r,this.$scope=s,this.unsettingKitIsInView=!1,this.unsettingKitId="",this.settingKitId="",this.shouldShowMenu=!1,a.loaded().then(function(){return f.initialize(j.story)}).then(function(){return d.initialize()}).then(function(){return t.kitUtils.calculateKits()}).then(function(a){t.colorThemeKits=a,p.setScaleFactor(PreviewScale.MinScaleFactor)})}return a.$inject=["initService","CONSUMER_DIALOGS","applicationState","themeChooser","CcDialogBuilder","contentManager","designKitManager","consumerBiLogger","obMonitoring","storyServices","$element","flags","$translate","$timeout","assistantManager","previewScale","kitUtils","layoutSelectionStoreProvider","$scope"],a.prototype.scrollInsideContainer=function(a,b,c){a.animate({scrollTop:b},c)},a.prototype.scrollToSelectedKit=function(a){var b=this;!1!==this.assistantManager.getCustomTaskData("scrollToSelectedKit")&&this.$timeout(function(){var c=b.$element.find(".cc-panel-body"),d=Math.max(0,b.$element.find(".kit-option.selected")[0].offsetTop-12),e="animated"===a?1e3:0;b.scrollInsideContainer(c,d,e)},250)},a.prototype.closeDesignPanel=function(){var a=this;this.$scope.$applyAsync(function(){a.applicationState.goToBuilder(),a.consumerBiLogger.siteDesign.designWindowWasClosed("design")})},a.prototype.openDesignPanelHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.design.menu"),this.CONSUMER_DIALOGS.DESIGN_PANEL_HELP)},
a.prototype.setKit=function(a,b){var c=this;this.obMonitoring.mark({name:"changeDesignKit"}),this.unsettingKitIsInView=this.isSelectedInView(),this.unsettingKitId=this.themeChooser.getActiveTheme("mainKit").id,this.settingKitId=a.id,this.layoutSelectionStoreProvider.getLayoutSelectionStore().resetFieldColorOverrides(),this.consumerBiLogger.siteDesign.clickOnDesiredDesign(this.unsettingKitId,b,"click on design",this.settingKitId),this.designKitManager.setActiveMainKit(this.settingKitId).then(function(){c.consumerBiLogger.siteDesign.designChangeSuccess(c.unsettingKitId,b,"click on design",c.settingKitId)}).finally(function(){c.$timeout(function(){c.unsettingKitId="",c.settingKitId=""},10),c.$timeout(function(){return c.scrollToSelectedKit("animated")},300),c.obMonitoring.measure({name:"changeDesignKit"})})},a.prototype.isSelectedInView=function(){var a=!1,b=this.$element.find("cc-panel-frame .cc-scrollbar"),c=this.$element.find(".selected.kit-option"),d=b.scrollTop(),e=d+b.outerHeight();if(c.position()){var f=c.position().top;a=d<f+c.outerHeight()&&f<e}return a},a.prototype.customizeKit=function(){this.applicationState.goToDesignKitMode(),this.consumerBiLogger.siteDesign.customizeDesignPanelIsLoaded()},a.prototype.isActiveKit=function(a){return this.settingKitId!==a.id&&(this.unsettingKitId===a.id||this.themeChooser.getActiveTheme("mainKit")===a)},a.prototype.getKitDisplayColor=function(a){return this.themeChooser.getColorByIndexInPalette(a,2)},Object.defineProperty(a.prototype,"isMenuVisible",{get:function(){if(this.assistantManager.isInActiveTask()){var a=this.assistantManager.getCustomTaskData("showSiteDesignMenu");if(void 0!==a)return a}return this.shouldShowMenu},enumerable:!0,configurable:!0}),a.prototype.showSiteDesignMenu=function(){this.shouldShowMenu=!0},a.prototype.hideSiteDesignMenu=function(){this.shouldShowMenu=!1},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("designPanel",{templateUrl:"views/design/design-panel.html",controller:DesignPanel});var DesignPanelKit=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=this;this.flags=a,this.$scope=b,this.$translate=c,this.previewScale=d,this.applicationState=e,this.consumerBiLogger=f,this.CcDialogBuilder=g,this.colorationUtils=h,this.fontCustomizationService=i,this.undoRedo=j,this.CONSUMER_DIALOGS=k,this.designKitManager=l,this.animationUtils=m,this.animationKit=n,this.backgroundScrollService=o,this.pagesManager=p,this.fontUtils=q,h.initialize().then(function(){r.kitColors=r.designKitManager.getPaletteColors(),r.selectedFontData=r.designKitManager.getActiveFontThemeAsThumbnail(),r.isLoaded=!0,r.kit=r.designKitManager.getActiveTheme(),r.$scope.$watch(function(){return r.designKitManager.getActiveTheme()},function(a){return r.kit=a}),r.$scope.$watch(function(){return r.designKitManager.getActiveFontTheme()},function(a){return r.selectedFontData=r.designKitManager.getActiveFontThemeAsThumbnail()}),r.$scope.$watch(function(){return r.designKitManager.getPaletteColors()},function(a){return r.kitColors=a})})}return a.$inject=["flags","$scope","$translate","previewScale","applicationState","consumerBiLogger","CcDialogBuilder","colorationUtils","fontCustomizationService","undoRedo","CONSUMER_DIALOGS","designKitManager","animationUtils","animationKit","backgroundScrollService","pagesManager","fontUtils"],a.prototype.getKitName=function(){return this.kit&&this.kit.displayName||""},a.prototype.close=function(){var a=this;this.$scope.$applyAsync(function(){a.previewScale.setScaleFactor(PreviewScale.MaxScaleFactor),a.applicationState.goToBuilder(),a.consumerBiLogger.siteDesign.designWindowWasClosed("customize")})},a.prototype.onHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.design.panel-kit"),this.CONSUMER_DIALOGS.DESIGN_PANEL_HELP)},a.prototype.backToDesign=function(){this.applicationState.goToDesignMode(),this.consumerBiLogger.siteDesign.designPanelIsLoaded("back from customize")},a.prototype.goToFontsPanel=function(){this.applicationState.goToFontsPanel(BIOrigins.DesignPanel)},a.prototype.goToAnimationPanel=function(){this.applicationState.goToAnimationPanel(BIOrigins.DesignPanel)},a.prototype.getActiveAnimation=function(){return this.animationUtils.getActivePatternLabelForSite()},a.prototype.openNewColorationPanel=function(){return this.consumerBiLogger.siteDesign.customizeDesignColorPaletteMode(BIOrigins.DesignPanel),this.applicationState.goToColorationPanel()},a.prototype.is6ColorsPalette=function(){return 6===this.colorationUtils.numOfColors(this.kitColors)},a.prototype.kitHasOverrides=function(){return!!this.kit&&this.designKitManager.isKitOveridden()},a.prototype.onReset=function(){var a=this;this.consumerBiLogger.siteDesign.clickOnResetDesign(!1),this.designKitManager.setActiveMainKit(this.kit.id).then(function(){a.consumerBiLogger.siteDesign.resetDesignSuccess(!1),a.selectedFontData=a.designKitManager.getActiveFontThemeAsThumbnail(),a.kitColors=a.designKitManager.getActiveKitDefaultColors()})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("designPanelKit",{templateUrl:"views/design/design-panel-kit.html",controller:DesignPanelKit});var ColorationPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=this;this.$translate=a,this.applicationState=b,this.CcDialogBuilder=c,this.colorationUtils=d,this.modelTree=e,this.mediaOverrideManager=f,this.CONSUMER_DIALOGS=g,this.consumerDialogs=h,this.$scope=i,this.consumerBiLogger=j,this.previewScale=k,this.undoRedo=l,this.logoHandler=m,this.flags=n,this.themeChooser=o,this.isScrolling=!1,this.isReadyToBeDisplayed=!1,this.dialogOnShowing=function(){p.showBackdrop=!0,$(document.body).addClass(coloration.PALETTE_DIALOG_OPEN_CLASS)},this.onColorSelected=function(){p.colorationUtils.removePalettes()},this.onPaletteListShown=function(a){p.showLoader=!1,p.showBackdrop=!1,p.scrollToSelectedPalette(a)},d.initialize().then(function(){p.$scope.$watch(function(){return p.colorationUtils.getMainColor()},function(a){return p.mainColor=a}),k.setScaleFactor(PreviewScale.MinScaleFactor),p.isReadyToBeDisplayed=!0,p.extractLogoColorsIfNeeded()}),this.flags.newColorationPalettes&&d.initialize().then(function(){return p.populateDropdownItems()})}return a.$inject=["$translate","applicationState","CcDialogBuilder","colorationUtils","modelTree","mediaOverrideManager","CONSUMER_DIALOGS","consumerDialogs","$scope","consumerBiLogger","previewScale","undoRedo","logoHandler","flags","themeChooser"],a.prototype.$onInit=function(){this.applicationState.isSilent()||this.colorationUtils.willLoadPalettes()&&this.showLoadingAnimation()},a.prototype.showLoadingAnimation=function(){this.showBackdrop=!0,this.showLoader=!0},a.prototype.backToDesignKit=function(){if(this.flags.siteDesignKitMenu)return void this.applicationState.goToDesignMode();this.applicationState.goToDesignKitMode()},a.prototype.openHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.design.coloration"),this.CONSUMER_DIALOGS.COLORATION_PANEL_HELP)},a.prototype.closePanel=function(){var a=this;this.$scope.$applyAsync(function(){a.previewScale.setScaleFactor(PreviewScale.MaxScaleFactor),a.applicationState.goToBuilder()})},a.prototype.goToAdvancedPaletteEditing=function(){var a=this;this.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeAdvancedEditingColorClick(),this.applicationState.goToAdvancedPaletteEditing().then(function(){return a.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeAdvancedEditingColorClickSuccess()})},a.prototype.changeMainColor=function(a){this.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeChangeColorMainClick(),this.openChangeColorDialog(a,coloration.ePaletteColorPickerStates.mainColor)},a.prototype.openChangeColorDialog=function(a,b){var c=this;return this.consumerDialogs.showDialog(ConsumerDialogTypes.PALETTE_COLOR_DIALOG_POPUP,this.dialogOnShowing,null,{color:a,colorType:b,onColorSelected:this.onColorSelected}).then(function(a){if(a)return c.showLoader=!0,c.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeColorSelect(!1,a.origin),c.colorationUtils.switchMainColor(a.color).then(function(){c.populateDropdownItems(),c.undoRedo.captureOperation(!1,!0),c.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeColorSelectSuccess(!1,a.origin)});c.onPaletteListShown(!1)}).catch(function(){return c.onPaletteListShown(!1)})},a.prototype.extractLogoColorsIfNeeded=function(){var a=this,b=this.modelTree.getGeneralInformation();if(b.getArgsMatchingPolicy().Logo&&this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(b)===cc.MediaPreviewType.Clipart&&!this.colorationUtils.getLogoPalette()){var c=b.contentElement.getFieldValue("Logo"),d=c.value[0];this.logoHandler.lazyGetLogoColorationPromise(d).then(function(b){return a.colorationUtils.setLogoColors(b)})}},a.prototype.getLogoColors=function(){return this.colorationUtils.getLogoPalette().colors},a.prototype.selectLogoPalette=function(){var a=this;if(!this.isLogoPaletteSelected()){var b=Date.now(),c=this.colorationUtils.getLogoPalette().numOfColors,d=this.colorationUtils.getNumPalettes();this.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePallete(c,d,"logo",-1,"customize-palette-panel"),this.colorationUtils.useLogoColors().then(function(){var e=Date.now()-b;a.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess(e,c,d,"logo",-1,"customize-palette-panel"),a.flags.newColorationPalettes&&a.populateDropdownItems(),a.undoRedo.captureOperation(!1,!0)})}},a.prototype.isLogoPaletteAvailable=function(){return!!this.colorationUtils.getLogoPalette()},a.prototype.isLogoPaletteSelected=function(){return this.colorationUtils.getActivePaletteIndex()===coloration.LOGO_PALETTE_INDEX},a.prototype.scrollToSelectedPalette=function(a){var b=this;if(!this.isScrolling){var c=$("coloration-panel .cc-panel-body"),d=c.find("palette-list kit-palette.-selected");if(0!==d.length){var e=$("coloration-panel .p18-panel-footer"),f=d.height(),g=parseInt(d.css("margin-bottom"),10),h=d.offset().top;if(h+f>e.offset().top){var i=h-c.offset().top-(f/2+g);a?(this.isScrolling=!0,c.animate({scrollTop:i},1e3,function(){return b.isScrolling=!1})):c.scrollTop(i)}}}},a.prototype.populateDropdownItems=function(){this.flags.newColorationPalettes&&(this.dropdownItems=[{label:this.getActiveColorationModeAndLevel(),value:coloration.ColorationMode.light}])},a.prototype.getActiveColorationModeAndLevel=function(){var a=this,b=this.themeChooser.coloration.getActiveKitColorationMode(),c=this.themeChooser.coloration.getActiveKitColorationLevel(),d=function(b){return a.$translate.instant("design.coloration.color-mode-selector-new.dialog.coloration-mode.radio-buttons."+b)},e=function(b){return a.$translate.instant("design.coloration.color-mode-selector-new.dialog.coloration-level.drop-down."+b)};return void 0===c?d(coloration.ColorationMode[b]):d(coloration.ColorationMode[b])+" & "+e(coloration.ColorationLevel[c])},a.prototype.changeColorationMode=function(){this.openChangeColorationModeDialog()},a.prototype.openChangeColorationModeDialog=function(){var a=this;return this.consumerDialogs.showDialog(ConsumerDialogTypes.COLOR_MODE_DIALOG_POPUP,this.dialogOnShowing,null).then(function(){a.populateDropdownItems(),a.onPaletteListShown(!1)}).catch(function(){a.populateDropdownItems(),a.onPaletteListShown(!1)})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("colorationPanel",{templateUrl:"views/design/coloration-panel.html",controller:ColorationPanel});var ColorationPanelOverlay=function(){function a(){}return a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("colorationPanelOverlay",{templateUrl:"views/design/coloration-panel-overlay.html",controller:ColorationPanelOverlay,bindings:{showBackdrop:"<",showLoader:"<",loaderText:"@"}});var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},AdvancedPaletteEditing=function(){function a(a,b,c,d,e,f,g,h,i,j,k){var l=this;this.applicationState=a,this.colorationUtils=b,this.$q=c,this.$timeout=d,this.flags=e,this.consumerDialogs=f,this.$window=g,this.consumerBiLogger=h,this.$scope=i,this.previewScale=j,this.undoRedo=k,this.ARROW_BUTTON_CLASS="arrow-down",this.colorsHaveBeenChanged=!1,this.showLoader=!1,this.colorsStateEnum=coloration.ePaletteColorPickerStates,this.dialogOnShowing=function(a,b,c){$(document.body).addClass(coloration.PALETTE_DIALOG_OPEN_CLASS);var d=$(a.currentTarget),e=c.find("md-dialog");l.$timeout(function(){e.css(l.getDialogCoords(d,e)),l.$timeout(function(){e.addClass("visible")})},500)},this.dialogOnRemoving=function(){$(document.body).removeClass(coloration.PALETTE_DIALOG_OPEN_CLASS)},b.initialize().then(function(){l.originalColoration=b.getCurrentState(),i.$watch(function(){return b.getActivePalette().colors},function(a){l.colors=__assign({},a),l.checkReadability()}),j.setScaleFactor(PreviewScale.MinScaleFactor)})}return a.$inject=["applicationState","colorationUtils","$q","$timeout","flags","consumerDialogs","$window","consumerBiLogger","$scope","previewScale","undoRedo"],a.prototype.closePanel=function(){var a=this;this.$scope.$applyAsync(function(){a.previewScale.setScaleFactor(PreviewScale.MaxScaleFactor),a.applicationState.goToBuilder(!0)})},a.prototype.backToColoration=function(){this.applicationState.goToColorationPanel()},a.prototype.changeColorsByHex=function(){var a=this;this.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeColorSelect(!0,"hex"),this.changeColors().then(function(){return a.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeColorSelectSuccess(!0,"hex")})},a.prototype.changeColors=function(){var a=this;return this.$timeout(function(){a.colorsHaveBeenChanged=!0;var b=a.colorationUtils.setCustomColors(a.colors);return a.checkReadability(),a.undoRedo.captureOperation(!1,!0),b})},a.prototype.getDialogCoords=function(a,b){var c=a.offset(),d=a.outerHeight(!0)/2,e=b.outerHeight(!0),f=48,g=6,h=f+g,i=6,j={top:c.top+d-h,left:c.left+a.width()+g+i};return j.top+e>this.$window.innerHeight&&(j.top=c.top-e+d+h,b.addClass(this.ARROW_BUTTON_CLASS)),j},a.prototype.openColorPicker=function(a,b,c){var d=this,e={color:b,colorType:c,state:ePaletteColorDialogStates.ADVANCED,$event:a,layout:"left right"};this.consumerDialogs.showDialog(ConsumerDialogTypes.PALETTE_COLOR_DIALOG_POPUP,this.dialogOnShowing,null,e).then(function(a){a&&(d.colors[coloration.ePaletteColorPickerStates[c]]=a.color,d.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeColorSelect(!0,a.origin),d.changeColors().then(function(){return d.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeColorSelectSuccess(!0,a.origin)}))})},a.prototype.resetColors=function(){var a=this;this.consumerBiLogger.siteDesign.clickOnResetDesign(!0),this.$timeout(function(){a.colorationUtils.restoreState(a.originalColoration).then(function(){return a.consumerBiLogger.siteDesign.resetDesignSuccess(!0)}),a.colors=__assign({},a.colorationUtils.getActivePalette().colors),a.checkReadability(),a.colorsHaveBeenChanged=!1,a.undoRedo.captureOperation(!1,!0)})},a.prototype.shouldShowReset=function(){return this.colorsHaveBeenChanged},a.prototype.checkReadability=function(){var a=this.areColorsReadable;this.areColorsReadable=this.colorationUtils.areColorsReadable(this.colors),a&&!this.areColorsReadable&&this.consumerBiLogger.siteDesign.customizeDesignAdvancedColorsAreHardToReadDisplayed()},a.prototype.fixColors=function(){var a=this;this.consumerBiLogger.siteDesign.customizeDesignAdvancedUserClicksFixColors(),this.showLoader=!0,this.$q.all([this.$timeout(1e3),this.$q.resolve().then(function(){if(a.flags.newColorationCustomPalette){var b=a.colorationUtils.makeColorsReadable(a.colors);a.colors=_.merge({},a.colors,b)}else a.colors=a.colorationUtils.makeColorsReadable(a.colors);return a.changeColors()})]).then(function(){return a.showLoader=!1}).then(function(){return a.areColorsReadable&&a.consumerBiLogger.siteDesign.customizeDesignAdvancedFixColorsSuccess()})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("advancedPaletteEditing",{templateUrl:"views/design/advanced-palette-editing.html",controller:AdvancedPaletteEditing});var PaletteColor=function(){function a(a){var b=this;this.editableColor={value:this.color},a.$watch(function(){return b.color},function(a,c){a!==c&&(b.editableColor.value=a)})}return a.$inject=["$scope"],a.prototype.colorChange=function(a){"#"===a[0]&&"#"===a[1]&&(this.editableColor.value=a.slice(1,a.length),this.setColor())},a.prototype.selectColorText=function(a){var b=a.target,c=0;"#"===b.value[0]&&(c=1),b.setSelectionRange(c,b.value.length)},a.prototype.setColor=function(){this.color!==this.editableColor.value&&(this.isColorValid(this.editableColor.value)&&("#"!==this.editableColor.value[0]&&(this.editableColor.value="#"+this.editableColor.value),this.color=this.editableColor.value,this.onTextChange({color:this.color})),this.editableColor.value=this.color)},a.prototype.isColorValid=function(a){return/^#?[0-9A-F]{6}$/i.test(a)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("paletteColor",{templateUrl:"views/design/palette-color.html",controller:PaletteColor,bindings:{label:"@",color:"=",onIconClick:"&",onTextChange:"&"}});var PaletteList=function(){function a(a,b,c,d,e,f,g){var h=this;this.$p=a,this.themeChooser=b,this.flags=c,this.$scope=d,this.colorationUtils=e,this.consumerBiLogger=f,this.undoRedo=g,this.palettes=[],this.visiblePalettes=[],this.customPalette=null,this.visibleCustomPalette=null,this.isCustomSelected=!1,this.selectedIndex=-1,e.initialize().then(function(){h.flags.newColorationPalettes&&e.setShouldUpdatePalettes(),h.showAnimation=e.willLoadPalettes(),d.$watch(function(){return e.getActivePaletteIndex()},function(a){h.selectedIndex=a,h.isCustomSelected=a===coloration.CUSTOM_PALETTE_INDEX}),d.$watch(function(){return e.getPalettes()},function(a,b){a!==b&&(h.showAnimation=!0),h.palettes=a,h.flags.newColorationPalettes&&(h.visiblePalettes=h.convertToVisiblePalettes(h.palettes))}),d.$watch(function(){return e.getCustomPalette()},function(a){h.customPalette=a,h.flags.newColorationPalettes&&h.customPalette&&(h.visibleCustomPalette=1===h.customPalette.colors.colorationVersion?h.handleSelectedVisiblePalette(_.cloneDeep(h.customPalette)):h.customPalette)}),d.$watch(function(){return e.getColorationLevel()},function(a,b){a!==b&&h.updateSelectedPalette()})})}return a.$inject=["$p","themeChooser","flags","$scope","colorationUtils","consumerBiLogger","undoRedo"],a.prototype.select=function(a){var b=this;if(a!==this.selectedIndex){var c=this.palettes[a],d=this.customPalette?1:0,e=this.colorationUtils.getNumPalettes(),f=Date.now();this.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePallete(c.numOfColors,e,c.creator,d+a,BIOrigins.ColorationPanel),this.flags.newColorationPalettes?this.colorationUtils.setActivePaletteByIndex(a,this.deriveColorationLevelFromPalette(a)).then(function(){b.onPaletteSelected(),b.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess(Date.now()-f,c.numOfColors,e,c.creator,d+a,BIOrigins.ColorationPanel)}):this.colorationUtils.setActivePaletteByIndex(a).then(function(){b.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess(Date.now()-f,c.numOfColors,e,c.creator,d+a,BIOrigins.ColorationPanel)}),this.undoRedo.captureOperation(!1,!0)}},a.prototype.selectCustom=function(){var a=this;if(!this.isCustomSelected){var b=this.colorationUtils.getNumPalettes(),c=Date.now();this.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePallete(this.customPalette.numOfColors,b,this.customPalette.creator,0,BIOrigins.ColorationPanel),this.flags.newColorationPalettes?this.colorationUtils.setActivePaletteByIndex(coloration.CUSTOM_PALETTE_INDEX,this.deriveColorationLevelFromPalette(coloration.CUSTOM_PALETTE_INDEX)).then(function(){a.onPaletteSelected(),a.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess(Date.now()-c,a.customPalette.numOfColors,b,a.customPalette.creator,0,BIOrigins.ColorationPanel)}):this.colorationUtils.setActivePaletteByIndex(coloration.CUSTOM_PALETTE_INDEX).then(function(){a.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess(Date.now()-c,a.customPalette.numOfColors,b,a.customPalette.creator,0,BIOrigins.ColorationPanel)}),this.undoRedo.captureOperation(!1,!0)}},a.prototype.updateSelectedPalette=function(){this.selectedIndex===coloration.CUSTOM_PALETTE_INDEX?this.visibleCustomPalette=this.handleSelectedVisiblePalette(_.cloneDeep(this.customPalette)):void 0!==this.palettes[this.selectedIndex]&&(this.visiblePalettes[this.selectedIndex]=this.handleSelectedVisiblePalette(_.cloneDeep(this.palettes[this.selectedIndex])))},a.prototype.convertToVisiblePalettes=function(a){var b=this;if(!a)return[];var c=coloration.isPalette(a[0])&&"default"===a[0].creator,d=c?1:0,e=this.selectedIndex;return this.palettes.map(function(a,c){var f;if(c===e)f=b.handleSelectedVisiblePalette(a);else if(c===d)f=b.reduceToPaletteOf(4,a);else{if(c!==d+1)return a;f=b.reduceToPaletteOf(5,a)}return f})},a.prototype.reduceToPaletteOf=function(a,b){var c=_.cloneDeep(b);switch(a){case 5:return delete c.colors.secondaryColor,c.numOfColors=5,c;case 4:return delete c.colors.secondaryColor,delete c.colors.mainColor,c.numOfColors=4,c;default:return b}},a.prototype.handleSelectedVisiblePalette=function(a){var b=this.themeChooser.coloration.getActiveKitColorationLevel();return b===ThemeChooser.COLORATION_LEVEL.plain?this.reduceToPaletteOf(4,a):b===ThemeChooser.COLORATION_LEVEL.colorful||b===ThemeChooser.COLORATION_LEVEL.tinted?this.reduceToPaletteOf(5,a):a},a.prototype.deriveColorationLevelFromPalette=function(a){var b;if(a>=0?b=this.visiblePalettes[a]?this.visiblePalettes[a].numOfColors:0:a===coloration.CUSTOM_PALETTE_INDEX&&(b=this.visibleCustomPalette?this.visibleCustomPalette.numOfColors:0),void 0!==b)switch(b){case 6:return coloration.ColorationLevel.vibrant;case 5:return coloration.ColorationLevel.colorful;case 4:default:return coloration.ColorationLevel.plain}return null},a.prototype.handleListAnimationEnd=function(){this.onListShown&&this.onListShown({withAnimation:this.showAnimation})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("paletteList",{templateUrl:"views/design/palette-list.html",controller:PaletteList,bindings:{onListShown:"&",onPaletteSelected:"&?"}});var KitPalette=function(){function a(a){var b=this;this.$scope=a,a.$watch(function(){return b.kitColors},function(a){var c=a?[a.mainColor,a.secondaryColor,a.thirdColor,a.fourthColor,a.white,a.black]:[];b.colors=c.filter(function(a){return null!=a})})}return a.$inject=["$scope"],a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("kitPalette",{templateUrl:"views/design/kit-palette.html",controller:KitPalette,bindings:{kitColors:"<",isSelectable:"<",isSelected:"<"}});var HexInput=function(){function a(a){var b=this;this.editableColor={value:this.color},a.$watch(function(){return b.color},function(a,c){a!==c&&(b.editableColor.value=a)})}return a.$inject=["$scope"],a.prototype.colorChange=function(a){"#"===a[0]&&"#"===a[1]&&(this.editableColor.value=a.slice(1,a.length),this.setColor()),this.onTextChanging&&this.onTextChanging({color:a})},a.prototype.selectColorText=function(a){var b=a.target,c=0;"#"===b.value[0]&&(c=1),b.setSelectionRange(c,b.value.length)},a.prototype.setColor=function(){this.color!==this.editableColor.value&&(a.isColorValid(this.editableColor.value)?("#"!==this.editableColor.value[0]&&(this.editableColor.value="#"+this.editableColor.value),this.color=this.editableColor.value,this.onTextChange({color:this.color})):this.onTextFixed&&this.onTextFixed({color:this.color}),this.editableColor.value=this.color)},a.isColorValid=function(a){return/^#?[0-9A-F]{6}$/i.test(a)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("hexInput",{templateUrl:"views/design/hex-input.html",controller:HexInput,bindings:{color:"=",onTextChange:"&",onTextChanging:"&?",onTextFixed:"&?"}});var PaletteColorPicker=function(){function a(){}return a.prototype.colorClick=function(a){this.selectedColor=a.color,this.onColorSelected&&this.onColorSelected({selection:a})},a.prototype.placeholderClick=function(){this.onPlaceholderClick&&this.onPlaceholderClick()},a.prototype.isSelected=function(a){return this.selectedColor&&a.color&&this.selectedColor.toUpperCase()===a.color.toUpperCase()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("paletteColorPicker",{templateUrl:"views/design/palette-color-picker.html",controller:PaletteColorPicker,bindings:{showAddColor:"<",colors:"<",onColorSelected:"&",selectedColor:"<",onPlaceholderClick:"&?",colorsSize:"@"}});var ColorationModeSelector=function(){function a(a,b,c,d,e,f){var g=this;this.undoRedo=a,this.$scope=b,this.$translate=c,this.colorationUtils=d,this.consumerBiLogger=e,this.flags=f,this.value=0,d.initialize().then(function(){g.$scope.$watch(function(){return d.getColorationMode()},function(a){return g.value=a})}),this.populateDropdownItems()}return a.$inject=["undoRedo","$scope","$translate","colorationUtils","consumerBiLogger","flags"],a.prototype.populateDropdownItems=function(){this.dropdownItems=[{label:this.$translate.instant("design.coloration.coloration-mode-selector.dropdown.light-mode"),value:coloration.ColorationMode.light},{label:this.$translate.instant("design.coloration.coloration-mode-selector.dropdown.dark-mode"),value:coloration.ColorationMode.dark}]},Object.defineProperty(a.prototype,"dropdownValue",{get:function(){var a=this;return this.dropdownItems.find(function(b){return b.value===a.value})},set:function(a){},enumerable:!0,configurable:!0}),a.prototype.onDropdownSelectionChange=function(a){var b=this;this.consumerBiLogger.siteDesign.customizeDesignChangeDarkLightMode(coloration.ColorationMode[a.value]),this.colorationUtils.setColorationMode(a.value).then(function(){return b.consumerBiLogger.siteDesign.customizeDesignChangeDarkLightModeSuccess(coloration.ColorationMode[a.value])}),this.undoRedo.captureOperation(!1,!0)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("colorationModeSelector",{templateUrl:"views/design/coloration-mode-selector.html",controller:ColorationModeSelector});var PaletteColorDialog=function(){function a(a,b,c,d,e,f,g,h,i,j,k){var l=this;this.$scope=a,this.$mdDialog=b,this.chroma=c,this.colorationUtils=d,this.$filter=e,this.colorType=g,this.CcDialogBuilder=k,this.selectedColor=f,this.showReturnButton=!1,this.state=h,this.layout=i,this.onColorSelected=j,this.$scope.$on("$stateChangeStart",function(){l.$mdDialog.destroy()}),d.initialize().then(function(){return l.colors=l.getColors()})}return a.$inject=["$scope","$mdDialog","chroma","colorationUtils","$filter","color","colorType","state","layout","onColorSelected","CcDialogBuilder"],a.prototype.getColors=function(){var a=this,b=this.colorationUtils.getIndustryMainColors().sort(function(b,c){var d=a.chroma(b).hsl()[2]-a.chroma(c).hsl()[2];return isNaN(d)?-1:d}).map(function(a){return{color:a,origin:"suggestion"}}),c=this.colorationUtils.getRecentColors().filter(function(a){return!b.find(function(b){return b.color===a})}).slice(0,4).reverse().map(function(a){return{color:a,origin:"user created"}}),d=b.concat(c);return d.find(function(b){return b.color===a.selectedColor})||(d.splice(b.length-1,1),d.unshift({color:this.selectedColor,origin:"user created"})),d},Object.defineProperty(a.prototype,"colorTypeName",{get:function(){switch(this.colorType){case coloration.ePaletteColorPickerStates.mainColor:return"main";case coloration.ePaletteColorPickerStates.secondaryColor:return"secondary";case coloration.ePaletteColorPickerStates.thirdColor:return"third";case coloration.ePaletteColorPickerStates.fourthColor:return"fourth";case coloration.ePaletteColorPickerStates.white:return"light";case coloration.ePaletteColorPickerStates.black:return"dark"}},enumerable:!0,configurable:!0}),a.prototype.getParagraph=function(){if(angular.isUndefined(this._paragraph)){var a=void 0;switch(this.colorType){case coloration.ePaletteColorPickerStates.white:a=this.$filter("translate")("design.coloration.generic.light"),this._paragraph=this.$filter("translate")("design.coloration.palettecolordialog.paragrpah",{colorType:a});break;case coloration.ePaletteColorPickerStates.black:a=this.$filter("translate")("design.coloration.generic.dark"),this._paragraph=this.$filter("translate")("design.coloration.palettecolordialog.paragrpah",{colorType:a});break;default:this._paragraph=""}}return this._paragraph},a.prototype.isAdvancedMode=function(){return this.state===ePaletteColorDialogStates.ADVANCED},a.prototype.onReturn=function(){this.state=ePaletteColorDialogStates.NORMAL,this.showReturnButton=!1},a.prototype.onClose=function(){this.CcDialogBuilder.hide()},a.prototype.colorSelected=function(a){this.onColorSelected(),this.CcDialogBuilder.hide(a),this.selectedColor=a.color,this.isAdvancedMode()&&this.colorationUtils.addColorToRecent(a.color)},a.prototype.placeholderClick=function(){this.state=ePaletteColorDialogStates.ADVANCED,this.showReturnButton=!0},a}(),ePaletteColorDialogStates;!function(a){a[a.NORMAL=0]="NORMAL",a[a.ADVANCED=1]="ADVANCED"}(ePaletteColorDialogStates||(ePaletteColorDialogStates={}));var ColorModeDialog=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this;this.$scope=a,this.undoRedo=b,this.$translate=c,this.$mdDialog=d,this.colorationUtils=e,this.$filter=f,this.CcDialogBuilder=g,this.themeChooser=h,this.$timeout=i,this.applicationState=j,this.previewScale=k,this.consumerBiLogger=l,this.themeChooserUtils=m,this.init(),this.$scope.$on("$stateChangeStart",function(){n.$mdDialog.destroy()}),this.$timeout(function(){return n.setListenerAndAdjustView()})}return a.$inject=["$scope","undoRedo","$translate","$mdDialog","colorationUtils","$filter","CcDialogBuilder","themeChooser","$timeout","applicationState","previewScale","consumerBiLogger","themeChooserUtils"],a.prototype.init=function(){var a=this.getActiveColorPalette();this.isNewColoration=this.checkIfNewColoration(a),this.populateLevels(),this.populateModes(this.isNewColoration),this.activeMode=this.getRadioModeValue(a.currentState),this.activeLevel=this.getRadioColorationLevelValue(a.colorationLevel)},a.prototype.getActiveColorPalette=function(){return this.themeChooser.getActiveTheme("mainKit").kitFonts.colors},a.prototype.checkIfNewColoration=function(a){return this.themeChooserUtils.isNewColorationPalette(a)},a.prototype.onModeChange=function(a){var b=this;this.activeMode=a,this.consumerBiLogger.siteDesign.customizeDesignChangeDarkLightMode(coloration.ColorationMode[a.value]),this.colorationUtils.setColorationMode(a.value).then(function(){return b.consumerBiLogger.siteDesign.customizeDesignChangeDarkLightModeSuccess(coloration.ColorationMode[a.value])}),this.undoRedo.captureOperation(!1,!0)},a.prototype.populateModes=function(a){var b={label:this.$translate.instant("design.coloration.color-mode-selector-new.dialog.coloration-mode.radio-buttons.light"),icon:"coloration-modes:Light",complex:!0,value:coloration.ColorationMode.light},c={label:this.$translate.instant("design.coloration.color-mode-selector-new.dialog.coloration-mode.radio-buttons.dark"),icon:"coloration-modes:Dark",complex:!0,value:coloration.ColorationMode.dark},d={label:this.$translate.instant("design.coloration.color-mode-selector-new.dialog.coloration-mode.radio-buttons.mix"),icon:"coloration-modes:Mixed",complex:!0,value:coloration.ColorationMode.mix};this.modes=a?[b,c,d]:[b,c]},a.prototype.getRadioModeValue=function(a){return this.modes.find(function(b){return b.value===a})},a.prototype.onColorationLevelChange=function(a){var b=this;this.activeLevel=a,
this.consumerBiLogger.siteDesign.customizeDesignChangeColorationLevel(coloration.ColorationLevel[a.value]),this.colorationUtils.setColorationLevel(a.value).then(function(){return b.consumerBiLogger.siteDesign.customizeDesignChangeColorationLevelSuccess(coloration.ColorationLevel[a.value])}),this.undoRedo.captureOperation(!1,!0)},a.prototype.getRadioColorationLevelValue=function(a){return this.levels.find(function(b){return b.value===a})},a.prototype.populateLevels=function(){this.levels=[{label:this.$translate.instant("design.coloration.color-mode-selector-new.dialog.coloration-level.drop-down.plain"),value:coloration.ColorationLevel.plain,complex:!0,icon:"coloration-levels:NoColorx10"},{label:this.$translate.instant("design.coloration.color-mode-selector-new.dialog.coloration-level.drop-down.tinted"),value:coloration.ColorationLevel.tinted,complex:!0,icon:"coloration-levels:SoftTintx10"},{label:this.$translate.instant("design.coloration.color-mode-selector-new.dialog.coloration-level.drop-down.colorful"),value:coloration.ColorationLevel.colorful,complex:!0,icon:"coloration-levels:Colorfulx10"},{label:this.$translate.instant("design.coloration.color-mode-selector-new.dialog.coloration-level.drop-down.vibrant"),value:coloration.ColorationLevel.vibrant,complex:!0,icon:"coloration-levels:Vibrantx10"}]},a.prototype.onClose=function(){this.CcDialogBuilder.hide()},a.prototype.syncBackdropScrollWithFakeBrowser=function(){angular.element(".md-dialog-container")[0].addEventListener("wheel",function(a){angular.element(".overlay-viewport")[0].scrollTop+=a.deltaY},{passive:!0})},a.prototype.setListenerAndAdjustView=function(){this.applicationState.clearContentFocus(),this.previewScale.setScaleFactor(PreviewScale.MinScaleFactor),this.syncBackdropScrollWithFakeBrowser()},a}(),AdvancedColorPicker=function(){function a(a,b,c,d){var e=this;this.$timeout=a,this.$element=b,this.$scope=c,this.$q=d,this.hexIsValid=!0,this.eventAPI={onChange:function(a,b,c){return e.colorPickerChange()}},this.options={alpha:!1,format:"hex",inline:!0},this.init()}return a.$inject=["$timeout","$element","$scope","$q"],a.prototype.init=function(){var a=this;this.hueHandle=this.$element.find("[data-handle]"),this.hue=this.$element.find("[data-hue]"),this.handleTransitionIfInDialog(),this.$timeout(function(){a.originalHue=a.api.getElement().find(".color-picker-hue"),a.$timeout(function(){a.updateOriginalColorpickerHue().then(function(){a.inTransition||(a.loaded=!0)})})}),$(document).off("mousemove.consumer").on("mousemove.consumer",function(b){return a.changeHue(b)}),$(document).off("mouseup.consumer").on("mouseup.consumer",function(b){return a.changedHue()})},a.prototype.handleTransitionIfInDialog=function(){var a=this;this.$timeout(function(){a.updateOriginalColorpickerHue().then(function(){a.loaded=!0})})},a.prototype.updateOriginalColorpickerHue=function(){var a=this,b=this.$q.defer();return this.api.getScope().AngularColorPickerController.huePosUpdate(),this.$timeout(function(){a.placeHueHandler(),b.resolve()}),b.promise},Object.defineProperty(a.prototype,"hueContainerLeft",{get:function(){return this.hue.offset().left},enumerable:!0,configurable:!0}),a.prototype.changeHue=function(a){var b=this;if("mousedown"===a.type&&a.target===this.hue[0])this.changingHue=!0;else if(!this.changingHue)return;0!==a.which&&(this.$timeout(function(){b.originalHue.triggerHandler({type:"click",pageY:b.calculatePageY(a)})}),this.hueHandle.css("left",this.getOffsetLeft(a)),this.colorOrigin="colorpicker")},a.prototype.changedHue=function(){this.changingHue=!1},a.prototype.placeHueHandler=function(){this.hueHandle.css({left:this.getOriginalHuePosition()})},a.prototype.calculatePageY=function(a){var b=this.getOffsetLeft(a),c=b/this.$element.width(),d=this.originalHue.height()*c;return this.originalHue.offset().top+d},a.prototype.getOriginalHuePosition=function(){var a=this.originalHue.find(".color-picker-slider").position().top/this.originalHue.height();return this.hue.width()*a},a.prototype.getOffsetLeft=function(a){var b=Math.max(a.pageX-this.hueContainerLeft,0);return Math.min(b,this.hue.width())},a.prototype.textChange=function(a){var b=this;this.$timeout(function(){b.placeHueHandler()},50)},a.prototype.onTextFixed=function(){var a=this;this.$timeout(function(){a.hexIsValid=!0},100)},a.prototype.textChanging=function(a){this.hexIsValid=HexInput.isColorValid(a),this.colorOrigin="hex"},a.prototype.colorPickerChange=function(){this.colorOrigin="colorpicker"},a.prototype.confirmClick=function(){this.hexIsValid&&this.onColorSelected({selection:{color:this.selectedColor,origin:this.colorOrigin}})},a.prototype.cancelClick=function(){this.onCancel&&this.onCancel()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("advancedColorPicker",{templateUrl:"views/design/advanced-color-picker.html",controller:AdvancedColorPicker,bindings:{selectedColor:"<",onColorSelected:"&",onCancel:"&?"}});var KitThumbnail=function(){function a(a,b,c){this.themeChooser=a,this.getKitName=b,this.$translate=c,this.ePaletteColorPickerStates=coloration.ePaletteColorPickerStates,a.initialize()}return a.$inject=["themeChooser","getKitName","$translate"],a.prototype.getColorAccordingToPalette=function(b,c){if(void 0!==c){return this.themeChooser.coloration.getSpecificKitColors(this.kit)[coloration.ePaletteColorPickerStates[c]]}return(this.overrideColorsPalette||this.themeChooser.getColorsOrderedForPalette(this.kit))[a.colorLookup.indexOf(b)]||"#ffffff"},a.prototype.getBoxColor=function(a){var b=this.themeChooser.coloration.getSpecificKitColors(this.kit);return 1===this.themeChooser.coloration.getSpecificKitColorationMode(this.kit)?b.black:b.white},a.prototype.getTextColor=function(a){var b=this.themeChooser.coloration.getSpecificKitColors(this.kit);return 1===this.themeChooser.coloration.getSpecificKitColorationMode(this.kit)?b.white:b.black},a.prototype.getTextClass=function(){var a=this.getKitName(this.kit);return(a=this.ensureThumbnailExists(a))+"-text"},a.prototype.getFontFaceOfKit=function(){var a=this.overrideFontPalette||this.kit.fontPalette,b=a[0].style;return _.last(b.split(" "))},a.prototype.getDisplayName=function(){var a=this.kit.displayName||this.getKitName(this.kit);return this.$translate.instant("design.kit.type."+a.toLowerCase().replace(/\s/g,"-"))},a.prototype.thumbnailTemplate=function(){var a;return this.themeChooser.getActiveTheme("color")===this.kit&&(a=this.getKitName(this.themeChooser.coloration.getkitUsedForConfigurations())),a=a||this.getKitName(this.kit),"views/design/kits/"+(a=this.ensureThumbnailExists(a))+"-kit.html"},a.prototype.ensureThumbnailExists=function(b){return-1===a.implementedThumbnails.indexOf(b)&&(b="merlot"),b},a}();KitThumbnail.implementedThumbnails=["agile","evolution","horizon","black-ice","bold","skyscraper","sophisticated","cadenza","chic","classic","hi-rise","delight","upbeat","elegant","vogue","bouquet","rosewater","deep-forest","fresh","indulge","playground","midnight","maison","breeze","minimal","bounce","clean","merlot","serene","spark","fuse","intensity","soho","unplugged","sugar","vintage","smart","jet-black","timeless","rustic","innovative","charming","fun","funky","sincere","army","royal","dynamic","tender","organic","pure"],KitThumbnail.colorLookup=["L1","L2","L3","D1","D2","D3"],angular.module("siteGeneratorStaticsConsumerAppInternal").component("kitThumbnail",{templateUrl:"views/design/kit-thumbnail.html",controller:KitThumbnail,bindings:{kit:"<",overrideColorsPalette:"<",overrideFontPalette:"<"}});var FontThumbnail=function(){function a(b){var c=this;this.colorationUtils=b,this.hasBackground=void 0===this.hasBackground,this.isSelectable=void 0===this.isSelectable||this.isSelectable,this.colorationUtils.initialize().then(function(){var b=c.colorationUtils.getMainColor();c.bgColor=c._addOverlay(b,a.overlayColor,a.overlayAlpha)})}return a.$inject=["colorationUtils"],a.prototype.scaleFontSize=function(b){return b*(1+a.fontSizeScaleStep*(this.fontScale||0))},a.prototype.getNameFontStyle=function(){var a=this.scaleFontSize(this.fontData.name.size);return{font:this.fontData.name.font,"font-size":a+"px"}},a.prototype.getDescriptionFontStyle=function(){var a=this.scaleFontSize(this.fontData.description.size);return{font:this.fontData.description.font,"font-size":a+"px"}},a.prototype.getThumbnailStyle=function(){return{"background-color":this.hasBackground?this.bgColor:""}},a.prototype._addOverlay=function(a,b,c){var d=chroma(a).rgb(),e=chroma(b).rgb();return chroma(_.map([0,1,2],function(a){return c*e[a]+(1-c)*d[a]})).hex()},a}();FontThumbnail.fontSizeScaleStep=.05,FontThumbnail.overlayColor="#eff1f2",FontThumbnail.overlayAlpha=.9,angular.module("siteGeneratorStaticsConsumerAppInternal").component("fontThumbnail",{templateUrl:"views/design/font/font-thumbnail.html",controller:FontThumbnail,bindings:{fontData:"<",isSelected:"<",hasBackground:"<",onClick:"&",fontScale:"<",isSelectable:"<",largeBg:"<"}});var FontSizeSlider=function(){function a(a,b){this.$translate=a,this.$scope=b,this.maxFontSize=FontCustomizationService.maxDeltaHeight,this.minFontSize=-FontCustomizationService.maxDeltaHeight}return a.$inject=["$translate","$scope"],a.prototype.$onInit=function(){var a=this;this.$scope.$watch("$ctrl.value",function(b,c){a.setSizeLabel()},!0)},a.prototype.setFontSize=function(){this.onSetValue({value:this.value})},a.prototype.onFontSizeChange=function(a){this.onPreviewValue&&this.onPreviewValue({value:a})},a.prototype.setSizeLabel=function(){this.sizeLabel=this.$translate.instant(a.labels[this.value])},a}();FontSizeSlider.labels={"-3":"design.fonts.font-size-.-3","-2":"design.fonts.font-size-.-2","-1":"design.fonts.font-size-.-1",0:"design.fonts.font-size-.0",1:"design.fonts.font-size-.1",2:"design.fonts.font-size-.2",3:"design.fonts.font-size-.3"},angular.module("siteGeneratorStaticsConsumerAppInternal").component("fontSizeSlider",{templateUrl:"views/design/font/font-size-slider.html",controller:FontSizeSlider,bindings:{value:"=",onSetValue:"&",onPreviewValue:"&?"}});var AnimationPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=this;this.$scope=a,this.animationKit=b,this.animationUtils=c,this.previewScale=d,this.previewService=e,this.applicationState=f,this.undoRedo=g,this.pagesManager=h,this.consumerBiLogger=i,this.backgroundScrollService=j,this.flags=k,this.modelTree=l,this.layoutSolver=m,this.CONSUMER_DIALOGS=n,this.CcDialogBuilder=o,this.$translate=p,this.storyServices=q,this.pubSub=r,this.askOverrideAnimationPatternSections=!1,this.askOverrideScrollTypeSections=!1,k.staticTextsWithTranslate?(this.pagesTransitionNames=this.animationUtils.getPagesTranslationNames(),this.scrollTypeOptions=this.animationUtils.placeLabels(angular.copy(this.backgroundScrollService.getOptions()),"label","background-scroll"),this.animationPatterns=this.animationUtils.placeLabels(angular.copy(this.animationKit.getPatternsOptions()),"label","animation-pattern")):(this.pagesTransitionNames=this.pagesManager.getPagesTransitionNames(),this.scrollTypeOptions=this.backgroundScrollService.getOptions(),this.animationPatterns=this.animationKit.getPatternsOptions()),this.initValues(),this.unsubscribe=this.pubSub.subscribe(PubSub.events.NEW_STATE_STORY_WAS_SET,function(){s.initValues()}),d.setScaleFactor(PreviewScale.MinScaleFactor)}return a.$inject=["$scope","animationKit","animationUtils","previewScale","previewService","applicationState","undoRedo","pagesManager","consumerBiLogger","backgroundScrollService","flags","modelTree","layoutSolver","CONSUMER_DIALOGS","CcDialogBuilder","$translate","storyServices","pubSub"],a.prototype.$onDestroy=function(){this.unsubscribe&&this.unsubscribe()},a.prototype.initValues=function(){this.activeAnimationPattern=this.getActiveAnimationPattern(),this.activePagesTransition=this.flags.staticTextsWithTranslate?this.getPageTransitionName():this.pagesManager.getPagesTransition(),this.activeScrollType=this.getActiveScrollType()},a.prototype.getActiveAnimationPattern=function(){return _.find(this.animationPatterns,{id:this.animationUtils.getActivePatternForSite()})},a.prototype.closePanel=function(){var a=this;this.$scope.$applyAsync(function(){a.previewScale.setScaleFactor(PreviewScale.MaxScaleFactor),a.applicationState.goToBuilder()})},a.prototype.onHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.design.animations"),this.CONSUMER_DIALOGS.ANIMATION_PANEL_HELP)},a.prototype.backToDesignKit=function(){if(this.flags.siteDesignKitMenu)return void this.applicationState.goToDesignMode();this.applicationState.goToDesignKitMode()},a.prototype.setAnimationPattern=function(a){var b=this;this.consumerBiLogger.siteDesign.changeAnimationClick(this.flags.staticTextsWithTranslate?a.id:a.label),this.activeAnimationPattern=a,this.animationUtils.setSiteAnimationPattern(a.id).then(function(){b.askOverrideAnimationPatternSections=!b.animationUtils.doSiteAndSectionPatternsMatch(),b.askOverrideAnimationPatternSections&&b.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignDisplayed("element animation"),b.undoRedo.captureOperation(!1,!0),b.consumerBiLogger.siteDesign.changeAnimationSuccess(b.flags.staticTextsWithTranslate?a.id:a.label)})},a.prototype.previewAnimationPattern=function(a){this.animationUtils.previewPattern(a.id)},a.prototype.setPagesTransition=function(a){var b=this.pagesManager.getPagesTransition();this.activePagesTransition=a,this.pagesManager.setPagesTransition(a),this.undoRedo.captureOperation(!1,!0),this.consumerBiLogger.pagesManager.transitionBetweenPagesUpdated(a,b)},a.prototype.getActiveScrollType=function(){return this.flags.staticTextsWithTranslate?_.find(this.scrollTypeOptions,{value:this.backgroundScrollService.getActiveScrollTypeData().value||this.backgroundScrollService.SCROLL_TYPE.NONE}):this.backgroundScrollService.getActiveScrollTypeData()},a.prototype.getPageTransitionName=function(){return _.find(this.pagesTransitionNames,{value:this.pagesManager.getPagesTransition()})},a.prototype.refreshScrollType=function(){var a=this;return _.each(this.modelTree.getPagesNodes(),function(b){b!==a.storyServices.selectedPage&&(b.dirty=!0)}),this.storyServices.reRender()},a.prototype.setScrollType=function(a){var b=this,c=this.backgroundScrollService.getLabel(a);this.consumerBiLogger.siteDesign.customizeDesignChangeScrollAnimationClick(a,c),this.activeScrollType=a,this.backgroundScrollService.setSiteOverride(a),this.refreshScrollType().then(function(){b.askOverrideScrollTypeSections=!b.backgroundScrollService.doSiteAndSectionMatch(),b.askOverrideScrollTypeSections&&b.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignDisplayed("scroll animation"),b.undoRedo.captureOperation(!1,!0),b.consumerBiLogger.siteDesign.customizeDesignChangeScrollAnimationSuccess(a,c)})},a.prototype.overrideAnimationPatternOnSections=function(){var a=this;return this.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignClickApply("element animation"),this.animationUtils.forceSitePattern().then(function(){a.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignApplySuccess("element animation"),a.undoRedo.captureOperation(!1,!0)})},a.prototype.overrideScrollTypeOnSections=function(){var a=this;return this.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignClickApply("scroll animation"),this.backgroundScrollService.clearOverridableSections(),this.refreshScrollType().then(function(){a.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignApplySuccess("scroll animation")})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("animationPanel",{templateUrl:"views/design/animation-panel.html",controller:AnimationPanel});var FontPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=this;this.$scope=a,this.$q=b,this.$translate=c,this.CONSUMER_DIALOGS=d,this.$element=e,this.$timeout=f,this.CcDialogBuilder=g,this.themeChooser=h,this.initService=i,this.spinnerService=j,this.fontCustomizationService=k,this.applicationState=l,this.previewScale=m,this.previewService=n,this.undoRedo=o,this.pagesManager=p,this.consumerBiLogger=q,this.consumerBiLoggerHelpers=r,this.flags=s,this.modelTree=t,this.storyServices=u,this.fontUtils=v,this.assistantManager=w,this.askOverrideFontSizeSections=!1,this.kitChangeInProgress=!1,i.loaded().then(function(){return x.themeChooser.initialize()}).then(function(){return x.loaded()})}return a.$inject=["$scope","$q","$translate","CONSUMER_DIALOGS","$element","$timeout","CcDialogBuilder","themeChooser","initService","spinnerService","fontCustomizationService","applicationState","previewScale","previewService","undoRedo","pagesManager","consumerBiLogger","consumerBiLoggerHelpers","flags","modelTree","storyServices","fontUtils","assistantManager"],a.prototype.loaded=function(){var a=this;this.previewScale.setScaleFactor(PreviewScale.MinScaleFactor),this.ready=!0;var b=this.themeChooser.getColorThemes();this.fontOptions=b.map(function(b){return a.fontUtils.convertFontDataToThumbnail(b)}),this.$scope.$watch(function(){return a.getSelectedFontKitIndex()},function(b){return a.setSelectedFontKitIndex(b)}),this.$scope.$watch(function(){return a.getSelectedFontSize()},function(b){return a.selectedFontSize=b})},a.prototype.setSelectedFontKitIndex=function(a){var b=this,c=void 0===this.selectedFontIndex;this.selectedFontIndex=a,this.selectedFont=this.fontOptions[this.selectedFontIndex],c||this.spinnerService.waitForStop().then(function(){b.scrollToSelectedFont("animated")})},a.prototype.getSelectedFontKitIndex=function(){return this.kitChangeInProgress?this.selectedFontIndex:_.findIndex(this.fontOptions,{id:this.themeChooser.getActiveFontTheme().id})},a.prototype.getSelectedFontSize=function(){return this.fontCustomizationService.getFontSizeAllSite()||0},a.prototype.closePanel=function(){var a=this;this.$scope.$applyAsync(function(){a.previewScale.setScaleFactor(PreviewScale.MaxScaleFactor),a.applicationState.goToBuilder()})},a.prototype.showHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.design.fonts"),this.CONSUMER_DIALOGS.FONT_PANEL_HELP)},a.prototype.backToDesignKit=function(){if(this.flags.siteDesignKitMenu)return void this.applicationState.goToDesignMode();this.applicationState.goToDesignKitMode()},a.prototype.setFontKit=function(a,b){var c=this;this.isSelectedKit(a)||(this.askOverrideFontSizeSections=!1,this.kitChangeInProgress=!0,this.consumerBiLogger.siteDesign.clickOnDesiredColorFontSet("font set",a.id,b,this.fontOptions.length),this.fontCustomizationService.resetFontSize(),this.spinnerService.waitForMe("setFontKit"),this.themeChooser.setAllFontsFromOneTheme(a.id).then(function(){c.themeChooser.serializeFontKitSelection(a.id),c.undoRedo.captureOperation(!1,!0);var d=c.consumerBiLoggerHelpers.getEditMode();return c.consumerBiLogger.siteDesign.colorFontSetChangeSuccess(d,"font set",a.id,b,c.fontOptions.length),c.previewService.waitForChanges()}).finally(function(){c.kitChangeInProgress=!1,c.spinnerService.imDone("setFontKit")}))},a.prototype.setFontSize=function(a){var b=this;this.consumerBiLogger.siteDesign.changeFontSizeClick(a.toString(),this.selectedFont.id),this.spinnerService.waitForMe("setFontSize"),this.fontCustomizationService.setFontSizeAllSite(a),this.fontUtils.updateView().then(function(){return b.askOverrideFontSizeSections=!b.fontCustomizationService.doSiteAndSectionMatch(),b.askOverrideFontSizeSections&&b.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignDisplayed("font"),b.undoRedo.captureOperation(!1,!0),b.consumerBiLogger.siteDesign.changeFontSizeSuccess(a.toString(),b.selectedFont.id),b.previewService.waitForChanges()}).finally(function(){b.spinnerService.imDone("setFontSize")})},a.prototype.overrideFontSizeOnSections=function(){var a=this;this.spinnerService.waitForMe("overrideSectionFontSize"),this.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignClickApply("font"),this.fontCustomizationService.clearOverridableSections(),this.fontUtils.updateView().then(function(){return a.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignApplySuccess("font"),a.previewService.waitForChanges()}).finally(function(){a.spinnerService.imDone("overrideSectionFontSize")})},a.prototype.isSelectedKit=function(a){return a===this.selectedFont},a.prototype.getFontScale=function(a){return this.isSelectedKit(a)?this.selectedFontSize:void 0},a.prototype.doAnimatedVerticalScroll=function(a){var b=this,c=a.calculateScroll,d=a.childToScrollTo,e=a.scrollableContainer,f=a.duration,g=a.timeout;return this.$q(function(a){b.$timeout(function(){e.animate({scrollTop:c(d[0].offsetTop)},f,function(){a()})},g)})},a.prototype.scrollToSelectedFont=function(a){var b=this;return!1!==this.assistantManager.getCustomTaskData("scrollToSelectedFont")&&this.$timeout(function(){return b.doAnimatedVerticalScroll({childToScrollTo:b.$element.find(".font-item").eq(b.selectedFontIndex),scrollableContainer:b.$element.find(".cc-panel-body"),calculateScroll:function(a){return Math.max(0,a-12)},duration:"animated"===a?1e3:0,timeout:"animated"===a?300:0})}),this.$q.when()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("fontPanel",{templateUrl:"views/design/font-panel.html",controller:FontPanel});var SlideshowAnimationPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this;this.$scope=a,this.applicationState=b,this.undoRedo=c,this.flags=d,this.initService=e,this.CcDialogBuilder=f,this.$translate=g,this.previewScale=h,this.sectionPanelManager=i,this.storyServices=j,this.CONSUMER_DIALOGS=k,this.pubSub=l,this.consumerBiLogger=m,this.slideShowService=n,this.slideShowName="slideshow",this.transition=new SlideShowTransition,e.loaded().then(function(){o.load()})}return a.$inject=["$scope","applicationState","undoRedo","flags","initService","CcDialogBuilder","$translate","previewScale","sectionPanelManager","storyServices","CONSUMER_DIALOGS","pubSub","consumerBiLogger","slideShowService"],a.prototype.$onDestory=function(){this.unsubscribe&&this.unsubscribe()},a.prototype.load=function(){var a=this;if(this.animationPatterns=this.slideShowService.getTransitionOptions(),this.setSelectedNode(),!this.node)return void this.applicationState.goToBuilder();this.flags.listItemSlideShow&&this.slideShowService.isSlideShow(this.node)&&!this.slideShowService.getSelectedItem(this.node.id)&&this.slideShowService.selectUnhiddenItem(this.node,0),this.transition.time=this.slideShowService.getTransitionTime(this.node.id),this.setActiveFieldValues(),this.unsubscribe=this.pubSub.subscribe(PubSub.events.NEW_STATE_STORY_WAS_SET,function(){a.setActiveFieldValues()})},a.prototype.setActiveFieldValues=function(){this.activeAnimationPattern=this.getActiveAnimationPattern()},a.prototype.setSelectedNode=function(){var a=this.applicationState.getContentFocus().nodeId,b=this.sectionPanelManager.getSectionFromContentId(a);this.node=b.node},a.prototype.getActiveAnimationPattern=function(){return this.transition.name=this.slideShowService.getTransitionName(this.node.id),_.find(this.animationPatterns,{id:this.transition.name})},a.prototype.closePanel=function(){var a=this;this.$scope.$applyAsync(function(){a.applicationState.goToBuilder(!0),a.previewScale.setScaleFactor(PreviewScale.MaxScaleFactor)})},a.prototype.back=function(){this.applicationState.goToSwitchPresetMode("animation-back")},a.prototype.showSectionAnimationHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.section.animations"),this.CONSUMER_DIALOGS.SECTION_ANIMATIONS_HELP)},a.prototype.setAnimationPattern=function(a){this.consumerBiLogger.sectionDesign.changeElementAnimationClick(this.node.alias,this.node.getContentElementType(),this.flags.staticTextsWithTranslate?a.id:a.label,this.slideShowName),this.transition.name=a.name,this.slideShowService.setTransitionName(this.node.id,a.name);var b=this.slideShowService.changeTransition(this.node,this.transition);this.setActiveFieldValues(),this.undoRedo.captureOperation(!1,!0),b&&this.consumerBiLogger.sectionDesign.changeElementAnimationSuccess(this.node.alias,this.node.getContentElementType(),this.flags.staticTextsWithTranslate?a.id:a.label,this.slideShowName)},a.prototype.goToPreview=function(){var a=this;this.consumerBiLogger.builder.topBarPreviewSiteClick("section animation for slideshow"),this.applicationState.goToPreview(!0).then(function(){a.consumerBiLogger.builder.topBarPreviewSiteSuccess()})},a.prototype.setTransitionTime=function(a){this.transition.time=a,this.slideShowService.setTransitionTime(this.node.id,this.transition.time),this.slideShowService.changeTransition(this.node,this.transition),this.undoRedo.captureOperation(!1,!0)},a.prototype.getTransitionTime=function(){return this.transition.time},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("slideshowAnimationPanel",{templateUrl:"views/design/slideshow-animation-panel.html",controller:SlideshowAnimationPanel});var SectionAnimationPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=this;this.$scope=a,this.CONSUMER_DIALOGS=b,this.$q=c,this.animationKit=d,this.animationUtils=e,this.previewService=f,this.applicationState=g,this.undoRedo=h,this.consumerBiLogger=i,this.backgroundScrollService=j,this.flags=k,this.overlayManager=l,this.initService=m,this.CcDialogBuilder=n,this.$translate=o,this.previewScale=p,this.sectionPanelManager=q,this.simpleSolutionManager=r,this.solutionFetcher=s,this.sectionBackgroundService=t,this.storyServices=u,this.pubSub=v,this.scrollTypeChangeable=!1,m.loaded().then(function(){w.load()})}return a.$inject=["$scope","CONSUMER_DIALOGS","$q","animationKit","animationUtils","previewService","applicationState","undoRedo","consumerBiLogger","backgroundScrollService","flags","overlayManager","initService","CcDialogBuilder","$translate","previewScale","sectionPanelManager","simpleSolutionManager","solutionFetcher","sectionBackgroundService","storyServices","pubSub"],a.prototype.load=function(){var a=this;if(this.flags.staticTextsWithTranslate?(this.scrollTypeOptions=this.animationUtils.placeLabels(angular.copy(this.backgroundScrollService.getOptions()),"label","background-scroll"),this.animationPatterns=this.animationUtils.placeLabels(angular.copy(this.animationKit.getPatternsOptions()),"label","animation-pattern")):(this.scrollTypeOptions=this.backgroundScrollService.getOptions(),this.animationPatterns=this.animationKit.getPatternsOptions()),this.setSelectedNode(),!this.node)return void this.applicationState.goToBuilder();this.setActiveFieldValues(),this.unsubscribe=this.pubSub.subscribe(PubSub.events.NEW_STATE_STORY_WAS_SET,function(){a.setActiveFieldValues()}),this.scrollTypeChangeable=this.canChangeScrollType()},a.prototype.$onDestroy=function(){this.unsubscribe&&this.unsubscribe()},a.prototype.setActiveFieldValues=function(){this.activeAnimationPattern=this.getActiveAnimationPattern(),this.activeScrollType=this.getActiveScrollType()},a.prototype.setSelectedNode=function(){var a=this.applicationState.getContentFocus().nodeId,b=this.sectionPanelManager.getSectionFromContentId(a);this.node=b.node,this.sitePart=b.sitePart},a.prototype.goToAnimationPanel=function(){this.applicationState.goToAnimationPanel(BIOrigins.SectionAnimationPanel)},a.prototype.getActiveAnimationPattern=function(){return _.find(this.animationPatterns,{id:this.animationUtils.getActivePatternForSection(this.node,this.sitePart)})},a.prototype.closePanel=function(){var a=this;this.$scope.$applyAsync(function(){a.applicationState.goToBuilder(!0),a.previewScale.setScaleFactor(PreviewScale.MaxScaleFactor)})},a.prototype.back=function(){this.applicationState.goToSwitchPresetMode("animation-back")},a.prototype.showSectionAnimationHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.section.animations"),this.CONSUMER_DIALOGS.SECTION_ANIMATIONS_HELP)},a.prototype.setAnimationPattern=function(a){var b=this;this.consumerBiLogger.sectionDesign.changeElementAnimationClick(this.node.alias,this.node.getContentElementType(),this.flags.staticTextsWithTranslate?a.id:a.label,""),this.activeAnimationPattern=a,this.animationUtils.setSectionAnimationPattern(this.node,this.sitePart,a.id).then(function(){b.undoRedo.captureOperation(!1,!0),b.consumerBiLogger.sectionDesign.changeElementAnimationSuccess(b.node.alias,b.node.getContentElementType(),b.flags.staticTextsWithTranslate?a.id:a.label,"")})},a.prototype.previewAnimationPattern=function(a){this.animationUtils.previewPatternForLgs(this.lgs,a.id)},a.prototype.canChangeScrollType=function(){var a=!1;return this.flags.sectionMedia&&(a=a||this.sectionBackgroundService.hasScrollableBackground(this.node)),a=a||_.some(this.lgs,function(a){return a.canChangeScrollType()}),this.flags.sectionMedia?a&&!this.node.backgroundHasFaces:a},a.prototype.getActiveScrollType=function(){return _.find(this.scrollTypeOptions,{value:this.backgroundScrollService.getActiveScrollType(this.node)||this.backgroundScrollService.SCROLL_TYPE.NONE})},a.prototype.refreshScrollType=function(){return this.storyServices.reRender()},a.prototype.setScrollType=function(a){var b=this,c=this.backgroundScrollService.getLabel(a);this.consumerBiLogger.sectionDesign.changeScrollAnimationClick(this.node.alias,this.node.getContentElementType(),c,a),this.activeScrollType=a,this.backgroundScrollService.setSectionOverrideWithInheritance(this.node,a),this.$q.when().then(function(){if(b.flags.sectionMedia)return b.sectionBackgroundService.updateViewer(b.node)}).then(function(){return b.refreshScrollType()}).then(function(){b.undoRedo.captureOperation(!1,!0),b.consumerBiLogger.sectionDesign.changeScrollAnimationSuccess(b.node.alias,b.node.getContentElementType(),c,a)})},Object.defineProperty(a.prototype,"lgs",{get:function(){return this.solutionFetcher.getSectionSolution(this.node.containerPageId,this.node.id)},enumerable:!0,configurable:!0}),a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionAnimationPanel",{templateUrl:"views/design/section-animation-panel.html",controller:SectionAnimationPanel});var SectionBackgroundPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){this.$scope=a,this.$q=b,this.$translate=c,this.CONSUMER_DIALOGS=d,this.$element=e,this.$timeout=f,this.sectionBackgroundManager=g,this.initService=h,this.previewScale=i,this.applicationState=j,this.assistantManager=k,this.mediaGalleryAdapter=l,this.mediaGallery=m,this.CcDialogBuilder=n,this.consumerBiLogger=o,this.flags=p,this.mediaTypes=cc.MediaPreviewType,this.initialized=!1,this.showBackground=!1,this.init()}return a.$inject=["$scope","$q","$translate","CONSUMER_DIALOGS","$element","$timeout","sectionBackgroundManager","initService","previewScale","applicationState","assistantManager","mediaGalleryAdapter","mediaGallery","CcDialogBuilder","consumerBiLogger","flags"],Object.defineProperty(a.prototype,"automationAttribute",{get:function(){var b=this.sectionBackgroundManager.mode;return a.AUTOMATION_LABELS[b.toUpperCase()]},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isHeaderMode",{get:function(){return"header"===this.sectionBackgroundManager.mode},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shouldShowParagraph",{get:function(){return!this.shouldShowHiddenParts&&!this.sectionBackgroundManager.isBackgroundHidden()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shouldShowHiddenParts",{get:function(){return this.isHeaderMode&&!this.showBackground},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shouldShowBackdrop",{get:function(){return this.shouldShowHiddenParts||this.displaySettingsPopup},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shouldShowBackground",{get:function(){return this.initialized&&!!this.selectedBackground},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"label",{get:function(){switch(this.sectionBackgroundManager.mode){case"header":
return this.$translate.instant("builder.section-background.panel-headline-text-header");case"list":default:return this.$translate.instant("builder.section-background.panel-headline-text")}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"selectedBackground",{get:function(){return this.backgrounds.find(function(a){return a.isSelected})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"firstImage",{get:function(){return this.backgrounds.find(function(a){return"image"===a.data.type})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"paragraphTextKey",{get:function(){return"header"!==this.sectionBackgroundManager.mode?"builder.section-background.panel-paragraph-text":"builder.section-background.panel-paragraph-text-header-mode"},enumerable:!0,configurable:!0}),a.prototype.showSettings=function(a){return a.isSelected&&_(["image","gallery","pattern"]).includes(a.data.type)},a.prototype.getCategoryLabelPrefix=function(a){return"builder.section-background.categories."+a},a.prototype.getCategoryTooltipPrefix=function(a){return"section_background_categories_"+a},a.prototype.getSettingsButtonText=function(a){switch(a){case"image":return"builder.section-background.image-settings";case"gallery":return"builder.section-background.gallery-settings";case"pattern":return"builder.section-background.pattern-settings"}},a.prototype.getSettingsButtonIcon=function(a){switch(a){case"image":case"gallery":return"settings";case"pattern":return"color"}},a.prototype.selectBackground=function(a){var b=this;if(!a.isSelected)return this.$q(function(c){var d=b.backgrounds.find(function(a){return a.isSelected});b.unSelectSelected(d),a.isSelected=!0,b.sectionBackgroundManager.setBackground(a.org),c()})},a.prototype.goToListModeClick=function(){this.applicationState.goToSectionListBackgroundPanel()},a.prototype.onShowBackgroundToggleValueChange=function(a){var b,c=this,d=this.sectionBackgroundManager.getParamsToBI().concat([a?"show":"hide"]),e=d[0],f=d[1],g=d[2];this.consumerBiLogger.sectionDesign.showHideListHeaderBackgroundClick(e,f,g),a?(b=this.lastBackground?this.lastBackground:this.firstImage||this.backgrounds[0],this.sectionBackgroundManager.toggleOnFirstField()):this.lastBackground=this.selectedBackground,this.$timeout(function(){c.$q(function(d){a?(b.isSelected=!1,c.selectBackground(b).then(d)):c.sectionBackgroundManager.setBackground(void 0).then(d)}).then(function(){c.consumerBiLogger.sectionDesign.showHideListHeaderBackgroundSuccess(e,f,g)})},300)},a.prototype.settingsButtonClick=function(a){var b=this;switch(a.data.type){case"image":if(this.displaySettingsPopup=!this.displaySettingsPopup,this.displaySettingsPopup?this.popupScroller.scrollToExposePopup():this.popupScroller.reset(),this.displaySettingsPopup){var c=this.sectionBackgroundManager.getParamsToBI(),d=c[0],e=c[1],f=this.applicationState.getBackgroundModeForBi();this.consumerBiLogger.sectionDesign.openBackgroundImageSettings(f,e,d)}break;case"gallery":var g=angular.copy(a.org).mediaItems.map(function(a){return a.active=!0,a.mediaType="image",a});this.sectionBackgroundManager.openGalleryOrganizer(g).then(function(c){_.isEqual(c.org.mediaItems,a.org.mediaItems)||b.$timeout(function(){a=$.extend(a,b.sectionBackgroundManager.convertOrgToBackgroundObject({mediaType:a.data.type,galleryType:a.org.galleryType,mediaItems:c.org.mediaItems},!0)),b.sectionBackgroundManager.setBackground(a.org)})});break;case"pattern":this.applicationState.goToSectionColorPanel(BIOrigins.SectionBackgroundPanel)}},a.prototype.backgroundSettingsClose=function(){this.displaySettingsPopup=!1,this.popupScroller.reset()},a.prototype.closePanel=function(){var a=this;this.$scope.$applyAsync(function(){a.previewScale.setScaleFactor(PreviewScale.MaxScaleFactor),a.applicationState.goToBuilder(!0)})},a.prototype.goToPrevState=function(){this.applicationState.goBack()},a.prototype.uploadMedia=function(a){var b=this,c=this.sectionBackgroundManager.getParamsToBI(),d=c[0],e=c[1],f=this.sectionBackgroundManager.convertMediaPreviewTypeToBi(a),g=this.applicationState.getBackgroundModeForBi();this.consumerBiLogger.sectionDesign.uploadBackgroundClick(f,g,e,d),this.sectionBackgroundManager.uploadBackground(a).then(function(a){if(!_.isEmpty(a)){var c=b.mediaGallery.getItemId(a.org),d=c&&_.find(b.backgrounds,function(a){return b.mediaGallery.getItemId(a.org)===c});c&&d?a=d:b.flags.simpleBackgroundsOrder?b.replaceFirstBackgroundInCategory(a):b.backgrounds.unshift(a),b.selectBackground(a)}})},a.prototype.replaceFirstBackgroundInCategory=function(a){var b=this,c=this.sectionBackgroundManager.getCategory(a),d=this.backgrounds.findIndex(function(a){return c===b.sectionBackgroundManager.getCategory(a)}),e=this.backgrounds[d];a.label=e.label,delete e.label,this.backgrounds.splice(d,0,a)},a.prototype.onHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.section.sectionMedia.patternsPanel"),this.CONSUMER_DIALOGS.SECTION_BACKGROUNDS_HELP)},a.prototype.init=function(){var b=this;this.popupScroller=new helpers.PopupScroller(this.$timeout,this.$element,".-selected","section-background-settings"),this.initService.loaded().then(function(){b.backgrounds=[],b.allBackgrounds=b.sectionBackgroundManager.calculateBackgrounds(),b.addBackgrounds(a.ADD_BACKGROUNS_START),b.initialized=!0,b.showBackground=b.shouldShowBackground,b.flags.simpleBackgroundsOrder&&(b.shouldShowHiddenParts||b.scrollToSelectedBackground("immediate")),b.$timeout(function(){b.bindScrollEvent()})})},a.prototype.addBackgrounds=function(b){void 0===b&&(b=a.ADD_BACKGROUNS_STEP);var c=this.backgrounds.length,d=c+b;(e=this.backgrounds).push.apply(e,this.allBackgrounds.slice(c,d));var e},a.prototype.bindScrollEvent=function(){var b=this;this.$element.find(".cc-panel-body").scroll(function(c){var d=c.target,e=d.scrollTop,f=d.scrollHeight,g=d.clientHeight,h=e+g,i=f-h;b.allBackgrounds.length>b.backgrounds.length&&i<a.INFINITE_SCROLL_THRESHOLD&&b.$scope.$apply(function(){return b.addBackgrounds()})})},a.prototype.unSelectSelected=function(a){a||(a=this.backgrounds.find(function(a){return a.isSelected})),a&&(a.isSelected=!1)},a.prototype.doAnimatedVerticalScroll=function(a){var b=a.calculateScroll,c=a.childToScrollTo,d=a.scrollableContainer,e=a.duration;return this.$q(function(a){d.animate({scrollTop:b(c[0].offsetTop)},e,function(){a()})})},a.prototype.scrollToSelectedBackground=function(a){var b=this;return!1!==this.assistantManager.getCustomTaskData("scrollToSelectedBackground")?this.$q(function(c){b.$timeout(function(){var d=b.$element.find(".-selected"),e=!d.hasClass("-with-label");b.doAnimatedVerticalScroll({childToScrollTo:d,scrollableContainer:b.$element.find(".cc-panel-body"),calculateScroll:function(a){return Math.max(0,a-(e?12:0))},duration:"animated"===a?1e3:0}).then(c)},100)}):this.$q.when()},a}();SectionBackgroundPanel.ADD_BACKGROUNS_START=12,SectionBackgroundPanel.ADD_BACKGROUNS_STEP=5,SectionBackgroundPanel.MINIMUM_PATTERNS=5,SectionBackgroundPanel.AUTOMATION_LABELS={HEADER:"section_list_header_bg_panel",LIST:"section_list_bg_panel",NONE:"section_bg_panel‎"},SectionBackgroundPanel.INFINITE_SCROLL_THRESHOLD=400,angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionBackgroundPanel",{templateUrl:"views/design/section-background-panel.html",controller:SectionBackgroundPanel});var SectionBackgroundUpload=function(){function a(a){this.flags=a,this.mediaTypes=cc.MediaPreviewType,this.displayUploadPopup=!1}return a.$inject=["flags"],a.prototype.showUploadPopup=function(){this.displayUploadPopup=!0},a.prototype.hideUploadPopup=function(){this.displayUploadPopup=!1},a.prototype.handleClick=function(a){this.displayUploadPopup=!1,this.onClick&&this.onClick({mediaType:a})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionBackgroundUpload",{templateUrl:"views/design/section-background-upload.html",controller:SectionBackgroundUpload,bindings:{onClick:"&"}});var SectionBackgroundSettingsImage=function(){function a(a,b,c,d,e,f){this.sectionBackgroundManager=a,this.undoRedo=b,this.backgroundScrollService=c,this.nodeFetcher=d,this.applicationState=e,this.consumerBiLogger=f,this.options=[{iconClass:"PositionTop",label:"Top",key:"top"},{iconClass:"PositionCenter",label:"Center",key:"center"},{iconClass:"PositionBottom",label:"Bottom",key:"bottom"}],this.initScrollType(),this.activeAligmentOption=this.sectionBackgroundManager.selectedAligment()}return a.$inject=["sectionBackgroundManager","undoRedo","backgroundScrollService","nodeFetcher","applicationState","consumerBiLogger"],a.prototype.initScrollType=function(){var a=this.nodeFetcher.getCurrentActiveNode();if(a){var b=this.backgroundScrollService.getActiveScrollType(a);this.shouldShowParallaxParagraph=_([this.backgroundScrollService.SCROLL_TYPE.PARALLAX,this.backgroundScrollService.SCROLL_TYPE.PARALLAX_ZOOM]).contains(b)}},a.prototype.setAligmentOption=function(a){var b=this.sectionBackgroundManager.getParamsToBI(),c=b[0],d=b[1];this.consumerBiLogger.sectionDesign.changeBackgroundImagePositionClick(this.sectionBackgroundManager.mode,a.key,d,c),this.activeAligmentOption=a.key,this.sectionBackgroundManager.setAligmentOption(a.key),this.consumerBiLogger.sectionDesign.changeBackgroundImagePositionSuccess(this.sectionBackgroundManager.mode,a.key,d,c),this.undoRedo.captureOperation()},a.prototype.goToPreview=function(){this.applicationState.goToPreview()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionBackgroundSettingsImage",{templateUrl:"views/design/section-background-options/section-background-settings-image.html",controller:SectionBackgroundSettingsImage});var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),SectionBackgroundSettings=function(a){function b(b,c,d,e,f,g,h,i,j){var k=a.call(this,g)||this;if(k.flags=b,k.$translate=c,k.sectionBackgroundService=d,k.nodeFetcher=e,k.sectionBackgroundManager=f,k.$timeout=g,k.backgroundScrollService=h,k.applicationState=i,k.undoRedo=j,k.isImage()&&k.flags.imagePositionsAsRectangles){var l=k.nodeFetcher.getCurrentNode(),m=k.sectionBackgroundService.getBackgroundAlignment(l,k.sectionBackgroundManager.bgPart);k.selectedPositionIndex=ImagePositions.invertedPosToDetails[m],k.initScrollType(),k.closeWhenClickOutside([".background-settings",".settings-btn"],k.onClose)}return k}return __extends(b,a),b.$inject=["flags","$translate","sectionBackgroundService","nodeFetcher","sectionBackgroundManager","$timeout","backgroundScrollService","applicationState","undoRedo"],b.prototype.positionClicked=function(a){this.selectedPositionIndex=a.index;var b=ImagePositions.posToDetails[a.index];this.sectionBackgroundManager.setAligmentOption(b),this.undoRedo.captureOperation()},b.prototype.initScrollType=function(){var a=this.nodeFetcher.getCurrentNode();if(a){var b=this.backgroundScrollService.getActiveScrollType(a);this.shouldShowParallaxParagraph=_([this.backgroundScrollService.SCROLL_TYPE.PARALLAX,this.backgroundScrollService.SCROLL_TYPE.PARALLAX_ZOOM]).contains(b)}},b.prototype.goToPreview=function(){this.applicationState.goToPreview(!0)},b.prototype.getHeaderTitle=function(){return this.$translate.instant("builder.section-background.background-settings.image.lower-title")},b.prototype.getHeaderBody=function(){return this.$translate.instant("builder.section-background.background-settings.image.body")},b.prototype.getFooterTextForParallax=function(){return this.$translate.instant("builder.section-background.background-settings.image.parallax-paragraph")},b.prototype.isImage=function(){return"image"===this.type},b.prototype.$onDestroy=function(){this.isImage()&&this.flags.imagePositionsAsRectangles&&this.onDropdownClose()},b}(BaseDropDown);angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionBackgroundSettings",{templateUrl:"views/design/section-background-options/section-background-settings.html",controller:SectionBackgroundSettings,bindings:{type:"<",onClose:"&"}});var SectionAlignmentManager=function(){function a(a,b,c,d){var e=this;this.layoutSelectionStoreProvider=a,this.pubSub=b,this.overlayManager=c,this.lssModifier=d,this._hasVerticalAlignment=!1,this.unsubscribers=[],this.changeTextAlign=function(a){e._horizontalAlignment=a,e.lssModifier.changeTextAlign(e._targetSection.groups,a)},this.changeOnMediaPosition=function(a){e.positionIndex=a-1,e.lssModifier.changeOnMediaPosition(e._targetSection.groups,e.positionIndex),e.changeTextAlign(e.hAlignFromVPosition(e.positionIndex))},this.calcHorizontalAlignment=function(){if(e._targetSection){var a=e.layoutSelectionStoreProvider.getLayoutSelectionStore(),b=_(e._targetSection.groups).map(function(a){return a.segments.filter(function(a){return a.node}).filter(function(a){return["ListHeader","ListFooter"].indexOf(a.contentElement.type)<0})}).flatten().value()[0],c=a.getPreferredLayoutData(b),d=a.getVariations(b,c.cluster);if(d){var f=d[core.ElementSubTypes.Title]||d[core.ElementSubTypes.Subtitle]||d[core.ElementSubTypes.LongText]||d[core.ElementSubTypes.Phone]||d[core.ElementSubTypes.Fax]||d[core.ElementSubTypes.Email]||d[core.ElementSubTypes.Address];f&&(e._horizontalAlignment=f.align||f.hPosition)}e._horizontalAlignment=e._horizontalAlignment||"left"}},this.calcVerticalPositions=function(){if(e._targetSection){var a=_(e._targetSection.groups).map(function(a){return a.segments}).flatten().filter(function(a){return a.node&&["ListHeader","ListFooter"].indexOf(a.contentElement.type)<0}).value();if(e._hasVerticalAlignment=_.any(a,function(a){return a.getLE().getOnMediaContainer()}),e._hasVerticalAlignment){var b=_(a).filter(function(a){var b=a.getLE();return!_.isUndefined(b.getOnMediaContainer())}).value()[0],c=e.layoutSelectionStoreProvider.getLayoutSelectionStore(),d=c.getPreferredLayoutData(b),f=c.getVariations(b,d.cluster),g=_.get(f,"containerOnMedia.vPosition");_.isUndefined(g)||(e.positionIndex=g)}}}}return a.$inject=["layoutSelectionStoreProvider","pubSub","overlayManager","lssModifier"],a.prototype.setTargetSection=function(a){var b=this;this.positionIndex=4,this._targetSection=this.overlayManager.listSpanManager.getByNodeId(a.id),this.calcVerticalPositions(),this.calcHorizontalAlignment(),this.unsubscribers.push(this.pubSub.subscribe(PubSub.events.NEW_STATE_STORY_WAS_SET,function(){b.calcHorizontalAlignment(),b.calcVerticalPositions()}))},a.prototype.clearListeners=function(){this.unsubscribers&&this.unsubscribers.forEach(function(a){return a()})},a.prototype.hAlignFromVPosition=function(a){return["left","center","right"][Number(a)%3]},a}(),SectionFontPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=this;this.$scope=a,this.$translate=b,this.CONSUMER_DIALOGS=c,this.CcDialogBuilder=d,this.themeChooser=e,this.initService=f,this.fontCustomizationService=g,this.applicationState=h,this.previewScale=i,this.undoRedo=j,this.consumerBiLogger=k,this.nodeFetcher=l,this.flags=m,this.lssModifier=n,this.fontUtils=o,this.layoutSelectionStoreProvider=p,this.onstageActionsManager=q,this.ONSTAGE_EVENTS=r,this.sectionAlignmentManager=s,this.isAlignmentSelected=function(a){return a===t.sectionAlignmentManager._horizontalAlignment},f.loaded().then(function(){return t.loaded()}),this.flags.sectionTextSplitParagraph&&q.subscribe(this.ONSTAGE_EVENTS.TOGGLE_PARAGRAPH_COLUMNS,function(a){t.lssModifier.toggleParagraphColumns(t.node)})}return a.$inject=["$scope","$translate","CONSUMER_DIALOGS","CcDialogBuilder","themeChooser","initService","fontCustomizationService","applicationState","previewScale","undoRedo","consumerBiLogger","nodeFetcher","flags","lssModifier","fontUtils","layoutSelectionStoreProvider","onstageActionsManager","ONSTAGE_EVENTS","sectionAlignmentManager"],a.prototype.$onDestory=function(){this.sectionAlignmentManager.clearListeners()},Object.defineProperty(a.prototype,"isPositionFeature",{get:function(){return this.flags.sectionTextPositionFeature},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"panelTitle",{get:function(){return this.$translate.instant("design.fonts.section-panel-title-alignment")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"panelDescription",{get:function(){return this.$translate.instant("design.fonts.section-tip-alignment")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showVerticalPositionControls",{get:function(){return this.sectionAlignmentManager._hasVerticalAlignment},enumerable:!0,configurable:!0}),a.prototype.positionClicked=function(a){this.alignSection(a,!0)},Object.defineProperty(a.prototype,"selectedPositionIndex",{get:function(){return this.sectionAlignmentManager.positionIndex+1},enumerable:!0,configurable:!0}),a.prototype.positionByAlignmen=function(a){return["TOP_LEFT","TOP_MIDDLE","TOP_RIGHT","CENTER_LEFT","CENTER_MIDDLE","CENTER_RIGHT","BOTTOM_LEFT","BOTTOM_MIDDLE","BOTTOM_RIGHT"][a]},a.prototype.alignSection=function(a,b){var c=this;void 0===b&&(b=!1);var d=b?this.positionByAlignmen(a):a;b?this.consumerBiLogger.sectionDesign.changeTextPositionClick(this.node.alias,this.node.getContentElementType(),"",d):this.consumerBiLogger.sectionDesign.changeTextAlignmentClick(d,this.node.alias,this.node.getContentElementType(),""),b?this.sectionAlignmentManager.changeOnMediaPosition(a):this.sectionAlignmentManager.changeTextAlign(a),this.fontUtils.updateNodeView(this.node).then(function(){c.undoRedo.captureOperation(!1,!0),b?c.consumerBiLogger.sectionDesign.changeTextPositionSuccess(c.node.alias,c.node.getContentElementType(),"",d):c.consumerBiLogger.sectionDesign.changeTextAlignmentSuccess(d,c.node.alias,c.node.getContentElementType(),"")})},a.prototype.loaded=function(){var a=this;if(this.themeChooser.initialize().then(function(){a.ready=!0,a.themeChooserInitialized()}),this.setSectionNode(),!this.node)return void this.applicationState.goToBuilder()},a.prototype.setSectionNode=function(){var a=this.nodeFetcher.getCurrentNodeResult();this.node=a&&a.node,this.sitePart=a&&a.sitePart,this.sectionAlignmentManager.setTargetSection(this.node)},a.prototype.themeChooserInitialized=function(){var a=this,b=this.themeChooser.getColorThemes();this.selectedFont=this.fontUtils.convertFontDataToThumbnail(_.find(b,{id:this.themeChooser.getActiveFontTheme().id}),!0),this.$scope.$watch(function(){return a.getSelectedFontSize()},function(b){return a.selectedFontSize=b})},a.prototype.closePanel=function(){var a=this;this.$scope.$applyAsync(function(){a.previewScale.setScaleFactor(PreviewScale.MaxScaleFactor),a.applicationState.goToBuilder(!0)})},a.prototype.showHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.section.font"),this.CONSUMER_DIALOGS.SECTION_FONT_HELP)},a.prototype.backToSectionDesign=function(){this.applicationState.goToSwitchPresetMode("font-back")},a.prototype.goToFontsPanel=function(){this.applicationState.goToFontsPanel(BIOrigins.SectionFontPanel)},a.prototype.getSelectedFontSize=function(){return this.fontCustomizationService.getSectionOverride(this.node)||0},a.prototype.setFontSize=function(a){var b=this;return this.consumerBiLogger.sectionDesign.changeFontSizeClick(this.node.getContentElementType(),this.node.alias,a.toString(),this.selectedFont.id),this.fontCustomizationService.setFontSize(this.node,a),this.fontUtils.updateNodeView(this.node).then(function(){b.undoRedo.captureOperation(!1,!0),b.consumerBiLogger.sectionDesign.changeFontSizeSuccess(b.node.alias,b.node.getContentElementType(),a.toString(),b.selectedFont.id)})},a.prototype.isParagraphFieldVisible=function(){var a=_.get(this,"node.contentElement.values"),b=a&&_.findKey(a,function(a){return"longText"===a.subType});return b&&this.node.argsMatchingPolicy[b]},a.prototype.showSplitParagraph=function(){return this.flags.sectionTextSplitParagraph&&this.isParagraphFieldVisible()},Object.defineProperty(a.prototype,"isSplitParagraph",{get:function(){return this.lssModifier.isParagraphColumns(this.node)},enumerable:!0,configurable:!0}),a.prototype.setSplitParagraph=function(a){var b=this;this.consumerBiLogger.sectionDesign.changeTextAlignmentClick("splitColumns",this.node.alias,this.node.getContentElementType(),""),this.lssModifier.setParagraphColumns(this.node,a),this.fontUtils.updateNodeView(this.node).then(function(){b.undoRedo.captureOperation(!1,!0),b.consumerBiLogger.sectionDesign.changeTextAlignmentSuccess("splitColumns",b.node.alias,b.node.getContentElementType(),"")})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionFontPanel",{templateUrl:"views/design/section-font-panel.html",controller:SectionFontPanel}).service("sectionAlignmentManager",SectionAlignmentManager);var BodySectionDesignMenu=function(){function a(a,b,c,d,e,f,g,h,i){this.applicationState=a,this.flags=b,this.$translate=c,this.slideShowService=d,this.sectionMedia=e,this.overlayManager=f,this.modelTree=g,this.sectionHeightService=h,this.mediaSectionUtils=i,this.showMedia=this.flags.sectionMedia&&this.shouldShowMedia(),this.listBackgroundOptions=!1}return a.$inject=["applicationState","flags","$translate","slideShowService","sectionMedia","overlayManager","modelTree","sectionHeightService","mediaSectionUtils"],a.prototype.shouldShowMedia=function(){var a=this.item.node,b=!!this.sectionMedia.getMedia(a);if(a.isList()){var c=this.modelTree.getListItems(a)[0];if(this.mediaSectionUtils.isMediaActive(c.contentElement))return!1}return b},a.prototype.$postLink=function(){if(this.isListNode=this.item.node.isList(),this.isListNode){var a=this.item.node.children.find(function(a){return a.isListHeader()});this.listBackgroundOptions=a&&a.hasVisibleFields()}},a.prototype.isSlideShow=function(){return this.flags.listItemSlideShow&&this.slideShowService.isSlideShow(this.item.node)},a.prototype.isSlideShowTransition=function(){return this.slideShowService.numOfSlides(this.item.node)>1},Object.defineProperty(a.prototype,"fontPanelTitle",{get:function(){return this.$translate.instant("builder.section-design.menu.font-alignment")},enumerable:!0,configurable:!0}),a.prototype.handleOptionClicked=function(){this.onOptionClicked&&this.onOptionClicked()},a.prototype.openMediaPanel=function(){this.applicationState.goToMediaSettingsPanel(BIOrigins.SectionPanel),this.handleOptionClicked()},a.prototype.openColorPanel=function(){this.applicationState.goToSectionColorPanel(BIOrigins.SectionPanel),this.handleOptionClicked()},a.prototype.openFontPanel=function(){this.applicationState.goToSectionFontPanel(),this.handleOptionClicked()},a.prototype.openAnimationPanel=function(){this.applicationState.goToSectionAnimationPanel(),this.handleOptionClicked()},a.prototype.openSlideshowAnimationPanel=function(){this.applicationState.goToSlideshowAnimationPanel(),this.handleOptionClicked()},a.prototype.isHeightSupported=function(){var a=this.item.node;return this.flags.changeSectionHeight&&"GeneralDescription"!==a.contentElementType&&"Contact"!==a.contentElementType},a.prototype.openHeightPanel=function(a){this.scrollToSelectedSection(),this.sectionHeightService.closeWhenClickOutside(),this.overlayManager.listSpanManager.setChangeSectionHeightState(!0),this.handleOptionClicked(),a.stopPropagation()},a.prototype.scrollToSelectedSection=function(){var a=$(".layout-group-overlay")[0];a&&a.scrollIntoView(!1)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("bodySectionDesignMenu",{templateUrl:"views/design/section-design/body-section-design-menu.html",controller:BodySectionDesignMenu,bindings:{item:"<",onOptionClicked:"&"}});var HeaderDesignMenu=function(){function a(a,b){var c=this;this.headerPresetUtils=a,this.flags=b,this.handleTypeUpdate=function(a){c.init(),c.flags.mergedHeaderPhase2&&a?c.onDesignUpdated("headerBg"):c.onDesignUpdated("headerType")},this.init()}return a.$inject=["headerPresetUtils","flags"],a.prototype.handleBackgroundUpdate=function(){this.onDesignUpdated("headerBg")},a.prototype.init=function(){this.flags.mergedHeaderPhase2&&(this.colorsSource=this.headerPresetUtils.getHeaderAvailableBackgroundColors())},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("headerDesignMenu",{templateUrl:"views/design/section-design/header-design-menu.html",controller:HeaderDesignMenu,bindings:{onDesignUpdated:"<"}});var SectionDesignMenu=function(){function a(a,b,c){var d=this;this.flags=c,a(function(){var a=b.find('[data-hook="section-design-menu"]');d.isAllMenuVisible=window.innerHeight-a.offset().top>a[0].clientHeight})}return a.$inject=["$timeout","$element","flags"],a.prototype.isHeaderNode=function(){return"GeneralDescription"===this.item.node.contentElementType&&"footer"!==this.item.node.containerPageId},a.prototype.$postLink=function(){this.isHeader=this.isHeaderNode()},a.prototype.notReady=function(){return void 0===this.isAllMenuVisible},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionDesignMenu",{templateUrl:"views/design/section-design/section-design-menu.html",controller:SectionDesignMenu,bindings:{item:"<",onOptionClicked:"&",onDesignUpdated:"<"}});var SectionDesignMenuDeprecated=function(){function a(a,b,c,d,e){var f=this;this.applicationState=a,this.flags=b,this.$element=c,this.$translate=d,this.$timeout=e,this.showBackground=!0,this.listBackgroundOptions=!1,this.$timeout(function(){var a=f.$element.find('[data-hook="section-design-menu"]');f.isAllMenuVisible=window.innerHeight-a.offset().top>a[0].clientHeight})}return a.$inject=["applicationState","flags","$element","$translate","$timeout"],a.prototype.isHeaderNode=function(){return"GeneralDescription"===this.item.node.contentElementType&&"footer"!==this.item.node.containerPageId},a.prototype.$postLink=function(){if(this.isHeader=this.isHeaderNode(),this.isHeader)return void(this.showBackground=!1);if(this.isListNode=this.item.node.isList(),this.isListNode){var a=this.item.node.children.find(function(a){return a.isListHeader()});this.listBackgroundOptions=a&&a.hasVisibleFields()}},Object.defineProperty(a.prototype,"fontPanelTitle",{get:function(){return this.$translate.instant("builder.section-design.menu.font-alignment")},enumerable:!0,configurable:!0}),a.prototype.notReady=function(){return void 0===this.isAllMenuVisible},a.prototype.handleOptionClicked=function(){this.onOptionClicked&&this.onOptionClicked()},a.prototype.openBackgroundPanel=function(){this.applicationState.goToSectionBackgroundPanel(BIOrigins.SectionPanel),this.handleOptionClicked()},a.prototype.openHeaderBackgroundPanel=function(){this.applicationState.goToSectionHeaderBackgroundPanel(BIOrigins.SectionPanel),this.handleOptionClicked()},a.prototype.openListBackgroundPanel=function(){this.applicationState.goToSectionListBackgroundPanel(BIOrigins.SectionPanel),this.handleOptionClicked()},a.prototype.openColorPanel=function(){this.applicationState.goToSectionColorPanel(BIOrigins.SectionPanel),this.handleOptionClicked()},a.prototype.openFontPanel=function(){this.applicationState.goToSectionFontPanel(),this.handleOptionClicked()},a.prototype.openAnimationPanel=function(){this.applicationState.goToSectionAnimationPanel(),this.handleOptionClicked()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionDesignMenuDeprecated",{templateUrl:"views/design/section-design/section-design-menu.html",controller:SectionDesignMenuDeprecated,bindings:{item:"<",onOptionClicked:"&"}});var HeaderBackground=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){var m=this;if(this.$translate=a,this.applicationState=b,this.themeChooser=c,this.undoRedo=d,this.headerPresetUtils=e,this.consumerBiLogger=f,this.consumerBiLoggerHelpers=g,this.mergedHeaderService=h,this.$scope=k,l.mergedHeaderPhase2)this.$scope.$watch("$ctrl.colorsSource",function(){return m.init()});else if(this.colorsSource=this.headerPresetUtils.getHeaderAvailableBackgroundColors(),this.colors=this.colorsSource.map(function(a){return{color:a.hex.toUpperCase()}}),this.shouldShowHeaderBackground=this.colors.length>1,this.shouldShowHeaderBackground){var n=this.themeChooser.getHeaderBg();n&&n.hex&&(this.current=n.hex.toUpperCase())}this.homepage=i.getPageNodeById(i.homePageId),this.isCurrentPageHomepage=j.story.selectedPage===i.homePageId}return a.$inject=["$translate","applicationState","themeChooser","undoRedo","headerPresetUtils","consumerBiLogger","consumerBiLoggerHelpers","mergedHeaderService","modelTree","storyServices","$scope","flags"],Object.defineProperty(a.prototype,"description",{get:function(){var a=this.isCurrentPageHomepage&&this.mergedHeaderService.isHeaderMerged(this.homepage),b=a?"design.header.bgcolor.transparent":"design.header.bgcolor.description";return this.$translate.instant(b)},enumerable:!0,configurable:!0}),a.prototype.onColorSelected=function(a){var b=a.color;if(b!==this.current){var c=this.consumerBiLoggerHelpers.getSectionTypeAndAlias(),d=c[0],e=c[1],f=this.colorsSource.find(function(a){return a.hex.toUpperCase()===b}).color;this.consumerBiLogger.sectionDesign.changeColorClick(e,d),this.headerPresetUtils.setHeaderBg(f.replace("color_","")),this.undoRedo.captureOperation(!1,!0),this.consumerBiLogger.sectionDesign.changeColorSuccess(e,d),this.current=b.toUpperCase(),this.onUpdated&&this.onUpdated()}},a.prototype.goToColorationPanel=function(){this.applicationState.goToColorationPanel()},a.prototype.init=function(){if(this.colors=this.colorsSource.map(function(a){return{color:a.hex.toUpperCase()}}),this.shouldShowHeaderBackground=this.colors.length>1,this.shouldShowHeaderBackground){var a=this.themeChooser.getHeaderBg();a&&a.hex&&(this.current=a.hex.toUpperCase())}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("headerBackground",{templateUrl:"views/design/header-design/header-background.html",controller:HeaderBackground,bindings:{onUpdated:"&",colorsSource:"<?"}});var HeaderProperties={FIX:"fix",TRANSPARENT:"transparent"},HeaderType=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){this.undoRedo=a,this.consumerBiLogger=b,this.wizardService=c,this.CONSUMER_DIALOGS=d,this.mergedHeaderService=e,this.CcDialogBuilder=f,this.$translate=g,this.clientTopology=h,this.headerPresetUtils=k,this.$q=l,this.homepage=i.getPageNodeById(i.homePageId),this.isCurrentPageHomepage=j.story.selectedPage===i.homePageId,this.isFixed=c.isFixedHeader(),this.isTransparent=e.isHeaderMerged(this.homepage)&&e.isHeaderMergeable(this.homepage),this.enableTransparent=this.isTransparent||this.mergedHeaderService.isHeaderMergeable(this.homepage,{validateIsFixed:!1,validateDarkHeader:!1,validateHeaderSolution:!1})}return a.$inject=["undoRedo","consumerBiLogger","wizardService","CONSUMER_DIALOGS","mergedHeaderService","CcDialogBuilder","$translate","clientTopology","modelTree","storyServices","headerPresetUtils","$q"],Object.defineProperty(a.prototype,"isSolid",{get:function(){return!this.isFixed&&!this.isTransparent},enumerable:!0,configurable:!0}),a.prototype.setSolid=function(){this.setHeaderProperties(!1,!1,BIHeaderTypes.Solid)},a.prototype.setTransparent=function(){this.enableTransparent&&this.setHeaderProperties(!1,!0,BIHeaderTypes.Transparent)},a.prototype.setFixed=function(){this.setHeaderProperties(!0,!1,BIHeaderTypes.Fixed)},a.prototype.setHeaderProperties=function(a,b,c){var d=this;if(this.isFixed!==a||this.isTransparent!==b){this.consumerBiLogger.sectionDesign.changeHeaderTransparencyStart(BIInitator.User,c);var e={};this.isFixed!==a&&(e[HeaderProperties.FIX]=this.wizardService.setFixedHeader(a)),this.isTransparent!==b&&(e[HeaderProperties.TRANSPARENT]=this.headerPresetUtils.setHeaderMerged(b,this.homepage)),this.isFixed=a,this.isTransparent=b,this.undoRedo.captureOperation(),this.$q.all(e).then(function(a){return d.onUpdated&&d.onUpdated(a[HeaderProperties.TRANSPARENT])}).then(function(){
return d.consumerBiLogger.sectionDesign.changeHeaderTransparencySuccess(BIInitator.User,c)})}},a.prototype.getHoverImgURL=function(a){return this.clientTopology.staticsUrl+"/bower_components/common-controls/dist/images/animated/header-design/x2/"+a+".gif"},a.prototype.onDisabledTransparentTooltipLinkClick=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.switch-design.header"),this.CONSUMER_DIALOGS.DISABLED_TRANSPARENT_HEADER_TOOLTIP_HELP)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("headerType",{templateUrl:"views/design/header-design/header-type.html",controller:HeaderType,bindings:{onUpdated:"<"}});var SiteDesignMenu=function(){function a(a,b,c,d,e,f,g,h,i){var j=this;this.applicationState=a,this.flags=b,this.$scope=c,this.$element=d,this.$timeout=e,this.undoRedo=f,this.designKitManager=g,this.consumerBiLogger=h,this.colorationUtils=i,this.$timeout(function(){var a=j.$element.find('[data-hook="site-design-menu"]');j.isAllMenuVisible=window.innerHeight-a.offset().top>a[0].clientHeight}),i.initialize().then(function(){j.kit=j.designKitManager.getActiveTheme(),j.$scope.$watch(function(){return j.designKitManager.getActiveTheme()},function(a){return j.kit=a})})}return a.$inject=["applicationState","flags","$scope","$element","$timeout","undoRedo","designKitManager","consumerBiLogger","colorationUtils"],a.prototype.notReady=function(){return void 0===this.isAllMenuVisible},a.prototype.handleOptionClicked=function(){this.onOptionClicked&&this.onOptionClicked()},a.prototype.openColorPanel=function(){this.applicationState.goToColorationPanel(),this.handleOptionClicked()},a.prototype.openFontPanel=function(){this.applicationState.goToFontsPanel(BIOrigins.DesignPanel),this.handleOptionClicked()},a.prototype.openAnimationPanel=function(){this.applicationState.goToAnimationPanel(BIOrigins.DesignPanel),this.handleOptionClicked()},a.prototype.onReset=function(){var a=this;this.consumerBiLogger.siteDesign.clickOnResetDesign(!1),this.designKitManager.setActiveMainKit(this.kit.id).then(function(){a.consumerBiLogger.siteDesign.resetDesignSuccess(!1)})},a.prototype.kitHasOverrides=function(){return!!this.kit&&(_.isUndefined(this.isReset)&&(this.isReset=this.designKitManager.isKitOveridden()),this.isReset)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("siteDesignMenu",{templateUrl:"views/design/site-design-menu.html",controller:SiteDesignMenu,bindings:{onOptionClicked:"&"}});var SectionOverrideWarning=function(){function a(a,b,c,d){this.$scope=a,this.$compile=b,this.$translate=c,this.$q=d,this.STEPS={INITIAL:"initial",CONFIRMED:"confirmed"},this.step=this.STEPS.INITIAL}return a.$inject=["$scope","$compile","$translate","$q"],a.prototype.overrideSections=function(){var a=this;this.$q.when().then(function(){return a.onOverrideSections()}).then(function(){a.step=a.STEPS.CONFIRMED})},a.prototype.showOverrideQuery=function(){return this.step===this.STEPS.INITIAL},a.prototype.showSuccess=function(){return this.step===this.STEPS.CONFIRMED},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionOverrideWarning",{templateUrl:"views/design/section-override-warning.html",controller:SectionOverrideWarning,bindings:{onOverrideSections:"&",show:"=",overrideMessage:"=",divider:"="}});var EnterToTab=function(){function a(a){this.experimentManager=a}return a.prototype.link=function(a,b){b.bind("keydown keypress",function(a){if(13===a.which){a.preventDefault();var b=$(this).parents("form:eq(0),body").find("input, textarea, select"),c=b.index(this);c>-1&&c+1<b.length&&b.eq(c+1).focus()}})},a}();angular.module("siteGeneratorCommon").directive("enterToTab",["experimentManager",function(a){return new EnterToTab(a)}]);var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};angular.module("siteGeneratorStaticsConsumerAppInternal").config(["$provide",function(a){a.decorator("CcDialogBuilder",["$delegate","consumerBiLogger","$q",function(a,b,c){function d(a,c){b.dialogs.approveChanges(null,null,null,a,c,null)}function e(a){b.dialogs.cancel(null,null,null,a,null)}function f(a){b.dialogs.show(null,null,null,a,null)}function g(){if(i(),k.length>0){var a=k.pop();a.popupInstance.show(a.arguments).then(function(){a.defer.resolve()})}}function h(){l=!0}function i(){l=!1}function j(a){a&&a[0]&&(a[0]=__assign({},a[0],{onRemoving:function(){g()}}))}var k=[],l=!1,m=a.show;return a.show=function(b){if(l){var c=this.$q.defer();return k.push({popupInstance:this,arguments:b,defer:c}),c.promise}h(),j(arguments);var g=m.apply(a,arguments);return b.customBi?g:(f(b.biDialogName),g.then(function(a){var c=b.biDialogTargetName;a&&(c=a.biDialogTargetName),d(b.biDialogName,c)},function(){e(b.biDialogName)}),g)},a}])}]);var CookieManager=function(){function a(a){this.$window=a}return a.$inject=["$window"],a.prototype.readCookie=function(a){var b=this.$window.document.cookie.split("; ").find(function(b){return 0===b.indexOf(a+"=")});return b?b.replace(/.*=/g,""):null},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("cookieManager",CookieManager),angular.module("exceptionOverwrite",[]).factory("$exceptionHandler",["$log","$injector",function(a,b){return function(c,d){a.error(c,d);var e=b.get("obMonitoring");e&&e.error(c.message,c)}}]);var ComponentCompiler=function(){function a(a,b){this.$compile=a,this.$rootScope=b}return a.$inject=["$compile","$rootScope"],a.prototype.compile=function(a,b,c){var d=this.createTemplateString(a,b,c),e=this.$rootScope.$new();return Object.assign(e,b||{}),this.$compile(d)(e)},a.prototype.createTemplateString=function(a,b,c){var d=_.kebabCase(a),e=_.map(b,function(a,b){return _.kebabCase(b)+"='"+b+"'"}).join(" "),f="<"+d+" "+e+"></"+d+">";return c?"<div class='"+c+"'>"+f+"</div>":f},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("componentCompiler",ComponentCompiler);var ConsumerDebug=function(){function a(a,b,c,d){var e=this;this.sectionMedia=a,this.$injector=b,this.CcDialogBuilder=c,this.clientTopology=d,this.services={},setTimeout(function(){return angular.module("siteGeneratorStaticsConsumerAppInternal")._invokeQueue.filter(function(a){return"service"===a[1]}).forEach(function(a){return e.services[a[2][0]]=e.$injector.get(a[2][0])})}),setTimeout(function(){return angular.module("siteGeneratorIntroInternal")._invokeQueue.filter(function(a){return"service"===a[1]}).forEach(function(a){return e.services[a[2][0]]=e.$injector.get(a[2][0])})})}return a.$inject=["sectionMedia","$injector","CcDialogBuilder","clientTopology"],a}();angular.module("siteGeneratorStaticsConsumerDebug").service("consumerDebug",ConsumerDebug).run(["consumerDebug","$window",function(a,b){b.consumerDebug=a}]);var InitBI=function(){function a(a,b,c){var d=this;this.flags=a,this.obMonitoring=b,this.consumerBiLogger=c,this.isNewSite=!1,this.reportStart=function(a){_.set(a,"data.isNewSite",d.isNewSite),d.obMonitoring.mark(a)},this.reportEnd=function(a){_.set(a,"data.isNewSite",d.isNewSite),d.obMonitoring.measure(a)},this.flags.silentBI&&this.consumerBiLogger.pauseBI()}return a.$inject=["flags","obMonitoring","consumerBiLogger"],a.prototype.reportError=function(a,b){this.obMonitoring.error("init flow error: "+JSON.stringify(a),{isNewSite:b})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("initBI",InitBI);var InitSetup=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){this.consumerBiLogger=a,this.consumerDialogs=b,this.mediaFrame=c,this.jsApiManager=d,this.$location=e,this.$translate=f,this.layoutSolver=g,this.mobileSolutionManager=h,this.sectionManager=i,this.mobileSectionManager=j,this.setTpaContentService=k,this.flags=l,this.$window=m,this.initStopwatch=n,this.initBI=o,this.initDebugPerformance=p,this.spinnerService=q,this.preloaderService=r,this.fullStoryLoader=s}return a.$inject=["consumerBiLogger","consumerDialogs","mediaFrame","jsApiManager","$location","$translate","layoutSolver","mobileSolutionManager","sectionManager","mobileSectionManager","setTpaContentService","flags","$window","initStopwatch","initBI","initDebugPerformance","spinnerService","preloaderService","fullStoryLoader"],a.prototype.setup=function(a){a?this.initStopwatch.reset():this.initStopwatch.reset(this.$window.loadStartTime),this.flags.debugPerformance&&this.initDebugPerformance.start(),a||this.initFullStory(),this.$window.name="ADI",this.handleServerErrors(),this.mediaFrame.warmup({vision:["face"]}),this.layoutSolver.registerWithOnPageCalculatedCallback(this.sectionManager.onPageCalculated.bind(this.sectionManager)),this.mobileSolutionManager.registerWithOnPartCalculatedCallback(this.mobileSectionManager.onPartCalculated.bind(this.mobileSectionManager)),this.setTpaContentService.registerWithBiLooger(this.consumerBiLogger)},a.prototype.initFullStory=function(){var a=this,b={label:"site-generator-statics-consumer",spec:"specs.ob.FullStory",onReady:function(b){return a.consumerBiLogger.intro.fullStoryStarted(b)}};this.fullStoryLoader(b)},a.prototype.preventRestartOnHandledErrors=function(a){a&&(a.handledEvent=!0)},a.prototype.showFatalErrorDialog=function(a){this.$window.onbeforeunload=null,this.spinnerService.isFirstTime=!1,this.spinnerService.isFatalError=!0,this.spinnerService.disable(),this.preloaderService.stop(),this.consumerDialogs.showDialog(a)},a.prototype.redirectToDashboard=function(){this.$window.onbeforeunload=null,this.$window.location.replace(this.$translate.instant("url.dashboard"))},a.prototype.handleServerErrors=function(){var a=this;this.jsApiManager.onSessionExpired(function(b){a.preventRestartOnHandledErrors(b),a.showFatalErrorDialog(ConsumerDialogTypes.SESSION_EXPIRED_POPUP)}),this.jsApiManager.onConflictingChanges(function(b){a.preventRestartOnHandledErrors(b),a.showFatalErrorDialog(ConsumerDialogTypes.STORY_CONFLICTING_CHANGES_POPUP)}),this.jsApiManager.onSiteNotManagedByOB(function(b){a.preventRestartOnHandledErrors(b),a.redirectToDashboard()}),this.jsApiManager.onStoryArchived(function(b){a.preventRestartOnHandledErrors(b),a.redirectToDashboard()})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("initSetup",InitSetup);var InitSiteData=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){this.applicationParameters=a,this.introModelTree=b,this.storyServices=c,this.contentSource=d,this.contentManager=e,this.sectionManager=f,this.layoutSolver=g,this.undoRedo=h,this.introManager=i,this.$q=j,this.flags=k,this.introMediaUploader=l,this.$window=m,this.tpaService=n,this.$interval=o,this.silentPageBuilder=p,this.consumerBiLogger=q,this.$timeout=r,this.initTPA=s,this.initBI=t,this.isInInitNewSiteData=!1,this.isLoadedDefer=this.$q.defer()}return a.$inject=["applicationParameters","introModelTree","storyServices","contentSource","contentManager","sectionManager","layoutSolver","undoRedo","introManager","$q","flags","introMediaUploader","$window","tpaService","$interval","silentPageBuilder","consumerBiLogger","$timeout","initTPA","initBI"],a.prototype.loaded=function(){return this.isLoadedDefer.promise},a.prototype.updateIntroDataByUserValues=function(a){var b=this,c=_.map(_.filter(this.introManager.data.socialLinks,function(a){return a.constForWixWiz&&a.url}),function(a){return a.url}),d=_.find(a,function(a){return"contactDetails.website"===a});(_.any(c)||d)&&(this.introManager.data.urls=_.map(this.introManager.data.socialLinks,function(a){return a.url}),d&&this.introManager.data.urls.push(this.introManager.data.contactDetails.website),this.extendedUserDataPromise=Promise.any([this.introManager.getExtendedUserByPathsToNotUpdate(this.introManager.data)]).then(function(c){b.isInInitNewSiteData?(b.introManager.data.media=_.cloneDeep(c.dataModel.media),b.introMediaUploader.upload(b.storyName)):b.introManager.updateDataByModelAndUserValuesPaths(c.dataModel,a)}))},a.prototype.init=function(a,b){return a?this.initNewSiteData(b):this.isLoadedDefer.resolve(),this.isLoadedDefer.promise},a.prototype.waitBeforeContinue=function(){return this.flags.introWebsiteAddressField?Promise.any([this.extendedUserDataPromise,this.$timeout(2e3)]):this.$q.when()},a.prototype.initNewSiteData=function(a){var b=this;return this.initBI.reportStart({name:BIInitSteps.InitSiteData,init:!0}),this.waitBeforeContinue().then(function(){b.isInInitNewSiteData=!0,b.storyName=a,b.introMediaUploader.upload(a).then(function(){return b.generateInitialContent()}).then(function(){b.undoRedo.captureInitialState(),b.sendBIForRecommendedTPAs(),b.initTPA.updateTpasByIntroData(b.introManager.data)}).then(function(){return b.flags.noTour||b.$window.adiRunningOnServer?b.silentPageBuilder.constructAnyHomePage():b.$q.when()}).then(function(){return b.initialSave()}).then(function(){return b.render()}).then(function(){return b.fullSave()}).then(function(){b.initBI.reportEnd({name:BIInitSteps.InitSiteData,init:!0}),b.isLoadedDefer.resolve()}).catch(function(a){return b.isLoadedDefer.reject(a)})})},a.prototype.generateInitialContent=function(){var a=this;return this.initBI.reportStart({name:BIInitSteps.GenerateInitialContent,parent:BIInitSteps.InitSiteData,init:!0}),this.introModelTree.generateAll().then(function(){a.initBI.reportEnd({name:BIInitSteps.GenerateInitialContent,parent:BIInitSteps.InitSiteData,init:!0})})},a.prototype.initialSave=function(){var a=this;return this.initBI.reportStart({name:BIInitSteps.InitialSave,parent:BIInitSteps.InitSiteData,init:!0}),this.storyServices.story.save().then(function(){a.initBI.reportEnd({name:BIInitSteps.InitialSave,parent:BIInitSteps.InitSiteData,init:!0})})},a.prototype.fullSave=function(){var a=this;return this.initBI.reportStart({name:BIInitSteps.FullSave,parent:BIInitSteps.InitSiteData,init:!0}),this.storyServices.story.save().then(function(){a.initBI.reportEnd({name:BIInitSteps.FullSave,parent:BIInitSteps.InitSiteData,init:!0})})},a.prototype.render=function(){var a=this;return this.initBI.reportStart({name:BIInitSteps.LayoutSolverRender,parent:BIInitSteps.InitSiteData,init:!0}),this.layoutSolver.onNodeChanged().then(function(){return a.initBI.reportEnd({name:BIInitSteps.LayoutSolverRender,parent:BIInitSteps.InitSiteData,init:!0})})},a.prototype.sendBIForRecommendedTPAs=function(){this.contentManager.suggestedSections().suggestions.filter(this.isSectionRecommended).filter(this.isSectionTPA.bind(this)).map(this.sectionToTpaType.bind(this)).forEach(this.reportTPAType.bind(this))},a.prototype.isSectionRecommended=function(a){return a.isRecommendedForPage},a.prototype.isSectionTPA=function(a){var b=_.first(this.sectionManager.prepareDrafts(a));return a.ceType.indexOf("_Widget")>-1||b&&b.isTpaNode&&b.isTpaNode()},a.prototype.sectionToTpaType=function(a){return this.applicationParameters.tpaTypes[a.ceType.split("_")[0]||""]},a.prototype.reportTPAType=function(a){if(a){var b=a.type,c=a.appId;this.consumerBiLogger.sectionManagement.planToAddTpaInWelcomeTour("recommended",c,b)}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("initSiteData",InitSiteData);var InitContent=function(){function a(a,b,c,d,e){this.contentManager=a,this.introManager=b,this.flags=c,this.tpaService=d,this.initBI=e}return a.$inject=["contentManager","introManager","flags","tpaService","initBI"],a.prototype.fromStory=function(a){a.selectedOffers=a.selectedOffers||[],a.privateMediaFolderId=a.privateMediaFolderId||"",a.popupConfigurations=a.popupConfigurations||{},a.mobileEditorActive=void 0!==a.mobileEditorActive&&a.mobileEditorActive,this.flags.introWebsiteAddressField&&(a.websiteUrl=a.websiteUrl||""),a.tourState=a.tourState||{},a.nodeIdToSlideshowTransition=a.nodeIdToSlideshowTransition||{};var b={industryId:a.industryId,structureId:a.structureId};return this.fromContentId(b)},a.prototype.fromContentId=function(a){var b=this;return this.contentManager.initialize(a).then(function(){return b.setTpaTemplateIds()})},Object.defineProperty(a.prototype,"hasIntroData",{get:function(){var a=this.introManager.data;return a&&a.category&&null!==a.category.industryId&&null!==a.category.structureId},enumerable:!0,configurable:!0}),a.prototype.setTpaTemplateIds=function(){this.tpaService.setTpaTypeToTemplateIdMap(this.contentManager.getTpaMetaSiteIds())},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("initContent",InitContent);var InitTPA=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){this.$q=a,this.introContentTpa=b,this.applicationParameters=c,this.pagesManager=d,this.modelTree=e,this.storyServices=f,this.contentElementGenerator=g,this.applicationState=h,this.sectionManager=i,this.nodeManipulationService=j,this.previewService=k,this.tpaService=l,this.assistantUtils=m,this.consumerBiLogger=n,this.consumerBiLoggerHelpers=o,this.documentServicesMediator=p,this.initBI=q,this.notification=r,this.$translate=s}return a.$inject=["$q","introContentTpa","applicationParameters","pagesManager","modelTree","storyServices","contentElementGenerator","applicationState","sectionManager","nodeManipulationService","previewService","tpaService","assistantUtils","consumerBiLogger","consumerBiLoggerHelpers","documentServicesMediator","initBI","notification","$translate"],a.prototype.tpaTypesToAdd=function(){var a=this;return _.map(this.storyServices.story.selectedOffers,function(b){var c=a.applicationParameters.tpaTypes[b.type||""];if(c){b.checked&&a.reportTPAAddition(c);var d=c.type,e=b.checked||a.isStoreAutoProvision(d)||a.isBlogAutoProvision(d);return(a.isStoreAutoProvision(d)||a.isBlogAutoProvision(d))&&(b.autoProvisioned=!0),e&&a.shouldProvisionTPA(d)?d:null}}).filter(function(a){return a})},a.prototype.fromTypes=function(a,b){var c=this;return _.sequencePromises(a,function(a){var d=c.$translate.instant("builder.section-design.TPA_NAME."+a);return b(c.$translate.instant("builder.progress-bar.step-message.adding-application",{type:d})),c.previewService.waitForChanges().then(function(){return c.handleTpaNode(a)})})},a.prototype.updateTpasByIntroData=function(a){var b=this.storyServices.story.selectedOffers,c=a.category;this.introContentTpa.categoryType(c)===intro.CategoryTypes.SingleEvent&&this.updateEntry(b,this.createSingleEventData(a))},a.prototype.updateEntry=function(a,b){var c=_.findIndex(a,{type:b.type});c>=0?a[c]=b:a.push(b)},a.prototype.createSingleEventData=function(a){var b=this.applicationState.generateRandomOffset("Welcome"),c=this.contentElementGenerator.generate({ceType:"Welcome",cardinality:1},b),d=_.find(c.values,{subType:core.ElementSubTypes.Image}),e=_.find(d.value,{mediaType:"image"}),f=_.find(c.values,{subType:core.ElementSubTypes.Title});return{type:core.TpaWidgetTypes.Events_Single,checked:!0,data:{name:a.name,media:e?_.pick(e,"uri","width","height"):null,description:a.description||f.value,location:this.getLocation(a.userLocation),date:this.getDates(a.dates,a.timezone)}}},a.prototype.getDates=function(a,b){return a&&null!==a[0]?{start:a[0]?a[0].toISOString():null,end:a[1]?a[1].toISOString():null,timezone:b}:{message:"TIME TBD"}},a.prototype.getLocation=function(a){if("object"==typeof a){var b=a.geometry.location;return{name:a.name,address:a.formatted_address,lat:"function"==typeof b.lat?b.lat():b.lat,lng:"function"==typeof b.lng?b.lng():b.lng}}return"string"==typeof a&&a?{message:a}:{message:"LOCATION TBD"}},a.prototype.reportTPAAddition=function(b){var c=b.type,d="Blog"===c?a.BLOG_APP_ID:b.appId;this.consumerBiLogger.sectionManagement.planToAddTpaInWelcomeTour("intro",d,c)},a.prototype.shouldProvisionTPA=function(a){return a&&!this.tpaService.isTpaAdded(a)&&a!==this.applicationParameters.tpaTypes.GetSubscribers.type},a.prototype.handleTpaNode=function(a){var b=this,c=_.find(this.modelTree.getTpaNodes(),{contentElementType:a});this.initBI.reportStart({parent:BIInitSteps.ProvisionTPAs,name:a,init:!0});var d=Date.now();return this.sectionManager.addTpa(c,void 0,{}).then(function(e){if(b.initBI.reportEnd({parent:BIInitSteps.ProvisionTPAs,name:a,init:!0}),b.sectionManager.addTPAHeader(c,e,0),b.consumerBiLogger.pagesManager.addTpaPackageSuccess(b.consumerBiLoggerHelpers.extraPagesCount(),b.tpaService.getAppId(c),null,Date.now()-d,c.getId()),b.isBlogAutoProvision(a))return b.handleBlogTPA(e)})},a.prototype.handleBlogTPA=function(b){this.consumerBiLogger.sectionManagement.planToAddTpaInWelcomeTour("intro",a.BLOG_APP_ID,"blogHP");var c=this.modelTree.homePageId;this.storyServices.story.selectedPage=b.id;var d=this.pagesManager.getPageIdByName(b.id);this.documentServicesMediator.setHomePage(d),this.modelTree.homePageId=b.id;var e=this.$q.defer();return this.nodeManipulationService.deletePageById(c,"body",_.noop,function(){return e.resolve()}),e.promise},a.prototype.isBlogAutoProvision=function(a){return a===this.applicationParameters.tpaTypes.Blog.type&&this.assistantUtils.shouldAutoProvisionTPAOfType("Blog")},a.prototype.isStoreAutoProvision=function(a){return a===this.applicationParameters.tpaTypes.Stores.type&&this.assistantUtils.shouldAutoProvisionTPAOfType("Stores")},a}();InitTPA.BLOG_APP_ID="61f33d50-3002-4882-ae86-d319c1a249ab",angular.module("siteGeneratorStaticsConsumerAppInternal").service("initTPA",InitTPA);var InitNewStory=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){this.$q=a,this.Story=b,this.metaDataService=c,this.applicationState=d,this.modelTree=e,this.storyServices=f,this.wizardService=g,this.flags=h,this.siteNameApi=i,this.metaSiteApi=j,this.introManager=k,this.contentManager=l,this.$location=m,this.themeChooser=n,this.spinnerService=o,this.consumerBiLogger=p,this.consumerBiLoggerHelpers=q,this.initBI=r,this.initStopwatch=s,this.initContent=t,this.animationKit=u,this.backgroundScrollService=v,this.pagesManager=w}return a.$inject=["$q","Story","metaDataService","applicationState","modelTree","storyServices","wizardService","flags","siteNameApi","metaSiteApi","introManager","contentManager","$location","themeChooser","spinnerService","consumerBiLogger","consumerBiLoggerHelpers","initBI","initStopwatch","initContent","animationKit","backgroundScrollService","pagesManager"],a.prototype.createStoryInternal=function(a){var b=this;if(void 0===a&&(a=!1),this.setDefaultBIValues(),this.introManager.data=this.introManager.data?this.introManager.data:this.getFallbackIntroData(),!this.introManager.data.name)throw"no business name? no service! come back one year!";return this.getUniqueName().then(function(c){return b.saveNewStory(c,a)}).then(function(a){return b.handleStoryCreated(a)}).then(function(){return b.loadMetadataAndContent()}).then(function(){return b.setMainKit()}).then(function(){return b.initCore()}).then(function(){return b.initStoryData()}).then(function(){return b.setSiteProperties()}).then(function(){return b.setMobileEditorStatus()}).then(function(){return b.backgroundScrollService.setDefaultScrollType()}).then(function(){return b.pagesManager.setDefaultPagesTransition()}).then(function(){return b.newStoryName})},a.prototype.createStory=function(a){return a||(this.spinnerService.isFirstTime=!0),this.createStoryInternal(a)},a.prototype.getUniqueName=function(){var a=this;return this.initBI.reportStart({name:BICreateStorySteps.GetUniqueName,parent:BIInitSteps.InitStory,init:!0}),this.siteNameApi.getUniqueName(this.introManager.data.name).then(function(b){return a.initBI.reportEnd({name:BICreateStorySteps.GetUniqueName,parent:BIInitSteps.InitStory,init:!0}),b})},a.prototype.initCore=function(){var a=this;return this.initBI.reportStart({name:BICreateStorySteps.InitCoreA,parent:BIInitSteps.InitStory,init:!0}),this.wizardService.init(this.storyServices.story,void 0,!0).then(function(){return a.initBI.reportEnd({name:BICreateStorySteps.InitCoreA,parent:BIInitSteps.InitStory,init:!0})})},a.prototype.setDefaultBIValues=function(){this.initContent.hasIntroData&&(this.consumerBiLoggerHelpers.setDefaultValue("industryId",this.introManager.data.category.industryId),this.consumerBiLoggerHelpers.setDefaultValue("structureId",this.introManager.data.category.structureId))},a.prototype.setSiteProperties=function(){var a=this;if(this.flags.moreDataInSiteProperties)return this.$q.when();if(this.introManager.data){if(this.initBI.reportStart({name:BICreateStorySteps.SetSiteProperties,parent:BIInitSteps.InitStory,init:!0}),!this.flags.dontWaitForSetSiteProperties)return this.metaSiteApi.setSiteProperties(this.storyServices.metaSiteId,this.introManager.siteProperties).then(function(){a.initBI.reportEnd({name:BICreateStorySteps.SetSiteProperties,parent:BIInitSteps.InitStory,init:!0})}).catch(function(b){var c=b.stack?b.stack:b;a.consumerBiLogger.err(BIErrorCodes.InitSetPropertiesFailed,"failed to set site properties: "+c+" \n "+JSON.stringify(a.introManager.siteProperties))});this.metaSiteApi.setSiteProperties(this.storyServices.metaSiteId,this.introManager.siteProperties).then(function(){a.initBI.reportEnd({name:BICreateStorySteps.SetSiteProperties,parent:BIInitSteps.InitStory,init:!0})}).catch(function(b){var c=b.stack?b.stack:b;a.consumerBiLogger.err(BIErrorCodes.InitSetPropertiesFailed,"failed to set site properties: "+c+" \n "+JSON.stringify(a.introManager.siteProperties))})}},a.prototype.initStoryData=function(){var a=this.storyServices.story.getActiveLocale();a.savedSites.undefined.pagesMap={},a.savedSites.undefined.nodesRefMap={};var b=this.modelTree.getPagesNodes()[0];this.flags.staticTextsWithTranslate||(b.alias="Home")},a.prototype.saveNewStory=function(a,b){var c=this;return void 0===b&&(b=!1),this.initBI.reportStart({name:BICreateStorySteps.SaveNewStory,parent:BIInitSteps.InitStory,init:!0}),this.newStoryName=a,this.Story.create().save("website",b).then(function(a){return c.initBI.reportEnd({name:BICreateStorySteps.SaveNewStory,parent:BIInitSteps.InitStory,init:!0}),a})},a.prototype.handleStoryCreated=function(a){this.storyServices.calculateMaxPageAndNodeId(a),this.storyServices.story=a},a.prototype.setMainKit=function(){var a=this.contentManager.getKitIds();a&&a.length>0&&(this.initBI.reportStart({name:BICreateStorySteps.SetMainKit,parent:BIInitSteps.InitStory,init:!0}),this.themeChooser.serializeMainKitSelection(a[0]),this.initBI.reportEnd({name:BICreateStorySteps.SetMainKit,parent:BIInitSteps.InitStory,init:!0}))},a.prototype.setMobileEditorStatus=function(){this.storyServices.story.mobileEditorActive=this.flags.mobileEditor},a.prototype.loadMetadataAndContent=function(){return this.$q.all([this.getMetadata(),this.initContentFromStory()])},a.prototype.initContentFromStory=function(){var a=this;return this.initBI.reportStart({name:BICreateStorySteps.InitContent,parent:BIInitSteps.InitStory,init:!0}),this.initContent.fromStory(this.storyServices.story).then(function(){a.initBI.reportEnd({name:BICreateStorySteps.InitContent,parent:BIInitSteps.InitStory,init:!0})})},a.prototype.getMetadata=function(){var a=this;return this.initBI.reportStart({name:BICreateStorySteps.GetMetadata,parent:BIInitSteps.InitStory,init:!0}),this.metaDataService.getMetadata(this.storyServices.story.id,this.applicationState.setStoryMetadata.bind(this.applicationState)).then(function(){a.initBI.reportEnd({name:BICreateStorySteps.GetMetadata,parent:BIInitSteps.InitStory,init:!0})})},a.prototype.getFallbackIntroData=function(){var a=this.$location.search();return{name:_.has(a,"businessName")?a.businessName:"Missing Name Inc",category:{industryId:_.has(a,"industryId")?a.industryId:"e79e5765052b89b579c9a4c2",structureId:_.has(a,"structureId")?a.structureId:"40dc538a8a6c3e2dae342922"}}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("initNewStory",InitNewStory);var InitExistingStory=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){this.Story=a,this.metaDataService=b,this.applicationState=c,this.applicationParameters=d,this.modelTree=e,this.storyServices=f,this.pagesManager=g,this.tpaService=h,this.wizardService=i,this.flags=j,this.undoRedo=k,this.consumerBiLogger=l,this.consumerBiLoggerHelpers=m,this.initStopwatch=n,this.initContent=o,this.initBI=p}return a.$inject=["Story","metaDataService","applicationState","applicationParameters","modelTree","storyServices","pagesManager","tpaService","wizardService","flags","undoRedo","consumerBiLogger","consumerBiLoggerHelpers","initStopwatch","initContent","initBI"],a.prototype.fromId=function(a,b){var c=this;return this.setDefaultBIValues(a),this.loadStoryMetadata(a,b).then(function(){return c.loadStory(a)}).then(function(a){return c.initWizardService(a,b)}).then(function(){c.backwardCompatibility(),c.undoRedo.captureInitialState(),c.handleDeepLink()})},a.prototype.setDefaultBIValues=function(a){var b=a.split(/:/);this.consumerBiLoggerHelpers.setDefaultValue("instanceId",b[0]),this.consumerBiLoggerHelpers.setDefaultValue("metaSiteId",b[1]),this.consumerBiLoggerHelpers.setDefaultValue("industryId",null),this.consumerBiLoggerHelpers.setDefaultValue("structureId",null)},a.prototype.loadStoryMetadata=function(a,b){var c=this;return this.initBI.reportStart({name:BILoadStorySteps.GetMetadata,parent:BIInitSteps.InitStory,init:!0}),this.metaDataService.getMetadata(a,function(a){return c.applicationState.setStoryMetadata(a)}).then(function(){return c.initBI.reportEnd({name:BILoadStorySteps.GetMetadata,parent:BIInitSteps.InitStory,init:!0})})},a.prototype.loadStory=function(a){var b=this;return this.initBI.reportStart({name:BILoadStorySteps.FetchStory,parent:BIInitSteps.InitStory,init:!0}),this.Story.find(a).then(function(a){return b.initBI.reportEnd({name:BILoadStorySteps.FetchStory,parent:BIInitSteps.InitStory,init:!0}),b.storyServices.calculateMaxPageAndNodeId(a),a})},a.prototype.initWizardService=function(a,b){var c=this;return this.initBI.reportStart({name:BILoadStorySteps.InitCoreA,parent:BIInitSteps.InitStory,init:!0}),this.wizardService.init(a).then(function(){return c.initBI.reportEnd({name:BILoadStorySteps.InitCoreA,parent:BIInitSteps.InitStory,init:!0})})},a.prototype.backwardCompatibility=function(){this.initBI.reportStart({name:BILoadStorySteps.BackwardCompatibility,parent:BIInitSteps.InitStory,init:!0});var a=this.modelTree.getPagesNodes();_.find(a,{alias:void 0})&&_.each(a,function(a){a.alias=_.get(a,["contentElement","values","pageTitleSEO","value"])}),this.patchIndustryIds(),this.initBI.reportEnd({name:BILoadStorySteps.BackwardCompatibility,parent:BIInitSteps.InitStory,init:!0})},a.prototype.patchIndustryIds=function(){var a=this,b=[{oldId:"b0a520919b99728bae200018",newId:"c4e29ccec1b3103f4caa52f0"},{oldId:"3a6327d9c3946eefcfe6d513",newId:"a16519bdf44907db3cd5a989"},{oldId:"f19b3125657d6a267d2c47d8",newId:"88b56978690cff09a18247c1"},{oldId:"190a5ffad4f67ad6e22ad08d",newId:"f540e5a65f637e7cd869f5b9"}],c=_.find(b,function(b){return b.oldId===a.storyServices.story.industryId});c&&(this.storyServices.story.industryId=c.newId)},a.prototype.handleDeepLink=function(){if(this.flags.deepLink&&this.tpaService){this.initBI.reportStart({name:BILoadStorySteps.DeepLink,parent:BIInitSteps.InitStory,init:!0});var a=this.applicationParameters.tpaTypes[this.flags.deepLink];if(a&&this.tpaService.isTpaAdded(a.type)){var b=this.pagesManager.getPageNodeIdBySantaPageId(this.tpaService.getPageIdByTpaType(a.type));b&&(this.storyServices.story.selectedPage=b,this.pagesManager.goToPage(b))}this.initBI.reportEnd({name:BILoadStorySteps.DeepLink,parent:BIInitSteps.InitStory,init:!0})}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("initExistingStory",InitExistingStory);var InitService=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V){var W=this;this.consumerMenu=a,this.metaDataService=b,this.applicationState=c,this.storyServices=d,this.$stateParams=e,this.$state=f,this.wizardService=g,this.flags=h,this.undoRedo=i,this.$q=j,this.$http=k,this.$location=l,this.tpaPostMessageService=m,this.platformEditorApi=n,this.consumerBiLogger=o,this.consumerBiLoggerHelpers=p,this.saleService=q,this.initContent=r,this.initBI=s,this.initSetup=t,this.initSiteData=u,
this.initNewStory=v,this.initExistingStory=w,this.initDebugPerformance=x,this.introManager=y,this.introContentTpa=z,this.BackendStory=A,this.assistantManager=B,this.assistantUtils=C,this.assistantTaskFetcher=D,this.$log=E,this.$timeout=F,this.$translate=G,this.notification=H,this.sectionManager=I,this.documentServicesMediator=J,this.$window=K,this.spinnerService=L,this.preloaderService=M,this.healthCheck=O,this.mergedHeaderValidator=P,this.$injector=Q,this.metaSiteApi=R,this.wizWebsite=S,this.renderedModelApi=T,this.modelSiteChanges=U,this.corePublic=V,this.spinnerWasDisabled=!1,this.onIntroStepChanged=function(a,b,c,d){if("next"===c)if("before"===d)switch(a.name){case intro.INTRO_STATES.INTRO_EDIT_USER:W.flags.introWebsiteAddressField&&W.initSiteData.updateIntroDataByUserValues(a.userValues)}else if("after"===d)switch(a.name){case intro.INTRO_STATES.INTRO_CATEGORY_SEARCH:W.initContent.fromContentId(a.category);break;case intro.INTRO_STATES.INTRO_BUSINESS_NAME:var e=W.introManager.getStoryId();W.executeWithoutSpinner(function(){return W.setIsNewSite(!0),W.getStory(e,!0).then(function(){W.introManager.data.serviceOffer&&(W.storyServices.story.selectedOffers=W.introManager.data.serviceOffer)})})}},this.stopListenToIntro=N.listenStepChange(this.onIntroStepChanged),this.loadedDeferred=j.defer(),this.loadedPromise=this.loadedDeferred.promise}return a.$inject=["consumerMenu","metaDataService","applicationState","storyServices","$stateParams","$state","wizardService","flags","undoRedo","$q","$http","$location","tpaPostMessageService","platformEditorApi","consumerBiLogger","consumerBiLoggerHelpers","saleService","initContent","initBI","initSetup","initSiteData","initNewStory","initExistingStory","initDebugPerformance","introManager","introContentTpa","BackendStory","assistantManager","assistantUtils","assistantTaskFetcher","$log","$timeout","$translate","notification","sectionManager","documentServicesMediator","$window","spinnerService","preloaderService","introEventsEmitter","healthCheck","mergedHeaderValidator","$injector","metaSiteApi","wizWebsite","renderedModelApi","modelSiteChanges","corePublic"],a.prototype.loaded=function(){return this.loadedPromise},a.prototype.initByHeadless=function(a){var b=this;return this.introManager.data=this.introManager.data||{},_.assign(this.introManager.data,a),this.storyServices.story.selectedOffers=this.introManager.data.serviceOffer,this.initContent.fromContentId(a.category).then(function(){return b.init(!0)})},a.prototype.headlessWarmUpInit=function(){var a=this.$stateParams.storyId;return this.setIsNewSite(!0),this.getStory(a,!0)},a.prototype.init=function(a){var b=this;if(void 0===a&&(a=!1),this.initPromise)return this.initPromise;this.spinnerWasDisabled&&this.spinnerService.enable();var c=this.$stateParams.storyId;return this.flags.headlessApi?this.getStory(c,!1).then(function(){if(b.storyServices.story.isDraft&&!a)return b.headlessWarmUpInit();var d=b.$q.when();return b.storyServices.story.isDraft&&(d=d.then(function(){return b.storyServices.story.headlessFirstSave()})),d.then(function(){return b.initInternal(!b.storyServices.story.isDraft&&c)})}):this.initInternal(c)},a.prototype.initInternal=function(a){var b=this,c=this.flags.silentMode;return this.preInit(a),this.initPromise=this.getStory(a,!1).then(function(){return b.ensureStoryIdParam()}).then(function(){return b.maybeStartAssistant()}).then(function(){return b.initCoreWaitForChanges()}).then(function(){return b.wizWebsite.isConvertingSite()&&b.wizWebsite.waitForSiteConverter()}).catch(function(a){return b.$log.error("stopping to wait for site converter",a)}).then(function(){return b.initSupportMode()}).then(function(){return b.flags.wixEvents&&b.fastGetMetadataForLoadedStory(a)}).then(function(){return b.initSiteData.init(b.isNewSite,b.newStoryName)}).then(function(){return b.markStoryAsCreated()}).then(function(){return b.setSiteProperties()}).then(function(){return b.initDSRelated()}).then(function(){return b.asyncLoadCampaign()}).then(function(){return b.listenToRenderChanges()}).then(function(){return b.applicationState.init()}).then(function(){return!b.flags.wixEvents&&b.fastGetMetadataForLoadedStory(a)}).then(function(){return b.sendSiteSourcesToWixWiz()}).then(function(){return a&&b.sectionManager.recalculatePagesWithRemovedNodes()}).then(function(){return b.consumerMenu.calcMenuAnchors()}).then(function(){return b.handleLoadingDone("success")}).then(function(){return b.healthCheck.validateAndSave()}).then(function(){if(b.flags.smartAssist){b.$injector.get("smartAssistState").init()}}).then(function(){return b.adiOnServer(null)},function(a){return b.adiOnServer(a)}).catch(function(a){return b.$log.error(a.stack),b.handleLoadingError(a),b.handleLoadingDone("failure"),b.$q.reject("init failed")}).then(function(){b.initBI.reportEnd({name:"init"}),b.flags.silentMode=c,b.stopPreloader(),b.loadedDeferred.resolve(),b.isNewSite||b.assistantManager.openMenu(BIOrigins.OnSiteStart),b.flags.mergedHeader&&b.mergedHeaderValidator.init()}),this.initPromise},a.prototype.isBuilderValidState=function(){var a=this.$location.search();return this.$stateParams.storyId||this.initContent.hasIntroData||_.has(a,"industryId")&&_.has(a,"structureId")},a.prototype.setIsNewSite=function(a){this.isNewSite=a,this.initBI.isNewSite=this.isNewSite,this.consumerBiLoggerHelpers.setDefaultValue("isNewSite",this.isNewSite?"true":"false")},a.prototype.setSiteProperties=function(){var a=this;if(!this.flags.moreDataInSiteProperties)return this.$q.when();if(this.introManager.data){if(this.initBI.reportStart({name:BICreateStorySteps.SetSiteProperties,parent:BIInitSteps.InitStory,init:!0}),!this.flags.dontWaitForSetSiteProperties)return this.metaSiteApi.setSiteProperties(this.storyServices.metaSiteId,this.introManager.siteProperties).then(function(){a.initBI.reportEnd({name:BICreateStorySteps.SetSiteProperties,parent:BIInitSteps.InitStory,init:!0})}).catch(function(b){var c=b.stack?b.stack:b;a.consumerBiLogger.err(BIErrorCodes.InitSetPropertiesFailed,"failed to set site properties: "+c+" \n "+JSON.stringify(a.introManager.siteProperties))});this.metaSiteApi.setSiteProperties(this.storyServices.metaSiteId,this.introManager.siteProperties).then(function(){a.initBI.reportEnd({name:BICreateStorySteps.SetSiteProperties,parent:BIInitSteps.InitStory,init:!0})}).catch(function(b){var c=b.stack?b.stack:b;a.consumerBiLogger.err(BIErrorCodes.InitSetPropertiesFailed,"failed to set site properties: "+c+" \n "+JSON.stringify(a.introManager.siteProperties))})}},a.prototype.preInitReportEnd=function(){var a=Math.round(MonitoringSteps.getTimestamp()-this.$window.loadStartTime);this.consumerBiLogger.builder.loadingPhaseInInitComplete(a,"pre init","")},a.prototype.preInit=function(a){this.setIsNewSite(!a),this.isNewSite&&this.consumerBiLogger.builder.firstTimeStart("intro"),this.initSetup.setup(this.isNewSite),this.isNewSite||this.preInitReportEnd(),this.initBI.reportStart({name:"init"}),this.searchUrls=this.introManager.data&&this.introManager.data.searchUrls,this.isNewSite||this.startPreloader()},a.prototype.startPreloader=function(){this.flags.newPreloader&&(this.preloaderService.start(),this.spinnerService.disable())},a.prototype.stopPreloader=function(){this.flags.newPreloader&&(this.spinnerService.enable(),this.preloaderService.stop())},a.prototype.maybeStartAssistant=function(){if(this.flags.emptyPage)return this.assistantManager.setDockStatus(builders.AssistantDockStatus.Stopped),$("builder").addClass("-without-overlay"),void this.assistantManager.openMenu(BIOrigins.OnSiteStart);this.flags.silentMode=!0,this.initAssistant()},a.prototype.initCoreWaitForChanges=function(){var a=this;return this.initBI.reportStart({name:BIInitSteps.InitCoreB,init:!0}),this.wizardService.initAfterWaitForChanges(this.storyServices.story,this.isNewSite).then(function(){return a.initBI.reportEnd({name:BIInitSteps.InitCoreB,init:!0})})},a.prototype.markStoryAsCreated=function(){var a=this;if(this.storyServices.story.isDraft)return this.initBI.reportStart({name:BIInitSteps.MarkCreated,init:!0}),this.storyServices.story.markCreated().then(function(){a.storyServices.story.isDraft=!1,a.initBI.reportEnd({name:BIInitSteps.MarkCreated,init:!0})})},a.prototype.initDSRelated=function(){var a=this.documentServicesMediator.getDocumentServices();this.platformEditorApi.initPlatform(a),this.tpaPostMessageService.init(a)},a.prototype.asyncLoadCampaign=function(){this.saleService.loadCampaign()},a.prototype.listenToRenderChanges=function(){var a=this;return this.initBI.reportStart({name:BIInitSteps.ListenToSiteChanges,init:!0}),this.wizardService.listenToRenderChanges().then(function(){return a.initBI.reportEnd({name:BIInitSteps.ListenToSiteChanges,init:!0})})},a.prototype.initSupportMode=function(){this.applicationState.isSupportStaffEditing(!0)&&this.undoRedo.setSupportMode()},a.prototype.fastGetMetadataForLoadedStory=function(a){var b=this;a&&this.metaDataService.getMetadata(a,this.applicationState.setStoryMetadata.bind(this.applicationState)).then(function(){return b.initBI.reportStart({name:BIInitSteps.InitContent,init:!0}),b.initContent.fromStory(b.storyServices.story)}).then(function(){b.initBI.reportEnd({name:BIInitSteps.InitContent,init:!0})})},a.prototype.getStory=function(a,b){var c=this;return this.storyPromise?this.storyPromise:(this.initBI.reportStart({name:BIInitSteps.InitStory,init:!0}),this.storyPromise=a?this.initExistingStory.fromId(a,b):this.initNewStory.createStory(b).then(function(a){c.newStoryName=a;var b=c.storyServices.story.id;c.introManager.setStoryId(b)}),this.storyPromise=this.storyPromise.then(function(){return c.initBI.reportEnd({name:BIInitSteps.InitStory,init:!0})}),this.storyPromise)},a.prototype.ensureStoryIdParam=function(){!this.$stateParams.storyId&&this.storyServices.story.id&&this.$state.go(config.STATES.BUILDER_STORY,{storyId:this.storyServices.story.id})},a.prototype.adiOnServer=function(a){if(this.$window.adiRunningOnServer&&this.$window.adiRunningOnServer.initialized(a),a)throw a},a.prototype.handleLoadingDone=function(a){this.reportLoadingComplete(String("success"===a)),this.documentServicesMediator.useAnimationFrameToDeferQueue()},a.prototype.reportLoadingComplete=function(a){var b=this.$window.measureTimeInTab;this.isNewSite?this.consumerBiLogger.builder.firstTimeComplete(a,b.end()):this.consumerBiLogger.builder.existingSiteComplete(a,b.end()),this.flags.performanceTest&&this.consumerBiLogger.automation.loadTestCompleted(this.flags.performanceTest),this.flags.debugPerformance&&this.initDebugPerformance.end()},a.prototype.handleLoadingError=function(a){a.handledEvent||(this.consumerBiLogger.builder.loadingError(a&&a.stack?a.stack:JSON.stringify(a)),this.initBI.reportError(a,this.isNewSite),this.showError(a),this.redirectOnError())},a.prototype.showError=function(a){if(!this.applicationState.isSilent()){var b=a&&403===a.status?"init.error.access":"init.error.load",c=this.$translate.instant(b),d=this.$translate.instant("init.error.redirecting",{error:c});this.notification.show(d)}},a.prototype.redirectOnError=function(){var a=this;this.$timeout(function(){location&&(a.introManager.reset(),window.onbeforeunload=null,location.href=""+location.origin+location.pathname+"?referral=invalid_story&vertical=invalid_story#!/intro")},3e3)},a.prototype.sendSiteSourcesToWixWiz=function(){if(this.isNewSite){var a=this.BackendStory.parseId(this.storyServices.story.id),b=a.instanceId,c=a.metaSiteId,d={siteid:b,metasiteid:c,urls:this.searchUrls},e=/^https:\/\/maps\.googleapis\.com\/maps\/api\/place\/details\/json/;if(d.urls){if(d.urls.some(function(a){return e.test(a)}))return this.$http.post("/_api/any2wix-server/savesitesources",d)}}},a.prototype.isPreviewMode=function(){return this.applicationState.isPreviewDisplay()},a.prototype.initAssistant=function(){if(this.isNewSite){this.assistantManager.setDockStatus(builders.AssistantDockStatus.Stopped),this.assistantUtils.convertLocalStorageToursToTasks();var a=this.assistantTaskFetcher.getTask("welcomeTask");return this.$timeout(function(){$("builder").addClass("-without-overlay")},2e3),this.assistantManager.startTask(a)}this.assistantTaskFetcher.applySavedTasks(this.assistantUtils.getTaskDataFromStorage()),this.isPreviewMode()?this.assistantManager.setDockStatus(builders.AssistantDockStatus.Hidden):this.assistantManager.setDockStatus(builders.AssistantDockStatus.Stopped),$("builder").addClass("-without-overlay")},a.prototype.executeWithoutSpinner=function(a){var b=this;return this.spinnerService.disable(),this.spinnerWasDisabled=!0,this.$q.resolve().then(function(){return a()}).then(function(a){return b.spinnerService.enable(),b.spinnerWasDisabled=!1,a})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("initService",InitService);var InitDebugPerformance=function(){function a(a){this.$window=a,this.$window.ADIPerformance=null}return a.$inject=["$window"],a.prototype.start=function(){this.$window.ADIPerformance={start:Date.now(),end:0,total:0},this.sendMessage("init-perf-start")},a.prototype.end=function(){if(!this.$window.ADIPerformance)throw"start was never called";this.$window.ADIPerformance.end=Date.now(),this.$window.ADIPerformance.total=this.$window.ADIPerformance.end-this.$window.ADIPerformance.start,this.sendMessage("init-perf-end")},a.prototype.report=function(){console.log("=== ADI performance report ==="),console.log("start: "+this.$window.ADIPerformance.start),console.log("end: "+this.$window.ADIPerformance.end),console.log("time: "+this.$window.ADIPerformance.total+"ms")},a.prototype.sendMessage=function(a){this.$window.postMessage({name:a,data:this.$window.ADIPerformance},"*")},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("initDebugPerformance",InitDebugPerformance);var SilentPageBuilder=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){this.flags=a,this.$q=b,this.$translate=c,this.previewService=d,this.menuService=e,this.pagesManager=f,this.modelTree=g,this.spinnerService=h,this.consumerMenu=i,this.layoutSolver=j,this.applicationState=k,this.storyServices=l,this.undoRedo=m,this.assistantUtils=n,this.contentSource=o,this.contentManager=p,this.wizContentManager=q,this.wizWebsite=r,this.tpaService=s,this.consumerBiLogger=t,this.applicationParameters=u,this.sectionManager=v,this.initTPA=w,this.wizardService=x,this.notification=y,this.initBI=z,this.siteBuilderPages=A}return a.$inject=["flags","$q","$translate","previewService","menuService","pagesManager","modelTree","spinnerService","consumerMenu","layoutSolver","applicationState","storyServices","undoRedo","assistantUtils","contentSource","contentManager","wizContentManager","wizWebsite","tpaService","consumerBiLogger","applicationParameters","sectionManager","initTPA","wizardService","notification","initBI","siteBuilderPages"],a.prototype.constructAnyPage=function(a){var b=this;if(!this.flags.addAllPageMode||!a)return this.$q.when();var c=this.modelTree.getPageNodeById(a);return this.spinnerService.setWithAnimation(!1),this.spinnerService.waitForMe("silentWholePage"),this.previewService.waitForChanges().then(function(){return b.sectionManager.makeSectionsInGeneralPage(c,b.wizWebsite.isConvertingSite())}).then(function(){return b.consumerMenu.calcMenuAnchors()}).then(function(){return b.layoutSolver.onNodeChanged()}).then(function(){return b.undoRedo.captureOperation()}).then(function(){return b.spinnerService.imDone("silentWholePage")})},a.prototype.getAdditionalPages=function(a){if(this.wizWebsite.isConvertingSite())return[this.wizWebsite.createContactPage()];var b=this.storyServices.story.selectedOffers.find(function(a){return"Bookings"===a.type}),c=b&&b.checked,d=!!a.find(function(a){return"Service"===a.ceType&&"none"!==a.rawSectionBrief.syncWithBooking}),e=function(a){return c&&d&&"Service"===a.ceType};if(this.flags.fullSiteBuilder){var f=this.sectionManager.utilCreateSelectedOffersMap();return this.contentManager.suggestedPages(f[this.applicationParameters.tpaTypes.Stores.type],!1).pageSuggestions.filter(function(a){return a.isRecommendedPage&&!e(a)})}return[]},a.prototype.constructAnyHomePage=function(){var a=this;if(this.flags.emptyPage)return this.$q.when();this.applicationState.setPrettyPageMode(ePrettyPageRulesMode.ruleOnNoCaching),this.spinnerService.setWithAnimation(!1);var b;return this.previewService.waitForChanges().then(function(){a.spinnerService.waitForMe("silentHomePage");var c=function(b){return a.notification.showNextStep(b)},d=a.initTPA.tpaTypesToAdd(),e=a.applicationParameters.tpaTypes.Blog.type;b=_(d).contains(e)&&a.assistantUtils.shouldAutoProvisionTPAOfType(e);var f=a.sectionManager.getHomePageSections(b),g=a.flags.fullSiteBuilder?a.getAdditionalPages(f):a.sectionManager.getAdditionalPages(),h=a.contentManager.isSocialImageEnabled(),i=a.wizWebsite.isConvertingSite()?a.wizWebsite.siteConverterProgressSteps.length+1:2+d.length+f.length+g.length+(h?1:0);return a.notification.initSpinnerSteps(i),c(""),a.initTPA.fromTypes(d,c).then(function(){var b=a.modelTree.getPageNodeById(a.storyServices.story.selectedPage),d=a.fixMenuItemsForBlog(b);return a.sectionManager.buildSite(b,d,f,g,c)})}).then(function(){return a.flags.fullSiteBuilder&&a.siteBuilderPages.sortMenuItems(b)}).then(function(){return!a.flags.fullSiteBuilder&&a.consumerMenu.calcMenuAnchors()}).then(function(){return a.layoutSolver.onNodeChanged()}).then(function(){return a.fullSave(),a.reportTPAsForProvisioning()}).then(function(){return a.undoRedo.captureOperation()}).then(function(){a.notification.hide(),a.spinnerService.imDone("silentHomePage"),a.applicationState.setPrettyPageMode(ePrettyPageRulesMode.rulesOff)})},a.prototype.fixMenuItemsForBlog=function(a){if(this.assistantUtils.shouldAutoProvisionTPAOfType("Blog")){if(this.flags.staticTextsWithTranslate?this.pagesManager.renamePage(a.id,this.$translate.instant("modelTree.homepage")):this.pagesManager.renamePage(a.id,"Home"),this.menuService.menuItems.length>1){var b=this.menuService.menuItems.splice(this.menuService.menuItems.length-1,1)[0];this.menuService.menuItems.splice(0,0,b),this.menuService.refresh()}return _.find(a.children,{contentElementType:"Blog"})}return null},a.prototype.fullSave=function(){return this.tpaService.isTpaAdded(this.applicationParameters.tpaTypes.Blog.type)||this.tpaService.isTpaAdded(this.applicationParameters.tpaTypes.Bookings.type)||this.tpaService.isTpaAdded(this.applicationParameters.tpaTypes.Stores.type)?this.wizardService.publishStory(void 0,void 0,!0):this.storyServices.story.save()},a.prototype.reportTPAsForProvisioning=function(){var a=this;return this.previewService.waitForChanges().then(function(){var b={};a.modelTree.traverse(function(c){if(c.isTpaNode()){var d=a.tpaService.getNaiveType(c.contentElementType),e=a.tpaService.getAppIdByType(d),f=a.tpaService.getInstanceId(c);if(!e||!f)return;b[e+f]||(a.provisionBI(e,f),b[e+f]=!0)}})})},a.prototype.provisionBI=function(a,b){this.consumerBiLogger.provisioning.tpaIntent(b,a,"AUTO_ADD_APP","ADI"),a===this.applicationParameters.tpaTypes.Bookings.appId&&this.flags.shouldReportAppEngagement&&this.consumerBiLogger.provisioning.tpaAppEngagement(b,a,"FREE")},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("silentPageBuilder",SilentPageBuilder);var intro;!function(a){a.preSuggestionsByVertical={business:["consulting-firm","non-profit-organization","coaching-professional","cleaning-service","marketing-agency"],Stores:["online-clothing-store","online-jewelry-store","online-home-goods-store","online-health-food-store","online-hair-extensions-store"],"portfolio-cv":["portfolio","artist","actor","resume","cv"],photography:["event-photographer","photography-portfolio","fashion-photography-studio","photographer","photography-studio"],music:["dj","recording-studio","musician","rock-band","hip-hop-artist"],"health-wellness":["make-up-artist","massage-therapist","salon","skin-care-clinic","nutritionist"],Blog:["fashion-blog","news-blog","blogger","health-blog","business-blog"],other:["non-profit-organization","school","charity","author","blogger"],design:["graphic-designer","artist","portfolio","architecture-firm","design-studio"],singleEvent:["wedding","conference","birthday-party","meetup","marathon"]},a.preSuggestionsByVerticalByFlag={},a.DEFAULT_PRE_SUGGESTIONS=["travel-agency","elementary-school","real-estate-agency","online-sporting-goods-store","make-up-artist"],a.DEFAULT_CATEGORY={industryId:"9e0d43c23f82998a6ac269b5",structureId:"e51e11f3597e0c565deb792f",term:"Local Business",key:"local-business"},a.GENERAL_CATEGORIES={General:[a.DEFAULT_CATEGORY,{industryId:"087d714d5f85b09c65b51e28",structureId:"073bd83d054dcff87fa0ef50",term:"Online Store",key:"online-store"},{industryId:"e79e5765052b89b579c9a4c2",structureId:"40dc538a8a6c3e2dae342922",term:"Other",key:"other"}],Blog:[{term:"General Blog",key:"general-blog",industryId:"904e7e089b4bda2f8f8846e6",structureId:"b0a520919b99728bae200018"}],"portfolio-cv":[{term:"Portfolio & CV",key:"portfolio-and-cv",industryId:"c4e29ccec1b3103f4caa52f0",structureId:"3a6327d9c3946eefcfe6d513"}],design:[{term:"Design Business",key:"design-business",industryId:"a16519bdf44907db3cd5a989",structureId:"f19b3125657d6a267d2c47d8"}],music:[{term:"Music Business",key:"music-business",industryId:"88b56978690cff09a18247c1",structureId:"df2149e0b7ea38029c3b9640"}],photography:[{term:"Photographer",key:"photographer",industryId:"f540e5a65f637e7cd869f5b9",structureId:"be6f1d8dc988d56f886ed440"}],"health-wellness":[{term:"Beauty Business",key:"beauty-business",industryId:"2425027cb83cba8b1ce84a4f",structureId:"190a5ffad4f67ad6e22ad08d"}]},a.generalCategoriesByFlag={},angular.module("siteGeneratorIntroInternal").run(["flags","$translate",function(b,c){for(var d in a.GENERAL_CATEGORIES)a.GENERAL_CATEGORIES.hasOwnProperty(d)&&a.GENERAL_CATEGORIES[d].forEach(function(a){b.staticTextsWithTranslate&&(a.term=c.instant("intro.general-categories.general."+a.key)),delete a.key})}]).constant("introAnimationData",function(){return b={},b[a.INTRO_STATES.INTRO_CATEGORY_SEARCH]={contentHeight:325},b[a.INTRO_STATES.INTRO_BLOCKED_CATEGORY]={contentHeight:274},b[a.INTRO_STATES.INTRO_SERVICES_OFFER]={contentHeight:295},b[a.INTRO_STATES.INTRO_IMPORT_SITE_CONTENT]={contentHeight:168},b[a.INTRO_STATES.INTRO_BUSINESS_NAME]={contentHeight:90},b[a.INTRO_STATES.INTRO_BUSINESS_LOCATION]={contentHeight:260},b[a.INTRO_STATES.INTRO_BUSINESS_DATES]={contentHeight:260},b[a.INTRO_STATES.INTRO_SEARCH_CONFIRM]={contentHeight:180},b[a.INTRO_STATES.INTRO_IMPORT_SITE_CONFIRM]={contentHeight:180},b;var b}());!function(a){a[a.Sunday=0]="Sunday",a[a.Monday=1]="Monday",a[a.Tuesday=2]="Tuesday",a[a.Wednesday=3]="Wednesday",a[a.Thursday=4]="Thursday",a[a.Friday=5]="Friday",a[a.Saturday=6]="Saturday",a[a.SundayLastDayOfWeek=7]="SundayLastDayOfWeek"}(a.WeekDay||(a.WeekDay={}))}(intro||(intro={}));var intro;!function(a){var b=function(){function b(a,b){this.socialLinkManager=a,this.flags=b}return b.$inject=["socialLinkManager","flags"],b.prototype.parseExtendedData=function(a){return a?{name:_.get(a.general_info,"site_title.value"),generalInfo:this.parseGeneralInfo(a.general_info),contactDetails:this.parseContactDetails(a.contact_details),socialLinks:this.parseSocialLinks(a),reviews:this.parseReviews(a.reviews),media:{logos:this.parseLogos(_.get(a,"general_info.logos")),cover:{description:"",url:_.get(a,"general_info.cover_photo.value")},photos:this.parsePhotos(a)}}:{}},b.prototype.parseLogos=function(a){return a?a.map(function(a){return{description:"",url:a.value}}):[]},b.prototype.parseContactDetails=function(a){return a?{email:_.get(a,"email.value"),phone:_.get(a,"phone.value"),fax:_.get(a,"fax.value"),website:_.get(a,"website.value"),address:this.parseBusinessAddress(a.address),openingHours:this.parseOpeningHours(a.open_hours_new)}:{}},b.prototype.parseGeneralInfo=function(a){return{shortDescription:_.get(a,"short_description.value"),longDescription:_.get(a,"long_description.value"),missionStatement:_.get(a,"mission.value"),products:_.get(a,"products.value"),generalInfo:_.get(a,"general_info.value"),companyOverview:_.get(a,"company_overview.value"),bio:_.get(a,"bio.value"),publicTransport:_.get(a,"public_transport.value"),dateFounded:this.parseStartInfo(_.get(a,"start_info")),categories:this.parseCategories(_.get(a,"category"),_.get(a,"sub_category")),parking:this.parseParking(_.get(a,"parking"))}},b.prototype.parseStartInfo=function(a){if(!a||!a.value)return null;var b=a.value.date;return b?b.year&&b.month&&b.day?new Date(b.year,b.month-1,b.day):b.year&&b.month?new Date(b.year,b.month-1):b.year?new Date(b.year):null:null},b.prototype.filterCategories=function(a){var b=["community","local business","company","automotive","commercial & industrial","shopping/retail","point of interest","points of interest","food","establishment","social"];return _.uniq(_.filter(a,function(a){return!_.contains(b,a.toLowerCase())}))},b.prototype.extractCategories=function(a){return a&&a.value?a.source&&a.source.toLowerCase().startsWith("yelp")?[]:a.value.split(",").map(function(a){return a.trim()}):[]},b.prototype.parseParking=function(a){return a&&a.value?{lot:a.value.lot>0,street:a.value.street>0,valet:a.value.valet>0}:null},b.prototype.parseCategories=function(a,b){var c=this.extractCategories(a),d=b&&b.value?_.map(b.value,function(a){return _.get(a,"name")}):[];return c=_.map(c.concat(d),this.normalizeCategory),_.take(this.filterCategories(c),3)},b.prototype.normalizeCategory=function(a){return _.capitalize(a.replace(/_/g," "))},b.prototype.parseReviews=function(a){var b=Array.isArray(a)?a[0]:a;return b&&b.value?_.map(b.value,function(a){return{author:a.author_name,photoUrl:a.author_photo,message:a.text,datetime:new Date(a.time),rating:a.rating}}).filter(function(a){return a.rating>=4}):[]},b.prototype.parseBusinessAddress=function(a){return a?{fullAddress:_.get(a,"full_addr"),country:_.get(a,"country"),city:_.get(a,"city"),zipcode:_.get(a,"zipcode"),state:_.get(a,"state"),street:_.get(a,"street"),location:a.lat&&a.lng?{lat:a.lat,lng:a.lng}:null}:null},b.prototype.parseOpeningHours=function(a){var b=this;return a&&a.value&&a.value.days?_.map(a.value.days,function(a){return{day:b.parseWeekDay(a.day),from:b.parseHour(a.from_hour),to:b.parseHour(a.to_hour)}}):[]},b.prototype.parseHour=function(a){if(!a)return null;var b=a.trim().split(":"),c=b[0],d=b[1];return{hour:parseInt(c,10),minute:parseInt(d,10)}},b.prototype.parseWeekDay=function(b){if(!b)return null;switch(b=b.trim(),b.toLowerCase()){case"sun":return a.WeekDay.Sunday;case"mon":return a.WeekDay.Monday;case"tue":return a.WeekDay.Tuesday;case"wed":case"wen":return a.WeekDay.Wednesday;case"thu":return a.WeekDay.Thursday;case"fri":return a.WeekDay.Friday;case"sat":return a.WeekDay.Saturday}},b.prototype.parseSocialLinks=function(a){var b=a.social_links?angular.copy(a.social_links):[],c=_.get(a,"official_website_data.social_links",[]);return b=b.concat(c),this.extractSocialLinks(b)},b.prototype.extractSocialLinks=function(a){var b=this,c=new Set;return _.reduce(a,function(a,d){if(d.url){var e=b.socialLinkManager.getPlatformNameByUrl(d.url);e&&!c.has(e)&&(a.push({platform:e,url:d.url}),c.add(e))}else console.error("got social "+JSON.stringify(d)+" without a link field!");return a},[])},b.prototype.parsePhotos=function(a){var b=this.parseFacebookPhotos(a.photos_albums),c=this.parseWebsitePhotos(_.get(a,"official_website_data.photos"));return b.concat(c)},b.prototype.parseWebsitePhotos=function(a){return a&&0!==a.length?_.map(a,function(a){return{source:b.PhotoSourceWebsite,url:a.photo_url,description:a.description}}):[]},b.prototype.parseFacebookPhotos=function(a){if(!a||0===a.length)return[];var c=[];return _.forEach(a,function(a){_.forEach(a.value,function(a){c=c.concat(_.map(a.photos,function(a){return{source:b.PhotoSourceFacebook,url:a.photo_url,description:a.description}}))})}),c},b}();b.PhotoSourceFacebook="facebook",b.PhotoSourceWebsite="website",a.WixWizDataParser=b,angular.module("siteGeneratorIntroInternal").service("wixWizDataParser",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j,k){this.wixWizIntegration=a,this.wixWizDataParser=b,this.mediaApi=c,this.miscUtils=d,this.socialLinkManager=e,this.wixmpServices=f,this.$q=g,this.$timeout=h,this.mediaGalleryAdapter=i,this.consumerBiLogger=j,this.wixMediaPlatform=k}return a.$inject=["wixWizIntegration","wixWizDataParser","mediaApi","miscUtils","socialLinkManager","wixmpServices","$q","$timeout","mediaGalleryAdapter","consumerBiLogger","wixMediaPlatform"],a.prototype.toSearchQuery=function(a){var b={name:a.name,email:a.contactDetails?a.contactDetails.email:"",phone:a.contactDetails?a.contactDetails.phone:"",category:a.category};return a.indifferentLocation?b.no_address=!0:a.ipBasedLocation||(b.address=a.userLocation),b},a.prototype.fromSearchResult=function(a){return{name:a.text,contactDetails:{phone:a.phone,email:a.email,fax:a.fax,address:{fullAddress:a.address?a.address.full_addr:""}},socialLinks:[{platform:this.socialLinkManager.PLATFORM_FACEBOOK,url:a.facebook},{platform:this.socialLinkManager.PLATFORM_GOOGLE_PLUS,url:a.googleplus},{platform:this.socialLinkManager.PLATFORM_TWITTER,url:a.twitter},{platform:this.socialLinkManager.PLATFORM_YELP,url:a.yelp}],media:{logos:[{description:"",url:a.image}]},urls:a.urls,nameSimilarityRank:+a.name_similarity_rank,distance:+a.distance}},a.prototype.search=function(a){var b=this,c=this.toSearchQuery(a);return this.wixWizIntegration.searchBusiness(c).then(function(a){return{results:a.unified_search.map(function(a){return b.fromSearchResult(a)}),searchId:a.searchId}})},a.prototype.searchResult=function(a,b){var c=this;return this.wixWizIntegration.getExtendedBusinessData(a.name,a.urls,b).then(function(a){return c.wixWizDataParser.parseExtendedData(a)})},a.prototype.uploadMedia=function(a){var b=this;if(_.isEmpty(a))return this.$q.when({});var c=this.$q.defer(),d=this.saveBusinessImagesToWixMediaLoose(a),e=d.length,f=[];return d.map(function(d,g){return d.then(function(a){f[g]=b.miscUtils.mediaGalleryAdapter.convertToMediaObject(a.data),--e||c.resolve(f)},function(d){f[g]=null,--e||c.resolve(f);var h=d&&d.status,i=d&&d.data&&d.data.message;return b.consumerBiLogger.warn(BIErrorCodes.UploadImagesFailed,"saveBusinessImagesToWixMedia returned #"+h+" - "+i+": "+a.join(",")),b.$q.when({})})}),c.promise},a.prototype.saveBusinessImagesToWixMediaLoose=function(a){var b={tags:["_imported","_site_builder"],mediaType:"picture"},c=_.map(a,function(a){return _.assign({},b,{url:a})});return this.wixMediaPlatform.uploadPrivateImages(c)},a.prototype.uploadMediaToFolder=function(a){if(_.isEmpty(a))return this.$q.when({});var b={name:"0",urls:a};return this.mediaApi.upload([b]).then(function(a){return!!a.folders&&!!a.folders[0]&&a.folders[0].id})},a.prototype.getMediasFromFolder=function(b,c,d){var e=this;void 0===d&&(d=0);var f=this.$q.defer();return this.wixmpServices.getImagesByFolderId(b).then(function(g){g.length===c.length||d>=a.MAX_DOWNLOAD_TRYS?(f.resolve(g),e.wixmpServices.removeFolders([b])):e.$timeout(function(){e.getMediasFromFolder(b,c,++d).then(function(a){f.resolve(a),e.wixmpServices.removeFolders([b])})},a.RETRY_DELAY_MS)}),f.promise},a}();b.MAX_DOWNLOAD_TRYS=30,b.RETRY_DELAY_MS=500,a.WixWizDataManager=b,angular.module("siteGeneratorIntroInternal").service("wixWizDataManager",b)}(intro||(intro={})),function(){"use strict";function a(a,b,c,d){function e(a){o=a}function f(b,c){c=c||_.values(n);var d={searchParams:b,platforms:c,esi:o};return a.post(m.PLATFORM_SEARCH,d).then(function(a){return a.data})}function g(b,c){_.isEmpty(c)&&(c=_.values(n));var d={searchParams:b,platforms:c};return a.post(m.PLATFORM_SEARCH,d).then(h)}function h(a){var b=[{providerResultsKey:"unified_search",platform:"unified"},{providerResultsKey:"factual_search",platform:n.FACTUAL},{providerResultsKey:"googleplus_search",platform:n.GOOGLE_PLUS},{providerResultsKey:"googleplaces_search",platform:n.GOOGLE_PLACES},{
providerResultsKey:"yelp_search",platform:n.YELP},{providerResultsKey:"youtube_search",platform:n.YOUTUBE},{providerResultsKey:"facebook_search",platform:n.FACEBOOK}];return a=a.data,_.reduce(b,function(b,c){var d=_.map(a[c.providerResultsKey],function(a){var b={platform:c.platform};return _.assign({},a,b)});return b.concat(d)},[])}function i(b){var c={urls:b,requestOrigin:"onboarding"};return a.post(m.GET_BUSINESS_INFO,c).then(j)}function j(a){var b={TITLE:"platforms.0.general_info.site_title",DESCRIPTION:"platforms.0.general_info.short_description",URL:"platforms.0.contact_details.website",LOGO:"platforms.0.general_info.logo",COVER:"platforms.0.general_info.cover_photo",PHOTO_ALBUMS:"platforms.0.photos_albums"},c=[{fieldName:"Name",type:"text",value:_.get(a.data,b.TITLE)},{fieldName:"Description",type:"text",value:_.get(a.data,b.DESCRIPTION)},{fieldName:"Url",type:"link",value:_.get(a.data,b.URL)},{fieldName:"Logo",type:"logo",value:_.get(a.data,b.LOGO)},{fieldName:"Cover",type:"img",value:_.get(a.data,b.COVER)},{fieldName:"Photos",type:"images",value:_.get(a.data,b.PHOTO_ALBUMS)}];return c=_.map(c,function(a){return _.includes(["logo","img"],a.type)?_.defaults(a,{value:"https://web.vmc3.com/projects/bufs/branch/coastguard/logos/NoLogo.jpg"}):_.defaults(a,{value:""})})}function k(a){var d={tags:["_imported","_site_builder"],mediaType:"picture"},e=_.map(a,function(a){return _.assign({},d,{url:a})}),f=b.uploadPrivateImages(e);return c.all(f)}function l(b,c,d){var e={businessQuery:b,urls:c,requestOrigin:"onboarding",searchId:d,esi:o};return a.post(m.GET_BUSINESS_INFO,e).then(function(a){return _.find(a.data.platforms,function(a){return"unified_fields"===a.platform_name})})}var m={PLATFORM_SEARCH:"/_api/any2wix-server/platformsearch",GET_BUSINESS_INFO:"/_api/any2wix-server/analyzeplatforms"},n={FACTUAL:"factual",FACEBOOK:"facebook",GOOGLE_PLACES:"google_places",YELP:"yelp"};d.introTestNoFactual&&delete n.FACTUAL;var o;return{PLATFORMS:n,searchBusiness:f,setSessionId:e,searchBusinessFlatten:g,analyzeBusinessByUrls:i,saveBusinessImagesToWixMedia:k,getExtendedBusinessData:l}}a.$inject=["$http","wixMediaPlatform","$q","flags"],angular.module("siteGeneratorIntroInternal").factory("wixWizIntegration",a)}();var intro;!function(a){var b=function(){function b(a,b,c,d,e,f,g,h,i,j,k){var l=this;this.$rootScope=a,this.applicationParameters=b,this.localStorageService=c,this.wixWizDataManager=d,this.flags=e,this.validation=f,this.userService=g,this.introDataManipulation=h,this.userDetailsService=i,this.spinnerService=j,this.$translate=k,this.isWixWizError=!1,this.selectedOfferByType=function(a){return _.find(l.data.serviceOffer,{type:a})},this.prepareGeneralCategories(),this.preparePreSuggestionsByVertical()}return b.$inject=["$rootScope","applicationParameters","localStorageService","wixWizDataManager","flags","validation","userService","introDataManipulation","userDetailsService","spinnerService","$translate"],b.prototype.prepareDataForBuilder=function(){this.data.name||(this.data.name=this.$translate.instant("intro.business-name.empty")),this.data.contactDetails=this.data.contactDetails||{},this.validation.isWebsite(this.data.contactDetails.website)||(this.data.contactDetails.website=""),this.data.category||(this.data.category=_.clone(a.DEFAULT_CATEGORY)),this.data.socialLinks&&(this.data.socialLinks=this.data.socialLinks.filter(function(a){return!!a.url&&a.platform}))},b.prototype.prepareGeneralCategories=function(){var b=this;this.generalCategories=ob.deepClone(a.GENERAL_CATEGORIES),_.each(a.generalCategoriesByFlag,function(a,c){b.flags[c]&&_.assign(b.generalCategories,ob.deepClone(a))})},b.prototype.preparePreSuggestionsByVertical=function(){var b=this;this.preSuggestionsByVertical=ob.deepClone(a.preSuggestionsByVertical),_.each(a.preSuggestionsByVerticalByFlag,function(a,c){b.flags[c]&&_.assign(b.preSuggestionsByVertical,ob.deepClone(a))})},b.prototype.init=function(a){var c=this;this.vertical=a,this.data=this.createBaseData();var d=this.localStorageService.get(b.INTRO_STORAGE_KEY);d&&this.isStorageInvalid(d)?this.localStorageService.remove(b.INTRO_STORAGE_KEY):d&&(d.dates&&(d.dates=d.dates.map(function(a){return new Date(a)})),angular.extend(this.data,d));var e=this.selectedOfferByType(this.vertical);e&&(e.checked=!0),this.introDataWatch||(this.introDataWatch=this.$rootScope.$watch(function(){return c.data},function(){return c.localStorageService.set(b.INTRO_STORAGE_KEY,c.data)},!0))},b.prototype.isStorageInvalid=function(a){var c=this.data.uuid&&a.uuid&&this.data.uuid!==a.uuid,d=this.data.createdOn&&a.createdOn?this.data.createdOn-a.createdOn:0,e=d/1e3/60/60/24;return c||e>=b.INTRO_STORAGE_EXPIRY_DAYS},b.prototype.reset=function(){this.data={},this.localStorageService.remove(b.INTRO_STORAGE_KEY),this.introDataWatch&&(this.introDataWatch(),this.introDataWatch=null)},b.prototype.getStoryId=function(){return this.data.storyId},b.prototype.setStoryId=function(a){this.data.storyId=a},Object.defineProperty(b.prototype,"siteProperties",{get:function(){var a={email:this.data.contactDetails&&this.data.contactDetails.email?this.data.contactDetails.email:"",fax:this.data.contactDetails&&this.data.contactDetails.fax?this.data.contactDetails.fax:"",phone:this.data.contactDetails&&this.data.contactDetails.phone?this.data.contactDetails.phone:"",logo:this.data.media&&this.data.media.logos[0]&&this.data.media.logos[0].data?this.data.media.logos[0].data.relativeUri:"",name:this.data.name?this.data.name:"",address:{street:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.street?this.data.contactDetails.address.street:"",city:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.city?this.data.contactDetails.address.city:"",state:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.state?this.data.contactDetails.address.state:"",country:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.country?this.data.contactDetails.address.country:"",zip:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.zipcode?this.data.contactDetails.address.zipcode:""}};return this.flags.moreDataInSiteProperties&&_.merge(a.address,this.getAddressForSiteProperties()),a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"logoDimensions",{get:function(){return{width:_.get(this.data,"media.logos[0].data.width",0),height:_.get(this.data,"media.logos[0].data.height",0)}},enumerable:!0,configurable:!0}),b.prototype.getAddressForSiteProperties=function(){var a=this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.fullAddress,b=this.hasAddress&&this.data.userLocation.formatted_address;return this.hasAddress&&this.getFullAddress(this.data.userLocation)===a?{googleFormattedAddress:b}:{fullAddress:a}},b.prototype.createBaseData=function(){var a=this,b=_.filter(this.applicationParameters.tpaTypes,function(b){var c=b.sectionUnderFlag;return!0===b.inConsumer&&(!c||a.flags[c])});return{name:"",uuid:this.userService.getUUID(),createdOn:(new Date).getTime(),socialLinks:[],serviceOffer:_.map(Object.keys(b),function(a){return{type:b[a].type,checked:!1}}),dates:[],lastSearchedTerm:"",validCategory:!1}},b.prototype.addressShouldBecomeMultiline=function(a){if(a.formatted_address.length<=25)return!1;var b=["street_number","route","locality"],c=Array.prototype.concat.apply([],a.address_components.map(function(a){return a.types}));return!(_.difference(b,c).length>0)&&(a.address_components&&a.address_components.length>1)},b.prototype.formatMultiLineAddress=function(a){var b={num:"street_number",street:"route",city:"locality",state:"administrative_area_level_2",country:"country",zip:"postal_code"},c=["num"," ","street","\n","city",", ","state"," ","zip","\n","country"],d=_.map(c,function(c){if("\n, ".indexOf(c)>-1)return c;var d=_.find(a,function(a){return a.types.indexOf(b[c])>-1}),e="country"===c?"long_name":"short_name";return d?d[e]:" "});return"United States"===d[c.indexOf("country")]?d[c.indexOf("country")]="USA":d[c.indexOf("state")]="",d.join("")},b.prototype.cleanAddress=function(a){return a.split("\n").filter(function(a){return""!==a.replace(/,/g,"").trim()}).map(function(a){return a.trim().replace(/\s+/g," ")}).join("\n")},b.prototype.getFullAddress=function(a){var b;return b=this.addressShouldBecomeMultiline(a)?this.formatMultiLineAddress(a.address_components):a.formatted_address,this.cleanAddress(b)},b.prototype.setAddress=function(a){var b={};a&&(b.location={lat:a.geometry.location.lat,lng:a.geometry.location.lng},this.flags.moreDataInSiteProperties?b.fullAddress=this.getFullAddress(a):(this.addressShouldBecomeMultiline(a)?b.fullAddress=this.formatMultiLineAddress(a.address_components):b.fullAddress=a.formatted_address,b.fullAddress=this.cleanAddress(b.fullAddress))),this.data.contactDetails||(this.data.contactDetails={}),this.data.contactDetails.address=b},b.prototype.merge=function(a){_.assign(this.data,a)},b.prototype.mergeSearchResult=function(a){_.assign(this.data,this.data.searchResults[a])},b.prototype.searchUsers=function(a){var b=this;void 0===a&&(a=!0),this.startWixWizAction(a);var c=this.wixWizDataManager.search(this.data).then(function(a){b.data.searchResults=a.results,b.wixWizSearchId=a.searchId});return this.handleWixWizResponse(c,!0)},b.prototype.getExtendedUserByPathsToNotUpdate=function(a){return this.wixWizDataManager.searchResult(a,this.wixWizSearchId).then(function(b){return{dataModel:_.assign({},b,{searchUrls:a.urls})}})},b.prototype.getExtendedUser=function(a,b){var c=this;void 0===b&&(b=!0),this.startWixWizAction(b);var d=this.wixWizDataManager.searchResult(a,this.wixWizSearchId).then(function(b){if(_.assign(c.data,b,{searchUrls:a.urls}),!c.data.contactDetails.email)return c.userDetailsService.getUserDetails().then(function(a){c.data.contactDetails.email=a.email})});return this.handleWixWizResponse(d)},b.prototype.updateDataByModelAndUserValuesPaths=function(a,b){var c=this.introDataManipulation.getUserValuesFromIntroData(this.data,b);_.assign(this.data,a),this.introDataManipulation.restoreUserValues(this.data,c)},Object.defineProperty(b.prototype,"hasAddress",{get:function(){return this.data.userLocation&&"object"==typeof this.data.userLocation},enumerable:!0,configurable:!0}),b.prototype.getCategoryNoError=function(){return this.data.category?this.data.category:_.clone(a.DEFAULT_CATEGORY)},b.prototype.getLod=function(){if(!this.hasAddress)return null;var a,b=this.data.userLocation;if(b&&b.address_components.length>0){var c=b.address_components[0].types[0];"locality"===c||"premise"===c?a="city":"street_number"===c?a="streetNum":c.indexOf("administrative_area_level")>=0?a="state":"country"===c?a="country":"route"===c&&(a="street")}return a},b.prototype.startWixWizAction=function(a){a&&this.spinnerService.forceStart(),this.isWixWizError=!1},b.prototype.handleWixWizResponse=function(a,b){var c=this;return void 0===b&&(b=!1),a.catch(function(){b&&(c.data.searchResults=[]),c.isWixWizError=!0}).finally(function(){return c.spinnerService.forceStop()})},b.prototype.isSocialLinksExists=function(){var a=!1;return _.isArray(this.data.socialLinks)&&this.data.socialLinks.forEach(function(b){if(!_.isEmpty(b.url))return a=!0,!1}),a},b.prototype.isLogoExists=function(){return!!_.get(this.data,"media.logos[0].url")&&!!_.get(this.data,"media.displayLogo")},b.prototype.isBusinessTagLineExists=function(){return _.get(this.data,"generalInfo.categories.length")>0},b.prototype.isEmailExists=function(){return!!_.get(this.data,"contactDetails.email")},b.prototype.isPhoneExists=function(){return!!_.get(this.data,"contactDetails.phone")},b.prototype.isFaxExists=function(){return!!_.get(this.data,"contactDetails.fax")},b.prototype.isAddressExists=function(){return!!_.get(this.data,"contactDetails.address.fullAddress")},b.prototype.website=function(){return _.get(this.data,"contactDetails.website")},b.prototype.isWebSiteExists=function(){return!!_.get(this.data,"contactDetails.website")},b}();b.INTRO_STORAGE_KEY="introData",b.INTRO_STORAGE_EXPIRY_DAYS=2,a.IntroManager=b,angular.module("siteGeneratorIntroInternal").service("introManager",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function b(a,c,d,e,f,g,h,i,j,k,l,m){var n=this;this.$state=c,this.$q=d,this.$log=e,this.introAnimationData=f,this.IntroAnimationElement=g,this.introWindow=h,this.introAnimationAdapter=i,this.introEventsEmitter=j,this.introManager=k,this.introDataManipulation=l,this.$window=m,this.disposable={},this.isFirstTime=function(){return!n.lastAction},this.next=this.stateAction("next"),this.skip=this.stateAction("skip"),this.back=this.stateAction("back"),this.wait=function(){return n.hideContent().then(function(){return n.playAnimation("wait")})},this.showContent=function(){return n.contentElement?n.contentElement.show():n.$q.when()},this.onResize=_.debounce(function(){var a=n.$state.current.name;if(n.introAnimationData[a]){var b=n.introWindow.getAnimationBoxDimensions(n.currentContentHeight);n.$q.all([n.hideContent(),n.introAnimationAdapter.resize(b)]).then(function(){n.backdropBoxPosition=b,n.contentBoxPosition=n.introWindow.getContentPosition(n.backdropBoxPosition,n.currentContentHeight),n.showContent(),angular.element(n.$window).trigger("resize")})}},b.RESIZE_DEBOUNCE),this.beforeStateChangeWatcher=a.$on("$stateChangeStart",function(a,b,c,d){return n.beforeStateChanged(a,b.name,d.name)}),this.afterStateChangeWatcher=a.$on("$stateChangeSuccess",function(a,b,c,d){return n.afterStateChanged(b.name,d.name)}),this.introWindow.on("resize",this.onResize)}return b.$inject=["$rootScope","$state","$q","$log","introAnimationData","IntroAnimationElement","introWindow","introAnimationAdapter","introEventsEmitter","introManager","introDataManipulation","$window"],b.prototype.init=function(a,b,c){var d=this;this.contentElement=this.IntroAnimationElement(b),this.animationElement=this.IntroAnimationElement(a),this.loadingElement=this.IntroAnimationElement(c);var e=this.$state.current.name;return this.introAnimationData[e]&&(this.currentContentHeight=this.introAnimationData[e].contentHeight,this.backdropBoxPosition=this.introWindow.getAnimationBoxDimensions(this.currentContentHeight),this.contentBoxPosition=this.introWindow.getContentPosition(this.backdropBoxPosition,this.currentContentHeight)),this.introAnimationAdapter.init(a,this.backdropBoxPosition).then(function(){return d.showContent()})},b.prototype.dispose=function(){this.beforeStateChangeWatcher&&this.beforeStateChangeWatcher(),this.afterStateChangeWatcher&&this.afterStateChangeWatcher(),this.disposable=null,this.contentElement=null,this.animationElement=null,this.introWindow.off("resize",this.onResize),this.introAnimationAdapter.dispose()},b.prototype.stateAction=function(b){var c=this;return function(d){c.lastAction=b,d!==a.INTRO_FINISHED&&c.$state.go(d)}},b.prototype.hideContent=function(a){if(!this.contentElement||this.contentElement.hidden)return this.$q.when();var b=[this.contentElement.hide()];return a&&b.push(this.animationElement.hide()),this.$q.all(b)},b.prototype.showBackdrop=function(){return this.backdropBoxPosition=this.introWindow.getAnimationBoxDimensions(this.currentContentHeight),this.introAnimationAdapter.play("next",this.backdropBoxPosition)},b.prototype.scale=function(a){return this.currentContentHeight=a,this.backdropBoxPosition=this.introWindow.getAnimationBoxDimensions(this.currentContentHeight),this.contentBoxPosition=this.introWindow.getContentPosition(this.backdropBoxPosition,this.currentContentHeight),this.introAnimationAdapter.scale(this.backdropBoxPosition)},b.prototype.isIntroState=function(b){return b&&b.startsWith(a.INTRO_STATES.INTRO)},b.prototype.beforeStateChanged=function(b,c,d){this.isIntroState(d)&&(this.isIntroState(c)?this.notifyStateChanged(d,c,"before"):this.notifyStateChanged(d,a.INTRO_FINISHED,"before"))},b.prototype.afterStateChanged=function(b,c){var d=this;if(this.isIntroState(c))if(this.isIntroState(b)){var e=void 0;this.introAnimationData[b]?(this.currentContentHeight=this.introAnimationData[b].contentHeight,e=this.playAnimation(this.guessAnimation(b,c),b)):(this.currentContentHeight=null,e=this.playAnimation("blank")),e.then(function(){return d.showContent()}).then(function(){return d.notifyStateChanged(c,b,"after")})}else this.notifyStateChanged(c,a.INTRO_FINISHED,"after")},b.prototype.notifyStateChanged=function(b,c,d){var e,f=this.introManager.data,g=this.lastAction;switch(b){case a.INTRO_STATES.INTRO:break;case a.INTRO_STATES.INTRO_CATEGORY_SEARCH:e={name:b,category:f.category};break;case a.INTRO_STATES.INTRO_BLOCKED_CATEGORY:case a.INTRO_STATES.INTRO_SERVICES_OFFER:case a.INTRO_STATES.INTRO_IMPORT_SITE_CONTENT:break;case a.INTRO_STATES.INTRO_BUSINESS_NAME:e={name:b,businessName:f.name};break;case a.INTRO_STATES.INTRO_BUSINESS_LOCATION:e={name:b,hasAddress:this.introManager.hasAddress,userLocation:f.userLocation,ipBasedLocation:f.ipBasedLocation,indifferentLocation:f.indifferentLocation};break;case a.INTRO_STATES.INTRO_BUSINESS_DATES:e={name:b,dates:this.introManager.data.dates};break;case a.INTRO_STATES.INTRO_EVENT_DETAILS:case a.INTRO_STATES.INTRO_SEARCH_CONFIRM:case a.INTRO_STATES.INTRO_SELECT_USER:case a.INTRO_STATES.INTRO_IMPORT_SITE_CONFIRM:break;case a.INTRO_STATES.INTRO_EDIT_USER:e={name:b,userValues:this.introDataManipulation.getUserValuesOfBusinessData(this.introManager.data)};break;default:this.$log.error('Intro: state changed from unknown state: "'+b+'"')}e&&this.introEventsEmitter.notifyStepChange(e,c,g,d)},b.prototype.guessAnimation=function(a,b){var c=Object.keys(this.introAnimationData);return!this.introAnimationData[b]||c.indexOf(a)<c.indexOf(b)?"back":"back"===this.lastAction?"next":this.lastAction?this.lastAction:"next"},b.prototype.playAnimation=function(a,b){return b?(this.backdropBoxPosition=this.introWindow.getAnimationBoxDimensions(this.currentContentHeight),this.contentBoxPosition=this.introWindow.getContentPosition(this.backdropBoxPosition,this.currentContentHeight)):(this.backdropBoxPosition=null,this.contentBoxPosition=null),this.introAnimationAdapter.play(a,this.backdropBoxPosition)},b}();b.RESIZE_DEBOUNCE=500,a.IntroStep=b,angular.module("siteGeneratorIntroInternal").service("introStep",b)}(intro||(intro={}));var intro;!function(a){a.CategoryTypes={SingleEvent:"singleEvent",Photographer:"photographer"};var b=function(){function b(b){var c=this;this.flags=b,this.PHOTOGRAPHER_STRUCTURE_IDS=["fa28a6f03dbe530a8a8c6fcc","c280f2565940817f4edc48fe","70d8036f281d1ce612272b6a","cba925039ed9d3d360590d31","f1b75b7b719f5ed5b5bdc41f","fc57b1629c4ff302fb03e79c","228113fd238f42db1cf7160a","c5c1f3c63915119ed5c7feff","4c41f36c745880e6e42c5838","b5ab898f0afbfec00845808e","54004a861a39c4a3eb57d114","6faf46a50ee4aa0fff4e1135","02b40f8270007a792c300561","481a36b3eeb98dbfc2f904a6","94d4b55ce16bd162b833e148","88337e3560e889b475d492a7","0f04c68cffed335f82caabfa","3278ba04c3340b40d058ed5f","f764b4a56aca6b9f42c3ec3a","0fdf8f7c1fd0fb710ecb8826","320bc14e388b60c6ab499242","9b888a944e35417b0916e075","be6f1d8dc988d56f886ed440","137221e480f86fbd3c80436a","afee35922f1083c84a62b114","87de0335f09ebc252139974c","7d9f2f2d93d10adfb06b97f8","0d9c96444715ddf86b7dae9c"],this.SINGLE_EVENT_STRUCTURE_IDS=["86614cf07e4b4b958c17799e","53ccd6d3ed28056652523bf8","4115b4b3648e14a3d30fc868","d0a23df9f1f222e74ee14792","8ad09c40cd032d6f157c3061","8f92fe0b3e5ac39b968ed30a","66ab3cd9ab82187cba6d438a","3118118a1e2e5ef4539a51f3","64019cca29a74c24d67ceb8e","2634908fb29b65cc063198ae","59922f2d4d214b6def6bdb1c","93762d8e11ff81ded43e0d01","a1b4f8164a1a626a7eab7242","2b2732a277096b81176a53e0","039e2da6322d72456c116493","2597ed3258e7803bf2df1d3a","befcaf30ac3c975eff7c8018","9f963f4ae9923320f3d0df74","d24103ac38dad574c915c6d4","6366bb29a125a48254d64d8f","c3315453c35066966a2a2b6e","3edc74db8e5c9df30f410797","ff34af892529b6245eee17ef","1ab0758e82c7e024d6bc00fb","82e7dd0419f621c370d802cd","2ccd9638ebbeffef7087609f","96752dbe194b85d9648d5b49","661faae4694aff347897a3c6","7f46632f92b9f8f5c1afa658"],this.BUSINESS_NAME_TITLES=(d={DEFAULT:"input-label"},d[a.CategoryTypes.SingleEvent]="label-singleEvent",d.b0a520919b99728bae200018="label-blog-website",d["25cee88a72dcbb6573f2d4b4"]="label-band",d.ab472419552a627ae17a6248="label-band",d["78dd91ce2f03d612f7d21d67"]="label-business",d["56457787d0958454ae07ba9d"]="label-business",d.ef0e83f2dd3e5f2de57ed162="label-business",d["02c27dfb52b10a2442c8b9db"]="label-choir",d["4dafcb6d45599002d5ca8c73"]="label-business",d.bd3e888b9611b0defe9346f5="label-band",d.ca997711954ac38e4c80b6cb="label-stagename",d["548727a6f23ccfaa7480dab6"]="label-business",d.e34f3d3221e0000ef9c482be="label-business",d.ddcf01985bb895180fddde3b="label-business",d.e7c71df1ba825a34be9150a7="label-business",d["082f23d3239e001fa382569e"]="label-artist-or-band",d.fc78cd8fe36ec98750f48598="label-artist-or-band",d["17117225096faf1aeb06cf43"]="label-artist-or-band",d["85ce4978795e86d267591938"]="label-artist-or-band",d["0d5622380c498d071bbef24d"]="label-artist",d.e5dda168311d4b74264a0c24="label-band2",d.f5feb80464366af988623685="label-business",d.a28c5e5ea1945e5fa4ca1728="label-business",d.ede0e37e9de8c82c420ad0b5="label-business",d["2722ab4c0feb9fa6fdcc1c6b"]="label-business",d["7bd6f744207891da991c722b"]="label-business",d.e5aec35bbc5fc88b438724cf="label-business",d.fa6f57e9df0b2c3dfa39cce9="label-business",d["0d9c96444715ddf86b7dae9c"]="label-business",d["6796cebe34d21cca1400d748"]="label-business",d["21c70c386045175cb342045a"]="label-business",d.e67d552f50a50029ed406a50="label-business",d["494592c679c0d50b9d48a03e"]="label-business",d.a8c41ae5ef3d8694abd189b1="label-business",d["7de435a5405481f73e84a8cd"]="label-fullname",d),this.LOCATION_TITLES=(e={DEFAULT:"input-label"},e[a.CategoryTypes.SingleEvent]="label-singleEvent",e),this.valueForCategory=function(a,b){return function(d){var e=c.categoryType(d);return b+(a[d.structureId]||a[e]||a.DEFAULT)}},this.businessNameTitle=this.valueForCategory(this.BUSINESS_NAME_TITLES,"intro.business-name."),this.locationTitle=this.valueForCategory(this.LOCATION_TITLES,"intro.business-location."),this.flags.wixEvents&&(this.BUSINESS_NAME_TITLES.fa28a6f03dbe530a8a8c6fcc="label-"+a.CategoryTypes.SingleEvent,this.LOCATION_TITLES.fa28a6f03dbe530a8a8c6fcc="label-"+a.CategoryTypes.SingleEvent);var d,e}return b.$inject=["flags"],b.prototype.categoryType=function(b){return this.flags.wixEvents&&this.SINGLE_EVENT_STRUCTURE_IDS.indexOf(b.structureId)>=0||this.flags.debugWixEvents?a.CategoryTypes.SingleEvent:this.PHOTOGRAPHER_STRUCTURE_IDS.indexOf(b.structureId)>=0?a.CategoryTypes.Photographer:null},b}();a.IntroContentTpa=b,angular.module("siteGeneratorIntroInternal").service("introContentTpa",b)}(intro||(intro={}));var UpdateTypeEnum;!function(a){a[a.None=0]="None",a[a.Reference=1]="Reference",a[a.Visibility=2]="Visibility"}(UpdateTypeEnum||(UpdateTypeEnum={}));var FieldsMasks=function(){function a(a,b){this.modelTree=a,this.introManager=b}return a.$inject=["modelTree","introManager"],a.prototype.updateReferenceFieldsVisibility=function(a,b,c,d,e){d[a]=b,this.modelTree.updateReferenceFieldsVisibility(c,a,e)},a.prototype.updateFieldVisibility=function(a,b,c,d,e){c.argsMatchingPolicy[a]=b,d===UpdateTypeEnum.Visibility&&this.modelTree.updateFieldsVisibility(c,null,a,b,e)},a.prototype.getMaskType=function(a){var b=a&&"GeneralDescription"===a.getContentElementType(),c=b&&"footer"!==a.containerPageId,d=b&&"footer"===a.containerPageId,e=a&&a.contentElementType;return c?e="Header":d&&(e="Footer"),e},a.prototype.update=function(a){var b=this,c=this.getMaskType(a),d=a.getReferenceFields();this.maskConfiguration[c].fields.forEach(function(c){c.typeUpdate===UpdateTypeEnum.Reference?b.updateReferenceFieldsVisibility(c.key,c.condition(),a,d,c.forceDefaultValue):b.updateFieldVisibility(c.key,c.condition(),a,c.typeUpdate,c.forceDefaultValue)})},Object.defineProperty(a.prototype,"maskConfiguration",{get:function(){var a=this;return{Header:{fields:[{key:"MainEmail",condition:function(){return!1},typeUpdate:UpdateTypeEnum.Visibility,forceDefaultValue:!1},{key:"Contact.phone number",condition:function(){return!1},typeUpdate:UpdateTypeEnum.Reference,forceDefaultValue:!0},{key:"Logo",condition:function(){return a.introManager.isLogoExists()},typeUpdate:UpdateTypeEnum.None},{key:"BusinessName",condition:function(){return!a.introManager.isLogoExists()},typeUpdate:UpdateTypeEnum.Visibility,forceDefaultValue:!1},{key:"BusinessTagline",condition:function(){return!1},typeUpdate:UpdateTypeEnum.None},{key:"Social.SocialButtons",condition:function(){return a.introManager.isSocialLinksExists()},typeUpdate:UpdateTypeEnum.Reference,forceDefaultValue:!0}]},Footer:{fields:[{key:"Contact.fax",condition:function(){return!1},typeUpdate:UpdateTypeEnum.Reference,forceDefaultValue:!1},{key:"MainEmail",condition:function(){return!1},typeUpdate:UpdateTypeEnum.Visibility,forceDefaultValue:!1},{key:"Contact.phone number",condition:function(){return a.introManager.isPhoneExists()},typeUpdate:UpdateTypeEnum.Reference,forceDefaultValue:!1},{key:"Logo",condition:function(){return!1},typeUpdate:UpdateTypeEnum.None},{key:"BusinessName",condition:function(){return!1},typeUpdate:UpdateTypeEnum.Visibility,forceDefaultValue:!1},{key:"BusinessTagline",condition:function(){return!1},typeUpdate:UpdateTypeEnum.None},{key:"Social.SocialButtons",condition:function(){return!a.introManager.isSocialLinksExists()},typeUpdate:UpdateTypeEnum.Reference,forceDefaultValue:!0},{key:"CopyrightMessage",condition:function(){return!0},typeUpdate:UpdateTypeEnum.Visibility,forceDefaultValue:!0},{key:"Contact.address for display",condition:function(){return!1},typeUpdate:UpdateTypeEnum.Reference,forceDefaultValue:!1}]},Contact:{fields:[{key:"Social.SocialButtons",condition:function(){return!0},typeUpdate:UpdateTypeEnum.Reference,forceDefaultValue:!0},{key:"address for display",condition:function(){return!0},typeUpdate:UpdateTypeEnum.Visibility},{key:"address for google map",condition:function(){return!0},typeUpdate:UpdateTypeEnum.Visibility}]}}},enumerable:!0,configurable:!0}),a}();angular.module("siteGeneratorIntroInternal").service("fieldsMasks",FieldsMasks);var intro;!function(a){var b=function(){function a(a,b,c){this.$q=a,this.flags=b,this.backdropAnimations=c,this.lastAnimating=a.when()}return a.$inject=["$q","flags","backdropAnimations"],a.prototype.init=function(a,b){return this.backdropAnimations.init(a[0],b)},a.prototype.play=function(a,b){return void 0===a&&(a="next"),this.lastAnimating=this.backdropAnimations.play(a,b),this.lastAnimating},a.prototype.wait=function(){return this.play("wait")},a.prototype.resize=function(a){var b=this;return this.lastAnimating.then(function(){return b.backdropAnimations.resize(a)})},a.prototype.scale=function(a){return this.backdropAnimations.scale(a)},a.prototype.dispose=function(){this.backdropAnimations.dispose()},a}();a.IntroAnimationAdapter=b,angular.module("siteGeneratorIntroInternal").service("introAnimationAdapter",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b,c){this.$q=a,this.$timeout=b,this.element=c,this.hidden=!1}return a.$inject=["$q","$timeout","element"],a.prototype.hide=function(){var a=this;this.element.css("opacity",0);var b=this.$q.defer();return this.$timeout(function(){a.hidden=!0,b.resolve()},500),b.promise},a.prototype.show=function(){return this.element.css("opacity",1),this.hidden=!1,this.$q.when()},a}();a.IntroAnimationElement=b,angular.module("siteGeneratorIntroInternal").factory("IntroAnimationElement",["$q","$timeout",function(a,c){return function(d){return new b(a,c,d)}}])}(intro||(intro={}));var intro;!function(a){a.INTRO_FINISHED="intro.finished";var b=function(){function a(){var a=this;this.stepChangeListeners=[],this.notifyStepChange=function(b,c,d,e){a.stepChangeListeners.map(function(a){return a(b,c,d,e)})}}return a.prototype.listenStepChange=function(a){var b=this,c=this.stepChangeListeners.push(a)-1;return function(){b.stepChangeListeners[c]=function(){}}},a}();a.IntroEventsEmitter=b,angular.module("siteGeneratorIntroInternal").service("introEventsEmitter",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b){this.mediaObj=a,this.miscUtils=b}return a.prototype.init=function(){this.mediaObj.displayLogo=!0,this.mediaObj.logos=this.mediaObj.logos||[],this.mediaObj.logos[0]=this.mediaObj.logos[0]||{}},a.prototype.getLogoURL=function(){return this.mediaObj.logos[0].url},a.prototype.setLogo=function(a){this.mediaObj.displayLogo=!0;var b={source:"facebook",url:a.serverResponse.data.originalUrl,localFile:a.serverResponse,data:null,description:""};this.mediaObj.logos[0]=b,b.data=this.miscUtils.mediaGalleryAdapter.convertToMediaObject(b.localFile.data),b.data.mediaType="clipart"},a.prototype.hideLogo=function(){this.mediaObj.displayLogo=!1},a.prototype.isLogoVisible=function(){return this.mediaObj.displayLogo},a.prototype.cleanUp=function(){for(;this.mediaObj&&this.mediaObj.logos[0]&&!this.mediaObj.logos[0].url;)this.mediaObj.logos.shift()},a}();a.IntroLogoPersistence=b}(intro||(intro={}));var intro;!function(a){var b=function(){function b(a,b,c,d){this.mediaApi=a,this.introManager=b,this.$q=c,this.storyServices=d}return b.$inject=["mediaApi","introManager","$q","storyServices"],b.prototype.upload=function(c){var d=this;if(!this.introManager.data.media||!this.introManager.data.media.photos||0===this.introManager.data.media.photos.length)return this.$q.when();var e=[],f=[];_.forEach(this.introManager.data.media.photos,function(b){b.source===a.WixWizDataParser.PhotoSourceFacebook?e.push(b.url):b.source===a.WixWizDataParser.PhotoSourceWebsite&&f.push(b.url)});var g=b.MaxImagesToUpload/2,h=b.MaxImagesToUpload/2;e.length<f.length?(g=Math.min(e.length,g),h=b.MaxImagesToUpload-g):(h=Math.min(f.length,h),g=b.MaxImagesToUpload-h);var i={name:c,urls:_.take(e,g).concat(_.take(f,h))};return this.mediaApi.upload([i]).then(function(a){d.storyServices.story.privateMediaFolderId=a&&a.folders&&a.folders.length>0?a.folders[0].id:""})},b}();b.MaxImagesToUpload=100,a.IntroMediaUploader=b,angular.module("siteGeneratorIntroInternal").service("introMediaUploader",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function b(a,b){var c=this;this.socialLinkManager=a,this.flags=b,this.createSocialButtons=function(a){return _.filter(a,function(a){return a.url}).map(function(a){var b=a.platform?a.platform:c.socialLinkManager.invalidPlatformName,d=c.socialLinkManager.getPlatformByName(b)||c.socialLinkManager.getPlatformByName(c.socialLinkManager.invalidPlatformName);return{platform:a.platform,Title:a.platform,mediaType:"icon",width:200,height:200,relativeUri:d.lightRelativeUri,Link:{targetUrl:c.makeValidURL(a.url)}}})}}return b.$inject=["socialLinkManager","flags"],b.prototype.makeValidURL=function(a){return a.startsWith("http")||(a="http://"+a),a},b.prototype.createMediaItem=function(a){return{fileName:"Two Flamingos",relativeUri:"0d5a8583187a44688b918f91298eba80.jpg",width:1920,height:1280,Title:"Two Flamingos",Description:"",Link:{},mediaType:"image"}},b.prototype.isValidContactDescription=function(a,b){if(!b)return!1;var c=b,d=c.parking&&(c.parking.lot||c.parking.street||c.parking.valet),e=!!c.publicTransport;return d||e},b.prototype.formatContactDescription=function(a){var b="";return a.parking&&(a.parking.lot||a.parking.street||a.parking.valet)&&(b+=this.formatParking(a.parking)),a.publicTransport&&(b+=this.formatPublicTransport(a.publicTransport)),b},b.prototype.formatPublicTransport=function(a){return"To reach us via public transit: "+a},b.prototype.formatParking=function(a){var b="Should you be arriving by car, we offer ",c=_.sum(_.values(a),function(a){return a?1:0}),d=0;return a.valet&&(b+=this.addSentencePart("valet parking",0===d,2===c),c--,d++),a.lot&&(b+=this.addSentencePart("a parking lot with parking for our customers",0===d,2===c),c--,d++),
a.street&&(b+=this.addSentencePart("street parking",0===d,2===c)),b+"."},b.prototype.addSentencePart=function(a,b,c){return b?a:(c?", ":" and ")+a},b.prototype.formatCategories=function(a){return a?a.join(" · "):null},b.prototype.isValidOpeningHours=function(a,b){return!(!b||0===b.length)&&_.any(b,function(a){return a&&a.day&&a.from&&a.to})},b.prototype.formatOpeningHours=function(b){var c=this;if(!b)return null;b=b.map(function(b){return b.day===a.WeekDay.Sunday&&(b.day=a.WeekDay.SundayLastDayOfWeek),b});var d=_.groupBy(b,"day");return Object.keys(d).map(function(a){var b=d[a],e=b.map(function(a){return a&&a.from&&a.to?c.formatHour(a.from)+" - "+c.formatHour(a.to):null}).filter(function(a){return!!a}).join(", ");return c.formatDay(parseInt(a,10))+": "+e}).join("\n")},b.prototype.formatHour=function(a){var b=a.hour>12?(a.hour-12).toString():a.hour.toString();return(b+=":"+(0===a.minute?"00":a.minute))+(a.hour>12?"pm":"am")},b.prototype.formatDay=function(b){switch(b){case a.WeekDay.Monday:return"Mon";case a.WeekDay.Tuesday:return"Tue";case a.WeekDay.Wednesday:return"Wed";case a.WeekDay.Thursday:return"Thu";case a.WeekDay.Friday:return"Fri";case a.WeekDay.Saturday:return"Sat";case a.WeekDay.Sunday:case a.WeekDay.SundayLastDayOfWeek:return"Sun"}},b.prototype.formatYear=function(a){return a&&a.getFullYear?a.getFullYear().toString():""},b.prototype.formatCopyrightMessage=function(a){return"©"+(new Date).getFullYear()+" by "+a+". Proudly created with Wix.com"},b.prototype.formatReview=function(a){if(!a)return a;var c=_.words(a);return c.length>b.MaxReviewWords?c.splice(0,b.MaxReviewWords)+"...":a},b.prototype.formatSocialLinks=function(a){var b=[];return a&&(b=a.map(function(a){return{platform:a.platform,url:a.Link.targetUrl}})),b},b}();b.MaxReviewWords=150,a.IntroDataFormatter=b,angular.module("siteGeneratorIntroInternal").service("introDataFormatter",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function a(){}return a.prototype.getUserValuesFromIntroData=function(a,b){return _.map(b,function(b){return"socialLinks"===b?{path:b,value:_.cloneDeep(_.filter(a.socialLinks,function(a){return!0===a.constForWixWiz}))}:{path:b,value:_.get(a,b)}})},a.prototype.isNewPlatform=function(a,b){return!_.find(a,function(a){return a.platform===b})},a.prototype.restoreUserValues=function(a,b){var c=this;_.each(b,function(b,d){"socialLinks"===b.path?_.each(b.value,function(b){c.isNewPlatform(a.socialLinks,b.platform)?a.socialLinks.push(_.cloneDeep(b)):_.map(a.socialLinks,function(a){return a.platform===b.platform&&(a.url=b.url),a})}):_.set(a,b.path,b.value)})},a.prototype.getFieldsToNotOverride=function(a,b,c){var d=this.getDiffBetweenTwoObjects(b,c),e=d.socialLinks;this.markSocialLinksToNotOverride(a,e);var f=_.map(d,function(a,b){return BusinessCardEditable.fieldToIntroManagerPath[b]});return f.push(BusinessCardEditable.fieldToIntroManagerPath.businessName),f},a.prototype.getDiffBetweenTwoObjects=function(a,b){function c(a,b){return _.transform(a,function(a,d,e){_.isEqual(d,b[e])||(a[e]=_.isObject(d)&&_.isObject(b[e])?c(d,b[e]):d)})}return c(a,b)},a.prototype.getUserValuesOfBusinessData=function(a){var b=BusinessCardEditable.getBusinessCardDataModel(a),c=BusinessCardEditable.initializedBusinessCardValues;return this.getFieldsToNotOverride(a,b,c)},a.prototype.markSocialLinksToNotOverride=function(a,b){var c=a.socialLinks;_.each(b,function(a){a&&_.each(c,function(b){b.url===a.url&&(b.constForWixWiz=!0)})})},a}();a.IntroDataManipulation=b,angular.module("siteGeneratorIntroInternal").service("introDataManipulation",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b){this.socialLinkManager=a,this.introDataFormatter=b,this.contentElementValueIntroMap=[{type:"GeneralDescription",mappings:[{key:"MainEmail",value:"contactDetails.email",maxLength:999,validation:function(a,b){return!!b}},{key:"BusinessName",value:"name"},{key:"BusinessType",value:"category.term",maxLength:50,forceMatchingPolicy:!1},{key:"BusinessTagline",value:"generalInfo.categories",validation:function(a,b){return b&&b.length>0},transform:this.introDataFormatter.formatCategories},{key:"BusinessTagline",value:"generalInfo.shortDescription",validation:function(a,b){return!a&&b&&b.length<=55}},{key:"BusinessTagline",value:"generalInfo.missionStatement",validation:function(a,b){return!a&&b&&b.length<=55}},{key:"Logo",value:"media.logos",defaultValue:[ContentDefaults.clipart,ContentDefaults.shape],transform:function(a){var b=a&&a.filter(function(a){return a.data});return b&&b.length>0?b.map(function(a){return a.data}).concat([ContentDefaults.shape]):[ContentDefaults.clipart,ContentDefaults.shape]},transformBack:function(a){return a.map(function(a){return{data:a,description:"",url:"https://static.wixstatic.com/media/"+a.relativeUri+"_srz_p_200_200_75_22_0.50_1.20_0.00_jpg_srz"}})}},{key:"CopyrightMessage",value:"name",transform:this.introDataFormatter.formatCopyrightMessage,forceMatchingPolicy:!1},{key:"YearFounded",value:"generalInfo.dateFounded",validation:function(a,b){return b},transform:this.introDataFormatter.formatYear,forceMatchingPolicy:!1}]},{type:"Contact",mappings:[{key:"address for google map",value:"contactDetails.address.fullAddress"},{key:"address for display",value:"contactDetails.address.fullAddress"},{key:"phone number",value:"contactDetails.phone",forceMatchingPolicy:!0},{key:"email",value:"contactDetails.email",maxLength:999,validation:function(a,b){return!!b}},{key:"fax",value:"contactDetails.fax",validation:function(a,b){return!!b}},{key:"Street",value:"contactDetails.address.street",forceMatchingPolicy:!1},{key:"City",value:"contactDetails.address.city",forceMatchingPolicy:!1},{key:"State",value:"contactDetails.address.state",forceMatchingPolicy:!1},{key:"Country",value:"contactDetails.address.country",forceMatchingPolicy:!1},{key:"ZipCode",value:"contactDetails.address.zipcode",forceMatchingPolicy:!1},{key:"Contact description",value:"generalInfo",validation:this.introDataFormatter.isValidContactDescription.bind(this.introDataFormatter),transform:this.introDataFormatter.formatContactDescription.bind(this.introDataFormatter)}]},{type:"Social",mappings:[{key:"SocialTitle",value:"name",maxLength:25},{key:"SocialButtons",value:"socialLinks",forceMatchingPolicy:!0,transform:this.introDataFormatter.createSocialButtons,transformBack:this.introDataFormatter.formatSocialLinks}]},{type:"Homepage_about",mappings:[{key:"AboutBody",value:"generalInfo.longDescription",validation:function(a,b){return b&&b.length<=400}},{key:"AboutBody",value:"generalInfo.companyOverview",validation:function(a,b){return!a&&b&&b.length<=400}},{key:"AboutBody",value:"generalInfo.generalInfo",validation:function(a,b){return!a&&b&&b.length<=400}},{key:"AboutBody",value:"generalInfo.bio",validation:function(a,b){return!a&&b&&b.length<=400}}]},{type:"Inner_about",mappings:[{key:"AboutBody",value:"generalInfo.longDescription",validation:function(a,b){return b&&b.length>400}},{key:"AboutBody",value:"generalInfo.companyOverview",validation:function(a,b){return!a&&b&&b.length>400}},{key:"AboutBody",value:"generalInfo.generalInfo",validation:function(a,b){return!a&&b&&b.length>400}},{key:"AboutBody",value:"generalInfo.bio",validation:function(a,b){return!a&&b&&b.length>400}}]},{type:"OpeningHours",mappings:[{key:"OpeningHoursDescription",value:"contactDetails.openingHours",validation:this.introDataFormatter.isValidOpeningHours.bind(this.introDataFormatter),transform:this.introDataFormatter.formatOpeningHours.bind(this.introDataFormatter),forceMatchingPolicy:!1}]},{type:"Welcome",mappings:[{key:"WelcomeBody",value:"generalInfo.shortDescription",validation:function(a,b){return b&&b.length>=56}},{key:"WelcomeMedia",value:"media.cover.data",validation:function(a,b){return b},array:!0,append:!0}]},{type:"Testimonial",mappings:[{key:"CustomerName",value:"reviews[0].author",validation:function(a,b){return b&&b.length>0}},{key:"CustomerQuote",value:"reviews[0].message",validation:function(a,b){return b&&b.length>0},transform:this.introDataFormatter.formatReview}]}]}return a.$inject=["socialLinkManager","introDataFormatter"],a.prototype.enrichIntroData=function(a,b){var c=this,d=b.type,e=_.find(this.contentElementValueIntroMap,function(a){return a.type===d});e&&_.forEach(e.mappings,function(d){var e=_.pick(b.values,d.key);if(e&&e[d.key])if(d.array)_.set(a,d.value,e[d.key].value[0]);else{var f=e[d.key].value;_.set(a,d.value,d.transformBack?d.transformBack.call(c,f):f)}})},a.prototype.enrichContentElement=function(a,b,c){var d=this,e=a.type,f=_.find(this.contentElementValueIntroMap,function(a){return a.type===e}),g=!1;return _.forEach(f.mappings,function(e){var f=_.pick(a.values,e.key),h=_.get(b,e.value);d.enrichFieldValue(f,h,e)&&(c||(void 0===e.forceMatchingPolicy?a.getArgsMatchingPolicy()[e.key]=!!f[e.key].value:e.forceMatchingPolicy&&(a.getArgsMatchingPolicy()[e.key]=!0)),g=!0)}),a.valuesByMediaType=void 0,g},a.prototype.enrichFieldValue=function(a,b,c){if(!a||!_.has(a,c.key)||!a[c.key])return!1;if(c.validation&&!c.validation(a[c.key].value,b))return!1;if((!b||0===b.length)&&c.defaultValue)return a[c.key].value=c.defaultValue,!0;if(b&&c.maxLength&&(b=b.substring(0,c.maxLength)),b&&c.transform&&(b=c.transform.bind(this,b)()),c.array){var d=b?[b]:[];if(c.append){var e=a[c.key].value||[];a[c.key].value=e.concat(d)}else if(c.prepend){var e=a[c.key].value||[];a[c.key].value=d.concat(e)}else a[c.key].value=d}else a[c.key].value=b;return!0},a}();a.IntroContentElementGenerator=b,angular.module("siteGeneratorIntroInternal").service("introContentElementGenerator",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=this;this.introManager=a,this.modelTree=b,this.wixWizDataManager=c,this.introContentElementGenerator=d,this.$q=e,this.contentManager=f,this.contentSource=g,this.mediaGallery=h,this.flags=i,this.fieldsMasks=j,this.richTextService=k,this.richTextLinks=l,this.layoutSolver=m,this.sitePartTypes=n,this.nodeManipulationService=o,this.updateIntroMediaData=function(a){if(_.isEmpty(a))return p.introManager.data;var b=p.introManager.data.media,c=0;return b.logos&&b.logos.length&&b.logos.filter(function(a){return!!a.url&&!a.localFile}).forEach(function(b){b.data=a[c],b.data.mediaType="clipart",c++}),b.cover&&b.cover.url&&(b.cover.data=a[c]),p.introManager.data},this.isLoadedDefer=this.$q.defer(),this.updateLogoPromise=this.$q.when()}return a.$inject=["introManager","modelTree","wixWizDataManager","introContentElementGenerator","$q","contentManager","contentSource","mediaGallery","flags","fieldsMasks","richTextService","richTextLinks","layoutSolver","sitePartTypes","nodeManipulationService"],a.prototype.loaded=function(){return this.$q.all([this.isLoadedDefer.promise,this.updateLogoPromise])},a.prototype.generateAll=function(){var a=this;return this.prepareLogoData().then(function(){return a.createNodes()}).then(function(){return a.isLoadedDefer.resolve()})},a.prototype.prepareLogoData=function(){if(!this.prepareLogoDataPromise){var a=this.extractMediaUrlsOfLogos(this.introManager.data);_.isEmpty(a)?this.prepareLogoDataPromise=this.$q.when({}):this.prepareLogoDataPromise=this.wixWizDataManager.uploadMedia(a).then(this.updateIntroMediaData)}return this.prepareLogoDataPromise},a.prototype.extractMediaUrlsOfLogos=function(a){var b=[];return a.media?(a.media.logos&&a.media.logos.length&&a.media.logos.filter(function(a){return!!a.url&&!a.localFile}).forEach(function(a){b.push(a.url)}),a.media.cover&&a.media.cover.url&&b.push(a.media.cover.url),b):[]},a.prototype.createNodes=function(){this.generateBaseNode("Social");var a=this.generateStaticContentBasedNode("GeneralDescription");this.contentManager.buildContentMap();var b=this.generateStaticContentBasedNode("Contact");this.contentManager.buildContentMap(),this.generateContentBasedNode("OpeningHours"),this.generateContentBasedNode("Homepage_about",3),this.generateContentBasedNode("Inner_about",3),this.generateContentBasedNode("Welcome",3),this.generateTestimonialNodeList(),this.flags.fieldsMasks?(this.updateHeaderMasks(a),this.addLinkToHomePage("BusinessName"),this.updateContactMasks(b),this.updateFooterMasks()):(this.updateHeaderFieldsVisiblity(a),this.updateContactFieldsVisiblity(b),this.updateFooterFieldsVisibility())},a.prototype.addLinkToHomePage=function(a){var b={isPageRef:!0,targetPage:this.modelTree.homePageId},c=this.richTextLinks.addLink(b),d=this.modelTree.getGeneralInformation(),e=d.contentElement.getFieldValue(a),f=_.htmlEncode(e.value);e.value=this.richTextService.markRichText('<p class="font_7"><span style="text-decoration:none;"><a adilinkid="'+c+'">'+f+"</a></span></p>")},a.prototype.updateHeaderMasks=function(a){this.fieldsMasks.update(a),this.hideHeaderMedia(a),this.modelTree.updateFieldsVisibility(a)},a.prototype.updateContactMasks=function(a){var b=a.getContentElement();b&&_.has(b,"values.Contact description")&&(b.values["Contact description"].name="Contact description"),this.fieldsMasks.update(a),this.modelTree.updateFieldsVisibility(a)},a.prototype.updateFooterMasks=function(){var a=_.find(this.modelTree.footerNode&&this.modelTree.footerNode.children,{contentElementType:"GeneralDescription"});a&&(this.fieldsMasks.update(a),this.modelTree.updateFieldsVisibility(a))},a.prototype.updateLogo=function(){var a=this;return this.updateLogoPromise=this.isLoadedDefer.promise.then(function(){var b=a.generateStaticContentBasedNode("GeneralDescription",!1);a.flags.fieldsMasks?(a.updateHeaderMasks(b),a.addLinkToHomePage("BusinessName")):a.updateHeaderFieldsVisiblity(b)}),this.updateLogoPromise},a.prototype.generateBaseNode=function(a){var b=this.getNodeByType(a);return this.setupNode(b)},a.prototype.generateContentBasedNode=function(b,c){var d=this;return void 0===c&&(c=1),_.range(c).map(function(c){var e=d.getNodeByType(b,!1,!0);return e.source=a.WixWixSource,d.setupNode(e,!0,1,!0,c)})},a.prototype.generateStaticContentBasedNode=function(a,b){void 0===b&&(b=!0);var c=this.getNodeByType(a);return this.setupNode(c,b,2,!1)},a.prototype.generateTestimonialNodeList=function(){var b=this;if(this.introManager.data.reviews&&0!==this.introManager.data.reviews.length){var c=this.introManager.data.reviews,d=ob.deepClone(c),e=this.getNodeByType("Testimonial",!0);return e.source=a.WixWixSource,_.filter(e.children,function(a){return"Testimonial"===a.getContentElementType()}).forEach(function(a,d){b.setupNode(a,!0,1,!1,d),c.splice(0,1)}),this.introManager.data.reviews=d,e}},a.prototype.setupNode=function(a,b,c,d,e){void 0===b&&(b=!1),void 0===c&&(c=0),void 0===d&&(d=!1),void 0===e&&(e=0);var f=a.getContentElement();if(b){var g=a.getContentElementType(),h=this.contentManager.getAliasForType(g),i=this.prepareCEDrafts(h,g,e);i&&i.length>0&&this.overrideCEValues(f,i[0])}var j=ob.deepClone(f.values),k=this.introContentElementGenerator.enrichContentElement(f,this.introManager.data);if(d&&(!k||!this.didContentElementChange(j,f.values)))return this.nodeManipulationService.deleteNode(a,void 0,!0),null;var l=a.getArgsMatchingPolicy();switch(c){case 1:_.keys(l).forEach(function(a){return delete l[a]});break;case 2:_.keys(l).forEach(function(a){"Contact map title"!==a&&(l[a]=!0)})}return this.modelTree.updateFieldsVisibility(a,null,null,!0,1===c),a},a.prototype.prepareCEDrafts=function(a,b,c){var d={rawSectionBrief:{id:a,ceType:b,cardinality:1}};return this.contentSource.prepareDrafts(d,1,c)},a.prototype.overrideCEValues=function(a,b){_.keys(a.values).forEach(function(c){_.has(b.values,c)&&(a.values[c].value=b.values[c].value)})},a.prototype.updateContactFieldsVisiblity=function(a){var b=a.getContentElement();b&&_.has(b,"values.Contact description")&&(b.values["Contact description"].name="Contact description"),a.getReferenceFields()["Social.SocialButtons"]=!0,this.modelTree.updateReferenceFieldsVisibility(a,"Social.SocialButtons",!0),a.argsMatchingPolicy["address for display"]=!0,this.modelTree.updateFieldsVisibility(a,null,"address for display",!0),a.argsMatchingPolicy["address for google map"]=!0,this.modelTree.updateFieldsVisibility(a,null,"address for google map",!0),this.modelTree.updateFieldsVisibility(a)},a.prototype.updateHeaderFieldsVisiblity=function(a){var b=a.getReferenceFields();b["Social.SocialButtons"]=!0,this.modelTree.updateReferenceFieldsVisibility(a,"Social.SocialButtons",!0),b["Contact.phone number"]=!0,this.modelTree.updateReferenceFieldsVisibility(a,"Contact.phone number",!0),a.argsMatchingPolicy.BusinessTagline=this.introManager.isBusinessTagLineExists(),a.argsMatchingPolicy.Logo=this.introManager.isLogoExists(),this.hideHeaderMedia(a),this.modelTree.updateFieldsVisibility(a)},a.prototype.updateFooterFieldsVisibility=function(){var a=_.find(this.modelTree.footerNode&&this.modelTree.footerNode.children,{contentElementType:"GeneralDescription"});if(a){var b=a.getReferenceFields();a.argsMatchingPolicy.CopyrightMessage=!0,this.modelTree.updateFieldsVisibility(a,null,"CopyrightMessage",!0),a.argsMatchingPolicy.BusinessName=!1,this.modelTree.updateFieldsVisibility(a,null,"BusinessName",!1),a.argsMatchingPolicy.MainEmail=this.introManager.isEmailExists(),this.modelTree.updateFieldsVisibility(a,null,"MainEmail",!1),b["Contact.phone number"]=this.introManager.isPhoneExists(),this.modelTree.updateReferenceFieldsVisibility(a,"Contact.phone number",!1),b["Contact.fax"]=this.introManager.isFaxExists(),this.modelTree.updateReferenceFieldsVisibility(a,"Contact.fax",!1),b["Social.SocialButtons"]=!0,this.modelTree.updateReferenceFieldsVisibility(a,"Social.SocialButtons",!0),b["Contact.address for display"]=this.introManager.isAddressExists(),this.modelTree.updateReferenceFieldsVisibility(a,"Contact.address for display",!1),this.modelTree.updateFieldsVisibility(a)}},a.prototype.hideHeaderMedia=function(a){var b=this;a.hiddenMedia?a.hiddenMedia.shape||(a.hiddenMedia.shape={}):a.hiddenMedia={},_.forEach(a.contentElement.values.Logo.value,function(c){"shape"===c.mediaType&&(a.hiddenMedia.shape[b.mediaGallery.getItemId(c)]=!0)}),a.contentElement.fillValuesByMediaType()},a.prototype.createNodeByType=function(a,b){void 0===b&&(b=!1);var c=this.modelTree.getAvailableNodes(),d=_.find(c,{contentElementType:a});return b?d:_.first(d&&d.children)||d},a.prototype.getNodeByType=function(a,b,c){void 0===b&&(b=!1),void 0===c&&(c=!1);var d=_.find(this.modelTree.data.children,{contentElementType:a});if(c||!d){var e=this.createNodeByType(a,b);return this.modelTree.addNodeToTree(e)}return d},a.prototype.didContentElementChange=function(a,b){return a!==b},a}();b.WixWixSource="social",a.IntroModelTree=b,angular.module("siteGeneratorIntroInternal").service("introModelTree",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a){var b=this;this.$window=a,this.on=function(a,c){return b.$window.addEventListener(a,c)},this.off=function(a,c){return b.$window.removeEventListener(a,c)},this.trigger=function(a){return angular.element(b.$window).trigger(a)},this.userTimezone=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone}}return a.$inject=["$window"],a.prototype.back=function(){this.$window.history.go(-1)},a.prototype.getWindowDimensions=function(){return{windowWidth:this.$window.innerWidth,windowHeight:this.$window.innerHeight}},a.prototype.getAnimationBoxDimensions=function(b){var c=this.getWindowDimensions(),d=c.windowWidth,e=c.windowHeight,f=Math.floor(.42*d);f=Math.max(f,714),f=Math.min(f,806);var g=a.CONTENT_WIDTH,h=Math.floor(.7*(f-g)+b);return{y:Math.floor((e-h)/2),x:Math.floor((d-f)/2),width:f,height:h}},a.prototype.getContentPosition=function(b,c){var d=this.getWindowDimensions(),e=d.windowWidth,f=d.windowHeight,g=a.CONTENT_WIDTH;return{x:Math.floor((e-g)/2),y:Math.floor((f-c)/2),spacing:(b.width-g)/2}},a}();b.CONTENT_WIDTH=522,a.IntroWindow=b,angular.module("siteGeneratorIntroInternal").service("introWindow",b)}(intro||(intro={}));var WizUtils=function(){function a(a,b){this.miscUtils=a,this.siteConverterConf=b}return a.$inject=["miscUtils","siteConverterConf"],a.prototype.isSingleBlockSection=function(a){return"single"===a.type},a.prototype.isListSection=function(a){return"list"===a.type},a.prototype.isGrid=function(a){return"grid"===a.list_type},a.prototype.isSlideshow=function(a){return a&&"slideshow"===a.list_type},a.prototype.isHorizontalList=function(a){return a&&"horizontal"===a.list_type},a.prototype.isVerticalList=function(a){return a&&"vertical"===a.list_type},a.prototype.hasNoText=function(a){return!a.title&&this.hasNoExtraText(a)},a.prototype.hasNoExtraText=function(a){return!a.subtitle&&!a.paragraph},a.prototype.hasMediaWithoutLink=function(a){return this.hasMedia(a)&&!a.media.link},a.prototype.hasMedia=function(a){return a.media&&a.media.length},a.prototype.isFixedPositioned=function(a){return"fixed"===_.get(a,"position.type")},a.prototype.isHorizontalListPreset=function(a){return a.preset.data.itemsInRow>1},a.prototype.isVerticalListPreset=function(a){return!a.preset.data.itemsInRow||1===a.preset.data.itemsInRow},a.prototype.isStripGalleryPreset=function(a){return!0},a.prototype.isGridGalleryPreset=function(a){return!0},a.prototype.getHorizontalListPresets=function(a){var b=this;return a.filter(function(a){return b.isHorizontalListPreset(a)})},a.prototype.getVerticalListPresets=function(a){var b=this;return a.filter(function(a){return b.isVerticalListPreset(a)})},a.prototype.getStripGalleryPresets=function(a){var b=this;return a.filter(function(a){return b.isStripGalleryPreset(a)})},a.prototype.getGridGalleryPresets=function(a){var b=this;return a.filter(function(a){return b.isGridGalleryPreset(a)})},a.prototype.isSideList=function(a,b){return a.position&&a.position.width<b.pages[0].dimension.width/2},a.prototype.isListOfImages=function(a){var b=this;return a.list.every(function(a){return b.isMainlyMedia(a)})},a.prototype.isMainlyMedia=function(a){return this.hasNoExtraText(a)&&!this.hasButton(a)&&this.hasMediaWithoutLink(a)},a.prototype.hasButton=function(a){return!!a.button},a.prototype.shouldTransformListToGallery=function(a){return this.isListSection(a)&&this.isListOfImages(a)&&!this.isSlideshow(a)&&!this.isHorizontalList(a)},a.prototype.transformListToGallery=function(a){return{type:"single",media:_.flattenDeep(a.list.map(function(a){return a.media.filter(function(a){return!a.background}).map(function(b){return b.title=a.title,b})})),mediaDisplayType:"gallery",migratedListType:a.list_type}},a.prototype.hasOnlySmallMedia=function(a){var b=this;return this.isListSection(a)?a.list&&a.list.every(function(a){return b.singleSectionHasSmallMedia(a)}):this.singleSectionHasSmallMedia(a)},a.prototype.singleSectionHasSmallMedia=function(a){var b=this;return a.media&&a.media.every(function(a){return Math.min(a.realWidth,a.width)<=b.siteConverterConf.SMALL_IMAGE_WIDTH_HIGH_BOUNDARY})},a}();angular.module("siteGeneratorIntroInternal").service("wizUtils",WizUtils);var __awaiter=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){a.done?e(a.value):new c(function(b){b(a.value)}).then(g,h)}i((d=d.apply(a,b||[])).next())})},__generator=this&&this.__generator||function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,f&&(g=f[2&c[0]?"return":c[0]?"throw":"next"])&&!(g=g.call(f,c[1])).done)return g;switch(f=0,g&&(c=[0,g.value]),c[0]){case 0:case 1:g=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,f=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(g=i.trys,!(g=g.length>0&&g[g.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!g||c[1]>g[0]&&c[1]<g[3])){i.label=c[1];break}if(6===c[0]&&i.label<g[1]){i.label=g[1],g=c;break}if(g&&i.label<g[2]){i.label=g[2],i.ops.push(c);break}g[2]&&i.ops.pop(),i.trys.pop();continue}c=b.call(a,i)}catch(a){c=[6,a],f=0}finally{e=g=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e,f,g,h,i={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return h={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h},WizWebsite=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){this.$q=a,this.introManager=b,this.wizWebsiteLoader=c,this.mediaOverride=d,this.contentElementGenerator=e,this.miscUtils=f,this.defaultSections=g,this.$injector=h,this.flags=i,this.wizUtils=j,this.wixWizDataManager=k,this.imageScore=l,this.consumerBiLogger=m,this.consumerBiLoggerHelpers=n,this.importSiteContent=o,this.siteConverterLogs=p,this.siteConverterConf=q,this.FullSiteDataTimeoutResponse=4e4,this.importSiteBlacklistDomains=[],this.siteConverterProgressSteps=["builder.progress-bar.step-message.sc-adding-header-and-footer","builder.progress-bar.step-message.sc-arranging-text-images","builder.progress-bar.step-message.sc-adding-site-colors","builder.progress-bar.step-message.sc-adding-site-fonts"],this.importDetails={FullDataImported:"full-data-imported"},this.flags.wizSiteConverter&&(this.flags.listItemSlideShow=!0,this.flags.presetSettings=!0)}return a.$inject=["$q","introManager","wizWebsiteLoader","mediaOverride","contentElementGenerator","miscUtils","defaultSections","$injector","flags","wizUtils","wixWizDataManager","imageScore","consumerBiLogger","consumerBiLoggerHelpers","importSiteContent","siteConverterLogs","siteConverterConf"],a.prototype.uploadMedia=function(a){return this.log("uploading media"),this.wizContentManager.uploadMedia(a)},a.prototype.waitForMediaUpload=function(){return this.log("waiting for media upload"),this.wizContentManager.prepareMedia()},a.prototype.uploadImportedData=function(a,b,c){var d=this;this.wizContentManager=this.$injector.get("wizContentManager"),this.loggerId=Math.round(1e3*Math.random()),this.log("wixwiz data, before processing",_.clone(a)),this.flags.debugWizSiteConverter&&(window.siteConverter={before:_.cloneDeep(a.pages[0].sections)});var e=a.pages[0].images.length;return this.getFullSiteData(b,c).then(function(){return d.removeLowConfidenceSections(a)}).then(function(){return d.uploadMedia(a)}).then(function(){return d.waitForMediaUpload()}).then(function(a){d.log("uploaded media",{mediaToUpload:e,successfullyUploaded:a.length}),d.mediaItems=a}).then(function(){return d.runPreTransforms(a)}).then(function(a){return d.runAsyncTransforms(a)}).then(function(a){if(!d.shouldContinueToConvertSite(a))throw d.log("not converting site, NOGO",a),"not converting site";return a}).then(function(a){return d.runPostTransforms(a)}).then(function(a){return d.takeTopSections(a)}).then(function(a){return d.setImportedSite(a)}).then(function(){return d.doneLoading()}).catch(function(a){d.errorInLoading(a)})},a.prototype.preloadFullSiteData=function(a,b){var c=this;this.startLoading(),this.consumerBiLoggerHelpers.resetLoadTime(),this.consumerBiLogger.intro.siteConverterPhaseInImportStart(ImportSiteContent.phasesNames.SiteFullDataImport),this.siteConverterLogs.trace(this.siteConverterLogs.defaultLoggerId,"requesting wixwiz fullsite data"),this.preloadedFullSiteDataPromise={url:a,title:b,promise:this.importSiteContent.getFullSiteData(a,b,this.FullSiteDataTimeoutResponse).then(function(a){return c.consumerBiLogger.intro.siteConverterPhaseInImportComplete(c.importDetails.FullDataImported,ImportSiteContent.phasesNames.SiteFullDataImport),c.$q.resolve(a)})}},a.prototype.getFullSiteData=function(a,b){return this.preloadedFullSiteDataPromise&&this.preloadedFullSiteDataPromise.url===a&&this.preloadedFullSiteDataPromise.title===b||this.preloadFullSiteData(a,b),this.preloadedFullSiteDataPromise.promise},a.prototype.isImportUrlAllowed=function(a){return!_.find(this.importSiteBlacklistDomains,function(b){return a.indexOf(b)>-1})},a.prototype.postloadFullSiteData=function(a,b){var c=this;this.preloadedFullSiteDataPromise&&this.isImportUrlAllowed(a)&&this.preloadedFullSiteDataPromise.promise.then(function(d){return c.uploadImportedData(d,a,b)}).catch(function(a){c.siteConverterLogs.trace(c.siteConverterLogs.defaultLoggerId,"error in getFullSiteData"),c.errorInLoading(a)})},a.prototype.startLoading=function(){this.shouldConvertSite=!0,this.loadPromise=this.$q.defer()},a.prototype.doneLoading=function(){this.loadPromise.resolve()},a.prototype.errorInLoading=function(a){this.shouldConvertSite=!1,this.loadPromise.reject(a)},a.prototype.waitForSiteConverter=function(){return this.loadPromise.promise},a.prototype.setPlatformAllowed=function(a){this.platformAllowed=a},a.prototype.isPlatformAllowed=function(){return this.platformAllowed},a.prototype.setImportedSite=function(a){this.log("wixwiz data, after processing",a),this.lastLoadedSite=a,this.flags.debugWizSiteConverter&&window.siteConverter&&(window.siteConverter.after=a.pages[0].sections)},a.prototype.shouldContinueToConvertSite=function(a){return a.pages[0].sections.length>=this.siteConverterConf.MINIMUM_VIABLE_SECTIONS},a.prototype.runPreTransforms=function(a){return this.log("running preTransforms"),this.transform(a,[this.setRealMediaWidth,this.removeExcessSections,this.removeFixedPositionedSections,this.removeBadMedia,this.removeSingleSectionsWithButtonOnly,this.removeSingleSectionsWithShortParagraphOnly,this.changeSlideshowWithSmallMediaToHorizontalList])},a.prototype.changeSlideshowWithSmallMediaToHorizontalList=function(a){var b=this;return this.log("checking slideshow image size"),a.pages[0].sections.filter(this.wizUtils.isSlideshow).forEach(function(a){b.wizUtils.hasOnlySmallMedia(a)?(a.list_type="horizontal",b.siteConverterLogs.trace(b.siteConverterLogs.defaultLoggerId,"small image slideshow, changing to horizontal",a)):b.siteConverterLogs.trace(b.siteConverterLogs.defaultLoggerId,"big image slideshow, not changing")}),a},a.prototype.runAsyncTransforms=function(a){return __awaiter(this,void 0,void 0,function(){var b=this;return __generator(this,function(c){switch(c.label){case 0:return this.log("running asyncTransforms"),[4,_.sequencePromises([this.selectSectionMedia],function(c){return a=c.call(b,a)})];case 1:return c.sent(),[2,a]}})})},a.prototype.runPostTransforms=function(a){return this.log("running postTransforms"),this.transform(a,[this.transformListWithOnlyImagesToGallery,this.handleMediaInAllListSections,this.prepareFirstSectionAsWelcome])},a.prototype.transform=function(a,b){var c=this;try{b.forEach(function(b){a=b.call(c,a)})}catch(a){this.siteConverterLogs.trace(this.siteConverterLogs.defaultLoggerId,"SiteConverter: error",a)}return a},a.prototype.populateSectionWithCMSTitle=function(a){var b=this.generateWelcomeCE();a.title=b.getFieldValueByType("text","title",!0)},a.prototype.populateSectionWithCMSMedia=function(a){var b=this.generateWelcomeCE();a.media=b.getFieldValueByType("media","image",!0)},a.prototype.generateWelcomeCE=function(){return this.contentElementGenerator.generate(this.defaultSections.getSectionOfceType("Welcome"),0)},a.prototype.generateWelcomeWizSection=function(){var a=this.generateWelcomeCE();return{type:"single",title:a.getFieldValueByType("text","title",!0),subtitle:a.getFieldValueByType("text","subTitle",!0),paragraph:a.getFieldValueByType("text","longText",!0),media:a.getFieldValueByType("media","image",!0)}},a.prototype.hasOnlyButton=function(a){return!a.media&&!a.paragraph&&!a.title&&!a.subtitle&&a.button},a.prototype.hasOnlyShortParagraph=function(b){return!b.button&&!b.media&&!b.title&&!b.subtitle&&b.paragraph&&b.paragraph.length<a.MINIMUM_PARAGRAPH_LENGTH},a.prototype.getSite=function(){return this.lastLoadedSite},a.prototype.isConvertingSite=function(){return this.flags.wizSiteConverter&&this.shouldConvertSite},a.prototype.removeSingleSectionsWithShortParagraphOnly=function(a){var b=this,c=a.pages[0].sections.length;a.pages.forEach(function(a){return a.sections=a.sections.filter(function(a){return!(b.wizUtils.isSingleBlockSection(a)&&b.hasOnlyShortParagraph(a))})});var d=a.pages[0].sections.length
;return this.log("removed single sections with short paragraph only",{before:c,after:d}),a},a.prototype.handleListSectionByMedia=function(a){var b=a.list.filter(function(a){return a.media&&!!a.media.length}),c=b.length;c&&c<a.list.length&&(this.halfOrMoreHasMedia(c,a.list.length)&&c>=2?a.list=b:(this.log("less than half of the list items have a media, reseting media for all"),a.list=a.list.map(function(a){return a.media=[],a})))},a.prototype.handleMediaInAllListSections=function(a){var b=this;return this.log("handling list section media"),a.pages.forEach(function(a){a.sections.filter(function(a){return b.wizUtils.isListSection(a)}).forEach(function(a){b.handleListSectionByMedia(a)})}),a},a.prototype.removeSingleSectionsWithButtonOnly=function(a){var b=this,c=a.pages[0].sections.length;a.pages.forEach(function(a){return a.sections=a.sections.filter(function(a){return!(b.wizUtils.isSingleBlockSection(a)&&b.hasOnlyButton(a))})});var d=a.pages[0].sections.length;return this.log("removed single sections with button only",{before:c,after:d}),a},a.prototype.prepareFirstSectionAsWelcome=function(a){var b=this;this.log("preparing first section as welcome");var c=_.first(a.pages[0].sections.filter(function(a){return b.wizUtils.isSingleBlockSection(a)||b.wizUtils.isListSection(a)}));return!this.wizUtils.isListSection(c)||this.wizUtils.isSlideshow(c)||this.wizUtils.isGrid(c)||(this.log("adding a welcome section from the CMS"),a.pages[0].sections.unshift(this.generateWelcomeWizSection())),this.wizUtils.hasNoText(c)&&(this.log("no text, populating title from CMS"),this.populateSectionWithCMSTitle(c)),this.wizUtils.hasMedia(c)||(this.log("no media, populating from CMS"),this.populateSectionWithCMSMedia(c)),a},a.prototype.transformListWithOnlyImagesToGallery=function(a){var b=this;this.log("checking if we should transform a list with only images to gallery");var c=this.miscUtils.JSONClone(a);return c.pages.forEach(function(a){a.sections=a.sections.map(function(a){return b.wizUtils.shouldTransformListToGallery(a)?(b.log("transforming list to gallery"),b.wizUtils.transformListToGallery(a)):a})}),c},a.prototype.removeFixedPositionedSections=function(a){var b=this,c=a.pages[0].sections.length;a.pages.forEach(function(a){a.sections=a.sections.filter(function(a){return!b.wizUtils.isFixedPositioned(a)})});var d=a.pages[0].sections.length;return this.log("removed fixed position elements",{before:c,after:d}),a},a.prototype.composeNodeTitle=function(a,b,c){if(a&&a.contentElement&&a.contentElement.values){var d=this.getCEValueBySubType(a,"title");if(d&&d.value&&a.argsMatchingPolicy[d.name])return d.value}return c+" "+(b+1)},a.prototype.getCEValueBySubType=function(a,b){return _.find(a.contentElement.values,{subType:b})},a.prototype.createContactPage=function(){return this.$injector.get("wizContentManager").contactPage},a.prototype.setRealMediaWidth=function(a){var b=this;return a.pages[0].sections.forEach(function(a){b.wizUtils.isListSection(a)?a.list.forEach(function(a){b.setRealMediaWidthForSingle(a)}):b.setRealMediaWidthForSingle(a)}),this.log("set real media width"),a},a.prototype.setRealMediaWidthForSingle=function(a){var b=this;a.media&&a.media.forEach(function(a){var c=b.getUploadedImage(a.src);a.realHeight=c.height,a.realWidth=c.width})},a.prototype.removeExcessSections=function(a){var b=this,c=a.pages[0].sections.length;a.pages[0].sections=a.pages[0].sections.filter(function(a){return b.wizUtils.isSingleBlockSection(a)||b.wizUtils.isListSection(a)});var d=a.pages[0].sections.length;return this.log("removed excess sections",{before:c,after:d}),a},a.prototype.removeBadMedia=function(a){return this.log("removing bad media"),a},a.prototype.selectSectionMedia=function(a){return __awaiter(this,void 0,void 0,function(){var b,c=this;return __generator(this,function(d){switch(d.label){case 0:return this.log("selecting section media by score"),b=_.flatten(a.pages[0].sections.map(function(a){return c.wizUtils.isListSection(a)?c.selectListSectionMedia(a):c.selectSingleSectionMedia(a)})),[4,Promise.all(b)];case 1:return d.sent(),[2,a]}})})},a.prototype.selectListSectionMedia=function(a){var b=this;return a.list.map(function(a){return b.selectSingleSectionMedia(a)})},a.prototype.selectSingleSectionMedia=function(a){return __awaiter(this,void 0,void 0,function(){var b,c,d=this;return __generator(this,function(e){switch(e.label){case 0:return b=a.media,b?[4,Promise.all(this.scoreMediaItems(b,a)).then(function(a){d.log("scoredMediaItems",{scoredMediaItems:a}),a=_.filter(a);var b=a.filter(function(a){return a.score>0});if(d.log("valid media items",{validMediaItems:b}),!b.length)return[];if(1===b.length)return d.log("only one valid media item, returning it"),[b[0].mediaItem];var c=d.getLargestMediaOfSameSize(b);return d.log("largest medias",{largestMediaOfSameSize:c}),c})]:(this.log("no media found",{section:a}),[2]);case 1:return c=e.sent(),a.media=c,[2]}})})},a.prototype.getUploadedImage=function(a){return this.mediaItems.filter(function(b){return b.sourceUrl===a})[0]},a.prototype.scoreMediaItems=function(a,b){var c=this;return this.log("scoring media",{mediaItems:a,wizSection:b}),a.filter(function(a){return"image"===a.type}).map(function(a){return __awaiter(c,void 0,void 0,function(){var b,c;return __generator(this,function(d){switch(d.label){case 0:return b=this.getUploadedImage(a.src),(this.log("uploaded media item",{uploadedMediaItem:b}),b)?(this.log("scoring image",{uploadedMediaItem:b,mediaItem:a}),c={mediaItem:a},[4,this.imageScore.imageScoreFromImageUrl("https://static.wixstatic.com/"+b.fileUrl)]):[2];case 1:return[2,(c.score=d.sent(),c.size=b.width*b.height,c)]}})})})},a.prototype.removeLowConfidenceSections=function(a){var b=this,c=a.pages[0].sections.length;a.pages[0].sections=a.pages[0].sections.filter(function(a){return b.wizUtils.isListSection(a)?(a.list=a.list.filter(function(a){return void 0===a.confidence||a.confidence>=b.siteConverterConf.SECTION_CONFIDENCE_LEVEL_THRESHOLD}),a.list.length>0):void 0===a.confidence||a.confidence>=b.siteConverterConf.SECTION_CONFIDENCE_LEVEL_THRESHOLD});var d=a.pages[0].sections.length;return this.log("removed low confidenceSections",{before:c,after:d}),a},a.prototype.getLargestMediaOfSameSize=function(a){return this.log("getting largest media items"),_.takeWhile(a.sort(function(a,b){return b.size-a.size}),function(a,b,c){return 0===b||a.size===c[b-1].size}).map(function(a){return a.mediaItem})},a.prototype.takeTopSections=function(b){return b.pages[0].sections=b.pages[0].sections.slice(0,a.MAX_SECTIONS),this.log("taking top sections",b.pages[0].sections),b},a.prototype.halfOrMoreHasMedia=function(a,b){return a>=b/2},a.prototype.log=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];(d=this.siteConverterLogs).trace.apply(d,[this.loggerId,a].concat(b));var d},a}();WizWebsite.MINIMUM_PARAGRAPH_LENGTH=50,WizWebsite.MAX_SECTIONS=10,angular.module("siteGeneratorIntroInternal").service("wizWebsite",WizWebsite);var WizWebsiteLoader=function(){function a(a,b,c){this.$http=a,this.$log=b,this.$q=c}return a.$inject=["$http","$log","$q"],a.prototype.load=function(a){var b=this,c=this.$q.defer();return this.$http.get("http://www.wixstaging.com/_api/wixwiz-algo-server/analyzesite?adi=true&ashtml=false&isExternal=true&url="+a).then(function(a){a.data.error?(b.$log.error("SiteConverter Error: Toffee returned error object"),c.reject(a.data.error)):c.resolve(a.data)},function(a){c.reject(a)}),c.promise},a}();angular.module("siteGeneratorIntroInternal").service("wizWebsiteLoader",WizWebsiteLoader);var WizPresetsFilter=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){this.flags=a,this.miscUtils=b,this.presetPreviewGenerator=c,this.presetListItemFeatureDetector=d,this.$injector=e,this.PresetMediaType=f,this.slideShowService=g,this.wizUtils=h,this.wizWebsite=i,this.lssModifier=j,this.applicationParameters=k,this.mediaOverrideManager=l,this.presetFeatureDetector=m,this.slideShowPresetUtils=n,this.modelTree=o,this.presetsStrategyFactory=p,this.siteConverterLogs=q,this.PresetMediaTypeNames=_.invert(this.PresetMediaType),this.MAX_PREVIEWS_TO_CALCULATE=10,this.SMALL_IMAGE_WIDTH=200,this.SMALL_IMAGE_FACTOR=3,this.LARGE_IMAGE_FACTOR=1.2,this.MEDIA_WIDTH_PERFECT_MATCH_MAX_STRETCH=1.15,this.strategy=this.getPresetsStrategy()}return a.$inject=["flags","miscUtils","presetPreviewGenerator","presetListItemFeatureDetector","$injector","PresetMediaType","slideShowService","wizUtils","wizWebsite","lssModifier","applicationParameters","mediaOverrideManager","presetFeatureDetector","slideShowPresetUtils","modelTree","presetsStrategyFactory","siteConverterLogs"],a.prototype.getPreviewForWizSiteContent=function(a,b,c){return b.isList()?this.getListPreview(a,b,c):this.getSinglePreview(a,b,c)},a.prototype.getListPreview=function(a,b,c){var d=this,e=_.random(100);this.siteConverterLogs.trace(e,"getListPreview",a,b,c);var f=this.shouldSelectHorizontalListPreset(c),g=_.shuffle(this.getPresetsWithAdjustedNumOfItemsInRow(a,f,c));this.siteConverterLogs.trace(e,"getListPreview: allPresets",g);var h=this.parseMedia(b),i=h.doAllMediaContainFaces,j=h.mediaItemWithSmallestWidth,k=this.staticFilterListPresets(g,b,i,c,e),l=this.getPresetsToCalculate(g,k,this.getClusterForListSection,this.MAX_PREVIEWS_TO_CALCULATE);this.siteConverterLogs.trace(e,"getListPreview: presetsToCalculate",l);var m=this.generatePreviewEntries(b,l);this.handleSlideShowPreviews(c,m),this.handleListSectionExternalVideos(c,m);var n,o=[];return _.whilePromises(function(a){return!a&&!!m.length},function(){var a=m.shift();return d.strategy.calculatePresetPreview(a).then(function(b){if(d.siteConverterLogs.trace(e,"getListPreview: calculatePresetPreview",a,b),b){n=n||b;var c=d.enrichPreviewByMediaItem(b,m,j);if(d.siteConverterLogs.trace(e,"getListPreview: enrichedPresetPreview",c),d.isPresetPreviewPerfectFitForList(c,j))return d.siteConverterLogs.trace(e,"getListPreview: return perfect",b),b;o.push(c)}if(0===m.length){var f=d.filterListPreviews(o,j)[0];return d.siteConverterLogs.trace(e,"getListPreview: return best match",f,n,o),f?f.preview:n}}).catch(function(a){this.siteConverterLogs.trace(e,"getListPreview: error",a)})}).then(function(a){if(a)return a;d.siteConverterLogs.trace(e,"getListPreview: fail to build section")})},a.prototype.getSinglePreview=function(a,b,c){var d=this,e=b.contentElement.getMediaField().value;c&&e.length>1&&("vertical"===c.migratedListType||c.migratedListType);var f=this.staticFilterSinglePresets(a,b,c),g=this.getPresetsToCalculate(a,f,this.getClusterForSingleSection,this.MAX_PREVIEWS_TO_CALCULATE),h=this.generatePreviewEntries(b,g);this.handleSingleSectionExternalVideos(c,h);var i,j=[];return _.whilePromises(function(a){return!a&&!!h.length},function(){var a=h.shift();return d.strategy.calculatePresetPreview(a).then(function(a){if(a){i=i||a;var c=d.enrichPreviewByMediaItem(a,f,e[0]);if(d.isPresetPreviewPerfectFitForSingle(c,b,e))return a;j.push(c)}if(0===h.length){var g=d.filterSinglePreviews(j,b,e)[0];return g?g.preview:i}}).catch(function(a){})}).then(function(a){return a||i})},a.prototype.getPresetsStrategy=function(){return this.presetsStrategyFactory.create(builder.PresetsStrategyType.Generic,builder.PresetsStrategyMode.Add)},a.prototype.getClusterForListSection=function(a){return a.preset.data.groups.filter(function(a){return!a.isHeader&&!a.isFooter})[0].layouts[0].cluster},a.prototype.getClusterForSingleSection=function(a){return a.preset.data.groups[0].layouts[0].cluster},a.prototype.getPresetsToCalculate=function(a,b,c,d){var e=this.getUniquePresetsByCluster(b,c),f=_.without.apply(_,[b].concat(e)),g=_.without.apply(_,[a].concat(b));return this.fillArrayWithRandomElement(e,f,d),this.fillArrayWithRandomElement(e,g,d),e},a.prototype.getUniquePresetsByCluster=function(a,b){return a.reduce(function(a,c){var d=b(c);return!a.clusters[d]&&a.presets.push(c),a.clusters[d]=!0,a},{presets:[],clusters:{}}).presets},a.prototype.isPresetPreviewPerfectFitForList=function(a,b){return!!this.filterListPreviews([a],b)[0]&&a.additionalInfo.maxStretch<this.MEDIA_WIDTH_PERFECT_MATCH_MAX_STRETCH},a.prototype.isPresetPreviewPerfectFitForSingle=function(a,b,c){return!!this.filterSinglePreviews([a],b,c)[0]&&a.additionalInfo.maxStretch<this.MEDIA_WIDTH_PERFECT_MATCH_MAX_STRETCH},a.prototype.handleListSectionExternalVideos=function(a,b){var c=this;b.forEach(function(b){c.areListMediasYoutubeOrVimeo(a)&&c.setMediaAsExtVideo(b)})},a.prototype.handleSingleSectionExternalVideos=function(a,b){var c=this;b.forEach(function(a){c.setMediaAsExtVideo(a)})},a.prototype.handleSlideShowPreviews=function(a,b){this.wizUtils.isSlideshow(a)&&this.slideShowPresetUtils.addSlideShowPreviews(b)},a.prototype.generatePreviewEntries=function(a,b){return this.presetPreviewGenerator.generateNewPreviews([a],b,0)},a.prototype.getPresetsWithAdjustedNumOfItemsInRow=function(a,b,c){var d=ob.deepClone(a);return this.adjustNumOfItemsInRow(d,b,c.list.length),d},a.prototype.staticFilterSinglePresets=function(a,b,c){var d=this,e=a;this.areSingleMediasYoutubeOrVimeo(c)&&(e=this.removeAllButInlineImagePresets(a));var f=this.getMediaMinWidth(b);return e.filter(function(a){return d.doesPresetMediaWidthFit(a,f)})},a.prototype.filterSinglePreviews=function(a,b,c){var d=this,e=a.filter(function(a){return a.additionalInfo&&a.additionalInfo.leMediaLayout}).filter(function(a){return!(d.hasManyMedia(b)&&!d.isSupportsGallery(a))});return this.filterPreviewsByMediaLayoutForSingleNode(e,c[0])},a.prototype.shouldSelectHorizontalListPreset=function(a){return this.wizUtils.isHorizontalList(a)||this.wizUtils.isGrid(a)||this.wizUtils.isSideList(a,this.wizWebsite.getSite())},a.prototype.adjustNumOfItemsInRow=function(a,b,c){var d=this;a.forEach(function(a){return d.lssModifier.adjustPresetNumOfItemsInRow(a.preset,b?d.getItemsInRow(c):1)})},a.prototype.getItemsInRow=function(a){return a%4==0?4:a%3==0?3:a%2==0?2:1},a.prototype.parseMedia=function(a){var b=a.children.slice(1,-1).map(function(a){return a.contentElement.getMediaField().value[0]}).filter(function(a){return!!a});return{mediaItems:b,doAllMediaContainFaces:b.every(function(a){return a.fileInput&&a.fileInput.face}),mediaItemWithSmallestWidth:_.min(b,"width")}},a.prototype.staticFilterListPresets=function(a,b,c,d,e){var f=this,g=a;this.wizUtils.isSlideshow(d)&&(g=_.sortBy(g,function(a){return!f.slideShowPresetUtils.isPresetSupportSlideShow(a.preset)}),this.siteConverterLogs.trace(e,"staticFilterListPresets: ordered for slideShow",g)),c||(g=this.removeCircularImageListPresets(g),this.siteConverterLogs.trace(e,"staticFilterListPresets: removeCircularImageListPresets",g)),this.areListMediasYoutubeOrVimeo(d)&&(g=this.removeAllButInlineImagePresets(g),this.siteConverterLogs.trace(e,"staticFilterListPresets: removeAllButInlineImagePresets",g));var h=this.getMediaMinWidth(b);return g=g.filter(function(a){return f.doesPresetMediaWidthFit(a,h)}),this.siteConverterLogs.trace(e,"staticFilterListPresets: remove by media width",h,g),g},a.prototype.getMediaWidth=function(a,b){return Math.min.apply(Math,b.list.map(function(a){return Math.min.apply(Math,a.media.map(function(a){return a.width}))}))},a.prototype.getPresetColumnRatio=function(a){return 1},a.prototype.getPresetListItemMediaWidth=function(a){var b=a.groups.filter(function(a){return!a.isHeader&&!a.isFooter}).map(function(a){return a.layouts[0].leId})[0],c=b.match(/m(\d{1,2})/);if(c&&c[1])return this.applicationParameters.getPixelsFromGridUnits(c[1])},a.prototype.doesPresetMediaWidthFit=function(a,b){var c=this.getPresetListItemMediaWidth(a.preset.data);return!c||(b<=this.SMALL_IMAGE_WIDTH&&b*this.SMALL_IMAGE_FACTOR>=c||b*this.LARGE_IMAGE_FACTOR>=c)},a.prototype.getMediaMinWidth=function(a){return a.isList()?_(this.modelTree.getListItems(a)).map(function(a){return a.contentElement.getValuesByMediaType().image}).flatten().map(function(a){return a&&a.width}).filter(function(a){return a}).min():_(a.contentElement.getValuesByMediaType().image).map(function(a){return a&&a.width}).filter(function(a){return a}).min()},a.prototype.removeAllButInlineImagePresets=function(a){var b=this;return a.filter(function(a){return a.preset.data.groups.filter(function(a){return!a.isHeader&&!a.isFooter}).every(function(a){return a.layouts.every(function(a){return a.mediaType===b.PresetMediaType.IMAGE})})})},a.prototype.areListMediasYoutubeOrVimeo=function(a){var b=this;return a&&a.list&&a.list.some(function(a){return b.areSingleMediasYoutubeOrVimeo(a)})},a.prototype.areSingleMediasYoutubeOrVimeo=function(a){return a.media&&a.media.some(function(a){return/(?:youtube.com|vimeo.com|youtu.be)/.test(a.src)})},a.prototype.filterListPreviews=function(a,b){var c=a.filter(function(a){return a.additionalInfo&&a.additionalInfo.leMediaLayout});return c=this.filterPreviewsByMediaLayoutForListNode(c,b),c=this.handleShapePreviews(c)},a.prototype.removeCircularImageListPresets=function(a){var b=this;return a.filter(function(a){return!b.presetListItemFeatureDetector.isCircularImage(a)})},a.prototype.handleShapePreviews=function(a){return a.some(function(a){return"IMAGE"===a.additionalInfo.leMediaType})?a.filter(function(a){return"SHAPE"!==a.additionalInfo.leMediaType}):a},a.prototype.isSupportsGallery=function(a){return"COLUMNBG"!==a.additionalInfo.leMediaType&&"SHAPE"!==a.additionalInfo.leMediaType},a.prototype.hasManyMedia=function(a){return a.contentElement.getMediaField().value.length>1},a.prototype.setMediaAsExtVideo=function(a){var b=this.presetFeatureDetector.getOrCreateMediaPreferredOverride(a,{name:"video",superType:"media",type:"extVideo",properties:{},sourceProperties:{}});b.name="video",b.superType="media",b.type="extVideo"},a.prototype.enrichPreviewByMediaItem=function(a,b,c){var d=this.getLayoutElementByMediaItem(a,c),e=this.getMediaLayout(a,c,d),f={preview:a};return e&&(f.additionalInfo={LE:d,presetObj:b.find(function(b){return b.preset.id===a.preset.id}),leMediaLayout:e,mediaHeight:e.height,mediaWidth:e.width,leMediaFullWidth:d.mediaFullWidth,leMediaType:this.PresetMediaTypeNames[d.getMediaType()],maxStretch:this.calculateMaxStretch(e,c),aspectRatioDiff:this.calculateAspectRatio(e,c)}),f},a.prototype.filterPreviewsByMediaLayoutForSingleNode=function(a,b){var c=this,d=a.filter(function(a){return c.isInlineStrip(a.additionalInfo.leMediaType)});return this.getFitBackgroundPreviews(a,b).concat(this.getFitInlinePreviews(d,b))},a.prototype.filterPreviewsByMediaLayoutForListNode=function(a,b){var c=this,d=a.filter(function(a){return c.isInlineStrip(a.additionalInfo.leMediaType)});return this.getFitBackgroundPreviews(a,b).concat(this.filterPreviewsByStretch(d,b))},a.prototype.getFitBackgroundPreviews=function(a,b){var c=this;return a.filter(function(a){return c.isBackgroundStrip(a.additionalInfo.leMediaType)}).filter(function(a){return!c.isBackgroundMediaStretchTooMuch(a.additionalInfo.leMediaLayout,b,c.getColumnRatio(a.additionalInfo.leMediaType,a.additionalInfo.LE.columns))})},a.prototype.getFitInlinePreviews=function(a,b){var c=this.filterPreviewsByStretch(a,b);return 1===c.length?c:this.filterPreviewsByAspectRatioDiff(c,b)},a.prototype.filterPreviewsByStretch=function(a,b){var c=this;if(!a||!a.length)return[];var d=a.filter(function(a){return!c.isInlineMediaStretchTooMuch(a.additionalInfo.maxStretch)});return d.length?d:[_.min(a,function(a){return a.additionalInfo.maxStretch})]},a.prototype.filterPreviewsByAspectRatioDiff=function(a,b){var c=this;if(!a||!a.length)return[];var d=a.filter(function(a){return c.isAspectRatioCloseEnough(a.additionalInfo.aspectRatioDiff)});return d.length?d:[_.min(a,function(a){return a.additionalInfo.aspectRatioDiff})]},a.prototype.isAspectRatioCloseEnough=function(a){return a<SectionManager.AspectRatioDiff},a.prototype.calculateAspectRatio=function(a,b){return Math.abs(a.width/a.height-b.width/b.height)},a.prototype.getMediaLayout=function(a,b,c){var d=c||this.getLayoutElementByMediaItem(a,b);return d&&d.getMediaLayout()},a.prototype.getLayoutElementByMediaItem=function(a,b){var c=a&&a.solution.reduce(function(a,b){return a.concat(b.segments)},[]),d=c.find(function(a){return a.node.contentElement.getMediaField().value[0]===b});return d&&d.getLENoError()},a.prototype.isInlineMediaStretchTooMuch=function(a){return a>SectionManager.MaxStretch},a.prototype.calculateMaxStretch=function(a,b){return _.max([a.width/b.width,a.height/b.height])},a.prototype.getColumnRatio=function(a,b){var c=b&&b.reduce(function(a,b){return a.concat(b)},[]),d=c&&c.find(function(a){return a.hasMedia});return d&&"COLUMNBG"===a?d.width/12:1},a.prototype.isBackgroundMediaStretchTooMuch=function(a,b,c){return void 0===c&&(c=1),b.width<SectionManager.FullWidthMediaOfStrip*c||b.height<.9*a.height},a.prototype.isBackgroundStrip=function(a){return"COLUMNBG"===a||"COAST2COAST"===a},a.prototype.isInlineStrip=function(a){return"IMAGE"===a},a.prototype.fillArrayWithRandomElement=function(a,b,c){for(;b.length>0&&a.length<=c;){var d=this.removeRandomElement(b);a.push(d)}},a.prototype.removeRandomElement=function(a){return a.splice(_.random(a.length-1),1)[0]},a}();angular.module("siteGeneratorIntroInternal").service("wizPresetsFilter",WizPresetsFilter);var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},SiteConverterPresetPicker=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){this.siteConverterLogs=a,this.modelTree=b,this.applicationParameters=c,this.presetListItemFeatureDetector=d,this.slideShowPresetUtils=e,this.wizUtils=f,this.presetsStrategyFactory=g,this.wizWebsite=h,this.presetPreviewGenerator=i,this.presetFeatureDetector=j,this.lssModifier=k,this.fitModePresetConverter=l,this.siteConverterConf=m,this.flags=n,this.BACKGROUND_WIDTH=1500,this.sectionIndex=-1,this.strategy=this.getPresetsStrategy()}return a.$inject=["siteConverterLogs","modelTree","applicationParameters","presetListItemFeatureDetector","slideShowPresetUtils","wizUtils","presetsStrategyFactory","wizWebsite","presetPreviewGenerator","presetFeatureDetector","lssModifier","fitModePresetConverter","siteConverterConf","flags"],a.prototype.getPresetPreviewForWizSection=function(a,b,c){this.loggerId=_.random(1e3),this.sectionIndex++,this.setExtraInfoOnWizSection(b,a,c);var d=this.composePresets(a,c,b),e=this.sortPresets(d,b,c);return this.getBestPresetPreview(e,b,c)},a.prototype.composePresets=function(a,b,c){this.log("composePresets",a,c);var d=(this.wizUtils.isListSection(c)?this.createDifferentCardinalityLists(a,this.getAllowedCardinalities(c)):a).concat(this.createFitPresets(a,b));return this.log("composePresets",d),d},a.prototype.createFitPresets=function(a,b){var c=this,d=_(a).map(function(a){if(c.isFitMode(a,b))return a=ob.deepClone(a),a.preset=c.fitModePresetConverter.convertPreset(a.preset,b,!0),a}).filter(function(a){return!!a}).value();return this.log("createFitPresets",d),d},a.prototype.createDifferentCardinalityLists=function(a,b){var c=this,d=_(a).map(function(a){return b.map(function(b){return a=ob.deepClone(a),c.lssModifier.adjustPresetNumOfItemsInRow(a.preset,b),a})}).flatten().value();return this.log("createDifferentCardinalityLists",b,d),d},a.prototype.sortPresets=function(a,b,c){var d=this,e=this.doAllMediaContainFaces(c),f=a.map(function(a){return{preset:a,uglyScore:d.scorePreset(a,b,c,e).uglyScore}}).sort(function(a,b){return d.calculateScore(a.uglyScore)-d.calculateScore(b.uglyScore)}).map(function(a){return a.preset});return this.log("sortPresets",f,b),f},a.prototype.getBestPresetPreview=function(a,b,c){var d=this;this.log("getBestMatchPresetPreview",a);var e=this.generatePreviewEntries(c,a);this.handleExternalVideos(b,e),this.wizUtils.isListSection(b)&&this.handleSlideShowPreviews(b,e);var f=[],g=this.getNodeMediaDimensions(c);return _.whilePromises(function(a){return!a&&!!e.length},function(){return d.getPresetPreviewsBatch(e,d.siteConverterConf.CALCULATION_BATCH_SIZE).then(function(a){var e=d.getBestMatchingPresetPreview(a,b,f,c,g);if(e)return e;if(f.length>=d.siteConverterConf.GOOD_ENOUGH_PREVIEW_COUNT_THRESHOLD){var h=d.getLowestScoringPresetPreview(f);return d.log("getBestMatchPresetPreview: return good enough match",h,f),h.presetPreview}}).catch(function(a){return d.log("getBestMatchPresetPreview: error",a)})}).then(function(a){if(a)return a;if(f.length){var b=d.getLowestScoringPresetPreview(f);return d.log("getBestMatchPresetPreview: goodEnough list was not filled to threshold, picking from whats there",b),b.presetPreview}d.log("getBestMatchPresetPreview: failed to build section")})},a.prototype.getLowestScoringPresetPreview=function(a){var b=this;return a.sort(function(a,c){return b.calculateScore(a.uglyScore)-b.calculateScore(c.uglyScore)})[0]},a.prototype.getBestMatchingPresetPreview=function(a,b,c,d,e){var f=this;if(a.length){var g=this.getWizSectioExtraInfo(b).doAllMediaContainFaces,h=a.map(function(a){return f.getScoredPresetPreview(a,b,d,g,e)});this.log("getBestMatchingPresetPreview - scoredPresetPreviews",h);var i=h.filter(function(a){return a.scoreTotal<=f.siteConverterConf.GOOD_ENOUGH_SCORE_THRESHOLD}).sort(function(a,b){return a.scoreTotal-b.scoreTotal});if(i.length&&i[0].scoreTotal<=this.siteConverterConf.PERFECT_MATCH_SCORE_THRESHOLD)return this.log("getBestMatchPresetPreview: found perfect match",i[0]),i[0].presetPreview;c.push.apply(c,i)}else this.log("getBestMatchPresetPreview: no presetPreviews were solved")},a.prototype.getScoredPresetPreview=function(a,b,c,d,e){var f=this.scorePreset(a,b,c,d),g=this.scorePresetPreview(a,b,c,e),h=__assign({},f.uglyScore,g.uglyScore),i=__assign({},f.uglyScoreDebug,g.uglyScoreDebug),j=this.calculateScore(h);return this.flags.debugWizSiteConverter&&(a.node.siteConverter={wizSection:b,uglyScore:h,uglyScoreDebug:i,scoreTotal:j}),{presetPreview:a,uglyScore:h,uglyScoreDebug:i,scoreTotal:j}},a.prototype.calculateScore=function(a){return Object.keys(a).reduce(function(b,c){return b+a[c]},0)},a.prototype.getPresetPreviewsBatch=function(a,b){var c=this,d=a.splice(0,b);return this.log("getPresetPreviewsBatch - getting batch of "+b),_.sequencePromises(d,function(a){return c.strategy.calculatePresetPreview(a).catch(function(a){})}).then(function(a){return a.filter(function(a){return!!a})}).then(function(a){return c.log("getPresetPreviewsBatch - calculated "+a.length+" previews"),a})},a.prototype.scorePresetPreview=function(a,b,c,d){var e=this.getMediaLayout(a,c);return this.scoreObject(a,[{scoringCriterion:"stretch",scoringMethod:this.getStretchScoreByWidthAndHeight},{scoringCriterion:"imageCrop",scoringMethod:this.getImageCropScore}],b,c,d,e)},a.prototype.scorePreset=function(a,b,c,d){return this.scoreObject(a,[{scoringCriterion:"stretch",scoringMethod:this.getStretchScoreByWidth},{scoringCriterion:"cardinality",scoringMethod:this.getListCardinalityScore},{scoringCriterion:"priority",scoringMethod:this.getPriorityScore},{scoringCriterion:"circular",scoringMethod:this.getCirclePresetsScore},{scoringCriterion:"slideshow",scoringMethod:this.getSlideshowPresetsScore},{scoringCriterion:"fitMode",scoringMethod:this.getFitModeScore}],b,c,{doAllMediaContainFaces:d})},a.prototype.scoreObject=function(a,b){for(var c=this,d=[],e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.reduce(function(b,e){var f=e.scoringCriterion,g=e.scoringMethod,h=g.call.apply(g,[c,a].concat(d));return b.uglyScore[f]=h.uglyScore,h.debug&&(b.uglyScoreDebug[f]=h.debug),b},{uglyScore:{},uglyScoreDebug:{}})},a.prototype.getFitModeScore=function(a,b,c){return{uglyScore:this.isFitMode(a,c)?this.siteConverterConf.SCORING.fitMode.penalty:0}},a.prototype.getStretchScoreByWidth=function(a,b,c){var d,e=this.getPresetMediaWidth(a.preset.data),f=this.getNodeMediaDimensions(c).width,g=f/e,h=this.siteConverterConf.SCORING.widthStretch;return d=g>=h.scale.good?this.normalizeScore(g,h.scale.good,h.scale.badHigh)*h.penalty:this.normalizeScore(g,h.scale.good,h.scale.badLow)*h.penalty,{uglyScore:d,debug:{presetMediaWidth:e,nodeMediaMinWidth:f,widthStretchRatio:g}}},a.prototype.getStretchScoreByWidthAndHeight=function(a,b,c,d,e){var f,g={mediaLayout:e,nodeMediaDimensions:d};if(e){g.widthStretchRatio=e.width/d.width,g.heightStretchRatio=e.height/d.height,g.stretchRatio=Math.max(g.widthStretchRatio,g.heightStretchRatio),g.isFitMode=this.isFitMode(a,c),g.isFitMode&&(g.stretchRatio=Math.min(g.widthStretchRatio,g.heightStretchRatio));var h=this.siteConverterConf.SCORING.widthHeightStretch;f=g.stretchRatio>=h.scale.good?this.normalizeScore(g.stretchRatio,h.scale.good,h.scale.badHigh)*h.penalty:this.normalizeScore(g.stretchRatio,h.scale.good,h.scale.badLow)*h.penalty}else f=0;return{uglyScore:f,debug:g}},a.prototype.getListCardinalityScore=function(a,b,c){var d;return d=c.isList()?this.normalizeScore(a.preset.data.itemsInRow,4,1)*this.siteConverterConf.SCORING.cardinality.penalty:0,{uglyScore:d,debug:{itemsInRow:a.preset.data.itemsInRow}}},a.prototype.getPriorityScore=function(a,b,c){var d=this.getWizSectioExtraInfo(b),e=d.minPriority,f=d.maxPriority,g=a.preset.data.priority[c.contentElementType];return{uglyScore:this.normalizeScore(g,e,f)*this.siteConverterConf.SCORING.priority.penalty,debug:{minPriority:e,maxPriority:f,priority:g}}},a.prototype.getCirclePresetsScore=function(a,b,c,d){var e=0;return d.isCircularPreset=c.isList()&&this.presetListItemFeatureDetector.isCircularImage(a)||this.presetFeatureDetector.isCircularImage(a),!d.doAllMediaContainFaces&&d.isCircularPreset&&(e=this.siteConverterConf.SCORING.circularPreset.penalty),{uglyScore:e,debug:d}},a.prototype.getSlideshowPresetsScore=function(a,b,c){var d,e={};return e.notListOrNotSlideshow=!c.isList()||!this.wizUtils.isSlideshow(b),e.notListOrNotSlideshow?d=0:(e.presetSupportsSlideshow=this.slideShowPresetUtils.isPresetSupportSlideShow(a.preset),d=e.presetSupportsSlideshow?-1*this.siteConverterConf.SCORING.slideshow.penalty:this.siteConverterConf.SCORING.slideshow.penalty),{uglyScore:d,debug:e}},a.prototype.getImageCropScore=function(a,b,c,d,e){var f=0,g={mediaLayout:e,nodeMediaDimensions:d};if(g.isFitMode=this.isFitMode(a,c),g.isFitMode&&g.mediaLayout)return{uglyScore:f,debug:g};if(g.mediaWidth=e?e.width:0,g.mediaHeight=e?e.height:0,g.isBackgroundImage=!c.isListItem&&!e&&a.solution[0].getLgData().strip.mediaType,g.isBackgroundImage&&(g.mediaWidth=this.BACKGROUND_WIDTH,g.mediaHeight=a.solution[0].getBoundingHeight(),this.log("getImageCropScore - found background",g.mediaWidth,g.mediaHeight)),g.mediaWidth&&g.mediaHeight){g.nodeMediaAspectRatio=d.width/d.height,g.layoutAspectRatio=g.mediaWidth/g.mediaHeight;var h=this.siteConverterConf.SCORING.imageCrop;g.croppedPercent=Math.abs(g.layoutAspectRatio-g.nodeMediaAspectRatio)/Math.max(g.layoutAspectRatio,g.nodeMediaAspectRatio),f=this.normalizeScore(g.croppedPercent,h.scale.good,h.scale.bad)*h.penalty}return{uglyScore:f,debug:g}},a.prototype.setExtraInfoOnWizSection=function(a,b,c){a.extraInfo={doAllMediaContainFaces:this.doAllMediaContainFaces(c),minPriority:_.min(b,function(a){return a.preset.data.priority[c.contentElementType]}).preset.data.priority[c.contentElementType],maxPriority:_.max(b,function(a){return a.preset.data.priority[c.contentElementType]}).preset.data.priority[c.contentElementType]}},a.prototype.getWizSectioExtraInfo=function(a){return a.extraInfo},a.prototype.doAllMediaContainFaces=function(a){var b=a.children.slice(1,-1).map(function(a){return a.contentElement.getMediaField().value[0]}).filter(function(a){return!!a});return!(!b.length||!b.every(function(a){return a.fileInput&&a.fileInput.face}))},a.prototype.normalizeScore=function(a,b,c){return c>b&&a>=c||b>c&&a<=c?1:c>b&&a<=b||b>c&&a>=b?0:c>b?(a-b)/(c-b):b>c?1-(a-c)/(b-c):void 0},a.prototype.getNodeMediaDimensions=function(a){return a.isList()?_(this.modelTree.getListItems(a)).map(function(a){return a.contentElement.getValuesByMediaType().image}).flatten().filter(function(a){return a}).map(function(a){return{width:a.width,height:a.height}}).min(function(a){return a.width
}):_(a.contentElement.getValuesByMediaType().image).filter(function(a){return a}).map(function(a){return{width:a.width,height:a.height}}).min(function(a){return a.width})},a.prototype.getPresetMediaWidth=function(a){var b=a.groups.filter(function(a){return!a.isHeader&&!a.isFooter}).map(function(a){return a.layouts[0].leId})[0],c=b.match(/m(\d{1,2})/);if(c&&c[1]){var d=this.applicationParameters.getPixelsFromGridUnits(c[1]);return a.isList&&a.originalItemsInRow&&(d*=a.originalItemsInRow/a.itemsInRow),d}},a.prototype.areMediasYoutubeOrVimeo=function(a){function b(a){return a.media&&a.media.some(function(a){return/(?:youtube.com|vimeo.com|youtu.be)/.test(a.src)})}return this.wizUtils.isListSection(a)?a.list.some(function(a){return b(a)}):b(a)},a.prototype.getPresetsStrategy=function(){return this.presetsStrategyFactory.create(builder.PresetsStrategyType.Generic,builder.PresetsStrategyMode.Add)},a.prototype.getAllowedCardinalities=function(a){var b=[1];return this.shouldSelectHorizontalListPreset(a)&&(a.list.length%2==0&&b.push(2),a.list.length%3==0&&b.push(3),a.list.length%4==0&&b.push(4)),b},a.prototype.shouldSelectHorizontalListPreset=function(a){return this.wizUtils.isHorizontalList(a)||this.wizUtils.isGrid(a)||this.wizUtils.isSideList(a,this.wizWebsite.getSite())},a.prototype.generatePreviewEntries=function(a,b){return this.presetPreviewGenerator.generateNewPreviews([a],b,0)},a.prototype.handleSlideShowPreviews=function(a,b){this.wizUtils.isSlideshow(a)&&this.slideShowPresetUtils.addSlideShowPreviews(b)},a.prototype.handleExternalVideos=function(a,b){var c=this;b.forEach(function(b){c.areMediasYoutubeOrVimeo(a)&&c.setMediaAsExtVideo(b)})},a.prototype.setMediaAsExtVideo=function(a){var b=this.presetFeatureDetector.getOrCreateMediaPreferredOverride(a,{name:"video",superType:"media",type:"extVideo",properties:{},sourceProperties:{}});b.name="video",b.superType="media",b.type="extVideo"},a.prototype.getMediaLayout=function(a,b){var c=b.contentElement;b.isList()&&(c=b.children.find(function(a){return"ListHeader"!==a.contentElementType&&"ListFooter"!==a.contentElementType}).contentElement);var d=c.getMediaField().value[0],e=this.getLayoutElementByMediaItem(a,d);return e&&e.getMediaLayout()},a.prototype.getLayoutElementByMediaItem=function(a,b){var c=a&&a.solution.reduce(function(a,b){return a.concat(b.segments)},[]),d=c.find(function(a){return a.node.contentElement.getMediaField().value[0]===b});return d&&d.getLENoError()},a.prototype.isFitMode=function(a,b){return this.fitModePresetConverter.isPresetConvertible(a.preset,b,!0)},a.prototype.log=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];(d=this.siteConverterLogs).trace.apply(d,[this.loggerId,this.sectionIndex+" - "+a].concat(b));var d},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("siteConverterPresetPicker",SiteConverterPresetPicker);var SiteConverterConf=function(){function a(){this.SECTION_CONFIDENCE_LEVEL_THRESHOLD=.5,this.MINIMUM_VIABLE_SECTIONS=1,this.GOOD_ENOUGH_PREVIEW_COUNT_THRESHOLD=5,this.PERFECT_MATCH_SCORE_THRESHOLD=5,this.GOOD_ENOUGH_SCORE_THRESHOLD=16,this.CALCULATION_BATCH_SIZE=10,this.SCORING={circularPreset:{penalty:50},fitMode:{penalty:.1},slideshow:{penalty:30},widthStretch:{penalty:5,scale:{badLow:.5,good:1,badHigh:2}},widthHeightStretch:{penalty:12,scale:{badLow:.5,good:1,badHigh:2}},cardinality:{penalty:4},priority:{penalty:5},imageCrop:{penalty:15,scale:{good:0,bad:.3}}},this.SMALL_IMAGE_WIDTH_HIGH_BOUNDARY=240}return a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("siteConverterConf",SiteConverterConf);var builder;!function(a){var b=function(){function a(a,b){var c=this;this.flags=a,this.$log=b,this.styles={},this.ifLog=function(a){return c.flags.debugWizSiteConverter?a:_.noop},this.ifLogExtraDebug=function(a){return c.flags.debugWizSiteConverterExtra?a:_.noop},this.defaultLoggerId=1e3,this.trace=this.ifLog(this.log),this.debug=this.ifLogExtraDebug(this.log)}return a.$inject=["flags","$log"],a.prototype.log=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];var e=this.style(a);(f=this.$log).info.apply(f,["%cSC>> "+b,e].concat(c));var f},a.prototype.style=function(a){return this.styles[a]||(this.styles[a]="color: #"+((1<<24)*Math.random()|0).toString(16)),this.styles[a]},a}();a.SiteConverterLogs=b,angular.module("siteGeneratorIntroInternal").service("siteConverterLogs",b)}(builder||(builder={}));var ImageScore=function(){function a(a,b,c){this.$q=a,this.$rootScope=b,this.siteConverterLogs=c}return a.$inject=["$q","$rootScope","siteConverterLogs"],a.prototype.canvasElementFromImageElement=function(a){var b=document.createElement("canvas");return b.width=a.width,b.height=a.height,b.getContext("2d").drawImage(a,0,0,a.width,a.height),b},a.prototype.imageElementFromImageUrl=function(a){var b=this,c=document.createElement("img");return this.$q(function(d){c.onload=function(){return b.$rootScope.$apply(function(){return d(c)})},0!==a.indexOf("data:")&&(c.crossOrigin="anonymous"),c.src=a})},a.prototype.canvasPixelsFromCanvasElement=function(a){return{width:a.width,height:a.height,array:a.getContext("2d").getImageData(0,0,a.width,a.height).data}},a.prototype.canvasPixelsFromImageUrl=function(a){return this.imageElementFromImageUrl(a).then(this.canvasElementFromImageElement).then(this.canvasPixelsFromCanvasElement)},a.prototype.transparentRatio=function(a){for(var b=0,c=a.length-1;c>=0;)a[c]<240&&b++,c-=4;return b/a.length},a.prototype.imageScoreFromImageUrl=function(a){var b=this,c=Math.round(1e3*Math.random());return this.canvasPixelsFromImageUrl(a).then(function(d){var e=b.transparentRatio(d.array),f=b.imageScore(e,d.width,d.height);return b.siteConverterLogs.trace(c,"scoring image",a,e,d.width,d.height,f),f})},a.prototype.imageScore=function(a,b,c){var d=0,e=b/c;return b>1e3||c>1e3?d+=3:b>500||c>500?d+=2:b>300||c>300?d+=1:b<100&&b>30||c<100&&c>30?d-=1:(b<=30||c<=30)&&(d-=Number.POSITIVE_INFINITY),e<=.1||e>=10?d-=Number.POSITIVE_INFINITY:e<=.2||e>=5?d-=2:e<=.4||e>=3.5?d-=1:e>=2/3&&e<=1.5&&(d+=2),a>=.8?d-=Number.POSITIVE_INFINITY:a>.6&&(d-=2),d},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("imageScore",ImageScore);var intro;!function(a){var b=function(){function a(){}return a.prototype.isMatchSelectable=function(a){return a&&!a.isTitle},a.prototype.onMatchesChange=function(a,b,c){a.$watch(function(){return b.matches},function(a,b){a!==b&&c(a)})},a.prototype.onKeyDown=function(a,b){var c=a.keydown;a.keydown=function(d){c.apply(a,[d]),b(d)}},a}();a.IntroMdBase=b}(intro||(intro={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),intro;!function(a){var b=9,c=function(a){function c(b){var c=a.call(this)||this;return c.$timeout=b,c.restrict="A",c.require="mdAutocomplete",c}return __extends(c,a),c.prototype.link=function(a,b,c,d){var e=this;this.$timeout(function(){return e.initPlaceholder(d,b,c)}),this.onMatchesChange(a,d,function(b){e.updatePlaceholder(a,d,b[0]||null)}),this.onKeyDown(d,function(b){e.onPlaceholderKeydown(a,d,b.keyCode)})},c.prototype.initPlaceholder=function(a,b,d){var e=this,f=angular.element('<input class="'+c.MD_PLACEHOLDER_CLASS+" "+d.introMdPlaceholder+'" tabindex="-1" />')[0];f.style.opacity="0";var g=b[0].querySelector("input");g.parentNode.insertBefore(f,g.nextSibling),g.addEventListener("keyup",function(){f.value.indexOf(g.value)<0&&(f.value="")});var h=a.select;a.select=function(b){h.apply(a,[b]),f.value=""},this.updatePlaceholder=function(a,b,c){if(e.isMatchSelectable(c)){var h=g.value,i=d.mdItemText?a.$eval(d.mdItemText,(j={},j[b.itemName]=c,j)):c;f.value=e.getPlaceholderText(h,i),f.style.opacity="1"}else f.value="";var j}},c.prototype.getPlaceholderText=function(a,b){var c=b.toLowerCase().indexOf(a.replace(/^\s+/,"").toLowerCase()),d=c+a.replace(/^\s+/,"").length;return a+(c>=0?b.substr(d):"")},c.prototype.onPlaceholderKeydown=function(a,c,d){if(d===b){var e=c.scope.searchText,f=c.matches[0];e&&this.isMatchSelectable(f)&&c.select(0)}},c}(a.IntroMdBase);c.MD_PLACEHOLDER_CLASS="intro-md-placeholder",angular.module("siteGeneratorStaticsConsumerAppInternal").directive("introMdPlaceholder",["$timeout",function(a){return new c(a)}])}(intro||(intro={}));var intro;!function(a){var b=function(){function a(){this.restrict="A"}return a.prototype.handleMouseEvents=function(a){return!1},a.prototype.unhandleMouseEvents=function(a){a.off("mouseenter.intro"),a.off("mouseleave.intro")},a.prototype.link=function(b,c,d){var e=this,f=!1;d.$observe(a.MD_ITEM_DISABLED,function(b){if(b||f){for(var d=c[0];d&&"li"!==d.tagName.toLowerCase();)d=d.parentElement;var g=angular.element(d);b?(g.addClass(a.MD_ITEM_DISABLED_CLASS),e.handleMouseEvents(g),f=!0):(g.removeClass(a.MD_ITEM_DISABLED_CLASS),e.unhandleMouseEvents(g),f=!1)}})},a}();b.MD_ITEM_DISABLED="introMdItemDisabled",b.MD_ITEM_DISABLED_CLASS="intro-md-item-disabled",angular.module("siteGeneratorStaticsConsumerAppInternal").directive("introMdItemDisabled",function(){return new b})}(intro||(intro={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),intro;!function(a){var b=13,c=38,d=40,e=function(e){function f(b,c,d,f,g){var h=e.call(this)||this;return h.flags=b,h.introWindow=c,h.introStep=d,h.$timeout=f,h.$mdUtil=g,h.restrict="A",h.require="mdAutocomplete",h.isLoaded=!0,h.onResize=_.debounce(function(){return h.toggleVisibility(!1)},a.IntroStep.RESIZE_DEBOUNCE),h}return __extends(f,e),f.$inject=["flags","introWindow","introStep","$timeout","$mdUtil"],f.prototype.removeDropMask=function(){this._disableScrollAround=this.$mdUtil.disableScrollAround,this.$mdUtil.disableScrollAround=angular.noop},f.prototype.onDestroy=function(){this.$mdUtil.disableScrollAround=this._disableScrollAround,this.introWindow.off("resize",this.onResize)},f.prototype.toggleVisibility=function(a){var b=this,c=angular.element(f.CLASS_SUGGESTIONS);c[0]&&(a&&this.isLoaded?this.$timeout(function(){c[0].style.opacity="1",b.introWindow.trigger("resize")},0,!1):c[0].style.opacity="0")},f.prototype.updateAutoCompleteHiddenState=function(a,b,c,d){a.$eval(c.mdListHiddenChanged,{$hidden:b}),c.hiddenOverride&&(d.hidden=0===d.matches.length||a.$eval(c.hiddenOverride))},f.prototype.link=function(a,e,g,h){var i=this;this.removeDropMask(),this.introWindow.on("resize",this.onResize),a.$watch(function(){return i.introStep.contentBoxPosition},function(){return i.toggleVisibility(!0)}),a.$on("$destroy",function(){return i.onDestroy()}),a.$watch(function(){return h.hidden},function(b){i.updateAutoCompleteHiddenState(a,b,g,h)}),a.$watch(function(){return a.$ctrl.isTitleHovered},function(a,b){$(f.CLASS_SUGGESTIONS_UL).toggleClass("onRelatedResult",a)});var j=angular.element(f.CLASS_SUGGESTIONS);j.addClass(f.CLASS_SCROLLER),this.$timeout(function(){h.matches=i.introStep.disposable.categoriesMatches||[],i.updateAutoCompleteHiddenState(a,0===h.matches.length,g,h)},500),j.perfectScrollbar({minScrollbarLength:43}),g.introMdOnSelect&&a.$watch(function(){return h.scope.selectedItem},function(b,c){null!==b&&c!==b&&i.handleMdOnSelect(h,b,a,g)}),g.introMdLoaded&&(this.isLoaded=!1,this.$timeout(function(){return a.$watch(g.introMdLoaded,function(a){i.isLoaded=a,i.toggleVisibility(a)})})),this.onMatchesChange(a,h,function(b){var c=h.scope.searchText;a.$eval(g.mdSearchChanged,{$term:c,$matches:b}),i.introStep.disposable.categoriesMatches=b,i.$timeout(function(){h.index=-1,j.scrollTop(0),j.perfectScrollbar("update")})}),this.onKeyDown(h,function(a){switch(a.keyCode){case b:i.onEnterKeyDown(a,h);break;case c:case d:i.onArrowKeyDown(h,a,j)}})},f.prototype.handleMdOnSelect=function(a,b,c,d){var e=c.$eval(d.mdItemText,(f={},f[a.itemName]=b,f));this.$timeout(function(){var b=c.$eval(d.introMdOnSelect,{$term:e});b&&b.then(function(b){return a.matches=b})});var f},f.prototype.onArrowKeyDown=function(a,b,d){var e=a.index;e>=0&&(this.isMatchSelectable(a.matches[e])||(a.index=e+(b.keyCode===c?-1:1)),_.each(a.matches,function(a){a.isExactMatch=!1}),this.fixTheScroll(d,a.index))},f.prototype.onEnterKeyDown=function(a,b){var c=b.index;c<0||(a.preventDefault(),this.isMatchSelectable(b.matches[c])?b.scope.selectedItem&&b.select(c):b.select(0))},f.prototype.fixTheScroll=function(a,b){},f}(a.IntroMdBase);e.CLASS_SUGGESTIONS_UL=".md-autocomplete-suggestions",e.CLASS_SUGGESTIONS=".md-virtual-repeat-scroller",e.CLASS_SCROLLER="intro-md-aucotomplete-scroller",angular.module("siteGeneratorIntroInternal").directive("introMdAutocomplete",["flags","introWindow","introStep","$timeout","$mdUtil",function(a,b,c,d,f){return new e(a,b,c,d,f)}])}(intro||(intro={}));var intro;!function(a){var b="._md-select-menu-container md-content",c=function(){function a(){this.restrict="A"}return a.prototype.link=function(a,c,d){angular.element(b).perfectScrollbar({minScrollbarLength:43})},a}();angular.module("siteGeneratorIntroInternal").directive("introMdSelect",function(){return new c})}(intro||(intro={}));var intro;!function(a){var b=function(){function a(){this.require="ngModel"}return a.prototype.link=function(a,b,c,d){"textarea"===b[0].tagName.toLowerCase()&&b.on("keydown paste",function(a){})},a}();a.IntroAddressFormatter=b,angular.module("siteGeneratorIntroInternal").directive("introAddressFormatter",function(){return new b})}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a){this.introStep=a}return Object.defineProperty(a.prototype,"contentPosition",{get:function(){return this.introStep.contentBoxPosition?{top:this.introStep.contentBoxPosition.y,left:this.introStep.contentBoxPosition.x}:null},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"backButtonStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-right":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"nextButtonStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-left":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"boxTipStyle",{get:function(){return this.introStep.backdropBoxPosition?{top:this.introStep.backdropBoxPosition.y+this.introStep.backdropBoxPosition.height,left:this.introStep.backdropBoxPosition.x,width:this.introStep.backdropBoxPosition.width}:null},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"loaded",{get:function(){return!!this.introStep.contentElement&&!this.introStep.contentElement.hidden},enumerable:!0,configurable:!0}),a}();a.IntroQuestionsBase=b}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j){if(this.$element=a,this.$state=b,this.$window=c,this.introStep=d,this.urlParser=e,this.applicationState=f,this.flags=i,this.introManager=j,this.verticalQueryMap={"online-store":"Stores",blog:"Blog",booking:"Bookings"},this.introManager.init(this.getVertical()),b.current.name===config.STATES.INTRO){var k=config.STATES.INTRO_CATEGORY_SEARCH;b.go(k)}h({label:"site-generator-statics-consumer",spec:"specs.ob.FullStory",onReady:function(a){return g.intro.fullStoryStarted(a)}}),this.registerKeyDown()}return a.$inject=["$element","$state","$window","introStep","urlParser","applicationState","consumerBiLogger","fullStoryLoader","flags","introManager"],a.prototype.getVertical=function(){var a,b=this.urlParser.queryParams();return b.vertical&&(a=this.verticalQueryMap[b.vertical]||b.vertical),a},a.prototype.registerKeyDown=function(){function a(){c.introManager.data.category=c.introManager.data.category||{};var a=c.introManager.data.category.structureId=c.introManager.data.category.structureId||"40dc538a8a6c3e2dae342922",b=c.introManager.data.category.industryId=c.introManager.data.category.industryId||"e79e5765052b89b579c9a4c2";c.introManager.data.name=c.introManager.data.name||"quickStory",c.applicationState.goToBuilderDeepLink(a,b,"quickStory")}var b=this,c=this;this.keyDownHandler=_.debounce(function(c){if((c.metaKey||c.ctrlKey)&&c.shiftKey&&c.altKey){var d=String.fromCharCode(c.keyCode);"M"!==d&&"J"!==d||(b.flags.emptyPage=b.flags.emptyPage||"J"===d,c.preventDefault(),a())}},500),angular.element(this.$window).keydown(this.keyDownHandler)},a.prototype.$postLink=function(){var a=this.$element.find('[data-hook="animation-backdrop"]'),b=this.$element.find('[data-hook="animation-content"]'),c=this.$element.find('[data-hook="loading"]');this.introStep.init(a,b,c)},a.prototype.$onDestroy=function(){angular.element(this.$window).unbind("keydown",this.keyDownHandler),this.introStep.dispose()},a}();a.Intro=b,angular.module("siteGeneratorIntroInternal").component("intro",{controller:b,templateUrl:"views/intro/intro.html"})}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a){this.introStep=a}return a.$inject=["introStep"],Object.defineProperty(a.prototype,"backStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-right":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"nextStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-left":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),a.prototype.onBack=function(){this.back&&this.back()},a.prototype.onNext=function(){this.next&&this.next()},a}();angular.module("siteGeneratorIntroInternal").component("introBoxButtons",{controller:b,templateUrl:"views/intro/intro-box-buttons.html",bindings:{next:"&?",back:"&?",isInProcess:"=?",tooltipTitle:"=?",tooltipPosition:"=?",isHideTooltip:"<?",focusNext:"=?",isNextDisabled:"=?"}})}(intro||(intro={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),intro;!function(a){var b=function(b){function c(a,d,e,f,g,h,i,j,k,l){var m=b.call(this,a)||this;return m.$translate=d,m.introWindow=e,m.applicationParameters=f,m.consumerBiLogger=g,m.introManager=h,m.introContentTpa=i,m.flags=j,m.cmsApi=k,m.validation=l,m.lastSearchedCategories=[],m.relatedResultsTitle={isTitle:!0,term:""},m.examplesTitle=m.$translate.instant("intro.category-search.examples-label"),m.searchTerm="",m.searchChanged=!1,m.lastShowGenericPopUpState=!1,m.isTitleHovered=!1,m.isValidTerm=function(){return!m.searchTerm||"string"==typeof m.searchTerm&&m.cmsApi.sanitize(m.searchTerm).length>0},m.inSearch=function(){return!m.result&&m.lastSearchedTerm&&m.isValidTerm()},m.isEmptySearch=function(){return m.inSearch()&&0===m.lastSearchedCategories.length},m.shouldShowGenericPopover=function(){return m.inSearch()&&(0===m.lastSearchedCategories.length||m.lastSearchedCategories[0]===m.relatedResultsTitle)},m.isListLoaded=function(){return m.showResults},m.thinResult=function(a){return _.pick(a,"industryId","structureId","term","block","redirectUrl")},m.preSuggestionsByVertical=m.introManager.preSuggestionsByVertical,c.introCategoryCounter++,m.defaultCategories=m.introManager.generalCategories.General,m.introManager.vertical&&m.introManager.generalCategories[m.introManager.vertical]&&(m.defaultCategories=[].concat(m.introManager.generalCategories[m.introManager.vertical],m.defaultCategories)),m.relatedResultsTitle.term=m.$translate.instant("intro.category-search.related-results-label"),m.validCategory=m.introManager.data.validCategory,j.introClearSearchedTextInReload&&1===c.introCategoryCounter&&(m.result=null,m.validCategory=!1,m.lastSearchedTerm="",m.searchTerm=""),m.result&&(m.result.term=m.introManager.data.lastSearchedTerm,m.selected=m.result,m.searchTerm=m.result.term,m.lastSearchedTerm=m.result.term),m}return __extends(c,b),c.$inject=["introStep","$translate","introWindow","applicationParameters","consumerBiLogger","introManager","introContentTpa","flags","cmsApi","validation"],c.prototype.getPreSuggestionsByVertical=function(){return this.preSuggestionsByVertical[this.introManager.vertical]||c.DEFAULT_PRE_SUGGESTIONS},c.prototype.isSameCategory=function(a,b){return a.industryId===b.industryId&&a.structureId===b.structureId},c.prototype.isValidCategory=function(){return this.result&&(!this.isSameCategory(this.result,a.DEFAULT_CATEGORY)||this.result.term===a.DEFAULT_CATEGORY.term)},c.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(config.STATES.INTRO_CATEGORY_SEARCH,null)},Object.defineProperty(c.prototype,"result",{get:function(){return this.introManager.data.category},set:function(a){this.introManager.data.category=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"genericPopoverPosition",{get:function(){return this.introStep.backdropBoxPosition?{bottom:this.introWindow.getWindowDimensions().windowHeight-(this.introStep.backdropBoxPosition.y+this.introStep.backdropBoxPosition.height)+12,left:this.introStep.contentBoxPosition.x+a.IntroWindow.CONTENT_WIDTH+58}:null},enumerable:!0,configurable:!0}),c.prototype.onExampleClick=function(a){var b=a.target.textContent;this.introManager.data.selectionSource="example list",this.consumerBiLogger.intro.businessTypeWasSelected("category",b,this.sanitizePersonallyIdentifiableInfo(this.lastSearchedTerm),0,this.introManager.data.selectionSource),this.searchTerm=b,angular.element("[name=businessTypeInput]").focus()},c.prototype.getVerticalTranslation=function(a){var b=this.introManager.vertical;if(!b)return this.$translate.instant(a);var c=a+"-"+b,d=this.$translate.instant(c);return d&&d!==c?d:this.$translate.instant(a)},c.prototype.next=function(){if(this.result){var a=this.nextStep();this.introManager.data.lastSearchedTerm=this.result.term,this.introManager.data.validCategory=!0,this.consumerBiLogger.intro.selectBusinessTypePageNavigationClick(a,this.result.term,this.lastSearchedTerm,this.introManager.data.selectionSource,"next",this.result.structureId,this.result.industryId),this.prepareToProceed(),this.showResults=!1,this.introStep.next(a)}},c.prototype.nextStep=function(){return this.result.block?config.STATES.INTRO_BLOCKED_CATEGORY:this.introContentTpa.categoryType(this.result)===a.CategoryTypes.SingleEvent?config.STATES.INTRO_BUSINESS_NAME:config.STATES.INTRO_SERVICES_OFFER},c.prototype.skip=function(){var b=config.STATES.INTRO_SERVICES_OFFER,c=_.clone(a.DEFAULT_CATEGORY);this.introManager.data.validCategory=!this.searchTerm||this.isValidCategory(),this.result=c,this.introManager.data.lastSearchedTerm=this.searchTerm||this.result.term,this.consumerBiLogger.intro.selectBusinessTypePageNavigationClick(b,this.result.term,this.lastSearchedTerm,this.introManager.data.selectionSource,"skip",this.result.structureId,this.result.industryId),this.prepareToProceed(),this.introStep.skip(b)},c.prototype.onSelectFromEmptyList=function(a,b){this.introManager.data.selectionSource="no matches list",this.result=a,this.consumerBiLogger.intro.businessTypeWasSelected("category",a.term,this.sanitizePersonallyIdentifiableInfo(this.lastSearchedTerm),b,this.introManager.data.selectionSource),this.next()},c.prototype.getHighlightText=function(a){return a.isTitle?"":this.searchTerm.replace(/&/g,"&amp;")},c.prototype.onSearchChanged=function(a,b){this.lastSearchedTerm!==a&&this.consumerBiLogger.intro.businessTypeTypingClientEvent(this.sanitizePersonallyIdentifiableInfo(a),b.length);var d=_.findIndex(b,function(a){return a.isTitle}),e=d>=0?b.slice(0,d):b,f=a.replace?a:"",g=f.replace(/[-+\/.;()'&]/gi,""),h=_.findIndex(e,function(a){return a.term&&a.term.toLowerCase()===g.toLowerCase()});h>=0?(b[h].isExactMatch=!0,this.introManager.data.selectionSource="match_text",this.result=e[h]):this.result&&this.getDisplayText(this.result)!==a&&(this.result=null),this.searchChanged&&(this.introManager.data.validCategory=!!this.result,this.validCategory=this.introManager.data.validCategory),this.searchChanged=!0,this.lastShowGenericPopUpState=!!this.shouldShowGenericPopover(),this.lastSearchedCategories=b,this.isResetTerm(a,b)?(this.lastSearchedTerm="",this.result=null,this.searchTerm=""):this.lastSearchedTerm=a,c.isFirstSearchOnchange=!1,!!this.shouldShowGenericPopover()&&!this.lastShowGenericPopUpState&&this.consumerBiLogger.intro.genericCategoryDialogIsShown(a),""!==a?this.showResults=!0:this.validCategory=!1},c.prototype.isResetTerm=function(b,d){var e=_.clone(a.DEFAULT_CATEGORY);return this.flags.introClearSearchedTextInReload&&c.isFirstSearchOnchange&&1===c.introCategoryCounter&&0===d.length&&""!==b&&b!==e.term},c.prototype.itemClicked=function(a,b){b&&a.stopPropagation()},c.prototype.onSelectedFromList=function(a){var b=this;if(this.introManager.data.selectionSource="category list",this.selected){var c=this.lastSearchedCategories.indexOf(this.selected);this.selected.prefix?(this.searchTerm=this.selected.prefix+" ",this.consumerBiLogger.intro.businessTypeWasSelected("group",this.selected.term,this.sanitizePersonallyIdentifiableInfo(this.lastSearchedTerm),c,this.introManager.data.selectionSource)):(this.result=this.selected,this.consumerBiLogger.intro.businessTypeWasSelected("category",this.selected.term,this.sanitizePersonallyIdentifiableInfo(this.lastSearchedTerm),c,this.introManager.data.selectionSource)),this.validCategory=!!this.result}if(this.lastSearchedTerm.toLowerCase()!==a.toLowerCase())return this.search(a).then(function(c){return c.filter(function(c){return b.getDisplayText(c)!==a})});this.next()},c.prototype.sanitizePersonallyIdentifiableInfo=function(a){if(this.validation.isEmail(a)){var b=a.indexOf("@");if(b>0)return a.substring(0,b)}return a},c.prototype.search=function(a,b,d){var e=this;return void 0===a&&(a=this.searchTerm),void 0===b&&(b=200),void 0===d&&(d=200),this.cmsApi.elasticSearch(a,b,d,this.flags.dontSanitizeSearchTerm).then(function(a){var b=a.results.slice(0,c.RESULTS_LIMIT);if(b.length<c.RESULTS_THRESHOLD&&a.relatedResults.length>0){var d=a.relatedResults.map(function(a){return a.isRelated=!0,a});return b.concat([e.relatedResultsTitle],d)}return b})},c.prototype.getDisplayText=function(a){return a.prefix?a.prefix+"...":a.term},c.prototype.relatedResultsEnter=function(a){this.isTitleHovered=!!a},c.prototype.relatedResultsLeave=function(){this.isTitleHovered=!1},c.prototype.prepareToProceed=function(){this.result=this.result?this.thinResult(this.result):_.clone(a.DEFAULT_CATEGORY),this.updateServiceOffers(this.result)},c.prototype.updateServiceOffers=function(a){var b=_.find(this.applicationParameters.tpaTypes,function(b){return _.contains(b.structureIds,a.structureId)});if(b){var c=this.introManager.selectedOfferByType(b.type);c&&(c.checked=!1)}},c}(a.IntroQuestionsBase);b.RESULTS_THRESHOLD=7,b.RESULTS_LIMIT=200,b.introCategoryCounter=0,b.isFirstSearchOnchange=!0,b.DEFAULT_PRE_SUGGESTIONS=a.DEFAULT_PRE_SUGGESTIONS,a.IntroCategorySearch=b,angular.module("siteGeneratorIntroInternal").component("introCategorySearch",{controller:b,templateUrl:"views/intro/intro-category-search.html"})}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b,c){this.$q=a,this.$timeout=b,this.scaling=!1,this.showButtons=!0,this.showResults=!c}return a.prototype.startScale=function(){var a=this.$q.defer();return this.showResults=!1,this.showButtons=!1,this.scaling=!0,this.$timeout(function(){return a.resolve()}),a.promise},a.prototype.endScale=function(){this.showResults=!0,this.showButtons=!0,this.scaling=!1},a}();a.IntroVisualIndications=b}(intro||(intro={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),intro;!function(a){var b=function(a){function b(b,c,d){var e=a.call(this,b)||this;return e.introManager=c,e.consumerBiLogger=d,e.selected=c.data.category,e}return __extends(b,a),b.$inject=["introStep","introManager","consumerBiLogger"],b.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(config.STATES.INTRO_BLOCKED_CATEGORY,null)},Object.defineProperty(b.prototype,"blockedRedirectUrl",{get:function(){return this.selected.redirectUrl},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"backStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-right":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"nextStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-left":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),b.prototype.onNext=function(){this.consumerBiLogger.intro.selectBusinessTypePageNavigationClick("pro editor",this.selected.term,this.selected.term,this.introManager.data.selectionSource,"escape",this.selected.structureId,this.selected.industryId)},b.prototype.back=function(){this.introStep.back(config.STATES.INTRO_CATEGORY_SEARCH)},b}(a.IntroQuestionsBase);angular.module("siteGeneratorIntroInternal").component("introBlockedCategory",{controller:b,templateUrl:"views/intro/intro-blocked-category.html"})}(intro||(intro={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),intro;!function(a){var b=function(b){function c(c,d,e,f,g){var h=b.call(this,c)||this;if(h.introContentTpa=d,h.consumerBiLogger=e,h.applicationParameters=f,h.introManager=g,h.storesSelectedState=function(){return h.serviceSelectedState(h.applicationParameters.tpaTypes.Stores.type)},h.bookingsSelectedState=function(){return h.serviceSelectedState(h.applicationParameters.tpaTypes.Bookings.type)},h.getSubscribersSelectedState=function(){return h.serviceSelectedState(h.applicationParameters.tpaTypes.GetSubscribers.type)},h.blogSelectedState=function(){return h.serviceSelectedState(h.applicationParameters.tpaTypes.Blog.type)},h.introManager.data.category||(h.introManager.data.category=_.clone(a.DEFAULT_CATEGORY)),h.selectedCategoryType()===a.CategoryTypes.Photographer){h.offers.find(function(a){return a.type===h.applicationParameters.tpaTypes.Stores.type}).checked=!1}return h}return __extends(c,b),c.$inject=["introStep","introContentTpa","consumerBiLogger","applicationParameters","introManager"],c.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(config.STATES.INTRO_SERVICES_OFFER,null)},c.prototype.onOfferChanged=function(){this.consumerBiLogger.intro.servicesSelected(this.storesSelectedState(),this.bookingsSelectedState(),this.getSubscribersSelectedState(),this.blogSelectedState())},c.prototype.selectedCategoryType=function(){return!!this.introManager.data.category&&this.introContentTpa.categoryType(this.introManager.data.category)},c.prototype.shouldShowOffer=function(b){if(this.selectedCategoryType()===a.CategoryTypes.Photographer&&b===this.applicationParameters.tpaTypes.Stores.type)return!1;var c=this.introManager.data.category.structureId,d=_.find(this.applicationParameters.tpaTypes,{type:b});return b!==this.introManager.vertical&&!_.contains(d.structureIds,c)},Object.defineProperty(c.prototype,"offers",{get:function(){return this.introManager.data.serviceOffer},enumerable:!0,configurable:!0}),
c.prototype.next=function(){this.consumerBiLogger.intro.selectServicesPageNavigationClick(config.STATES.INTRO_BUSINESS_NAME,"next",this.storesSelectedState(),this.bookingsSelectedState(),this.getSubscribersSelectedState(),this.blogSelectedState()),this.introStep.next(config.STATES.INTRO_BUSINESS_NAME)},c.prototype.skip=function(){this.consumerBiLogger.intro.selectServicesPageNavigationClick(config.STATES.INTRO_BUSINESS_NAME,"skip",this.storesSelectedState(),this.bookingsSelectedState(),this.getSubscribersSelectedState(),this.blogSelectedState()),this.introStep.skip(config.STATES.INTRO_BUSINESS_NAME)},c.prototype.back=function(){var a=config.STATES.INTRO_CATEGORY_SEARCH;this.consumerBiLogger.intro.selectServicesPageNavigationClick(a,"back",this.storesSelectedState(),this.bookingsSelectedState(),this.getSubscribersSelectedState(),this.blogSelectedState()),this.introStep.back(a)},c.prototype.serviceSelectedState=function(a){var b=_.find(this.offers,function(b){return b.type===a});return this.shouldShowOffer(a)?b.checked.toString():"true (default)"},c}(a.IntroQuestionsBase);angular.module("siteGeneratorIntroInternal").component("introServiceOffer",{controller:b,templateUrl:"views/intro/intro-service-offer.html"})}(intro||(intro={}));var ImportSiteContentProcessEnum;!function(a){a[a.Next=0]="Next",a[a.Error=1]="Error",a[a.Skip=2]="Skip"}(ImportSiteContentProcessEnum||(ImportSiteContentProcessEnum={}));var intro;!function(a){var b=function(){function a(a,b){this.type=a,this.message=b}return a}(),c=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){this.introStep=a,this.flags=b,this.consumerBiLogger=c,this.applicationParameters=d,this.validation=e,this.importSiteContent=f,this.cmsApi=g,this.$timeout=h,this.$q=i,this.wizWebsite=j,this.$translate=k,this.consumerBiLoggerHelpers=l,this.introManager=m,this.address="",this.isNextDisabled=!0,this.isInProcess=!1,this.isHideTooltip=!0,this.nextButtonTooltipTitle="web-address-is-not-valid",this.nextButtonTooltipPosition="top",this.BusinessInfoTimeoutResponse=1e4,this.isPlatformAllowed=!0,this.currentStep=config.STATES.INTRO_IMPORT_SITE_CONTENT,this.importDetails={WixSite:"wix site",NotWixSite:"non-wix site",ContentImported:"content-imported",SiteNotFound:"site-not-found",AddressNotExist:"address-does-not-exist",WixwizError:"wixwiz-error"},this.initData(),this.handleProblemsInWebsiteAddress(),this.introManager.data.referrer=config.STATES.INTRO_IMPORT_SITE_CONTENT}return a.$inject=["introStep","flags","consumerBiLogger","applicationParameters","validation","importSiteContent","cmsApi","$timeout","$q","wizWebsite","$translate","consumerBiLoggerHelpers","introManager"],a.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(this.currentStep,null)},a.prototype.initData=function(){this.introManager.data.contactDetails=this.introManager.data.contactDetails||{},this.address=this.introManager.data.contactDetails.website||this.address},Object.defineProperty(a.prototype,"disallowedPlatforms",{get:function(){return["wix","weebly","shopify","jimdo","squarespace","godaddy","webflow","wordpress","wordpress.com","1&1","web","bigcommerce","thegrid","sitebuilder"]},enumerable:!0,configurable:!0}),a.prototype.showWebsiteAddressError=function(){this.isWebsiteAddressValid=!1,this.isHideTooltip=!1,this.consumerBiLogger.intro.siteConverterErrorIsShown(this.importDetails.AddressNotExist,this.currentStep),this.tipMessage="intro.import-site-content.address-does-not-exist"},a.prototype.hideWebsiteAddressError=function(){this.isWebsiteAddressValid=!0,this.isHideTooltip=!0,this.isError=!1,this.tipMessage=""},a.prototype.handleProblemsInWebsiteAddress=function(){this.validation.isWebsite(this.address)?this.hideWebsiteAddressError():this.showWebsiteAddressError(),this.isNextDisabled=!this.isWebsiteAddressValid},a.prototype.next=function(){var a=this;return this.isInProcess=!0,this.isError=!1,this.address?(this.introManager.data.contactDetails.website=this.address,console.log("Start importing..."),this.importSiteContentProcess().then(function(){return a.nextStep()}).catch(function(b){return a.handleReject(b)})):void this.nextStep()},a.prototype.importSiteContentProcess=function(){var a=this,b=this.getValidatedUrl(this.address);return this.getSiteInfo(b).then(function(){return a.getSiteValidation(b)}).then(function(){return a.getBusinessInfo(b)})},a.prototype.getValidatedUrl=function(a){return 0===a.indexOf("http")?a:"http://"+a},a.prototype.getSiteInfo=function(a){var c=this;console.log("start: getSiteInfo for "+a);var d=ImportSiteContent.phasesNames.SiteInfo;return this.consumerBiLoggerHelpers.resetLoadTime(),this.consumerBiLogger.intro.siteConverterPhaseInImportStart(d),this.importSiteContent.getSiteInfo(a).then(function(e){return console.log("end: getSiteInfo for "+a+"."),e?(console.log("wix site"),c.consumerBiLogger.intro.siteConverterPhaseInImportComplete(c.importDetails.WixSite,d),c.$q.reject(new b(ImportSiteContentProcessEnum.Skip))):(console.log("not wix site."),c.consumerBiLogger.intro.siteConverterPhaseInImportComplete(c.importDetails.NotWixSite,ImportSiteContent.phasesNames.SiteInfo),c.$q.resolve())})},a.prototype.getSiteValidation=function(a){var c=this;return console.log("start: getSiteValidation for "+a),this.consumerBiLoggerHelpers.resetLoadTime(),this.consumerBiLogger.intro.siteConverterPhaseInImportStart(ImportSiteContent.phasesNames.SiteValidationWixwiz),this.importSiteContent.getSiteValidation(a).then(function(d){if(console.log("end: getSiteValidation for "+a+". httpCode: "+d.httpErrorCode+', details: "'+d.statusLine+'"'),d.platform=d.platform&&d.platform.toLowerCase(),c.isPlatformAllowed=!_.contains(c.disallowedPlatforms,d.platform),c.flags.debugWizSiteConverter&&!c.isPlatformAllowed&&(c.isPlatformAllowed=!0,console.log("forcing platform allowed",d.platform)),c.wizWebsite.setPlatformAllowed(c.isPlatformAllowed),200===d.httpErrorCode)return c.consumerBiLogger.intro.siteConverterPhaseInImportComplete(c.importDetails.ContentImported,ImportSiteContent.phasesNames.SiteValidationWixwiz),c.$q.resolve();console.log("ERROR: getSiteValidation"),c.consumerBiLogger.intro.siteConverterPhaseInImportComplete(c.importDetails.SiteNotFound,ImportSiteContent.phasesNames.SiteValidationWixwiz);var e=c.$translate.instant("intro.import-site-content.address-could-not-found");return c.consumerBiLogger.intro.siteConverterErrorIsShown("Site is not found",c.currentStep),c.$q.reject(new b(ImportSiteContentProcessEnum.Error,e))})},a.prototype.getBusinessInfo=function(a){var b=this;return console.log("start: getBusinessInfo for "+a),this.consumerBiLoggerHelpers.resetLoadTime(),this.consumerBiLogger.intro.siteConverterPhaseInImportStart(ImportSiteContent.phasesNames.SiteBusinessInfoImport),this.importSiteContent.getBusinessInfo(a,this.introManager.data.name,this.BusinessInfoTimeoutResponse).then(function(c){return console.log("End: getBusinessInfo for "+a,c),b.consumerBiLogger.intro.siteConverterPhaseInImportComplete(b.importDetails.ContentImported,ImportSiteContent.phasesNames.SiteBusinessInfoImport),b.updateIntroData(a,c),b.$q.resolve()}).catch(function(){return console.log("ERROR: getBusinessInfo for "+a),b.consumerBiLogger.intro.siteConverterPhaseInImportComplete(b.importDetails.WixwizError,ImportSiteContent.phasesNames.SiteBusinessInfoImport),b.$q.resolve()})},a.prototype.updateIntroData=function(a,b){this.introManager.data.socialLinks=[],_.merge(this.introManager.data,new ob.BusinessInfoResponse,b),this.introManager.data.contactDetails.website=a,b.generalInfo.logo&&!_.endsWith(b.generalInfo.logo.toLowerCase(),".svg")&&(this.initMedia(),this.addLogo(b.generalInfo.logo))},a.prototype.addLogo=function(a){var b=this,c=new Image;c.onload=function(){console.log("logo url is valid: "+a),b.introManager.data.media.displayLogo=!0,b.introManager.data.media.logos.unshift({description:"logo",url:a})},c.onerror=function(){console.log("ERROR: logo url is not valid: "+a)},c.src=a},a.prototype.initMedia=function(){this.introManager.data.media=this.introManager.data.media||{};var a={};this.introManager.data.media.logos=[a]},a.prototype.handleReject=function(a){void 0===a&&(a=new b(ImportSiteContentProcessEnum.Next,"")),a.type===ImportSiteContentProcessEnum.Error?(this.isInProcess=!1,this.isNextDisabled=!0,this.isError=!0,this.tipMessage=a.message):a.type===ImportSiteContentProcessEnum.Next?this.nextStep():a.type===ImportSiteContentProcessEnum.Skip&&this.skip()},a.prototype.nextStep=function(){var a=config.STATES.INTRO_IMPORT_SITE_CONFIRM;this.address&&this.isPlatformAllowed||(a=config.STATES.INTRO_BUSINESS_LOCATION),this.consumerBiLogger.intro.siteConverterPagesNavigationClick("next",a,this.currentStep),this.introStep.next(a)},a.prototype.skip=function(){var a=config.STATES.INTRO_BUSINESS_LOCATION;this.consumerBiLogger.intro.siteConverterPagesNavigationClick("skip",a,this.currentStep),this.introManager.data.contactDetails.website="",this.introStep.skip(a)},a.prototype.back=function(){var a=config.STATES.INTRO_BUSINESS_NAME;this.consumerBiLogger.intro.siteConverterPagesNavigationClick("back",a,this.currentStep),this.introStep.back(a)},Object.defineProperty(a.prototype,"boxTipStyle",{get:function(){return this.introStep.backdropBoxPosition?{top:this.introStep.backdropBoxPosition.y+this.introStep.backdropBoxPosition.height,left:this.introStep.backdropBoxPosition.x,width:this.introStep.backdropBoxPosition.width}:null},enumerable:!0,configurable:!0}),a}();angular.module("siteGeneratorIntroInternal").component("introImportSiteContent",{controller:c,templateUrl:"views/intro/intro-import-site-content.html"})}(intro||(intro={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),intro;!function(a){var b=function(b){function c(c,d,e,f,g,h){var i=b.call(this,c)||this;return i.introContentTpa=d,i.consumerBiLogger=e,i.introManager=f,i.flags=g,i.$translate=h,i.isOptional=!1,i.isOptional=i.introManager.data.category&&i.introContentTpa.categoryType(i.introManager.data.category)===a.CategoryTypes.SingleEvent,i}return __extends(c,b),c.$inject=["introStep","introContentTpa","consumerBiLogger","introManager","flags","$translate"],c.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(config.STATES.INTRO_BUSINESS_NAME,null)},Object.defineProperty(c.prototype,"name",{get:function(){return this.introManager.data.name},set:function(a){this.introManager.data.name=a},enumerable:!0,configurable:!0}),c.prototype.canMoveNext=function(){return!this.name},c.prototype.next=function(){this.consumerBiLogger.intro.typeBusinessNamePageNavigationClick(config.STATES.INTRO_BUSINESS_LOCATION,"next",this.name),this.name||this.isOptional||(this.name=this.$translate.instant("intro.business-name.empty"));var a=this.flags.wizSiteConverter?config.STATES.INTRO_IMPORT_SITE_CONTENT:config.STATES.INTRO_BUSINESS_LOCATION;this.introStep.next(a)},c.prototype.skip=function(){this.consumerBiLogger.intro.typeBusinessNamePageNavigationClick(config.STATES.INTRO_BUSINESS_LOCATION,"skip",this.name),this.name="",this.introStep.next(config.STATES.INTRO_BUSINESS_LOCATION)},c.prototype.back=function(){this.consumerBiLogger.intro.typeBusinessNamePageNavigationClick(config.STATES.INTRO_SERVICES_OFFER,"back",this.name);var a=this.isOptional?config.STATES.INTRO_CATEGORY_SEARCH:config.STATES.INTRO_SERVICES_OFFER;this.introStep.back(a)},c.prototype.getBusinessNameTitle=function(){var a=this.introManager.getCategoryNoError(),b=this.introContentTpa.businessNameTitle(a);return this.$translate.instant(b)},c}(a.IntroQuestionsBase);angular.module("siteGeneratorIntroInternal").component("introBusinessName",{controller:b,templateUrl:"views/intro/intro-business-name.html"})}(intro||(intro={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),intro;!function(a){var b=function(b){function c(c,d,e,f,g,h){var i=b.call(this,c)||this;i.$translate=d,i.introContentTpa=e,i.consumerBiLogger=f,i.flags=g,i.introManager=h,i.hidePlaceholder=!1,i.isOptional=!1,i.placesOptions={types:["geocode"]},i.isValid=function(){return i.isOptional||i.introManager.hasAddress};var j=i.introManager.getCategoryNoError();return i.categoryType=e.categoryType(j),i.categoryType===a.CategoryTypes.SingleEvent&&(i.isOptional=!0,i.placesOptions.types=["establishment"]),i.introManager.data.referrer=config.STATES.INTRO_BUSINESS_LOCATION,i.consumerBiLogger.intro.pageView(config.STATES.INTRO_BUSINESS_LOCATION,null),i}return __extends(c,b),c.$inject=["introStep","$translate","introContentTpa","consumerBiLogger","flags","introManager"],Object.defineProperty(c.prototype,"address",{get:function(){return this.introManager.data.userLocation},set:function(a){this.introManager.data.userLocation=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"placeholder",{get:function(){if(this.hidePlaceholder)return"";var a=this.categoryType?"-"+this.categoryType:"";return this.$translate.instant("intro.business-location.input-placeholder"+a)},enumerable:!0,configurable:!0}),c.prototype.getLocationTitle=function(){var a=this.introManager.getCategoryNoError(),b=this.introContentTpa.locationTitle(a);return this.$translate.instant(b)},c.prototype.skip=function(){this.introManager.data.userLocation=null,this.introManager.data.ipBasedLocation=!1,this.introManager.data.indifferentLocation=!1;var a=this.nextStep(!0);delete this.introManager.data.searchResults,this.consumerBiLogger.intro.typeBusinessLocationPageNavigationClick(a,"skip",null),this.introStep.next(a)},c.prototype.nextStep=function(b){return this.categoryType===a.CategoryTypes.SingleEvent?config.STATES.INTRO_BUSINESS_DATES:!b||this.introManager.data.indifferentLocation?config.STATES.INTRO_SEARCH_CONFIRM:config.STATES.INTRO_EDIT_USER},c.prototype.next=function(){if(this.isValid()){var a=this.introManager.hasAddress?this.introManager.data.userLocation.formatted_address:this.introManager.data.userLocation;this.introManager.data.ipBasedLocation=!1,this.introManager.data.indifferentLocation=!1,this.consumerBiLogger.intro.typeBusinessLocationPageNavigationClick(config.STATES.INTRO_SEARCH_CONFIRM,"next",a),this.introStep.next(this.nextStep())}},c.prototype.back=function(){var a=config.STATES.INTRO_BUSINESS_NAME;this.flags.wizSiteConverter&&(a=config.STATES.INTRO_IMPORT_SITE_CONTENT),this.consumerBiLogger.intro.typeBusinessLocationPageNavigationClick(a,"back",null),this.introStep.back(a)},c}(a.IntroQuestionsBase);angular.module("siteGeneratorIntroInternal").component("introBusinessLocation",{controller:b,templateUrl:"views/intro/intro-business-location.html"})}(intro||(intro={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),intro;!function(a){var b=function(a){function b(b,c,d){var e=a.call(this,b)||this;return e.introManager=d,e.timezones=ob.TimeZones,e.hasStartDate=function(){return e.introManager.data.dates&&!!e.introManager.data.dates[0]},e.hasEndDate=function(){return e.introManager.data.dates&&2===e.introManager.data.dates.length},e.addDate=function(){return e.introManager.data.dates[1]=null},e.next=function(){return e.introStep.back(config.STATES.INTRO_EVENT_DETAILS)},e.back=function(){return e.introStep.back(config.STATES.INTRO_BUSINESS_LOCATION)},e.strTime=function(a,b){return _.padLeft(a,2,"0")+":"+_.padLeft(b,2,"0")},e.updateTimes=function(){return e.selectedTimes=e.introManager.data.dates.map(function(a){return a?e.strTime(a.getHours(),a.getMinutes()):null})},d.data.dates&&d.data.dates[0]||(d.data.dates=[null]),d.data.timezone||(d.data.timezone=c.userTimezone()),e.optionalTimes=_.range(0,24).reduce(function(a,b,c){return a[2*c]=e.strTime(b,"00"),a[2*c+1]=e.strTime(b,"30"),a},[]),e.updateTimes(),e}return __extends(b,a),b.$inject=["introStep","introWindow","introManager"],Object.defineProperty(b.prototype,"dates",{get:function(){return this.introManager.data.dates},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"timezone",{get:function(){return this.introManager.data.timezone},set:function(a){this.introManager.data.timezone=a},enumerable:!0,configurable:!0}),b.prototype.timeChanged=function(a,b){var c=b.split(":"),d=c[0],e=c[1];this.dates[a]=this.dates[a]||new Date,this.dates[a].setHours(+d,+e)},b.prototype.removeDate=function(a){this.introManager.data.dates.splice(a,1),0===this.introManager.data.dates.length&&(this.introManager.data.dates=[null]),this.updateTimes()},b.prototype.skip=function(){delete this.introManager.data.dates,this.next()},b}(a.IntroQuestionsBase);angular.module("siteGeneratorIntroInternal").component("introBusinessDates",{controller:b,templateUrl:"views/intro/intro-business-dates.html"})}(intro||(intro={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),intro;!function(a){var b=function(a){function b(b,c,d,e,f){var g=a.call(this,b)||this;return g.flags=c,g.consumerBiLogger=d,g.$q=e,g.introManager=f,g}return __extends(b,a),b.$inject=["introStep","flags","consumerBiLogger","$q","introManager"],b.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(config.STATES.INTRO_SEARCH_CONFIRM,null)},Object.defineProperty(b.prototype,"businessName",{get:function(){return this.introManager.data.name},enumerable:!0,configurable:!0}),b.prototype.skip=function(){this.consumerBiLogger.intro.approveSearchInformationPageNavigationClick(config.STATES.INTRO_EDIT_USER,"skip",this.introManager.data.name),this.introStep.wait(),this.introManager.data.referrer=config.STATES.INTRO_SEARCH_CONFIRM,this.introManager.setAddress(this.introManager.data.userLocation),this.introStep.skip(config.STATES.INTRO_EDIT_USER)},b.prototype.next=function(){var a=this;this.consumerBiLogger.intro.approveSearchInformationPageNavigationClick(config.STATES.INTRO_SELECT_USER,"next",this.introManager.data.name);var b=!1,c=this.introStep.wait(),d=this.introManager.searchUsers(!1);c.then(function(){b||a.introStep.loadingElement.show()}),this.$q.all([c,d]).finally(function(){b=!0,a.introStep.loadingElement.hide(),a.introStep.next(config.STATES.INTRO_SELECT_USER)})},b.prototype.back=function(){delete this.introManager.data.searchResults,this.consumerBiLogger.intro.approveSearchInformationPageNavigationClick(config.STATES.INTRO_BUSINESS_LOCATION,"back",this.introManager.data.name),this.introStep.back(config.STATES.INTRO_BUSINESS_LOCATION)},b}(a.IntroQuestionsBase);angular.module("siteGeneratorIntroInternal").component("introSearchConfirm",{controller:b,templateUrl:"views/intro/intro-search-confirm.html"})}(intro||(intro={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),intro;!function(a){var b=function(a){function b(b,c,d,e,f,g,h,i){var j=a.call(this,b)||this;return j.flags=c,j.consumerBiLogger=d,j.$q=e,j.introManager=f,j.wizWebsite=g,j.siteConverterLogs=h,j.fullStoryLoader=i,j.introManager.data.referrer=config.STATES.INTRO_IMPORT_SITE_CONFIRM,j}return __extends(b,a),b.$inject=["introStep","flags","consumerBiLogger","$q","introManager","wizWebsite","siteConverterLogs","fullStoryLoader"],b.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(config.STATES.INTRO_SEARCH_CONFIRM,null),this.wizWebsite.preloadFullSiteData(this.introManager.data.contactDetails.website,this.introManager.data.name)},b.prototype.next=function(){this.loadFullstory(),this.consumerBiLogger.intro.approveSearchInformationPageNavigationClick(config.STATES.INTRO_IMPORT_SITE_CONTENT,"next",this.introManager.data.name),this.wizWebsite.postloadFullSiteData(this.introManager.data.contactDetails.website,this.introManager.data.name);var a=config.STATES.INTRO_EDIT_USER;this.consumerBiLogger.intro.siteConverterPagesNavigationClick("next",a,config.STATES.INTRO_IMPORT_SITE_CONFIRM),this.introStep.next(a)},b.prototype.back=function(){var a=config.STATES.INTRO_IMPORT_SITE_CONTENT;this.consumerBiLogger.intro.approveSearchInformationPageNavigationClick(a,"back",this.introManager.data.name),this.consumerBiLogger.intro.siteConverterPagesNavigationClick("back",a,config.STATES.INTRO_IMPORT_SITE_CONFIRM),this.introStep.back(a)},b.prototype.loadFullstory=function(){var a=this,b={label:"site-generator-statics-consumer",sample:1,onReady:function(b){return a.consumerBiLogger.intro.fullStoryStarted(b)}};this.fullStoryLoader(b)},b}(a.IntroQuestionsBase);angular.module("siteGeneratorIntroInternal").component("introImportSiteConfirm",{controller:b,templateUrl:"views/intro/intro-import-site-confirm.html"})}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b,c,d,e,f){var g=this;this.introStep=a,this.$element=b,this.introManager=c,this.experimentManager=d,this.flags=e,this.consumerBiLogger=f,this.title=this.getTitle(),this.resultsText=this.getResultsText(),this.name=this.introManager.data.name,this.address=this.introManager.data.userLocation,this.introManager.data.referrer=config.STATES.INTRO_SELECT_USER,this.scrollable=this.$element.find('[data-hook="scroll-container"]'),this.locationInput=this.$element.find('[data-hook="business-location-input"]');var h=this.$element.find('[data-hook="back-to-top"]');this.scrollable.on("scroll",_.throttle(function(){return requestAnimationFrame(function(){return g.updateScrollTopVisibility(h)})},1e3)),this.updateScrollTopVisibility(h)}return a.$inject=["introStep","$element","introManager","experimentManager","flags","consumerBiLogger"],a.prototype.updateScrollTopVisibility=function(a){this.locationInput.offset().top+this.locationInput.outerHeight()<0?a.fadeIn(400):a.fadeOut(400)},a.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(config.STATES.INTRO_SELECT_USER,this.results.length)},a.prototype.getResultsText=function(){return this.introManager.isWixWizError?"intro.select-user.results-error":0===this.results.length?"intro.select-user.results-none":"intro.select-user.results-"+(this.results.length>1?"multiple":"single")},a.prototype.getResultsLength=function(){return this.results.length>0?this.results.length:""},a.prototype.onGoToTopClicked=function(){this.consumerBiLogger.intro.wixwizSearchResultsGoToTopOfPageClick(this.results.length,null),this.goToTop()},a.prototype.goToTop=function(){this.scrollable.animate({scrollTop:0})},a.prototype.getTitle=function(){var a="intro.select-user.title";return this.introManager.isWixWizError?a="intro.select-user.title-error":0===this.results.length&&(a="intro.select-user.title-no-results"),a},Object.defineProperty(a.prototype,"subtitle",{get:function(){return this.introManager.isWixWizError?"error":0===this.results.length?"noresults":"someresults"},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"results",{get:function(){return this.introManager.data.searchResults||[]},enumerable:!0,configurable:!0}),a.prototype.search=function(){var a=this;this.introManager.data.indifferentLocation=!this.address,this.introManager.data.name=this.name,this.introManager.data.userLocation=this.address,this.consumerBiLogger.intro.clickOnSearchButtonInSelectUserPage(this.name,this.introManager.data.userLocation.formatted_address),this.introManager.searchUsers().finally(function(){a.title=a.getTitle(),a.resultsText=a.getResultsText()})},a.prototype.next=function(a){var b=this;this.consumerBiLogger.intro.selectInfoCardPageNavigationClick(config.STATES.INTRO_SEARCH_CONFIRM,"next",this.results.length,null,this.results.indexOf(a),a.nameSimilarityRank,a.distance),this.introManager.getExtendedUser(a).finally(function(){_.get(b.introManager.data,"contactDetails.address.fullAddress")||b.introManager.setAddress(b.introManager.data.userLocation),b.introStep.next(config.STATES.INTRO_EDIT_USER)})},a.prototype.skip=function(){this.consumerBiLogger.intro.selectInfoCardPageNavigationClick(config.STATES.INTRO_SEARCH_CONFIRM,"skip",this.results.length,null,null,null,null),this.introManager.setAddress(this.introManager.data.userLocation),this.introStep.skip(config.STATES.INTRO_EDIT_USER)},a.prototype.back=function(){this.consumerBiLogger.intro.selectInfoCardPageNavigationClick(config.STATES.INTRO_SEARCH_CONFIRM,"back",this.results.length,null,null,null,null),this.introStep.back(config.STATES.INTRO_SEARCH_CONFIRM)},a}();angular.module("siteGeneratorIntroInternal").component("introSelectUser",{templateUrl:"views/intro/intro-select-user.html",controller:b,bindings:{}}),angular.module("siteGeneratorIntroInternal").directive("introScrollbar",["osUtils",function(a){return{restrict:"A",compile:function(b,c){return a.isIE&&b[0].removeAttribute("cc-scrollbar"),null}}}])}(intro||(intro={}));var intro;!function(a){var b=function(){function b(a,b,c,d,e,f,g){this.applicationState=a,this.introManager=b,this.introStep=c,this.wizWebsite=d,this.logoManager=e,this.consumerBiLogger=f,this.flags=g}return b.$inject=["applicationState","introManager","introStep","wizWebsite","logoManager","consumerBiLogger","flags"],b.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(config.STATES.INTRO_EDIT_USER,null)},Object.defineProperty(b.prototype,"introData",{get:function(){return this.introManager.data},enumerable:!0,configurable:!0}),b.prototype.next=function(){var b=this;if(this.consumerBiLogger.intro.editInfoCardPageNavigationClick(config.STATES.BUILDER,"next"),!this.introManager.data)throw"intro manager did not initialized.";this.introStep.hideContent(!0).then(function(){b.introManager.prepareDataForBuilder(),b.introStep.next(a.INTRO_FINISHED),b.applicationState.goToBuilder()})},b.prototype.back=function(){var b=a.INTRO_STATES.INTRO_SELECT_USER;this.flags.wizSiteConverter?b=this.introManager.data.referrer||a.INTRO_STATES.INTRO_BUSINESS_LOCATION:this.introManager.data.userLocation?this.introManager.data.searchResults||(b=a.INTRO_STATES.INTRO_SEARCH_CONFIRM):b=a.INTRO_STATES.INTRO_BUSINESS_LOCATION,this.consumerBiLogger.intro.editInfoCardPageNavigationClick(b,"back"),this.introStep.back(b)},b}();angular.module("siteGeneratorIntroInternal").component("introEditUser",{templateUrl:"views/intro/intro-edit-user.html",controller:b,bindings:{}})}(intro||(intro={}));var intro;!function(a){var b=function(){function b(a,b,c,d,e,f,g){var h=this;this.introStep=a,this.osUtils=b,this.consumerBiLogger=c,this.applicationState=d,this.socialLinkManager=e,this.applicationParameters=f,this.introManager=g,this.addressToDisplay="TBD",this.fromDateToDisplay="TBD",this.back=function(){return h.introStep.back(config.STATES.INTRO_BUSINESS_DATES)},this.changeLocation=function(){return h.introStep.back(config.STATES.INTRO_BUSINESS_LOCATION)},this.changeDates=function(){return h.introStep.back(config.STATES.INTRO_BUSINESS_DATES)},this.enableAddSocialLink=function(){return h.data.socialLinks.length<h.applicationParameters.maxSocialLinks},this.onSocialChanged=function(a){return a.platform=h.socialLinkManager.getPlatformNameByUrl(a.url)},this.isLinkInvalid=function(a){return!a.platform&&a.url},this.data=g.data;var i="string"==typeof this.data.userLocation?this.data.userLocation:_.get(this.data,"userLocation.formatted_address");if(i&&(this.addressToDisplay=i),this.data.dates&&this.data.dates[0]&&(this.fromDateToDisplay=this.dateToString(this.data.dates[0]),this.data.dates[1]&&(this.toDateToDisplay=this.dateToString(this.data.dates[1])),this.data.timezone)){var j=_.find(ob.TimeZones,{key:this.data.timezone});this.timezoneToDisplay=j&&j.displayName}}return b.$inject=["introStep","osUtils","consumerBiLogger","applicationState","socialLinkManager","applicationParameters","introManager"],b.prototype.dateToString=function(a){return"from "+a.getDate()+"/"+a.getMonth()+"/"+a.getFullYear()+" at "+_.padLeft(""+a.getHours(),2,"0")+":"+_.padLeft(""+a.getMinutes(),2,"0")+"}"},b.prototype.next=function(){var b=this;this.introStep.hideContent(!0).then(function(){b.introManager.prepareDataForBuilder(),b.introStep.next(a.INTRO_FINISHED),b.applicationState.goToBuilder()})},b.prototype.addEmptySocialLink=function(){var a={platform:"",url:""};this.data.socialLinks.push(a),this.osUtils.isIE||(this.focusedSocial=a)},b.prototype.deleteSocialLink=function(a){this.data.socialLinks=this.data.socialLinks.filter(function(b){return b!==a}),this.onFieldChanged(a.platform,"social",a.url,"")},b.prototype.onFieldChanged=function(a,b,c,d,e){if(d!==c){var f=d?d.length:0,g=c?d?"edit":"remove":"add";this.consumerBiLogger.intro.infoCardAddEditRemoveInfo(a,b,f,g,"intro",e||null)}},b}();angular.module("siteGeneratorIntroInternal").component("introEventDetails",{controller:b,templateUrl:"views/intro/intro-event-details.html"})}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b){this.$parse=a,this.clientTopology=b,this.logoUrl=this.getLogoPlaceholder()}return a.$inject=["$parse","clientTopology"],a.prototype.getLogoPlaceholder=function(){var a=this.$parse("media.logos[0].url")(this.data);if(!a){var b=Math.floor(4*Math.random())+2;a=this.clientTopology.staticsUrl+"/images/intro/logo-placeholder"+b+".png"}return a},a}();angular.module("siteGeneratorIntroInternal").component("businessCardStatic",{controller:b,templateUrl:"views/intro/business-card-static.html",bindings:{data:"="}})}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b){var c=this;a.$watch(function(){return c.logoUrl},function(a){b.find("image").attr("xlink:href",a)})}return a.$inject=["$scope","$element"],a}();angular.module("siteGeneratorIntroInternal").component("businessCardHeader",{controller:b,templateUrl:"views/intro/business-card-header.html",bindings:{logoUrl:"="}})}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b,c,d){this.mediaGalleryAdapter=a,this.previewUrls=b,this.consumerBiLogger=c,this.$element=d}return a.$inject=["mediaGalleryAdapter","previewUrls","consumerBiLogger","$element"],a.prototype.openMediaManager=function(){var a=this;this.mediaGalleryAdapter.selectLogo().then(function(b){var c=a.previewUrls.getImageThumbnailUrl(b[0].relativeUri,b[0].mediaType);a.onEdit({$url:c,$data:b[0]})})},a.prototype.logoIsPlaceholder=function(){return this.url&&this.url.indexOf("/logo-placeholder")>=0},a.prototype.clickOnInputFile=function(){this.inputFileElm||(this.inputFileElm=this.$element.find('[data-hook="file-upload"]')),this.consumerBiLogger.intro.clickOnReplaceLogoIntroWelcometourBuilder(this.origin.startsWith("welcome")?"welcome":"no-tour",this.origin),this.inputFileElm.click()},a}();angular.module("siteGeneratorIntroInternal").component("businessCardLogo",{controller:b,templateUrl:"views/intro/business-card-logo.html",bindings:{url:"=",origin:"=",enableEdit:"=?",justReplaceButton:"=?",onDelete:"&",onEdit:"&",useMediaManager:"=?",showWrappingCircle:"=?",isUploading:"=",uploadError:"="}})}(intro||(intro={}));var BackdropAnimationsCanvasUtils=function(){function a(){}return a.prototype.createSprite=function(a){var b=this,c=[];return a.forEach(function(a){switch(a.type){case"circle":
_.isUndefined(a.radius)&&console.error("Circle definition missing radius",a),c.push(b.createSpriteCircle(a));break;case"rect":(_.isUndefined(a.width)||_.isUndefined(a.height))&&console.error("Rectangle definition missing width or height",a),c.push(b.createSpriteRect(a))}}),c},a.prototype.drawCircle=function(a,b,c,d,e,f,g){if(void 0===e&&(e="#fff"),void 0===g&&(g=0),a.save(),f){var h=f.from,i=h[0],j=h[1],k=f.to,l=k[0],m=k[1],n=a.createLinearGradient(i,j,l,m);_.forEach(f.stops,function(a){return n.addColorStop(a[0],a[1])}),a.fillStyle=n}else a.fillStyle=e;g&&(a.shadowColor=e,a.shadowBlur=g,a.shadowOffsetX=0,a.shadowOffsetY=0),a.beginPath(),a.arc(c,d,b,0,2*Math.PI),a.fill(),a.closePath(),a.restore()},a.prototype.drawRect=function(a,b,c,d,e,f,g,h){if(void 0===f&&(f="#fff"),void 0===h&&(h=0),a.save(),g){var i=g.from,j=i[0],k=i[1],l=g.to,m=l[0],n=l[1],o=a.createLinearGradient(j,k,m,n);_.forEach(g.stops,function(a){return o.addColorStop(a[0],a[1])}),a.fillStyle=o}else a.fillStyle=f;h&&(a.shadowColor=f,a.shadowBlur=h,a.shadowOffsetX=0,a.shadowOffsetY=0),a.beginPath(),a.rect(d,e,b,c),a.fill(),a.closePath(),a.restore()},a.prototype.createSpriteCircle=function(a){var b=a.name,c=a.group,d=a.type,e=a.radius,f=a.color,g=a.gradient,h=a.blur,i=document.createElement("canvas"),j=i.getContext("2d");return i.width=i.height=2*(e+h),this.drawCircle(j,e,i.width/2,i.height/2,f,g),h&&StackBlur.canvasRGBA(j.canvas,0,0,i.width,i.height,h),{name:b,group:c,type:d,src:i}},a.prototype.createSpriteRect=function(a){var b=a.name,c=a.group,d=a.type,e=a.width,f=a.height,g=a.color,h=a.gradient,i=a.blur,j=document.createElement("canvas"),k=j.getContext("2d");return j.width=2*(e+i),j.height=2*(f+i),this.drawRect(k,e,f,i,i,g,h),i&&StackBlur.canvasRGBA(k.canvas,0,0,j.width,j.height,i),{name:b,group:c,type:d,src:j}},a.prototype.createShadowSprite=function(a,b,c){var d=document.createElement("canvas").getContext("2d"),e=a.height/5,f=a.width,g=b*Math.PI/180,h=e*g;d.canvas.width=f+h+c,d.canvas.height=e+c;var i=this.drawTrapezoid("rgba(27,105,154)",f,e,0,e,h,c),j=this.drawTrapezoid("rgba(27,105,154)",f,e,e/1.68,e-10,h,.75*c);return d.globalAlpha=.06,d.drawImage(i,0,0),d.drawImage(j,0,0),{canvas:d.canvas,width:d.canvas.width,height:d.canvas.height,delta:h}},a.prototype.drawTrapezoid=function(a,b,c,d,e,f,g){var h=document.createElement("canvas").getContext("2d");return h.canvas.width=b+f+g,h.canvas.height=c+g,h.save(),h.translate(g/2,g/2),h.fillStyle=a,h.beginPath(),h.moveTo(f,d),h.lineTo(b,d),h.lineTo(b+f,e),h.lineTo(0,e),h.closePath(),h.fill(),h.restore(),g&&StackBlur.canvasRGBA(h.canvas,0,0,h.canvas.width,h.canvas.height,g),h.canvas},a}();angular.module("siteGeneratorIntroInternal").service("backdropAnimationsCanvasUtils",BackdropAnimationsCanvasUtils);var BackdropAnimationsConfig=function(){function a(){this.bg={color:"#67a0bd",gradient:"linear-gradient(to bottom, #6ea2c8 0%, #93c8d9 17%, #93c8d9 26%, #629bb7 58%, #4c7e9e 74%, #487697 80%, #446786 92%)"},this.options={firstTime:{duration:.75},idle:{duration:.6,minDuration:5,maxDuration:10,heightPercentage:.85,offset:{x:10,y:5},mouseOffset:{starIdle4:5,starIdle3:3,starIdle2:1.4,starIdle1:1},amount:{starIdle1:20,starIdle2:7,starIdle3:4,starIdle4:2}},slide:{duration:1,repeat:0},blank:{duration:1.4},wait:{duration:4,notify:2,durationOffset:{star1:2.4,star2:2,star3:1.7,star4:1.4,star5:1.1,line1:2.3,line2:1.9,line3:1},amount:{star1:20,star2:10,star3:7,star4:2,star5:1,line1:2,line2:1,line3:1},distance:3},next:{show:{duration:1},hide:{duration:.8}},back:{show:{duration:.2},hide:{duration:.3}},resize:{hide:{duration:.3},show:{duration:.3}},scale:{duration:.5}},this.spriteData=[{name:"starIdle1",group:"stars",type:"rect",width:4,height:4,color:"rgba(255,255,255,0.15)",blur:0},{name:"starIdle2",group:"stars",type:"rect",width:8,height:8,color:"rgba(255,255,255,0.2)",blur:1},{name:"starIdle3",group:"stars",type:"rect",width:15,height:15,color:"rgba(255,255,255,0.3)",blur:2},{name:"starIdle4",group:"stars",type:"rect",width:30,height:30,color:"rgba(255,255,255,0.2)",blur:1},{name:"star1",group:"stars",type:"rect",width:4,height:4,color:"rgba(255,255,255,0.4)",blur:0},{name:"star2",group:"stars",type:"rect",width:8,height:8,color:"rgba(255,255,255,0.3)",blur:1},{name:"star3",group:"stars",type:"rect",width:15,height:15,color:"rgba(255,255,255,0.5)",blur:1},{name:"star4",group:"stars",type:"rect",width:30,height:30,color:"rgba(255,255,255,0.3)",blur:5},{name:"star5",group:"stars",type:"rect",width:80,height:80,color:"rgba(255,255,255,0.2)",blur:20},{name:"line1",group:"lines",type:"rect",width:200,height:2,gradient:{from:[0,0],to:[200,0],stops:[[0,"rgba(255,255,255,0.3)"],[1,"rgba(255,255,255, 0)"]]},blur:0},{name:"line2",group:"lines",type:"rect",width:300,height:3,gradient:{from:[0,0],to:[300,0],stops:[[0,"rgba(255,255,255,0.4)"],[1,"rgba(255,255,255, 0)"]]},blur:0},{name:"line3",group:"lines",type:"rect",width:400,height:3,gradient:{from:[0,0],to:[400,0],stops:[[0,"rgba(255,255,255,0.6)"],[1,"rgba(255,255,255, 0)"]]},blur:0},{name:"shadow",type:"circle",group:"shadows",radius:60,gradient:{from:[0,0],to:[0,60],stops:[[0,"rgba(0,0,0,1)"],[1,"rgba(0,0,0,0.3)"]]},blur:30}]}return a}();angular.module("siteGeneratorIntroInternal").constant("backdropAnimationsConfig",new BackdropAnimationsConfig);var BackdropAnimationsTransitions=function(){function a(a,b){var c=this;this.backdropAnimationsCanvasUtils=a,this.$q=b,this.shadowOpacity=1,this.horizLineOut=function(a,b){var d=c.$q.defer(),e=a.layers,f=a.timelines,g=a.state,h=g.panel.prevDimensions,i=_.find(e.panelLayers,function(a){return"panel"===a.name}),j=_.find(e.panelLayers,function(a){return"shadow"===a.name});return f.transitionTimeline=f.transitionTimeline||new TimelineMax,f.transitionTimeline.to(i,b,{y:"+="+h.height/2,height:2,ease:Quint.easeIn},0).to(j,b,{alpha:0,height:30,y:"+="+(j.height/2-30),ease:Quint.easeIn},0).eventCallback("onComplete",function(a,b){a.panel.visible=!1,f.transitionTimeline=null,b.resolve()},[g,d]),d.promise},this.vertLineOut=function(a,b){var d=c.$q.defer(),e=a.layers,f=a.timelines,g=a.state,h=g.panel.prevDimensions,i=_.find(e.panelLayers,function(a){return"panel"===a.name}),j=_.find(e.panelLayers,function(a){return"shadow"===a.name});return f.transitionTimeline=f.transitionTimeline||new TimelineMax,f.transitionTimeline.to(i,.7*b,{x:"+="+h.width/2,width:2,ease:Quint.easeIn},0).to(j,.7*b,{x:h.x+h.width/2-15,alpha:0,width:30,height:30,y:"+="+(j.height/2-30),ease:Quint.easeIn},0).eventCallback("onComplete",function(a,b){a.panel.visible=!1,f.transitionTimeline=null,b.resolve()},[g,d]),d.promise},this.horizLineCenterIn=function(a,b){var d=a.layers,e=a.timelines,f=a.state,g=c.$q.defer(),h=f.panel.nextDimensions,i=c.getPanelLayer(h),j=c.getPanelShadowLayer(a,h);return d.panelLayers=[i,j],e.transitionTimeline=e.transitionTimeline||new TimelineMax,e.transitionTimeline.set(i,{x:0,y:0,translateX:h.x+h.width/2,translateY:h.y,width:2,rotate:0,alpha:1}).to(i,.4*b,{bezier:{type:"cubic",values:[{translateX:h.x+h.width/2,translateY:h.y},{translateX:h.x+3*h.width/4,translateY:h.y},{translateX:h.x+h.width,translateY:h.y+h.height/4},{translateX:h.x+h.width,translateY:h.y+h.height/2}]},rotate:Math.PI/2,height:h.width,ease:Cubic.easeOut}).set(i,{translateX:h.x,width:h.width,height:2,rotate:0}).set(j,{height:30,y:"+="+(j.height/2-30)}).to(i,.6*b,{translateY:h.y,height:h.height,ease:Expo.easeInOut},"showPanel").to(j,.6*b,{alpha:c.shadowOpacity,height:j.height,y:"-="+(j.height/2-30),ease:Expo.easeInOut},"showPanel").eventCallback("onComplete",function(a,b){a.panel.visible=!0,e.transitionTimeline=null,b.resolve()},[f,g]),g.promise},this.vertLineRightIn=function(a,b){var d=a.canvas,e=a.layers,f=a.timelines,g=a.state,h=c.$q.defer(),i=g.panel.nextDimensions,j=c.getPanelLayer(i),k=c.getPanelShadowLayer(a,i);return e.panelLayers=[j,k],f.transitionTimeline=f.transitionTimeline||new TimelineMax,f.transitionTimeline.set(j,{x:0,y:0,rotate:0,height:2,alpha:1,translateX:i.x,translateY:i.y}).to(j,.4*b,{bezier:{type:"cubic",values:[{translateX:i.x,translateY:i.y+i.height/2},{translateX:i.x,translateY:i.y+i.height/4},{translateX:i.x+i.width/2,translateY:i.y},{translateX:i.x+i.width,translateY:i.y}]},rotate:Math.PI/2,width:i.height,height:2,ease:Cubic.easeOut}).set(j,{height:i.height,width:2,rotate:0}).set(k,{width:30,x:i.x+1.075*i.width,y:"+="+(k.height/2-30)}).to(j,.6*b,{translateX:i.x,width:i.width,ease:Expo.easeInOut},"showPanel").to(k,.6*b,{alpha:c.shadowOpacity,ease:Cubic.easeIn},"showPanel").to(k,.6*b,{x:(d.width-k.width)/2,y:"-="+(k.height/2-30),width:k.width,ease:Expo.easeInOut},"showPanel").eventCallback("onComplete",function(a,b){a.panel.visible=!0,f.transitionTimeline=null,b.resolve()},[g,h]),h.promise},this.fadeOut=function(a,b,d){var e=c.$q.defer(),f=a.layers,g=a.timelines,h=a.state;return g.transitionTimeline=g.transitionTimeline||new TimelineMax,g.transitionTimeline.to(f.panelLayers,b,{alpha:0,ease:d||Sine.easeOut},0).eventCallback("onComplete",function(a,b){a.panel.visible=!1,g.transitionTimeline=null,f.panelLayers=[],b.resolve()},[h,e]),e.promise},this.cutOut=function(a,b){var d=c.$q.defer(),e=a.layers,f=a.timelines,g=a.state;return f.transitionTimeline=f.transitionTimeline||new TimelineMax,f.transitionTimeline.to(e.panelLayers,.1*b,{},0).eventCallback("onComplete",function(a,b){a.panel.visible=!1,f.transitionTimeline=null,e.panelLayers=[],b.resolve()},[g,d]),d.promise},this.fadeIn=function(a,b,d){var e=a.layers,f=a.timelines,g=a.state,h=c.$q.defer(),i=g.panel.nextDimensions,j=c.getPanelLayer(i),k=c.getPanelShadowLayer(a,i);return e.panelLayers=[j,k],f.transitionTimeline=f.transitionTimeline||new TimelineMax,f.transitionTimeline.to(j,b,{alpha:1,ease:d||Sine.easeOut},0).to(k,b,{alpha:c.shadowOpacity,ease:d||Sine.easeOut},0).eventCallback("onComplete",function(a,b){a.panel.visible=!0,f.transitionTimeline=null,b.resolve()},[g,h]),h.promise},this.scale=function(a,b,d){var e=a.layers,f=a.timelines,g=a.state,h=c.$q.defer(),i=g.panel.nextDimensions,j=_.find(e.panelLayers,function(a){return"panel"===a.name}),k=_.find(e.panelLayers,function(a){return"shadow"===a.name}),l=c.getPanelLayer(i),m=c.getPanelShadowLayer(a,i);return f.transitionTimeline=f.transitionTimeline||new TimelineMax,f.transitionTimeline.to(j,b,_.assign({ease:d||Sine.easeOut},_.pick(l,["x","y","width","height"])),0).to(k,b,_.assign({ease:d||Sine.easeOut},_.pick(m,["x","y","width","height"])),0).eventCallback("onComplete",function(a,b){a.panel.visible=!0,f.transitionTimeline=null,b.resolve()},[g,h]),h.promise},this.floatIn=function(a,b){var d=a.layers,e=a.timelines,f=a.state,g=f.panel.nextDimensions,h=c.fadeIn(a,b,Quad.easeIn);return e.transitionTimeline.from(d.panelLayers,b,{x:"-="+g.width/2,ease:Quad.easeOut},0),h},this.floatOut=function(a,b){var d=a.layers,e=a.timelines,f=a.state,g=f.panel.prevDimensions,h=c.fadeOut(a,b,Quad.easeInOut);return e.transitionTimeline.to(d.panelLayers,b,{x:"+="+g.width/2,ease:Quad.easeIn},0),h},this.fadeAndScaleIn=function(a,b){var d=a.layers,e=a.timelines,f=a.state,g=f.panel.nextDimensions,h=c.fadeIn(a,b,Quint.easeIn);return e.transitionTimeline.from(d.panelLayers,b,{width:"-="+.1*g.width,height:"-="+.1*g.height,x:"+="+.05*g.width,y:"+="+.05*g.height,ease:Quad.easeOut},0),h},this.particlesIn=function(a,b){var d=a.layers,e=a.timelines,f=a.state,g=c.$q.defer(),h=f.panel.nextDimensions,i=h.x,j=h.y,k=h.width,l=h.height,m={panel:{width:70,height:70},cube:{width:70,height:70},one:{width:35,height:35},two:{width:45,height:45},three:{width:60,height:60},four:{width:70,height:70}},n=[{name:"cube",params:[m.cube.width,m.cube.height,0,0,"#fff"]}],o={},p=[{name:"a",canvas:"cube",x:i+.15*k,y:j+.15*l,width:m.two.width,height:m.two.height},{name:"b",canvas:"cube",x:i+.7*k,y:j+.15*l,width:m.two.width,height:m.two.height},{name:"c",canvas:"cube",x:i+.9*k,y:j+.3*l,width:m.two.width,height:m.two.height},{name:"d",canvas:"cube",x:i+.05*k,y:j+.5*l,width:m.one.width,height:m.one.height},{name:"e",canvas:"cube",x:i+.2*k,y:j+.6*l,width:m.three.width,height:m.three.height},{name:"g",canvas:"cube",x:i+.7*k,y:j+.55*l,width:m.one.width,height:m.one.height},{name:"h",canvas:"cube",x:i+.05*k,y:j+.9*l,width:m.one.width,height:m.one.height},{name:"i",canvas:"cube",x:i+.55*k,y:j+.85*l,width:m.one.width,height:m.one.height},{name:"j",canvas:"cube",x:i+.1*k,y:j+.7*l,width:m.four.width,height:m.four.height},{name:"k",canvas:"cube",x:i+.95*k,y:j+.65*l,width:m.one.width,height:m.one.height}];_.forEach(n,function(a){var b=c.getNewCanvasCtx(a.params[0],a.params[1]);(d=c.backdropAnimationsCanvasUtils.drawRect).call.apply(d,[c,b].concat(a.params)),o[a.name]=b.canvas;var d});var q=_.map(p,function(a){var b=o[a.canvas];return{x:a.x,y:a.y,width:a.width,height:a.height,alpha:1,name:a.name,image:b}}),r=c.getPanelLayer(f.panel.nextDimensions),s=c.getPanelShadowLayer(a,f.panel.nextDimensions);d.panelLayers=[r,s].concat(q);var t=_.indexBy(d.panelLayers,"name"),u=Quart.easeOut,v=Quint.easeOut,w=.6*b,x=.4*b;return e.transitionTimeline=e.transitionTimeline||new TimelineMax,e.transitionTimeline.set(r,{width:m.panel.width,height:m.panel.height,alpha:1}).addLabel("particles",0).addLabel("panel","particles+="+w).to(q,w,{alpha:.2,ease:u},"particles+="+.5*w).from(t.a,b,{x:i+.3*k,y:j+.25*l,ease:u},"particles").from(t.b,b,{x:i+.62*k,y:j+.35*l,ease:u},"particles").from(t.c,b,{x:i+.8*k,y:j+.33*l,ease:u},"particles").from(t.d,b,{x:i+.41*k,y:j+.48*l,ease:u},"particles").from(t.e,b,{x:i+.3*k,y:j+.55*l,ease:u},"particles").from(t.g,b,{x:i+.6*k,y:j+.5*l,ease:u},"particles").from(t.h,b,{x:i+.38*k,y:j+.7*l,ease:u},"particles").from(t.i,b,{x:i+.6*k,y:j+.7*l,ease:u},"particles").from(t.j,b,{x:i+.3*k,y:j+.6*l,ease:u},"particles").from(t.k,b,{x:i+.8*k,y:j+.55*l,ease:u},"particles").fromTo(r,w+x/2,{x:i+.46*k,y:j+.42*l},{x:i+.1*k,y:j+.1*l,width:.8*k,height:.8*l,ease:SlowMo.ease.config(.1,.6,!1)},0).to(r,x/2,{x:i,y:j,width:k,height:l,ease:v},w+x/2).to(s,.75*x,{delay:.25*x,alpha:c.shadowOpacity,ease:v},"panel").from(s,x,{height:30,width:30,x:i+k/2-15,ease:v},"panel").eventCallback("onComplete",function(a,b,c,d,e,f){c.panel.visible=!0,a.transitionTimeline=null,b.panelLayers=[e,f],d.resolve()},[e,d,f,g,r,s]),g.promise},this.cornersOut=function(a,b){var d=a.layers,e=a.timelines,f=a.state,g=c.$q.defer(),h=f.panel.prevDimensions,i=h.x,j=h.y,k=h.width,l=h.height,m=f.panel.nextDimensions,n=j+l,o=i+k,p=100,q=16,r=Expo.easeOut,s=b/2,t=Math.min(k,l),u=Math.sqrt(Math.pow((t-2*p)/2,2)+Math.pow((t-2*p)/2,2)),v=Math.asin((l-2*p)/2/u),w=[{name:"particle",params:[p,p,0,0,"#fff"]},{name:"line",params:[u,2,0,0,"#fff"]}],x=[{name:"particleTL",canvas:"particle",x:i,y:j},{name:"particleTR",canvas:"particle",x:o-p,y:j},{name:"particleBR",canvas:"particle",x:o-p,y:n-p},{name:"particleBL",canvas:"particle",x:i,y:n-p},{name:"lineTL",canvas:"line",x:0,y:0,rotate:v,translateX:i+p,translateY:j+p},{name:"lineTR",canvas:"line",x:0,y:0,rotate:Math.PI-v,translateX:o-p,translateY:j+p},{name:"lineBR",canvas:"line",x:0,y:0,rotate:Math.PI+v,translateX:o-p,translateY:n-p},{name:"lineBL",canvas:"line",x:0,y:0,rotate:2*Math.PI-v,translateX:i+p,translateY:n-p}],y={};_.forEach(w,function(a){var b=c.getNewCanvasCtx(a.params[0],a.params[1]);(d=c.backdropAnimationsCanvasUtils.drawRect).call.apply(d,[c,b].concat(a.params)),y[a.name]=b.canvas;var d});var z=_.map(x,function(a){var b=y[a.canvas];return{x:a.x,y:a.y,width:b.width,height:b.height,alpha:1,rotate:a.rotate,translateX:a.translateX,translateY:a.translateY,name:a.name,image:b}});d.panelLayers=d.panelLayers.concat(z);var A=_.indexBy(d.panelLayers,"name"),B=[A.lineTL,A.lineTR,A.lineBR,A.lineBL],C=[A.particleTL,A.particleTR,A.particleBR,A.particleBL];return e.transitionTimeline=e.transitionTimeline||new TimelineMax,e.transitionTimeline.set(A.panel,{alpha:0,delay:.1}).to(A.shadow,b/4,{alpha:0},"start").fromTo(B,b,{width:.75*u},{width:0,ease:r},"start").to(C,s,{width:q,height:q,ease:r},"start").to(A.particleTR,s,{x:o-q,ease:r},"start").to(A.particleBR,s,{x:o-q,y:n-q,ease:r},"start").to(A.particleBL,s,{y:n-q,ease:r},"start").to(A.lineTL,s,{translateX:i+q,translateY:j+q,ease:r},"start").to(A.lineTR,s,{translateX:o-q,translateY:j+q,ease:r},"start").to(A.lineBR,s,{translateX:o-q,translateY:n-q,ease:r},"start").to(A.lineBL,s,{translateX:i+q,translateY:n-q,ease:r},"start").eventCallback("onComplete",function(a,b,c,d){c.panel.visible=!1,a.transitionTimeline=null,d.resolve()},[e,d,f,g]),_.isEqual(f.panel.prevDimensions,f.panel.nextDimensions)||e.transitionTimeline.to(A.particleTL,.2*b,{x:m.x,y:m.y,ease:Linear.easeNone},b).to(A.particleTR,.2*b,{x:m.x+m.width-q,y:m.y,ease:Linear.easeNone},b).to(A.particleBR,.2*b,{x:m.x+m.width-q,y:m.y+m.height-q,ease:Linear.easeNone},b).to(A.particleBL,.2*b,{x:m.x,y:m.y+m.height-q,ease:Linear.easeNone},b),g.promise},this.cornersIn=function(a,b){var d=a.canvas,e=a.layers,f=a.timelines,g=a.state,h=c.$q.defer(),i=g.panel.nextDimensions,j=i.x,k=i.y,l=i.width,m=i.height,n=k+m,o=j+l,p=16,q=Expo.easeInOut,r=b/2,s=[{name:"particle",params:[p,p,0,0,"#fff"]},{name:"hLine",params:[l,1,0,0,"#fff"]},{name:"vLine",params:[1,m,0,0,"#fff"]}],t=[{name:"particleTL",canvas:"particle",x:j,y:k},{name:"particleTR",canvas:"particle",x:o-p,y:k},{name:"particleBR",canvas:"particle",x:o-p,y:n-p},{name:"particleBL",canvas:"particle",x:j,y:n-p},{name:"lineT",canvas:"hLine",x:j+2*p,y:k+p/2},{name:"lineR",canvas:"vLine",x:o-p/2,y:k+2*p},{name:"lineB",canvas:"hLine",x:o-p,y:n-p/2},{name:"lineL",canvas:"vLine",x:j+p/2,y:n-p}],u={};_.forEach(s,function(a){var b=c.getNewCanvasCtx(a.params[0],a.params[1]);(d=c.backdropAnimationsCanvasUtils.drawRect).call.apply(d,[c,b].concat(a.params)),u[a.name]=b.canvas;var d});var v=_.map(t,function(a){var b=u[a.canvas];return{x:a.x,y:a.y,width:b.width,height:b.height,alpha:1,name:a.name,image:b}}),w=c.getPanelLayer(g.panel.nextDimensions),x=c.getPanelShadowLayer(a,g.panel.nextDimensions);e.panelLayers=[w,x].concat(v);var y=_.indexBy(e.panelLayers,"name"),z=[y.lineT,y.lineR,y.lineB,y.lineL];return f.transitionTimeline=f.transitionTimeline||new TimelineMax,f.transitionTimeline.set(z,{width:1,height:1}).to(y.particleTL,r,{x:j+l-p,ease:q},"particles").to(y.particleTR,r,{y:k+m-p,ease:q},"particles").to(y.particleBR,r,{x:j,ease:q},"particles").to(y.particleBL,r,{y:k,ease:q},"particles").to(y.lineT,r,{width:l-2*p,ease:q},"particles").to(y.lineR,r,{height:m-2*p,ease:q},"particles").to(y.lineB,r,{x:j+p,width:l-2*p,ease:q},"particles").to(y.lineL,r,{y:k+p,height:m-2*p,ease:q},"particles").addLabel("hideLines").to(y.lineT,r,{x:j+l-p,width:0,ease:q},"hideLines").to(y.lineR,r,{y:k+m-p,height:0,ease:q},"hideLines").to(y.lineB,r,{width:0,ease:q},"hideLines").to(y.lineL,r,{height:0,ease:q},"hideLines").fromTo(w,r,{width:l/2,height:m/2,x:j+l/4,y:k+m/4,alpha:.5,immediateRender:!1},{x:j,y:k,width:l,height:m,alpha:1,ease:Expo.easeOut},"hideLines+=0.2").fromTo(x,r,{x:j+l/4,width:l/2,height:m/8},{x:(d.width-x.width)/2,width:x.width,height:x.height,alpha:c.shadowOpacity,ease:Expo.easeOut},"hideLines+=0.2").eventCallback("onComplete",function(a,b,c,d,e,f){c.panel.visible=!0,a.transitionTimeline=null,b.panelLayers=[e,f],d.resolve()},[f,e,g,h,w,x]),h.promise}}return a.$inject=["backdropAnimationsCanvasUtils","$q"],a.prototype.getNewCanvasCtx=function(a,b){var c=document.createElement("canvas"),d=c.getContext("2d");return c.width=a,c.height=b,d},a.prototype.getPanelLayer=function(a){var b=this.getNewCanvasCtx(a.width,a.height);return this.backdropAnimationsCanvasUtils.drawRect(b,a.width,a.height,0,0,"#fff"),{x:a.x,y:a.y,width:a.width,height:a.height,alpha:0,translateX:0,translateY:0,rotate:0,name:"panel",image:b.canvas}},a.prototype.getPanelShadowLayer=function(a,b){var c=a.canvas,d=this.backdropAnimationsCanvasUtils.createShadowSprite(b,45,45);return{x:(c.width-d.width)/2,y:.8*c.height,width:d.width,height:d.height,alpha:0,name:"shadow",image:d.canvas}},a}();angular.module("siteGeneratorIntroInternal").service("backdropAnimationsTransitions",BackdropAnimationsTransitions);var BackdropAnimations=function(){function a(a,b,c,d,e,f){var g=this;this.backdropAnimationsConfig=a,this.backdropAnimationsCanvasUtils=b,this.backdropAnimationsTransitions=c,this.$q=d,this.clientTopology=e,this.$window=f,this.trackMouseMovement=function(a){var b=a.clientX,c=a.clientY,d=g.scene,e=d.layers,f=d.canvas,h=d.state,i=g.config.options.idle.mouseOffset,j=f.width,k=f.height,l=1-b/(j/2),m=1-c/(k/2);_.forEach(e.idleLayers,function(a){a.translateX=l*i[a.name],a.translateY=m*i[a.name]}),h.drawOnTicker=!0},this.config=_.merge({},a),this.scene=null}return a.$inject=["backdropAnimationsConfig","backdropAnimationsCanvasUtils","backdropAnimationsTransitions","$q","clientTopology","$window"],a.prototype.init=function(a,b){var c=this;this.setBg(a),this.scene=this.setScene(this.setCanvas(a),this.config.spriteData),TweenMax.ticker.addEventListener("tick",this.drawLayers,this),this.setDimensions(b);var d=b?this.play("idle"):this.$q.when();return this.scene.state.transitionDeferred=d.then(function(){return b?c.runPanelAnimation(c.config.options.firstTime.duration,"firstTime"):c.$q.when()}),this.scene.state.transitionDeferred},a.prototype.play=function(a,b){var c=this;if(void 0===a&&(a=null),this.scene){var d,e=this.config.options,f=this.scene.state,g=this.$q,h=f.transitionDeferred;switch(this.setDimensions(b),a){case"next":d=f.panel.visible?h.then(function(){return c.runPanelAnimation(e.next.hide.duration,"nextOut")}).then(function(){return c.runPanelAnimation(e.next.show.duration,"nextIn")}):h.then(function(){return c.runPanelAnimation(e.next.show.duration,"firstTime")});break;case"back":d=f.panel.visible?h.then(function(){return c.runPanelAnimation(e.back.hide.duration,"backOut")}).then(function(){return g.all([c.runPanelAnimation(e.back.show.duration,"backIn"),c.showIdleLayers(e.idle.duration,e.idle.amount),c.parallaxIdleOnMouse()])}):h.then(function(){return g.all([c.runPanelAnimation(e.back.show.duration,"firstTime"),c.showIdleLayers(e.idle.duration,e.idle.amount),c.parallaxIdleOnMouse()])});break;case"skip":d=this.play("next");break;case"wait":d=h.then(function(){return g.all([c.runPanelAnimation(e.next.hide.duration,"blankOut"),c.hideIdleLayers(e.next.hide.duration)]).then(function(){return g.all([c.showIdleLayers(e.idle.duration,e.wait.amount),c.infiniteSlideIdleLayer(e.wait.duration)])})});break;case"blank":d=h.then(function(){return c.runPanelAnimation(e.next.hide.duration,"blankOut")}).then(function(){return c.stopParallaxOnMouse()}).then(function(){return c.hideIdleLayers(e.blank.duration)});break;case"idle":d=h.then(function(){return g.all([c.showIdleLayers(e.idle.duration,e.idle.amount),c.parallaxIdleOnMouse()])})}return f.transitionDeferred=d,f.transitionDeferred}},a.prototype.resize=function(a){var b=this,c=this.scene.state;return c.resizeDeferred?this.resizeDebounced(a):(c.resizeDeferred=this.$q.defer(),this.resizeDebounced=_.debounce(function(a){b.setDimensions(a),c.resizeDeferred.resolve()},250,{leading:!1,trailing:!0}),this.resizeDebounced(a),c.resizeNotifyDeferred=c.transitionDeferred.then(function(){return c.resizeDeferred.promise}).then(function(){return b.delayedResize()})),c.resizeNotifyDeferred},a.prototype.scale=function(a,b){return void 0===b&&(b=this.config.options.scale.duration),this.scene.state.panel.visible?(this.setDimensions(a),this.runPanelAnimation(b,"scale")):this.$q.when()},a.prototype.delayedResize=function(){var a=this,b=this.config.options,c=this.scene,d=c.canvas,e=c.state,f=d.parentNode;return e.resizeDeferred=null,this.setCanvasSize(f.offsetWidth,f.offsetHeight),e.panel.visible?this.runPanelAnimation(b.resize.hide.duration,"resizeOut").then(function(){return a.runPanelAnimation(b.resize.show.duration,"resizeIn")}):this.$q.when()},a.prototype.dispose=function(){if(this.stopParallaxOnMouse(),TweenMax.ticker.removeEventListener("tick",this.drawLayers),this.scene){var a=this.scene,b=a.state,c=a.timelines;return _(c).compact().forEach(function(a){return a.kill().clear()}).value(),_.get(b,["transitionDeferred","reject"])&&b.transitionDeferred.reject(),_.get(b,["resizeDeferred","reject"])&&b.resizeDeferred.reject(),_.get(b,["resizeNotifyDeferred","reject"])&&b.resizeNotifyDeferred.reject(),this.scene=null,this.$q.when()}},a.prototype.setBg=function(a){var b=this.config.bg,c=b.imageId,d=b.color,e=b.gradient,f=2048,g=1108,h={w:Math.min(window.screen.width,f),h:Math.min(window.screen.height,g)},i="al_c,q_90",j=c?"url("+this.clientTopology.mediaUrl+"/"+c+"/v1/fill/w_"+h.w+",h_"+h.h+","+i+"/"+c+")":"";a.style.background=d+" "+(e||j)+" no-repeat 50% 50% / cover"},a.prototype.setScene=function(a,b){var c=this.backdropAnimationsCanvasUtils.createSprite(b),d={idleLayers:[],panelLayers:[]},e={idleTimeline:null,transitionTimeline:null,slideTimeline:null,alphaTimeline:null},f={drawOnTicker:!1,nextTransitionIndex:0,transitionDeferred:this.$q.when(),resizeDeferred:null,resizeNotifyDeferred:null,globalAlpha:1,panel:{visible:!1,prevDimensions:{},nextDimensions:{}}},g=document.createElement("canvas");return g.width=a.width,g.height=a.height,{sprite:c,layers:d,timelines:e,canvas:a,offScreenCanvas:g,state:f}},a.prototype.setCanvas=function(a){var b=document.createElement("canvas");return b.width=a.offsetWidth,b.height=a.offsetHeight,b.id="backdrop-canvas",a.appendChild(b),b},a.prototype.setCanvasSize=function(a,b){var c=this.scene,d=c.canvas,e=c.offScreenCanvas;d.width=e.width=a,d.height=e.height=b},a.prototype.setDimensions=function(a){a&&(this.scene.state.panel.prevDimensions=this.scene.state.panel.nextDimensions,this.scene.state.panel.nextDimensions=a)},a.prototype.drawLayers=function(){var a=this.scene,b=a.layers,c=a.state,d=a.timelines,e=a.canvas,f=a.offScreenCanvas;if(_.some(d,function(a){return a&&a.isActive()})&&(c.drawOnTicker=!0),c.drawOnTicker){_.every(d,function(a){return!a||!a.isActive()})&&(c.drawOnTicker=!1);var g=f.getContext("2d"),h=e.getContext("2d");g.clearRect(0,0,e.width,e.height),h.clearRect(0,0,e.width,e.height),c.globalAlpha>0&&(_.values(b).forEach(function(a){a.forEach(function(a){if(g.save(),a.alpha>0){g.globalAlpha=a.alpha;var b=_.isNumber(a.scaleX)?a.scaleX:1,c=_.isNumber(a.scaleY)?a.scaleY:1,d=a.rotate||0,e=_.isNumber(a.translateX)?a.translateX:0,f=_.isNumber(a.translateY)?a.translateY:0;g.setTransform(Math.cos(d)*b,Math.sin(d),-Math.sin(d),Math.cos(d)*c,e,f),a.source?g.drawImage(a.image,a.source.x||0,a.source.y||0,a.source.width||a.width,a.source.height||a.height,a.x,a.y,a.width,a.height):g.drawImage(a.image,a.x,a.y,a.width,a.height),g.restore()}})}),h.globalAlpha=c.globalAlpha,h.drawImage(g.canvas,0,0))}},a.prototype.stopParallaxOnMouse=function(){return this.$window.removeEventListener("mousemove",this.trackMouseMovement),this.$q.when()},a.prototype.parallaxIdleOnMouse=function(){return this.$window.addEventListener("mousemove",this.trackMouseMovement,!1),this.$q.when()},a.prototype.runPanelAnimation=function(a,b){return this.getAnimationFunc(b)(this.scene,a)},a.prototype.getAnimationFunc=function(a){var b=this.backdropAnimationsTransitions,c=[{out:b.horizLineOut,inn:b.vertLineRightIn},{out:b.cornersOut,inn:b.cornersIn},{out:b.vertLineOut,inn:b.horizLineCenterIn},{out:b.cutOut,inn:b.particlesIn}];switch(a){case"nextIn":var d=c[this.scene.state.nextTransitionIndex].inn;return this.scene.state.nextTransitionIndex=(this.scene.state.nextTransitionIndex+1)%c.length,d;case"nextOut":return c[this.scene.state.nextTransitionIndex].out;case"firstTime":return b.fadeAndScaleIn;case"blankOut":return b.fadeOut;case"backIn":return b.floatIn;case"backOut":return b.floatOut;case"resizeIn":return b.fadeIn;case"resizeOut":return b.fadeOut;case"scale":return b.scale}},a.prototype.showIdleLayers=function(a,b){void 0===a&&(a=1);var c=this.$q.defer(),d=this.scene,e=d.layers,f=d.timelines,g=d.canvas,h=this.config.options;return e.idleLayers.length?(c.resolve(),c.promise):(f.alphaTimeline=f.alphaTimeline||new TimelineMax,e.idleLayers=this.createIdleLayers(g.width,g.height*(h.idle.heightPercentage||1),b),f.alphaTimeline.set(e.idleLayers,{alpha:0}).to(e.idleLayers,a,{alpha:1}).eventCallback("onComplete",function(a,b){b.alphaTimeline=null,a.resolve()},[c,f]),this.createIdleLayersTimeline(),c.promise)},a.prototype.hideIdleLayers=function(a){void 0===a&&(a=1);var b=this.$q.defer(),c=this.scene,d=c.layers,e=c.timelines;return d.idleLayers.length?(e.alphaTimeline=e.alphaTimeline||new TimelineMax,e.alphaTimeline.to(d.idleLayers,a,{alpha:0}).eventCallback("onComplete",function(a,b,c){this.stopInfiniteSlide(),c.idleTimeline&&(c.idleTimeline.pause().kill(),c.idleTimeline=null),c.alphaTimeline=null,b.idleLayers=[]},[b,d,e],this).call(function(a){return a.resolve()},[b],this,.05),b.promise):(b.resolve(),b.promise)},a.prototype.infiniteSlideIdleLayer=function(a){void 0===a&&(a=1);var b=this.$q.defer(),c=this.scene,d=c.layers,e=c.timelines,f=c.canvas,g=this.config.options.wait.durationOffset,h=this.config.options.wait.distance;if(!d.idleLayers.length)return b.resolve(),b.promise;if(e.slideTimeline){if(e.slideTimeline.isActive())return b.resolve(),b.promise;e.slideTimeline.progress(1).clear()}e.slideTimeline=new TimelineMax;var i=this.createIdleLayers(f.width*(h-1),f.height,this.config.options.wait.amount,f.width),j=d.idleLayers.map(function(a){return _.assign(_.omit(a,"_gsTweenID"),{x:a.x+f.width*h,alpha:1})});return d.idleLayers=d.idleLayers.concat(i,j),d.idleLayers.forEach(function(b){e.slideTimeline.fromTo(b,a*g[b.name],{x:b.x},{x:"-="+f.width*h,ease:Linear.easeNone,repeat:-1},0)}),e.slideTimeline.call(function(){return b.resolve()},[b],null,this.config.options.wait.notify),b.promise},a.prototype.stopInfiniteSlide=function(){var a=this.scene,b=a.layers,c=a.timelines,d=a.canvas;return c.slideTimeline&&(b.idleLayers=b.idleLayers.filter(function(a){return a.x>=0&&a.x<=d.width+a.width}),c.slideTimeline&&(c.slideTimeline.pause().kill(),c.slideTimeline=null)),this.$q.when()},a.prototype.createIdleLayersTimeline=function(){var a=this,b=this.scene,c=b.timelines,d=b.layers;c.idleTimeline=c.idleTimeline||new TimelineMax,c.idleTimeline.clear(),c.idleTimeline.autoRemoveChildren=!0,_.forEach(d.idleLayers,function(b,d){return a.createSingleLayerTweens(b,c.idleTimeline)})},a.prototype.createSingleLayerTweens=function(a,b){var c=this,d=this.config.options,e=(_.random(0,1,!1)?-1:1)*a.offset.x,f=(_.random(0,1,!1)?-1:1)*a.offset.y,g=_.random(d.idle.minDuration,d.idle.maxDuration,!1);b.to(a,g/2,{y:"+="+f,repeat:1,yoyo:!0,ease:Sine.easeInOut},0).to(a,g,{x:"+="+e,repeat:0,ease:Sine.easeInOut,onComplete:function(){c.scene&&c.createIdleLayersTimeline()},onCompleteScope:this},0)},a.prototype.createIdleLayers=function(a,b,c,d,e){void 0===d&&(d=0),void 0===e&&(e=0);var f=this.scene.sprite,g=this.config.options,h=[];return _.forEach(c,function(a,b){return h=h.concat(Array(a).fill(b))}),_.map(h,function(c){var h=f.find(function(a){return a.name===c}).src;return{x:_.random(h.width,a-h.width,!1)+d,y:_.random(h.height,b-h.height,!1)+e,width:h.width,height:h.height,alpha:1,name:c,image:h,offset:{x:g.idle.offset.x,y:g.idle.offset.y}}})},a}();angular.module("siteGeneratorIntroInternal").service("backdropAnimations",BackdropAnimations);var BackdropPlayground=function(){function a(a){var b=this;this.backdropAnimations=a;var c=document.querySelector("nav"),d=document.querySelector("#backdrop");console.log(d),this.backdropAnimations.init(d).then(function(){return console.log("init done")}),window.addEventListener("resize",function(){b.backdropAnimations.resize({width:600,height:600,x:(window.innerWidth-600)/2,y:(window.innerHeight-600)/2}).then(function(){return console.log("resize done")})}),c.addEventListener("click",function(a){switch(console.log(a.target.id),a.target.id){case"next":b.backdropAnimations.play("next",{width:800,height:500,x:(window.innerWidth-800)/2,y:(window.innerHeight-500)/2}).then(function(){return console.log("next done")});break;case"back":b.backdropAnimations.play("back",{width:800,height:300,x:(window.innerWidth-800)/2,y:(window.innerHeight-300)/2}).then(function(){return console.log("back done")});break;case"skip":b.backdropAnimations.play("skip",{
width:400,height:200,x:(window.innerWidth-400)/2,y:(window.innerHeight-200)/2}).then(function(){return console.log("skip done")});break;case"blank":b.backdropAnimations.play("blank").then(function(){return console.log("blank done")});break;case"wait":b.backdropAnimations.play("wait").then(function(){return console.log("wait done")});break;case"idle":b.backdropAnimations.play("idle").then(function(){return console.log("idle done")})}})}return a.$inject=["backdropAnimations"],a}();angular.module("siteGeneratorIntroInternal").component("backdropPlayground",{templateUrl:"views/backdrop-playground.html",controller:BackdropPlayground});var AssistantManager=function(){function a(a,b,c,d,e,f,g,h){this.$rootScope=a,this.$q=b,this.$timeout=c,this.assistantUtils=d,this.assistantUIAdapter=e,this.assistantWaitUntilElement=f,this.experimentManager=g,this.flags=h,this.waitUntilElementWorkers=[],this.isInAutoplay=!1,this.dockStatus=builders.AssistantDockStatus.Hidden,this.menuProgress=builders.AssistantMenuProgress.beginner}return a.$inject=["$rootScope","$q","$timeout","assistantUtils","assistantUIAdapter","assistantWaitUntilElement","experimentManager","flags"],a.prototype.getActiveTask=function(){return this.activeTask},a.prototype.getActiveAction=function(){return this.activeAction},a.prototype.startTask=function(a,b){void 0===b&&(b=0),this.flags.noTour||(this.setDockStatus(builders.AssistantDockStatus.Playing),this.getActiveTask()?this.setIntent({operation:builders.AssistantOperation.Start,task:a,actionIndex:b}):(this.activateTask(a),this.handleActionLifecycle(this.getActiveTask(),b)))},a.prototype.stop=function(){this.setIntent({operation:builders.AssistantOperation.Stop})},a.prototype.stopAndComplete=function(){this.setIntent({operation:builders.AssistantOperation.Complete})},a.prototype.forceStop=function(){this.setIntent({operation:builders.AssistantOperation.ForceStop})},a.prototype.gotoNextAction=function(){this.setIntent({operation:builders.AssistantOperation.Next})},a.prototype.gotoPrevAction=function(){this.gotoActionInActiveTask(this.getActiveTask().activeActionIndex-1)},a.prototype.gotoActionInActiveTask=function(a){this.setIntent({operation:builders.AssistantOperation.Goto,actionIndex:a})},a.prototype.setMenu=function(a){this.menuTask=a},a.prototype.isInActiveTask=function(){return!!this.getActiveTask()},a.prototype.openMenu=function(a){if(!this.isMenuTaskDefined())throw"Assistant - menu task is not defined";this.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.OPEN_MENU,a),this.startTask(this.menuTask)},a.prototype.setIntent=function(a){a.goToIndex&&(a.actionIndex=a.goToIndex),this.userOrSystemIntent=a,this.unblockLifecycle()},a.prototype.getIntent=function(){return this.userOrSystemIntent},a.prototype.setDockStatus=function(a){this.dockStatus=a},a.prototype.getDockStatus=function(){return this.dockStatus},a.prototype.setMenuProgress=function(a){this.menuProgress=a},a.prototype.getMenuProgress=function(){return this.menuProgress},a.prototype.isInAutoplayMode=function(){return this.isInAutoplay},a.prototype.canStop=function(){return this.getActiveTask()&&!this.getActiveTask().isUnstoppable},a.prototype.setCustomTaskData=function(a,b){var c=this.getActiveTask();c&&(c.customData=c.customData||{},c.customData[a]=b)},a.prototype.getCustomTaskData=function(a){var b=this.getActiveTask();if(b)return b.customData&&b.customData[a]},a.prototype.isTaskInLastAction=function(a){return a.actions.length-1===a.activeActionIndex},a.prototype.isMenuOpen=function(){return this.isMenuTask(this.activeTask)},a.prototype.isIntentToStop=function(){var a=this.getIntent();return a&&a.operation===builders.AssistantOperation.Stop},a.prototype.setTaskComplete=function(a){a.isComplete=!0,this.assistantUtils.saveTaskData(a)},a.prototype.allowDialogInterruptions=function(){var a=this.getActiveAction();return!a||Boolean(a.allowDialogInterruptions)},a.prototype.mergeActionsConf=function(a,b){var c;a.exitTriggers&&b.exitTriggers?(c=a.exitTriggers.slice(),b.exitTriggers.forEach(function(a){var b=c.findIndex(function(b){return b.element===a.element});-1!==b?c[b]=_.merge({},c[b],a):c.push(a)})):c=a.exitTriggers||b.exitTriggers;var d=_.merge({},a,b);return d.exitTriggers=c,d},a.prototype.handleActionLifecycle=function(a,b){var c=this;void 0===b&&(b=0);try{if(this.setActiveActionIndex(a,b),this.activeAction=this.getAction(a,b,this.isInAutoplay),this.activeAction.shouldSkipAction&&this.activeAction.shouldSkipAction())return this.gotoNextAction(),void this.handleIntent();this.lifecyclePreparation(a,this.activeAction).then(function(){return c.lifecycleUIPreparation(c.activeAction)}).then(function(){return c.renderAction(a,c.activeAction)}).then(function(){return c.lifecycleUITeardown(c.activeAction)}).then(function(){return c.lifecycleTeardown(a,c.activeAction)}).then(function(){return c.handleIntent()}).catch(function(){return c.stopTaskAndHandleMenu()})}catch(a){console.error("encountered error in lifecycle",a),this.stopTaskAndHandleMenu()}},a.prototype.lifecyclePreparation=function(a,b){var c=this;this.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.ACTION_START),this.resetIntent(),this.handleAutoplay(b.onEnter),this.setExitTriggerElementSelectors(b.exitTriggers,b);var d=_.map(b.exitTriggers,function(a){return angular.element(a.element)});return this.assistantUIAdapter.disableElements(d),this.assistantUtils.waitForSpinner(b.waitForSpinner).then(function(){return c.assistantUtils.redirectToState(b.redirectToState)}).then(function(){return c.assistantUtils.delayAction(b.delayBeforeStartInMs)}).then(function(){return c.waitForExpressions(b.waitForExpressions)}).then(function(){return c.waitUntilElementIsInDOM(b,b.waitForElement,b.waitForElementCondition).catch(function(a){return c.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.TASK_TIMEOUT)})}).then(function(){b.events&&b.events.onEnter&&b.events.onEnter.forEach(function(a){return c.$rootScope.$broadcast(a)})}).then(function(){if(b.onEnter&&b.onEnter.callback)return b.onEnter.callback(a,b)}).then(function(){if(b.onEnter&&b.onEnter.DOMEvents)return c.$q.all(b.onEnter.DOMEvents.map(function(a){return c.runExitTrigger(a)}))}).then(function(){if(b.element)return c.waitUntilElementIsInDOM(b,b.element.selector).then(function(){return b.element.selector=c.assistantUtils.getElementSelector(b.element)}).catch(function(a){return c.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.TASK_TIMEOUT)})}).then(function(){return c.registerExitTriggers(b.exitTriggers,b)}).then(function(){return c.assistantUIAdapter.enableElements(d),c.$q.when()})},a.prototype.lifecycleUIPreparation=function(a){var b=this;return this.assistantUIAdapter.scrollToElement(a),this.assistantUIAdapter.moveHintToElement(a).then(function(){b.handleInteractivity(a),b.disabledElements=a.disabledElements?a.disabledElements.map(function(a){return angular.element(a)}):[],b.assistantUIAdapter.disableElements(b.disabledElements)})},a.prototype.renderAction=function(a,b){var c=this;if(!this.userOrSystemIntent)return this.assistantUIAdapter.renderAction(b,this.assistantUtils.compileTemplateContent(this,a,b,this.flags)).then(function(){return c.isInAutoplay&&c.runAutoplay(b),c.blockLifecycleUntilUserInteraction()}).then(function(){if(b.hint)return c.assistantUIAdapter.simulateClick()})},a.prototype.lifecycleUITeardown=function(a){return this.assistantUIAdapter.enableElements(this.disabledElements),this.assistantUIAdapter.hideAction(a)},a.prototype.lifecycleTeardown=function(a,b){var c=this;this.cancelAutoplayTimeout();var d=this.$q.when();return b.onExit&&b.onExit.callback&&d.then(function(){return b.onExit.callback(a,b)}),b.onExit&&b.onExit.DOMEvents&&d.then(function(){return c.$q.all(b.onExit.DOMEvents.map(function(a){return c.runExitTrigger(a)}))}),b.backdrop&&b.backdrop.fadeOutOnExit&&(this.assistantUIAdapter.fadeOutBackdrop(b.backdrop.fadeOutTime),d.then(function(){return c.$timeout(angular.noop,b.backdrop.fadeOutTime)})),b.events&&b.events.onExit&&b.events.onExit.forEach(function(a){return c.$rootScope.$broadcast(a)}),d.then(function(){c.handleAutoplay(b.onExit),c.stopAllWaitUntilElementWorkers(),c.unregisterExitTriggers(b.exitTriggers,b),c.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.ACTION_COMPLETED)})},a.prototype.clearCustomTaskData=function(){this.getActiveTask().customData={}},a.prototype.getAction=function(a,b,c){if(!a.actions||b<0||b>=a.actions.length)throw"action index out of bounds";var d=a.actions[b];return d=this.createActionAccordingToExperiments(d),d=this.createActionByAutoplayMode(d,c),d=this.createActionByCustomCondition(d)},a.prototype.createActionAccordingToExperiments=function(a){if(a.experiments){return this.assistantUtils.getActiveExperiments().reduce(function(b,c){return angular.merge({},b,a.experiments[c])},a)}return a},a.prototype.createActionByAutoplayMode=function(a,b){return angular.merge({},a,b?a.actionIfAuto:a.actionIfManual)},a.prototype.createActionByCustomCondition=function(a){var b=this,c=a.conditions;if(c){var d=c.map(function(a){return a.conditionMethod()?a.truthyConf||{}:a.falsyConf||{}}).reduce(function(a,c){return b.mergeActionsConf(a,c)},{});return this.mergeActionsConf(a,d)}return a},a.prototype.handleAutoplay=function(a){a&&(a.stopAutoplay?this.disableAutoplay():a.startAutoplay&&this.enableAutoplay())},a.prototype.resetIntent=function(){this.userOrSystemIntent=null},a.prototype.blockLifecycleUntilUserInteraction=function(){return this.lifecycleBlockDeferred=this.$q.defer(),this.userOrSystemIntent&&this.lifecycleBlockDeferred.resolve(),this.lifecycleBlockDeferred.promise},a.prototype.unblockLifecycle=function(){this.lifecycleBlockDeferred&&this.lifecycleBlockDeferred.resolve()},a.prototype.handleInteractivity=function(a){this.isInAutoplay?this.assistantUIAdapter.disableHighlightInteractivity(a):this.assistantUIAdapter.enableHighlightInteractivity(a)},a.prototype.setExitTriggerElementSelectors=function(a,b){var c=this;a&&a.forEach(function(a){return a.element=c.assistantUtils.replaceElementSelectorPlaceholderWithValue(a.element,b.element&&b.element.selector||"")})},a.prototype.registerExitTriggers=function(a,b){var c=this;if(a){var d=a.map(function(a){return(a.dontWaitForElement?c.$q.when():c.waitUntilElementIsInDOM(b,a.element)).then(function(){return c.assistantUtils.registerActionTrigger(a,c.setIntent.bind(c))})});return this.$q.all(d)}},a.prototype.unregisterExitTriggers=function(a,b){var c=this;a&&a.forEach(function(a){c.assistantUtils.unregisterActionTrigger(a)})},a.prototype.runAutoplay=function(a){var b=this,c=a.autoPlayGoToIndex,d=a.exitTriggers,e=a.autoplayTimeoutInMs,f=this.assistantUtils.getDefaultExitTrigger(d);this.autoplayTimeout=this.$timeout(function(){c?b.gotoActionInActiveTask(c):f?b.runExitTrigger(f):b.gotoNextAction()},e)},a.prototype.cancelAutoplayTimeout=function(){this.$timeout.cancel(this.autoplayTimeout)},a.prototype.runExitTrigger=function(a){var b=this,c=$(a.element);return a.descendant&&(c=c.find(a.descendant)),this.$timeout(function(){return c.first().trigger(a.trigger||b.assistantUtils.DEFAULT_TRIGGER)})},a.prototype.activateTask=function(a){return this.activeTask=a,this.setActiveActionIndex(this.activeTask,0),this.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.TASK_START),this.activeTask.onEnter&&this.activeTask.onEnter.callback?this.$q.when(this.activeTask.onEnter.callback(this.activeTask)):this.$q.when()},a.prototype.deactivateTask=function(){this.activeTask.activeActionIndex=0,this.activeTask=void 0},a.prototype.isMenuTaskDefined=function(){return!!this.menuTask},a.prototype.isMenuTask=function(a){return a&&this.menuTask&&a.id===this.menuTask.id},a.prototype.waitForExpressions=function(a){var b=this;return a?Promise.all(a.map(function(a){return Promise.resolve().then(function(){var c=500,d=5,e=0,f=function(){if(!a())return e<d?(e++,b.$timeout(f,c)):void 0};return f()})})):Promise.resolve()},a.prototype.waitUntilElementIsInDOM=function(a,b,c){if(b){var d=this.assistantWaitUntilElement();return this.waitUntilElementWorkers.push(d),d.waitUntilElementIsInDOM(b,this.isIntentToStop.bind(this),c&&c.bind(this))}return this.$q.when()},a.prototype.stopAllWaitUntilElementWorkers=function(){this.waitUntilElementWorkers.forEach(function(a){return a.stopWaiting()}),this.waitUntilElementWorkers=[]},a.prototype.setActiveActionIndex=function(a,b){a.activeActionIndex=b},a.prototype.disableAutoplay=function(){this.isInAutoplay=!1},a.prototype.enableAutoplay=function(){this.isInAutoplay=!0},a.prototype.stopActiveTask=function(){var a=this,b=this.getActiveTask(),c=this.$q.when();return b.onExit&&b.onExit.callback&&(c=this.$q.when(b.onExit.callback(b))),c.then(function(){return a.clearCustomTaskData()}).then(function(){return a.assistantUIAdapter.destroyAction()}).then(function(){a.activeAction=null,a.setDockStatus(builders.AssistantDockStatus.Stopped),a.disableAutoplay();var b=a.getActiveTask();return a.deactivateTask(),b})},a.prototype.handleMenu=function(a){a&&!this.isMenuTask(a)&&this.isMenuTaskDefined()?this.openMenu(BIOrigins.TourTask):this.isMenuTask(a)&&this.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.CLOSE_MENU)},a.prototype.stopTaskAndHandleMenu=function(){var a=this;return this.stopActiveTask().then(function(b){return a.handleMenu(b)})},a.prototype.handleIntent=function(){var a=this;if(this.userOrSystemIntent){var b=this.getActiveTask();switch(this.userOrSystemIntent.enableAutoplay?this.enableAutoplay():this.userOrSystemIntent.disableAutoplay&&this.disableAutoplay(),this.userOrSystemIntent.operation){case builders.AssistantOperation.Next:this.handleActionLifecycle(b,b.activeActionIndex+1);break;case builders.AssistantOperation.Goto:this.handleActionLifecycle(b,this.userOrSystemIntent.actionIndex);break;case builders.AssistantOperation.Stop:this.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.TASK_QUIT),this.stopTaskAndHandleMenu();break;case builders.AssistantOperation.Start:this.stopTaskAndHandleMenu().then(function(){return a.startTask(a.userOrSystemIntent.task,a.userOrSystemIntent.actionIndex)});break;case builders.AssistantOperation.Complete:this.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.TASK_COMPLETE),this.setTaskComplete(b),this.stopTaskAndHandleMenu();break;case builders.AssistantOperation.ForceStop:this.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.TASK_QUIT),this.stopActiveTask();break;default:this.stopTaskAndHandleMenu()}}},a}();angular.module("siteGeneratorTourManagerInternal").service("assistantManager",AssistantManager);var AssistantDock=function(){function a(a,b,c,d){this.flags=a,this.assistantManager=b,this.menuTask=c,this.applicationState=d,this.dockStatusesToClasses=(e={},e[builders.AssistantDockStatus.Playing]="tour-dock-playing",e[builders.AssistantDockStatus.Stopped]="tour-dock-stopped",e[builders.AssistantDockStatus.Disabled]="tour-dock-disabled",e[builders.AssistantDockStatus.Hidden]="ng-hide",e),b.setMenu(c);var e}return a.$inject=["flags","assistantManager","menuTask","applicationState"],a.prototype.handleAssistantMenuClick=function(){this.assistantManager.isInActiveTask()?this.assistantManager.isTaskInLastAction(this.assistantManager.getActiveTask())?this.assistantManager.stopAndComplete():this.assistantManager.canStop()&&this.assistantManager.stop():this.assistantManager.openMenu(BIOrigins.AssistantDockButton)},a.prototype.isPlaying=function(){return this.assistantManager.isInActiveTask()},a.prototype.getDockClass=function(){return this.dockStatusesToClasses[this.assistantManager.getDockStatus()]},a.prototype.getIconArrowClass=function(){return this.flags.newAssistantMenu?"cc-icon-assistant-menu-play":""},a.prototype.shouldShowDock=function(){return!this.flags.noTour&&!this.applicationState.isPreviewDisplay()},Object.defineProperty(a.prototype,"showSmartAssistBadge",{get:function(){return this.flags.smartAssist&&this.flags.smartAssistDockBadge&&this.assistantManager.getDockStatus()!==builders.AssistantDockStatus.Playing},enumerable:!0,configurable:!0}),a}();angular.module("siteGeneratorTourManagerInternal").component("assistantDock",{template:'\n                <div class="assistant-dock tour-dock" ng-click="$ctrl.handleAssistantMenuClick()" ng-class="$ctrl.getDockClass()" ng-if="$ctrl.shouldShowDock()">\n                  <div class="tour-dock-element tour-dock-animate tour-dock-outer-circle"></div>\n                  <div class="tour-dock-element tour-dock-animate tour-dock-inner-circle"></div>\n                  <div class="tour-dock-element tour-dock-animate tour-dock-icon">\n                    <div class="tour-dock-icon-arrow" data-hook="tour-dock-icon-arrow" ng-class="$ctrl.getIconArrowClass()"></div>\n                    <div class="tour-dock-icon-square"></div>\n                    <div class="tour-dock-icon-disabled"></div>\n                  </div>\n                  <smart-assist-badge ng-if="$ctrl.showSmartAssistBadge" />\n                </div>\n              ',controller:AssistantDock,bindings:{}});var AssistantBI=function(){function a(a,b,c,d,e,f,g,h){this.$rootScope=a,this.assistantManager=b,this.assistantUtils=c,this.consumerBiLogger=d,this.wixBiLogger=e,this.consumerBiLoggerHelpers=f,this.$injector=g,this.flags=h,this.registerBIListeners()}return a.$inject=["$rootScope","assistantManager","assistantUtils","consumerBiLogger","wixBiLogger","consumerBiLoggerHelpers","$injector","flags"],a.prototype.sendCustomBIEvent=function(a){if(!this.flags.silentBI){var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getDesignId(),j=this.consumerBiLoggerHelpers.getTotalPhases(),k=this.getActiveTaskName(),l=angular.merge({name:k,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,designId:i,totalPhases:j,src:66},a);return this.wixBiLogger.log(l)}},a.prototype.registerBIListeners=function(){var a=this;this.registerBIEvent(builders.AssistantAction.EVENTS.ACTION_START,function(){a.consumerBiLogger.tour.phaseDuringTour(a.getActiveTaskName())}),this.registerBIEvent(builders.AssistantAction.EVENTS.TASK_SKIP,function(b,c){a.consumerBiLogger.tour.skipTour(c.BI.description)}),this.registerBIEvent(builders.AssistantAction.EVENTS.TASK_QUIT,function(){a.consumerBiLogger.tour.quitTour(a.getActiveTaskName())}),this.registerBIEvent(builders.AssistantAction.EVENTS.TASK_START,function(){a.consumerBiLogger.tour.start(a.getActiveTaskName())}),this.registerBIEvent(builders.AssistantAction.EVENTS.TASK_COMPLETE,function(){a.consumerBiLogger.tour.complete(a.getActiveTaskName())}),this.registerBIEvent(builders.AssistantAction.EVENTS.TASK_TIMEOUT,function(){var b=AssistantWaitUntilElement.WAIT_UNTIL_ELEMENT_INTERVAL_IN_MS*AssistantWaitUntilElement.WAIT_UNTIL_ELEMENT_MAX_TRIES/1e3;a.consumerBiLogger.tour.timeout(b,"",a.getActiveTaskName())}),this.registerBIEvent(builders.AssistantAction.EVENTS.OPEN_MENU,function(b,c){if(c!==BIOrigins.OnSiteStart){var d=a.$injector.get("assistantTaskFetcher");a.consumerBiLogger.tour.assistantMenuShown(d.getNumOfCompletedTasks().toString(),c,AssistantTabListService.TAB_ID.BUCKET_LIST)}}),this.registerBIEvent(builders.AssistantAction.EVENTS.CLOSE_MENU,function(){a.consumerBiLogger.tour.closeAssistant()}),this.registerBIEvent(builders.AssistantAction.EVENTS.MANUAL_OR_AUTO_CHOSE_AUTO,function(){a.consumerBiLogger.tour.firstStepSelectionForMeOrShowMe("do it for me",a.getActiveTaskName())}),this.registerBIEvent(builders.AssistantAction.EVENTS.MANUAL_OR_AUTO_CHOSE_MANUAL,function(){a.consumerBiLogger.tour.firstStepSelectionForMeOrShowMe("show me how",a.getActiveTaskName())}),this.registerBIEvent(builders.AssistantAction.EVENTS.KEEP_TRYANOTHER_CHOSE_TRYANOTHER,function(){a.consumerBiLogger.tour.lastStepSelectionKeepOrTryAnother("try another",a.getActiveTaskName())}),this.registerBIEvent(builders.AssistantAction.EVENTS.KEEP_TRYANOTHER_CHOSE_KEEP,function(){a.consumerBiLogger.tour.lastStepSelectionKeepOrTryAnother("keep",a.getActiveTaskName())})},a.prototype.getTaskExecutionMode=function(){return!this.assistantManager.isInActiveTask()||this.assistantManager.isMenuOpen()?"no-tour":this.assistantManager.isInAutoplayMode()?"auto-tour":"manual-tour"},a.prototype.registerBIEvent=function(a,b){this.$rootScope.$on(a,b)},a.prototype.getActiveTaskName=function(){return this.assistantManager.getActiveTask().BI.description},a}();angular.module("siteGeneratorTourManagerInternal").service("assistantBI",AssistantBI).run(["assistantBI",function(a){}]);var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TourUiHelper=function(){function a(a,b,c){this.$q=a,this.$interval=b,this.storyServices=c,this.DEFAULT_POSITION_DURATION=500,this.ELEMENT_TRANSITION_ACTIVE_CLASS="tour-element-transition-active"}return a.$inject=["$q","$interval","storyServices"],a.prototype.trackChanges=function(a,b,c){var d=this;return void 0===b&&(b=250),this.$interval(function(){return d.notifyChangeIfNeeded(a,c)},b)},a.prototype.notifyChangeIfNeeded=function(a,b){var c=a.data("boundingClientRect"),d=this.getRoundedBoundingClientRect(a);window.requestAnimationFrame(function(){angular.equals(c,d)||b(a),a.data("boundingClientRect",d)})},a.prototype.highlightElement=function(a,b){void 0===b&&(b=!1);var c=[],d=this;$(a).addClass("intro-element"),b&&$(a).addClass("intro-element-preserve-background"),"static"===$(a).css("position")&&$(a).addClass("intro-element-relative");for(var e=$(a).parent();e.length>0&&"body"!==e.get(0).tagName.toLowerCase();){var f=e.css("zIndex"),g=parseFloat(e.css("opacity")),h=e.css("transform");(/[0-9]+/.test(f)||g<1||"none"!==h&&void 0!==h)&&(e.addClass("intro-fixparent"),c.push(e)),e=$(e).parent()}return function(a,b){return function(){d.unhighlighElement(a,b)}}(a,c)},a.prototype.unhighlighElement=function(a,b){void 0===b&&(b=[]);var c=$(a);c.removeClass("intro-element"),c.removeClass("intro-element-disabled"),c.removeClass("intro-element-relative"),b.forEach(function(a){$(a).removeClass("intro-fixparent")})},a.prototype.innerPositionElement=function(a,b,c,d,e){var f=this;void 0===e&&(e=this.DEFAULT_POSITION_DURATION);var g=this.$q.defer(),h=$(a);try{b=$(b);var i=$(a).get(0).getBoundingClientRect(),j=this.getInnerPositionOffset(a,b,c,d),k=!("auto"===h.css("left")||"auto"===h.css("top")),l=e/1e3;0===e||i.left===j.left&&i.top===j.top||!k?(h.removeClass(this.ELEMENT_TRANSITION_ACTIVE_CLASS),g.resolve()):(h.removeClass(this.ELEMENT_TRANSITION_ACTIVE_CLASS),$(a).one("transitionend",function(){h.removeClass(f.ELEMENT_TRANSITION_ACTIVE_CLASS),g.resolve()}),h.addClass(this.ELEMENT_TRANSITION_ACTIVE_CLASS)),h.css("transition","left "+l+"s ease-in-out, top "+l+"s ease-in-out"),h.offset(j)}catch(a){console.error("error",a),h.removeClass(this.ELEMENT_TRANSITION_ACTIVE_CLASS),g.resolve()}return g.promise},a.prototype.outerPositionElement=function(a,b,c,d,e,f,g,h){var i=this;void 0===e&&(e=this.DEFAULT_POSITION_DURATION),void 0===f&&(f=!0);var j=this.$q.defer();try{var k=$(a);if((b=$(b))&&b.length){var l=$(a).get(0).getBoundingClientRect(),m=this.getOuterPositionOffset(a,b,c,d,g,h),n=!("auto"===k.css("left")||"auto"===k.css("top")),o=e/1e3;f&&(k.css({left:0}),m=this.fitOffsetToScreen(m,k.outerWidth(),k.outerHeight())),k.css("transition","left "+o+"s ease-in-out, top "+o+"s ease-in-out"),k.offset(m),0===e||l.left===m.left&&l.top===m.top||!n?(k.removeClass(this.ELEMENT_TRANSITION_ACTIVE_CLASS),j.resolve()):(k.addClass(this.ELEMENT_TRANSITION_ACTIVE_CLASS),$(a).one("transitionend",function(){k.removeClass(i.ELEMENT_TRANSITION_ACTIVE_CLASS),j.resolve()}))}else k.hide(),j.resolve()}catch(a){console.error(a),j.resolve()}return j.promise},a.prototype.getOuterPositionOffset=function(a,b,c,d,e,f){void 0===e&&(e=0),void 0===f&&(f=0);var g=20;a=$(a);var h=$(b).get(0).getBoundingClientRect(),i={};return d===builders.AssistantPositionY.Top?(i.left=h.left+h.width/2-a.outerWidth()/2,i.top=h.top-a.outerHeight()-g):c===builders.AssistantPositionX.Right?(i.left=h.right+g,i.top=h.top-a.outerHeight()/2+h.height/2):d===builders.AssistantPositionY.Bottom?(i.left=h.left+h.width/2-a.outerWidth()/2,i.top=h.bottom+g):c===builders.AssistantPositionX.Left&&(i.left=h.left-a.outerWidth()-g,i.top=h.top-a.outerHeight()/2+h.height/2),isNaN(i.top)||(i.top+=f),isNaN(i.left)||(i.left+=e),i},a.prototype.fitOffsetToScreen=function(a,b,c){var d,e=$("body").get(0).getBoundingClientRect();return a.left+b>e.right?(d=e.right-(a.left+b),a.left=a.left+d-30):a.left<e.left?(d=e.left-a.left,a.left=a.left+d+30):a.top+c>e.bottom&&(d=e.bottom-(a.top+c),a.top+=d-30),a},a.prototype.getInnerPositionOffset=function(a,b,c,d){void 0===c&&(c=builders.AssistantPositionX.Center),void 0===d&&(d=builders.AssistantPositionY.Center);var e=$(a);b=$(b);var f=$(b).get(0).getBoundingClientRect(),g={};return c===builders.AssistantPositionX.Left?g.left=f.left:c===builders.AssistantPositionX.Center?g.left=f.left+f.width/2-e.outerWidth()/2:c===builders.AssistantPositionX.Right&&(g.left=f.right-e.outerWidth()),d===builders.AssistantPositionY.Top?g.top=f.top:d===builders.AssistantPositionY.Center?g.top=f.top+f.height/2-e.outerHeight()/2:d===builders.AssistantPositionY.Bottom&&(g.top=f.bottom-e.outerHeight()),g},a.prototype.getRoundedBoundingClientRect=function(a){var b=$(a).get(0);if(!b)return{left:-1,right:-1,top:-1,bottom:-1,width:0,height:0};var c=b.getBoundingClientRect();return{left:Number(c.left.toFixed(0)),right:Number(c.right.toFixed(0)),top:Number(c.top.toFixed(0)),bottom:Number(c.bottom.toFixed(0)),width:Number(c.width.toFixed(0)),height:Number(c.height.toFixed(0))}},a}(),TourHint=function(){function a(a,b,c,d){this.$q=a,this.tourUiHelper=b,this.$interval=c,this.$timeout=d,this.CLICK_CLASS="intro-hint-click",this.CLICK_DURATION=1e3,this.MOVE_SPEED=350,this.TRACK_CHANGE_INTERVAL=400,this.isDirty=!1,this.fadeTimeInMs=250,this.hintElement=this.createHint(),angular.element("body").append(this.hintElement),this.hide(0)}return a.prototype.show=function(a){void 0===a&&(a=this.fadeTimeInMs),this.hintElement.fadeIn(a)},a.prototype.hide=function(a){void 0===a&&(a=this.fadeTimeInMs),this.hintElement.fadeOut(a),this.hintElement.css("transition","left 0s ease-in-out, top 0s ease-in-out"),this.hintElement.offset({left:-1e3,top:1e3})},a.prototype.attachTo=function(a,b,c){var d=this;if(this.attachPromise)throw"hint is already attached, try to detach first";this.targetElement=$(a);var e=this.isDirty?this.MOVE_SPEED:0,f=this.tourUiHelper.innerPositionElement(this.hintElement,this.targetElement,b,c,e);return this.attachPromise=this.tourUiHelper.trackChanges(this.targetElement,this.TRACK_CHANGE_INTERVAL,function(){d.tourUiHelper.innerPositionElement(d.hintElement,d.targetElement,b,c,d.MOVE_SPEED)}),this.isDirty=!0,f},a.prototype.detach=function(){this.attachPromise&&(this.$interval.cancel(this.attachPromise),this.attachPromise=null)},a.prototype.destroy=function(){this.detach(),this.hintElement.remove()},Object.defineProperty(a.prototype,"visible",{get:function(){return!this.hintElement.hasClass("tour-hint-hide")},enumerable:!0,configurable:!0}),a.prototype.simulateClick=function(){var a=this;return this.hintElement.addClass(this.CLICK_CLASS),this.$timeout(function(){return a.hintElement.removeClass(a.CLICK_CLASS)},this.CLICK_DURATION)},a.prototype.createHint=function(){var a;return a=angular.element("<div>"),a.addClass("intro-hint"),a},a}(),TourTooltip=function(){function a(a){this.$timeout=a,this.customClasses=[],this.fadeTimeInMs=250}return a.prototype.show=function(a){return void 0===a&&(a=this.fadeTimeInMs),this.element.fadeIn(a),this.$timeout(angular.noop,a)},a.prototype.hide=function(a){return void 0===a&&(a=this.fadeTimeInMs),this.element.fadeOut(a),this.$timeout(angular.noop,a)},a.prototype.destroy=function(){this.element.remove()},a.prototype.addCustomClasses=function(a){a&&((b=this.customClasses).push.apply(b,a),this.element.addClass(a.join(" ")));var b},a.prototype.removeCustomClasses=function(){this.element.removeClass(this.customClasses.join(" "))},a.prototype.addElementToBody=function(){angular.element("body").append(this.element)},a}(),TourAttachedTooltip=function(a){function b(b,c,d,e){var f=a.call(this,e)||this;return f.$q=b,f.tourUiHelper=c,f.$interval=d,f.TRACK_CHANGE_INTERVAL=400,f.element=f.createElement(),f.arrowElement=f.getArrowElement(),f.addElementToBody(),f.hide(0),f}return __extends(b,a),b.prototype.setContent=function(a){this.element.find("."+b.CONTENT_CLASS).html(a)},b.prototype.destroy=function(){this.detach(),a.prototype.destroy.call(this)},b.prototype.attachTo=function(a,b,c,d,e){var f=this;if(this.isAttached)throw"tooltip is already attached, try to detach first";this.attachedToElement=$(a),this.attachToElementPromise=this.tourUiHelper.trackChanges(this.attachedToElement,this.TRACK_CHANGE_INTERVAL,function(){f.tourUiHelper.outerPositionElement(f.element,f.attachedToElement,b,c,0,!0,d,e),f.setArrowPosition(b,c)}),this.isAttached=!0,this.$timeout(function(){f.tourUiHelper.outerPositionElement(f.element,f.attachedToElement,b,c,0,!0,d,e),f.setArrowPosition(b,c)})},b.prototype.detach=function(){this.isAttached&&(this.$interval.cancel(this.attachToElementPromise),this.attachToElementPromise=null,this.isAttached=!1,this.attachedToElement.removeData("boundingClientRect"))},b.prototype.createElement=function(){var a=angular.element("<div>");return a.addClass(b.ELEMENT_CLASS),a.html('<div class="'+b.CONTENT_CLASS+'"></div><div class="'+b.ARROW_CLASS+'"></div>'),a},b.prototype.getArrowElement=function(){return this.element.find("."+b.ARROW_CLASS)},b.prototype.setArrowPosition=function(a,b){var c=_.isUndefined(a)?builders.AssistantPositionY[b]:builders.AssistantPositionX[a];this.arrowElement.attr("position",c),this.tourUiHelper.outerPositionElement(this.arrowElement,this.attachedToElement,a,b,0,!1);var d={};a===builders.AssistantPositionX.Left?d.left=this.element.width():a===builders.AssistantPositionX.Right?d.left=-8:b===builders.AssistantPositionY.Top?d.top=this.element.height():b===builders.AssistantPositionY.Bottom&&(d.top=-8),this.arrowElement.css(d)},b}(TourTooltip);TourAttachedTooltip.ELEMENT_CLASS="intro-tooltip",TourAttachedTooltip.ARROW_CLASS="intro-tooltip-arrow",TourAttachedTooltip.CONTENT_CLASS="intro-tooltip-content";var TourModal=function(a){function b(b){var c=a.call(this,b)||this;return c.element=c.createElement(),c.hide(),c.addElementToBody(),c}return __extends(b,a),b.prototype.setContent=function(a){this.element.html(a)},b.prototype.createElement=function(){var a=angular.element("<div>");return a.addClass(b.ELEMENT_CLASS),a},b}(TourTooltip);TourModal.ELEMENT_CLASS="intro-modal";var TourBackdrop=function(){function a(a){this.$timeout=a,this.fadeTimeInMs=300,this.backdropElement=this.createBackdrop(),this.hide(0),this.syncBackdropScrollWithFakeBrowser()}return a.prototype.syncBackdropScrollWithFakeBrowser=function(){angular.element("body").append(this.backdropElement);var a;this.backdropElement[0].addEventListener("wheel",function(b){a=a||angular.element(".overlay-viewport")[0],a.scrollTop+=b.deltaY},{passive:!0})},a.prototype.show=function(a,b){void 0===b&&(b=this.fadeTimeInMs),this.backdropElement.show(),this.backdropElement.fadeTo(b,a)},a.prototype.hide=function(a){var b=this;return void 0===a&&(a=this.fadeTimeInMs),this.backdropElement.fadeTo(a,0),this.$timeout(function(){return b.backdropElement.hide()},a)},a.prototype.setOpacity=function(a,b){
if(void 0===b&&(b=this.fadeTimeInMs),a>1||a<0)throw"invalid opacity, should be between 0-1";this.backdropElement.fadeTo(b,a)},a.prototype.destroy=function(){this.backdropElement.remove()},a.prototype.onClick=function(a){this.backdropElement.on("click",function(){return a()})},a.prototype.createBackdrop=function(){var a;return a=angular.element("<div>"),a.addClass("intro-backdrop"),a},a}();TourBackdrop.DEFAULT_OPACITY=.7;var AssistantUIAdapter=function(){function a(a,b,c,d,e,f){this.TourHint=a,this.TourBackdrop=b,this.TourAttachedTooltip=c,this.TourModal=d,this.tourUiHelper=e,this.$q=f,this.tourBackdrop=new this.TourBackdrop,this.tourHint=new this.TourHint}return a.$inject=["TourHint","TourBackdrop","TourAttachedTooltip","TourModal","tourUiHelper","$q"],a.prototype.renderAction=function(a,b){a.hint&&a.hint.enabled||this.tourHint.hide(),this.tourHint.detach();var c=this.handleBackdrop(a);a.isModal?(this.tourTooltip=new this.TourModal,this.tourTooltip.setContent(b),this.tourTooltip.addCustomClasses(a.tooltip.customClasses)):a.tooltip&&!a.tooltip.disabled&&a.element&&a.element.selector&&(this.tourTooltip=this.tourTooltip||new this.TourAttachedTooltip,this.tourTooltip.setContent(b),this.tourTooltip.attachTo(a.element.selector,a.tooltip.positionX,a.tooltip.positionY,a.tooltip.offsetX,a.tooltip.offsetY),this.tourTooltip.addCustomClasses(a.tooltip.customClasses)),this.unhighlightElementCallback=this.handleElementHighlight(a);var d=this.tourTooltip?this.tourTooltip.show():this.$q.when();return this.$q.all([c,d])},a.prototype.destroyAction=function(){return _.isFunction(this.unhighlightElementCallback)&&this.unhighlightElementCallback(),this.tourTooltip&&(this.tourTooltip.destroy(),this.tourTooltip=null),this.hideHint(),this.tourBackdrop.hide()},a.prototype.hideAction=function(a){var b=this;if(void 0===a&&(a={}),_.isFunction(this.unhighlightElementCallback)&&this.unhighlightElementCallback(),this.tourTooltip&&a.tooltip&&!a.tooltip.dontHideOnExit||this.tourTooltip instanceof TourModal)return this.tourTooltip.hide().then(function(){b.tourTooltip&&b.tourTooltip.destroy(),b.tourTooltip=null})},a.prototype.disableHighlightInteractivity=function(a){a.element&&a.element.selector?$(a.element.selector).addClass("intro-element-disabled"):a.hint&&a.hint.selector&&$(a.hint.selector).addClass("intro-element-disabled"),a.additionalHighlightedElements&&a.additionalHighlightedElements.forEach(function(a){return $(a).addClass("intro-element-disabled")})},a.prototype.enableHighlightInteractivity=function(a){a.element&&a.element.selector?$(a.element.selector).removeClass("intro-element-disabled"):a.hint&&a.hint.selector&&$(a.hint.selector).removeClass("intro-element-disabled"),a.additionalHighlightedElements&&a.additionalHighlightedElements.forEach(function(a){return $(a).removeClass("intro-element-disabled")})},a.prototype.disableElements=function(a){void 0===a&&(a=[]),a.forEach(function(a){return a.addClass("disable-element").prop("disabled",!0)})},a.prototype.enableElements=function(a){void 0===a&&(a=[]),a.forEach(function(a){return a.removeClass("disable-element").prop("disabled",!1)})},a.prototype.hideHint=function(){this.tourHint.hide()},a.prototype.fadeOutBackdrop=function(a){this.tourBackdrop.show(0,a)},a.prototype.moveHintToElement=function(a){return a.hint?(this.tourHint.show(),this.tourHint.attachTo(a.hint.selector||a.element&&a.element.selector,a.hint.positionX,a.hint.positionY)):this.$q.when()},a.prototype.simulateClick=function(){return this.tourHint.simulateClick()},a.prototype.handleBackdrop=function(a){return a.backdrop&&a.backdrop.enabled?this.$q.when(this.tourBackdrop.show(void 0!==a.backdrop.opacity?a.backdrop.opacity:TourBackdrop.DEFAULT_OPACITY)):this.tourBackdrop.hide()},a.prototype.handleElementHighlight=function(a){var b=this,c=[],d=a.preserveBackground;if(a.element||a.hint){var e=this.tourUiHelper.highlightElement($(a.element?a.element.selector:a.hint.selector),d);c.push(e)}if(a.additionalHighlightedElements){var f=a.additionalHighlightedElements.map(function(a){return b.tourUiHelper.highlightElement($(a),d)});c.push.apply(c,f)}return function(){c.forEach(function(a){return a()})}},a.prototype.scrollToElement=function(a){if((a.hint&&a.hint.selector||a.element&&a.element.selector)&&!1!==a.scrollToElement){var b=a.hint&&a.hint.selector||a.element&&a.element.selector,c=$(b).get(0);c&&c.scrollIntoView(!1)}},a}();angular.module("siteGeneratorTourManagerInternal").service("assistantUIAdapter",AssistantUIAdapter).factory("TourHint",["$q","tourUiHelper","$interval","$timeout",function(a,b,c,d){return function(){return new TourHint(a,b,c,d)}}]).factory("TourAttachedTooltip",["$q","tourUiHelper","$interval","$timeout",function(a,b,c,d){return function(){return new TourAttachedTooltip(a,b,c,d)}}]).factory("TourBackdrop",["$timeout",function(a){return function(){return new TourBackdrop(a)}}]).factory("TourModal",["$timeout",function(a){return function(){return new TourModal(a)}}]).service("tourUiHelper",TourUiHelper);var AssistantVideoService=function(){function a(a,b,c,d,e,f){this.$translate=a,this.CcDialogBuilder=b,this.$document=c,this.consumerBiLogger=d,this.CONSUMER_DIALOGS=e,this.$timeout=f,this.isShow=!1}return a.$inject=["$translate","CcDialogBuilder","$document","consumerBiLogger","CONSUMER_DIALOGS","$timeout"],a.prototype.close=function(){this.isShow=!1,this.consumerBiLogger.tour.assistantVideoModalClose(),this.CcDialogBuilder.hide()},a.prototype.open=function(){this.isShow=!0,this.consumerBiLogger.tour.assistantVideoModalLoaded("assistant")},a.prototype.isShowVideo=function(){return this.isShow},a.prototype.getAssistantVideoUrl=function(){return this.$translate.instant("assistant-menu.assistant-video-link")},a.prototype.onAssistantVideoClicked=function(a){this.open(),this.CcDialogBuilder.show({parent:this.$document.body,targetEvent:a,biDialogName:this.CONSUMER_DIALOGS.BUSINESS_DETAILS,template:'<md-dialog aria-label="Business details" class="big-modal assistant-video-modal"><assistant-video></assistant-video></md-dialog>'})},a}();angular.module("siteGeneratorTourManagerInternal").service("assistantVideoService",AssistantVideoService);var SMART_ASSIST_LAST_ISSUE_CLOSED_RESON;!function(a){a[a.ISSUE_MUTED=0]="ISSUE_MUTED",a[a.ISSUE_CLOSED=1]="ISSUE_CLOSED",a[a.ISSUE_CLOSED_VIA_TOUR=2]="ISSUE_CLOSED_VIA_TOUR",a[a.NONE=3]="NONE"}(SMART_ASSIST_LAST_ISSUE_CLOSED_RESON||(SMART_ASSIST_LAST_ISSUE_CLOSED_RESON={}));var SMART_ASSIST_LAST_ISSUE_CLOSED_VIA_TOUR_DISPLAY_STATUS;!function(a){a[a.FIRST_TIME_REQUEST=0]="FIRST_TIME_REQUEST",a[a.SECOND_TIME_REQUEST=1]="SECOND_TIME_REQUEST"}(SMART_ASSIST_LAST_ISSUE_CLOSED_VIA_TOUR_DISPLAY_STATUS||(SMART_ASSIST_LAST_ISSUE_CLOSED_VIA_TOUR_DISPLAY_STATUS={}));var AssistantTabListService=function(){function a(a,b,c,d,e,f){this.smartAssistMenuService=a,this.SmartAssistManager=b,this.consumerBiLogger=c,this.assistantTaskFetcher=d,this.pubSub=e,this.$rootScope=f,this.selectedTabId=this.getStartingTab(),this.initiateSmartAssistTabData(),this.initiateSmartAsistTourCallbaks()}return a.$inject=["smartAssistMenuService","SmartAssistManager","consumerBiLogger","assistantTaskFetcher","pubSub","$rootScope"],a.prototype.tabListOpened=function(){this.isRequestedAfterLastIssueWasSolved()&&this.setTabAfterLastSmartAssistIssueClosed()},a.prototype.getSelectedTab=function(){return this.selectedTabId},a.prototype.selectBucketListTab=function(b){return void 0===b&&(b=BIOrigins.SwitchTab),this.onTabSelectedManually(a.TAB_ID.BUCKET_LIST,b),a.TAB_ID.BUCKET_LIST},a.prototype.selectSmartAssistTab=function(){return this.onTabSelectedManually(a.TAB_ID.SMART_ASSIST,BIOrigins.SwitchTab),a.TAB_ID.SMART_ASSIST},a.prototype.isRequestedAfterLastIssueWasSolved=function(){return this.smartAssistTabData.lastIssueClosedReson!==SMART_ASSIST_LAST_ISSUE_CLOSED_RESON.NONE},a.prototype.initiateSmartAsistTourCallbaks=function(){var a=this;this.smartAssistTabData.issueClosedCallbackUnSubscribe=this.pubSub.subscribe(PubSub.events.SMART_ASSIST_ISSUES_CLOSED,function(){return a.issueClosed(!1)}),this.defineCallbacksToCloseIssueEventWhenTourIsOpen(),this.defineCallbacksToCloseIssueEventWhenTourIsClosed(),this.defineCallbacksForMuteIssue()},a.prototype.defineCallbacksForMuteIssue=function(){this.enableMuteLogicWhenMuneOpen(),this.disableMuteLogicWhenMuneClose()},a.prototype.enableMuteLogicWhenMuneOpen=function(){var a=this;this.$rootScope.$on(builders.AssistantAction.EVENTS.OPEN_MENU,function(){a.smartAssistTabData.muteIssueCallbackUnSubscribe=a.pubSub.subscribe(PubSub.events.SMART_ASSIST_ISSUES_MUTED,function(){return a.issueMuted()})})},a.prototype.disableMuteLogicWhenMuneClose=function(){var a=this;this.$rootScope.$on(builders.AssistantAction.EVENTS.CLOSE_MENU,function(){a.smartAssistTabData.muteIssueCallbackUnSubscribe&&a.smartAssistTabData.muteIssueCallbackUnSubscribe()})},a.prototype.defineCallbacksToCloseIssueEventWhenTourIsOpen=function(){var a=this;this.$rootScope.$on(builders.AssistantAction.EVENTS.TASK_START,function(){a.smartAssistTabData.issueClosedCallbackUnSubscribe&&a.smartAssistTabData.issueClosedCallbackUnSubscribe(),a.smartAssistTabData.issueClosedCallbackUnSubscribe=a.pubSub.subscribe(PubSub.events.SMART_ASSIST_ISSUES_CLOSED,function(){return a.issueClosed(!0)})})},a.prototype.defineCallbacksToCloseIssueEventWhenTourIsClosed=function(){var a=this;[builders.AssistantAction.EVENTS.TASK_COMPLETE,builders.AssistantAction.EVENTS.TASK_QUIT,builders.AssistantAction.EVENTS.TASK_SKIP,builders.AssistantAction.EVENTS.TASK_TIMEOUT].forEach(function(b){a.$rootScope.$on(b,function(){a.smartAssistTabData.issueClosedCallbackUnSubscribe&&a.smartAssistTabData.issueClosedCallbackUnSubscribe(),a.smartAssistTabData.issueClosedCallbackUnSubscribe=a.pubSub.subscribe(PubSub.events.SMART_ASSIST_ISSUES_CLOSED,function(){return a.issueClosed(!1)})})})},a.prototype.issueClosed=function(a){0===this.smartAssistMenuService.getIssues().length&&(this.smartAssistTabData.lastIssueClosedReson=a?SMART_ASSIST_LAST_ISSUE_CLOSED_RESON.ISSUE_CLOSED_VIA_TOUR:SMART_ASSIST_LAST_ISSUE_CLOSED_RESON.ISSUE_CLOSED)},a.prototype.issueMuted=function(){0===this.smartAssistMenuService.getIssues().length&&(this.smartAssistTabData.lastIssueClosedReson=SMART_ASSIST_LAST_ISSUE_CLOSED_RESON.ISSUE_MUTED)},a.prototype.getStartingTab=function(){return this.smartAssistMenuService.shouldDisplayEmptyState()?a.TAB_ID.BUCKET_LIST:a.TAB_ID.SMART_ASSIST},a.prototype.isLastIssueClosedViaTour=function(){return this.smartAssistTabData.lastIssueClosedReson===SMART_ASSIST_LAST_ISSUE_CLOSED_RESON.ISSUE_CLOSED_VIA_TOUR},a.prototype.isTabRequestAfterIssueClosedViaTourFirstTime=function(){return this.smartAssistTabData.lastIssueClosedViaTourDisplayStatus===SMART_ASSIST_LAST_ISSUE_CLOSED_VIA_TOUR_DISPLAY_STATUS.FIRST_TIME_REQUEST},a.prototype.setTabAfterLastSmartAssistIssueClosed=function(){this.isLastIssueClosedViaTour()&&this.isTabRequestAfterIssueClosedViaTourFirstTime()?(this.smartAssistTabData.lastIssueClosedViaTourDisplayStatus=SMART_ASSIST_LAST_ISSUE_CLOSED_VIA_TOUR_DISPLAY_STATUS.SECOND_TIME_REQUEST,this.selectedTabId=a.TAB_ID.SMART_ASSIST):(this.initiateSmartAssistTabDataLastClosedIssue(),this.selectedTabId=a.TAB_ID.BUCKET_LIST)},a.prototype.initiateSmartAssistTabData=function(){this.smartAssistTabData={lastIssueClosedReson:SMART_ASSIST_LAST_ISSUE_CLOSED_RESON.NONE,lastIssueClosedViaTourDisplayStatus:SMART_ASSIST_LAST_ISSUE_CLOSED_VIA_TOUR_DISPLAY_STATUS.FIRST_TIME_REQUEST,issueClosedCallbackUnSubscribe:void 0,muteIssueCallbackUnSubscribe:void 0}},a.prototype.initiateSmartAssistTabDataLastClosedIssue=function(){this.smartAssistTabData.lastIssueClosedReson=SMART_ASSIST_LAST_ISSUE_CLOSED_RESON.NONE,this.smartAssistTabData.lastIssueClosedViaTourDisplayStatus=SMART_ASSIST_LAST_ISSUE_CLOSED_VIA_TOUR_DISPLAY_STATUS.FIRST_TIME_REQUEST},a.prototype.onTabSelectedManually=function(a,b){this.selectedTabId!==a&&(this.consumerBiLogger.tour.assistantMenuShown(this.getBIStateForTab(a),b,a),this.selectedTabId=a)},a.prototype.getBIStateForTab=function(b){switch(b){case a.TAB_ID.SMART_ASSIST:return this.SmartAssistManager.getNumberOfActiveIssues().toString();case a.TAB_ID.BUCKET_LIST:return this.assistantTaskFetcher.getNumOfCompletedTasks().toString();default:return null}},a}();AssistantTabListService.TAB_ID={BUCKET_LIST:"tours",SMART_ASSIST:"smart-assist"},angular.module("siteGeneratorTourManagerInternal").service("assistantTabListService",AssistantTabListService);var AssistantUtils=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){this.$q=a,this.$state=b,this.$timeout=c,this.$window=d,this.$compile=e,this.$rootScope=f,this.spinnerService=g,this.ELEMENT_SELECTOR=h,this.storyServices=i,this.applicationParameters=j,this.flags=k,this.$injector=l,this.DEFAULT_TRIGGER="click",this.DELAY_BEFORE_SPINNER_WAIT=800,this.LISTENER_NAMESPACE="obassistant",this.TOUR_STEP_TOOLTIP_COMPONENT='<assistant-tooltip action="action"></assistant-tooltip>',this.STORAGE_KEY="ob_tasks",this.OLD_STORAGE_KEY="ob_tours",this.tourToAssistantNameDictionary={previewTour:"previewTask",entireWebsiteDesign:"entireWebsiteDesignTask",editContentTour:"editContentTask",customizeSectionDesign:"customizeSectionDesign",pageSEOTour:"pageSEOTask",changeLayoutTour:"changeLayoutTour",addSectionTour:"addSectionTask",welcomeTour:"welcomeTask",addNewPageTour:"addNewPageTask",animationTour:"animationTask"},this.$=d.$}return a.$inject=["$q","$state","$timeout","$window","$compile","$rootScope","spinnerService","ELEMENT_SELECTOR","storyServices","applicationParameters","flags","$injector"],a.prototype.compileTemplateContent=function(a,b,c,d){var e=this.$rootScope.$new();e.action=c,e.task=b,e.assistantManager=a,e.flags=d;var f=c.tooltip&&c.tooltip.template||this.TOUR_STEP_TOOLTIP_COMPONENT;return this.$compile(f)(e)},a.prototype.redirectToState=function(a){if(a)return this.$state.go(a)},a.prototype.triggerElement=function(a,b){this.$timeout(function(){$(a).trigger(b)})},a.prototype.registerActionTrigger=function(a,b){var c=this;return this.$timeout(function(){c.$(a.element).one(c.getNamespacedTrigger(a.trigger),a.descendant,function(){a.callback&&a.callback(),b(a.intent)})})},a.prototype.unregisterActionTrigger=function(a){this.$(a.element).off(this.getNamespacedTrigger(a.trigger))},a.prototype.replaceElementSelectorPlaceholderWithValue=function(a,b){return a?a.replace(this.ELEMENT_SELECTOR,b):b},a.prototype.waitForSpinner=function(a){var b=this;return a?this.$timeout(function(){return b.spinnerService.waitForStop()},this.DELAY_BEFORE_SPINNER_WAIT):this.$q.when()},a.prototype.delayAction=function(a){return void 0===a&&(a=0),this.$timeout(angular.noop,a)},a.prototype.getElementSelector=function(a){var b=a.selector;return a.isRandom&&(b=this.getRandomElementSelector(a)),b},a.prototype.getRandomElementSelector=function(a){a.randomElementsBank&&a.randomElementsBank.length||(a.randomElementsBank=this.createArrayAccordingToNumberOfElementsOnScreen(a.selector));var b=this.getAndRemoveRandomElementFromArray(a.randomElementsBank);return this.getIndexedElementSelector(a.selector,b)},a.prototype.createArrayAccordingToNumberOfElementsOnScreen=function(a){return _.range(0,this.$(a).length)},a.prototype.getAndRemoveRandomElementFromArray=function(a){return a.splice(Math.floor(Math.random()*a.length),1)[0]},a.prototype.getIndexedElementSelector=function(a,b){return a+":eq("+b+")"},a.prototype.getNamespacedTrigger=function(a){return void 0===a&&(a=this.DEFAULT_TRIGGER),a+"."+this.LISTENER_NAMESPACE},a.prototype.getDefaultExitTrigger=function(a){return void 0===a&&(a=[]),_.find(a,{isDefault:!0})||a[0]},a.prototype.broadcastAssistantEvent=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];(d=this.$rootScope).$broadcast.apply(d,[a].concat(b));var d},a.prototype.openAddTopBarMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("openAddTopBarMenu",!0)},a.prototype.closeAddTopBarMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("openAddTopBarMenu",!1)},a.prototype.openSiteDesignTopBarMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("openSiteDesignTopBarMenu",!0)},a.prototype.closeSiteDesignTopBarMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("openSiteDesignTopBarMenu",!1)},a.prototype.showSectionDesignMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("showSectionDesignMenu",!0)},a.prototype.hideSectionDesignMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("showSectionDesignMenu",!1)},a.prototype.showSiteDesignMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("showSiteDesignMenu",!0)},a.prototype.hideSiteDesignMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("showSiteDesignMenu",!1)},a.prototype.openPagesTopBarMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("openPagesTopBarMenu",!0)},a.prototype.closePagesTopBarMenu=function(){this.$injector.get("assistantManager").setCustomTaskData("openPagesTopBarMenu",!1)},a.prototype.hideListSpanButtons=function(){this.$injector.get("assistantManager").setCustomTaskData("hideListSpanButtons",!0)},a.prototype.showListSpanButtons=function(){this.$injector.get("assistantManager").setCustomTaskData("hideListSpanButtons",!1)},a.prototype.getTaskDataFromStorage=function(a){void 0===a&&(a=this.STORAGE_KEY);var b=this.getData(a);if(this.storyServices.story&&this.storyServices.story.id)return b&&b[this.storyServices.story.id]},a.prototype.saveTaskData=function(a){var b=this.getData()||{};this.storyServices.story&&(b[this.storyServices.story.id]=b[this.storyServices.story.id]||{},b[this.storyServices.story.id][a.id]={id:a.id,isComplete:a.isComplete}),this.storeItem(this.STORAGE_KEY,JSON.stringify(b))},a.prototype.saveTasksData=function(a){var b=this.getData(this.STORAGE_KEY)||{};this.storyServices.story&&(b[this.storyServices.story.id]=a),this.storeItem(this.STORAGE_KEY,JSON.stringify(b))},a.prototype.removeDataFromStorage=function(a){void 0===a&&(a=this.STORAGE_KEY),this.isUseBlobStory(a)?this.storyServices.story.tourState[a]=null:this.$window.localStorage.removeItem(a)},a.prototype.convertLocalStorageToursToTasks=function(){var a=this,b=this.getData(this.OLD_STORAGE_KEY);if(b&&b.sites){var c=Object.keys(b.sites).reduce(function(c,d){return c[d]=a.normalizeOldTourDataToAssistantData(b.sites[d].tours),c},{});this.removeDataFromStorage(this.OLD_STORAGE_KEY),this.storeItem(this.STORAGE_KEY,JSON.stringify(c))}},a.prototype.isUseBlobStory=function(a){return a===this.STORAGE_KEY},a.prototype.storeItem=function(a,b){this.isUseBlobStory(a)&&this.storyServices.story?this.storyServices.story.tourState[a]=b:this.$window.localStorage.setItem(a,b)},a.prototype.getData=function(a){void 0===a&&(a=this.STORAGE_KEY);var b;return b=this.isUseBlobStory(a)&&this.storyServices.story&&this.storyServices.story.tourState&&this.storyServices.story.tourState[a]?this.storyServices.story.tourState[a]:this.$window.localStorage.getItem(a),b?JSON.parse(b):void 0},a.prototype.normalizeOldTourDataToAssistantData=function(a){var b=this;return a.reduce(function(a,c){var d=c.name;if("fontColorTour"===d)a.fontDesignTask={id:"fontDesignTask",isComplete:c.isComplete},a.colorDesignTask={id:"colorDesignTask",isComplete:c.isComplete};else{var e=b.tourToAssistantNameDictionary[d];e&&(a[e]={id:e,isComplete:c.isComplete})}return a},{})},a.prototype.getActiveExperiments=function(){var a=this;return Object.keys(this.flags).filter(function(b){return!!a.flags[b]&&"$get"!==b}).map(function(b){return!0===a.flags[b]?b:b+"_"+a.flags[b]})},a.prototype.shouldAutoProvisionTPAOfType=function(a){return!!this.storyServices.story&&_.contains(this.applicationParameters.tpaTypes[a].structureIds,this.storyServices.story.structureId)},a.prototype.goToOnSliderHandled=function(a){var b,c=this;$(builders.AssistantAction.HOOKS.FONT_SIZE_SLIDER).mousedown(function(){return b=!0}),window.addEventListener("mouseup",function(d){if(!0===b){c.$injector.get("assistantManager").gotoActionInActiveTask(a),b=!1}})},a}(),AssistantWaitUntilElement=function(){function a(a,b,c){this.$q=a,this.$interval=b,this.$window=c,this.$=c.$}return a.prototype.waitUntilElementIsInDOM=function(b,c,d,e,f){var g=this;void 0===d&&(d=null),void 0===e&&(e=a.WAIT_UNTIL_ELEMENT_INTERVAL_IN_MS),void 0===f&&(f=a.WAIT_UNTIL_ELEMENT_MAX_TRIES),this.intervalPromise&&this.stopWaiting();var h=this.$q.defer(),i=0,j=this.$(b);return!d&&j.length||d&&d(b)?h.resolve(j):this.intervalPromise=this.$interval(function(){i++;var a=g.$(b);!d&&a.length||d&&d(b)||c()?(g.stopWaiting(),h.resolve(a)):i>=f&&(g.stopWaiting(),h.reject())},e,f),h.promise},a.prototype.stopWaiting=function(){this.intervalPromise&&this.$interval.cancel(this.intervalPromise)},a}();AssistantWaitUntilElement.WAIT_UNTIL_ELEMENT_INTERVAL_IN_MS=400,AssistantWaitUntilElement.WAIT_UNTIL_ELEMENT_MAX_TRIES=90,angular.module("siteGeneratorTourManagerInternal").service("assistantUtils",AssistantUtils).factory("assistantWaitUntilElement",["$q","$interval","$window",function(a,b,c){return function(){return new AssistantWaitUntilElement(a,b,c)}}]).constant("ELEMENT_SELECTOR","$element");var builders;!function(a){!function(a){a[a.beginner=0]="beginner",a[a.intermediate=1]="intermediate"}(a.AssistantMenuProgress||(a.AssistantMenuProgress={}));var b;!function(a){a[a.Next=0]="Next",a[a.Stop=1]="Stop",a[a.Goto=2]="Goto",a[a.Start=3]="Start",a[a.Complete=4]="Complete",a[a.ForceStop=5]="ForceStop",a[a.NoOp=6]="NoOp"}(b=a.AssistantOperation||(a.AssistantOperation={}));var c;!function(a){a[a.Vertical=0]="Vertical",a[a.Horizontal=1]="Horizontal"}(c=a.TooltipOrientation||(a.TooltipOrientation={}));var d;!function(a){a[a.Top=0]="Top",a[a.Center=1]="Center",a[a.Bottom=2]="Bottom"}(d=a.AssistantPositionY||(a.AssistantPositionY={}));var e;!function(a){a[a.Left=0]="Left",a[a.Center=1]="Center",a[a.Right=2]="Right"}(e=a.AssistantPositionX||(a.AssistantPositionX={}));!function(a){a[a.Playing=0]="Playing",a[a.Stopped=1]="Stopped",a[a.Disabled=2]="Disabled",a[a.Hidden=3]="Hidden"}(a.AssistantDockStatus||(a.AssistantDockStatus={}));var f=function(){function f(){var g=this;this.conf={data:{}},this.thatAttachesTo=function(){var b={build:g.build.bind(g),and:g,dock:function(){return g.thatAttachesTo().hook(a.AssistantAction.HOOKS.DOCK),g.withTooltip().thatOpensUp(),b},hook:function(a){return g.mergeConf({element:{selector:a}}),b},onlyUnselectedElements:function(){return g.conf&&g.conf.element&&g.conf.element.selector&&g.mergeConf({element:{selector:f.unselected(g.conf.element.selector)}}),b},onlySelectedElements:function(){return g.conf&&g.conf.element&&g.conf.element.selector&&g.mergeConf({element:{selector:g.conf.element.selector+".selected"}}),b},randomElement:function(){return g.mergeConf({element:{isRandom:!0}}),b}};return b},this.withTooltip=function(){var a={build:g.build.bind(g),and:g,thatIsDisabled:function(){return g.mergeConf({tooltip:{disabled:!0}}),a},withTemplate:function(b){return g.mergeConf({tooltip:{disabled:!1,template:b}}),a},withButton:function(c){g.mergeConf({tooltip:{buttons:{}}});var d={withButton:a.withButton,build:g.build.bind(g),and:g,label:function(a){return g.mergeConf({tooltip:{buttons:(b={},b[c]={label:a},b)}}),d;var b},callback:function(a){return g.mergeConf({tooltip:{buttons:(b={},b[c]={callback:a},b)}}),d;var b},onClickGoTo:function(a){return g.mergeConf({tooltip:{buttons:(e={},e[c]={intent:{operation:b.Goto,goToIndex:a}},e)}}),d;var e},completeOnClick:function(){return g.mergeConf({tooltip:{buttons:(a={},a[c]={intent:{operation:b.Complete}},a)}}),d;var a}};return d},withTitle:function(b){return g.mergeConf({tooltip:{disabled:!1,title:b}}),a},withWidth:function(b){return a.withCustomStyle({width:b,"max-width":b}),a},withHeight:function(b){return a.withCustomStyle({height:b,"min-height":b}),a},withBackgroundColor:function(b){return a.withCustomStyle({backgroundColor:b}),a},withCustomStyle:function(b){return g.mergeConf({tooltip:{disabled:!1,customStyle:b}}),a},withContent:function(b){return g.mergeConf({tooltip:{disabled:!1,content:b}}),a},withImage:function(b){return g.mergeConf({tooltip:{disabled:!1,image:b}}),a},thatIsntHiddenAfterAction:function(){return g.mergeConf({tooltip:{dontHideOnExit:!0}}),a},thatOrientsVertically:function(){return g.mergeConf({tooltip:{orientation:c.Vertical}}),a},thatOpensAsModal:function(){return g.mergeConf({isModal:!0}),a},thatOpensFullScreen:function(){var b=g.conf&&g.conf.tooltip&&g.conf.tooltip.customClasses||[];return g.mergeConf({isModal:!0,tooltip:{customClasses:b.concat(["assistant-tooltip-fullscreen"])}}),a},thatOpensRight:function(b){var c=void 0===b?{}:b,d=c.offsetX,f=void 0===d?0:d,h=c.offsetY,i=void 0===h?0:h;return g.mergeConf({tooltip:{positionX:e.Right,offsetY:i,offsetX:f}}),a},thatOpensLeft:function(b){var c=void 0===b?{}:b,d=c.offsetX,f=void 0===d?0:d,h=c.offsetY,i=void 0===h?0:h;return g.mergeConf({tooltip:{positionX:e.Left,offsetY:i,offsetX:f}}),a},thatOpensUp:function(b){var c=void 0===b?{}:b,e=c.offsetX,f=void 0===e?0:e,h=c.offsetY,i=void 0===h?0:h;return g.mergeConf({tooltip:{positionY:d.Top,offsetY:i,offsetX:f}}),a},thatOpensDown:function(b){var c=void 0===b?{}:b,e=c.offsetX,f=void 0===e?0:e,h=c.offsetY,i=void 0===h?0:h;return g.mergeConf({tooltip:{positionY:d.Bottom,offsetY:i,offsetX:f}}),a}};return a},this.withBehaviors=function(){var a={build:g.build.bind(g),and:g,thatSkipsStepOnCondition:function(b){return g.mergeConf({shouldSkipAction:b}),a},thatStopsAutoplayOnEnter:function(){return g.mergeConf({onEnter:{stopAutoplay:!0}}),a},thatStartsAutoplayOnEnter:function(){return g.mergeConf({onEnter:{startAutoplay:!0}}),a},thatStartsAutoplayOnExit:function(){return g.mergeConf({onExit:{startAutoplay:!0}}),a},thatStopsAutoplayOnExit:function(){return g.mergeConf({onExit:{stopAutoplay:!0}}),a},thatGoesToIndexOnAutoPlay:function(b){return g.mergeConf({autoPlayGoToIndex:b}),a},thatClosesSidePanelOnExit:function(){return g.mergeConf({onExit:{DOMEvents:[{element:f.HOOKS.PANEL_CLOSE_BUTTON,trigger:"click"}]}}),a},thatClosesSidePanelOnEnter:function(){return g.mergeConf({onEnter:{DOMEvents:[{element:f.HOOKS.PANEL_CLOSE_BUTTON,trigger:"click"}]}}),a},thatWaitsForSpinner:function(){return g.mergeConf({waitForSpinner:!0}),a},thatRedirectsTo:function(b){return void 0===b&&(b=null),g.mergeConf({redirectToState:b}),a},thatWaitsForElementWithCondition:function(b){return g.mergeConf({waitForElementCondition:b}),a},thatDoesntScrollToElement:function(){return g.mergeConf({scrollToElement:!1}),a},thatDelays:function(b){return g.mergeConf({delayBeforeStartInMs:b}),a},thatWaitsForElement:function(b){return g.mergeConf({waitForElement:b}),a},thatWaitsForExpression:function(b){var c=g.conf.waitForExpressions,d=void 0===c?[]:c;return g.mergeConf({waitForExpressions:d.concat([b])}),a},thatHasHint:function(b,c){return void 0===b&&(b=e.Center),void 0===c&&(c=d.Center),g.mergeConf({hint:{enabled:!0,positionX:b,positionY:c}}),a},withAutoplayTimeoutOf:function(b){return g.mergeConf({autoplayTimeoutInMs:b}),a},thatAllowsDialogInterruptions:function(){return g.mergeConf({allowDialogInterruptions:!0}),a}};return a},this.withCallbacks=function(){var a={build:g.build.bind(g),and:g,onExit:function(b){return g.mergeConf({onExit:{callback:b}}),a},onEnter:function(b){return g.mergeConf({onEnter:{callback:b}}),a}};return a},this.withBackdrop=function(){var a={build:g.build.bind(g),and:g,thatIsOn:function(){return g.mergeConf({backdrop:f.BACKDROP.ON}),a},thatIsOff:function(){return g.mergeConf({backdrop:f.BACKDROP.OFF}),a},thatIsInvisible:function(){return g.mergeConf({backdrop:f.BACKDROP.INVISIBLE}),a},thatIsOpaque:function(){return g.mergeConf({backdrop:f.BACKDROP.OPAQUE}),a},thatFadesOutOnExit:function(b){return void 0===b&&(b=1e3),g.mergeConf({backdrop:{fadeOutOnExit:!0,fadeOutTime:b}}),a}};return a},this.withConditionalConf=function(){var a={build:g.build.bind(g),and:g,experimentIsEnabled:function(b,c){return g.mergeConf({experiments:(d={},d[b]=c,d)}),a;var d},isInAutoplayMode:function(b){return g.mergeConf({actionIfAuto:b}),a},isInManualMode:function(b){return g.mergeConf({actionIfManual:b}),a},customCondition:function(b,c,d){return g.conf.conditions||g.mergeConf({conditions:[]}),g.mergeConf({conditions:g.conf.conditions.concat([{conditionMethod:b,truthyConf:c,falsyConf:d}])}),a}};return a},this.thatIsBasedOnTemplate=function(){var a={build:g.build.bind(g),and:g,manualOrAuto:function(){return g.baseTooltipOn("MANUAL_OR_AUTO"),a},keepOrAnother:function(b){return g.baseTooltipOn("KEEP_OR_ANOTHER"),g.mergeConf({tooltip:{buttons:{TRY_ANOTHER:{intent:{actionIndex:b}}}}}),a},singleButtonTooltip:function(c,d){return void 0===d&&(d=b.Next),g.baseTooltipOn("SINGLE_BUTTON"),g.mergeConf({tooltip:{buttons:{BUTTON1:{label:c,intent:{operation:d}}}}}),a}};return a},this.withTriggers=function(){var a={build:g.build.bind(g),and:g,nextOnElementClick:function(c,d,e,f){return g.createExitTrigger({operation:b.Next,hook:c,descendant:d,dontWaitForElement:e,callback:f}),a},goToOnElementClick:function(c,d,e,f,h){return g.createExitTrigger({operation:b.Goto,hook:c,descendant:e,goToIndex:d,dontWaitForElement:f,callback:h}),a},nextOnBackdropClick:function(){return g.createExitTrigger({operation:b.Next,hook:f.HOOKS.BACKDROP}),a},stopOnElementClick:function(c,d){return g.createExitTrigger({operation:b.Stop,hook:c,dontWaitForElement:d}),a},completeOnElementClick:function(c,d,e,f){return g.createExitTrigger({operation:b.Complete,hook:c,descendant:d,dontWaitForElement:e,callback:f}),a},forceStopOnElementClick:function(c,d){return g.createExitTrigger({operation:b.ForceStop,hook:c,dontWaitForElement:d}),a},completeOnBackdropClick:function(){return g.createExitTrigger({operation:b.Complete,hook:f.HOOKS.BACKDROP}),a},stopOnBackdropClick:function(c){return g.createExitTrigger({operation:b.Stop,hook:f.HOOKS.BACKDROP,callback:c}),a}};return a},this.withBI=function(){var a={build:g.build.bind(g),and:g,withDescription:function(b){return g.mergeConf({BI:{description:b}}),a}};return a},this.withEvents=function(){var a={build:g.build.bind(g),and:g,thatBroadcastsOnEnter:function(b){var c=g.conf&&g.conf.events&&g.conf.events.onEnter||[];return g.mergeConf({events:{onEnter:c.concat([b])}}),a},thatBroadcastsOnExit:function(b){var c=g.conf&&g.conf.events&&g.conf.events.onExit||[];return g.mergeConf({events:{onExit:c.concat([b])}}),a}};return a},this.withCustomStage=function(){var a={build:g.build.bind(g),and:g,withDisabledElements:function(b){var c=g.conf&&g.conf.disabledElements||[];return g.mergeConf({disabledElements:c.concat([b])}),a},withAdditionalHighlight:function(b){var c=g.conf&&g.conf.additionalHighlightedElements||[];return g.mergeConf({additionalHighlightedElements:c.concat([b])}),a}};return a}}return f.prototype.build=function(){return this.conf},f.prototype.withCustomConf=function(a){return this.mergeConf(a),this},f.prototype.mergeConf=function(a){_.merge(this.conf,a)},f.prototype.baseTooltipOn=function(a){var b=f.TEMPLATES[a];if(!b)throw"unknown base type "+a;return this.mergeConf(b),this},f.prototype.createExitTrigger=function(a){var b=a.operation,c=a.hook,d=a.descendant,e=a.goToIndex,g=a.trigger,h=void 0===g?"click":g,i=a.dontWaitForElement,j=a.callback,k={element:c||f.ELEMENT_SELECTOR,descendant:d,intent:{operation:b,goToIndex:e},trigger:h,dontWaitForElement:i,callback:j},l=this.conf&&this.conf.exitTriggers||[];l.push(k),this.mergeConf({exitTriggers:l})},f.unselected=function(a){return a+":not(.selected)"},f}();f.ELEMENT_SELECTOR="$element",f.BACKDROP={ON:{enabled:!0,opacity:.7},INVISIBLE:{enabled:!0,opacity:0},OFF:{enabled:!1},OPAQUE:{enabled:!0,opacity:1}},f.HOOKS={BODY:"body",$element:f.ELEMENT_SELECTOR,TOP_BAR:"top-bar",DOCK:".assistant-dock",DOCK_START:".assistant-dock-start",BACKDROP:".intro-backdrop",PREVIEW_TAB:'[data-hook="topbar-preview"]',ADD_TAB:'[data-hook="second-top-bar-add-section"]',PUBLISH_TAB:".publish-tab",ADD_SECTION_TAB:'[data-hook="add-section-button"]',ADD_PAGE_TAB:'[data-hook="add-page-button"]',
PAGE_TAB_MENU_ITEM:".pages-dropdown .sub-menu-item",DESIGN_TAB:".design-tab",DESIGN_MENU_THEMES_OPTION:'[data-hook="open-themes-button"]',DESIGN_MENU_COLORS_OPTION:'[data-hook="open-colors-button"]',DESIGN_MENU_FONTS_OPTION:'[data-hook="open-fonts-button"]',DESIGN_MENU_ANIMATIONS_OPTION:'[data-hook="open-animations-button"]',EXIT_PREVIEW_BUTTON:".tour-element-preview-back",KIT_OPTION:"design-panel .kit-option",SELECTED_KIT_OPTION:"design-panel .kit-option.selected",KIT_OPTION_CUSTOMISE:"design-panel .kit-option.selected .customise-button",COLORS_PANEL:"kit-colors cc-panel-frame",COLORS_CONTAINER:".colors-container",COLORS_CONTAINER_NEW_COLORATION:".color-palette > *",MAIN_COLOR_NEW_COLORATION:"p21-color-tag [data-hook=color-tag]",MAIN_COLOR_DIALOG_NEW_COLORATION:".colors-dialog",MAIN_COLOR_DIALOG_CANCEL_BUTTON_NEW_COLORATION:'.colors-dialog [data-hook="palette-color-dialog-cancel"]',MAIN_COLOR_DIALOG_CONFIRM_BUTTON_NEW_COLORATION:'.colors-dialog [data-hook="palette-color-dialog-confirm"]',MAIN_COLOR_DIALOG_COLOR_TAG:".colors-dialog .p21-color-tag",KIT_PALETTE_NEW_COLORATION:"kit-palette .p24-palette:not(.-selected)",ADVANCED_EDITING_NEW_COLORATION:"coloration-panel .p18-panel-footer",COLORS:"kit-colors .colors-container .colors",DESIGN_PANEL:"design-panel",DESIGN_PANEL_KIT:"design-panel-kit",PREVIEW_PADDING:".preview-padding",PREVIEW_LIST:".preview-list",PREVIEW_SECTION:".preview-section-loading",PREVIEW_OVERLAY:".preview-overlay",PREVIEW_OVERLAY_WITH_NOT_BLANK_PAGE:".preview-list-container [role=button]:not(.page-blank-overlay)",PREVIEW_CONTAINER:".preview-container",PREVIEW_CONTENT:".preview-content",OVERLAY_CONTAINER:".overlay-container",OVERLAY_SECTION_NOT_TPA:".list-span-overlay:not(.tpa-span)",OVERLAY_SECTION_WITH_PRESETS:".list-span-overlay.has-presets",PANEL_CLOSE_BUTTON:".p16-panel-header [data-hook=close-button]",PANEL_HELP_BUTTON:".p16-panel-header [data-hook=help-button]",PANEL_BACK_BUTTON:".p16-panel-header [data-hook=return-button]",RETURN_SUB_BUTTON:'[data-hook="return-sub-button"]',NODE_EDITOR:".node-editor .cc-panel-frame.cc-container",NODE_EDITOR_BUTTON_FIELD:function(a){return'.node-editor .cc-panel-frame.cc-container field-editor[node-id="'+a+'"] cc-button-editor [data-hook="multi-field-group"]'},NODE_EDITOR_BUTTON_FIELD_TOGGLE_SHOW_BUTTON:function(a){return'.node-editor .cc-panel-frame.cc-container field-editor[node-id="'+a+'"] cc-button-editor [data-hook="toggle-button"]'},NODE_EDITOR_BUTTON_FIELD_LINK_BUTTON:function(a){return'.node-editor .cc-panel-frame.cc-container field-editor[node-id="'+a+'"] cc-button-editor [data-hook="link"]'},NODE_EDITOR_SOCIALS_FIELD:'.node-editor .cc-panel-frame.cc-container [data-hook="social-buttons"] > [data-hook="label"]',NODE_EDITOR_SOCIALS_FIELD_TOGGLE:'.node-editor .cc-panel-frame.cc-container [data-hook="social-buttons"] > [data-hook="label"] [data-hook="toggle-button"]',LINK_PANEL_X:"link-editor-panel .cc-icon-close-12",LINK_PANEL_CANCEL:'link-editor-panel [data-hook="link-editor-cancel"]',LINK_PANEL_DONE:'link-editor-panel [data-hook="link-editor-done"]',SOCIAL_PANEL_CONTENT:"social-panel .cc-panel-body",SOCIAL_PANEL_HEADER:"social-panel .p16-panel-header",SOCIAL_PANEL_LIST:"social-panel social-panel-inner",SOCIAL_PANEL_X:'social-panel [data-hook="close-button"]',LEFT_PANEL:".builder-panel-inner",PRESETS_CONTAINER:".builder-left-panel .preview-list-wrap",PRESET:"[data-hook=preview]",PAGE_TAB:".top-bar-section .page-tab",PAGE_TAB_TEMPORARY:".drop-down.pages-dropdown",PAGE_TAB_SECOND_TOPBAR:'[data-hook="second-top-bar-pages-panel"]',MANAGE_PAGES:'[data-hook="manage-pages"]',ADD_PAGE_BUTTON:".add-page-button",PAGE_PANEL_FOOTER:".pages-panel-inner-footer",UNSELECTED_PAGE_ITEMS:".tree-node:not(.selected-page)",ADD_SECTION_PANEL:".add-section",ADD_SECTION_PANEL_LABEL:'.add-section [label="Add Section"]',BROWSER_TOOLBAR:".browser-toolbar",CONNECT_DOMAIN_BUTTON:".browser-toolbar [data-hook=label]",PAGE_SETTINGS_BUTTON:".pages-panel-inner .menu-list .tree-node.selected-page .settings-button",PAGES_PANEL:"pages-panel .pages-panel-inner",PAGES_PANEL_SPLIT:"pages-panel-split .pages-panel-inner",PAGE_TRANSITION_DROPDOWN:'pages-panel [data-hook="p3-md-select"]',PAGE_SEO_MENU_ITEM:'md-dialog cc-menu-item[icon=cc-icon-seo] [data-hook="menu-item"]',SEO_PANEL:"seo-panel",SEO_PANEL_PAGE_DESCRIPTION_FIELD:"seo-panel c2-text-input:eq(1)",RECOMMENDED_SECTION:".tour-element-recommended-section .section-button",NEXT_RECOMMENDED_SECTION:".tour-element-recommended-section.selected + .tour-element-recommended-section .section-button",OVERLAY_SWITCH_LAYOUT_BUTTON:".tour-element-switch-layout",OVERLAY_SECTION_EDIT_BUTTON:'[data-hook="edit-button"]',OVERLAY_MORE_ACTIONS_BUTTON:".tour-more-actions-panel",OVERLAY_DRAG_HANDLE:".tour-drag-handle",OVERLAY_EDIT_SECTION_BODY:'[data-hook="default-transclude"]',OVERLAY_EDIR_SECTION_HEADER:".cc-headline",INSERT_SECTION_BUTTON:".insert",TOOLTIP_BUTTON:".tour-button",BLANK_PAGE_OVERLAY:".page-blank-overlay",ANIMATION_CONTAINER:".animations-container",ANIMATION_TIP:".animations-container .animations-tip",CHANGE_ANIMATION:'[data-hook="animation-container"]',PREVIEW_ANIMATION:'[data-hook="preview-animation"]',ANIMATION_DROPDOWN_EXCLUDE_NO_ANIMATION:"._md-select-menu-container [data-hook=dropdown-list-item]:not(.no-animation)",ANIMATION_DROPDOWN_NO_ANIMATION:"._md-select-menu-container [data-hook=dropdown-list-item].no-animation",PAGES_PREVIEW:"#PAGES_CONTAINERscreenWidthBackground",CLOSE_PREVIEW:".tour-element-preview-back",ANIMATION_CONTROL:'[data-hook="animations-control"]',ANIMATION_THUMBNAILS:'[data-hook="animation-thumbnails"]',ANIMATION_THUMBNAILS_EXCLUDE_NO_ANIMATION:'[data-hook="animation-thumbnails"] .c20-graphic-radio:not(:first)',ANIMATION_THUMBNAILS_NO_ANIMATION:'[data-hook="animation-thumbnails"] .c20-graphic-radio:first',SITE_DESIGN_DROPDOWN_MENU:'[data-hook="site-design-dropdown-menu"]',FONT_THUMBNAIL:'[data-hook="font-thumbnail"]',FONT_PANEL:"font-panel .cc-panel-frame",RETURN_BUTTON:'[data-hook="return-button"]',FONT_SIZE_SLIDER:'[data-hook="slider"].font-size-slider-control',CUSTOMIZE_DESIGN_BUTTON:".customize-design-container .customize-design",HEADER_OVERLAY:".header-overlay",FOOTER_OVERLAY:".footer-overlay",SELECTED_PREVIEW_SECTION:".preview-section.selected",SECTION_DESIGN_MENU_HOOK:'[data-hook="section-design-menu"]',MENU_ITEM:".customize-design-container.selected cc-menu-item",BACKGROUND_BUTTON:'[data-hook="background-button"]',COLOR_BUTTON:'[data-hook="color-button"]',FONT_BUTTON:'[data-hook="font-button"]',ANIMATIONS_BUTTON:'[data-hook="animations-button"]',CC_PANEL_FRAME:".cc-panel-frame",BACKGROUND_PREVIEW:'[data-hook="background"]:not(.-selected)',HEADERBG_BUTTON:'[data-hook="headerbg-button"]',LISTBG_BUTTON:'[data-hook="listbg-button"]',COLORATION_MODE_SELECTOR:"coloration-mode-selector",SEGMENT_OVERLAY_CLASS:".segment-overlay",GO_TO_SITE_COLORS:'[data-hook="goto-site-colors"]',GO_TO_SITE_FONTS:'[data-hook="goto-fonts-panel"]',GO_TO_SITE_ANIMATION:'[data-hook="goto-animation-panel"]',GO_TO_SITE_DESIGN:'[data-hook="goto-site-design"]',SITE_DROPDOWN:"site-dropdown .sub-menu-item:not(.seo-wiz)",SITE_DROPDOWN_ITEMS_EXCEPT_SEO_WIZ:"site-dropdown li:not(.seo-wiz)",SITE_DROPDOWN_SEO_WIZ:"site-dropdown .sub-menu-item.seo-wiz"},f.EVENTS={ACTION_START:"assistant.action.start",ACTION_COMPLETED:"assistant.action.completed",TASK_START:"assistant.task.start",TASK_COMPLETE:"assistant.task.complete",TASK_QUIT:"assistant.task.quit",TASK_SKIP:"assistant.task.skip",TASK_TIMEOUT:"assistant.task.timeout",MANUAL_OR_AUTO_CHOSE_MANUAL:"assistant.action-type.manualauto.manual",MANUAL_OR_AUTO_CHOSE_AUTO:"assistant.action-type.manualauto.auto",KEEP_TRYANOTHER_CHOSE_KEEP:"assistant.action-type.keeptryagain.keep",KEEP_TRYANOTHER_CHOSE_TRYANOTHER:"assistant.action-type.keeptryagain.tryagain",OPEN_MENU:"assistant.menu.open",CLOSE_MENU:"assistant.menu.close",PROGRESS_BAR_ACTION_IN_PROGRESS:"assistant.progress.action-inprogress",PROGRESS_BAR_ACTION_COMPLETED:"assistant.progress.action-completed"},f.TEMPLATES={SINGLE_BUTTON:{tooltip:{buttons:{BUTTON1:{intent:{operation:b.Next}}}}},MANUAL_OR_AUTO:{tooltip:{buttons:{AUTO:{label:"tour.button.auto",intent:{operation:b.Next,enableAutoplay:!0},BI:{event:f.EVENTS.MANUAL_OR_AUTO_CHOSE_AUTO}},MANUAL:{label:"tour.button.manual",intent:{operation:b.Next,disableAutoplay:!0},BI:{event:f.EVENTS.MANUAL_OR_AUTO_CHOSE_MANUAL}}}}},KEEP_OR_ANOTHER:{additionalHighlightedElements:[f.HOOKS.PREVIEW_CONTAINER],disabledElements:[f.HOOKS.INSERT_SECTION_BUTTON,f.HOOKS.OVERLAY_CONTAINER],onEnter:{stopAutoplay:!0},waitForSpinner:!0,exitTriggers:[{element:f.HOOKS.BACKDROP,intent:{operation:b.Complete}}],tooltip:{disabled:!1,buttons:{TRY_ANOTHER:{label:"tour.button.try-another",intent:{operation:b.Goto},BI:{event:f.EVENTS.KEEP_TRYANOTHER_CHOSE_TRYANOTHER}},KEEP_IT:{label:"tour.button.keep-it",intent:{operation:b.Complete},BI:{event:f.EVENTS.KEEP_TRYANOTHER_CHOSE_KEEP}}},closeable:{enabled:!0,intent:{operation:b.Complete}}},preserveBackground:!0,backdrop:f.BACKDROP.INVISIBLE,actionIfAuto:{tooltip:{buttons:{TRY_ANOTHER:{intent:{enableAutoplay:!0}}}}}}},a.AssistantAction=f}(builders||(builders={}));var AssistantTooltip=function(){function a(a,b,c){this.assistantManager=a,this.assistantUtils=b,this.flags=c,this.tooltip=this.action.tooltip||{}}return a.$inject=["assistantManager","assistantUtils","flags"],Object.defineProperty(a.prototype,"title",{get:function(){return this.tooltip.title},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"customStyle",{get:function(){return this.tooltip.customStyle},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"content",{get:function(){return this.tooltip.content},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"buttons",{get:function(){return this.tooltip.buttons},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"orientation",{get:function(){return this.tooltip.orientation},enumerable:!0,configurable:!0}),a.prototype.hasTitle=function(){return!!this.title},a.prototype.hasContent=function(){return!!this.content},a.prototype.hasButtons=function(){return!!this.buttons},a.prototype.isHorizontal=function(){return this.orientation===builders.TooltipOrientation.Horizontal||!this.hasButtons()&&this.orientation!==builders.TooltipOrientation.Vertical},a.prototype.isVertical=function(){return this.orientation===builders.TooltipOrientation.Vertical||this.hasButtons()&&this.orientation!==builders.TooltipOrientation.Horizontal},a.prototype.hasImage=function(){return!!this.tooltip.image},a.prototype.getImageName=function(){return this.tooltip.image},a.prototype.canClose=function(){return this.tooltip.closeable&&this.tooltip.closeable.enabled},a.prototype.closeClicked=function(){this.assistantManager.setIntent(this.tooltip.closeable.intent)},a.prototype.onButtonClick=function(a){a.BI&&a.BI.event&&this.assistantUtils.broadcastAssistantEvent(a.BI.event),a.intent&&this.assistantManager.setIntent(a.intent),a.callback&&a.callback()},a.prototype.isFullscreen=function(){return this.action.tooltip.customClasses&&this.action.tooltip.customClasses.indexOf("assistant-tooltip-fullscreen")>-1},a}();angular.module("siteGeneratorTourManagerInternal").component("assistantTooltip",{controller:AssistantTooltip,template:'\n                <div class="tour-step" ng-style=":: $ctrl.customStyle" ng-if=":: $ctrl.isHorizontal()">\n                  <div class="circle" data-hook="assistant-tooltip-circle" ng-if="!$ctrl.flags.newAssistantMenu">\n                    <img relative-src="images/tour/circle.gif"/>\n                  </div>\n                  <div class="tour-step-content" ng-bind-html=":: $ctrl.content | translate"></div>\n                </div>\n\n                <div class="tour-step-with-action" ng-if=":: $ctrl.isVertical()">\n                  <div class="tour-step-image" ng-if=":: $ctrl.hasImage()" style="min-height:168px">\n                    <img relative-src="images/tour/{{$ctrl.getImageName()}}"/>\n                  </div>\n                  <div class="tour-step-close cc-icon-close-10" ng-if=":: $ctrl.canClose()" ng-click="$ctrl.closeClicked()"></div>\n                  <div class="tour-step-title" ng-if=":: $ctrl.hasTitle()" ng-bind-html=":: $ctrl.title | translate">\n                  </div>\n                  <div class="tour-step-content-wrapper">\n                    <div>\n                      <div class="tour-step-content" ng-if=":: $ctrl.hasContent()" ng-bind-html=":: $ctrl.content | translate">\n                      </div>\n                      <div class="tour-step-actions" data-hook="assistant-tooltip-actions" ng-class="{\'-centered\': !$ctrl.flags.newAssistantMenu, \'-right\': $ctrl.flags.newAssistantMenu}">\n                        <button ng-repeat="(key, button) in $ctrl.buttons" class="tour-button" ng-click="$ctrl.onButtonClick(button)" data-hook="tour-tooltip-button" adi-automation="{{key}}"><span ng-bind-html="::button.label | translate"> </span></button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ',bindings:{action:"="}}),angular.module("siteGeneratorTourManagerInternal").directive("assistantStopOnEscape",["flags","assistantManager","consumerBiLogger","assistantUtils",function(a,b,c,d){return{link:function(a,c){var d=27;angular.element(c).keydown(_.debounce(function(a){var c=b.isInActiveTask(),e=(a.which===d||a.keyCode===d)&&b.canStop(),f=(a.metaKey||a.ctrlKey)&&a.shiftKey&&a.altKey&&"T"===String.fromCharCode(a.keyCode);c&&(e||f)&&b.stop()},500))}}}]);var AssistantMenu=function(){function a(a,b,c,d,e,f,g,h){this.$element=a,this.$timeout=b,this.assistantManager=c,this.assistantTaskFetcher=d,this.assistantUtils=e,this.undoRedo=f,this.flags=g,this.assistantVideoService=h,this.tasks=[],this.addTask(d.getTask("previewTask"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("entireWebsiteDesignTask"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("colorDesignTask"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("fontPanelTask"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("animationTask"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("changeLayoutTask"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("customizeSectionDesign"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("editContentTask"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("addSectionTask"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("addPageTask"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("publishTask"),builders.AssistantMenuProgress.intermediate),this.addTask(d.getTask("connectDomainTask"),builders.AssistantMenuProgress.intermediate),this.addTask(d.getTask("pageSEOTask"),builders.AssistantMenuProgress.intermediate),this.setMenuProgressByTaskCompletion()}return a.$inject=["$element","$timeout","assistantManager","assistantTaskFetcher","assistantUtils","undoRedo","flags","assistantVideoService"],a.prototype.setMenuProgressByTaskCompletion=function(){var a=_.findLastIndex(this.tasks,function(a){return a.menuProgress===builders.AssistantMenuProgress.beginner&&a.task.isComplete});this.tasks[a+1].menuProgress===builders.AssistantMenuProgress.intermediate&&this.assistantManager.setMenuProgress(builders.AssistantMenuProgress.intermediate)},a.prototype.startTask=function(a){this.assistantManager.startTask(a)},a.prototype.addTask=function(a,b){this.tasks.push({task:a,menuProgress:b})},a.prototype.closeMenu=function(){this.assistantManager.stop()},a.prototype.isLastActiveTask=function(a,b){return this.findLastActiveTaskIndex()===b},a.prototype.skipTask=function(a,b){var c=this;b.stopPropagation(),this.assistantManager.setTaskComplete(a),this.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.TASK_SKIP,a);var d=this.tasks.findIndex(function(b){return b.task===a});this.tasks[d+1]&&(this.assistantManager.setMenuProgress(this.tasks[d+1].menuProgress),this.$timeout(function(){return c.scrollToTask(d+1)},0)),this.assistantUtils.saveTaskData(a),this.undoRedo.captureOperation(!1,!0)},a.prototype.getTasks=function(){var a=this;return this.tasks.filter(function(b){return b.menuProgress<=a.assistantManager.getMenuProgress()}).map(function(a){return a.task})},a.prototype.scrollToActive=function(){var a=this,b=_.findLastIndex(this.tasks,function(a){return a.menuProgress===builders.AssistantMenuProgress.beginner&&a.task.isComplete});this.$timeout(function(){return a.scrollToTask(b+1)},0)},a.prototype.getDescription=function(){return"assistant-menu.assistant-video-description"},a.prototype.findLastActiveTaskIndex=function(){var a=_.filter(this.tasks,function(a){return!0===a.task.isComplete}).length,b=_.findIndex(this.tasks,function(a){return void 0===a.task.isComplete});return a===this.tasks.length?a:b>-1?b:0},a.prototype.scrollToTask=function(a){var b=this.$element.find(".step-manager-tour:eq("+a+")"),c=b.parent(),d=c.height();if(b.position().top+b.height()>d){var e=c.scrollTop()+b.position().top;c.scrollTop(e)}},a.prototype.openAssistantVideo=function(a){this.assistantVideoService.onAssistantVideoClicked(a)},a}();angular.module("siteGeneratorTourManagerInternal").filter("menuprogress",["assistantManager",function(a){return function(b){return b&&b.filter(function(b){return b.menuProgress<=a.getMenuProgress()})}}]).component("assistantMenu",{controller:AssistantMenu,template:'\n                <div class="tour-step-manager">\n                  <span class="step-manager-close cc-icon-close-12" ng-click="$ctrl.closeMenu()"></span>\n                  <div class="step-manager-header">\n                    <div class="tour-step-title">{{:: \'tour.stepmanager.title\' | translate}}</div>\n                    <div class="tour-step-content" wix-translate-compile="{{:: $ctrl.getDescription()}}"></div>\n                  </div>\n                  <div class="step-manager-container">\n                    <div ng-repeat="task in $ctrl.getTasks() track by task.id"\n                        adi-automation="tour-{{:: task.id}}"\n                        ng-init=\'$last && $ctrl.scrollToActive()\'\n                        class="step-manager-tour"\n                        ng-class="{\'step-manager-tour-last-active-tour\': $ctrl.isLastActiveTask(task, $index),\n                                    \'step-manager-tour-active\': task.isComplete}"\n                        ng-click="(task.isComplete || $ctrl.isLastActiveTask(task, $index)) && $ctrl.startTask(task)">\n\n                        <div class="step-manager-circle">\n                          <div class="step-manager-circle-inner"></div>\n                        </div>\n                        <span class="step-manager-tour-label">\n                          {{:: task.label}}\n                        </span>\n                        <span ng-click="$ctrl.skipTask(task, $event)" class="step-manager-tour-skip" ng-show="$ctrl.isLastActiveTask(task, $index)">\n                          {{:: \'tour.stepmanager.skip\' | translate}}\n                        </span>\n                    </div>\n                  </div>\n                </div>\n              '});var AssistantMenuNew=function(){function a(a,b,c,d,e){this.assistantManager=a,this.consumerBiLogger=b,this.SmartAssistManager=c,this.assistantTaskFetcher=d,this.flags=e}return a.$inject=["assistantManager","consumerBiLogger","SmartAssistManager","assistantTaskFetcher","flags"],Object.defineProperty(a.prototype,"smartAssistFlag",{get:function(){return this.flags.smartAssist},enumerable:!0,configurable:!0}),a.prototype.close=function(){this.assistantManager.stop()},a}();angular.module("siteGeneratorTourManagerInternal").component("assistantMenuNew",{controller:AssistantMenuNew,templateUrl:"views/assistant/assistant-menu-new.html"});var SCROLL_ANIMATION_DURATION=100,EXPAND_ANIMATION_DURATION=200,COLLAPSE_ANIMATION_DURATION=200,AssistantMenuBucketList=function(){function a(a,b,c,d,e,f,g){this.assistantMenuBucketService=a,this.assistantTaskFetcher=b,this.$timeout=c,this.$scope=d,this.assistantAnimationManager=e,this.$element=f,this.flags=g,this.bucketIdToIconClass=(h={},h[AssistantMenuBucketServiceNS.bucketId.PREVIEW]="cc-icon-assistant-bucket-preview",h[AssistantMenuBucketServiceNS.bucketId.CHANGE_CONTENT]="cc-icon-assistant-bucket-content",h[AssistantMenuBucketServiceNS.bucketId.CHANGE_SITE_DESIGN]="cc-icon-assistant-bucket-site-design",h[AssistantMenuBucketServiceNS.bucketId.CHANGE_SECTION_DESIGN]="cc-icon-assistant-bucket-section-design",h[AssistantMenuBucketServiceNS.bucketId.PUBLISH]="cc-icon-assistant-bucket-publish",h[AssistantMenuBucketServiceNS.bucketId.CONNECT_DOMAIN]="cc-icon-assistant-bucket-connect-domain",h[AssistantMenuBucketServiceNS.bucketId.SEO]="cc-icon-assistant-bucket-seo",h),this.order=this.assistantMenuBucketService.bucketsOrder,this.bucketList=this.initiateBucketList(),this.emptyAnimationManagerFromTasks(),this.scrollToActiveBucket();var h}return a.$inject=["assistantMenuBucketService","assistantTaskFetcher","$timeout","$scope","assistantAnimationManager","$element","flags"],a.prototype.bucketHeaderClicked=function(a){a.lock||this.toggleCollapseBucket(a)},a.prototype.bucketCompleteBySkip=function(a){var b=this,c=this.bucketList.indexOf(a);if(c<this.bucketList.length-1){var d=this.bucketList[c+1];this.unlockBucket(d),this.toggleCollapseBucket(d),this.$timeout(function(){b.scrollToActiveBucketWithAnimation()},EXPAND_ANIMATION_DURATION+COLLAPSE_ANIMATION_DURATION)}},a.prototype.toggleCollapseBucket=function(a){var b=a.collapse,c=!b;this.collapseExpandedBuckets(),c||(a.collapse=!1,a.isSkipExpandAnimation=!1,this.flags.assistantBucketsNoSkip&&this.assistantMenuBucketService.onBucketSelected(a.id))},a.prototype.areAllBucketTasksComplete=function(a){var b=this;return this.getTaskIds(a).every(function(a){return b.assistantTaskFetcher.getTask(a).isComplete})},a.prototype.areAllBucketsComplete=function(){var a=this;return this.order.every(function(b){return a.areAllBucketTasksComplete(b)})},a.prototype.getInitialFirstBucketCollapseStatus=function(){var a=this.order[0],b=this.order[this.order.length-1];return!(!this.areAllBucketTasksComplete(a)||this.areAllBucketsComplete()&&!this.isLastTaskCompletedWithAnimation(b))},a.prototype.getInitialBucketCollapseStatus=function(a){if(this.isLastTaskCompletedWithAnimation(a))return!1;if(this.isLastTaskOfPreviousBucketCompletedWithAnimation(a))return!0;if(this.flags.assistantBucketsNoSkip)return this.assistantMenuBucketService.activeBucketId!==a;var b=this.order.indexOf(a);if(0===b)return this.getInitialFirstBucketCollapseStatus();var c=this.order[b-1];return!(this.areAllBucketTasksComplete(c)&&!this.areAllBucketTasksComplete(a))},a.prototype.getInitialBucketLockStatus=function(a){if(this.isLastTaskCompletedWithAnimation(a))return!1;if(this.isLastTaskOfPreviousBucketCompletedWithAnimation(a))return!0;var b=this.order.indexOf(a);if(0===b)return!1;var c=this.order[b-1];return!this.areAllBucketTasksComplete(c)},a.prototype.getInitialSkipExpandAnimation=function(a){return!this.getInitialBucketCollapseStatus(a)},a.prototype.onLastTaskCompletedAnimationEnd=function(a){var b=this.order.indexOf(a.id);if(b!==this.order.length-1){var c=this.bucketList[b+1];this.unlockBucket(c),this.toggleCollapseBucket(c)}},a.prototype.initiateBucketList=function(){var a=this;return this.order.map(function(b,c){return{id:b,name:a.assistantMenuBucketService.bucketName(b),description:a.assistantMenuBucketService.bucketDescription(b),taskIds:a.getTaskIds(b),iconClass:a.bucketIdToIconClass[b],collapse:a.getInitialBucketCollapseStatus(b),lock:a.getInitialBucketLockStatus(b),isSkipExpandAnimation:a.getInitialSkipExpandAnimation(b)}})},a.prototype.onRenderComplete=function(a){this.$scope.$applyAsync(function(){a()})},a.prototype.collapseExpandedBuckets=function(){var a=this.findExpanedBucket();a&&(a.collapse=!0,a.isSkipExpandAnimation=!1)},a.prototype.findExpanedBucket=function(){return this.bucketList.find(function(a){return!a.collapse})},a.prototype.unlockBucket=function(a){a.lock=!1},a.prototype.emptyAnimationManagerFromTasks=function(){var a=this;this.onRenderComplete(function(){a.assistantAnimationManager.taskAnimationsAreDone()})},a.prototype.isTaskCompletedWithAnimation=function(a){return this.assistantAnimationManager.getTaskAnimation(a)===AssistantAnimationManagerNS.animationType.TASK_COMPLETED},a.prototype.isLastTaskCompletedWithAnimation=function(a){var b=this.getTaskIds(a);return this.isTaskCompletedWithAnimation(b[b.length-1])},a.prototype.isLastTaskOfPreviousBucketCompletedWithAnimation=function(a){var b=this.order.indexOf(a);if(0===b)return!1;var c=this.order[b-1],d=this.getTaskIds(c);return this.isTaskCompletedWithAnimation(d[d.length-1])},a.prototype.getTaskIds=function(a){return this.assistantMenuBucketService.bucketTaskIds(a)},a.prototype.scrollToActiveBucket=function(){this.scrollToActiveBucketWithAnimation(0)},a.prototype.scrollToActiveBucketWithAnimation=function(a){var b=this;void 0===a&&(a=SCROLL_ANIMATION_DURATION),this.onRenderComplete(function(){var c=b.$element.parent(),d=b.$element.find('[data-active-bucket="true"]:not(:first-child)');if(d.length>0){var e=function(a){return a.offset().top+a[0].clientHeight},f=e(d)-e(c);f>0&&c.animate({scrollTop:f-c.scrollTop()},a)}})},a}();angular.module("siteGeneratorTourManagerInternal").component("assistantMenuBucketList",{controller:AssistantMenuBucketList,templateUrl:"views/assistant/assistant-menu-bucket-list.html"});var AssistantMenuHeader=function(){function a(a,b){this.flags=a,this.assistantVideoService=b}return a.$inject=["flags","assistantVideoService"],a.prototype.close=function(){this.onClose()},a.prototype.openAssistantVideo=function(a){this.assistantVideoService.onAssistantVideoClicked(a)},a.prototype.getTitleTranslationKey=function(){return this.flags.smartAssist?"assistant-menu-header.title-smartAssist":"assistant-menu-header.title"},a.prototype.getDescription=function(){return"assistant-menu.assistant-video-description"},Object.defineProperty(a.prototype,"smartAssistFlag",{get:function(){return this.flags.smartAssist},enumerable:!0,configurable:!0}),a}();angular.module("siteGeneratorTourManagerInternal").component("assistantMenuHeader",{controller:AssistantMenuHeader,templateUrl:"views/assistant/assistant-menu-header.html",bindings:{onClose:"&"}});var AssistantMenuBucket=function(){function a(){}return Object.defineProperty(a.prototype,"animatingCollapseState",{get:function(){return this.isCollapsed||!this.isSkipExpandAnimation},enumerable:!0,configurable:!0}),a.prototype.headerClick=function(){this.onHeaderClick()},a.prototype.onTaskSkip=function(a){this.taskIds[this.taskIds.length-1]===a&&this.onBucketCompleteBySkip()},a}();angular.module("siteGeneratorTourManagerInternal").component("assistantMenuBucket",{controller:AssistantMenuBucket,templateUrl:"views/assistant/assistant-menu-bucket.html",bindings:{name:"<",description:"<",taskIds:"<",isCollapsed:"<",onHeaderClick:"&",isLocked:"<",iconClass:"<",onBucketCompleteBySkip:"&",isSkipExpandAnimation:"<",onLastTaskCompletedAnimationEnd:"&"}});var AssistantMenuTaskList=function(){function a(a,b,c,d,e,f){this.assistantTaskFetcher=a,this.assistantManager=b,this.assistantAnimationManager=c,this.assistantUtils=d,this.undoRedo=e,this.$timeout=f,this.buildTaskList()}return a.$inject=["assistantTaskFetcher","assistantManager","assistantAnimationManager","assistantUtils","undoRedo","$timeout"],a.prototype.getTaskLockStatus=function(a){var b=this.taskIds.indexOf(a);if(0===b)return!1;var c=this.assistantTaskFetcher.getTask(this.taskIds[b-1]);return!c.isComplete||this.isAnimateTaskCompleted(c.id)},a.prototype.isAnimateTaskCompleted=function(a){var b=AssistantAnimationManagerNS.animationType.TASK_COMPLETED;return this.assistantAnimationManager.getTaskAnimation(a)===b},a.prototype.onTaskCompletedAnimationEnd=function(a){var b=this.taskIds.indexOf(a);b===this.taskIds.length-1?this.onLastTaskCompletedAnimationEnd():(this.taskList[b+1].isAnimateTaskUnlocked=!0,this.taskList[b+1].isLocked=!1)},a.prototype.buildTaskList=function(){var a=this;this.taskList=this.taskIds.map(function(b){var c=a.assistantTaskFetcher.getTask(b);return{id:c.id,name:c.label,isCompleted:c.isComplete,isAnimateTaskUnlocked:!1,isLocked:a.getTaskLockStatus(b),isAnimateTaskCompleted:a.isAnimateTaskCompleted(b),onTaskCompletedAnimationEnd:function(){return a.onTaskCompletedAnimationEnd(b)}}})},a.prototype.skipTask=function(a){var b=this.assistantTaskFetcher.getTask(a);this.assistantManager.setTaskComplete(b),this.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.TASK_SKIP,b),this.undoRedo.captureOperation(!1,!0),this.buildTaskList(),this.onTaskSkip({taskId:a})},a.prototype.startTask=function(a){var b=this.assistantTaskFetcher.getTask(a);this.assistantManager.startTask(b)},a}();angular.module("siteGeneratorTourManagerInternal").component("assistantMenuTaskList",{controller:AssistantMenuTaskList,templateUrl:"views/assistant/assistant-menu-task-list.html",bindings:{taskIds:"<",onTaskSkip:"&",onLastTaskCompletedAnimationEnd:"&"}});var AssistantMenuTask=function(){function a(a,b){var c=this;b(function(){if(c.isAnimateTaskCompleted&&c.onTaskCompletedAnimationEnd){var b=a.find(".assistant-menu-task-done-section");AnimationHelper.onAnimationEnd(b).then(function(){return c.onTaskCompletedAnimationEnd()})}})}return a.$inject=["$element","$timeout"],a.prototype.skip=function(){this.onSkip()},Object.defineProperty(a.prototype,"isShowSkipSection",{get:function(){return!this.isCompleted&&!this.isLocked||this.isAnimateTaskCompleted},enumerable:!0,configurable:!0}),a}();angular.module("siteGeneratorTourManagerInternal").component("assistantMenuTask",{controller:AssistantMenuTask,templateUrl:"views/assistant/assistant-menu-task.html",bindings:{name:"<",onSkip:"&",isCompleted:"<",isLocked:"<",onExecute:"&",isAnimateTaskCompleted:"<",isAnimateTaskUnlocked:"<",onTaskCompletedAnimationEnd:"&"}});var AssistantTabList=function(){function a(a){this.assistantTabListService=a,this.assistantTabListService.tabListOpened()}return a.$inject=["assistantTabListService"],Object.defineProperty(a.prototype,"bucketListTabSelected",{get:function(){return this.assistantTabListService.getSelectedTab()===AssistantTabListService.TAB_ID.BUCKET_LIST},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"smartAssistTabSelected",{get:function(){return this.assistantTabListService.getSelectedTab()===AssistantTabListService.TAB_ID.SMART_ASSIST},enumerable:!0,configurable:!0}),a.prototype.bucketListTabClick=function(a){void 0===a&&(a=BIOrigins.SwitchTab),this.assistantTabListService.selectBucketListTab(a)},a.prototype.emptyStateButtonClick=function(){this.bucketListTabClick(BIOrigins.SmartAssistEmptyStateButton)},a.prototype.smartAssistTabClick=function(){this.assistantTabListService.selectSmartAssistTab()},a}();angular.module("siteGeneratorTourManagerInternal").component("assistantTabList",{controller:AssistantTabList,templateUrl:"views/assistant/assistant-tab-list.html"});var AssistantBucketListTab=function(){function a(a){this.assistantVideoService=a}return a.$inject=["assistantVideoService"],a.prototype.openAssistantVideo=function(a){this.assistantVideoService.onAssistantVideoClicked(a)},a}();angular.module("siteGeneratorTourManagerInternal").component("assistantBucketListTab",{controller:AssistantBucketListTab,templateUrl:"views/assistant/assistant-bucket-list-tab.html"});var TPA_TASK_PREFIX="createTpaTask_",AssistantTaskFetcher=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=this;this.assistantUtils=a,this.tpaDiscovery=b,this.flags=c,this.createTPATask=d,this.tasks={},this.calculatedTasks={},[f,e,g,h,k,m,n,o,p,q,r,j,i,l,s].forEach(function(a){t.flags.assistantBucketsNoSkip&&t.flags.newAssistantMenu&&t.patchTaskAsCompleted(a),t.addTask(a)})}
return a.$inject=["assistantUtils","tpaDiscovery","flags","createTPATask","previewTask","welcomeTask","entireWebsiteDesignTask","colorDesignTask","fontPanelTask","animationTask","changeLayoutTask","customizeSectionDesign","editContentTask","addSectionTask","addPageTask","publishTask","connectDomainTask","pageSEOTask","seoWizTask"],a.prototype.addTask=function(a){this.tasks[a.id]=a},a.prototype.applySavedTasks=function(a){angular.merge(this.tasks,a)},a.prototype.getTask=function(a){if(this.isTaskDefined(a)){if(!this.calculatedTasks[a]){var b=void 0;b=this.isTpaTask(a)?this.createTPATask(this.extractTpaKey(a),a):this.getTaskByActiveExperiments(this.tasks[a]),this.calculatedTasks[a]=b}return this.calculatedTasks[a]}},a.prototype.getNumOfCompletedTasks=function(){return _.filter(this.tasks,function(a){return a.isComplete}).length},a.prototype.getTpaTaskIds=function(){var a=this;return _.map(this.tpaDiscovery.manageableTPAs,function(b,c){return a.buildUniqueTpaTaskId(c)})},a.prototype.isTaskDefined=function(a){return Boolean(this.tasks[a])||this.isTpaTask(a)},a.prototype.isTpaTask=function(a){return-1!==this.getTpaTaskIds().indexOf(a)},a.prototype.extractTpaKey=function(a){return a.substr(TPA_TASK_PREFIX.length)},a.prototype.buildUniqueTpaTaskId=function(a){return""+TPA_TASK_PREFIX+a},a.prototype.getTaskByActiveExperiments=function(a){if(!a.experiments)return a;var b=this.assistantUtils.getActiveExperiments(),c=Object.keys(a.experiments).filter(function(a){return-1!==b.indexOf(a)}).map(function(b){return a.experiments[b]});return angular.extend.apply(angular,[{},a].concat(c))},a.prototype.patchTaskAsCompleted=function(a){a.isComplete=!0,this.assistantUtils.saveTaskData(a)},a}();angular.module("siteGeneratorTourManagerInternal").service("assistantTaskFetcher",AssistantTaskFetcher),angular.module("siteGeneratorTourManagerInternal").factory("menuTask",function(){return{id:"menuTask",label:"Menu",BI:{description:"momTour"},actions:[(new builders.AssistantAction).thatAttachesTo().dock().and.withTooltip().withTemplate("<assistant-menu></assistant-menu>").and.withBackdrop().thatIsInvisible().and.withBI().withDescription("MOM").and.withConditionalConf().experimentIsEnabled("newAssistantMenu",(new builders.AssistantAction).withTooltip().withTemplate("<assistant-menu-new></assistant-menu-new>").thatOpensUp({offsetY:15}).build()).and.withCustomConf({exitTriggers:[{element:"$element",trigger:"click",intent:{operation:builders.AssistantOperation.NoOp}},{element:builders.AssistantAction.HOOKS.BACKDROP,trigger:"click",intent:{operation:builders.AssistantOperation.Stop}}]}).build()]}}),angular.module("siteGeneratorTourManagerInternal").factory("welcomeTask",["assistantManager","assistantUIAdapter","assistantUtils","$timeout","storyServices","wixmpServices","silentPageBuilder","$rootScope","flags","undoRedo","autoSaveNotifier",function(a,b,c,d,e,f,g,h,i,j,k){var l=(new builders.AssistantAction).withTooltip().thatOpensFullScreen().withTemplate("<welcome-task-start></welcome-task-start>").and.withBackdrop().thatIsOpaque().and.withTriggers().nextOnBackdropClick().and.withBehaviors().thatStartsAutoplayOnExit().and.withBI().withDescription("Hello. I am ADI, Wixs Artificial Design Intelligence.").and.withCallbacks().onEnter(function(b){a.setDockStatus(builders.AssistantDockStatus.Hidden),a.setTaskComplete(b),i.preferSocialImages&&e.story&&e.story.privateMediaFolderId&&f.getSocialImages(e.story.privateMediaFolderId),i.dontSaveDuringWelcomeTour&&j.onStartWelcomeTour()}).build(),m=(new builders.AssistantAction).thatAttachesTo().dock().and.withBehaviors().thatWaitsForSpinner().thatStopsAutoplayOnEnter().and.withBackdrop().thatIsInvisible().and.withTriggers().completeOnBackdropClick().and.withCallbacks().onEnter(function(){return i.dontSaveDuringWelcomeTour&&j.onEndWelcomeTour(),d(function(){$(".overlay-viewport").animate({scrollTop:0},1e3),a.setDockStatus(builders.AssistantDockStatus.Stopped)},500)}).and.withBI().withDescription("I’ve completed the first version of your homepage.").and.withTooltip().withTemplate('\n        <div class="tour-step-with-action">\n          <div class="tour-step-image" style="min-height:168px">\n            <img relative-src="images/tour/welcome-tour-complete.gif"/>\n          </div>\n          <div class="tour-step-title -centered" ng-if="!flags.fullSiteBuilder">\n            {{:: \'tour.welcome2.complete.title\' | translate}}\n          </div>\n          <div class="tour-step-title -centered" ng-if="flags.fullSiteBuilder">\n            {{:: \'tour.welcome2.complete.full-site-title\' | translate}}\n          </div>\n          <div class="tour-step-content-wrapper">\n            <div>\n              <div class="tour-step-content -centered" style="margin-bottom: 0;" ng-bind-html=":: \'tour.welcome2.complete.content\' | translate">\n              </div>\n          </div>\n        </div>\n      ').and.withConditionalConf().experimentIsEnabled("dontOpenMenuAfterWelcomeTour",(new builders.AssistantAction).withTriggers().forceStopOnElementClick().and.withCallbacks().onEnter(function(){return d(function(){$(".overlay-viewport").animate({scrollTop:0},1e3),a.setDockStatus(builders.AssistantDockStatus.Playing)},500)}).and.withTooltip().withTemplate('\n                <div class="tour-step-with-action">\n                  <div class="tour-step-image" style="min-height:168px">\n                    <img relative-src="images/tour/welcome-tour-complete.gif"/>\n                  </div>\n                  <div class="tour-step-title -centered" ng-if="!flags.fullSiteBuilder">\n                    {{:: \'tour.welcome2.complete2.title\' | translate}}\n                  </div>\n                  <div class="tour-step-title -centered" ng-if="flags.fullSiteBuilder">\n                    {{:: \'tour.welcome2.complete2.full-site-title\' | translate}}\n                  </div>\n                  <div class="tour-step-content-wrapper">\n                    <div>\n                      <div class="tour-step-content -centered" style="margin-bottom: 0;" ng-bind-html=":: \'tour.welcome2.complete2.content\' | translate">\n                      </div>\n                      <div class="tour-step-actions -centered" style="margin-top: 20px">\n                        <button class="tour-button" ng-click="assistantManager.forceStop()"><span ng-bind-html=":: \'general.got-it\' | translate"> </span></button>\n                      </div>\n                  </div>\n                </div>\n              ').build()).build(),n=(new builders.AssistantAction).withBI().withDescription("Silent home page construction.").and.withBehaviors().thatWaitsForSpinner().and.withBackdrop().thatIsOpaque().and.withCallbacks().onEnter(function(b){g.constructAnyHomePage().then(function(){a.setTaskComplete(b)})}).build();return{id:"welcomeTask",label:"Welcome Test",BI:{assistType:"bucket list",description:BIOrigins.WelcomeTour},isUnstoppable:!0,onExit:{callback:function(){c.triggerElement(builders.AssistantAction.HOOKS.ADD_TAB,"mouseleave"),k.startCountingAutosaves()}},actions:[l,n,m]}}]),angular.module("siteGeneratorTourManagerInternal").factory("previewTask",["flags","$translate",function(a,b){return{id:"previewTask",get label(){return b.instant("assistant-menu-task.preview.deprecated-label")},BI:{description:"previewTask"},actions:[(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.PREVIEW_TAB).and.withTooltip().withContent("tour.preview.step0").thatOpensDown().and.withTriggers().nextOnElementClick().and.withBackdrop().thatIsOn().and.withBI().withDescription("Preview mode shows your website exactly as visitors will see it. Click Preview.").build(),(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.EXIT_PREVIEW_BUTTON).and.withTooltip().withContent("tour.preview.step1").thatOpensLeft().and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick().and.withBehaviors().thatWaitsForSpinner().and.withBI().withDescription("When you're done previewing, click here.").build()]}}]),angular.module("siteGeneratorTourManagerInternal").factory("animationTask",["applicationState","previewScale","assistantManager","assistantUtils","flags","$translate",function(a,b,c,d,e,f){var g=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.DESIGN_TAB).and.withTooltip().withContent("tour.animation.step0b").thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return d.openSiteDesignTopBarMenu()}).and.withBehaviors().thatStartsAutoplayOnEnter().thatStopsAutoplayOnExit().withAutoplayTimeoutOf(800).thatHasHint().and.withBI().withDescription("Opening Design Menu").build(),h=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.DESIGN_MENU_ANIMATIONS_OPTION).and.withTooltip().withContent("tour.animation.step1b").thatOpensRight().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return d.closeSiteDesignTopBarMenu()}).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_THEMES_OPTION).withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_FONTS_OPTION).withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_COLORS_OPTION).and.withBI().withDescription("Click Animation").build(),i=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.ANIMATION_THUMBNAILS).and.withTooltip().withContent("tour.animation.step2-2").thatOpensRight().and.withBehaviors().thatRedirectsTo(config.STATES.BUILDER_DESIGN_KIT_ANIMATIONS).and.withBackdrop().thatIsOn().and.withCallbacks().onEnter(function(){return c.setDockStatus(builders.AssistantDockStatus.Playing)}).and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.ANIMATION_THUMBNAILS_EXCLUDE_NO_ANIMATION).goToOnElementClick(builders.AssistantAction.HOOKS.ANIMATION_THUMBNAILS_NO_ANIMATION,5).and.withBI().withDescription("Choose an animation style").build(),j=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.PREVIEW_TAB).and.withTooltip().withContent("tour.animation.step3").thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withBehaviors().thatWaitsForSpinner().and.withBI().withDescription("Preview your animation to see if you like it").build(),k=(new builders.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(2).and.withTooltip().withContent("tour.animation.step4").thatOpensLeft().and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.EXIT_PREVIEW_BUTTON).and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.CLOSE_PREVIEW).and.withCallbacks().onExit(function(){return a.goToBuilder()}).and.withBI().withDescription("Like this animation? Scroll your site to see more.").build(),l=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.PREVIEW_TAB).and.withTooltip().withContent("tour.animation.step3").thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().goToOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_TAB,6).and.withBehaviors().thatWaitsForSpinner().and.withBI().withDescription("Preview your animation to see if you like it").build(),m=(new builders.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(2).and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.EXIT_PREVIEW_BUTTON).and.withTooltip().withContent("tour.animation.step5").thatOpensLeft().and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.CLOSE_PREVIEW).and.withCallbacks().onExit(function(){return a.goToBuilder()}).and.withBI().withDescription("Here is your site without animation. Do you want to try another or keep it?").build();return{id:"animationTask",get label(){return f.instant("assistant-menu-task.animation.deprecated-label")},BI:{assistType:"bucket list",description:"animationTour"},onExit:{callback:function(){d.triggerElement(builders.AssistantAction.HOOKS.DESIGN_TAB,"mouseleave"),b.setScaleFactor(PreviewScale.MaxScaleFactor)}},actions:[g,h,i,j,k,l,m]}}]),angular.module("siteGeneratorTourManagerInternal").factory("entireWebsiteDesignTask",["assistantManager","assistantUtils","applicationState","flags","$translate",function(a,b,c,d,e){var f=(new builders.AssistantAction).thatIsBasedOnTemplate().manualOrAuto().and.thatAttachesTo().dock().and.withBackdrop().thatIsInvisible().and.withTooltip().withContent("tour.entire-website-design.manual-or-auto").and.withBehaviors().thatRedirectsTo(config.STATES.BUILDER_STORY).and.withBI().withDescription("You've chosen to change the design of your website. I can choose a new design for you or show").build(),g=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.DESIGN_TAB).and.withTooltip().withContent("tour.entire-website-design.auto.step0b").thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return b.openSiteDesignTopBarMenu()}).and.withBehaviors().thatStartsAutoplayOnEnter().withAutoplayTimeoutOf(800).thatHasHint().and.withBI().withDescription("Opening Design Menu").and.withConditionalConf().isInManualMode((new builders.AssistantAction).withBehaviors().thatStopsAutoplayOnExit().build()).build(),h=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.DESIGN_MENU_THEMES_OPTION).and.withTooltip().thatOpensRight().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return b.closeSiteDesignTopBarMenu()}).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_COLORS_OPTION).withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_FONTS_OPTION).withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_ANIMATIONS_OPTION).and.withBehaviors().withAutoplayTimeoutOf(800).and.withConditionalConf().isInAutoplayMode((new builders.AssistantAction).withBehaviors().thatHasHint().and.withTooltip().withContent("tour.entire-website-design.auto.step0c").and.withBI().withDescription("Opening Themes Menu").build()).isInManualMode((new builders.AssistantAction).withTooltip().withContent("tour.entire-website-design.manual.step0c").and.withBI().withDescription("Click Themes").build()).build(),i=(new builders.AssistantAction).withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.SELECTED_KIT_OPTION).and.withTooltip().thatOpensRight().and.withConditionalConf().isInAutoplayMode((new builders.AssistantAction).withTooltip().withContent("tour.entire-website-design.auto.step1").and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.KIT_OPTION).onlyUnselectedElements().randomElement().and.withBehaviors().thatHasHint().thatDelays(1e3).and.withTriggers().nextOnElementClick().and.withBI().withDescription("Choosing Design theme").build()).isInManualMode((new builders.AssistantAction).withBackdrop().thatIsOn().and.withTooltip().withContent("tour.entire-website-design.manual.step1").and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.DESIGN_PANEL).and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.KIT_OPTION).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("Choose a Design theme").build()).build(),j=(new builders.AssistantAction).thatAttachesTo().dock().and.thatIsBasedOnTemplate().keepOrAnother(1).and.withBehaviors().thatRedirectsTo(config.STATES.BUILDER_STORY).and.withBackdrop().thatIsInvisible().and.withTooltip().withContent("tour.entire-website-design.step2").and.withBI().withDescription("What do you think of this design?").and.withConditionalConf().experimentIsEnabled("tourEnhancedKeepOrAnother",(new builders.AssistantAction).withBehaviors().thatRedirectsTo().and.thatIsBasedOnTemplate().keepOrAnother(3).and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_CONTENT).goToOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_PADDING,3).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).build()).build();return{id:"entireWebsiteDesignTask",get label(){return e.instant("assistant-menu-task.entire-website-design.deprecated-label")},BI:{assistType:"bucket list",description:"entireWebsiteDesignTour"},onEnter:{callback:function(){a.setCustomTaskData("scrollToSelectedKit",!0)}},onExit:{callback:function(){b.triggerElement(builders.AssistantAction.HOOKS.DESIGN_TAB,"mouseleave"),c.goToBuilder()}},actions:[f,g,h,i,j]}}]),angular.module("siteGeneratorTourManagerInternal").factory("colorDesignTask",["applicationState","previewScale","assistantUtils","flags","$translate",function(a,b,c,d,e){var f=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.DESIGN_TAB).and.withTooltip().withContent("tour.coloration.step0b").thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return c.openSiteDesignTopBarMenu()}).and.withBehaviors().thatStartsAutoplayOnEnter().thatStopsAutoplayOnExit().withAutoplayTimeoutOf(800).thatHasHint().and.withBI().withDescription("Opening Design Menu").build(),g=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.DESIGN_MENU_COLORS_OPTION).and.withTooltip().withContent("tour.coloration.step0c").thatOpensRight().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return c.closeSiteDesignTopBarMenu()}).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_THEMES_OPTION).withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_FONTS_OPTION).withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_ANIMATIONS_OPTION).and.withBI().withDescription("Click Colors").build(),h=(new builders.AssistantAction).thatIsBasedOnTemplate().singleButtonTooltip("tour.button.gotit").and.withTooltip().withContent("tour.coloration.step3").thatOpensRight().and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.LEFT_PANEL).and.withBackdrop().thatIsOn().and.withTriggers().nextOnBackdropClick().nextOnElementClick(builders.AssistantAction.HOOKS.LEFT_PANEL).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.LEFT_PANEL).and.withCallbacks().onEnter(function(){a.clearContentFocus(),b.setScaleFactor(PreviewScale.MinScaleFactor)}).and.withBI().withDescription("here is your recommended main color and palettes").build(),i=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.LEFT_PANEL).and.withTooltip().withContent("tour.coloration.step4").thatOpensRight().and.withBackdrop().thatIsOn().and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.ADVANCED_EDITING_NEW_COLORATION).withDisabledElements(builders.AssistantAction.HOOKS.PANEL_BACK_BUTTON).withDisabledElements(".advanced-editing-button").and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.LEFT_PANEL,builders.AssistantAction.HOOKS.KIT_PALETTE_NEW_COLORATION).nextOnElementClick(builders.AssistantAction.HOOKS.BODY,builders.AssistantAction.HOOKS.MAIN_COLOR_DIALOG_COLOR_TAG).nextOnElementClick(builders.AssistantAction.HOOKS.BODY,builders.AssistantAction.HOOKS.MAIN_COLOR_DIALOG_CONFIRM_BUTTON_NEW_COLORATION).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("pick a palette or change the main color").build(),j=(new builders.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(3).and.withTooltip().withContent("tour.coloration.step5").and.thatAttachesTo().dock().and.withTriggers().goToOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_PADDING,3).completeOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_CONTENT).and.withBackdrop().thatIsOff().and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).withDisabledElements(builders.AssistantAction.HOOKS.ADVANCED_EDITING_NEW_COLORATION).and.withBI().withDescription("What do you think of the new set of colors?").and.withCustomConf({tooltip:{disabled:!1,buttons:{TRY_ANOTHER:{label:"tour.coloration.try-another",intent:{operation:builders.AssistantOperation.Goto},BI:{event:builders.AssistantAction.EVENTS.KEEP_TRYANOTHER_CHOSE_TRYANOTHER}},KEEP_IT:{label:"tour.coloration.keep-it",intent:{operation:builders.AssistantOperation.Complete},BI:{event:builders.AssistantAction.EVENTS.KEEP_TRYANOTHER_CHOSE_KEEP}}}}}).build();return{id:"colorDesignTask",get label(){return e.instant("assistant-menu-task.color-design.deprecated-label")},BI:{assistType:"bucket list",description:"colorDesignTour"},onExit:{callback:function(){c.triggerElement(builders.AssistantAction.HOOKS.DESIGN_TAB,"mouseleave"),b.setScaleFactor(PreviewScale.MaxScaleFactor),a.goToBuilder()}},actions:[f,g,h,i,j]}}]),angular.module("siteGeneratorTourManagerInternal").factory("fontPanelTask",["assistantManager","assistantUtils","applicationState","flags","$translate",function(a,b,c,d,e){var f=(new builders.AssistantAction).thatIsBasedOnTemplate().manualOrAuto().and.thatAttachesTo().dock().and.withBackdrop().thatIsInvisible().and.withTooltip().withContent("tour.fonts.new-font.manual-or-auto").and.withBehaviors().thatRedirectsTo(config.STATES.BUILDER_STORY).and.withBI().withDescription("Let's switch up your website's fonts.").build(),g=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.DESIGN_TAB).and.withTooltip().thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return b.openSiteDesignTopBarMenu()}).and.withBehaviors().withAutoplayTimeoutOf(1500).and.withBI().withDescription("Opening Design Menu").and.withConditionalConf().isInAutoplayMode((new builders.AssistantAction).withBehaviors().thatHasHint().and.withTooltip().withContent("tour.fonts.auto.step0").build()).isInManualMode((new builders.AssistantAction).withBehaviors().thatStopsAutoplayOnExit().and.withTooltip().withContent("tour.fonts.manual.step0").build()).build(),h=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.DESIGN_MENU_FONTS_OPTION).and.withTooltip().thatOpensRight().and.withBackdrop().thatIsOn().and.withCallbacks().onExit(function(){return b.closeSiteDesignTopBarMenu()}).and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.SITE_DESIGN_DROPDOWN_MENU).withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_THEMES_OPTION).withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_COLORS_OPTION).withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_ANIMATIONS_OPTION).and.withBehaviors().withAutoplayTimeoutOf(800).and.withConditionalConf().isInAutoplayMode((new builders.AssistantAction).withTriggers().nextOnElementClick().and.withTooltip().withContent("tour.fonts.auto.step1b").and.withBehaviors().thatHasHint().and.withBackdrop().thatIsInvisible().and.withBI().withDescription("Opening Fonts Menu").build()).isInManualMode((new builders.AssistantAction).withTriggers().goToOnElementClick(builders.AssistantAction.HOOKS.DESIGN_MENU_FONTS_OPTION,3).and.withTooltip().withContent("tour.fonts.manual.step1b").and.withBI().withDescription("Click Fonts").build()).build(),i=(new builders.AssistantAction).withTooltip().thatOpensRight().and.withConditionalConf().isInAutoplayMode((new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.FONT_THUMBNAIL).onlyUnselectedElements().randomElement().and.withTooltip().withContent("tour.fonts.auto.step3").and.withBackdrop().thatIsOn().and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.FONT_PANEL).withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).and.withBehaviors().thatHasHint().thatRedirectsTo(config.STATES.BUILDER_DESIGN_KIT_FONTS_NEW).thatDelays(1e3).withAutoplayTimeoutOf(1500).and.withTriggers().nextOnElementClick().and.withBI().withDescription("Choosing Font Set").build()).isInManualMode((new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.FONT_PANEL).and.withTooltip().withContent("tour.newFonts.manual.step3").and.withBackdrop().thatIsOn().and.withBehaviors().thatRedirectsTo(config.STATES.BUILDER_DESIGN_KIT_FONTS_NEW).and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.FONT_THUMBNAIL).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withCallbacks().onEnter(function(){return b.goToOnSliderHandled(5)}).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).and.withBI().withDescription("Choose a Font Set").build()).build(),j=(new builders.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(3).and.withTooltip().withContent("tour.fonts.manual.font-set.step4").and.thatAttachesTo().dock().and.withTriggers().completeOnBackdropClick().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("What do you think of this font set?").and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).and.withCustomConf({additionalHighlightedElements:[builders.AssistantAction.HOOKS.LEFT_PANEL]}).withConditionalConf().experimentIsEnabled("tourEnhancedKeepOrAnother",(new builders.AssistantAction).withBehaviors().thatRedirectsTo().and.thatIsBasedOnTemplate().keepOrAnother(3).and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_CONTENT).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).goToOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_PADDING,3).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).build()).build(),k=(new builders.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(3).and.withTooltip().withContent("tour.fonts.manual.font-size.step4").and.thatAttachesTo().dock().and.withTriggers().completeOnBackdropClick().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("What do you think of this font size?").and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).and.withCustomConf({additionalHighlightedElements:[builders.AssistantAction.HOOKS.LEFT_PANEL]}).withConditionalConf().isInAutoplayMode((new builders.AssistantAction).withBehaviors().thatStartsAutoplayOnExit().build()).build();return{id:"fontPanelTask",get label(){return e.instant("assistant-menu-task.font-panel.deprecated-label")},BI:{assistType:"bucket list",description:"fontPanelTour"},onExit:{callback:function(){b.triggerElement(builders.AssistantAction.HOOKS.DESIGN_TAB,"mouseleave"),c.goToBuilder()}},actions:[f,g,h,i,j,k]}}]),angular.module("siteGeneratorTourManagerInternal").factory("editContentTask",["assistantManager","assistantUtils","applicationState","flags","$translate","previewScale",function(a,b,c,d,e,f){var g=(new builders.AssistantAction).thatAttachesTo().dock().and.withTooltip().withContent("tour.edit-content.step2").and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.PREVIEW_CONTAINER).withDisabledElements(builders.AssistantAction.HOOKS.INSERT_SECTION_BUTTON).and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.OVERLAY_CONTAINER,builders.AssistantAction.HOOKS.OVERLAY_SECTION_NOT_TPA).and.withBackdrop().thatIsOn().and.withBehaviors().thatRedirectsTo(config.STATES.BUILDER_STORY).and.withCallbacks().onEnter(function(){c.clearContentFocus(),f.setScaleFactor(PreviewScale.MinScaleFactor)}).and.withBI().withDescription("Select a section to edit its content").build(),h=(new builders.AssistantAction).withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.OVERLAY_EDIT_SECTION_BODY).withDisabledElements(builders.AssistantAction.HOOKS.OVERLAY_EDIR_SECTION_HEADER).and.thatIsBasedOnTemplate().singleButtonTooltip("tour.button.gotit").and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.NODE_EDITOR).and.withTooltip().withContent("tour.edit-content.step4").thatOpensRight().and.withTriggers().nextOnElementClick().and.withTriggers().nextOnBackdropClick().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBackdrop().thatIsOn().and.withBI().withDescription("Edit your content here and I'll update the changes in your website. You can hide or show text with one click.").build(),i=(new builders.AssistantAction).thatAttachesTo().dock().and.withTooltip().withContent("tour.edit-content.step5").and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_CONTENT).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).and.withBI().withDescription("When you're done editing, click below").build();return{id:"editContentTask",get label(){return e.instant("assistant-menu-task.edit-content.deprecated-label")},BI:{assistType:"bucket list",description:"editContentTour"},onEnter:{callback:function(){b.hideListSpanButtons()}},onExit:{callback:function(){b.showListSpanButtons(),c.clearContentFocus(),f.setScaleFactor(PreviewScale.MaxScaleFactor)}},actions:[g,h,i]}}]),angular.module("siteGeneratorTourManagerInternal").factory("changeLayoutTask",["assistantManager","assistantUtils","applicationState","flags","previewScale","$translate",function(a,b,c,d,e,f){function g(){a.setCustomTaskData("goToBuilderWhenTourCompleted",!1)}var h=(new builders.AssistantAction).thatIsBasedOnTemplate().manualOrAuto().and.thatAttachesTo().dock().and.withTooltip().withContent("tour.change-layout.manual-or-auto").and.withBackdrop().thatIsInvisible().and.withBehaviors().thatRedirectsTo(config.STATES.BUILDER_STORY).and.withBI().withDescription("I'll change the layout of one of your sections").build(),i=(new builders.AssistantAction).thatAttachesTo().dock().and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.PREVIEW_CONTAINER).and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.OVERLAY_CONTAINER,builders.AssistantAction.HOOKS.OVERLAY_SECTION_NOT_TPA).and.withBackdrop().thatIsOn().and.withBehaviors().thatStopsAutoplayOnEnter().and.withCallbacks().onEnter(function(){b.hideListSpanButtons(),c.clearContentFocus(),e.setScaleFactor(PreviewScale.MinScaleFactor)}).onExit(function(){return b.showListSpanButtons()}).and.withConditionalConf().isInAutoplayMode((new builders.AssistantAction).withTooltip().withContent("tour.change-layout.auto.step0").and.withBehaviors().thatStartsAutoplayOnExit().and.withBI().withDescription("Pick the section you want to change and I'll choose a new layout.").build()).isInManualMode((new builders.AssistantAction).withTooltip().withContent("tour.change-layout.manual.step2").and.withBI().withDescription("Pick the section you want to change and I'll show you new layout options.").build()).build(),j=(new builders.AssistantAction).thatAttachesTo().dock().and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.PREVIEW_CONTAINER).and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.OVERLAY_CONTAINER,builders.AssistantAction.HOOKS.OVERLAY_SECTION_WITH_PRESETS).and.withBackdrop().thatIsOn().and.withBehaviors().thatStopsAutoplayOnEnter().and.withCallbacks().onEnter(function(){b.hideListSpanButtons(),c.clearContentFocus(),e.setScaleFactor(PreviewScale.MinScaleFactor)}).onExit(function(){return b.showListSpanButtons()
}).and.withConditionalConf().isInAutoplayMode((new builders.AssistantAction).withTooltip().withContent("tour.change-layout.auto.step0").and.withBehaviors().thatStartsAutoplayOnExit().and.withBI().withDescription("Pick the section you want to change and I'll choose a new layout.").build()).isInManualMode((new builders.AssistantAction).withTooltip().withContent("tour.change-layout.manual.step2").and.withBI().withDescription("Pick the section you want to change and I'll show you new layout options.").build()).build(),k=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.OVERLAY_SWITCH_LAYOUT_BUTTON).and.withTooltip().thatOpensLeft().and.withTriggers().nextOnElementClick().and.withBackdrop().thatIsOn().and.withConditionalConf().isInAutoplayMode((new builders.AssistantAction).withBehaviors().withAutoplayTimeoutOf(3e3).thatHasHint().and.withTooltip().withContent("tour.change-layout.auto.step1").and.withBI().withDescription("Entering layout options").build()).isInManualMode((new builders.AssistantAction).withTooltip().withContent("tour.change-layout.manual.step3").thatOpensRight().and.withBI().withDescription("Click here to enter layout options").build()).build(),l=(new builders.AssistantAction).withBackdrop().thatIsInvisible().and.withTooltip().thatOpensRight().and.withConditionalConf().isInAutoplayMode((new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.PREVIEW_SECTION).onlyUnselectedElements().randomElement().and.withBehaviors().withAutoplayTimeoutOf(3e3).thatHasHint().and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.$element,builders.AssistantAction.HOOKS.PREVIEW_OVERLAY).and.withTooltip().withContent("tour.change-layout.auto.step2").and.withBI().withDescription("Choosing a new section layout").build()).isInManualMode((new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.LEFT_PANEL).and.withTooltip().withContent("tour.change-layout.manual.step4").and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.BODY,builders.AssistantAction.unselected(builders.AssistantAction.HOOKS.PREVIEW_SECTION)+" "+builders.AssistantAction.HOOKS.PREVIEW_OVERLAY).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(builders.AssistantAction.HOOKS.GO_TO_SITE_DESIGN,"",!0,g).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.CUSTOMIZE_DESIGN_BUTTON).and.withBI().withDescription("Select a layout you love").build()).build(),m=(new builders.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(1).and.withTooltip().withContent("tour.change-layout.auto.step3").and.withBehaviors().thatRedirectsTo(config.STATES.BUILDER_STORY).and.thatAttachesTo().dock().and.withBackdrop().thatIsInvisible().and.withCallbacks().onEnter(function(){return b.hideListSpanButtons()}).onExit(function(){return b.showListSpanButtons()}).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.OVERLAY_SECTION_EDIT_BUTTON).withDisabledElements(builders.AssistantAction.HOOKS.OVERLAY_SWITCH_LAYOUT_BUTTON).withDisabledElements(builders.AssistantAction.HOOKS.OVERLAY_MORE_ACTIONS_BUTTON).withDisabledElements(builders.AssistantAction.HOOKS.OVERLAY_DRAG_HANDLE).and.withBI().withDescription("What do you think of this section's new layout?").and.withConditionalConf().experimentIsEnabled("tourEnhancedKeepOrAnother",(new builders.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(3).and.withBehaviors().thatRedirectsTo(null).and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_CONTENT).goToOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_PADDING,3).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).build()).build();return{id:"changeLayoutTask",get label(){return f.instant("assistant-menu-task.change-layout.deprecated-label")},BI:{assistType:"bucket list",description:"changeLayoutTour"},onEnter:{callback:function(){a.setCustomTaskData("goToBuilderWhenTourCompleted",!0)}},onExit:{callback:function(){c.clearContentFocus(),!0===a.getCustomTaskData("goToBuilderWhenTourCompleted")&&c.goToBuilder(),e.setScaleFactor(PreviewScale.MaxScaleFactor)}},actions:[h,i,k,l,m],experiments:{enableChangeLayoutTourForTPAs:{actions:[h,j,k,l,m]}}}}]),angular.module("siteGeneratorTourManagerInternal").factory("customizeSectionDesign",["assistantManager","assistantUtils","applicationState","flags","previewScale","$translate",function(a,b,c,d,e,f){function g(){a.setCustomTaskData("goToBuilderWhenTourCompleted",!1)}var h=(new builders.AssistantAction).withBehaviors().thatRedirectsTo(config.STATES.BUILDER_STORY).thatStopsAutoplayOnEnter().thatDelays(200).and.thatAttachesTo().dock().and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.PREVIEW_CONTAINER).withDisabledElements(builders.AssistantAction.HOOKS.HEADER_OVERLAY).withDisabledElements(builders.AssistantAction.HOOKS.FOOTER_OVERLAY).and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.OVERLAY_CONTAINER,builders.AssistantAction.HOOKS.OVERLAY_SECTION_NOT_TPA).and.withBackdrop().thatIsOn().and.withTooltip().withContent("tour.customize-section-design.step0").and.withBI().withDescription("Pick the section you want to change and I'll show you new layout options.").and.withCallbacks().onEnter(function(){c.clearContentFocus(),e.setScaleFactor(PreviewScale.MinScaleFactor)}).build(),i=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.OVERLAY_SWITCH_LAYOUT_BUTTON).and.withTriggers().nextOnElementClick().and.withBackdrop().thatIsOn().and.withTooltip().withContent("tour.customize-section-design.step1").thatOpensRight().and.withBI().withDescription("Click here to enter design options").and.withCallbacks().onEnter(function(){b.showListSpanButtons()}).onExit(function(){return b.hideListSpanButtons()}).build(),j=(new builders.AssistantAction).withBackdrop().thatIsOn().and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.CUSTOMIZE_DESIGN_BUTTON).and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.SELECTED_PREVIEW_SECTION).withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).and.withTriggers().nextOnElementClick().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withCallbacks().onEnter(function(){return b.hideSectionDesignMenu()}).onExit(function(){return b.showSectionDesignMenu()}).and.withTooltip().withContent("tour.customize-section-design.step2").thatOpensRight().and.withBI().withDescription("Click customize design").build(),k=(new builders.AssistantAction).withBackdrop().thatIsOn().and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.SELECTED_PREVIEW_SECTION).withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).withDisabledElements(builders.AssistantAction.HOOKS.PREVIEW_OVERLAY).and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.SECTION_DESIGN_MENU_HOOK).and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(builders.AssistantAction.HOOKS.MENU_ITEM).goToOnElementClick(builders.AssistantAction.HOOKS.BACKGROUND_BUTTON,4,null,!0).goToOnElementClick(builders.AssistantAction.HOOKS.HEADERBG_BUTTON,4,null,!0).goToOnElementClick(builders.AssistantAction.HOOKS.LISTBG_BUTTON,4,null,!0).goToOnElementClick(builders.AssistantAction.HOOKS.COLOR_BUTTON,5,null,!0).goToOnElementClick(builders.AssistantAction.HOOKS.FONT_BUTTON,6,null,!0).goToOnElementClick(builders.AssistantAction.HOOKS.ANIMATIONS_BUTTON,7,null,!0).and.withCallbacks().onExit(function(){return b.hideSectionDesignMenu()}).and.withTooltip().withWidth("360px").withContent("tour.customize-section-design.step3").thatOpensRight().and.withBI().withDescription("Choose what you want to customize").build(),l=(new builders.AssistantAction).thatAttachesTo().dock().and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_CONTENT).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).and.withTooltip().withContent("tour.customize-section-design.step4").thatOpensUp().and.withBI().withDescription("When you're done customizing click below").build(),m=(new builders.AssistantAction).withBackdrop().thatIsOff().and.thatAttachesTo().dock().and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).withAdditionalHighlight(builders.AssistantAction.HOOKS.CC_PANEL_FRAME).withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_CONTENT).completeOnElementClick(builders.AssistantAction.HOOKS.DOCK).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(builders.AssistantAction.HOOKS.GO_TO_SITE_COLORS,"",!1,g).and.withTooltip().withContent("tour.customize-section-design.step4").thatOpensUp().and.withBI().withDescription("When you're done customizing, click below").build(),n=(new builders.AssistantAction).withBackdrop().thatIsOff().and.thatAttachesTo().dock().and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).withAdditionalHighlight(builders.AssistantAction.HOOKS.CC_PANEL_FRAME).withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_CONTENT).completeOnElementClick(builders.AssistantAction.HOOKS.DOCK).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(builders.AssistantAction.HOOKS.GO_TO_SITE_FONTS,"",!1,g).and.withTooltip().withContent("tour.customize-section-design.step4").thatOpensUp().and.withBI().withDescription("When you're done customizing, click below").build(),o=(new builders.AssistantAction).withBackdrop().thatIsOff().and.thatAttachesTo().dock().and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).withAdditionalHighlight(builders.AssistantAction.HOOKS.CC_PANEL_FRAME).withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_CONTENT).completeOnElementClick(builders.AssistantAction.HOOKS.DOCK).completeOnElementClick(builders.AssistantAction.HOOKS.GO_TO_SITE_ANIMATION,"",!1,g).and.withTooltip().withContent("tour.customize-section-design.step4").thatOpensUp().and.withBI().withDescription("When you're done customizing, click below").build();return{id:"customizeSectionDesign",get label(){return f.instant("assistant-menu-task.customize-section-design.deprecated-label")},BI:{assistType:"bucket list",description:"customizeSectionDesign"},onEnter:{callback:function(){a.setCustomTaskData("goToBuilderWhenTourCompleted",!0),b.hideListSpanButtons()}},onExit:{callback:function(){b.showListSpanButtons(),c.clearContentFocus(),e.setScaleFactor(PreviewScale.MaxScaleFactor),!0===a.getCustomTaskData("goToBuilderWhenTourCompleted")&&c.goToBuilder()}},actions:[h,i,j,k,l,m,n,o]}}]),angular.module("siteGeneratorTourManagerInternal").factory("addSectionTask",["assistantUtils","assistantManager","flags","$translate",function(a,b,c,d){return{id:"addSectionTask",get label(){return d.instant("assistant-menu-task.add-section.deprecated-label")},BI:{assistType:"bucket list",description:"addSectionTour"},actions:[(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.ADD_TAB).and.withBehaviors().thatHasHint().thatStartsAutoplayOnEnter().thatStopsAutoplayOnExit().withAutoplayTimeoutOf(800).and.withBI().withDescription("Opening Add Menu").and.withCallbacks().onExit(function(){return a.openAddTopBarMenu()}).and.withBackdrop().thatIsOn().build(),(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.ADD_SECTION_TAB).and.withTooltip().withContent("tour.add-section2.step2").thatOpensRight().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withBehaviors().thatStopsAutoplayOnEnter().and.withCallbacks().onExit(function(){return a.closeAddTopBarMenu()}).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.ADD_PAGE_TAB).and.withBI().withDescription("Click Add Section").build(),(new builders.AssistantAction).thatIsBasedOnTemplate().singleButtonTooltip("tour.button.gotit").and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.LEFT_PANEL).and.withTooltip().withContent("tour.add-section.step3").thatOpensRight().and.withBackdrop().thatIsInvisible().and.withTriggers().nextOnElementClick().nextOnElementClick(builders.AssistantAction.HOOKS.PRESETS_CONTAINER,builders.AssistantAction.HOOKS.PRESET).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("I've listed possible sections by relevance for your type of business").build(),(new builders.AssistantAction).thatAttachesTo().dock().and.withTooltip().withContent("tour.add-section.step4").thatOpensUp().and.withBackdrop().thatIsOff().and.withBehaviors().thatClosesSidePanelOnExit().and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_CONTENT).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).and.withBI().withDescription("When you're done, click below.").build()],onExit:{callback:function(){a.triggerElement(builders.AssistantAction.HOOKS.ADD_TAB,"mouseleave")}}}}]),angular.module("siteGeneratorTourManagerInternal").factory("addPageTask",["assistantManager","assistantUtils","flags","$translate",function(a,b,c,d){return{id:"addPageTask",get label(){return d.instant("assistant-menu-task.add-page.deprecated-label")},BI:{assistType:"bucket list",description:"addPageTour"},actions:[(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.ADD_TAB).and.withBehaviors().thatStartsAutoplayOnEnter().thatStopsAutoplayOnExit().thatHasHint().withAutoplayTimeoutOf(800).and.withCallbacks().onExit(function(){return b.openAddTopBarMenu()}).and.withBackdrop().thatIsOn().and.withBI().withDescription("Opening Add Menu").build(),(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.ADD_PAGE_TAB).and.withTooltip().withContent("tour.add-new-page2.step1").thatOpensRight().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withBehaviors().thatStopsAutoplayOnEnter().and.withCallbacks().onExit(function(){return b.closeAddTopBarMenu()}).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.ADD_SECTION_TAB).and.withBI().withDescription("Click Add Section").build(),(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.ADD_SECTION_PANEL).and.withTooltip().withContent("tour.add-new-page.step2").thatOpensRight().and.withBackdrop().thatIsOn().and.withBehaviors().thatDelays(1e3).thatWaitsForElement(builders.AssistantAction.HOOKS.PREVIEW_OVERLAY).and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.PRESETS_CONTAINER,builders.AssistantAction.HOOKS.BLANK_PAGE_OVERLAY).completeOnElementClick(builders.AssistantAction.HOOKS.PRESETS_CONTAINER,builders.AssistantAction.HOOKS.PREVIEW_OVERLAY_WITH_NOT_BLANK_PAGE).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withCallbacks().onExit(function(){return a.setMenuProgress(builders.AssistantMenuProgress.intermediate)}).and.withBI().withDescription("I've arranged all possible pages by relevance for your type of business.").build(),(new builders.AssistantAction).withBehaviors().thatWaitsForElement(builders.AssistantAction.HOOKS.ADD_SECTION_PANEL_LABEL).and.withCallbacks().onEnter(function(){return a.stopAndComplete()}).and.withBI().withDescription("Add Blank Page").build()],onExit:{callback:function(){b.triggerElement(builders.AssistantAction.HOOKS.ADD_TAB,"mouseleave")}}}}]),angular.module("siteGeneratorTourManagerInternal").factory("publishTask",["flags","$translate",function(a,b){return{id:"publishTask",get label(){return b.instant("assistant-menu-task.publish.deprecated-label")},BI:{description:"publishTour"},actions:[(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.PUBLISH_TAB).and.withTooltip().withContent("tour.publish.step0").thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().completeOnElementClick().and.withBI().withDescription("Once your site is published, people can see it online").build()]}}]),angular.module("siteGeneratorTourManagerInternal").factory("connectDomainTask",["flags","$translate",function(a,b){return{id:"connectDomainTask",get label(){return b.instant("assistant-menu-task.connect-domain.deprecated-label")},BI:{description:"connectDomainTour"},actions:[(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.CONNECT_DOMAIN_BUTTON).and.withTooltip().withContent("tour.connect-domain.step0").thatOpensDown().and.withBehaviors().thatHasHint().thatRedirectsTo(config.STATES.BUILDER_STORY).thatDelays(300).and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.BROWSER_TOOLBAR).and.withBackdrop().thatIsOn().and.withTriggers().completeOnElementClick().and.withBI().withDescription("Look professional with a memorable, customized domain.").build()]}}]),angular.module("siteGeneratorTourManagerInternal").factory("pageSEOTask",["assistantUtils","flags","$translate",function(a,b,c){return{id:"pageSEOTask",get label(){return c.instant("assistant-menu-task.page-seo.deprecated-label")},BI:{assistType:"bucket list",description:"pageSEOTour"},actions:[(new builders.AssistantAction).withBehaviors().thatSkipsStepOnCondition(function(){return!0}).and.withBI().withDescription("Opening Page TopBar Menu").and.withConditionalConf().experimentIsEnabled("useSecondTopBarREMOVEDTEMPORARILY",(new builders.AssistantAction).thatAttachesTo().hook("PAGE_TAB_SECOND_TOPBAR").and.withBehaviors().thatStartsAutoplayOnEnter().thatStopsAutoplayOnExit().thatSkipsStepOnCondition(function(){return!1}).thatHasHint().withAutoplayTimeoutOf(800).thatRedirectsTo(config.STATES.BUILDER_STORY).and.withCallbacks().onExit(function(){return a.openPagesTopBarMenu()}).and.withBackdrop().thatIsOn().build()).build(),(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.PAGE_TAB_TEMPORARY).and.withTooltip().withContent("tour.page-seo.step0").thatOpensDown().and.withBehaviors().thatRedirectsTo(config.STATES.BUILDER_STORY).and.withTriggers().nextOnElementClick().and.withBackdrop().thatIsOn().and.withBI().withDescription("Open the Page Manager").and.withConditionalConf().experimentIsEnabled("useSecondTopBarREMOVEDTEMPORARILY",(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.MANAGE_PAGES).and.withTooltip().withContent("tour.page-seo.step0").and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.PAGE_TAB_MENU_ITEM).and.withCallbacks().onExit(function(){return a.closePagesTopBarMenu()}).build()).build(),(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.PAGE_SETTINGS_BUTTON).and.withTooltip().withContent("tour.page-seo.step2").thatOpensRight().and.withBackdrop().thatIsOn().and.withBehaviors().thatDelays(1e3).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.ADD_PAGE_BUTTON).withDisabledElements(builders.AssistantAction.HOOKS.PAGE_PANEL_FOOTER).withDisabledElements(builders.AssistantAction.HOOKS.UNSELECTED_PAGE_ITEMS).withAdditionalHighlight(builders.AssistantAction.HOOKS.PAGES_PANEL).and.withTriggers().nextOnElementClick().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_HELP_BUTTON).and.withBI().withDescription("Click Page Settings").build(),(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.PAGE_SEO_MENU_ITEM).and.withTooltip().withContent("tour.page-seo.step3").thatOpensRight().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("Select Page SEO").build(),(new builders.AssistantAction).thatIsBasedOnTemplate().singleButtonTooltip("tour.button.gotit").and.withTooltip().withContent("tour.page-seo.step4").thatOpensRight().and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.SEO_PANEL_PAGE_DESCRIPTION_FIELD).and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.SEO_PANEL).and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().nextOnBackdropClick().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("Good SEO helps people find you on search engines like Google. Choose relevant keywords including your business name").build(),(new builders.AssistantAction).thatAttachesTo().dock().and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withTooltip().withContent("tour.page-seo.step5").and.withBI().withDescription("When you're done, click below.").build()],onExit:{callback:function(){a.triggerElement(builders.AssistantAction.HOOKS.PAGE_TAB_SECOND_TOPBAR,"mouseleave")}}}}]),angular.module("siteGeneratorTourManagerInternal").factory("seoWizTask",["assistantUtils","assistantManager","$translate","staticsUrls","$window",function(a,b,c,d,e){return{id:"seoWizTask",get label(){return c.instant("assistant-menu-task.wiz-seo.label")},BI:{assistType:"bucket list",description:"seoWizTask"},onEnter:{callback:function(){b.setCustomTaskData("openSiteDropdown",!0)}},actions:[(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.SITE_DROPDOWN_SEO_WIZ).and.withTooltip().thatOpensRight().withContent("tour.wiz-seo.click-get-found").and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.SITE_DROPDOWN_ITEMS_EXCEPT_SEO_WIZ).and.withBackdrop().thatIsOn().and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.SITE_DROPDOWN_SEO_WIZ).build()]}}]);var ORIGIN="ADI Assistant - tpa task";angular.module("siteGeneratorTourManagerInternal").factory("createTPATask",["$translate","tpaDiscovery","tpaService","assistantManager","tpaSettings",function(a,b,c,d,e){return function(f,g){var h=function(){return b.manageableTPAs[f]},i=function(){return h().menuItem.nameAsObject.toLowerCase()},j=function(){var a=h(),b=c.getNaiveType(f),d=a.naiveNode;e.openManagement(ORIGIN,d,b)};return{id:g,isComplete:!0,get label(){return a.instant("assistant-menu-task.tpa.label",{tpa:i()})},BI:{description:g},actions:[(new builders.AssistantAction).withCallbacks().onEnter(function(){j(),d.stopAndComplete()}).build()]}}}]);var WelcomeTaskStartTemplate=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){this.assistantManager=a,this.assistantUtils=b,this.assistantBI=c,this.consumerBiLogger=d,this.colorationUtils=e,this.introManager=f,this.designKitManager=g,this.flags=h,this.$q=i,this.kitUtils=j,this.initSiteData=k,this.introModelTree=l,this.miscUtils=m,this.initService=n,this.CREATE_MY_HOMEPAGE_STEP=4e3,this.currentStep=1e3,this.isLoading=!1,this.kits=[],this.getKits(),this.logoPersistence=new intro.IntroLogoPersistence(this.introManager.data.media,this.miscUtils)}return a.$inject=["assistantManager","assistantUtils","assistantBI","consumerBiLogger","colorationUtils","introManager","designKitManager","flags","$q","kitUtils","initSiteData","introModelTree","miscUtils","initService"],a.prototype.getKits=function(){var a=this;this.kitUtils.calculateKits().then(function(b){return a.kits=b})},a.prototype.selectKit=function(a){this.selectedKitId=a},a.prototype.getTitle=function(){return this.flags.fullSiteBuilder&&this.currentStep===this.CREATE_MY_HOMEPAGE_STEP?"I Will Now Create a Website Tailored to Your Needs":"tour.welcome2.step"+this.currentStep+".title"},a.prototype.getContent=function(){return this.flags.fullSiteBuilder&&this.currentStep===this.CREATE_MY_HOMEPAGE_STEP?"Let me take over for a few moments and I’ll create the initial design<br/>of your stunning website right before your eyes.":"tour.welcome2.step"+this.currentStep+".content"},a.prototype.sendBI=function(a,b){void 0===b&&(b=null),this.assistantBI.sendCustomBIEvent({evid:51,phaseNumber:b||this.currentStep,phaseName:a})},a.prototype.shouldSuggestLogoExtraction=function(){return this.introManager.isLogoExists()},a.prototype.onKitContinueClick=function(){this.shouldSuggestLogoExtraction()?this.goToSuggestToExtractPalette():(this.sendBI("Create my homepage"),this.goToCreateHomepageConfirmationStep())},a.prototype.goToDesignPickerStep=function(){this.sendBI("Help me understand your style."),this.goToNextInternalStep()},a.prototype.goToSuggestToExtractPalette=function(){this.sendBI("Would you like me to create a color palette from your logo?"),this.goToNextInternalStep()},a.prototype.updateLogoInModel=function(){this.introModelTree.updateLogo()},a.prototype.skipLogoPaletteClick=function(a){var b=1+(a===LogoCEWStep.SHOULD_I_EXTRACT_STEP?3e3:3200);this.sendBI("Create my homepage",b)},a.prototype.createLogoPaletteClick=function(){this.sendBI("Creating palette",3e3)},a.prototype.saveLogoPaletteClick=function(a){this.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePallete(this.colorationUtils.numOfColors(a.colors),1,"logo",0,BIOrigins.WelcomeTour),this.sendBI("Create my homepage",3200)},a.prototype.getLogoDescriptionPromise=function(){var a=this;return this.introModelTree.prepareLogoData().then(function(){return{relativeUri:a.introManager.siteProperties.logo,width:a.introManager.logoDimensions.width,height:a.introManager.logoDimensions.height}})},a.prototype.getPreparePalettePromise=function(a){var b=this;return this.getLogoDescriptionPromise().then(function(c){return b.prevPromise&&_.isEqual(c,b.prevPromiseImageDescription)?b.prevPromise:(b.prevPromiseImageDescription=c,b.prevPromise=b.colorationUtils.preparePaletteFromLogo(c,a),b.prevPromise)})},a.prototype.goToCreateHomepageConfirmationStep=function(a){var b=this;this.goToInternalStep(this.CREATE_MY_HOMEPAGE_STEP),this.isLoading=!0;var c;this.$q.all([this.designKitManager.setActiveMainKit(this.selectedKitId),this.colorationUtils.initialize(),this.initService.loaded()]).then(function(){if(a)return c=Date.now(),b.colorationUtils.setLogoColors(a),b.colorationUtils.useLogoColors({setColorationMode:!0,overrideMainColor:!0})}).then(function(){a&&b.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess(Date.now()-c,b.colorationUtils.numOfColors(a.colors),1,"logo",0,BIOrigins.WelcomeTour),b.isLoading=!1})},a.prototype.goToNextInternalStep=function(){this.currentStep=1e3*Math.floor(this.currentStep/1e3)+1e3},a.prototype.goToInternalStep=function(a){this.currentStep=a},a.prototype.goToNextAction=function(){var a=this;this.sendBI("Creating your homepage..."),this.initSiteData.loaded().then(function(){return a.introModelTree.loaded()}).then(function(){a.introManager.reset()}),this.assistantManager.gotoNextAction()},a.prototype.getLastButtonText=function(){return this.isLoading?"tour.welcome2.preparing.button":"tour.welcome2.step4000.button"},a}();angular.module("siteGeneratorTourManagerInternal").component("welcomeTaskStart",{controller:WelcomeTaskStartTemplate,template:'\n                <div class="tour-step-with-action welcome-start-step welcome-start-step-white">\n                  <div style="position: fixed; left: 200px; top: 120px; z-index: 2; display: none">\n                    <button ng-click="$ctrl.goToInternalStep(1000)">A</button>\n                    <button ng-click="$ctrl.goToInternalStep(2000)">B</button>\n                    <button ng-click="$ctrl.goToInternalStep(3000)">C</button>\n                    <button ng-click="$ctrl.goToInternalStep(4000)">D</button>\n                  </div>\n                  <div class="tour-step-content-wrapper">\n                    <div>\n                      <div ng-switch="$ctrl.currentStep" class="welcome-start-changing-section">\n                        <div ng-switch-when="1000" class="welcome-task-start-substep welcome-task-start-substep-1000">\n                          <div class="tour-step-title" ng-bind-html="$ctrl.getTitle() | translate" ng-if="$ctrl.getTitle() | translate"></div>\n                          <div class="tour-step-content" ng-bind-html="$ctrl.getContent() | translate" ng-if="$ctrl.getContent() | translate"></div>\n                          <button class="tour-dock-start assistant-dock-start" ng-click="$ctrl.goToDesignPickerStep()" adi-automation="welcome-task-start">{{::\'intro.start.button\' | translate}}</button>\n                        </div>\n                        <div ng-switch-when="2000" class="welcome-task-start-substep welcome-task-start-substep-2000">\n                          <div class="tour-step-title" ng-bind-html="$ctrl.getTitle() | translate" ng-if="$ctrl.getTitle() | translate"></div>\n                          <div class="tour-step-content" ng-bind-html="$ctrl.getContent() | translate" ng-if="$ctrl.getContent() | translate"></div>\n                          <div class="kits clearfix">\n                            <div class="tour-step-welcome-design-picker-item" ng-class="{selected: kit.id === $ctrl.selectedKitId}" ng-repeat="kit in $ctrl.kits | limitTo:6" ng-click="$ctrl.selectKit(kit.id)">\n                              <kit-thumbnail kit="kit"></kit-thumbnail>\n                            </div>\n                          </div>\n                          <div class="tour-step-actions -centered">\n                            <button class="tour-button -primary" ng-click="$ctrl.onKitContinueClick()" ng-disabled="!$ctrl.selectedKitId" adi-automation="welcome-task-kit-continue"><span ng-bind-html="::\'tour.button.continue\' | translate"> </span></button>\n                          </div>\n                        </div>\n                        <div ng-switch-when="3000" class="welcome-task-start-substep welcome-task-start-substep-3000">\n                          <div class="tour-step-actions -centered">\n                            <logo-color-extraction-wizard logo-persistence=":: $ctrl.logoPersistence" get-prepare-palette-promise="$ctrl.getPreparePalettePromise(logoOrigin)" enable-replace-logo="true" update-logo-in-model="$ctrl.updateLogoInModel()" on-done="$ctrl.goToCreateHomepageConfirmationStep(logoColoration)" on-skip-click="$ctrl.skipLogoPaletteClick(logoExtractorStep)" on-create-palette-click="$ctrl.createLogoPaletteClick()" on-save-palette-click="$ctrl.saveLogoPaletteClick(logoColoration)" context="tour"> </logo-color-extraction-wizard>\n                          </div>\n                        </div>\n                        <div ng-switch-when="4000" class="welcome-task-start-substep welcome-task-start-substep-4000">\n                          <div class="tour-step-title" ng-bind-html="$ctrl.getTitle() | translate" ng-if="$ctrl.getTitle() | translate"></div>\n                          <div class="tour-step-content" ng-bind-html="$ctrl.getContent() | translate" ng-if="$ctrl.getContent() | translate"></div>\n                          <div class="tour-step-actions -centered">\n                            <button class="tour-button -primary" ng-click="$ctrl.goToNextAction()" ng-disabled="$ctrl.isLoading" adi-automation="welcome-task-create-my-homepage">\n                              <span ng-bind-html="$ctrl.getLastButtonText() | translate"> </span>\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              '});var WelcomeTaskEndTemplate=function(){function a(a){
this.assistantManager=a}return a.$inject=["assistantManager"],a.prototype.stopTask=function(){this.assistantManager.setIntent({operation:builders.AssistantOperation.ForceStop})},a}();angular.module("siteGeneratorTourManagerInternal").component("welcomeTaskEnd",{controller:WelcomeTaskEndTemplate,template:'\n              <div class="tour-step-with-action">\n                <div class="tour-step-image" style="min-height:168px">\n                  <img relative-src="images/tour/welcome-tour-complete.gif"/>\n                </div>\n                <div class="tour-step-title -centered">\n                  {{:: \'tour.welcome2.complete2.title\' | translate}}\n                </div>\n                <div class="tour-step-content-wrapper">\n                  <div>\n                    <div class="tour-step-content -centered" style="margin-bottom: 0;" ng-bind-html=":: \'tour.welcome2.complete2.content\' | translate">\n                    </div>\n                    <div class="tour-step-actions -centered" style="margin-top: 20px">\n                      <button class="tour-button" ng-click="$ctrl.stopTask()"><span ng-bind-html=":: \'general.got-it\' | translate"> </span></button>\n                    </div>\n                </div>\n              </div>\n              '});var SmartAssistTaskConf;!function(a){a.UNLINKED_BUTTON_ACTION={loadPage:0,openNodeEditorPanel:1,initial:2,buttonIsNowHidden:3,linking:4,linkingDone:5,buttonIsNowLinked:6},a.UnlinkedButtonTaskBI={assistType:"smart assist",description:"unlinkedButtonTask"};var b=function(b){var c=b.isLoadPage,d=b.onLoadPage,e=b.isPageLoaded,f=b.onOpenNodeEditPanel,g=b.onLinkViaTour,h=b.onLinkManually,i=b.onHideViaTour,j=b.onLinkingProcessComplete,k=b.nodeId,l=b.isItemOfList,m=(new builders.AssistantAction).withConditionalConf().customCondition(c,(new builders.AssistantAction).withCallbacks().onEnter(d).build()).and.withBehaviors().thatStartsAutoplayOnEnter().build(),n=(new builders.AssistantAction).withConditionalConf().customCondition(c,(new builders.AssistantAction).withBehaviors().thatWaitsForExpression(e).build()).and.withCallbacks().onEnter(f).and.withBehaviors().thatStopsAutoplayOnExit().build(),o=(new builders.AssistantAction).withTooltip().withContent("smart-assist.tour.unlinked-button.link-or-hide-step.content").thatOpensRight().withButton("link").label("smart-assist.tour.unlinked-button.link-or-hide-step.link-button-text").callback(g).onClickGoTo(a.UNLINKED_BUTTON_ACTION.linking).withButton("hide").label("smart-assist.tour.unlinked-button.link-or-hide-step.hide-button-text").callback(i).onClickGoTo(a.UNLINKED_BUTTON_ACTION.buttonIsNowHidden).and.withBehaviors().thatDelays(700).and.withConditionalConf().customCondition(l,(new builders.AssistantAction).withTooltip().withContent("smart-assist.tour.unlinked-button.link-or-hide-step.content-for-list-items").withButton("hide").label("smart-assist.tour.unlinked-button.link-or-hide-step.hide-button-text-for-list-items").build()).and.withBackdrop().thatIsInvisible().and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.NODE_EDITOR_BUTTON_FIELD(k)).and.withTriggers().goToOnElementClick(builders.AssistantAction.HOOKS.NODE_EDITOR_BUTTON_FIELD_TOGGLE_SHOW_BUTTON(k),a.UNLINKED_BUTTON_ACTION.buttonIsNowHidden).goToOnElementClick(builders.AssistantAction.HOOKS.NODE_EDITOR_BUTTON_FIELD_LINK_BUTTON(k),a.UNLINKED_BUTTON_ACTION.linking,void 0,void 0,h).stopOnBackdropClick().and.withBI().withDescription("Add a link to the button or hide it from this section.").build(),p=(new builders.AssistantAction).withTooltip().withContent("smart-assist.tour.unlinked-button.button-hidden-step.content").thatOpensRight().withButton("done").label("smart-assist.tour.unlinked-button.button-hidden-step.done-button-text").completeOnClick().and.withConditionalConf().customCondition(l,(new builders.AssistantAction).withTooltip().withContent("smart-assist.tour.unlinked-button.button-hidden-step.content-for-list-items").build()).and.withBackdrop().thatIsInvisible().and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.NODE_EDITOR_BUTTON_FIELD(k)).and.withTriggers().completeOnBackdropClick().completeOnElementClick(builders.AssistantAction.HOOKS.NODE_EDITOR_BUTTON_FIELD(k)).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.NODE_EDITOR_BUTTON_FIELD(k)).and.withBI().withDescription("This button is hidden.").build(),q=(new builders.AssistantAction).withTooltip().withContent("smart-assist.tour.unlinked-button.linking-step.content").and.withBackdrop().thatIsInvisible().and.withTriggers().goToOnElementClick(builders.AssistantAction.HOOKS.BACKDROP,a.UNLINKED_BUTTON_ACTION.initial).goToOnElementClick(builders.AssistantAction.HOOKS.LINK_PANEL_X,a.UNLINKED_BUTTON_ACTION.initial).goToOnElementClick(builders.AssistantAction.HOOKS.LINK_PANEL_CANCEL,a.UNLINKED_BUTTON_ACTION.initial).nextOnElementClick(builders.AssistantAction.HOOKS.LINK_PANEL_DONE).build(),r=(new builders.AssistantAction).withCallbacks().onEnter(j).build(),s=(new builders.AssistantAction).withTooltip().withContent("smart-assist.tour.unlinked-button.button-linked-step.content").thatOpensRight().withButton("done").label("smart-assist.tour.unlinked-button.button-linked-step.done-button-text").completeOnClick().and.withBackdrop().thatIsInvisible().and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.NODE_EDITOR_BUTTON_FIELD(k)).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.NODE_EDITOR_BUTTON_FIELD(k)).and.withTriggers().completeOnBackdropClick().completeOnElementClick(builders.AssistantAction.HOOKS.NODE_EDITOR_BUTTON_FIELD(k)).and.withBI().withDescription("Nice! This button is linked.").build();return{id:"unlinkedButtonTask",label:"unlinkedButtonTask",BI:a.UnlinkedButtonTaskBI,actions:[m,n,o,p,q,r,s],customData:{editMode:"smart assist"}}};angular.module("siteGeneratorTourManagerInternal").factory("unlinkedButtonTaskConf",function(){return b})}(SmartAssistTaskConf||(SmartAssistTaskConf={}));var UnlinkedButtonTask=function(){function a(a,b,c,d,e,f,g){this.assistantManager=a,this.applicationState=b,this.contentElementFieldManager=c,this.sitePartTypes=d,this.modelTreeHelpers=e,this.pubSub=f,this.unlinkedButtonTaskConf=g}return a.$inject=["assistantManager","applicationState","contentElementFieldManager","sitePartTypes","modelTreeHelpers","pubSub","unlinkedButtonTaskConf"],a.prototype.isPageLoaded=function(a){return this.applicationState.getPageNodeInFocus().id===a.context.containerPageId},a.prototype.isLoadPage=function(a){return!this.isPageLoaded(a)},a.prototype.onLoadPage=function(a){var b=this;this.applicationState.goToBuilder().then(function(){return b.applicationState.goToPage(a.context.containerPageId)})},a.prototype.openNodeEditPanel=function(a){var b=a.context;this.applicationState.setContentFocus(b.identifyingNodeId,this.sitePartTypes.BODY),this.modelTreeHelpers.isItemOfList(b)?this.applicationState.goToEditMode(b.id):this.applicationState.goToEditMode()},a.prototype.terminateButtonLinkingListener=function(){this.buttonLinkingListener&&(this.buttonLinkingListener.terminate(),this.buttonLinkingListener=void 0)},a.prototype.prepareButtonLinkingListener=function(){var a=this;this.terminateButtonLinkingListener();var b;this.buttonLinkingListener={onDone:new Promise(function(c){b=a.pubSub.subscribeOnce(PubSub.events.LINK_OF_FIELD_UPDATED,function(){c()})}),terminate:function(){b&&b()}}},a.prototype.buttonField=function(a){return this.contentElementFieldManager.getNodeFields(a.contentElement,a).find(function(a){return"button"===a.key})},a.prototype.openLinkButtonModal=function(a){var b=this.buttonField(a);this.contentElementFieldManager.onLinkItemEdit(b,a,BIOrigins.SmartAssistUnlinkedButtons)},a.prototype.handleLinkButtonViaTour=function(a){var b=a.context;this.prepareButtonLinkingListener(),this.openLinkButtonModal(b)},a.prototype.handleLinkButtonManually=function(){this.prepareButtonLinkingListener()},a.prototype.handleHideButtonViaTour=function(a){var b=a.context,c=this.buttonField(b);this.contentElementFieldManager.toggleField(c,b,BIOrigins.SmartAssistUnlinkedButtons)},a.prototype.isIssueActive=function(a){var b=a.context;return a.issueType.trigger(b)},a.prototype.onButtonLinkingProcessComplete=function(a){var b=this;this.buttonLinkingListener.onDone.then(function(){if(b.isIssueActive(a)){var c=SmartAssistTaskConf.UNLINKED_BUTTON_ACTION.initial;b.assistantManager.gotoActionInActiveTask(c)}else{var d=SmartAssistTaskConf.UNLINKED_BUTTON_ACTION.buttonIsNowLinked;b.assistantManager.gotoActionInActiveTask(d)}})},a.prototype.isItemOfList=function(a){return this.modelTreeHelpers.isItemOfList(a.context)},a.prototype.startTour=function(a){var b=this,c=a.context,d=this.unlinkedButtonTaskConf({isLoadPage:function(){return b.isLoadPage(a)},onLoadPage:function(){return b.onLoadPage(a)},isPageLoaded:function(){return b.isPageLoaded(a)},onOpenNodeEditPanel:function(){return b.openNodeEditPanel(a)},onLinkViaTour:function(){return b.handleLinkButtonViaTour(a)},onLinkManually:function(){return b.handleLinkButtonManually()},onHideViaTour:function(){return b.handleHideButtonViaTour(a)},onLinkingProcessComplete:function(){return b.onButtonLinkingProcessComplete(a)},nodeId:c.id,isItemOfList:function(){return b.isItemOfList(a)}});this.assistantManager.startTask(d)},a.prototype.start=function(a){this.startTour(a)},a}();angular.module("siteGeneratorTourManagerInternal").service("unlinkedButtonTask",UnlinkedButtonTask);var SmartAssistTaskConf;!function(a){a.SOCIAL_DEFAULT_LINKS_ACTION={loadPage:0,loadEditPanel:1,hideOrUpdate:2,loadSocialsPanel:3,linkSocials:4,socialsLinked:5,socialsArehidden:6,hideSocialsGlobally:7,socialsAreGloballyHidden:8,someSocialsCouldntBeHidden:9},a.SocialDefaultLinksTaskBI={assistType:"smart assist",description:"socialDefaultLinksTask"};var b=function(b){var c=b.onLoadEditPanel,d=b.onOpenSocialsPanel,e=b.onLinkActionStarted,f=b.onLinkActionCompleted,g=b.isLoadPage,h=b.isPageLoaded,i=b.onLoadPage,j=b.isSocialsAppearInMultipleSections,k=b.onHideSocialsGlobally,l=b.someSectionsHaveOnlySocialsNode,m=b.currentSectionHaveOnlySocialsNode,n=(new builders.AssistantAction).withConditionalConf().customCondition(g,(new builders.AssistantAction).withCallbacks().onEnter(i).build()).and.withBehaviors().thatStartsAutoplayOnEnter().build(),o=(new builders.AssistantAction).withConditionalConf().customCondition(g,(new builders.AssistantAction).withBehaviors().thatWaitsForExpression(h).build()).and.withCallbacks().onEnter(c).and.withBehaviors().thatStopsAutoplayOnExit().build(),p=(new builders.AssistantAction).withTooltip().withContent("smart-assist.tour.socials-default-link.hide-or-update-step.content").thatOpensRight().withButton("hide-icons").label("smart-assist.tour.socials-default-link.hide-or-update-step.hide-icons-button").callback(k).withButton("update-links").label("smart-assist.tour.socials-default-link.hide-or-update-step.update-links-button").onClickGoTo(a.SOCIAL_DEFAULT_LINKS_ACTION.loadSocialsPanel).callback(e).and.withBehaviors().thatDelays(700).and.withBackdrop().thatIsInvisible().and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD).and.withTriggers().goToOnElementClick(builders.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD,a.SOCIAL_DEFAULT_LINKS_ACTION.linkSocials,void 0,void 0,e).stopOnBackdropClick().and.withConditionalConf().customCondition(l,(new builders.AssistantAction).withTooltip().withButton("hide-icons").onClickGoTo(a.SOCIAL_DEFAULT_LINKS_ACTION.someSocialsCouldntBeHidden).build(),(new builders.AssistantAction).withTooltip().withButton("hide-icons").onClickGoTo(a.SOCIAL_DEFAULT_LINKS_ACTION.socialsAreGloballyHidden).build()).customCondition(m,(new builders.AssistantAction).withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD_TOGGLE).and.withBehaviors().thatAllowsDialogInterruptions().build(),(new builders.AssistantAction).withTriggers().goToOnElementClick(builders.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD_TOGGLE,a.SOCIAL_DEFAULT_LINKS_ACTION.socialsArehidden).build()).and.withBI().withDescription("Connect your social accounts so people can follow you.").build(),q=(new builders.AssistantAction).withCallbacks().onEnter(d).and.withBehaviors().thatStartsAutoplayOnEnter().thatStopsAutoplayOnExit().build(),r=(new builders.AssistantAction).withTooltip().withContent("smart-assist.tour.socials-default-link.link-socials-step.content").thatOpensRight().and.withBackdrop().thatIsInvisible().and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.SOCIAL_PANEL_LIST).and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.SOCIAL_PANEL_HEADER).withAdditionalHighlight(builders.AssistantAction.HOOKS.SOCIAL_PANEL_CONTENT).and.withTriggers().stopOnBackdropClick().stopOnElementClick(builders.AssistantAction.HOOKS.SOCIAL_PANEL_X).and.withCallbacks().onExit(f).and.withBI().withDescription("Paste your social links here, instead of the Wix profiles, delete or add socials.").build(),s=(new builders.AssistantAction).withTooltip().withContent("smart-assist.tour.socials-default-link.socials-linked-step.content").thatOpensRight().withButton("done").label("smart-assist.tour.socials-default-link.socials-linked-step.done-button-text").completeOnClick().and.withBackdrop().thatIsInvisible().and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.SOCIAL_PANEL_LIST).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.SOCIAL_PANEL_LIST).and.withTriggers().completeOnBackdropClick().completeOnElementClick(builders.AssistantAction.HOOKS.SOCIAL_PANEL_LIST).and.withBI().withDescription("Nice! All your accounts are connected.").build(),t=(new builders.AssistantAction).withBehaviors().thatStartsAutoplayOnEnter().thatStopsAutoplayOnExit().and.withConditionalConf().customCondition(j,(new builders.AssistantAction).withBehaviors().thatGoesToIndexOnAutoPlay(a.SOCIAL_DEFAULT_LINKS_ACTION.hideSocialsGlobally).build(),(new builders.AssistantAction).withBehaviors().thatGoesToIndexOnAutoPlay(a.SOCIAL_DEFAULT_LINKS_ACTION.socialsAreGloballyHidden).build()).build(),u=(new builders.AssistantAction).withTooltip().withContent("smart-assist.tour.socials-default-link.hide-socials-globally.content").thatOpensRight().withButton("hide-all").label("smart-assist.tour.socials-default-link.hide-socials-globally.hide-all-button-text").callback(k).and.withConditionalConf().customCondition(l,(new builders.AssistantAction).withTooltip().withButton("hide-all").onClickGoTo(a.SOCIAL_DEFAULT_LINKS_ACTION.someSocialsCouldntBeHidden).build(),(new builders.AssistantAction).withTooltip().withButton("hide-all").onClickGoTo(a.SOCIAL_DEFAULT_LINKS_ACTION.socialsAreGloballyHidden).build()).and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD).and.withBackdrop().thatIsInvisible().and.withTriggers().goToOnElementClick(builders.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD_TOGGLE,a.SOCIAL_DEFAULT_LINKS_ACTION.hideOrUpdate).stopOnBackdropClick().and.withBI().withDescription("Social icons are hidden from this section. You can hide all the social icons from your website in a click").build(),v=(new builders.AssistantAction).withTooltip().withContent("smart-assist.tour.socials-default-link.socials-globally-hidden.content").thatOpensRight().withButton("done").label("smart-assist.tour.socials-default-link.socials-globally-hidden.done-button-text").completeOnClick().and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD).and.withBackdrop().thatIsInvisible().and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD).and.withTriggers().completeOnBackdropClick().completeOnElementClick(builders.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD).and.withBI().withDescription("Social icons are hidden").build(),w=(new builders.AssistantAction).withTooltip().withContent("smart-assist.tour.socials-default-link.socials-cant-be-hidden-step.content").thatOpensRight().withButton("done").label("smart-assist.tour.socials-default-link.socials-cant-be-hidden-step.done-button-text").completeOnClick().and.withBackdrop().thatIsInvisible().and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD).and.withTriggers().completeOnBackdropClick().completeOnElementClick(builders.AssistantAction.HOOKS.NODE_EDITOR_SOCIALS_FIELD).and.withBI().withDescription("Some social panels cant be hidden").build();return{id:"socialDefaultLinksTask",label:"socialDefaultLinksTask",BI:a.SocialDefaultLinksTaskBI,actions:[n,o,p,q,r,s,t,u,v,w],customData:{editMode:"smart assist"}}};angular.module("siteGeneratorTourManagerInternal").factory("socialDefaultLinksTaskConf",function(){return b})}(SmartAssistTaskConf||(SmartAssistTaskConf={}));var SocialDefaultLinksTask=function(){function a(a,b,c,d,e,f,g,h,i,j,k){this.assistantManager=a,this.applicationState=b,this.sitePartTypes=c,this.nodeEditorManager=d,this.modelTreeHelpers=e,this.pubSub=f,this.socialDefaultLinksTaskConf=g,this.pagesPanelManager=h,this.contentElementFieldManager=i,this.ReferenceFieldTypes=j,this.smartAssistHelpers=k}return a.$inject=["assistantManager","applicationState","sitePartTypes","nodeEditorManager","modelTreeHelpers","pubSub","socialDefaultLinksTaskConf","pagesPanelManager","contentElementFieldManager","ReferenceFieldTypes","smartAssistHelpers"],a.prototype.isIssueInBody=function(a){return this.modelTreeHelpers.getNodeSitePart(a)===this.sitePartTypes.BODY},a.prototype.isLoadPage=function(a){return this.isIssueInBody(a)},a.prototype.isPageLoaded=function(a){return this.applicationState.getPageNodeInFocus().id===a.containerPageId},a.prototype.loadPage=function(a){var b=this;this.applicationState.goToBuilder().then(function(){return b.applicationState.goToPage(a.containerPageId)})},a.prototype.setContentFocus=function(a){this.applicationState.setContentFocus(a.id,this.modelTreeHelpers.getNodeSitePart(a))},a.prototype.openSocialsPanel=function(a){this.setContentFocus(a),this.nodeEditorManager.loadSocialEditor()},a.prototype.openEditPanel=function(a){this.setContentFocus(a),this.applicationState.goToEditMode()},Object.defineProperty(a.prototype,"activeSocialsDefaultLinksIssues",{get:function(){return this.smartAssistHelpers.activeIssuesByIssueTypeId(SmartAssistConfNS.issueTypeIds.SOCIALS_DEFAULT_LINKS)},enumerable:!0,configurable:!0}),a.prototype.isSocialsAppearInMultipleSections=function(a){return this.activeSocialsDefaultLinksIssues.length>0},a.prototype.someSectionsHaveOnlySocialsNode=function(){var a=this;return this.modelTreeHelpers.getAllSocialsRelatedNodes().some(function(b){return a.nodeEditorManager.isLastVisibleField(b,a.ReferenceFieldTypes.SOCIAL)})},a.prototype.currentSectionHaveOnlySocialsNode=function(a){return this.nodeEditorManager.isLastVisibleField(a,this.ReferenceFieldTypes.SOCIAL)},a.prototype.hideSocialsGlobally=function(){var a=this,b=this.modelTreeHelpers.getAllSocialsRelatedNodes();this.nodeEditorManager.setReferenceFieldsVisibility(b,this.ReferenceFieldTypes.SOCIAL,!1,"social",BIOrigins.SmartAssistSocialsDefaultLinks).then(function(){return a.smartAssistHelpers.evaluateAllSocialRelated()})},a.prototype.startTour=function(a){var b=this,c=a.context,d=this.currentSectionHaveOnlySocialsNode(c),e=this.someSectionsHaveOnlySocialsNode(),f=this.socialDefaultLinksTaskConf({isLoadPage:function(){return b.isLoadPage(c)},isPageLoaded:function(){return b.isPageLoaded(c)},onLoadEditPanel:function(){return b.openEditPanel(c)},onOpenSocialsPanel:function(){return b.openSocialsPanel(c)},onLinkActionStarted:function(){return b.subscribeLinkChanges(a)},onLinkActionCompleted:function(){return b.unsubscribeLinkChanges()},onLoadPage:function(){return b.loadPage(c)},isSocialsAppearInMultipleSections:function(){return b.isSocialsAppearInMultipleSections(c)},onHideSocialsGlobally:function(){return b.hideSocialsGlobally()},someSectionsHaveOnlySocialsNode:function(){return e},currentSectionHaveOnlySocialsNode:function(){return d}});this.assistantManager.startTask(f)},a.prototype.goToDoneConnectedStep=function(){var a=SmartAssistTaskConf.SOCIAL_DEFAULT_LINKS_ACTION.socialsLinked;this.assistantManager.gotoActionInActiveTask(a)},a.prototype.linkChanged=function(a){var b=a.context;a.issueType.trigger(b)||this.goToDoneConnectedStep()},a.prototype.subscribeLinkChanges=function(a){var b=this,c=200,d=_.debounce(function(){return b.linkChanged(a)},c);this._unsubscribeLinkChanges=this.pubSub.subscribe(PubSub.events.SOCIAL_LINKS_UPDATED,d)},a.prototype.unsubscribeLinkChanges=function(){this._unsubscribeLinkChanges&&this._unsubscribeLinkChanges()},a.prototype.start=function(a){this.startTour(a)},a}();angular.module("siteGeneratorTourManagerInternal").service("socialDefaultLinksTask",SocialDefaultLinksTask);var SmartAssistTab=function(){function a(a,b,c,d){var e=this;this.smartAssistMenuService=a,this.publishService=b,this.menuService=c,this.flags=d,this.issuePageId=function(a){return a.pageInfo.pageId},this.issueSectionPosition=function(a){return a.pageInfo.sectionPosition},this.issuePageDividerExists=function(a,b){return Boolean(a[e.issuePageId(b)])},this.issueSectionDividerExists=function(a,b){return Boolean(a[e.issuePageId(b)].sectionDividers[e.issueSectionPosition(b)])},this.activeIssues=this.smartAssistMenuService.getIssues(),this.generalDividerList=this.initiateGeneralDivider(),this.pageDividerList=this.initiatePageDividers(),this.mutedIssues=[]}return a.$inject=["smartAssistMenuService","publishService","menuService","flags"],Object.defineProperty(a.prototype,"displayEmptyState",{get:function(){return this.smartAssistMenuService.shouldDisplayEmptyState()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"generalIssuesExist",{get:function(){return this.generalDividerList.length>0&&!this.issueListComplete(this.generalDividerList)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pageRelatedIssuesExist",{get:function(){return this.pageDividerList.length>0},enumerable:!0,configurable:!0}),a.prototype.initiateGeneralDivider=function(){return this.activeIssues.filter(function(a){return!a.pageInfo})},a.prototype.onMuteIssue=function(a){this.mutedIssues.push(a),a.mute()},a.prototype.isMuted=function(a){return-1!==this.mutedIssues.indexOf(a)},a.prototype.allPageIssuesAreComplete=function(a){var b=this;return a.sections.every(function(a){return b.allSectionIssuesAreComplete(a)})},a.prototype.allSectionIssuesAreComplete=function(a){return this.issueListComplete(a.issues)},a.prototype.issueListComplete=function(a){var b=this;return a.every(function(a){return b.isMuted(a)})},a.prototype.buildPageDividers=function(){var a=this,b={};return this.activeIssues.filter(function(a){return Boolean(a.pageInfo)}).forEach(function(c){a.issuePageDividerExists(b,c)?a.issueSectionDividerExists(b,c)?b[a.issuePageId(c)].sectionDividers[a.issueSectionPosition(c)].issues.push(c):b[a.issuePageId(c)].sectionDividers[a.issueSectionPosition(c)]=a.createSectionDivider(c):b[a.issuePageId(c)]=a.createPageDivider(c)}),b},a.prototype.createPageDivider=function(a){return{pageName:a.pageInfo.pageName,sectionDividers:(b={},b[this.issueSectionPosition(a)]=this.createSectionDivider(a),b)};var b},a.prototype.createSectionDivider=function(a){return{sectionPosition:a.pageInfo.sectionPosition,sectionName:a.pageInfo.sectionName,issues:[a]}},a.prototype.buildPageDividerArray=function(a){var b=this;return this.sortPageDivider(a).map(function(c){return{pageId:c,pageName:a[c].pageName,sections:b.buildSectionDividerArray(a[c])}})},a.prototype.buildSectionDividerArray=function(a){return this.sortSectionDividers(a.sectionDividers).map(function(b){return a.sectionDividers[b]})},a.prototype.sortSectionDividers=function(a){return Object.keys(a).sort()},a.prototype.sortPageDivider=function(a){var b=this.menuService.getMenuItems(!1).map(function(a){return a.id});return Object.keys(a).sort(function(a,c){return b.indexOf(a)-b.indexOf(c)})},a.prototype.initiatePageDividers=function(){var a=this.buildPageDividers();return this.buildPageDividerArray(a)},a}();angular.module("siteGeneratorTourManagerInternal").component("smartAssistTab",{controller:SmartAssistTab,templateUrl:"views/assistant/smart-assist-tab.html",bindings:{goToAssistantBucket:"&"}});var SmartAssistBadge=function(){function a(a,b,c){var d=this;this.SmartAssistManager=a,this.$scope=b,this.smartAssistMenuService=c,b.$watch(function(){return d.SmartAssistManager.getNumberOfActiveIssues()},function(a){d.updateNumOfIssues(a)})}return a.$inject=["SmartAssistManager","$scope","smartAssistMenuService"],Object.defineProperty(a.prototype,"hide",{get:function(){return this.smartAssistMenuService.shouldDisplayEmptyState()},enumerable:!0,configurable:!0}),a.prototype.updateNumOfIssues=function(b){this.displayedNumOfIssues=b<=a.MaxToDisplay?b:a.MaxToDisplay+"+"},a}();SmartAssistBadge.MaxToDisplay=9,angular.module("siteGeneratorTourManagerInternal").component("smartAssistBadge",{controller:SmartAssistBadge,templateUrl:"views/assistant/smart-assist-badge.html"});var SmartAssistIssue=function(){function a(){}return a}();angular.module("siteGeneratorTourManagerInternal").component("smartAssistIssue",{controller:SmartAssistIssue,templateUrl:"views/assistant/smart-assist-issue.html",bindings:{text:"<",icon:"<",onFix:"&",onMute:"&"}});var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},SmartAssistMenuService=function(){function a(a,b,c,d){this.SmartAssistManager=a,this.smartAssistConf=b,this.publishService=c,this.consumerBiLogger=d,this.issueTypeIdToTaskBIDescription=(e={},e[SmartAssistConfNS.issueTypeIds.SOCIALS_DEFAULT_LINKS]=SmartAssistTaskConf.SocialDefaultLinksTaskBI.description,e[SmartAssistConfNS.issueTypeIds.UNLINKED_BUTTON]=SmartAssistTaskConf.UnlinkedButtonTaskBI.description,e);var e}return a.$inject=["SmartAssistManager","smartAssistConf","publishService","consumerBiLogger"],a.prototype.getIssues=function(){var a=this,b=this.SmartAssistManager.getActiveIssues();return Object.keys(b).map(function(a){return b[a]}).map(function(b){return __assign({id:b.id,issueTypeId:b.issueType.id},a.getIssueUIData(b),{fix:function(){return b.issueType.action(b)},mute:function(){return a.mute(b)}})})},a.prototype.shouldDisplayEmptyState=function(){return!this.publishService.isSitePublished()||!this.issuesExist},Object.defineProperty(a.prototype,"issuesExist",{get:function(){return this.getIssues().length>0},enumerable:!0,configurable:!0}),a.prototype.getIssueUIData=function(a){return this.smartAssistConf.getIssueUIDataBuilder(a.issueType.id)(a.context)},a.prototype.mute=function(a){this.consumerBiLogger.tour.smartAssistCardMute(this.issueTypeIdToTaskBIDescription[a.issueType.id]),this.SmartAssistManager.mute([a])},a}();angular.module("siteGeneratorTourManagerInternal").service("smartAssistMenuService",SmartAssistMenuService);var SmartAssistEmptyState=function(){function a(a){this.smartAssistState=a}return a.$inject=["smartAssistState"],Object.defineProperty(a.prototype,"issuesExisted",{get:function(){return this.smartAssistState.issuesExisted},enumerable:!0,configurable:!0}),a}();angular.module("siteGeneratorTourManagerInternal").component("smartAssistEmptyState",{controller:SmartAssistEmptyState,templateUrl:"views/assistant/smart-assist-empty-state.html",bindings:{goToAssistantBucket:"&"}});var ConfiguratorManager=function(){function a(a,b,c){this.$window=a,this.$injector=b,this.cabbie=c,this.KEY_BINDINGS={S:{name:"Site Converter",data:"siteConverterConf"}},this.isActive=!1}return a.$inject=["$window","$injector","cabbie"],a.prototype.init=function(){this.registerKeyListeners()},a.prototype.registerKeyListeners=function(){var a=this,b=_.debounce(function(b){if((b.metaKey||b.ctrlKey)&&b.shiftKey&&b.altKey&&!a.isActive){var c=String.fromCharCode(b.keyCode),d=a.KEY_BINDINGS[c];d&&(a.isActive=!0,a.cabbie.show({element:"configurator",target:"body",attributes:{name:d.name,conf:a.$injector.get(d.data)},position:{positionX:builders.AssistantPositionX.Right,positionY:builders.AssistantPositionY.Center,offsetY:-200}}).then(function(){return a.isActive=!1}))}},500);angular.element(this.$window).keydown(b)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("configuratorManager",ConfiguratorManager);var Configurator=function(){function a(a){this.$log=a,angular.element(".intro-tooltip-arrow").hide()}return a.$inject=["$log"],a.prototype.onValueChange=function(a,b){this.$log.log("Changed Configuration",a,b),_.set(this.conf,a,b)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("configurator",{controller:Configurator,templateUrl:"views/configurator/configurator.html",bindings:{name:"=",conf:"="}});try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/configurator/configurator.html","<div class='configurator tour-step'>\n<div class='configuration-title p8-label'>\n{{:: $ctrl.name }}\n</div>\n<configuration-field conf='[confKey, confValue]' ng-repeat='(confKey, confValue) in $ctrl.conf' on-change='$ctrl.onValueChange(changedKey, changedValue)'></configuration-field>\n</div>\n")}]);var ConfigurationField=function(){function a(){}return a.prototype.onValueChange=function(a,b){isNaN(a)||(a=+a),this.onChange({changedKey:this.configurationKey+(b?"."+b:""),changedValue:a})},Object.defineProperty(a.prototype,"configurationKey",{get:function(){return this.conf[0]},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"configurationValue",{get:function(){return this.conf[1]},set:function(a){this.conf[1]=a},enumerable:!0,configurable:!0}),a.prototype.isPrimitive=function(){var a=typeof this.configurationValue;return"string"===a||"number"===a},a.prototype.getMarginStyle=function(){return this.margin?this.margin+"rem":0},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("configurationField",{controller:ConfigurationField,templateUrl:"views/configurator/configuration-field.html",bindings:{conf:"<",onChange:"&",margin:"=?"}});var OpenSiteLoader=function(){function a(a,b,c,d,e){this.wixAngularTopology=a,this.$scope=b,this.$translate=c,this.$timeout=d,this.$interval=e,this.currentMessageIndex=0}return a.$inject=["wixAngularTopology","$scope","$translate","$timeout","$interval"],a.prototype.$postLink=function(){this.$messages=$(".loader-message")},a.prototype.$onDestroy=function(){},a.prototype.prepareNextMessage=function(){var b=Math.floor(Math.random()*a.MessageCount)+1,c="builder.open-site-loader.message"+b,d=this.$translate.instant(c),e=this.currentMessage!==d;d&&e?this.animateMessage(d):this.prepareNextMessage()},a.prototype.animateMessage=function(a){var b=this,c=this.$messages.eq(this.currentMessageIndex);this.$messages.not(c).css({opacity:0,transform:"translateX(-100px)"}),c.css({opacity:0,transform:"translateX(100px)"}).one("transitionend",function(){b.currentMessage=a,b.$scope.$digest(),c.css({opacity:1,transform:"translateX(0)"})}),this.currentMessageIndex=Math.abs(1-this.currentMessageIndex)},a.prototype.getVideoUrl=function(){return this.wixAngularTopology.staticsUrl+"/videos/loaders/"+((window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx), only screen and (min-resolution: 75.6dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min--moz-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)").matches)||window.devicePixelRatio&&window.devicePixelRatio>=2)&&/(iPad|iPhone|iPod)/g.test(navigator.userAgent)?"open-site-2x.mp4":"open-site.mp4")},a}();OpenSiteLoader.MessageCount=20,
OpenSiteLoader.MessageInterval=7500,angular.module("siteGeneratorStaticsConsumerAppInternal").component("openSiteLoader",{templateUrl:"views/loaders/open-site-loader.html",controller:OpenSiteLoader});var PagesPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z=this;this.CONSUMER_DIALOGS=a,this.applicationParameters=b,this.modelTree=c,this.tpaService=d,this.initService=e,this.pagesManager=f,this.notification=g,this.previewService=h,this.CcDialogBuilder=i,this.$translate=j,this.$state=k,this.undoRedo=l,this.menuService=m,this.flags=n,this.applicationState=o,this.$timeout=p,this.storyServices=q,this.consumerBiLogger=r,this.consumerBiLoggerHelpers=s,this.spinnerService=t,this.consumerMenu=u,this.$stateParams=v,this.documentServicesMediator=w,this.rendererSeo=x,this.pubSub=y,this.saveChanges=function(){z.consumerMenu.calcMenuAnchors().then(function(){z.undoRedo.captureOperation()})},this.togglePageVisibility=function(a){var b=z.modelTree.getPageNodeById(a);z.pagesManager.togglePageVisibility(b),b.hidePage?(z.notification.show("toasters.page-hidden"),z.flags.smartAssist&&z.pubSub.fire(PubSub.events.PAGE_HIDDEN,b)):z.flags.smartAssist&&z.pubSub.fire(PubSub.events.PAGE_SHOWN,b),z.consumerBiLogger.pagesManager.hideShowPage(b.hidePage?"hide":"show",z.tpaService.getAppIdByPageNode(b)),z.saveChanges()},this.handleNodesRendererKeydown=function(a,b){var c=a.currentTarget.value;z.nameIsValid(c)&&(z.pageNameOldValue[b.id]=c)},this.handleNodesRendererKeyup=function(a,b){var c=a.currentTarget.value;z.nameIsValid(c)||(b.error||(z.$timeout(function(){b.error=!0},0),z.$timeout(function(){b.error=!1},5e3)),a.currentTarget.value=z.pageNameOldValue[b.id],b.name=z.pageNameOldValue[b.id])},this.isErrorInPageName=new Object,this.pageNameOldValue=new Object,this.pageNameMaxCharacters=100,this.treeOptions={dropped:function(a){var b=a.source.nodeScope.$modelValue,c=a.source.nodesScope.$modelValue;if(b.children.length>0){var d=_.findIndex(b.children,{id:b.id});if(d>-1)return c.push(b.children[d]),void b.children.splice(d,1)}z.goToPage(a.source.nodeScope.item);var e=z.modelTree.getNodeById(a.source.nodeScope.item.id);return z.consumerBiLogger.pagesManager.reorderPage(a.dest.index,a.source.index,z.tpaService.getAppIdByPageNode(e)),z.saveChanges(),z.$timeout(function(){return z.menuService.refresh()}),!0}},this.pageNameMaxLength=DocumentServicesMediator.GENERAL_VALIDATIONS.PAGE_NAME_MAX_LENGTH}return a.$inject=["CONSUMER_DIALOGS","applicationParameters","modelTree","tpaService","initService","pagesManager","notification","previewService","CcDialogBuilder","$translate","$state","undoRedo","menuService","flags","applicationState","$timeout","storyServices","consumerBiLogger","consumerBiLoggerHelpers","spinnerService","consumerMenu","$stateParams","documentServicesMediator","rendererSeo","pubSub"],a.prototype.nameIsValid=function(a){return a.length<=DocumentServicesMediator.GENERAL_VALIDATIONS.PAGE_NAME_MAX_LENGTH&&!this.documentServicesMediator.hasEmoji(a)},a.prototype.showRenameForm=function(a,b,c){this.canManagePage(c)&&(b.$show(),a.stopPropagation())},a.prototype.removeDuplicateItems=function(a){if(_.unique(a,function(a){return a.id}).length!==a.length){var b=[];a.forEach(function(c,d){a.slice(d+1).forEach(function(a){c.id===a.id&&b.push(d)})}),b.forEach(function(b){return a.splice(b,1)})}},a.prototype.$onInit=function(){var a=this;this.initService.loaded().then(function(){var b=a.consumerBiLoggerHelpers.popPanelSource();if(a.consumerBiLogger.pagesManager.pagesPanelIsLoaded(b||"second topbar"),a.flags.dataFixerMenuItems&&a.removeDuplicateItems(a.menuService.menuItems),a.applicationState.isSelectedPageMode()){var c=a.$stateParams.pageId;if(c){var d=a.modelTree.getPageNodeById(c);a.goToPage(d)}}})},a.prototype.$onDestroy=function(){this.consumerBiLogger.pagesManager.pagesPanelWasClosed("pages panel")},a.prototype.setSelectedPage=function(a){return this.applicationState.clearContentFocus(),this.storyServices.story.selectedPage=a,this.storyServices.recalculateCurrentPage()},a.prototype.openActionsDialog=function(a,b,c){this.consumerBiLogger.pagesManager.clickOnSettings(b.name),this.idForActions=b.id,this.activePageRenameForm=c,this.showDialog(a)},a.prototype.closePagesPanel=function(){this.$state.go("^"),this.flags.keepPagesPanelOpen&&(this.applicationState.shouldReopenPagesPanel=!1)},a.prototype.openPagesPanelHelp=function(){this.CcDialogBuilder.showSupportIframe(this.getHelpPopupLink(),this.CONSUMER_DIALOGS.PAGES_PANEL_HELP)},a.prototype.getHelpPopupLink=function(){return this.$translate.instant(this.applicationState.isInMobileEditMode()?"help.pages.mobile":"help.pages.menu")},a.prototype.goToDesktopEditMode=function(){var a=this;return this.consumerBiLoggerHelpers.setPanelSource("pages panel"),this.consumerBiLogger.builder.switchBuilderTypeMobileDesktopClick("pages panel","desktop"),this.consumerBiLoggerHelpers.resetLoadTime(),this.applicationState.disableMobileEditor().then(function(){var b=a.consumerBiLoggerHelpers.popPanelSource();b&&a.consumerBiLogger.builder.switchBuilderTypeMobileDesktopSuccess(b,"desktop")}).then(function(){return a.$state.go(config.STATES.BUILDER_ADD_PAGE)})},a.prototype.goToDesktopPage=function(a){var b=this;return this.pagesManager.goToPage(a.id).then(function(){return b.storyServices.story.selectedPage=a.id})},a.prototype.goToPage=function(a){var b=this;if(this.storyServices.story.selectedPage!==a.id){this.applicationState.goToPage(a.id);var c=this.modelTree.getNodeById(a.id),d=this.tpaService.getAppIdByPageNode(c);this.consumerBiLogger.pagesManager.clickOnPage(a.name,d,"pages panel");var e;e=this.applicationState.isInMobileEditMode()?this.applicationState.goToMobilePage(a.id):this.goToDesktopPage(a),e.then(function(){return b.$state.current.name===config.STATES.BUILDER_PAGES_SEO&&b.$state.go("^"),b.setSelectedPage(a.id)}).then(function(){b.consumerBiLogger.pagesManager.gotoPageSuccess(a.name,d,"pages panel")}).finally(function(){b.spinnerService.waitForStop().then(function(){var a=b.previewService.getOverlayContainer();a&&(a.scrollTop=0)})})}},a.prototype.addPage=function(){this.consumerBiLogger.pagesManager.addPageClick("pages-panel"),this.applicationState.goToAddPageMode(),this.flags.keepPagesPanelOpen&&(this.applicationState.shouldReopenPagesPanel=!0)},a.prototype.afterRename=function(a,b){var c=b.name,d=b.id;if(this.nameIsValid(c)){var e=this.modelTree.getNodeById(d);if(!e)throw d+" without a corresponding node";this.pagesManager.renamePage(d,c),this.consumerBiLogger.pagesManager.renamePage(this.tpaService.getAppIdByPageNode(e)),this.saveChanges()}else a.$data=this.pageNameOldValue[b.id],b.name=this.pageNameOldValue[b.id];this.$timeout(function(){b.error=!1},0)},a.prototype.canManagePage=function(a,b){void 0===b&&(b=!0);var c=this.modelTree.getNodeById(a.id);if(!c||!c.tpaExtraPage)return!!c;var d=this.tpaService.getNaiveType(c.tpaExtraPage);return b&&"hidden"===this.tpaService.sectionType(d)},a.prototype.isContainerOfUnmanageable=function(a){var b=this.modelTree.getNodeById(a.id);return b&&b.tpaSection},a.prototype.iconName=function(a){var b=this.modelTree.getNodeById(a.id);if(!b)return"";var c="";return this.pagesManager.isHome(a.id)?c="cc-icon-home":!b.tpaExtraPage&&b.alias&&b.alias===this.applicationParameters.tpaTypes.Blog.type?c="cc-icon-blog":!b.tpaExtraPage&&b.alias&&b.alias===this.applicationParameters.tpaTypes.Stores.type?c="cc-icon-store":!b.tpaExtraPage&&b.alias&&b.alias===this.applicationParameters.tpaTypes.Bookings.type&&(c="cc-icon-booking"),c},a.prototype.getPageIdForSeo=function(){return this.idForActions||this.storyServices.story.selectedPage},a.prototype.manipulateEvent=function(a){var b=angular.element(a.target).offset();return a.clientX=Math.round(b.left),a.clientY=Math.round(b.top),a},a.prototype.showDialog=function(a){var b=this,c={idForActions:this.idForActions,saveChanges:this.saveChanges,togglePageVisibility:this.togglePageVisibility,activePageRenameForm:this.activePageRenameForm,setSelectedPage:function(a){return b.setSelectedPage(a)}},d={parent:angular.element(document.body),hasBackdrop:!1,clickOutsideToClose:!0,templateUrl:"views/page-menu-dialog.html",controller:PageMenuDialog,controllerAs:"$ctrl",locals:{$event:this.manipulateEvent(a),selected:c}};this.CcDialogBuilder.show(d)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("pagesPanel",{controller:PagesPanel,templateUrl:"views/pages-panel.html"});var PagesPanelSplit=function(){function a(a,b,c){var d=this;this.menuService=a,this.pagesPanelManager=b,this.$timeout=c,this.handleNodesRendererKeydown=function(a,b){var c=a.currentTarget.value;d.pagesPanelManager.nameIsValid(c)&&(d.pageNameOldValue[b.id]=c)},this.handleNodesRendererKeyup=function(a,b){var c=a.currentTarget.value;d.pagesPanelManager.nameIsValid(c)||(b.error||(d.$timeout(function(){b.error=!0},0),d.$timeout(function(){b.error=!1},5e3)),a.currentTarget.value=d.pageNameOldValue[b.id],b.name=d.pageNameOldValue[b.id])},this.togglePageVisibility=function(a){d.pagesPanelManager.togglePageVisibility(a)},this.pageNameOldValue=new Object,this.treeOptions={dropped:function(a){var b=a.source.nodeScope.$modelValue,c=a.source.nodesScope.$modelValue;if(b.children.length>0){var e=_.findIndex(b.children,{id:b.id});if(e>-1)return c.push(b.children[e]),void b.children.splice(e,1)}return d.pagesPanelManager.reorderPage(a.source.nodeScope.item,a.dest.index,a.source.index),!0}}}return a.$inject=["menuService","pagesPanelManager","$timeout"],a.prototype.$onInit=function(){this.pagesPanelManager.onMountPanel()},a.prototype.$onDestroy=function(){this.pagesPanelManager.onUnmountPanel()},Object.defineProperty(a.prototype,"menuItems",{get:function(){return this.pagesPanelManager.menuItems},enumerable:!0,configurable:!0}),a.prototype.showRenameForm=function(a,b,c){this.canManagePage(c)&&(b.$show(),a.stopPropagation())},a.prototype.afterRename=function(a,b){var c=b.name,d=b.id;this.pagesPanelManager.nameIsValid(c)?this.pagesPanelManager.renamePage(d,c):(a.$data=this.pageNameOldValue[b.id],b.name=this.pageNameOldValue[b.id]),this.$timeout(function(){b.error=!1},0)},a.prototype.openActionsDialog=function(a,b,c){this.pagesPanelManager.openActionsDialog(a,b,c)},a.prototype.isSelectedPage=function(a){return this.pagesPanelManager.isSelectedPage(a)},a.prototype.isHiddenPage=function(a){return this.pagesPanelManager.isHiddenPage(a)},a.prototype.getMenuItems=function(a){return this.pagesPanelManager.getMenuItems(a)},a.prototype.closePagesPanel=function(){this.pagesPanelManager.closePagesPanel()},a.prototype.openPagesPanelHelp=function(){this.pagesPanelManager.openPagesPanelHelp()},a.prototype.goToDesktopEditMode=function(){return this.pagesPanelManager.goToDesktopEditMode()},a.prototype.goToPage=function(a){this.pagesPanelManager.goToPage(a)},a.prototype.addPage=function(){this.pagesPanelManager.addPage()},a.prototype.isInMobileEditMode=function(){return this.pagesPanelManager.isInMobileEditMode()},a.prototype.canManagePage=function(a,b){return void 0===b&&(b=!0),this.pagesPanelManager.canManagePage(a,b)},a.prototype.isContainerOfUnmanageable=function(a){return this.pagesPanelManager.isContainerOfUnmanageable(a)},a.prototype.iconName=function(a){return this.pagesPanelManager.iconName(a)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("pagesPanelSplit",{controller:PagesPanelSplit,templateUrl:"views/pages-panel-split.html"});var PageMenuDialog=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){this.$q=b,this.undoRedo=c,this.CONSUMER_DIALOGS=d,this.notification=e,this.tpaService=f,this.selected=g,this.flags=h,this.wizardService=i,this.previewService=j,this.modelTree=k,this.sectionManager=l,this.pagesManager=m,this.menuService=n,this.$translate=o,this.nodeManipulationService=p,this.pagesPanelManager=q,this.simpleSolutionManager=r,this.CcDialogBuilder=s,this.consumerBiLogger=t,this.applicationState=u,this.consumerMenu=v,this.applicationParameters=w,this.storyServices=x,this.mergedHeaderService=y,this.mergedHeaderValidator=z,this.pubSub=A;var B=k.getNodeById(g.idForActions);this.tpaType=B.tpaSection||B.tpaExtraPage,this.isHiddenTpa="hidden"===this.tpaService.sectionType(this.tpaType),this.position={top:a.clientY-30,left:a.clientX+16}}return a.$inject=["$event","$q","undoRedo","CONSUMER_DIALOGS","notification","tpaService","selected","flags","wizardService","previewService","modelTree","sectionManager","pagesManager","menuService","$translate","nodeManipulationService","pagesPanelManager","simpleSolutionManager","CcDialogBuilder","consumerBiLogger","applicationState","consumerMenu","applicationParameters","storyServices","mergedHeaderService","mergedHeaderValidator","pubSub"],a.prototype.hasNestedPages=function(){var a=this.menuService.getLinkToPage(this.selected.idForActions);return a&&!a.parent&&!_.isEmpty(a.item.children)},a.prototype.goToPageSeo=function(a){this.CcDialogBuilder.hide(),this.applicationState.goToPageSeo(a)},a.prototype.setAsHomepage=function(){this.CcDialogBuilder.hide(),this.flags.mergedHeader&&this.unmergePrevHomePage(),this.pagesManager.setHomeById(this.selected.idForActions),this.consumerBiLogger.pagesManager.clickOnSetPageAsHomepage(),this.selected.saveChanges()},a.prototype.unmergePrevHomePage=function(){var a=this.modelTree.getNodeById(this.modelTree.homePageId);this.mergedHeaderService.isHeaderMerged(a)&&(a.dirty=!0,this.mergedHeaderValidator.unmerge(a))},a.prototype.notDeletable=function(){return this.isHomepage()||this.singlePage()},a.prototype.singlePage=function(){return _.keys(this.pagesManager.getNameToPageMap()).length<2},a.prototype.isHomepage=function(){return this.pagesManager.isHome(this.selected.idForActions)},a.prototype.rename=function(){this.CcDialogBuilder.hide(),this.selected.activePageRenameForm.$show()},a.prototype.duplicatePage=function(){var a=this;this.CcDialogBuilder.hide();var b=this.modelTree.getNodeById(this.selected.idForActions);this.sectionManager.duplicatePage(b).then(function(){a.selected.saveChanges()})},a.prototype.toggleVisibility=function(){this.CcDialogBuilder.hide(),this.selected.togglePageVisibility(this.selected.idForActions)},a.prototype.getTpaIcon=function(a){return"cc-icon-"+{Blog:"blog",Stores:"store",Bookings:"booking"}[a]},a.prototype.toggleSubMainPage=function(){this.CcDialogBuilder.hide(),this.menuService.toggleNestingById(this.selected.idForActions);var a=this.modelTree.getNodeById(this.selected.idForActions);this.consumerBiLogger.pagesManager.setPageAsSubpageMainPage(this.menuService.isOuterLevelById(this.selected.idForActions)?"subpage to main page":"main page to subpage ",this.tpaService.getAppIdByPageNode(a)),this.selected.saveChanges()},a.prototype.confirmPageDelete=function(){var a=this,b={heading:this.$translate.instant("popups.page-delete-confirmation.heading"),text:this.$translate.instant("popups.page-delete-confirmation.text"),acceptButtonText:this.$translate.instant("general.delete"),rejectButtonText:this.$translate.instant("general.cancel"),biDialogName:this.CONSUMER_DIALOGS.PAGE_DELETE_CONFIRM};return this.CcDialogBuilder.showNegativeConfirmation(b).then(function(){a.CcDialogBuilder.hide()})},a.prototype.confirmTpaDelete=function(a){var b=this,c={heading:this.$translate.instant("popups.tpa-delete-confirmation.heading",{TPA:a}),text:this.$translate.instant("popups.tpa-delete-confirmation.text"),acceptButtonText:this.$translate.instant("general.delete"),rejectButtonText:this.$translate.instant("general.cancel"),biDialogName:this.CONSUMER_DIALOGS.TPA_PAGE_DELETE_CONFIRM};return this.CcDialogBuilder.showNegativeConfirmation(c).then(function(){b.CcDialogBuilder.hide()})},a.prototype.cleanTpaWidgets=function(a){return this.pagesPanelManager.cleanTpaWidgets(a)},a.prototype.deletePage=function(){var a=this;this.CcDialogBuilder.hide();var b=this.modelTree.getNodeById(this.selected.idForActions),c=this.tpaService.getAppIdByPageNode(b);this.consumerBiLogger.pagesManager.clickOnDeletePage(c);var d=this.applicationState.isSilent()?this.$q.resolve():this.tpaType?this.confirmTpaDelete(this.tpaType):this.confirmPageDelete();this.flags.deletePageRefactor?d.then(function(){return a.pagesPanelManager.deletePage(a.selected.idForActions)}).then(function(){a.notification.show("toasters.page-deleted","general.undo",function(){a.undoRedo.undo()})}):d.then(function(){if(!a.pagesManager.isHome(a.selected.idForActions)){var b=a.modelTree.getNodeById(a.selected.idForActions),c=a.$q.defer();return a.tpaType&&(_.each(a.pagesManager.getTpaExtraPages(a.tpaType),function(b){b.id!==a.selected.idForActions&&a.nodeManipulationService.deletePageById(b.id,"body",_.noop,_.noop)}),a.cleanTpaWidgets(a.tpaType)),a.nodeManipulationService.deletePageById(a.selected.idForActions,"body",a.selected.setSelectedPage,function(){a.flags.smartAssist&&a.pubSub.fire(PubSub.events.PAGE_DELETED,b),c.resolve()}),c.promise}}).then(function(){return a.consumerMenu.calcMenuAnchors()}).then(function(){return a.undoRedo.captureOperation()}).then(function(){if(a.tpaType===a.applicationParameters.tpaTypes.Stores.type)return a.sectionManager.recalculateSiteHeader().then(function(){return a.storyServices.reRender("header")})}).then(function(){a.applicationState.isSupportStaffEditing()||a.previewService.waitForChanges().then(function(){var b=!!a.flags.mobileEditor;return a.wizardService.publishStory(void 0,void 0,b).catch(function(){return a.$q.resolve()})})}).then(function(){a.consumerBiLogger.pagesManager.deletePageSuccess(c),a.notification.show("toasters.page-deleted","general.undo",function(){a.undoRedo.undo()})})},a}(),Builder=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=this;this.$element=a,this.$rootScope=b,this.$scope=c,this.initService=d,this.spinnerService=e,this.$state=f,this.applicationState=g,this.modelTree=h,this.getStageBackgroundColors=i,this.colorationUtils=j,this.flags=k,this.assistantManager=l,this.assistantTaskFetcher=m,this.assistantUtils=n,this.$timeout=o,this.consumerBiLogger=p,this.applicationParameters=q,this.storyServices=r,this.logoExtractionPopupService=s,this.$window=t,this.publishService=u,this.$q=v,this.$translate=w,this.renderBuilder=!1,this.showBuilder=!1,this.panelWidth=0,this.$onDestroy=function(){return x.stateChangeWatcher()},this.$postLink=function(){return x.adjustBuilderLayoutOnStateChange(x.$state.$current.data)},this.onStateChange=function(a,b){return x.adjustBuilderLayoutOnStateChange(b.data)},this.isPreview=function(){return x.applicationState.isPreviewDisplay()},this.shouldShowPreviewToggle=function(){return x.isPreview()&&!x.applicationState.previewRevision()&&!x.$window.adiRunningOnServer},this.isMobilePreviewDisplay=function(){return x.applicationState.isMobilePreviewDisplay()},this.getMobilePreviewUrl=function(){return x.applicationState.mobilePreviewUrl()},this.getMobilePreviewPageId=function(){return x.applicationState.mobilePreviewPageId()},this.shouldShowEditModeToggleControls=function(){return x.flags.mobileEditor},this.waitForBuilderState().then(function(a){var c=a.event,e=a.targetState;d.isBuilderValidState()?x.initBuilder():g.goToIntro(),x.onStateChange(c,e),x.stateChangeWatcher=b.$on("$stateChangeStart",x.onStateChange)}),this.setupBeforeUnload(),this.setupMobileEditorTransitions(),this.$timeout(function(){return x.renderBuilder=!0},5e3)}return a.$inject=["$element","$rootScope","$scope","initService","spinnerService","$state","applicationState","modelTree","getStageBackgroundColors","colorationUtils","flags","assistantManager","assistantTaskFetcher","assistantUtils","$timeout","consumerBiLogger","applicationParameters","storyServices","logoExtractionPopupService","$window","publishService","$q","$translate"],a.prototype.setupMobileEditorTransitions=function(){var a=this;this.$rootScope.$on("switchEditModeStart",function(b,c,d){a.startLoadingAnimation(d)}),this.$rootScope.$on("switchEditModeEnd",function(){a.$timeout(function(){return a.finishLoadingAnimation()},ProgressBar.PROGRESS_BAR_FINISH_LOADING_DURATION)})},a.prototype.setupBeforeUnload=function(){var a=this;this.flags.debugMode||this.flags.previewRevision||this.flags.lessBeforeUnloadWarnings||(this.$window.onbeforeunload=function(){return a.$translate.instant("general.leave-note")})},a.prototype.startLoadingAnimation=function(a){this.$element.addClass("edit-mode-transition"),this.$element.addClass(a?"mobile-dimensions":"desktop-dimensions"),this.applicationState.isInMobileEditMode()&&a||this.$element.addClass("builder-panel-fade-out"),this.flags.mobileEditorBrowserHeight&&this.$element.find(".stage-cover").css("visibility","visible")},a.prototype.finishLoadingAnimation=function(){this.$element.removeClass("edit-mode-transition mobile-dimensions desktop-dimensions builder-panel-fade-out"),this.flags.mobileEditorBrowserHeight&&this.$element.find(".stage-cover").css("visibility","hidden")},a.prototype.waitForBuilderState=function(){var a=this,b=this.$q.defer();if(this.isBuilderState(this.$state.$current))b.resolve({event:{},targetState:this.$state.$current});else var c=this.$rootScope.$on("$stateChangeSuccess",function(d,e){a.isBuilderState(e)&&(c(),b.resolve({event:d,targetState:e}))});return b.promise},a.prototype.isBuilderState=function(a){return a&&a.name.startsWith(builder.BUILDER_STATES.BUILDER)},a.prototype.adjustBuilderLayoutOnStateChange=function(a){this.panelWidth=0,a&&(this.applicationState.isInMobileEditMode()&&a.mobilePanelWidth?this.panelWidth=a.mobilePanelWidth:a.panelWidth&&(this.panelWidth=a.panelWidth))},a.prototype.initBuilder=function(){var a=this;this.renderBuilder=!0,this.showBuilder=!0,this.flags.newPreloader||this.spinnerService.waitForMe("initBuilder"),this.initService.init().then(function(){return a.watchBackgroundColorChange()}).finally(function(){a.spinnerService.isFirstTime=!1,a.flags.newPreloader||a.spinnerService.imDone("initBuilder")})},a.prototype.watchBackgroundColorChange=function(){var a=this;return this.colorationUtils.initialize().then(function(){a.$scope.$watch(function(){return a.colorationUtils.getPaletteColors()},function(b){return a.updateStageBackgroundColors(b)})})},a.prototype.updateStageBackgroundColors=function(b){var c=this.$window,d=this.getStageBackgroundColors(b),e=d.gradientStart,f=d.gradientEnd,g=d.active,h=d.hover,i=c.document.getElementById(a.STAGE_BACKGROUND_STYLE_ID);i?i.parentNode.removeChild(i):(i=c.document.createElement("style"),i.setAttribute("id",a.STAGE_BACKGROUND_STYLE_ID)),i.innerHTML="\n      .stage {\n        background: linear-gradient(45deg, rgba("+e.rgba()+"), rgba("+f.rgba()+")) !important;\n      }\n      .active-highlight {\n        background: rgba("+g.rgba()+") !important;\n      }\n      .hover-highlight {\n        background: rgba("+h.rgba()+") !important;\n      }\n    ",c.document.body.appendChild(i)},a.prototype.showFloatingGotoEditor=function(){return this.publishService.isSitePublished()&&!this.applicationState.isInMobileEditMode()},a}();Builder.STAGE_BACKGROUND_STYLE_ID="stageBackgroundColors",Builder.ANIMATION_LENGTH=250,angular.module("siteGeneratorStaticsConsumerAppInternal").component("builder",{templateUrl:"views/builder.html",controller:Builder,controllerAs:"$builder"});var AddSection=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var y=this;this.contentManager=a,this.modelTree=b,this.storyServices=c,this.CONSUMER_DIALOGS=d,this.applicationState=e,this.applicationParameters=f,this.tpaService=g,this.pagesManager=h,this.CcDialogBuilder=i,this.$translate=j,this.tipManager=k,this.TipManagerTypeMap=l,this.initService=m,this.consumerBiLogger=n,this.sectionManager=o,this.assistantManager=p,this.flags=q,this.contentModelTree=r,this.dropTargetCalculator=s,this.overlayManager=t,this.FeatureList=u,this.prettyAlgoRuleEngine=v,this.presetsStrategyFactory=w,this.siteBuilderPages=x,this.showMoreSections=!1,this.applicationState.getPageInFocus().managable||this.pageMode?m.loaded().then(function(){return a.initialize(y.storyServices.story)}).then(function(){return y.init()}):this.applicationState.goToBuilder()}return a.$inject=["contentManager","modelTree","storyServices","CONSUMER_DIALOGS","applicationState","applicationParameters","tpaService","pagesManager","CcDialogBuilder","$translate","tipManager","TipManagerTypeMap","initService","consumerBiLogger","sectionManager","assistantManager","flags","contentModelTree","dropTargetCalculator","overlayManager","FeatureList","prettyAlgoRuleEngine","presetsStrategyFactory","siteBuilderPages"],a.prototype.init=function(){this.storyServices.story?(this.isHomePage=this.pagesManager.isHome(this.storyServices.story.selectedPage),this.contentManager.buildContentMap(),this.selectedOffersMap=this.sectionManager.utilCreateSelectedOffersMap(),this.pageMode?this.initPageMode():this.initAddSectionMode()):this.back()},a.prototype.sectionAlias=function(a){return this.pageMode?a.pageTitle:a.alias||a.id},a.prototype.isSectionSelected=function(a){return this.selectedSection&&a.id===this.selectedSection.id},a.prototype.back=function(){this.applicationState.goToBuilder()},a.prototype.onHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant(this.pageMode?"help.pages.add":"help.section.add"),this.pageMode?this.CONSUMER_DIALOGS.ADD_PAGE_HELP:this.CONSUMER_DIALOGS.ADD_SECTION_HELP)},a.prototype.toggleMoreSections=function(){this.showMoreSections&&(jQuery(".section-list")[0].scrollTop=0),this.showMoreSections=!this.showMoreSections},a.prototype.setSelectedSection=function(a,b){if(!this.isSectionSelected(a)){if(b&&(this.pageMode?this.consumerBiLogger.pagesManager.switchPageTypeInTheAddPagePanel(a.ceType,a.id,a.origin):this.consumerBiLogger.sectionManagement.switchSectionTypeInTheAddSectionPanel(a.ceType,a.id,a.origin)),this.selectedSection=a,this.pageMode||this.tipManager.show(this.TipManagerTypeMap.ADD,a.id),a.isTpa)this.pageMode?(this.nodes=a.widgetNode?[a.widgetNode]:[this.getTpaNode(a.ceType)],this.pageName=a.pageTitle):(a.widgetNode.alias||(a.widgetNode.alias=a.id),this.nodes=[a.widgetNode]);else if(a.isBlank)this.nodes=[{id:"blank"}];else{this.pageName=a.pageTitle;var c=void 0;if(!this.pageMode){var d=this.storyServices.story.selectedPage;c=this.modelTree.getPageNodeById(d)}var e=this.modelTree.getDataHoldersAndExistingNodesForPage(c,a.ceType,this.isListSection()),f=e.existingNodes,g=this.prepareDrafts(f);this.sectionManager.overrideDraftsContent(g,e.dataHolders),this.nodes=g}this.addSectionStrategy=this.presetsStrategyFactory.createFromNode(this.nodes[0],builder.PresetsStrategyMode.Add)}},a.prototype.isOnPage=function(a){return this.aliasesOnThisPage.indexOf(a.id)>-1},a.prototype.mapTpaWidgetNodesToSectionObject=function(a){var b=this;return _.map(a,function(a){return b.sectionManager.makeTpaSectionObject(a)})},a.prototype.shouldShowTpaSectionOption=function(a){var b=a.sectionUnderFlag;return a.inConsumer&&"active"===a.sectionType&&(!b||this.flags[b])},a.prototype.getTpaPageSuggestions=function(){var a=this,b=[];return _(this.applicationParameters.tpaTypes).filter(function(b){return a.shouldShowTpaSectionOption(b)}).map("type").each(function(c){a.tpaService.isTpaAdded(c)||b.unshift({ceType:c,id:c,isTpa:!0,pageTitle:a.flags.staticTextsWithTranslate?a.$translate.instant("builder.section-design.TPA_NAME."+c):a.applicationParameters.tpaTypes[c].pageName||c,rawSectionBrief:{}})}).value(),b},a.prototype.setOriginForBI=function(){_.each(this.recommendedSections,function(a){a.origin="recommended"}),_.each(this.otherSections,function(a){a.origin="others"}),_.each(this.moreSections,function(a){a.origin="expanded list"})},a.prototype.initPageMode=function(){this.addSectionIntent=builder.PreviewListIntent.AddPage,this.aliasesOnThisPage=[];var a=this.contentManager.suggestedPages(this.selectedOffersMap[this.applicationParameters.tpaTypes.Stores.type],!0);this.sectionManager.postProcessSuggestedTpaSections(a.pageSuggestions),this.recommendedSections=_.filter(a.pageSuggestions,function(a){return a.isRecommendedPage}),this.otherSections=_.filter(a.pageSuggestions,function(a){return!a.isRecommendedPage}),this.otherSections.push.apply(this.otherSections,this.getTpaPageSuggestions()),this.moreSections=[],this.enforceVisibleSectionLimit(),this.setOriginForBI(),a.selectedIndex=-1===a.selectedIndex?0:a.selectedIndex,this.setSelectedSection(a.pageSuggestions[a.selectedIndex])},a.prototype.enforceVisibleSectionLimit=function(){var b=Math.min(a.MaxInitialVisibleSections,this.otherSections.length);this.moreSections=this.otherSections.splice(b).concat(this.moreSections)},a.prototype.filterPageSectionsByType=function(a,b,c,d){if(_.find(a.children,function(a){return a.contentElementType===c})||d)for(var e=b.findIndex(function(a){return a.ceType===c});-1!==e;)b.splice(e,1),e=b.findIndex(function(a){return a.ceType===c})},a.prototype.initAddSectionMode=function(){var a=this;if(this.flags.prettyAlgo){var b=this.overlayManager.getDropTargetSection();if(b){var c=new this.FeatureList(b);console.log("pa - section features",c)}}this.addSectionIntent=builder.PreviewListIntent.AddSection;var d=this.modelTree.getPageNodeById(this.storyServices.story.selectedPage);this.aliasesOnThisPage=_(d.children).filter(function(a){return!(a.userHidden||!a.alias&&"Contact"!==a.contentElementType||"siteconverter"===a.origin)}).map(function(a){return a.alias||a.contentElementType}).value();var e=this.selectedOffersMap[this.applicationParameters.tpaTypes.Stores.type],f=this.contentManager.suggestedSections(e);this.filterPageSectionsByType(d,f.suggestions,"Contact"),this.filterPageSectionsByType(d,f.suggestions,"Blog",!0),this.isHomePage&&this.modifySectionRecommendationsBySelectedOffer(f),this.sectionManager.postProcessSuggestedTpaSections(f.suggestions),f.suggestions=_.uniq(f.suggestions,!1,"id"),f.selectedIndex=_.findIndex(f.suggestions,function(b){return!a.contentModelTree.isSectionInTree(b.rawSectionBrief||b)}),f.remainingSuggestedSections=_.filter(f.suggestions,function(b){return!a.contentModelTree.isSectionInTree(b.rawSectionBrief||b)&&b.isRecommendedForPage}).length,this.recommendedSections=f.suggestions.filter(function(a){return a.isRecommendedForPage}),this.otherSections=f.suggestions.filter(function(a){return a.isRecommendedForSite&&!a.isRecommendedForPage}),this.moreSections=f.suggestions.filter(function(a){return!a.isRecommendedForSite}),this.moreSections=_.without.apply(_,[this.moreSections].concat(this.recommendedSections)),this.enforceVisibleSectionLimit(),this.flags.fullSiteBuilder&&this.moveBlogWidgetSectionsFromMoreToOther("blog",this.moreSections,this.otherSections),this.remainingSuggestedSections=f.remainingSuggestedSections,this.setOriginForBI(),this.setSelectedSection(f.suggestions[f.selectedIndex])},a.prototype.moveBlogWidgetSectionsFromMoreToOther=function(a,b,c){var d=this;if(this.modelTree.getPagesNodes().find(function(b){return d.siteBuilderPages.isTpaPage(b)&&d.siteBuilderPages.getTpaType(b).toLowerCase()===a})){var e=b.findIndex(function(a){return"Blog_Post_Gallery"===a.ceType});if(e>-1){var f=c.pop();c.push(b.splice(e,1)[0]),b.unshift(f)}}},a.prototype.modifySectionRecommendationsBySelectedOffer=function(a){this.sectionManager.modifySectionRecommendationsBySelectedOffer(a,this.selectedOffersMap)},a.prototype.getTpaNode=function(a){return _.find(this.modelTree.getTpaNodes(),{contentElementType:a})},a.prototype.prepareDrafts=function(a){return"Contact"===this.selectedSection.ceType?a.length?a:this.sectionManager.getDefaultContactNodes(this.selectedSection):this.sectionManager.prepareDrafts(this.selectedSection)},a.prototype.isListSection=function(){return this.selectedSection.rawSectionBrief.cardinality>1},a.prototype.reloadAfterAddingSection=function(a){this.pageMode||this.assistantManager.isInActiveTask()?(this.overlayManager.unlockDropTarget(),this.overlayManager.clearDropTarget(),this.overlayManager.lockDropTarget(a),this.pageMode?this.applicationState.goToAddSectionMode():(this.initAddSectionMode(),
this.dropTargetCalculator.initDropTarget())):(this.applicationState.setContentFocus(a,"body",!0),this.applicationState.goToEditMode())},a}();AddSection.MaxInitialVisibleSections=12,AddSection.OpeningHours="OpeningHours",AddSection.tpaWidgetAliases={Stores_Slider_Gallery_Widget:"Stores_Slider_Gallery_Widget",Stores_Product_specific_Widget:"Stores_Product_specific_Widget",Blog_Post_Gallery:"from-the-blog",GetSubscribers_Widget:"GetSubscribers_Widget",Events_Single:"Events_Single"},angular.module("siteGeneratorBuilderInternal").component("addSection",{templateUrl:"views/builder/add-section.html",controller:AddSection,bindings:{pageMode:"="}});var builder;!function(a){!function(a){a[a.AddSection=0]="AddSection",a[a.AddPage=1]="AddPage",a[a.ChangeSection=2]="ChangeSection"}(a.PreviewListIntent||(a.PreviewListIntent={}));var b=function(){function b(c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S){var T=this;this.$scope=c,this.$state=d,this.undoRedo=e,this.CONSUMER_DIALOGS=f,this.$timeout=g,this.CcDialogBuilder=h,this.$translate=i,this.$q=j,this.$element=k,this.spinnerService=l,this.sectionManager=m,this.mobileSectionManager=n,this.pagesManager=o,this.storyServices=p,this.presetHelpers=q,this.applicationState=r,this.sitePartTypes=s,this.overlayManager=t,this.flags=u,this.$window=v,this.tpaService=w,this.setTpaContentService=x,this.dropTargetCalculator=y,this.layoutSelectionStoreProvider=z,this.consumerBiLogger=A,this.consumerBiLoggerHelpers=B,this.obMonitoring=C,this.initService=D,this.silentPageBuilder=E,this.colorationUtils=F,this.getStageBackgroundColors=G,this.assistantManager=H,this.consumerMenu=I,this.$injector=J,this.presetPreviewFlagUtils=K,this.headerPresetUtils=L,this.slideShowPresetUtils=M,this.simpleSolutionManager=N,this.presetsStrategyFactory=O,this.designKit=P,this.slideShowService=Q,this.cabbieHover=R,this.solutionFetcher=S,this.isDoneLoading=!1,this.isLoadedAttr="is-loaded",this.cancelTimeout=null,this.doNotUpdatePresetConfiguration=!1,this.unsettingPreviewIsInView=!1,this.shouldShowMenu=!1,this.maxPlaceholdersToShow=4,this.isAllPresetsLoaded=!1,this.cachedSiblings=new Map,this.handleSelection=_.debounce(function(c){T.obMonitoring.mark({name:"addSection"}),T.applicationState.isSectionColorsMode()||T.spinnerService.waitForMe(b.SpinnerAddSection);var d=T.getSelectedPreviewData(c,"click");T.onSelectionStart&&T.onSelectionStart({data:d}),T.reportBIStart(d);var e=T.$q.when();if(T.intent!==a.PreviewListIntent.AddPage||c.node.isTpa||(e=T.addPageAndSection(!c.node.isTpaWidget)),T.intent===a.PreviewListIntent.AddPage&&T.flags.addAllPageMode)return e.then(function(a){return a?T.silentPageBuilder.constructAnyPage(a):T.$q.when()});var f=e.then(function(){return T.handlePreviewSelected(c)}).then(function(c){c&&"Service"===c.contentElementType&&c.children&&c.children.length&&T.intent===a.PreviewListIntent.AddSection&&T.setTpaContentService.addSingleServiceToTpa(c),T.reportBISuccess(c,d),T.intent!==a.PreviewListIntent.ChangeSection&&T.onSectionAdded(c),T.applicationState.refreshContentFocus(),T.spinnerService.imDone(b.SpinnerAddSection),T.$timeout(function(){T.current=T.previewAboutToBeSet,T.obMonitoring.measure({name:"addSection"}),T.onSelectionChanged&&T.onSelectionChanged({data:d})},10),T.$timeout(function(){T.ensurePreviewVisible(T.current)},300)});T.flags.keepPagesPanelOpen&&f.then(function(){if(T.applicationState.shouldReopenPagesPanel&&!T.assistantManager.isInActiveTask()){var a=T.storyServices.story.selectedPage;a&&T.applicationState.goToPage(a)}})},400,{leading:!1,trailing:!0}),this.currentPresetIndex=0,this.handleCurrentPreviewUpdate=function(a){var b;switch(a){case"headerType":var c=T.current;c.flags=T.presetPreviewFlagUtils.getPreviewFlagsByNode(c.node,!0),b=preset.UPDATE_SELECTED_PREVIEWS_KEY;break;case"headerBg":b=preset.UPDATE_ALL_PREVIEWS_KEY}T.$timeout(function(){return T.$scope.$broadcast(b)})},void 0===this.scale&&(this.scale=b.PreviewListScale),void 0===this.markSelected&&(this.markSelected=!0),this.$timeout(function(){var a=T.$element.find(b.PreviewListSelector);T.previewListElement=a[0],a.bind("scroll",function(){T.previewListElement.scrollTop+T.previewListElement.offsetHeight>=T.previewListElement.scrollHeight-50&&c.$apply(function(){return T.addPreviews(T.timestamp)})})}),this.isInColorPanel=this.applicationState.isInSectionColorPanel(),c.$watch("$ctrl.nodes",function(){if(T.cancelThrottlingInterval(),angular.element(T.previewListElement).scrollTop(0),T.intent===a.PreviewListIntent.AddPage&&T.nodes&&"blank"===_.first(T.nodes).id)return void(T.showBlankPage=!0);T.showBlankPage=!1;var b=T.nodes&&T.nodes[0],c=T.applicationState.getPageNodeInFocus();T.flags.mergedHeader&&T.intent===a.PreviewListIntent.ChangeSection&&b&&!b.isTpa&&T.isHeaderNode(b)&&T.previewHeaderWithFirstSection(c);var d=T.timestamp;T.strategy.generateListOfPreviews(T.nodes).then(function(a){T.timestamp===d&&(a=T.handleHeaderPreviews(a),a=T.handleSlideShowPreviews(a),T.$timeout(function(){return T.initializeThrottlingMechanism(a,d)},0))})}),c.$on("switchPreset",function(a,b){var c=T.previews.indexOf(T.current),d=c+b;d>=T.previews.length?d=0:d<0&&(d=T.previews.length-1),T.selectPreset(T.previews[d])}),c.$on("$destroy",function(){T.cancelThrottlingInterval(),T.layoutSelectionStoreProvider.resetPresetSelections(),T.intent===a.PreviewListIntent.AddPage?T.consumerBiLogger.pagesManager.pagesPanelWasClosed("add page"):T.selectedSection?T.consumerBiLogger.sectionManagement.sectionPanelClosed("",T.selectedSection.ceType,T.selectedSection.id):!T.nodes||T.flags.invertTpaPalette&&T.isTpaMode()&&T.isInColorPanel||T.sendSectionPanelClosedEvent()}),this.isMobile=this.applicationState.isInMobileEditMode()}return b.$inject=["$scope","$state","undoRedo","CONSUMER_DIALOGS","$timeout","CcDialogBuilder","$translate","$q","$element","spinnerService","sectionManager","mobileSectionManager","pagesManager","storyServices","presetHelpers","applicationState","sitePartTypes","overlayManager","flags","$window","tpaService","setTpaContentService","dropTargetCalculator","layoutSelectionStoreProvider","consumerBiLogger","consumerBiLoggerHelpers","obMonitoring","initService","silentPageBuilder","colorationUtils","getStageBackgroundColors","assistantManager","consumerMenu","$injector","presetPreviewFlagUtils","headerPresetUtils","slideShowPresetUtils","simpleSolutionManager","presetsStrategyFactory","designKit","slideShowService","cabbieHover","solutionFetcher"],b.prototype.sendSectionPanelClosedEvent=function(){var a=this.nodes[0];this.consumerBiLogger.sectionManagement.sectionPanelClosed(a.getId(),a.getContentElementType(),a.alias)},b.prototype.$onInit=function(){var b=this;this.initPlaceholders(),this.initService.loaded().then(function(){return b.colorationUtils.initialize()}).then(function(){switch(b.intent){case a.PreviewListIntent.AddPage:b.pageMode=!0,b.consumerBiLogger.pagesManager.addPagePanelIsLoaded();break;case a.PreviewListIntent.AddSection:b.consumerBiLogger.sectionManagement.addSectionPanelIsLoaded()}})},b.prototype.initPlaceholders=function(){this.isShowPlaceholdersInPresets&&(this.placeholders=[])},Object.defineProperty(b.prototype,"isShowPlaceholdersInPresets",{get:function(){return this.intent!==a.PreviewListIntent.AddPage&&!this.applicationState.isSectionColorsMode()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"overlayTitle",{get:function(){return this.applicationState.isSectionColorsMode()?this.$translate.instant("preset-title.change-color"):this.applicationState.isSwitchPresetMode()?this.$translate.instant("preset-title.switch-preset"):this.intent===a.PreviewListIntent.AddPage?this.$translate.instant("preset-title.add"):this.nodes[0].isTpaNode()?this.$translate.instant("preset-title.click"):this.$translate.instant("preset-title.click-or-drag")},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"panelSource",{get:function(){switch(this.intent){case a.PreviewListIntent.AddPage:return BIOrigins.AddPagePanel;case a.PreviewListIntent.AddSection:return BIOrigins.AddSectionPanel;case a.PreviewListIntent.ChangeSection:if(this.applicationState.isSectionColorsMode())return BIOrigins.SectionColorsPanel;if(this.applicationState.isSwitchPresetMode())return BIOrigins.SectionPanel}return this.flags.sectionMedia&&this.source?this.source:BIOrigins.UnknownSource},enumerable:!0,configurable:!0}),b.prototype.handleHeaderPreviews=function(a){return this.flags.mergedHeader?this.headerPresetUtils.addHeaderPreviews(a,this.nodes[0],this.current&&this.current.flags):a},b.prototype.shouldShowFixLabel=function(a){return this.flags.mergedHeader&&a.flags&&"fix"===a.flags[0]&&(!this.flags.mergedHeaderPhase2||!this.isMobile)},b.prototype.handleSlideShowPreviews=function(a){return this.flags.listItemSlideShow&&this.slideShowPresetUtils.isNodeSupportSlideShow(this.nodes[0])?this.slideShowPresetUtils.addSlideShowPreviews(a):a},b.prototype.getPlaceholderBackgroundColor=function(){var a=this.colorationUtils.getPaletteColors();return{"background-color":"rgba("+this.getStageBackgroundColors(a).gradientStart.rgba()+")"}},b.prototype.getPlaceholderClassName=function(a){return this.applicationState.isInMobileEditMode()?"preview-placeholder-mobile":"preview-placeholder"},b.prototype.isSelected=function(a){if(!this.markSelected)return!1;if(this.flags.mergedHeader)return a.isSelected;if(this.flags.invertTpaPalette&&a.isTpa)return this.isTpaSelected(a);var b=a&&(a.id||a.preset&&a.preset.id),c=this.current&&this.tpaService.getChosenPresetId(this.current.node);return a===this.current||b===c&&void 0!==b},b.prototype.isTpaSelected=function(a){if(this.applicationState.isInSectionColorPanel()){var b=this.current.node;return this.designKit.doesPreviewBackgroundMatchSelected(a,this.simpleSolutionManager.getSectionSolution(b.containerPageId,b.id)[0])}var c=this.current&&this.tpaService.getChosenPresetId(this.current.node),d=a&&(a.id||a.preset&&a.preset.id);return d&&d===c},b.prototype.isGeneralDescriptionPreview=function(a){return a&&this.isGeneralDescription(a.node)},b.prototype.isGeneralDescription=function(a){return a&&"GeneralDescription"===a.getContentElementType()},b.prototype.isHeaderPreview=function(a){return a&&this.isHeaderNode(a.node)},b.prototype.isHeaderNode=function(a){return this.isGeneralDescription(a)&&"footer"!==a.containerPageId},b.prototype.isFooterPreview=function(a){return a&&this.isFooterNode(a.node)},b.prototype.isFooterNode=function(a){return a&&"footer"===a.containerPageId},b.prototype.isSelectedInView=function(){var a=this.$element.find(".preview-list-container .cc-scrollbar"),b=this.$element.find(".selected.preview-section");if(0===b.length)return!1;var c=a.scrollTop(),d=c+a.outerHeight(),e=b.position().top;return c<=e+b.outerHeight()&&e<=d},Object.defineProperty(b.prototype,"body",{get:function(){var a=this.applicationState.getContentFocus();return null===a||a.sitePart!==this.sitePartTypes.HEADER&&a.sitePart!==this.sitePartTypes.FOOTER},enumerable:!0,configurable:!0}),b.prototype.createBlankPage=function(){var a=this,c=this.consumerBiLoggerHelpers.getEditMode(),d=this.selectedSection.ceType,e=this.selectedSection.id,f=this.selectedSection.origin,g=1,h=1,i="";this.consumerBiLogger.pagesManager.clickOnDesiredNewPage(d,e,f,g,h,i,!1),this.applicationState.clearContentFocus(),this.spinnerService.waitForMe(b.SpinnerAddBlankPage),this.pageName=this.$translate.instant("general.blank"),this.addPageAndSection().then(function(){return a.consumerMenu.calcMenuAnchors()}).then(function(){return a.spinnerService.imDone(b.SpinnerAddBlankPage),a.undoRedo.captureOperation(),a.applicationState.clearContentFocus(),a.storyServices.recalculateCurrentPage()}).then(function(){a.consumerBiLogger.pagesManager.addNewPageSuccess(c,d,e,"",f,g,h,i,"","by user",!1),a.applicationState.goToAddSectionMode()})},b.prototype.popupAfterPageAdd=function(){var a=this;return this.CcDialogBuilder.showFirstTimeNotice({heading:this.$translate.instant("popups.after-page-add.heading"),text:this.$translate.instant("popups.after-page-add.text"),acceptButtonText:this.$translate.instant("popups.after-page-add.accept"),icon:"badge.gif",hideFirstTimeCheckBox:!0,onHelp:function(){a.CcDialogBuilder.showSupportIframe(a.$translate.instant("help.popup.newPageAdded"),a.CONSUMER_DIALOGS.AFTER_PAGE_ADD_HELP)},biDialogName:this.CONSUMER_DIALOGS.AFTER_PAGE_ADD})},b.prototype.popupPageAddInitiation=function(){return this.CcDialogBuilder.showFirstTimeNotice({heading:this.$translate.instant("popups.after-page-add.heading"),text:this.$translate.instant("popups.after-page-add.text"),acceptButtonText:this.$translate.instant("popups.after-page-add.accept"),dontBotherMeText:this.$translate.instant("general.dont-show-again"),dontBotherMe:!0,biDialogName:this.CONSUMER_DIALOGS.AFTER_PAGE_ADD_FIRST_TIME})},b.prototype.addPageAndSection=function(a){var b=this;void 0===a&&(a=!0);var c=this.pageName||"Untitled",d=this.pagesManager.addPage(c).then(function(a){return b.storyServices.story.selectedPage=a.id,b.pagesManager.goToPage(a.id)});return this.applicationState.isSilent()?d:d.then(function(c){var d="popups.after-page-add";return!b.storyServices.story.popupConfigurations[d]&&a&&b.popupAfterPageAdd().then(function(a){b.storyServices.story.popupConfigurations[d]=!0}),c})},b.prototype.handlePreviewSelected=function(b){if(this.applicationState.isInMobileEditMode())return this.mobileSectionManager.handlePreviewSelected(b);var c=this.intent===a.PreviewListIntent.ChangeSection;return this.sectionManager.handlePreviewSelected(b,c)},b.prototype.reportBISuccess=function(b,c){if(b&&b.isTpaNode()&&(c.instanceId=this.tpaService.getInstanceId(b),this.intent!==a.PreviewListIntent.AddPage&&this.intent!==a.PreviewListIntent.AddSection||this.sendBIForTpaPackageSuccess(c)),this.applicationState.isSectionColorsMode())return void this.consumerBiLogger.sectionDesign.changeColorSuccess(c.sectionAlias,c.sectionType);switch(this.intent){case a.PreviewListIntent.AddPage:c.instanceId&&this.consumerBiLogger.provisioning.tpaIntent(c.instanceId,c.appId,"ADD_APP","ADI"),this.consumerBiLogger.pagesManager.addNewPageSuccess(c.editMode,c.sectionType,c.sectionAlias,b.getId(),c.origin,c.totalPreviews,c.selectedIndex,c.presetId,c.appId,"by user",c.isColumns);break;case a.PreviewListIntent.ChangeSection:this.consumerBiLogger.sectionManagement.changeSectionLayoutSuccess(c.editMode,c.node.getId(),c.sectionType,c.sectionAlias,c.totalPreviews,c.selectedIndex,c.presetId,c.appId,c.isColumns,this.panelSource);break;case a.PreviewListIntent.AddSection:c.instanceId&&this.consumerBiLogger.provisioning.tpaIntent(c.instanceId,c.appId,"ADD_APP","ADI"),this.consumerBiLogger.sectionManagement.addSectionToPageSuccess(c.editMode,b.getId(),c.addPosition,c.sectionType,c.sectionAlias,c.origin,c.totalPreviews,c.selectedIndex,c.presetId,c.addType,c.appId,c.isColumns,SectionManager.isNodeDuplicated(b))}},b.prototype.sendBIForTpaPackageSuccess=function(a){this.consumerBiLogger.pagesManager.addTpaPackageSuccess(this.consumerBiLoggerHelpers.extraPagesCount(),a.appId,a.isColumns,Date.now()-a.startTime,a.node.getId()),this.consumerBiLoggerHelpers.resetExtraPagesCount()},b.prototype.getSelectedPreviewData=function(b,c){var d=this,e=function(a){var c=d.tpaService.getAppId(a);if(b.node.isTpaWidget){var e=b.node.contentElementType.split("_")[0];return d.tpaService.getAppIdByType(e)}return c},f=this.nodes[0],g=function(a){return{ceType:a.ceType,alias:a.id,origin:a.origin}},h=function(a){return{ceType:a.getSpecificContentElementType(),alias:a.alias,origin:null}},i=this.intent!==a.PreviewListIntent.ChangeSection?g(this.selectedSection):h(f);return{preview:b,addType:c,node:f,appId:e(b.node),totalPreviews:this.previews.length,selectedIndex:this.previews.indexOf(b)+1,presetId:b.preset&&b.preset.id||"current",isColumns:!(!b.preset||!b.preset.flag_useColumns),sectionType:i.ceType,sectionAlias:i.alias,origin:i.origin,startTime:Date.now(),addPosition:this.sectionManager.getAddSectionPosition(),editMode:this.consumerBiLoggerHelpers.getEditMode()}},b.prototype.reportBIStart=function(b){if(this.consumerBiLoggerHelpers.resetExtraPagesCount(),this.applicationState.isSectionColorsMode())this.consumerBiLogger.sectionDesign.changeColorClick(b.sectionAlias,b.sectionType);else switch(this.intent){case a.PreviewListIntent.ChangeSection:this.consumerBiLogger.sectionManagement.changeASectionLayout(b.node.getId(),b.sectionType,b.sectionAlias,b.totalPreviews,b.selectedIndex,b.presetId,b.appId,b.isColumns,this.panelSource);break;case a.PreviewListIntent.AddSection:this.consumerBiLogger.sectionManagement.addSectionToPage(b.sectionType,b.sectionAlias,b.addPosition,b.origin,b.totalPreviews,b.selectedIndex,b.presetId,b.addType,b.appId,b.isColumns,SectionManager.isNodeDuplicated(b.node));break;case a.PreviewListIntent.AddPage:this.consumerBiLogger.pagesManager.clickOnDesiredNewPage(b.sectionType,b.sectionAlias,b.origin,b.totalPreviews,b.selectedIndex,b.presetId,b.isColumns)}},b.prototype.onSectionAdded=function(a){var b=this,c=b.applicationState,d=b.sitePartTypes,e=b.$state;this.doNotUpdatePresetConfiguration=!0,e.current.name===config.STATES.BUILDER_ADD_SECTION?this.reloadAfterAdd&&this.reloadAfterAdd({$nodeId:a.getId()}):(c.setContentFocus(a.getId(),d.BODY,!0),c.goToBuilder())},b.prototype.updateSelectedProp=function(a){var b=this.previews.find(function(a){return a.isSelected});b&&(b.isSelected=!1),a.isSelected=!0},b.prototype.selectPreset=function(a,b){if(this.applicationState.isAddSectionMode()||this.updateSelectedProp(a),b&&this.flags.prettyAlgo&&this.flags.debug&&(b.metaKey||b.ctrlKey)){var c=this.$injector.get("prettyAlgoDX"),d=this.overlayManager.getDropTargetSection();return void c.openRuleCreationDialog(a,d)}this.previewAboutToBeSet!==a&&(this.unsettingPreviewIsInView=this.isSelectedInView(),this.previewAboutToBeSet=a,this.handleSelection(a))},b.prototype.ensurePreviewVisible=function(a){var b=this.previews.indexOf(a),c=angular.element(this.previewListElement).find(".preview-section")[b];if(c){var d=c.offsetTop+c.offsetHeight,e=this.previewListElement.offsetHeight+this.previewListElement.scrollTop;d>e?this.previewListElement.scrollTop+=20+d-e:c.offsetTop<this.previewListElement.scrollTop&&(this.previewListElement.scrollTop-=20+this.previewListElement.scrollTop-c.offsetTop)}},b.prototype.isDebugMode=function(){return!!this.flags.debugMode},b.prototype.debugInfo=function(a){if(this.$window.preview=a,a.preset&&(this.$window.console.log("%cPreset ID: "+a.preset.id,"color:blue"),a.preset.data.priority&&this.$window.console.log("%cPreset Priority: "+a.preset.data.priority[a.node.contentElementType]+"\nContent Element Type: "+a.node.contentElementType,"color:blue")),this.$window.console.log("%cSignature:\n"+this.strategy.getPresetVisualSignature(a),"color:blue"),this.$window.console.log("%cYou can use the following variables\n'preview.node', \n'preview.preset', \n'preview.solution'\n","color:orange"),window.siteConverterSection){var b=window,c=b.siteConverterSection,d=b.siteConverterNode,e=this.$injector.get("siteConverterPresetPicker"),f=e.getScoredPresetPreview(a,c,d,e.doAllMediaContainFaces(d),e.getNodeMediaDimensions(d));console.log("SiteConverter PresetPreview",f)}},b.prototype.postAdd=function(a){var b=this;if(!this.initiateInterval(a))return this.$q.when().then(function(){b.cancelThrottlingInterval()})},b.prototype.addPresetToQueue=function(b,c){var d=this;(b.isTpa?this.presetsStrategyFactory.createFromNode(this.nodes[0],a.PresetsStrategyMode.Change):this.strategy).calculatePresetPreview(b,this.currentPresetIndex).then(function(a){if(d.timestamp===c){if(a){d.flags.mergedHeader&&a.isTpa&&(a.isSelected=d.isTpaSelected(a));var b=!1;d.flags.mergedHeader&&d.isHeaderPreview(a)&&(d.headerPresetUtils.normalizeHeaderPreview(a),d.headerPresetUtils.isValidHeaderPreview(a)||(b=!0)),!b&&d.addPresetToListIfUnique(d.previews,a)&&d.currentPresetIndex++}return d.postAdd(c)}})},b.prototype.addPresetToListIfUnique=function(a,b){if(this.strategy.isUnique(b)||b.isTpa&&this.flags.invertTpaPalette)return a.push(b),!0;if(this.isDebugMode()){var c=this.strategy.getPresetVisualSignature(b),d=b.preset&&b.preset.id;this.$window.console.log("%cFound duplication in presets, ignore.\nPreset ID: "+d+"\nSignature:\n"+c,"color:blue")}return!1},b.prototype.isTpaMode=function(){return this.nodes[0].isTpaNode&&this.nodes[0].isTpaNode()},b.prototype.addPreviews=function(b){if(!this.isTpaMode()){switch(this.intent){case a.PreviewListIntent.AddPage:this.consumerBiLogger.sectionManagement.showMoreSectionPageLayoutsOnScroll("",this.selectedSection.ceType,this.selectedSection.id,"add page");break;case a.PreviewListIntent.AddSection:this.consumerBiLogger.sectionManagement.showMoreSectionPageLayoutsOnScroll("",this.selectedSection.ceType,this.selectedSection.id,"add section");break;case a.PreviewListIntent.ChangeSection:var c=this.nodes[0];this.consumerBiLogger.sectionManagement.showMoreSectionPageLayoutsOnScroll(c.getId(),c.getContentElementType(),c.alias,"replace section")}this.limit=Math.max(this.limit,this.previews.length+3),this.cancelTimeout||this.initiateInterval(b)}},b.prototype.initializeThrottlingMechanism=function(b,c){this.layoutSelectionStoreProvider.resetPresetSelections(),this.allPreviews=b,this.doNotUpdatePresetConfiguration=!1,this.previews=[],this.current&&this.intent===a.PreviewListIntent.ChangeSection&&!this.isTpaMode()&&(this.flags.mergedHeader&&(this.current.isSelected=!0),this.addCurrentPresetToList()),this.limit=5,this.numberOfIterations=0,this.initiateInterval(c)},b.prototype.addCurrentPresetToList=function(){this.flags.mergedHeader&&this.isHeaderPreview(this.current)&&(this.current.flags=this.presetPreviewFlagUtils.getPreviewFlagsByNode(this.current.node,!0)),this.flags.listItemSlideShow&&this.isSlideShowPreset(this.current)&&(this.current.flags=this.current.flags||[],this.current.flags.push("slideShowPreset")),this.addPresetToListIfUnique(this.previews,this.current)},b.prototype.isSlideShowPreset=function(a){return a&&this.slideShowService.isSlideShow(a.node)},b.prototype.initiateInterval=function(a){var b=this;if(this.isShowPlaceholdersInPresets&&(this.isAllPresetsLoaded=!1),this.timestamp!==a)return!1;this.isDoneLoading=!1,this.isShowPlaceholdersInPresets&&this.showPlaceholders();var c=this.allPreviews.length-this.numberOfIterations;if(0===c){var d=this.strategy.generateNextChunkOfPreviews(this.nodes);_.isEmpty(d)||(this.allPreviews=[].concat.call(this.allPreviews,d),c=this.allPreviews.length-this.numberOfIterations),this.loadCallback&&this.loadCallback({total:this.previews.length})}if(c>0&&(!this.strategy.shouldLoadPreviousOnScroll()||this.previews.length<this.limit||this.isLoadMorePresetsAccordingToScroll()))return this.flags.noRandomForAutomationTests?(this.cancelTimeout=!0,this.addPresetToQueue(this.allPreviews[this.numberOfIterations++],a)):this.cancelTimeout=this.$timeout(function(){b.addPresetToQueue(b.allPreviews[b.numberOfIterations++],a)},100),!0;this.isShowPlaceholdersInPresets&&0===c&&this.onAllPresetsLoaded()},b.prototype.onAllPresetsLoaded=function(){this.isAllPresetsLoaded=!0,this.initPlaceholders()},b.prototype.showPlaceholders=function(){if(this.isShowPlaceholdersInPresets&&!this.isTpaMode()&&this.placeholders&&0===this.placeholders.length)for(var a=0;a<this.maxPlaceholdersToShow;a++){var b={id:a};this.placeholders.push(b)}},b.prototype.isLoadMorePresetsAccordingToScroll=function(){var a=$(".preview-list").height(),b=0;return $('.preview-section:not(".preview-section-placeholder")').each(function(){b+=$(this).outerHeight(!0)||0}),a>b-50},b.prototype.onPresetsLoadingFinished=function(){this.cancelTimeout=null,this.timestamp=(new Date).getTime(),this.isDoneLoading=!0},b.prototype.cancelThrottlingInterval=function(){this.cancelTimeout&&(this.$timeout.cancel(this.cancelTimeout),this.initPlaceholders()),this.onPresetsLoadingFinished()},b.prototype.onDragStart=function(a,b){var c=this.getSelectedPreviewData(b,"drag");b.selectionData=c,this.consumerBiLogger.sectionManagement.addSectionToPageStartDragging(c.sectionType,c.sectionAlias,c.origin,c.totalPreviews,c.selectedIndex,c.presetId,c.addType,c.appId),this.overlayManager.data.draggedPresetPreview=b},b.prototype.onDrop=function(){var a=this,c=this.overlayManager.data.draggedPresetPreview,d=c.selectionData;this.reportBIStart(d),this.spinnerService.waitForMe(b.SpinnerDropSection),this.handlePreviewSelected(c).then(function(c){a.onSectionAdded(c),a.reportBISuccess(c,d),a.spinnerService.imDone(b.SpinnerDropSection)})},b.prototype.onDragEnd=function(a){this.overlayManager.data.draggedPresetPreview=null},b.prototype.onCanceled=function(a){this.dropTargetCalculator.updateDropTarget()},b.prototype.onPresetPreviewBeforeRender=function(a){this.doNotUpdatePresetConfiguration||this.sectionManager.setConfigurationForSection(a)},b.prototype.onHoverPreview=function(a,c){var d=angular.element(a.currentTarget),e=d.find(b.PreviewContainerSelector),f=d.find(b.PreviewSlideShowSelector),g=e.find(b.TpaPreviewSelector),h=d.find(b.PreviewFlagSelector);if(!g[0]||g.closest(".preview-section["+this.isLoadedAttr+"=true]")[0]){var i=e.height(),j=d.height()-d.find(".browser-toolbar").height()-d.find(".browser-bottom").height();if(c){0===f.length&&h.hide();var k=i-j;e.css({"margin-top":Math.min(-k,0),transition:"margin-top "+k/80+"s .15s"}),_.each(e.find(".video-bg"),function(a){return a.play()}),f.trigger("preview-slide-show-start")}else f.trigger("preview-slide-show-stop"),e.css({"margin-top":0,transition:"margin-top 1s"}),_.each(e.find(".video-bg"),function(a){return a.pause()}),h.show()}},Object.defineProperty(b.prototype,"isMenuVisible",{get:function(){if(this.assistantManager.isInActiveTask()){var a=this.assistantManager.getCustomTaskData("showSectionDesignMenu");if(void 0!==a)return a}return this.shouldShowMenu},enumerable:!0,configurable:!0}),b.prototype.showSectionDesignMenu=function(a){if(this.flags.mergedHeader&&this.flags.headerDesignMenuCab&&this.isHeaderPreview(a)){var b={target:angular.element('[data-hook="customize-design-button"]'),containerWindowSelector:".preview-list",contentSelector:".intro-tooltip-content",element:"header-design-menu",onCloseTimeout:500,closeWhenClickOn:["go-to-site-color"],attributes:{onDesignUpdated:this.handleCurrentPreviewUpdate}};this.cabbieHover.show(b)}else this.flags.invertTpaPalette&&this.isTpaSelected(a)||(this.shouldShowMenu=!0)},b.prototype.hideSectionDesignMenu=function(){this.shouldShowMenu=!1},b.prototype.isPresetResponsive=function(a){var b=a.preset&&_.get(a.preset,"data.groups");return _.any(b,function(a){return a.columns&&a.columns.enable})},b.prototype.shouldShowCustomizeDesignDropdown=function(a){return!this.applicationState.isAddSectionMode()&&!this.applicationState.isAddPage()&&!this.applicationState.isInMobileEditMode()&&!this.applicationState.isSectionColorsMode()&&(!a.isTpa||this.flags.invertTpaPalette)&&"Blog"!==a.node.contentElementType&&"Blog_Post_Gallery"!==a.node.contentElementType&&(!this.flags.mergedHeader&&!this.isGeneralDescriptionPreview(a)||this.flags.mergedHeader&&!this.isFooterPreview(a))},b.prototype.printPrettyAlgoInfo=function(a){console.log(a.prettyAlgo)},b.prototype.prettyAlgoGetRuleNames=function(a){return a.prettyAlgo&&a.prettyAlgo.rules?a.prettyAlgo.rules.map(function(a){return a.name}):[]},b.prototype.printBgOpacityData=function(a){console.log("opacityDebugData: "),_.each(a.solution,function(a){_.each(a.opacityDebugData,function(a,b){console.log(b,":",a)})})},b.prototype.previewHeaderWithFirstSection=function(a){var b=a.children[1];if(b){var c=this.solutionFetcher.getSectionSolution.bind(this.solutionFetcher),d=c(a.id,b.id);this.firstSectionPreview=this.presetHelpers.createCurrentSectionPreview(b.id,d)}},b.prototype.wrapWithSiblingsIfNeeded=function(a){if(this.flags.mergedHeader&&this.firstSectionPreview){if(this.cachedSiblings.has(a))return this.cachedSiblings.get(a);var b=[a,this.firstSectionPreview];return this.cachedSiblings.set(a,b),b}return a},b.prototype.getPresetButtonText=function(a){return this.$translate.instant(this.flags.invertTpaPalette&&this.isTpaSelected(a)?"builder.section-design.change-colors":"builder.section-design.customize-design")},b.prototype.goToColorationPanel=function(a){this.flags.invertTpaPalette&&this.isTpaSelected(a)&&this.applicationState.goToSectionColorPanel(this.panelSource)},b}();b.PreviewListWidth=360,b.MobilePreviewListWidth=276,b.PreviewListScale=.25,b.PreviewContainerSelector=".preview-content",b.TpaPreviewSelector="tpa-preview",b.PreviewFlagSelector=".preview-flag-message",b.PreviewListSelector=".preview-list",b.PreviewSlideShowSelector="preset-preview .slide-show-film",b.SpinnerAddBlankPage="addblankpage",b.SpinnerAddSection="addsection",b.SpinnerDropSection="dropsection",a.PreviewList=b,angular.module("siteGeneratorBuilderInternal").directive("sectionReady",["$parse",function(a){return{restrict:"A",link:function(a,b,c){b.ready(function(){var c=a.$ctrl;b.attr(c.isLoadedAttr,"true"),c.isShowPlaceholdersInPresets&&c.placeholders.length>0&&(c.placeholders.pop(),c.showPlaceholders(!0))})}}}]).component("previewList",{templateUrl:"views/builder/preview-list.html",controller:a.PreviewList,bindings:{nodes:"=",strategy:"<",intent:"<",current:"=?",scale:"<",pageName:"=",draggable:"=",selectedSection:"=?",markSelected:"<",reloadAfterAdd:"&",loadCallback:"&?",onSelectionStart:"&",onSelectionChanged:"&",source:"<?"}})}(builder||(builder={}));var SwitchPreset=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v=this;this.nodeFetcher=a,this.applicationState=b,this.storyServices=c,this.layoutSolver=d,this.CONSUMER_DIALOGS=e,this.CcDialogBuilder=f,this.initService=g,this.flags=h,this.presetHelpers=i,this.consumerBiLogger=j,this.$translate=k,this.mediaEditorManager=l,this.pubSub=m,this.presetsStrategyFactory=n,this.$timeout=o,this.assistantManager=p,this.simpleSolutionManager=q,this.solutionFetcher=r,this.$q=s,this.$element=t,this.sitePartTypes=u,this.isHeader=!1,this.initNodes=function(){var a=v.nodeFetcher.getCurrentNodeResult(),b=a&&a.node,c=v.solutionFetcher.getSectionSolution(v.storyServices.story.selectedPage,b.getId(),a.sitePart);v.current=v.presetHelpers.createCurrentSectionPreview(b,c),v.nodes=[b],v.flags.mergedHeader&&"body"!==a.sitePart&&(v.partSuffix="-"+a.sitePart,v.isHeader=a.sitePart===v.sitePartTypes.HEADER)},this.init()}return a.$inject=["nodeFetcher","applicationState","storyServices","layoutSolver","CONSUMER_DIALOGS","CcDialogBuilder","initService","flags","presetHelpers","consumerBiLogger","$translate","mediaEditorManager","pubSub","presetsStrategyFactory","$timeout","assistantManager","simpleSolutionManager","solutionFetcher","$q","$element","sitePartTypes"],a.prototype.init=function(){var a=this;this.flags.mergedHeader&&(this.scrollTo=new helpers.ScrollTo(this.$timeout,this.assistantManager,this.$q,this.$element,{selectedSelector:".preview-section.selected",scrollableContainerSelector:builder.PreviewList.PreviewListSelector,considerSelectedIcon:!0})),this.initService.loaded().then(function(){a.initNodes(),a.unsubscribe=a.pubSub.subscribe(PubSub.events.CONTENT_UPDATED,a.initNodes),a.switchPresetStrategy=a.presetsStrategyFactory.createFromNode(a.nodes[0],builder.PresetsStrategyMode.Change),a.switchPresetIntent=builder.PreviewListIntent.ChangeSection})},a.prototype.$onDestroy=function(){this.unsubscribe&&this.unsubscribe()},a.prototype.back=function(){this.applicationState.goToBuilder(!0)},a.prototype.help=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant(this.getHelpPopupName()),this.CONSUMER_DIALOGS.SECTION_REPLACE_HELP)},a.prototype.getHelpPopupName=function(){return this.applicationState.isInMobileEditMode()?"help.switch-design.mobile":this.flags.mergedHeader&&this.isHeader?"help.switch-design.header":"help.section.replace"},a.prototype.isTPA=function(){return this.nodes&&this.nodes.length>0&&this.nodes[0].isTpaNode&&this.nodes[0].isTpaNode()},a.prototype.getHeaderParagraphText=function(){
return this.applicationState.isInMobileEditMode()?this.$translate.instant("builder.section-design.mobile-headline-text"):this.flags.mergedHeader&&this.isHeader?this.$translate.instant("builder.section-design.panel-header-text-header"):this.isTPA()?this.getTPAHeader():this.$translate.instant("builder.section-design.panel-header-text")},a.prototype.getTPAHeader=function(){var a=this.$translate.instant("builder.section-design.TPA_NAME."+this.nodes[0].contentElementType);return this.$translate.instant("builder.section-design.panel-header-text-tpa",{TPA_NAME:a})},a.prototype.goToDesignMode=function(){this.consumerBiLogger.siteDesign.designPanelIsLoaded(BIOrigins.SectionPanel),this.applicationState.goToDesignMode()},a}();angular.module("siteGeneratorBuilderInternal").component("switchPreset",{templateUrl:"views/builder/switch-preset.html",controller:SwitchPreset});var SwitchColor=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=this;this.nodeFetcher=a,this.applicationState=b,this.storyServices=c,this.layoutSolver=d,this.CONSUMER_DIALOGS=e,this.CcDialogBuilder=f,this.initService=g,this.flags=h,this.presetHelpers=i,this.$translate=j,this.consumerBiLogger=k,this.presetsStrategyFactory=l,this.simpleSolutionManager=m,this.solutionFetcher=n,this.pubSub=o,this.previewTotal=0,this.initNodes=function(){var a=p.nodeFetcher.getCurrentNodeResult(),b=a&&a.node,c=p.solutionFetcher.getSectionSolution(p.storyServices.story.selectedPage,b.getId(),a.sitePart);p.current=p.presetHelpers.createCurrentSectionPreview(b,c),p.nodes=[b]},this.init()}return a.$inject=["nodeFetcher","applicationState","storyServices","layoutSolver","CONSUMER_DIALOGS","CcDialogBuilder","initService","flags","presetHelpers","$translate","consumerBiLogger","presetsStrategyFactory","simpleSolutionManager","solutionFetcher","pubSub"],Object.defineProperty(a.prototype,"titleParagraph",{get:function(){var a=1!==this.previewTotal?"builder.switch-color.panel-paragraph":"builder.switch-color.panel-paragraph-only-one-option";return this.$translate.instant(a)},enumerable:!0,configurable:!0}),a.prototype.init=function(){var a=this;this.initService.loaded().then(function(){a.initNodes(),a.switchColorStrategy=a.presetsStrategyFactory.create(builder.PresetsStrategyType.Color,builder.PresetsStrategyMode.Change),a.switchColorIntent=builder.PreviewListIntent.ChangeSection,a.unsubscribe=a.pubSub.subscribe(PubSub.events.CONTENT_UPDATED,a.initNodes)})},a.prototype.$onDestroy=function(){this.unsubscribe&&this.unsubscribe()},a.prototype.back=function(){this.applicationState.goToSwitchPresetMode("color-back")},a.prototype.close=function(){this.applicationState.goToBuilder(!0)},a.prototype.help=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.section.colors"),this.CONSUMER_DIALOGS.SECTION_COLORS_HELP)},a.prototype.isTPA=function(){return this.nodes&&this.nodes.length>0&&this.nodes[0].isTpaNode&&this.nodes[0].isTpaNode()},a.prototype.goToDesignPanel=function(){this.applicationState.goToSwitchPresetMode("switch-color")},a.prototype.goToColorationPanel=function(){this.consumerBiLogger.siteDesign.customizeDesignColorPaletteMode(BIOrigins.SectionColorsPanel),this.applicationState.goToColorationPanel()},a.prototype.loadCallback=function(a){this.previewTotal=a.total},a}();angular.module("siteGeneratorBuilderInternal").component("switchColor",{templateUrl:"views/builder/switch-color.html",controller:SwitchColor});var BusinessCardModal=function(){function a(b,c,d,e,f,g,h,i,j,k,l){var m=this;this.applicationState=b,this.modelTree=c,this.introManager=d,this.storyServices=e,this.CONSUMER_DIALOGS=f,this.introContentElementGenerator=g,this.CcDialogBuilder=h,this.$translate=i,this.mediaGallery=j,this.undoRedo=k,this.consumerBiLogger=l,l.builder.businessInfoEditBusinessInfoPageView(),this.editableIntroData={},a.sections.forEach(function(a){return g.enrichIntroData(m.editableIntroData,m.getContentElementByType(a))});var n=this.editableIntroData.media.logos.length&&this.editableIntroData.media.logos[0].data;n&&(this.editableIntroData.media.logos[0].url=j.itemToThumbnailUrl(n,n.width,n.height))}return a.$inject=["applicationState","modelTree","introManager","storyServices","CONSUMER_DIALOGS","introContentElementGenerator","CcDialogBuilder","$translate","mediaGallery","undoRedo","consumerBiLogger"],a.prototype.getContentElementByType=function(a){return _.find(this.modelTree.data.children,{contentElementType:a}).contentElement},a.prototype.apply=function(){var b=this;this.consumerBiLogger.builder.businessInfoUpdateChanges(0,0,0),this.applicationState.goToBuilder(!0),this.introManager.data=this.editableIntroData,this.introManager.data.socialLinks=this.introManager.data.socialLinks.filter(function(a){return!!a.url}),a.sections.forEach(function(a){return b.introContentElementGenerator.enrichContentElement(b.getContentElementByType(a),b.editableIntroData,!0)}),this.storyServices.emitNodeChangedClearCache(),this.undoRedo.captureOperation(),this.CcDialogBuilder.hide(),this.consumerBiLogger.builder.businessInfoUpdateChangesSuccess()},a.prototype.cancel=function(){this.consumerBiLogger.builder.businessInfoClosePage(),this.CcDialogBuilder.cancel()},a.prototype.help=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.businessinfo.edit"),this.CONSUMER_DIALOGS.BUSINESS_CARD_HELP)},a}();BusinessCardModal.sections=["GeneralDescription","Contact","Social"],angular.module("siteGeneratorBuilderInternal").component("businessInfoModal",{templateUrl:"views/builder/business-info-modal.html",controller:BusinessCardModal});var LogoExtractionPopup=function(){function a(b,c,d,e,f,g,h,i,j,k,l,m){var n=this;this.initService=b,this.logoExtractionPopupService=c,this.builderLogoPersistence=d,this.$element=e,this.$interval=f,this.undoRedo=g,this.colorationUtils=h,this.$log=i,this.$q=j,this.flags=k,this.consumerBiLogger=l,this.defaultBackground=m,this.origin=this.logoExtractionPopupService.getOrigin(),this.consumerBiLogger.dialogs.show(null,null,null,this.getNameOfStep(this.getFirstStep()),this.origin),this.reposition(),this.interval=this.$interval(function(){n.reposition()},a.RepositionLoopDurationMs)}return a.$inject=["initService","logoExtractionPopupService","builderLogoPersistence","$element","$interval","undoRedo","colorationUtils","$log","$q","flags","consumerBiLogger","defaultBackground"],a.prototype.$onDestroy=function(){this.$interval.cancel(this.interval)},a.prototype.reposition=function(){var a=document.querySelectorAll(this.logoExtractionPopupService.getAnchorSelector());if(a.length){var b=a[a.length-1].getBoundingClientRect(),c=b.top+b.height/2,d=b.right+44,e=this.$element.get(0).getBoundingClientRect(),f=c-e.height/2,g=d;this.$element.css("top",f+"px"),this.$element.css("left",g+"px")}},a.prototype.getFirstStep=function(){switch(this.origin){case BIOrigins.HeaderPanel:return LogoCEWStep.SHOULD_I_EXTRACT_STEP;case BIOrigins.ClipartSettingsPanel:return LogoCEWStep.CREATING_PALETTE_STEP}},a.prototype.getNameOfStep=function(a){switch(a){case LogoCEWStep.SHOULD_I_EXTRACT_STEP:return"create-logo-color-palette";case LogoCEWStep.CREATING_PALETTE_STEP:return"extract-logo-color-palette";case LogoCEWStep.SHOULD_I_SAVE_STEP:return"logo-color-palette-ready"}},a.prototype.getPersistenceHandler=function(){return this.builderLogoPersistence},a.prototype.getPreparePalettePromise=function(){var a=this;return this.initService.init().then(function(){return a.colorationUtils.initialize()}).then(function(){return a.logoExtractionPopupService.getLogoColoration()}).then(function(){var b=a.colorationUtils.getLogoPalette();return b?{colors:b.colors,mode:a.colorationUtils.getLogoRecommendedColorationMode()}:(a.$log.debug("Expected to find a logo palette in colorationUtils"),a.$q.reject("Expected to find a logo palette in colorationUtils"))})},a.prototype.createLogoPaletteClick=function(a){this.consumerBiLogger.dialogs.approveChanges(null,null,null,this.getNameOfStep(a),null,this.origin)},a.prototype.skipLogoPaletteClick=function(a){this.consumerBiLogger.dialogs.cancel(null,null,null,this.getNameOfStep(a),this.origin),this.logoExtractionPopupService.hideLogoPopup()},a.prototype.saveLogoPaletteClick=function(a){this.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePallete(this.colorationUtils.numOfColors(a.colors),1,"logo",0,this.origin)},a.prototype.onDone=function(a){var b=this;if(a){var c=Date.now();this.colorationUtils.initialize().then(function(){return b.colorationUtils.useLogoColors({setColorationMode:!0,overrideMainColor:!0})}).then(function(){return b.undoRedo.captureOperation(!0,!0)}).then(function(){return b.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess(Date.now()-c,b.colorationUtils.numOfColors(a.colors),1,"logo",0,b.origin)})}this.logoExtractionPopupService.hideLogoPopup()},a}();LogoExtractionPopup.RepositionLoopDurationMs=200,angular.module("siteGeneratorStaticsConsumerAppInternal").component("logoExtractionPopup",{controller:LogoExtractionPopup,templateUrl:"views/builder/logo-extraction-popup.html"});var PanelMessage=function(){function a(){}return a}();angular.module("siteGeneratorBuilderInternal").component("panelMessage",{templateUrl:"views/builder/panel-message.html",transclude:!0,controller:PanelMessage});var SectionPanelManager=function(){function a(a){this.nodeFetcher=a}return a.$inject=["nodeFetcher"],a.prototype.getSectionFromContentId=function(a){var b=this.nodeFetcher.getNode(a);return{node:b&&b.node,sitePart:b&&b.sitePart}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("sectionPanelManager",SectionPanelManager);var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},SectionBackgroundModes={HEADER:"header",LIST:"list",NONE:"none"},SectionBackgroundManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D){this.sectionBackgroundService=a,this.$q=b,this.$stateParams=c,this.applicationState=d,this.nodeFetcher=e,this.storyServices=f,this.patternService=g,this.designKitParameters=h,this.previewColors=i,this.undoRedo=j,this.clientTopology=k,this.consumerMediaUtils=l,this.mediaOrganizeDataAdapter=m,this.contentElementFieldManager=n,this.consumerBiLoggerHelpers=o,this.overlayManager=p,this.mediaGallery=q,this.simpleSolutionManager=r,this.flags=s,this.consumerBiLogger=t,this.wizardService=u,this.sitePartTypes=v,this.designKit=w,this.PageFeatureList=x,this.$log=y,this.defaultBackground=z,this.backgroundScrollService=A,this.miscUtils=B,this.modelTree=C,this.modelTreeHelpers=D}return a.$inject=["sectionBackgroundService","$q","$stateParams","applicationState","nodeFetcher","storyServices","patternService","designKitParameters","previewColors","undoRedo","clientTopology","consumerMediaUtils","mediaOrganizeDataAdapter","contentElementFieldManager","consumerBiLoggerHelpers","overlayManager","mediaGallery","simpleSolutionManager","flags","consumerBiLogger","wizardService","sitePartTypes","designKit","PageFeatureList","$log","defaultBackground","backgroundScrollService","miscUtils","modelTree","modelTreeHelpers"],a.prototype.isBackgroundHidden=function(){var a=this.nodeFetcher.getCurrentNodeResult(),b=a&&a.sitePart===this.sitePartTypes.BODY&&a.node;return!!b&&!b.isList()&&this.sectionBackgroundService.isBackgroundHidden(b)},Object.defineProperty(a.prototype,"mode",{get:function(){switch(this.$stateParams.mode){case"header":return SectionBackgroundModes.HEADER;case"list":return SectionBackgroundModes.LIST;default:return SectionBackgroundModes.NONE}},enumerable:!0,configurable:!0}),a.prototype.getBackgroundIfMedia=function(a){return a&&a.mediaType!==core.BgMediaTypes.COLOR?a:void 0},a.prototype.getBackgroundSingleOrList=function(a){if(!this.modelTreeHelpers.isItemOfList(a)){a=this.modelTree.findIdentifyingNode(a);var b=this.getBackgroundIfMedia(this.sectionBackgroundService.getBackground(a));return b||this.getBackgroundIfMedia(this.sectionBackgroundService.getBackground(a,"header"))}},a.prototype.node=function(){return this.nodeFetcher.getCurrentNode()},a.prototype.extractNodeByMode=function(a,b){return b===SectionBackgroundModes.HEADER?a.children.find(function(a){return"ListHeader"===a.contentElementType}):b===SectionBackgroundModes.LIST?a.children.find(function(a){return"ListFooter"===a.contentElementType}):a},a.prototype.contentElement=function(){var a=_.get(this.extractNodeByMode(this.node(),this.mode),"contentElement");if(!a)throw"there is no contentElement";return a},Object.defineProperty(a.prototype,"selectedBackgroundForCurrentMode",{get:function(){switch(this.mode){case SectionBackgroundModes.HEADER:return this.sectionBackgroundService.getBackground(this.node(),"header");default:return this.sectionBackgroundService.getBackground(this.node())}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bgPart",{get:function(){return"header"===this.mode?"header":"body"},enumerable:!0,configurable:!0}),a.prototype.selectedAligment=function(){var a=this.node();return this.sectionBackgroundService.getBackgroundAlignment(a,this.bgPart)},a.prototype.setAligmentOption=function(a){var b=this.node();this.sectionBackgroundService.setBackgroundAlignment(b,a,this.bgPart),this.sectionBackgroundService.updateViewer(b)},a.prototype.setBgBackgroundColors=function(a,b){var c=this,d=this.selectedBackgroundForCurrentMode,e=0,f=b.length;return a.map(function(a){if("pattern"===a.mediaType){var g=void 0;return g=c.isEqual(a,d)?d.backgroundColor:b[e++%f],__assign({},a,{backgroundColor:g})}if("image"===a.mediaType){var h=c.getCurrentListSpan(),i=c.defaultBackground.getDefaultBackgroundConfForSection(h,c.mode===SectionBackgroundModes.HEADER,a);return i>=0?__assign({},a,{backgroundColor:_.find(b,function(a){return a.confId===i})}):a}return a})},a.prototype.validateBackgroundList=function(a){var b=this;Object.keys(a).forEach(function(c){a[c]&&(a[c]=a[c].filter(function(a){var c=b.validateBackground(a);return c||b.$log.debug("background is not valid",a),c}))})},a.prototype.calculateBackgrounds=function(){var a=this,b=_.pick(this.getBackgroundListForCurrentMode(),["pattern","color"]),c=b.color.slice();this.validateBackgroundList(b);var d=b.pattern,e=this.selectedBackgroundForCurrentMode;d=this.setBgBackgroundColors(d,c),this.flags.simpleBackgroundsOrder&&(d=this.moveUsedPatternsToTop(d));var f=d.map(function(b){return a.convertOrgToBackgroundObject(b,b.mediaId===e.mediaId)});return f.splice(0,0,f.splice(f.findIndex(function(a){return a.isSelected}),1)[0]),f},a.prototype.toggleOnFirstField=function(){var a=this.node(),b=this.getTitleField(a);b&&(this.consumerBiLogger.contentEditor.clickOnHideUnhideComponent(a.getId(),a.getSpecificContentElementType(),a.alias,b.key,b.data.subType,"unhide","section-background-panel"),b.active=!0)},a.prototype.getTitleField=function(b){var c=this.contentElementFieldManager.getNodeFields(b.contentElement,b);if(!c.find(function(a){return a.active})){var d=c.find(function(b){return b.key===a.LIST_TITLE_KEY});if(d)return d}},a.prototype.getParamsToBI=function(){var a=this.node();return a?[a.getContentElementType(),a.alias]:void this.$log.error("can't get node")},a.prototype.setBackground=function(a){var b=this,c=this.mode===SectionBackgroundModes.HEADER?"header":"body",d=[(a||{}).mediaType].concat(this.getParamsToBI(),[this.applicationState.getBackgroundModeForBi()]),e=d[0],f=d[1],g=d[2],h=d[3];return e&&this.consumerBiLogger.sectionDesign.changeBackgroundClick(e,f,g,h),this.sectionBackgroundService.setBackgroundAndUpdateViewer(this.node(),a,c).then(function(){if(b.flags.sectionMedia){var a=b.node();b.backgroundScrollService.setSectionOverrideWithInheritance(a,a.backgroundHasFaces?b.backgroundScrollService.SCROLL_TYPE.NONE:b.backgroundScrollService.getSiteOverride())}e&&b.consumerBiLogger.sectionDesign.changeBackgroundSuccess(e,f,g,h),b.undoRedo.captureOperation()})},a.prototype.createSorter=function(b,c,d){return void 0===d&&(d=a.STRIP_SLIDESHOW),{type:b,count:c,galleryType:d}},a.prototype.getCategory=function(a){return"color"===a.data.type||"pattern"===a.data.type?a.data.type:"media"},a.prototype.getSelectedBackgroundAsThumbnail=function(){var a=this.node();return a&&a.isList()?{headerBg:this.convertSelectedFromApi(this.sectionBackgroundService.getBackground(a,"header"),"header"),bg:this.convertSelectedFromApi(this.sectionBackgroundService.getBackground(a))}:this.convertSelectedFromApi(this.sectionBackgroundService.getBackground(a))},a.prototype.uploadBackground=function(a){var b=this;return a===cc.MediaPreviewType.MultipleImages?this.uploadGallery().then(function(c){return b.handleBgResult(c,a)}):this.uploadSingleMedia(a).then(function(c){return b.handleBgResult(c,a)})},a.prototype.handleBgResult=function(a,b){var c=this,d=this.contentElement(),e=this.getMediaField(d).value;a.data.forEach(function(a){c.convertUsage(a,e),c.normaizeFileUrl(a),b===cc.MediaPreviewType.Video&&c.fixVideoFormat(a)}),a.isChanged&&d&&d.fillValuesByMediaType();var f=this.extractBackground(a,b);return this.convertOrgToBackgroundObject(f,!1)},a.prototype.fixVideoFormat=function(a){"file"===a.relativeUri&&(a.fileUrl=a.fileBaseUrl,a.relativeUri=a.id)},a.prototype.normaizeFileUrl=function(a){a.fileUrl||(a.fileUrl="media/"+a.relativeUri)},a.prototype.convertUsage=function(a,b){var c=_.find(b,{relativeUri:a.relativeUri,usage:core.MediaUsageType.Content});c&&(c.usage=core.MediaUsageType.All)},a.prototype.uploadSingleMedia=function(a){var b=this.node();this.consumerBiLoggerHelpers.organizeMediaNode=b;var c=this.createCEMedia();return this.consumerMediaUtils.getChangeMediaMethod(b,a)(c,this.getCurrentSegment(),!0)},a.prototype.openGalleryOrganizer=function(a){var b=this;return void 0===a&&(a=[]),this.uploadGallery(a).then(function(a){return b.handleBgResult(a,cc.MediaPreviewType.MultipleImages)})},a.prototype.uploadGallery=function(a){void 0===a&&(a=[]);var b=this.node();this.consumerBiLoggerHelpers.organizeMediaNode=b;var c=this.createCEMedia();return this.consumerMediaUtils.getChangeMediaMethod(b,cc.MediaPreviewType.MultipleImages)(c,null,!0,a)},a.prototype.extractBackground=function(b,c){switch(c){case cc.MediaPreviewType.MultipleImages:return this.createGallery(a.STRIP_SLIDESHOW,b.data);case cc.MediaPreviewType.SingleImage:var d=ob.deepClone(b.data[0]);return d.mediaType="image",d;default:return b.data[0]}},a.prototype.createCEMedia=function(){var a=this.contentElement();return{contentElement:a,media:this.getMediaField(a).value}},a.prototype.getMediaField=function(a){var b=_.find(a.values,{type:core.ElementTypes.Media});if(!b)throw"mediaField not found in contentElement";return b},a.prototype.getCurrentSegment=function(){var a=this.applicationState.getContentFocus();if(a&&"header"!==a.sitePart){var b=this.node();return b&&this.overlayManager.listSpanManager.getSegmentByNodeId(b.getId(),a.sitePart)}},a.prototype.getCurrentListSpan=function(){var a=this.node();return a&&this.overlayManager.listSpanManager.getByNodeId(a.getId())},a.prototype.getPageId=function(){return this.storyServices.story?this.storyServices.story.selectedPage:""},Object.defineProperty(a.prototype,"usedPatternsUrls",{get:function(){try{return this.PageFeatureList.getPatternList(this.getPageId()).map(function(a){return a.relativeUri})}catch(a){return this.$log.error("can't get usedPatterns. error:",a),[]}},enumerable:!0,configurable:!0}),a.prototype.moveUsedPatternsToTop=function(a){var b,c,d=this,e=angular.copy(a);b=c=a.findIndex(function(a){return"pattern"===a.mediaType});var f=a[b].label;return delete e[b].label,this.usedPatternsUrls.forEach(function(a){var b=e.findIndex(function(b){if("pattern"!==b.mediaType)return!1;var c=d.getPattern(b);return a===c});b>-1&&(e.splice(c,0,e.splice(b,1)[0]),c++)}),e[b].label=f,e},a.prototype.getVideoUrlFromBackgrounds=function(a,b){var c=this.sectionBackgroundService.getBackgroundOptions(this.node(),"header"===b?"header":"body"),d=c.video.find(function(b){return b.relativeUri===a});return d?this.getVideo(d):void this.$log.error("can't get video from videoId: "+a)},a.prototype.convertSelectedFromApi=function(a,b){var c=this;if(void 0===b&&(b=SectionBackgroundModes.NONE),a){var d;switch(a.mediaType){case"color":d=this.getColor(a);break;case"image":d=this.extractImageURL(a.mediaId);break;case"video":var e=/.+?(?=video)/.exec(a.mediaId);if(e&&e.length){var f=e[0];d=this.getVideoUrlFromBackgrounds(f,b)}else this.$log.error("can't get video from mediaId: "+a.mediaId);break;case"gallery":d=a.mediaIds.map(function(a){return c.extractImageURL(a)});break;case"pattern":d=this.getPattern(a)}var g={data:{type:a.mediaType,value:d},isSelected:!1,org:null};switch(a.mediaType){case"gallery":g.data.metaData={galleryType:this.getGalleryType(a.galleryType)};break;case"pattern":g.data.metaData={patternBgColor:this.getColor(a.backgroundColor),thumbRatio:a.thumbRatio}}return g}},a.prototype.extractImageURL=function(a){var b,c=/.+?(?=media)/.exec(a);return c&&c.length?b=c[0]:(c=/\.(gif|jpe?g|png)$/i.exec(a),c?b=c.input:this.$log.error("can't get image from mediaId: "+a)),b},a.prototype.getBackgroundListForCurrentMode=function(){switch(this.mode){case"header":return ob.deepClone(this.sectionBackgroundService.getBackgroundOptions(this.node(),"header"));default:return ob.deepClone(this.sectionBackgroundService.getBackgroundOptions(this.node()))}},a.prototype.createGallery=function(a,b){return{mediaType:"gallery",galleryType:a,galleryProps:{},mediaItems:b}},a.prototype.convertOrgToBackgroundObject=function(a,b){if(a){var c;c=this.getPattern(a);var d={data:{type:a.mediaType,value:c},isSelected:b,org:a};return d.data.metaData={patternBgColor:this.getColor(a.backgroundColor),thumbRatio:a.thumbRatio},d}},a.prototype.isEqual=function(a,b){if(void 0===b&&(b=this.selectedBackgroundForCurrentMode),!a||!b||a.mediaType!==b.mediaType)return!1;switch(a.mediaType){case"color":return a.color===b.color&&a.confId===b.confId;case"image":case"video":return _(b.mediaId).contains(a.relativeUri);case"gallery":return a.galleryType===b.galleryType;case"pattern":return a.mediaId===b.mediaId}},a.prototype.getGalleryType=function(a){return"slideshow"},a.prototype.getPattern=function(a){var b=this.simpleSolutionManager.getNodeSelectedLg(this.node(),this.mode);return this.patternService.getPattern(a,b)},a.prototype.getColor=function(a){var b=this.designKitParameters[a.color];return this.previewColors.getRGBColor(b)},a.prototype.getVideo=function(a){return this.clientTopology.videoUrl+a.fileOutput.video[0].url},a.prototype.hideMedia=function(){var b=this,c=this.node(),d=this.contentElementFieldManager.getNodeFields(c.contentElement,c),e=d.find(function(b){return b.data.type===a.MEDIA_KEY});this.consumerBiLogger.contentEditor.clickOnHideUnhideComponent(c.getId(),c.getSpecificContentElementType(),c.alias,e.key,e.data.subType,"hide","section-background-panel"),e.active=!1,this.updateViewer(c).then(function(){b.undoRedo.captureOperation()})},a.prototype.convertMediaPreviewTypeToBi=function(a){return["image","gallery","video"][a]},a.prototype.updateViewer=function(a){var b=this,c=Object.keys(a.contentElement.values).find(function(b){return"media"===a.contentElement.values[b].type});return this.wizardService.onSynchronousFieldChanged(a,c,null,!0,void 0,void 0).then(function(){b.storyServices.reRender()})},a.prototype.validateBackground=function(a){return!!a&&("color"!==a.mediaType||"confId"in a&&"color"in a)},a}();SectionBackgroundManager.STRIP_SLIDESHOW="Strip Slideshow",SectionBackgroundManager.LIST_TITLE_KEY="listTitle",SectionBackgroundManager.MEDIA_KEY="media",angular.module("siteGeneratorStaticsConsumerAppInternal").service("sectionBackgroundManager",SectionBackgroundManager);var AnimationUtils=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){this.$q=a,this.animationKit=b,this.animationKitPreview=c,this.animationNoPatternIdentifier=d,this.animationInheritPatternIdentifier=e,this.overlayManager=f,this.modelTree=g,this.layoutSolver=h,this.previewService=i,this.spinnerService=j,this.flags=k,this.storyServices=l,this.$translate=m,this.pagesManager=n,this.animationPatterns=o}return a.$inject=["$q","animationKit","animationKitPreview","animationNoPatternIdentifier","animationInheritPatternIdentifier","overlayManager","modelTree","layoutSolver","previewService","spinnerService","flags","storyServices","$translate","pagesManager","animationPatterns"],a.prototype.getDefaultSiteAnimation=function(){return this.animationKit.getDefaultSiteAnimation()},a.prototype.getActivePatternForSite=function(){return this.animationKit.getActivePatternForSite()},a.prototype.getActivePatternLabelForSite=function(){return this.animationPatterns[this.getActivePatternForSite()].label},a.prototype.getActivePatternForSection=function(a,b){return this.animationKit.getActivePatternForSection(a,b)},a.prototype.visibleLGs=function(){return this.overlayManager.listSpanManager.getLayoutGroupsInViewport()},a.prototype.animateVisibleLGs=function(){var a=this.visibleLGs();_.invoke(a,"playAnimations")},a.prototype.animateNode=function(a){var b=this.overlayManager.listSpanManager.getByNodeId(a.id);_.invoke(b.groups,"playAnimations")},a.prototype.refreshAnimationsForPart=function(a,b){var c=this;void 0===b&&(b=void 0);var d=this.layoutSolver.getPartSolutions(a,b);if(d){var e=d.getSelectedSolution();_.each(e,function(a){c.animationKitPreview.refreshAnimationsForLg(a)})}},a.prototype.refreshAnimationsForNode=function(a,b){var c=this,d=this.overlayManager.listSpanManager.getByNodeId(a.id,b);_.each(d.groups,function(a){c.animationKitPreview.refreshAnimationsForLg(a)})},a.prototype.refreshAnimations=function(){var a=this;_.each(this.modelTree.getPagesNodes(),function(b){a.refreshAnimationsForPart("body",b.id)})},a.prototype.setSiteAnimationPattern=function(a){var b=this;return this.animationKit.setPatternForSite(a),this.$q.when().then(function(){return b.refreshAnimations(),b.previewService.waitForChanges()})},a.prototype.previewPattern=function(a){var b=_.reject(this.visibleLGs(),function(a){return a.isSiteHeader()});this.previewPatternForLgs(b,a)},a.prototype.previewPatternForLgs=function(a,b){var c=this;this.animationKitPreview.stopRunningAnimations(),_.each(a,function(a){c.animationKitPreview.previewPatternForLg(a,b)})},a.prototype.setSectionAnimationPattern=function(a,b,c){return this.animationKit.setPatternForSection(a,b,c),this.refreshAnimationsForNode(a,b),this.previewService.waitForChanges()},a.prototype.doSiteAndSectionPatternsMatch=function(){return this.animationKit.doSiteAndSectionPatternsMatch()},a.prototype.forceSitePattern=function(){return this.animationKit.clearOverridableSections(),this.refreshAnimations(),this.previewService.waitForChanges()},a.prototype.translateTerm=function(a,b){return this.$translate.instant(b+"."+a.toLowerCase().replace(/\s/g,"-"))},a.prototype.placeLabels=function(a,b,c){var d=this;return a.map(function(a){return _.extend(a,{label:d.translateTerm(a[b],c)})})},a.prototype.getPagesTranslationNames=function(){var a=this;return this.pagesManager.getPagesTransitionNames().map(function(b){return{label:a.translateTerm(b,"page-transition"),value:b}})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("animationUtils",AnimationUtils);var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},coloration;!function(a){function b(a){return a&&void 0!==a.colors}a.PALETTE_DIALOG_OPEN_CLASS="palette-color-dialog-open",a.INVALID_PALETTE_INDEX=-1,a.CUSTOM_PALETTE_INDEX=-2,a.LOGO_PALETTE_INDEX=-3;var c="#ffffff",d="#181818",e="#000000",f=.76,g=.24,h=14,i="recentColors",j=6,k=50,l=2.8,m="[data-main-color] .p21-color-tag";a.ColorationMode=ThemeChooser.COLORATION_METHOD_TYPE,a.ColorationLevel=ThemeChooser.COLORATION_LEVEL,a.isPalette=b;var n=function(){function a(a,b,c){this.colors=a,this.blackAndWhite=b,this.utils=c,this.isColorLight=a.map(function(a){return c.isLightColor(a,b)}),this.firstLight=this.isColorLight.indexOf(!0),this.firstDark=this.isColorLight.indexOf(!1)}return a.prototype.getExistingLight=function(){var a=this.colors[this.firstLight]||c;return this.firstLight=this.isColorLight.indexOf(!0,this.firstLight+1),a},a.prototype.getExistingDark=function(){var a=this.colors[this.firstDark]||d;return this.firstDark=this.isColorLight.indexOf(!1,this.firstDark+1),a},a.prototype.getLight=function(){return-1!==this.firstLight?this.getExistingLight():this.utils.toLightColor(this.getExistingDark(),this.blackAndWhite)},a.prototype.getDark=function(){return-1!==this.firstDark?this.getExistingDark():this.utils.toDarkColor(this.getExistingLight(),this.blackAndWhite)},a.prototype.getFirst=function(){return-1===this.firstDark||-1!==this.firstLight&&this.firstLight<this.firstDark?this.getExistingLight():this.getExistingDark()},a.prototype.getComplementary=function(a){return this.utils.isLightColor(a,this.blackAndWhite)?this.getDark():this.getLight()},a}(),o=function(){function o(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){this.consumerBiLogger=b,this.logoColorService=c,this.initService=d,this.themeChooser=e,this.themeChooserUtils=f,this.contentManager=g,this.chroma=h,this.colorApi=i,this.localStorageService=j,this.$timeout=k,this.$q=l,this.$log=m,this.storyServices=n,this.$rootScope=o,this.simpleSolutionManager=p,this.tpaService=q,this.designKit=r,this.modelTree=s,this.flags=t,this.layoutSelectionStoreProvider=u,this.paletteGenerator=v,this.activePaletteIndex=a.INVALID_PALETTE_INDEX,this.shouldUpdatePalettes=!1,this.isUpdatingPalettes=!1,this.isSwitchingMainColor=!1}return o.$inject=["consumerBiLogger","logoColorService","initService","themeChooser","themeChooserUtils","contentManager","chroma","colorApi","localStorageService","$timeout","$q","$log","storyServices","$rootScope","simpleSolutionManager","tpaService","designKit","modelTree","flags","layoutSelectionStoreProvider","paletteGenerator"],o.prototype.initialize=function(){var a=this;return this.initPromise?this.initPromise:(this.initPromise=this.initService.loaded().then(function(){return a.themeChooser.initialize()}).then(function(){return a.$timeout(function(){return a.loadStoryColoration()})}).then(function(){return a.listenToUndoRedo()}),this.initPromise)},o.prototype.setShouldUpdatePalettes=function(){this.shouldUpdatePalettes=!0},o.prototype.loadStoryColoration=function(){this.storyColoration=this.storyServices.story.coloration,this.storyColoration||(this.storyServices.story.coloration=this.storyColoration={},this.resetColoration()),this.adjustCustomMainColorForNewColoration(),this.checkIntegrity(),this.shouldUpdatePalettes=!0},o.prototype.checkIntegrity=function(){var a=this.themeChooser.coloration.getActiveKitColors(),b=this.storyColoration.activePalette;this.arePalettesEqual(a,b)||(this.$log.error("colorationUtils: integrity check failed"),this.themeChooserUtils.logColors("error","colorationUtils: expected colors '"+JSON.stringify(b.colors)+"'",_.values(b.colors)),this.themeChooserUtils.logColors("error","colorationUtils: actual colors '"+JSON.stringify(a)+"'",_.values(a)),this.storyColoration.activePalette={colors:a,numOfColors:this.numOfColors(a),creator:"error"})},o.prototype.adjustCustomMainColorForNewColoration=function(){var a=this.themeChooser.coloration.getActiveKitColors(),b=this.themeChooser.coloration.getActiveKitDefaultColors(),c=!0;this.flags.newColorationUpdateKitPalettes&&(c=this.themeChooserUtils.isNewColorationPalette(a)===this.themeChooserUtils.isNewColorationPalette(b));var d=this.storyColoration,e=d.activePalette,f=d.customMainColor,g=d.logoPalette;this.arePalettesEqual(e,g)||!!f!=!this.areColorsEqual(a.mainColor,b.mainColor)&&c&&(f||(this.storyColoration.customMainColor=a.mainColor))},o.prototype.listenToUndoRedo=function(){var a=this;this.$rootScope.$on(UndoEvents.STORY_REVISION_CHANGED,function(){return a.loadStoryColoration()})},
o.prototype.resetColoration=function(){var a=this.themeChooser.coloration.getActiveKitDefaultColors();this.storyColoration.activePalette={colors:a,creator:"default",numOfColors:this.numOfColors(a)},this.storyColoration.customPalette=null,this.storyColoration.customMainColor=null,this.shouldUpdatePalettes=!0},o.prototype.areKitColorsOverriden=function(){var a=this.themeChooser.coloration.getActiveKitDefaultColors();return!this.arePalettesEqual(a,this.storyColoration.activePalette)},o.prototype.setActivePaletteByIndex=function(b,c){var d;if(this.isPaletteIndexReferringToCalculatedPalette(b))d=this.palettes[b];else if(b===a.CUSTOM_PALETTE_INDEX){var e=this.storyColoration.customPalette;if(!e)return this.$log.error("colorationUtils: cannot set custom palette as active, custom palette doesn't exist"),this.$q.reject();d=e}else{if(b!==a.LOGO_PALETTE_INDEX)return this.$log.error("colorationUtils: palette index is out of range"),this.$q.reject();var f=this.storyColoration.logoPalette;if(!f)return this.$log.error("colorationUtils: cannot set logo palette as active, logo palette doesn't exist"),this.$q.reject();d=f}return this.setActivePaletteIndex(b),this.storyColoration.activePalette=d,this.layoutSelectionStoreProvider.getLayoutSelectionStore().resetFieldColorOverrides(),this.flags.newColorationPalettes&&null!==c?this.themeChooser.coloration.setActiveKitColorsAndMode(d.colors,void 0,!1,c):this.themeChooser.coloration.setActiveKitColors(d.colors)},o.prototype.setActivePaletteIndex=function(a){this.activePaletteIndex=a},o.prototype.getActivePaletteIndex=function(){return this.activePaletteIndex},o.prototype.getActivePalette=function(){return this.storyColoration.activePalette},o.prototype.getCustomPalette=function(){return this.storyColoration.customPalette},o.prototype.getLogoPalette=function(){return this.storyColoration.logoPalette},o.prototype.getLogoRecommendedColorationMode=function(){return this.storyColoration.logoRecommendedColorationMode},o.prototype.getNumPalettes=function(){return this.getPalettes().length+(this.getCustomPalette()?1:0)+(this.getLogoPalette()?1:0)},o.prototype.getMainColor=function(){return this.storyColoration.customMainColor||this.themeChooser.coloration.getActiveKitDefaultColors().mainColor},o.prototype.setCustomMainColor=function(a){this.storyColoration.customMainColor=a,this.shouldUpdatePalettes=!0},o.prototype.switchMainColor=function(a){var b=this,c=function(a){var c=b.$q.defer();return $(m).off("transitionend").one("transitionend",function(){return c.resolve()}),b.$timeout(function(){return c.resolve()}),c.promise};return this.isSwitchingMainColor=!0,this.storyColoration.customMainColor=a,c(a).then(function(){return b.storyColoration.customPalette=null}).then(function(){return b.generatePalettes("selectSimilar")}).finally(function(){b.isSwitchingMainColor=!1})},o.prototype.numOfColors=function(a){return a.fourthColor?6:a.thirdColor?5:a.secondaryColor?4:3},o.prototype.saveLogoPaletteAsCustom=function(){this.activePaletteIndex===a.LOGO_PALETTE_INDEX&&(this.storyColoration.customPalette=this.storyColoration.logoPalette,this.activePaletteIndex=a.CUSTOM_PALETTE_INDEX),this.storyColoration.logoPalette=null},o.prototype.setCustomColors=function(b,e){var f=__assign({},b),g=this.numOfColors(f),h=!this.areColorsEqual(this.storyColoration.activePalette.colors.mainColor,f.mainColor),i={colors:f,creator:"custom",numOfColors:g};return 3===g&&this.areColorsEqual(f.white,c)&&this.areColorsEqual(f.black,d)?(this.storyColoration.customPalette=null,this.storyColoration.activePalette=i):(this.storyColoration.customPalette=i,this.storyColoration.activePalette=i,this.activePaletteIndex=a.CUSTOM_PALETTE_INDEX),h&&this.setCustomMainColor(f.mainColor),this.flags.newColorationCustomPalette&&this.themeChooserUtils.isNewColorationPalette(f)?this.themeChooser.coloration.setActiveKitColorsForCustomPalette(f):this.themeChooser.coloration.setActiveKitColorsAndMode(f,e)},o.prototype.preparePaletteFromLogo=function(a,b){var c,d,e=this;return this.$q.when(a).then(function(a){return c=Date.now(),e.consumerBiLogger.siteDesign.createPaletteFromLogoAlgoStart(b),e.logoColorService.extractLogoColorsFromWixImage(a,function(){d=Date.now(),e.onLogoImageLoaded(c,b)})}).then(function(a){return e.consumerBiLogger.siteDesign.createPaletteFromLogoAlgoSuccess(Date.now()-c,Date.now()-d,"palette extraction",b,e.numOfColors(a.colors)),a})},o.prototype.onLogoImageLoaded=function(a,b){this.consumerBiLogger.siteDesign.createPaletteFromLogoAlgoSuccess(null,Date.now()-a,"image download",b,null)},o.prototype.setLogoColors=function(a){var b=__assign({},a.colors),c=this.numOfColors(b),d={colors:b,creator:"logo",numOfColors:c};this.storyColoration.logoPalette=d,this.storyColoration.logoRecommendedColorationMode=a.mode,this.forgetCustomPaletteIfDupeOfLogo()},o.prototype.useLogoColors=function(b){var c=void 0===b?{}:b,d=c.setColorationMode,e=void 0!==d&&d,f=c.overrideMainColor,g=void 0!==f&&f,h=this.storyColoration,i=h.logoPalette,j=h.logoRecommendedColorationMode;this.storyColoration.activePalette=i,this.activePaletteIndex=a.LOGO_PALETTE_INDEX,g&&this.setCustomMainColor(i.colors.mainColor),this.forgetCustomPaletteIfDupeOfLogo();var k=void 0;return e&&(k=null!==j?j:a.ColorationMode.light),this.themeChooser.coloration.setActiveKitColorsAndMode(i.colors,k)},o.prototype.forgetCustomPaletteIfDupeOfLogo=function(){this.arePalettesEqual(this.storyColoration.customPalette,this.storyColoration.logoPalette)&&(this.storyColoration.customPalette=null,this.activePaletteIndex===a.CUSTOM_PALETTE_INDEX&&(this.activePaletteIndex=a.LOGO_PALETTE_INDEX))},o.prototype.arePalettesEqual=function(a,c){return!(!a||!c)&&(a=b(a)?a.colors:a,c=b(c)?c.colors:c,this.areColorsEqual(a.mainColor,c.mainColor)&&this.areColorsEqual(a.secondaryColor,c.secondaryColor)&&this.areColorsEqual(a.thirdColor,c.thirdColor)&&this.areColorsEqual(a.fourthColor,c.fourthColor)&&this.areColorsEqual(a.white,c.white)&&this.areColorsEqual(a.black,c.black))},o.prototype.areColorsEqual=function(a,b){return!!a&&!!b&&a.toLowerCase()===b.toLowerCase()||!a&&!b},o.prototype.findPaletteSimilarToActive=function(b){var c=this,d=a.INVALID_PALETTE_INDEX,e=this.storyColoration.activePalette;if(3===e.numOfColors)d=b.findIndex(function(a){return 3===a.numOfColors});else{var f=function(a){return c.themeChooserUtils.calculateKitConfiguration(a.colors,c.getColorationMode())},g=f(e),h=b.filter(function(a){return f(a)===g}),i=h.filter(function(a){return a.numOfColors===e.numOfColors}),j=i.length>0?i:h,k=this.findClosestPalette(j,e);d=b.indexOf(k)}return d===a.INVALID_PALETTE_INDEX&&(d=0),d},o.prototype.findClosestPalette=function(a,b){var c=this,d=b.colors,e=d.mainColor,f=d.secondaryColor,g=this.chroma(e).hsl()[2]-this.chroma(f).hsl()[2],h=this.chroma(this.storyColoration.customMainColor).hsl(),i=h[2],j=i-g,k=a[0],l=10;return a.forEach(function(a){if(a.colors.secondaryColor){var b=c.chroma(a.colors.secondaryColor).hsl(),d=b[2];Math.abs(d-j)<l&&(l=Math.abs(d-j),k=a)}}),k},o.prototype.getActivePaletteIndexBasedOnActiveColorationLevel=function(){var a=this.getColorationLevel();void 0===a&&(a=coloration.ColorationLevel.colorful);var b={palette4Colors:0,palette5Colors:1,palette6Colors:2};switch(a){case coloration.ColorationLevel.plain:return b.palette4Colors;case coloration.ColorationLevel.tinted:case coloration.ColorationLevel.colorful:return b.palette5Colors;case coloration.ColorationLevel.vibrant:return b.palette6Colors;default:return b.palette4Colors}},o.prototype.getPaletteColors=function(){return this.storyColoration.activePalette?this.storyColoration.activePalette.colors:this.themeChooser.coloration.getActiveKitColors()},o.prototype.getCurrentState=function(){return{storyColoration:this.storyColoration&&__assign({},this.storyColoration),palettes:this.palettes&&this.palettes.slice(),activePaletteIndex:this.activePaletteIndex,shouldUpdatePalettes:this.shouldUpdatePalettes}},o.prototype.restoreState=function(a){return Object.assign(this.storyColoration,a.storyColoration),this.palettes=a.palettes,this.activePaletteIndex=a.activePaletteIndex,this.shouldUpdatePalettes=a.shouldUpdatePalettes,this.themeChooser.coloration.setActiveKitColors(this.storyColoration.activePalette.colors)},o.prototype.areColorsReadable=function(a){if(!this.areKitColorsOverriden())return!0;var b=this,c=b.chroma,d=b.themeChooserUtils,e=a.thirdColor,f=a.fourthColor,g=d.generate6Colors(a).map(function(a){return c(a)}),h=g[0],i=g[1],j=g[2],k=g[3],m=g[4],n=g[5],o=function(a){var b=c(a).luminance();return h.luminance()>=b&&b>=k.luminance()},p=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return b.filter(function(b){return d.isDarkColor(b,a)}).length};return h.luminance()>k.luminance()&&3===p(h,i,j,k,m,n)&&c.contrast(h,k)>l&&c.contrast(h,m)>l&&c.contrast(h,n)>l&&c.contrast(k,i)>l&&c.contrast(k,j)>l&&(!e||o(e))&&(!f||o(f))},o.prototype.makeColorsReadable=function(a){switch(this.numOfColors(a)){case 3:return this.make3ColorsReadable(a);case 4:return this.make4ColorsReadable(a);case 5:return this.make5ColorsReadable(a);case 6:return this.make6ColorsReadable(a)}},o.prototype.make3ColorsReadable=function(a){var b,d,f,g,h,i,j=this,k=j.chroma,m=j.themeChooserUtils,n=a.mainColor,o=a.black,p=a.white,q=function(){a=m.generate6Colors({mainColor:n,black:o,white:p}).map(function(a){return k(a)}),b=a[0],d=a[1],f=a[2],g=a[3],h=a[4],i=a[5];var a};if(q(),g.luminance()>b.luminance()){var r=o;o=p,p=r,q()}for(;k.contrast(g,b)<l;)o=g.darken(.1).hex(),p=b.brighten(.1).hex(),q();for(var s={black:o,white:p};m.isLightColor(n,s)&&k.contrast(n,e)<l;)n=k(n).brighten(.1).hex(),q();for(;m.isDarkColor(n,s)&&k.contrast(n,c)<l;)n=k(n).darken(.1).hex(),q();for(;(k.contrast(b,g)<l||k.contrast(b,h)<l||k.contrast(b,i)<l)&&!this.areColorsEqual(p,c);)p=b.brighten(.3).hex(),q();for(;(k.contrast(g,d)<l||k.contrast(g,f)<l)&&!this.areColorsEqual(o,e);)o=g.darken(.3).hex(),q();return{mainColor:n,black:o,white:p}},o.prototype.make4ColorsReadable=function(a){var b,d,f,g,h,i,j=this,k=j.chroma,m=j.themeChooserUtils,n=a.mainColor,o=a.secondaryColor,p=a.black,q=a.white,r=function(){a=m.generate6Colors({mainColor:n,secondaryColor:o,black:p,white:q}).map(function(a){return k(a)}),b=a[0],d=a[1],f=a[2],g=a[3],h=a[4],i=a[5];var a};if(r(),g.luminance()>b.luminance()){var s=p;p=q,q=s,r()}for(;k.contrast(g,b)<l;)p=g.darken(.1).hex(),q=b.brighten(.1).hex(),r();for(var t={black:p,white:q};m.isLightColor(n,t)&&k.contrast(n,e)<l;)n=k(n).brighten(.1).hex(),r();for(;m.isDarkColor(n,t)&&k.contrast(n,c)<l;)n=k(n).darken(.1).hex(),r();for(;m.isLightColor(o,t)&&k.contrast(o,e)<l;)o=k(o).brighten(.1).hex(),r();for(;m.isDarkColor(o,t)&&k.contrast(o,c)<l;)o=k(o).darken(.1).hex(),r();for(;(k.contrast(b,g)<l||k.contrast(b,h)<l||k.contrast(b,i)<l)&&!this.areColorsEqual(q,c);)q=b.brighten(.3).hex(),r();for(;(k.contrast(g,d)<l||k.contrast(g,f)<l)&&!this.areColorsEqual(p,e);)p=g.darken(.3).hex(),r();return{mainColor:n,secondaryColor:o,black:p,white:q}},o.prototype.make5ColorsReadable=function(a){var b,d,f,g,h,i,j=this,k=j.chroma,m=j.themeChooserUtils,n=a.mainColor,o=a.secondaryColor,p=a.thirdColor,q=a.black,r=a.white,s=function(){a=m.generate6Colors({mainColor:n,secondaryColor:o,thirdColor:p,black:q,white:r}).map(function(a){return k(a)}),b=a[0],d=a[1],f=a[2],g=a[3],h=a[4],i=a[5];var a};if(s(),g.luminance()>b.luminance()){var t=q;q=r,r=t,s()}if(k(p).luminance()>b.luminance()){var t=p;p=r,r=t,s()}if(k(p).luminance()<g.luminance()){var t=p;p=q,q=t,s()}for(;k.contrast(g,b)<l;)q=g.darken(.1).hex(),r=b.brighten(.1).hex(),s();var u={black:q,white:r},v=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return a.filter(function(a){return m.isDarkColor(a,u)}).length};for(v(n,o,p)>2&&(p=m.toLightColor(p,u),s()),v(n,o,p)<1&&(p=m.toDarkColor(p,u),s());m.isLightColor(n,u)&&k.contrast(n,e)<l;)n=k(n).brighten(.1).hex(),s();for(;m.isDarkColor(n,u)&&k.contrast(n,c)<l;)n=k(n).darken(.1).hex(),s();for(;m.isLightColor(o,u)&&k.contrast(o,e)<l;)o=k(o).brighten(.1).hex(),s();for(;m.isDarkColor(o,u)&&k.contrast(o,c)<l;)o=k(o).darken(.1).hex(),s();for(;m.isLightColor(p,u)&&k.contrast(p,e)<l;)p=k(p).brighten(.1).hex(),s();for(;m.isDarkColor(p,u)&&k.contrast(p,c)<l;)p=k(p).darken(.1).hex(),s();for(;(k.contrast(b,g)<l||k.contrast(b,h)<l||k.contrast(b,i)<l)&&!this.areColorsEqual(r,c);)r=b.brighten(.3).hex(),s();for(;(k.contrast(g,d)<l||k.contrast(g,f)<l)&&!this.areColorsEqual(q,e);)q=g.darken(.3).hex(),s();return{mainColor:n,secondaryColor:o,thirdColor:p,black:q,white:r}},o.prototype.make6ColorsReadable=function(a){var b,d,f,g,h,i,j=this,k=j.chroma,m=j.themeChooserUtils,n=a.mainColor,o=a.secondaryColor,p=a.thirdColor,q=a.fourthColor,r=a.black,s=a.white,t=function(){a=m.generate6Colors({mainColor:n,secondaryColor:o,thirdColor:p,fourthColor:q,black:r,white:s}).map(function(a){return k(a)}),b=a[0],d=a[1],f=a[2],g=a[3],h=a[4],i=a[5];var a};if(t(),g.luminance()>b.luminance()){var u=r;r=s,s=u,t()}if(k(p).luminance()>k(q).luminance()){if(k(p).luminance()>b.luminance()){var u=p;p=s,s=u,t()}if(k(q).luminance()<g.luminance()){var u=q;q=r,r=u,t()}}else{if(k(q).luminance()>b.luminance()){var u=q;q=s,s=u,t()}if(k(p).luminance()<g.luminance()){var u=p;p=r,r=u,t()}}for(;k.contrast(g,b)<l;)r=g.darken(.1).hex(),s=b.brighten(.1).hex(),t();var v={black:r,white:s},w=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return a.filter(function(a){return m.isDarkColor(a,v)}).length};for(w(n,o,p,q)>2&&(q=m.toLightColor(q,v),t()),w(n,o,p,q)>2&&(p=m.toLightColor(p,v),t()),w(n,o,p,q)<2&&(q=m.toDarkColor(q,v),t()),w(n,o,p,q)<2&&(p=m.toDarkColor(p,v),t());m.isLightColor(n,v)&&k.contrast(n,e)<l;)n=k(n).brighten(.1).hex(),t();for(;m.isDarkColor(n,v)&&k.contrast(n,c)<l;)n=k(n).darken(.1).hex(),t();for(;m.isLightColor(o,v)&&k.contrast(o,e)<l;)o=k(o).brighten(.1).hex(),t();for(;m.isDarkColor(o,v)&&k.contrast(o,c)<l;)o=k(o).darken(.1).hex(),t();for(;m.isLightColor(p,v)&&k.contrast(p,e)<l;)p=k(p).brighten(.1).hex(),t();for(;m.isDarkColor(p,v)&&k.contrast(p,c)<l;)p=k(p).darken(.1).hex(),t();for(;m.isLightColor(q,v)&&k.contrast(q,e)<l;)q=k(q).brighten(.1).hex(),t();for(;m.isDarkColor(q,v)&&k.contrast(q,c)<l;)q=k(q).darken(.1).hex(),t();for(;(k.contrast(b,g)<l||k.contrast(b,h)<l||k.contrast(b,i)<l)&&!this.areColorsEqual(s,c);)s=b.brighten(.3).hex(),t();for(;(k.contrast(g,d)<l||k.contrast(g,f)<l)&&!this.areColorsEqual(r,e);)r=g.darken(.3).hex(),t();return{mainColor:n,secondaryColor:o,thirdColor:p,fourthColor:q,black:r,white:s}},o.prototype.setColorationMode=function(a){return this.themeChooser.coloration.setActiveKitColorationMode(a)},o.prototype.setColorationLevel=function(a){return this.themeChooser.coloration.setActiveKitColorationLevel(a)},o.prototype.getColorationMode=function(){return this.themeChooser.coloration.getActiveKitColorationMode()},o.prototype.getColorationLevel=function(){return this.themeChooser.coloration.getActiveKitColorationLevel()},o.prototype.isColorationModeOverriden=function(){return this.themeChooser.coloration.getActiveKitColorationMode()!==this.themeChooser.coloration.getActiveKitDefaultColorationMode()},o.prototype.removePalettes=function(){this.palettes=[],this.storyColoration.customPalette=null},o.prototype.generatePalettes=function(b){var c=this;this.palettes=[],this.activePaletteIndex=a.INVALID_PALETTE_INDEX;var d=this.calculateThreeColorsForPalettes();return this.colorApi.getMatches(d.mainColor,k).then(function(a){return a.matches}).catch(function(){return[]}).then(function(a){var b=[];if(c.flags.newColorationPalettes)b=c.paletteGenerator.calculatePalettes(d,a);else{var e=c.calculatePalettesWithThreeColors(d),f=c.calculatePalettesWithTint(d),g=c.calculatePalettesWithShade(d),h=c.calculatePalettesFromColors(d,a);b=e.concat(f,g,h)}return c.storyColoration.customMainColor||c.insertDefaultPalette(b),b}).then(function(d){var e=a.INVALID_PALETTE_INDEX;switch(b){case"selectSimilar":c.flags.newColorationPalettes||(e=c.findPaletteSimilarToActive(d)),c.flags.newColorationPalettes&&(e=c.getActivePaletteIndexBasedOnActiveColorationLevel());break;case"selectCustom":e=a.CUSTOM_PALETTE_INDEX;break;case"keepLogo":e=a.LOGO_PALETTE_INDEX;break;case"addToList":var f=c.storyColoration.activePalette;f?(e=d.findIndex(function(a){return c.arePalettesEqual(a,f)}))===a.INVALID_PALETTE_INDEX&&(e=c.insertPalette(f,d)):c.$log.error("colorationUtils: activePalette is not specified")}return{palettes:d,activePaletteIndex:e}}).then(function(a){var d=a.palettes,e=a.activePaletteIndex;return c.$timeout(function(){if(c.palettes=d,"selectSimilar"===b)return c.setActivePaletteByIndex(e);c.activePaletteIndex=e})})},o.prototype.insertDefaultPalette=function(a){var b=this.themeChooser.coloration.getActiveKitDefaultColors(),c={colors:b,creator:"default",numOfColors:this.numOfColors(b)};return this.insertPalette(c,a)},o.prototype.insertPalette=function(a,b){var c=b.findIndex(function(b){return a.numOfColors<=b.numOfColors});return-1===c&&(c=b.length),b.splice(c,0,a),c},o.prototype.calculateThreeColorsForPalettes=function(){var a;if(this.storyColoration.customMainColor)a={mainColor:this.storyColoration.customMainColor,white:c,black:d};else{var b=this.storyColoration.activePalette.colors;a={mainColor:b.mainColor,white:b.white,black:b.black}}return a},o.prototype.calculatePalettesWithThreeColors=function(a){var b=this.chroma(a.mainColor).hsl()[2];return b>f||b<g?[]:[{colors:a,creator:"calculated",numOfColors:3}]},o.prototype.calculatePalettesWithTint=function(a){for(var b=a.mainColor,c=a.white,d=a.black,e=[],f=b,g=this.themeChooserUtils.tintColor(f);g!==f;)e.push({colors:{mainColor:b,secondaryColor:g,white:c,black:d},creator:"calculated",numOfColors:4}),f=g,g=this.themeChooserUtils.tintColor(f);return e.reverse(),e},o.prototype.calculatePalettesWithShade=function(a){for(var b=a.mainColor,c=a.white,d=a.black,e=[],f=b,g=this.themeChooserUtils.shadeColor(f);g!==f;)e.push({colors:{mainColor:b,secondaryColor:g,white:c,black:d},creator:"calculated",numOfColors:4}),f=g,g=this.themeChooserUtils.shadeColor(f);return e},o.prototype.calculatePalettesFromColors=function(a,b){var c=this,d=a.mainColor,e=a.white,f=a.black,g=this.themeChooserUtils.isLightColor(d,a),h=1,i=1,k=3,l=Math.min(j,Math.floor((b.length+i+k)/(h+i+k))),m=Math.min(j,Math.floor((b.length+k)/(h+i+k))),o=Math.min(j,Math.floor(b.length/(h+i+k))),p=b.splice(0,l),q=b.splice(0,m),r=b.splice(0,o),s=new n(b,a,this.themeChooserUtils),t=p.map(function(a){return{colors:{mainColor:d,secondaryColor:a,white:e,black:f},creator:"server",numOfColors:4}}),u=q.map(function(b){var g=c.themeChooserUtils.isLightColor(b,a),h=g?c.themeChooserUtils.toDarkColor(c.themeChooserUtils.shadeColor(b),a):c.themeChooserUtils.toLightColor(c.themeChooserUtils.tintColor(b),a);return{colors:c.makeColorsReadable({mainColor:d,secondaryColor:b,thirdColor:h,white:e,black:f}),creator:"server",numOfColors:5}}),v=r.map(function(b){var h,i,j=c.themeChooserUtils.isLightColor(b,a);return g&&j?(h=s.getDark(),i=s.getDark()):g||j?(h=s.getFirst(),i=s.getComplementary(h)):(h=s.getLight(),i=s.getLight()),{colors:c.makeColorsReadable({mainColor:d,secondaryColor:b,thirdColor:h,fourthColor:i,white:e,black:f}),creator:"server",numOfColors:6}});return t.concat(u,v)},o.prototype.isPaletteIndexReferringToCalculatedPalette=function(a){return a>=0&&a<this.palettes.length},o.prototype.updatePalettes=function(){var b=this;if(!this.isUpdatingPalettes){var c=this,d=c.storyColoration,e=d.activePalette,f=d.customPalette,g=d.logoPalette,h=c.palettes,i=void 0===h?[]:h,j=c.activePaletteIndex,k=e.colors.mainColor,l=i.length>0?i[0].colors.mainColor:"",m=f&&this.arePalettesEqual(e,f),n=g&&this.arePalettesEqual(e,g);this.areColorsEqual(k,l)||this.isSwitchingMainColor?m?this.activePaletteIndex=a.CUSTOM_PALETTE_INDEX:n?this.activePaletteIndex=a.LOGO_PALETTE_INDEX:(j<0||j>=i.length||!this.arePalettesEqual(e,i[j]))&&(this.activePaletteIndex=i.findIndex(function(a){return b.arePalettesEqual(a,e)})):(this.isUpdatingPalettes=!0,this.generatePalettes(m?"selectCustom":n?"keepLogo":"addToList").then(function(){return b.isUpdatingPalettes=!1}))}},o.prototype.willLoadPalettes=function(){return this.shouldUpdatePalettes},o.prototype.getPalettes=function(){return this.shouldUpdatePalettes&&(this.updatePalettes(),this.shouldUpdatePalettes=!1),this.palettes},o.prototype.getRecentColors=function(){return this.localStorageService.get(i)||[]},o.prototype.addColorToRecent=function(a){var b=this.getRecentColors();_(b).contains(a)||(b.unshift(a),this.localStorageService.set(i,b))},o.prototype.getIndustryMainColors=function(a){var b=this;void 0===a&&(a=h);var c=angular.copy(this.themeChooser.getColorThemes()),d=[];return this.contentManager.getKitIds().forEach(function(a){var b=_.findIndex(c,{id:a});-1!==b&&(d.push(c[b]),c.splice(b,1))}),_.unique(d.concat(c).map(function(a){var c=a.originalKit?a.originalKit:a;return b.themeChooser.coloration.getSpecificKitColors(c).mainColor})).splice(0,a)},o}();!function(a){a[a.mainColor=0]="mainColor",a[a.secondaryColor=1]="secondaryColor",a[a.black=2]="black",a[a.white=3]="white",a[a.thirdColor=4]="thirdColor",a[a.fourthColor=5]="fourthColor"}(a.ePaletteColorPickerStates||(a.ePaletteColorPickerStates={})),angular.module("siteGeneratorStaticsConsumerAppInternal").service("colorationUtils",o)}(coloration||(coloration={}));var coloration;!function(a){var b="#ffffff",c="#181818",d=2.8,e=20,f=function(){function a(a,b){this.themeChooserUtils=a,this.chroma=b}return a.$inject=["themeChooserUtils","chroma"],a.prototype.calculatePalettes=function(a,b){var c=this,d=this.generateColorMatches(a),f=b.slice(0,e-d.length).map(function(a){return c.checkAndAdjustDbColorTint(a)});return d.concat(f).map(function(b,d){return c.calculatePalletWithSixColors(a,b,d)})},a.prototype.markColorationPaletteVersion=function(a,b){return a.colorationVersion=b,a},a.prototype.checkAndAdjustDbColorTint=function(a){return this.themeChooserUtils.isTooDarkColor(a)?this.themeChooserUtils.tintColor(a):this.themeChooserUtils.isTooLightColor(a)?this.themeChooserUtils.shadeColor(a):a},a.prototype.calculatePalletWithSixColors=function(a,b,c){var d=[{x:0,y:.2},{x:0,y:.25},{x:.05,y:.2},{x:.1,y:.1},{x:.15,y:.1}],e=a.mainColor,f=a.white,g=a.black,h=this.themeChooserUtils.isLightColor(e,a),i=this.themeChooserUtils.isLightColor(b,a);h&&i?b=this.themeChooserUtils.toDarkColor(this.themeChooserUtils.shadeColor(b),a):h||i||(b=this.themeChooserUtils.toLightColor(this.themeChooserUtils.tintColor(b),a));var j=this.themeChooserUtils.sortColorsDarkToLight([f,g,e,b]);c=c<d.length?c:c-d.length*Math.floor(c/d.length);var k=this.themeChooserUtils.convertColorWithParam(j[1],j[0],d[c],e,!0),l=this.themeChooserUtils.convertColorWithParam(j[3],j[2],d[c],e,!1),m=this.make6ColorsReadable({mainColor:e,secondaryColor:b,thirdColor:k,fourthColor:l,white:f,black:g});return{colors:this.markColorationPaletteVersion(m,1),creator:"server",numOfColors:6}},a.prototype.generateColorMatches=function(a){var b=a.mainColor;return this.themeChooserUtils.isDarkColor(b,a)?this.themeChooserUtils.generateLighterShades(b):this.themeChooserUtils.generateDarkerShades(b)},a.prototype.areColorsEqual=function(a,b){return!!a&&!!b&&a.toLowerCase()===b.toLowerCase()||!a&&!b},a.prototype.make6ColorsReadable=function(a){var e,f,g,h,i,j,k=this,l=k.chroma,m=k.themeChooserUtils,n=a.mainColor,o=a.secondaryColor,p=a.thirdColor,q=a.fourthColor,r=a.black,s=a.white,t=function(){a=m.generate6Colors({mainColor:n,secondaryColor:o,thirdColor:p,fourthColor:q,black:r,white:s}).map(function(a){return l(a)}),e=a[0],f=a[1],g=a[2],h=a[3],i=a[4],j=a[5];var a};if(t(),h.luminance()>e.luminance()){var u=r;r=s,s=u,t()}if(l(p).luminance()>l(q).luminance()){if(l(p).luminance()>e.luminance()){var u=p;p=s,s=u,t()}if(l(q).luminance()<h.luminance()){var u=q;q=r,r=u,t()}}else{if(l(q).luminance()>e.luminance()){var u=q;q=s,s=u,t()}if(l(p).luminance()<h.luminance()){var u=p;p=r,r=u,t()}}for(;l.contrast(h,e)<d;)r=h.darken(.1).hex(),s=e.brighten(.1).hex(),t();var v={black:r,white:s},w=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return a.filter(function(a){return m.isDarkColor(a,v)}).length};for(w(n,o,p,q)>2&&(q=m.toLightColor(q,v),t()),w(n,o,p,q)>2&&(p=m.toLightColor(p,v),t()),w(n,o,p,q)<2&&(q=m.toDarkColor(q,v),t()),w(n,o,p,q)<2&&(p=m.toDarkColor(p,v),t());m.isLightColor(n,v)&&l.contrast(n,c)<d;)n=l(n).brighten(.1).hex(),t();for(;m.isDarkColor(n,v)&&l.contrast(n,b)<d;)n=l(n).darken(.1).hex(),t();for(;m.isLightColor(o,v)&&l.contrast(o,c)<d;)o=l(o).brighten(.1).hex(),t();for(;m.isDarkColor(o,v)&&l.contrast(o,b)<d;)o=l(o).darken(.1).hex(),t();for(;m.isLightColor(p,v)&&l.contrast(p,c)<d;)p=l(p).brighten(.1).hex(),t();for(;m.isDarkColor(p,v)&&l.contrast(p,b)<d;)p=l(p).darken(.1).hex(),t();for(;m.isLightColor(q,v)&&l.contrast(q,c)<d;)q=l(q).brighten(.1).hex(),t();for(;m.isDarkColor(q,v)&&l.contrast(q,b)<d;)q=l(q).darken(.1).hex(),t();for(;(l.contrast(e,h)<d||l.contrast(e,i)<d||l.contrast(e,j)<d)&&!this.areColorsEqual(s,b);)s=e.brighten(.3).hex(),t();for(;(l.contrast(h,f)<d||l.contrast(h,g)<d)&&!this.areColorsEqual(r,c);)r=h.darken(.3).hex(),t();return{mainColor:n,secondaryColor:o,thirdColor:p,fourthColor:q,black:r,white:s}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("paletteGenerator",f)}(coloration||(coloration={}));var FontUtils=function(){function a(a,b,c,d,e,f,g,h){this.themeChooser=a,this.fontDataForThumbnail=b,this.storyServices=c,this.simpleSolutionManager=d,this.layoutSolver=e,this.modelTree=f,this.solutionFetcher=g,this.flags=h}return a.$inject=["themeChooser","fontDataForThumbnail","storyServices","simpleSolutionManager","layoutSolver","modelTree","solutionFetcher","flags"],a.prototype.convertFontDataToThumbnail=function(b,c){void 0===c&&(c=!1);var d=this.fontDataForThumbnail.data[b.displayName.toLowerCase().replace(/ /,"-")];return{name:{title:d.name,font:this.fixFontFamily(this.themeChooser.getSpecificKitFontStyle(b,d.fontName)),family:b.displayName,size:(d.fontNameSize||a.FONT_THUMBNAIL_TITLE_FONT_SIZE)+(c?a.LARGE_THUMBNAIL_TITLE_FONT_SIZE_INCREMENT:0)},description:{title:d.description,font:this.fixFontFamily(this.themeChooser.getSpecificKitFontStyle(b,d.fontDescription)),family:b.displayName,size:d.fontDescriptionSize||a.FONT_THUMBNAIL_PARAGRAPH_FONT_SIZE},id:b.id}},a.prototype.fixFontFamily=function(b){return b.replace(a.BROKEN_FONT_FAMILY_REGEXP,function(a){return'"'+a.replace(/\+/g," ")+'"'})},a.prototype.updateNodeView=function(a){var b=this,c=this.solutionFetcher.getSectionSolution(this.storyServices.story.selectedPage,a.getId());return _.each(c,function(a){a.isDirty=!0}),this.layoutSolver.calculateSolverStatus(void 0,void 0,!0).then(function(){return b.simpleSolutionManager.detectAndHandleSolutionFailure(a.getContainerPageId(),a.getId())}).then(function(){return b.storyServices.reRender("body")})},a.prototype.updateView=function(){return this.modelTree.dirtifyAllPages(),this.storyServices.onNodeChangedClearCacheSynchronous()},a}();FontUtils.BROKEN_FONT_FAMILY_REGEXP=/\w+(\+[\w]+)+/g,FontUtils.FONT_THUMBNAIL_PARAGRAPH_FONT_SIZE=14,FontUtils.FONT_THUMBNAIL_TITLE_FONT_SIZE=30,FontUtils.LARGE_THUMBNAIL_TITLE_FONT_SIZE_INCREMENT=6,angular.module("siteGeneratorStaticsConsumerAppInternal").service("fontUtils",FontUtils);var KitUtils=function(){function a(a,b,c,d,e){this.themeChooser=a,this.contentManager=b,this.$rootScope=c,this.$q=d,this.flags=e}return a.$inject=["themeChooser","contentManager","$rootScope","$q","flags"],a.prototype.calculateKits=function(){var a=this.themeChooser.getColorThemes()||[],b=this.contentManager.getKitIds()||[];return this.$q.when(this.resolveKits(b,a))},a.prototype.resolveKits=function(a,b){var c=new Set(a),d=function(a){return a.kitFonts.replacingKitId&&c.has(a.kitFonts.replacingKitId)?[a.kitFonts.replacingKitId,a]:[a.id,a]},e=new Map(b.map(d)),f=a.map(function(a){return e.get(a)}),g=f.filter(function(a){return a}),h=b.filter(function(a){return!c.has(a.id)&&!c.has(a.kitFonts.replacingKitId)});return g.concat(h)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("kitUtils",KitUtils);var Cabbie=function(){function a(a,b,c,d,e){this.$q=a,this.TourAttachedTooltip=b,this.TourBackdrop=c,this.$timeout=d,this.componentCompiler=e}return a.$inject=["$q","TourAttachedTooltip","TourBackdrop","$timeout","componentCompiler"],a.prototype.show=function(a){var b=this,c=new this.TourAttachedTooltip,d=new this.TourBackdrop,e=this.$q.defer(),f=function(a){c.element.css({opacity:"0"}),b.$timeout(function(){c.destroy(),d.hide().then(function(){d.destroy(),e.resolve(a)})},200)};d.onClick(function(){return f(!1)}),a.attributes||(a.attributes={}),a.tourStepClass||(a.tourStepClass=""),"string"==typeof a.hideAttribute&&(a.attributes[a.hideAttribute]=f),a.position||(a.position={}),"number"!=typeof a.position.positionX&&(a.position.positionX=builders.AssistantPositionX.Right),"number"!=typeof a.position.positionY&&(a.position.positionY=builders.AssistantPositionY.Center);var g=a.text?'<div class="tour-step '+a.tourStepClass+'">'+a.text+"</div>":this.componentCompiler.compile(a.element,a.attributes);return c.setContent(g),this.$timeout(function(){c.attachTo(a.target,a.position.positionX,a.position.positionY,a.position.offsetX,a.position.offsetY),c.show(150)}),this.$timeout(function(){return d.show(0)}),e.promise},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("cabbie",Cabbie);var cab;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i){this.$q=a,this.TourAttachedTooltip=b,this.TourBackdrop=c,this.consumerBiLogger=d,this.presetsStrategyFactory=e,this.$compile=f,this.$timeout=g,this.$rootScope=h,this.flags=i}return a.$inject=["$q","TourAttachedTooltip","TourBackdrop","consumerBiLogger","presetsStrategyFactory","$compile","$timeout","$rootScope","flags"],a.prototype.show=function(a){var b=this,c=new this.TourAttachedTooltip,d=new this.TourBackdrop,e=this.$q.defer(),f=function(a){c.element.css({opacity:"0"}),b.$timeout(function(){c.destroy(),d.hide().then(function(){d.destroy(),e.resolve(a)})},200)};d.onClick(function(){return f(!1)});var g=this.compileCAB(a,f);c.setContent(g),this.flags.sectionMedia?(c.attachTo(a.target,builders.AssistantPositionX.Right,builders.AssistantPositionY.Center,-6),c.addCustomClasses(["cab-tooltip"])):c.attachTo(a.target,builders.AssistantPositionX.Right,builders.AssistantPositionY.Center,-35),c.show(150);var h=a.nodes[0];return this.consumerBiLogger.sectionManagement.replaceSectionPanelIsLoaded(h.getId(),h.getSpecificContentElementType(),h.alias,a.strategyType===builder.PresetsStrategyType.FitMode?BIOrigins.ToFitModeButton:BIOrigins.ToCropModeButton),this.$timeout(function(){return d.show(0)}),e.promise},a.prototype.compileCAB=function(a,b){var c=this.$rootScope.$new();return c.header=a.title,c.text=a.text,c.nodes=a.nodes,c.strategy=this.presetsStrategyFactory.create(a.strategyType,builder.PresetsStrategyMode.Change),c.intent=builder.PreviewListIntent.ChangeSection,c.title=a.title,c.source=BIOrigins.ToFitModeButton,c.onClose=function(a){return b(a)},this.$compile("<preview-list-panel\n        header='title'\n        text='text'\n        nodes='nodes'\n        intent='intent'\n        strategy='strategy'\n        on-close='onClose(value)'\n        source='source'>\n      </preview-list-panel>")(c)},a}();a.PreviewListCAB=b,angular.module("siteGeneratorStaticsConsumerAppInternal").service("previewListCAB",b),angular.module("siteGeneratorStaticsConsumerAppInternal").component("previewListPanel",{
template:"\n  <cc-panel-frame label=\"{{::$ctrl.header|translate}}\" show-close-button=\"true\" on-close=\"$ctrl.onClose({value:false})\">\n    <cc-panel-fixed-top>\n      <div class=\"text-t2\">\n        {{::$ctrl.text|translate}}\n      </div>\n    </cc-panel-fixed-top>\n    <cc-panel-body>\n      <preview-list\n        scale='0.183'\n        strategy='$ctrl.strategy'\n        intent='$ctrl.intent'\n        nodes='$ctrl.nodes'\n        draggable='false'\n        on-selection-changed='$ctrl.onClose({value:true})'\n        source='$ctrl.source'\n        mark-selected='false'>\n      </preview-list>\n    </cc-panel-body>\n  </cc-panel-frame>",bindings:{header:"<",text:"<",nodes:"<",strategy:"<",intent:"<",onClose:"&",source:"<?"}})}(cab||(cab={}));var cab;!function(a){var b=function(){function a(a,b){this.previewListCAB=a,this.galleryTypeCAB=b}return a.$inject=["previewListCAB","galleryTypeCAB"],a.prototype.open=function(a,b,c){void 0===c&&(c=null);var d=b?builder.PresetsStrategyType.FitMode:builder.PresetsStrategyType.UnFitMode,e=b?"fitmode":"unfitmode";return this.previewListCAB.show({target:c||this.galleryTypeCAB.getSizeDropdownButton(),title:"popups."+e+".heading",text:"popups."+e+".text",nodes:[a.identifyingNode],strategyType:d})},a}();a.MediaFitCAB=b,angular.module("siteGeneratorStaticsConsumerAppInternal").service("mediaFitCAB",b)}(cab||(cab={}));var cab;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i){this.$q=a,this.TourAttachedTooltip=b,this.TourModal=c,this.TourBackdrop=d,this.consumerBiLogger=e,this.presetsStrategyFactory=f,this.$compile=g,this.$timeout=h,this.$rootScope=i}return a.$inject=["$q","TourAttachedTooltip","TourModal","TourBackdrop","consumerBiLogger","presetsStrategyFactory","$compile","$timeout","$rootScope"],a.prototype.show=function(a){var b=this,c=new this.TourModal,d=new this.TourBackdrop,e=this.$q.defer(),f=function(a){c.element.css({opacity:"0"}),b.$timeout(function(){c.destroy(),d.hide().then(function(){d.destroy(),a?e.resolve(a):e.reject()})},200)};d.onClick(function(){return f(null)});var g=this.compileCAB(a,f);return c.setContent(g),c.addCustomClasses(["tour-modal"]),c.show(150),this.$timeout(function(){return d.show(0)}),e.promise},a.prototype.compileCAB=function(a,b){var c=this.$rootScope.$new();return c.node=a.node,c.linkDetails=a.linkDetails,c.source=a.biSource,c.onSave=function(a){return b(a)},c.onClose=function(){return b(null)},this.$compile("<link-editor-panel\n        link-details='linkDetails'\n        node='node'\n        source='source'\n        on-close='onClose()'\n        on-save='onSave(linkDetails)'>\n      </link-editor-panel>")(c)},a}();a.LinkEditorCAB=b}(cab||(cab={})),angular.module("siteGeneratorStaticsConsumerAppInternal").service("linkEditorCAB",cab.LinkEditorCAB);var cab;!function(a){var b=function(){function a(a,b,c,d,e,f,g){this.$q=a,this.TourAttachedTooltip=b,this.TourBackdrop=c,this.$compile=d,this.$timeout=e,this.$rootScope=f,this.flags=g}return a.$inject=["$q","TourAttachedTooltip","TourBackdrop","$compile","$timeout","$rootScope","flags"],a.prototype.show=function(a){var b=this,c=new this.TourAttachedTooltip,d=new this.TourBackdrop,e=this.$q.defer(),f=function(a){c.element.css({opacity:"0"}),b.$timeout(function(){c.destroy(),d.hide().then(function(){d.destroy(),e.resolve(a)})},200)};d.onClick(function(){return f(!1)});var g=this.compileCAB(a,f);return c.setContent(g),c.attachTo(a.target,builders.AssistantPositionX.Right,builders.AssistantPositionY.Center,-6),this.flags.sectionMedia&&c.addCustomClasses(["cab-tooltip"]),c.show(150),this.$timeout(function(){return d.show(0)}),e.promise},a.prototype.compileCAB=function(a,b){var c=this.$rootScope.$new();return c.background=a.background,c.node=a.node,c.onClose=function(a){return b(a)},this.$compile("<media-position-panel\n        node='node'\n        background='background'\n        on-close='onClose(value)'>\n      </media-position-panel>")(c)},a}();a.ImagePositionCAB=b,angular.module("siteGeneratorStaticsConsumerAppInternal").service("imagePositionCAB",b)}(cab||(cab={}));var cab;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i){var j=this;this.$q=a,this.TourAttachedTooltip=b,this.TourBackdrop=c,this.$compile=d,this.$timeout=e,this.$rootScope=f,this.mediaOverrideManager=g,this.consumerBiLogger=h,this.mediaSectionUtils=i,this.onSelect=function(a,b){return b&&b.gallery?j.mediaOverrideManager.setGallery(a.node,b.gallery)?j.$q.resolve(b):j.$q.reject("gallery not found"):j.$q.reject("nothing selected")},this.handleGalleryReplaced=function(a){var b=a.node,c=a.gallery,d=a.galleries,e=a.presetMediaType;j.consumerBiLogger.contentEditor.galleryLayoutChanged(b.getId(),b.getSpecificContentElementType(),b.alias,c.gallery.name,d.length,d.indexOf(c),e===PresetMediaTypes.SHAPE?"shape":e===PresetMediaTypes.COAST2COAST?"full width":e===PresetMediaTypes.IMAGE?"image":"")},this.handleGalleryNotReplaced=function(a){var b=a.node,c=a.galleries,d=a.presetMediaType;j.consumerBiLogger.contentEditor.galleryLayoutWindowClosed(b.getId(),b.getSpecificContentElementType(),b.alias,null,c.length,d===PresetMediaTypes.SHAPE?"shape":d===PresetMediaTypes.COAST2COAST?"full width":d===PresetMediaTypes.IMAGE?"image":"")},this.onShow=function(a){var b=a.node,c=a.galleries,d=a.presetMediaType;j.consumerBiLogger.contentEditor.galleryLayoutWindowOpened(b.getId(),b.getSpecificContentElementType(),b.alias,c.length,d===PresetMediaTypes.SHAPE?"shape":d===PresetMediaTypes.COAST2COAST?"full width":d===PresetMediaTypes.IMAGE?"image":"")}}return a.$inject=["$q","TourAttachedTooltip","TourBackdrop","$compile","$timeout","$rootScope","mediaOverrideManager","consumerBiLogger","mediaSectionUtils"],a.prototype.openGalleryType=function(a,b){var c=this,d={node:a,target:b};return this.show(d).then(function(b){b&&c.mediaSectionUtils.updateGalleryOnViewer(a)})},a.prototype.getSizeDropdownButton=function(){return angular.element('[data-hook="media-size-dropdown"] [data-hook="button"]')},a.prototype.show=function(a){var b=this,c=new this.TourAttachedTooltip,d=new this.TourBackdrop,e=this.$q.defer(),f=function(a){return c.element.css({opacity:"0"}),b.$timeout(function(){c.destroy(),d.hide().then(function(){d.destroy(),e.resolve(a)})},200),e.promise.then(function(){a?b.handleGalleryReplaced(i):b.handleGalleryNotReplaced(i)})};d.onClick(function(){return f(!1)});var g=this.compileCAB(a,f),h=g.compiledCAB,i=g.scope;return c.setContent(h),c.attachTo(a.target,builders.AssistantPositionX.Right,builders.AssistantPositionY.Center,-6),c.addCustomClasses(["cab-tooltip"]),c.show(150),this.$timeout(function(){return d.show(0)}),this.onShow(i),e.promise},a.prototype.compileCAB=function(a,b){var c=this,d=this.$rootScope.$new();return d.galleries=this.mediaOverrideManager.getAvailableGalleries(a.node),d.presetMediaType=this.mediaOverrideManager.getAllowedMediaOverride(a.node),d.node=a.node,d.onClose=function(a){return b(a)},d.onSelect=function(a){return c.onSelect(d,a).finally(function(b){d.gallery=a,d.onClose(a)})},{compiledCAB:this.$compile("<div class='gallery-type-cab'>\n                                  <div class='gallery-picker-list-outer'>\n                                    <cc-panel-frame label=\"{{:: 'general.galleries' | translate}}\" on-close='onSelect()' show-close-button='true'>\n                                      <div class='gallery-picker-list'>\n                                        <div class='gallery-picker-list-item {{item.cssKey}}' ng-class='{selected: item.selected}' ng-click='onSelect(item)' ng-repeat='item in galleries'>\n                                          <div class='gallery-picker-list-item-name p8-label'>{{item.name}}</div>\n                                        </div>\n                                      </div>\n                                    </cc-panel-frame>\n                                  </div>\n                                </div>")(d),scope:d}},a}();a.GalleryTypeCAB=b,angular.module("siteGeneratorStaticsConsumerAppInternal").service("galleryTypeCAB",b)}(cab||(cab={}));var cab;!function(a){var b=function(){function a(a,b,c,d,e,f,g){this.$q=a,this.TourAttachedTooltip=b,this.$compile=c,this.$timeout=d,this.$rootScope=e,this.$interval=f,this.componentCompiler=g,this.isNeedToClosePopup=!1,this.isPopupVisible=!1,this.cabNameSpace="cab"}return a.$inject=["$q","TourAttachedTooltip","$compile","$timeout","$rootScope","$interval","componentCompiler"],a.prototype.getPosition=function(a,b){return(a?$(a).innerHeight():window.innerHeight)-b.offset().top>b[0].clientHeight?builders.AssistantPositionY.Bottom:b.offset().top>b[0].clientHeight?builders.AssistantPositionY.Top:builders.AssistantPositionY.Bottom},a.prototype.show=function(a){var b=this;if(!this.isPopupVisible){var c=new this.TourAttachedTooltip;this.isPopupVisible=!0;var d=a.contentSelector,e=function(e){c.element.css({opacity:"0"}),$(d).add($(a.target[0])).off("mouseenter."+b.cabNameSpace+" mouseleave."+b.cabNameSpace),c.destroy();var f=b.$interval(function(){$(".intro-tooltip").remove(),0===$(".intro-tooltip").length&&(b.isPopupVisible=!1,b.$interval.cancel(f))},100)};a.attributes||(a.attributes={}),"string"==typeof a.hideAttribute&&(a.attributes[a.hideAttribute]=e);var f=function(a){b.isNeedToClosePopup=!1},g=function(c){b.isNeedToClosePopup=!0,b.$timeout(function(){b.isNeedToClosePopup&&e(!1)},a.onCloseTimeout||500)};$(d).add($(a.target[0])).on("mouseenter."+this.cabNameSpace,f).on("mouseleave."+this.cabNameSpace,g),c.element[0].addEventListener("click",function(c){_.intersection(c.target.classList,a.closeWhenClickOn).length>0&&(b.isNeedToClosePopup=!0,e(!1))});var h=a.element+"-cab",i=this.componentCompiler.compile(a.element,a.attributes,h);c.setContent(i),c.attachTo(a.target,void 0,this.getPosition(a.containerWindowSelector,a.target)),c.show(150)}return this.$q.defer().promise},a}();a.CabbieHover=b,angular.module("siteGeneratorStaticsConsumerAppInternal").service("cabbieHover",b)}(cab||(cab={}));var TextManagerDialog=function(){function a(a){this.textManager=a,this.suggestedTexts=a.getTexts()}return a.$inject=["textManager"],a.prototype.replaceText=function(a){this.onReplace(a)},a.prototype.appendText=function(a){this.onAppend(a)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("textManagerDialog",{templateUrl:"views/text-manager/text-manager-dialog.html",controller:TextManagerDialog,bindings:{onReplace:"=",onAppend:"=",closeDialog:"=",sectionType:"=",fieldName:"="}});var TextManager=function(){function a(a,b){this.wizWebsite=a,this.wizUtils=b}return a.$inject=["wizWebsite","wizUtils"],a.prototype.getTexts=function(){return this.parseTextsFromWizData(this.getWixWizRawData())},a.prototype.parseTextsFromWizData=function(a){var b=this;return _.flatten(a.pages[0].sections.map(function(a){return b.wizUtils.isListSection(a)?_.flatten(a.list.map(function(a){return[a.title,a.paragraph]})):[a.title,a.paragraph]})).map(function(a){return a&&a.trim()}).filter(function(a){return!!a}).sort(function(a,b){return a.length-b.length})},a.prototype.getWixWizRawData=function(){return this.wizWebsite.getSite()||{pages:[{title:"Bass Fishing Florida Everglades - Catch the fish of a lifetime with Captain Brett Isackson",dimension:{height:2432,width:1425},images:["https://s7.mylivechat.com/Customization/Template/InlineChatRoundOnline_1.png","https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2017/06/Brett-SL-boat.jpg?fit=960%2C375&ssl=1","https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/P1000859.jpg?resize=150%2C150&ssl=1","https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/100_0003-web.jpg?resize=150%2C150&ssl=1","https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Obrien3.jpg?resize=150%2C150&ssl=1","https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Richard-and-Jay-snakeheads.-e13343580901822-150x150.jpg?resize=150%2C150&ssl=1","https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/Untitled-1-7.jpg?resize=150%2C150&ssl=1","https://i1.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/bi1.jpg?resize=150%2C150&ssl=1","https://bassfishingfloridaeverglades.com/wp-content/plugins/sam-images/bassonlinex250.jpg","https://i1.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2014/12/EVERGLADES-FISHING.gif?ssl=1","https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2014/12/MIAMI-FISHING.jpg?ssl=1","https://i1.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2014/12/OKEECHOBEE-FISHING.jpg?ssl=1","https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2014/12/LAKE-IDA-FISHING.jpg?ssl=1","https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2017/06/logo-penn-250.jpg?fit=250%2C250&ssl=1","https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2017/06/fitzgerald-rods-logo-250.jpg?fit=250%2C250&ssl=1","https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2017/06/Bang-Lures-Logo-250.jpg?fit=250%2C250&ssl=1","https://bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/USCG.clear_.png","https://bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/bass.assassin.png","https://bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/fwc.logo_.png","https://bassfishingfloridaeverglades.com/wp-content/uploads/2016/03/abu_garcia-e1497742291279.png","https://www.outdoorwebdesigns.com/wp-content/uploads/2013/02/OWD.mini_.logo_.png","https://pixel.wp.com/g.gif?v=ext&j=1%3A5.7.1&blog=77847235&post=0&tz=-4&srv=bassfishingfloridaeverglades.com&host=bassfishingfloridaeverglades.com&ref=&rand=0.5426742222598278"],path:"/",sections:[{type:"single",title:"Welcome to  The Shoppe",confidence:.4097681047241848,paragraph:"",position:{top:244,left:172.5,width:720,height:289.25},media:[{type:"image",src:"https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2017/06/Brett-SL-boat.jpg?fit=960%2C375&ssl=1",link:"",width:720,height:281.25,alt_text:""}],extraInfo:{doAllMediaContainFaces:!1,minPriority:10,maxPriority:36}},{type:"list",list_type:"vertical",list:[{type:"single",title:"South Florida Bass Fishing Trip With Capt Brett Isackson",confidence:1,paragraph:"  Hi everyone this is Capt Brett Isackson with your South Florida bass fishing report. I have had with Dana and Mathew out on the water and we have been fishing from Lake Okeechobee to Lake Ida, today has been the best day we caught over 35 […]",position:{top:299,left:952.5,width:300,height:431},rawTitle:'<a href="https://bassfishingfloridaeverglades.com/2016/12/south-florida-bass-fishing-trip-capt-brett-isackson/">South Florida Bass Fishing Trip With Capt Brett Isackson</a>',media:[{type:"image",src:"https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/Untitled-1-7.jpg?resize=150%2C150&ssl=1",link:"https://bassfishingfloridaeverglades.com/2016/12/south-florida-bass-fishing-trip-capt-brett-isackson/",width:150,height:150,alt_text:"South Florida Bass Fishing Trip With Capt Brett Isackson"}],rawParagraph:'<article class="post-102920 post type-post status-publish format-standard has-post-thumbnail category-reports category-florida-peacock-bass category-lake-ida-reports category-lake-okeechobee-fishing category-largemouth-bass-reports category-south-florida-fishing category-south-florida-fishing-reports tag-capt-brett-isackson entry"><a href="https://bassfishingfloridaeverglades.com/2016/12/south-florida-bass-fishing-trip-capt-brett-isackson/" class="alignleft" aria-hidden="true"><img width="150" height="150" src="https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/Untitled-1-7.jpg?resize=150%2C150&amp;ssl=1" class="entry-image attachment-post" alt="South Florida Bass Fishing Trip With Capt Brett Isackson" itemprop="image" srcset="https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/Untitled-1-7.jpg?resize=150%2C150&amp;ssl=1 150w, https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/Untitled-1-7.jpg?resize=90%2C90&amp;ssl=1 90w, https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/Untitled-1-7.jpg?zoom=2&amp;resize=150%2C150&amp;ssl=1 300w, https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/Untitled-1-7.jpg?zoom=3&amp;resize=150%2C150&amp;ssl=1 450w" sizes="(max-width: 150px) 100vw, 150px" data-attachment-id="103283" data-permalink="https://bassfishingfloridaeverglades.com/2016/12/south-florida-bass-fishing-trip-capt-brett-isackson/untitled-1-7/" data-orig-file="https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/Untitled-1-7.jpg?fit=800%2C450&amp;ssl=1" data-orig-size="800,450" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Untitled-1-7" data-image-description="" data-medium-file="https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/Untitled-1-7.jpg?fit=300%2C169&amp;ssl=1" data-large-file="https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/Untitled-1-7.jpg?fit=800%2C450&amp;ssl=1"></a><header class="entry-header"><h2 class="entry-title" itemprop="headline"><a href="https://bassfishingfloridaeverglades.com/2016/12/south-florida-bass-fishing-trip-capt-brett-isackson/">South Florida Bass Fishing Trip With Capt Brett Isackson</a></h2></header><div class="entry-content"><p>South Florida Bass Fishing Trip With Capt Brett Isackson Hi everyone this is Capt Brett Isackson with your South Florida bass fishing report. I have had with Dana and Mathew out on the water and we have been fishing from Lake Okeechobee to Lake Ida, today has been the best day we caught over 35 […]</p>\n</div></article>'},{type:"single",title:"Everglades Bass Fishing Guide Capt Brett Isackson",confidence:1,paragraph:"  hey there this is your Everglades Bass Fishing Guide Capt Brett Isackson with a fishing report i was out today in the everglades doing an artificial trip with repeat customer we caught about 40 fish 45 fish and an eight hour day on artificial a lot of top […]",position:{top:760,left:952.5,width:300,height:436},rawTitle:'<a href="https://bassfishingfloridaeverglades.com/2016/01/everglades-bass-fishing-guide-capt-brett-isackson/">Everglades Bass Fishing Guide Capt Brett Isackson</a>',media:[{type:"image",src:"https://i1.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/bi1.jpg?resize=150%2C150&ssl=1",link:"https://bassfishingfloridaeverglades.com/2016/01/everglades-bass-fishing-guide-capt-brett-isackson/",width:150,height:150,alt_text:"Everglades Bass Fishing Guide Capt Brett Isackson"}],rawParagraph:'<article class="post-80954 post type-post status-publish format-standard has-post-thumbnail category-everglades-fishing category-reports category-largemouth-bass-reports category-south-florida-fishing category-south-florida-fishing-reports tag-capt-brett-isackson entry"><a href="https://bassfishingfloridaeverglades.com/2016/01/everglades-bass-fishing-guide-capt-brett-isackson/" class="alignleft" aria-hidden="true"><img width="150" height="150" src="https://i1.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/bi1.jpg?resize=150%2C150&amp;ssl=1" class="entry-image attachment-post" alt="Everglades Bass Fishing Guide Capt Brett Isackson" itemprop="image" srcset="https://i1.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/bi1.jpg?resize=150%2C150&amp;ssl=1 150w, https://i1.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/bi1.jpg?resize=90%2C90&amp;ssl=1 90w, https://i1.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/bi1.jpg?zoom=2&amp;resize=150%2C150&amp;ssl=1 300w, https://i1.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/bi1.jpg?zoom=3&amp;resize=150%2C150&amp;ssl=1 450w" sizes="(max-width: 150px) 100vw, 150px" data-attachment-id="103282" data-permalink="https://bassfishingfloridaeverglades.com/2016/12/south-florida-bass-fishing-trip-capt-brett-isackson/bi1/" data-orig-file="https://i1.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/bi1.jpg?fit=1068%2C801&amp;ssl=1" data-orig-size="1068,801" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="bi1" data-image-description="" data-medium-file="https://i1.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/bi1.jpg?fit=300%2C225&amp;ssl=1" data-large-file="https://i1.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/bi1.jpg?fit=1024%2C768&amp;ssl=1"></a><header class="entry-header"><h2 class="entry-title" itemprop="headline"><a href="https://bassfishingfloridaeverglades.com/2016/01/everglades-bass-fishing-guide-capt-brett-isackson/">Everglades Bass Fishing Guide Capt Brett Isackson</a></h2></header><div class="entry-content"><p>Everglades Bass Fishing Guide Capt Brett Isackson hey there this is your Everglades Bass Fishing Guide Capt Brett Isackson with a fishing report i was out today in the everglades doing an artificial trip with repeat customer we caught about 40 fish 45 fish and an eight hour day on artificial a lot of top […]</p>\n</div></article>'}],position:{top:244,left:952.5,right:1252.5,bottom:1196,height:952,width:300},header:{type:"single",title:"Latest Fishing Reports",confidence:1,paragraph:"",position:{top:244,left:952.5,width:300,height:40},rawTitle:'<h4 class="widget-title widgettitle" section_delta="1" section_delta_idx="2">Latest Fishing Reports</h4>'},extraInfo:{doAllMediaContainFaces:!1,minPriority:10,maxPriority:13}},{type:"list",list_type:"vertical",list:[{type:"single",title:"Everglades Fishing",confidence:1,paragraph:" Bass Fishing Florida Everglades.com gives you all the information you could ever want to know about  in South Florida. If you live in Florida or are looking to take a bass fishing trip in the Sunshine state, you should definitely check this location out. I offer great bass fishing …",position:{top:538.25,left:172.5,width:720,height:233},rawTitle:'<h4 class="widget-title widgettitle">Everglades Fishing</h4>',media:[{type:"image",src:"https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/P1000859.jpg?resize=150%2C150&ssl=1",link:"https://bassfishingfloridaeverglades.com/everglades/everglades-fishing/",width:150,height:150,alt_text:"Everglades Fishing"}],button:{text:"{Read more...}",url:"https://bassfishingfloridaeverglades.com/everglades/everglades-fishing/",type:"internal"},rawParagraph:'<section id="featured-page-7" class="widget featured-content featuredpage"><div class="widget-wrap"><h4 class="widget-title widgettitle">Everglades Fishing</h4>\n<article class="post-19 page type-page status-publish has-post-thumbnail entry"><a href="https://bassfishingfloridaeverglades.com/everglades/everglades-fishing/" class="alignleft"><img width="150" height="150" src="https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/P1000859.jpg?resize=150%2C150&amp;ssl=1" class="entry-image attachment-page" alt="Everglades Fishing" itemprop="image" srcset="https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/P1000859.jpg?resize=150%2C150&amp;ssl=1 150w, https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/P1000859.jpg?resize=90%2C90&amp;ssl=1 90w, https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/P1000859.jpg?zoom=2&amp;resize=150%2C150&amp;ssl=1 300w, https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/P1000859.jpg?zoom=3&amp;resize=150%2C150&amp;ssl=1 450w" sizes="(max-width: 150px) 100vw, 150px" data-attachment-id="20" data-permalink="https://bassfishingfloridaeverglades.com/everglades/everglades-fishing/p1000859/" data-orig-file="https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/P1000859.jpg?fit=3216%2C2144&amp;ssl=1" data-orig-size="3216,2144" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;3.3&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;DMC-TZ3&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1216872265&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;4.6&quot;,&quot;iso&quot;:&quot;100&quot;,&quot;shutter_speed&quot;:&quot;0.00125&quot;,&quot;title&quot;:&quot;&quot;}" data-image-title="P1000859" data-image-description="" data-medium-file="https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/P1000859.jpg?fit=300%2C200&amp;ssl=1" data-large-file="https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/P1000859.jpg?fit=1024%2C682&amp;ssl=1"></a><div class="entry-content"><p>Bass Fishing Florida Everglades.com gives you all the information you could ever want to know about Everglades Fishing in South Florida. If you live in Florida or are looking to take a bass fishing trip in the Sunshine state, you should definitely check this location out. I offer great bass fishing … <a href="https://bassfishingfloridaeverglades.com/everglades/everglades-fishing/" class="more-link">{Read more...}</a></p></div></article></div></section>'},{type:"single",title:"Peacock Bass",confidence:1,paragraph:" You're probably wondering what  has to do with South Florida? Well South Florida has the Amazon Butterfly Peacock Bass stocked right here in the United States in South Florida areas of Miami, in an a round Ft. Lauderdale and Palm Beach. Why these Peacock Bass aren't the big brutes of …",position:{top:811.25,left:172.5,width:720,height:233},rawTitle:'<h4 class="widget-title widgettitle">Peacock Bass</h4>',media:[{type:"image",src:"https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/100_0003-web.jpg?resize=150%2C150&ssl=1",link:"https://bassfishingfloridaeverglades.com/peacock-bass/",width:150,height:150,alt_text:"Peacock Bass"}],button:{text:"{Read More...}",url:"https://bassfishingfloridaeverglades.com/peacock-bass/",type:"internal"},rawParagraph:'<section id="featured-page-8" class="widget featured-content featuredpage"><div class="widget-wrap"><h4 class="widget-title widgettitle">Peacock Bass</h4>\n<article class="post-30 page type-page status-publish entry"><a href="https://bassfishingfloridaeverglades.com/peacock-bass/" class="alignright"><img width="150" height="150" src="https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/100_0003-web.jpg?resize=150%2C150&amp;ssl=1" class="entry-image attachment-page" alt="Peacock Bass" itemprop="image" srcset="https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/100_0003-web.jpg?resize=150%2C150&amp;ssl=1 150w, https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/100_0003-web.jpg?resize=90%2C90&amp;ssl=1 90w, https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/100_0003-web.jpg?zoom=2&amp;resize=150%2C150&amp;ssl=1 300w" sizes="(max-width: 150px) 100vw, 150px" data-attachment-id="31" data-permalink="https://bassfishingfloridaeverglades.com/peacock-bass/100_0003-web/" data-orig-file="https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/100_0003-web.jpg?fit=418%2C450&amp;ssl=1" data-orig-size="418,450" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;}" data-image-title="100_0003-web" data-image-description="" data-medium-file="https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/100_0003-web.jpg?fit=278%2C300&amp;ssl=1" data-large-file="https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/100_0003-web.jpg?fit=418%2C450&amp;ssl=1"></a><div class="entry-content"><p>You\'re probably wondering what Peacock Bass has to do with South Florida? Well South Florida has the Amazon Butterfly Peacock Bass stocked right here in the United States in South Florida areas of Miami, in an a round Ft. Lauderdale and Palm Beach. Why these Peacock Bass aren\'t the big brutes of … <a href="https://bassfishingfloridaeverglades.com/peacock-bass/" class="more-link">{Read More...}</a></p></div></article></div></section>'},{type:"single",title:"Lake Okeechobee",confidence:1,paragraph:"  is a Seminole name that means “Big Water,” is the second largest lake in the United States. Lake Okeechobee is approximately 45 miles north to south and 32 plus miles east to west and covers over 740 square miles. It is typically a very shallow lake with an average depth of 6 …",position:{top:1084.25,left:172.5,width:720,height:233},rawTitle:'<h4 class="widget-title widgettitle">Lake Okeechobee</h4>',media:[{type:"image",src:"https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Obrien3.jpg?resize=150%2C150&ssl=1",link:"https://bassfishingfloridaeverglades.com/lake-okeechobee/",width:150,height:150,alt_text:"Lake Okeechobee"}],button:{text:"{Read more...}",url:"https://bassfishingfloridaeverglades.com/lake-okeechobee/",type:"internal"},
rawParagraph:'<section id="featured-page-9" class="widget featured-content featuredpage"><div class="widget-wrap"><h4 class="widget-title widgettitle">Lake Okeechobee</h4>\n<article class="post-90 page type-page status-publish has-post-thumbnail entry"><a href="https://bassfishingfloridaeverglades.com/lake-okeechobee/" class="alignleft"><img width="150" height="150" src="https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Obrien3.jpg?resize=150%2C150&amp;ssl=1" class="entry-image attachment-page" alt="Lake Okeechobee" itemprop="image" srcset="https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Obrien3.jpg?resize=150%2C150&amp;ssl=1 150w, https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Obrien3.jpg?resize=90%2C90&amp;ssl=1 90w, https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Obrien3.jpg?zoom=2&amp;resize=150%2C150&amp;ssl=1 300w, https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Obrien3.jpg?zoom=3&amp;resize=150%2C150&amp;ssl=1 450w" sizes="(max-width: 150px) 100vw, 150px" data-attachment-id="477" data-permalink="https://bassfishingfloridaeverglades.com/obrien3-jpg/" data-orig-file="https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Obrien3.jpg?fit=615%2C461&amp;ssl=1" data-orig-size="615,461" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;LG LOTUS&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;Copyright.LG Electronics Inc.&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;EXIF_JPEG_T422&quot;}" data-image-title="Obrien3.jpg" data-image-description="" data-medium-file="https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Obrien3.jpg?fit=300%2C224&amp;ssl=1" data-large-file="https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Obrien3.jpg?fit=615%2C461&amp;ssl=1"></a><div class="entry-content"><p>Lake Okeechobee is a Seminole name that means “Big Water,” is the second largest lake in the United States. Lake Okeechobee is approximately 45 miles north to south and 32 plus miles east to west and covers over 740 square miles. It is typically a very shallow lake with an average depth of 6 … <a href="https://bassfishingfloridaeverglades.com/lake-okeechobee/" class="more-link">{Read more...}</a></p></div></article></div></section>'},{type:"single",title:"Snakehead Fishing",confidence:1,paragraph:" Florida Snakehead fishing can only be described as being extremely aggressive and voracious, but based on our personal observations the species collected in Florida appears to be one of the more aggressive species of snakeheads. The species got to Florida by a illegal introduction of exotics in the …",position:{top:1357.25,left:172.5,width:720,height:233},rawTitle:'<h4 class="widget-title widgettitle">Snakehead Fishing</h4>',media:[{type:"image",src:"https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Richard-and-Jay-snakeheads.-e13343580901822-150x150.jpg?resize=150%2C150&ssl=1",link:"https://bassfishingfloridaeverglades.com/snakehead-fishing/",width:150,height:150,alt_text:"Florida Snakehead Fishing"}],button:{text:"{Read More...}",url:"https://bassfishingfloridaeverglades.com/snakehead-fishing/",type:"internal"},rawParagraph:'<section id="featured-page-10" class="widget featured-content featuredpage"><div class="widget-wrap"><h4 class="widget-title widgettitle">Snakehead Fishing</h4>\n<article class="post-88 page type-page status-publish entry"><a href="https://bassfishingfloridaeverglades.com/snakehead-fishing/" class="alignright"><img width="150" height="150" src="https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Richard-and-Jay-snakeheads.-e13343580901822-150x150.jpg?resize=150%2C150&amp;ssl=1" class="entry-image attachment-page" alt="Florida Snakehead Fishing" itemprop="image" srcset="https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Richard-and-Jay-snakeheads.-e13343580901822-150x150.jpg?resize=150%2C150&amp;ssl=1 150w, https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Richard-and-Jay-snakeheads.-e13343580901822-150x150.jpg?resize=90%2C90&amp;ssl=1 90w" sizes="(max-width: 150px) 100vw, 150px" data-attachment-id="374" data-permalink="https://bassfishingfloridaeverglades.com/snakehead-fishing/richard-and-jay-snakeheads-e13343580901822-150x150/" data-orig-file="https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Richard-and-Jay-snakeheads.-e13343580901822-150x150.jpg?fit=150%2C150&amp;ssl=1" data-orig-size="150,150" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;}" data-image-title="Florida Snakehead Fishing" data-image-description="" data-medium-file="https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Richard-and-Jay-snakeheads.-e13343580901822-150x150.jpg?fit=150%2C150&amp;ssl=1" data-large-file="https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Richard-and-Jay-snakeheads.-e13343580901822-150x150.jpg?fit=150%2C150&amp;ssl=1"></a><div class="entry-content"><p>Florida Snakehead fishing can only be described as being extremely aggressive and voracious, but based on our personal observations the species collected in Florida appears to be one of the more aggressive species of snakeheads. The species got to Florida by a illegal introduction of exotics in the … <a href="https://bassfishingfloridaeverglades.com/snakehead-fishing/" class="more-link">{Read More...}</a></p></div></article></div></section>'}],position:{top:538.25,left:172.5,right:892.5,bottom:1590.25,height:1052,width:720},extraInfo:{doAllMediaContainFaces:!1,minPriority:10,maxPriority:13}},{type:"single",title:"Chat Now",confidence:.007269306666386683,paragraph:"",position:{type:"fixed",right:"-10px",bottom:"-10px",width:144,height:68},rawTitle:'<div class="mylivechat_buttonround_label" style="resize: none; font-size: 15px; font-family: &quot;Open Sans&quot;, &quot;Segoe UI&quot;, Frutiger, &quot;Frutiger Linotype&quot;, &quot;Dejavu Sans&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; position: absolute; white-space: nowrap; right: 15px; line-height: 44px; color: white;">Chat Now</div>',media:[{type:"image",src:"https://s7.mylivechat.com/Customization/Template/InlineChatRoundOnline_1.png",link:"",width:24,height:24,alt_text:"round button"}],extraInfo:{doAllMediaContainFaces:!1,minPriority:11,maxPriority:59}},{type:"single",title:"",confidence:.25794016950493714,paragraph:"",position:{top:1236,left:952.5,width:300,height:258},media:[{type:"image",src:"https://bassfishingfloridaeverglades.com/wp-content/plugins/sam-images/bassonlinex250.jpg",link:"https://bassonline.com/",width:250,height:250,alt_text:"Bass Online"}],extraInfo:{doAllMediaContainFaces:!1,minPriority:11,maxPriority:59}},{type:"list",list_type:"horizontal",list:[{type:"single",title:"",confidence:1,paragraph:"",position:{top:1748.25,left:232.5,width:240,height:19},media:[]},{type:"single",title:"",confidence:1,paragraph:"",position:{top:1748.25,left:472.5,width:240,height:19},media:[]},{type:"single",title:"",confidence:1,paragraph:"",position:{top:1748.25,left:712.5,width:240,height:19},media:[]},{type:"single",title:"",confidence:1,paragraph:"",position:{top:1748.25,left:952.5,width:240,height:19},media:[]}],position:{top:1645.25,left:172.5,right:1192.5,bottom:1764.25,height:119,width:960},header:{type:"single",title:"24/7 ONLINE BOOKINGS",confidence:1,paragraph:"",position:{top:1645.25,left:172.5,width:1080,height:40},rawTitle:'<h4 class="widget-title widgettitle" section_delta="1" section_delta_idx="3">24/7 ONLINE BOOKINGS</h4>'},extraInfo:{doAllMediaContainFaces:!1,minPriority:10,maxPriority:80}},{type:"list",list_type:"horizontal",list:[{type:"single",title:"",confidence:1,paragraph:"",position:{top:1834.25,left:172.5,width:320,height:258},media:[{type:"image",src:"https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2017/06/logo-penn-250.jpg?fit=250%2C250&ssl=1",link:"http://www.pennfishing.com/",width:250,height:250,alt_text:"Penn Reels"}]},{type:"single",title:"",confidence:1,paragraph:"",position:{top:1834.25,left:552.5,width:320,height:258},media:[{type:"image",src:"https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2017/06/fitzgerald-rods-logo-250.jpg?fit=250%2C250&ssl=1",link:"http://www.fitzgeraldrods.com/",width:250,height:250,alt_text:"Fitzgerald Rods"}]},{type:"single",title:"",confidence:1,paragraph:"",position:{top:1834.25,left:932.5,width:320,height:258},media:[{type:"image",src:"https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2017/06/Bang-Lures-Logo-250.jpg?fit=250%2C250&ssl=1",link:"https://bassassassin.com/",width:250,height:250,alt_text:"Bass Assassin Lures"}]}],position:{top:1834.25,left:172.5,right:1252.5,bottom:2092.25,height:258,width:1080},extraInfo:{doAllMediaContainFaces:!1,minPriority:10,maxPriority:80}}]}],url:"https://bassfishingfloridaeverglades.com/"}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("textManager",TextManager);var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},OnstageActionsManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this;this.$rootScope=a,this.$state=b,this.$stateParams=c,this.$timeout=d,this.ONSTAGE_EVENTS=e,this.storyServices=f,this.applicationState=g,this.flags=h,this.modelTree=i,this.ONSTAGE_ACTIONS_BY_TYPE=j,this.fieldEditorConfiguration=k,this.mediaOverrideManager=l,this.nodeFetcher=m,this.layoutSelectionStoreProvider=n,this.consumerMenu=o,this.$injector=p,this.subscribe(e.OPEN_SEO,function(){d(function(){g.goToPageSeo(f.story.selectedPage)})}),this.flags.overrideFieldColor&&(j.currentColorGetter=function(a){var b=q.layoutSelectionStoreProvider.getLayoutSelectionStore(),c=q.segment;if(c)return b.getFieldColorOverride(c,a.data.subType)}),this.flags.mapColoration&&(j.currentMapStyleGetter=function(a){return q.layoutSelectionStoreProvider.getLayoutSelectionStore().getMapStyleOverride(q.segment,a.data.subType)}),this.flags.sectionTextSplitParagraph&&(j.columnsLabelGetter=function(a){var b=q.nodeFetcher.getCurrentNode();return q.layoutSelectionStoreProvider.getLayoutSelectionStore().getParagraphColumns(b)?"overlay.actions.toggle-paragraphs-off":"overlay.actions.toggle-paragraphs"})}return a.$inject=["$rootScope","$state","$stateParams","$timeout","ONSTAGE_EVENTS","storyServices","applicationState","flags","modelTree","ONSTAGE_ACTIONS_BY_TYPE","fieldEditorConfiguration","mediaOverrideManager","nodeFetcher","layoutSelectionStoreProvider","consumerMenu","$injector"],a.prototype.setSegment=function(a){this.segment=a},a.prototype.getSegment=function(){return this.segment},a.prototype.runClickAction=function(a,b){var c=this.getActionsOfField(a,b);c&&c.click&&this.executeAction(c.click,a)},a.prototype.runDblClickAction=function(a,b){var c=this.getActionsOfField(a,b);c&&c.dbl_click&&this.executeAction(c.dbl_click,a)},a.prototype.hasDoubleClickAction=function(a,b){var c=this.getActionsOfField(a,b);return c&&c.dbl_click},a.prototype.getMenuActions=function(a,b){var c=this.getActionsOfField(a,b);return c&&c.menu(a)||[]},a.prototype.getDblClickAction=function(a,b){var c=this.getActionsOfField(a,b);return c&&c.dbl_click||{}},a.prototype.getClickAction=function(a,b){var c=this.getActionsOfField(a,b);return c&&c.click||{}},a.prototype.executeAction=function(a,b){var c=this;a.state&&a.state.name!==this.$state.current.name&&this.$timeout(function(){return c.$state.go(a.state.name,__assign({},c.$stateParams))}),b.actionData=a,this.emitEventAction(a.event,b)},a.prototype.emitEventAction=function(a,b){this.$rootScope.$emit(a,b)},a.prototype.subscribe=function(a,b,c){return this.$rootScope.$on(a,function(a,c){b(c)})},a.prototype.getActionsOfField=function(a,b){var c=this.detectComponentType(a,b||this.nodeFetcher.getCurrentActiveNode());return c&&this.getActionsByType(c)},a.prototype.getActionsByType=function(a){return this.ONSTAGE_ACTIONS_BY_TYPE.TYPES[a]},a.prototype.detectComponentType=function(a,b){var c=this.getMediaType(b);if("media"===a.data.type){if(this.fieldEditorConfiguration.isSocial(a.data))return OnstageTypes.SOCIAL;if(this.isLogo(a)||this.isShape(c))return OnstageTypes.LOGO;if(this.isGallery(c))return this.flags.sectionMedia&&this.$injector.get("mediaSectionUtils").nodeHasBackground(b)?OnstageTypes.BG_GALLERY:OnstageTypes.GALLERY;if(this.isImage(c))return this.isDisaleCrop(b)?OnstageTypes.IMAGE_WITHOUT_CROP:OnstageTypes.IMAGE;if(this.isExtVideo(c))return OnstageTypes.EXT_VIDEO;if(this.isVideo(c))return OnstageTypes.VIDEO}return this.fieldEditorConfiguration.isButton(a.data)?OnstageTypes.BUTTON:this.fieldEditorConfiguration.isTextType(a.data)?this.isBusinessName(a)?OnstageTypes.BUSINESS_NAME:this.isContact(a)?OnstageTypes.CONTACT:this.isMap(a)?OnstageTypes.MAP:this.isParagraph(a)?OnstageTypes.LONGTEXT:OnstageTypes.TEXT:this.isMenu(a)?1===this.consumerMenu.getVisiblePageNodes().length?OnstageTypes.SECTIONS_MENU:OnstageTypes.PAGES_MENU:void 0},a.prototype.isLogo=function(a){return"Logo"===a.key},a.prototype.isBusinessName=function(a){return"BusinessName"===a.key},a.prototype.isContact=function(a){return a.data.subType===core.ElementSubTypes.Form},a.prototype.isMap=function(a){return a.data.subType===core.ElementSubTypes.Map},a.prototype.isParagraph=function(a){return a.data.subType===core.ElementSubTypes.LongText},a.prototype.isMenu=function(a){return"Menu"===a.key},a.prototype.isImage=function(a){return a===cc.MediaPreviewType.SingleImage},a.prototype.isShape=function(a){return a===cc.MediaPreviewType.Shape},a.prototype.isVideo=function(a){return a===cc.MediaPreviewType.Video},a.prototype.isExtVideo=function(a){return a===cc.MediaPreviewType.ExtVideo},a.prototype.isGallery=function(a){return a===cc.MediaPreviewType.MultipleImages},a.prototype.getMediaType=function(a){if(a)return this.flags.sectionMedia?this.$injector.get("mediaTypeResolver").getType(a):this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(a)},a.prototype.isDisaleCrop=function(a){if(this.applicationState.isInMobileEditMode())return!0;var b=this.mediaOverrideManager.getAllowedMediaOverride(a);return b===PresetMediaTypes.COAST2COAST||b===PresetMediaTypes.COLUMNBG},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("onstageActionsManager",OnstageActionsManager);var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),__assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},OnstageAction=function(){function a(a,b,c,d,e,f,g,h,i,j){void 0===h&&(h={}),void 0===i&&(i=OnstageActionType.Single),this.label=a,this.name=b,this.icon=c,this.event=d,this.state=e,this.goToState=f,this.mightChangeMenu=g,this.style=h,this.actionType=i,this.labelGetter=j}return a}(),OnstageActionGroup=function(a){function b(b,c,d,e,f){var g=a.call(this,b,c,d,e)||this;return g.label=b,g.name=c,g.icon=d,g.event=e,g.subActionsGetter=f,g.actionType=OnstageActionType.Group,g}return __extends(b,a),b}(OnstageAction),OnstageActionColorPick=function(a){function b(b,c,d,e,f,g){var h=a.call(this,b,c,d,e)||this;return h.label=b,h.name=c,h.icon=d,h.event=e,h.paletteGetter=f,h.colorSetter=g,h.actionType=OnstageActionType.ColorPicker,h}return __extends(b,a),b}(OnstageAction),OnstageActionType;!function(a){a[a.Single=0]="Single",a[a.Group=1]="Group",a[a.ColorPicker=2]="ColorPicker"}(OnstageActionType||(OnstageActionType={}));var OnstageActions=function(){function a(a,b){this.ONSTAGE_EVENTS=a,this.flags=b,this.HIDE=new OnstageAction("overlay.actions.hide","hide","osi:hideeye",this.ONSTAGE_EVENTS.HIDE),this.EDIT_CONTENT=new OnstageAction("overlay.actions.edit","edit-content","osi:rename",this.ONSTAGE_EVENTS.EDIT_CONTENT,{name:config.STATES.BUILDER_EDIT}),this.EDIT_ADDRESS=__assign({},this.EDIT_CONTENT,{label:"overlay.actions.edit-address",icon:"osi:address"}),this.EDIT_COMPONENT_STYLE=new OnstageAction("overlay.actions.styles","edit-style","osi:style",this.ONSTAGE_EVENTS.EDIT_COMPONENT_STYLE),this.CROP_IMAGE=new OnstageAction("overlay.actions.crop","crop-image","osi:crop",this.ONSTAGE_EVENTS.CROP_IMAGE),this.OPEN_MEDIA=new OnstageAction("overlay.actions.open-media","open-media","osi:replace",this.ONSTAGE_EVENTS.OPEN_MEDIA_MANAGER),this.ORGANIZE_GALLERY=__assign({},this.OPEN_MEDIA,{label:"overlay.actions.organize-gallery",name:"organize-gallery"}),this.CHANGE_GALLERY_TYPE=new OnstageAction("overlay.actions.gallery-type","gallery-type","osi:gallery",this.ONSTAGE_EVENTS.CHANGE_GALLERY_TYPE,this.flags.sectionMedia&&{name:config.STATES.BUILDER_NEW_MEDIA_SETTINGS}),this.OVERRIDE_TEXT_COLOR=new OnstageActionColorPick("overlay.actions.override-color","override-color","",this.ONSTAGE_EVENTS.OVERRIDE_TEXT_COLOR),this.SET_MAP_STYLE=new OnstageActionColorPick("overlay.actions.set-map-style","set-map-style","",this.ONSTAGE_EVENTS.SET_MAP_STYLE),this.OPEN_MEDIA_SETTINGS=new OnstageAction("overlay.actions.settings"+(this.flags.sectionMedia?"2":""),"settings","osi:settings",this.ONSTAGE_EVENTS.OPEN_SETTINGS,{name:this.flags.sectionMedia?config.STATES.BUILDER_NEW_MEDIA_SETTINGS:config.STATES.BUILDER_MEDIA_SETTINGS}),this.LINK_TO=new OnstageAction("overlay.actions.link-to","link-to","osi:link",this.ONSTAGE_EVENTS.LINK_TO),this.MEDIA_LINK_TO=__assign({},this.LINK_TO,{event:this.ONSTAGE_EVENTS.MEDIA_LINK_TO}),this.OPEN_SEO=new OnstageAction("overlay.actions.edit-seo","edit-seo","osi:seo",this.ONSTAGE_EVENTS.OPEN_SEO),this.OPEN_PAGES_PANEL=new OnstageAction("overlay.actions.edit-pages","edit-pages","osi:pages",null,{name:config.STATES.BUILDER_PAGES}),this.OPEN_SOCIAL_PANEL=new OnstageAction("overlay.actions.edit","edit-socials","osi:edit",this.ONSTAGE_EVENTS.OPEN_SOCIAL_PANEL),this.EDIT_LIST_ITEM=new OnstageAction("overlay.actions.edit","edit-list-item","osi:edit",this.ONSTAGE_EVENTS.EDIT_LIST_ITEM),this.HIDE_LIST_ITEM=new OnstageAction("overlay.actions.hide","hide-list-item","osi:hideeye",this.ONSTAGE_EVENTS.HIDE_LIST_ITEM),this.TOGGLE_PARAGRAPH_COLUMNS=new OnstageAction("overlay.actions.toggle-paragraphs","toggle-paragraph-columsn","osi:hideeye",this.ONSTAGE_EVENTS.TOGGLE_PARAGRAPH_COLUMNS,null,null,!0),this.DELETE_LIST_ITEM=new OnstageAction("overlay.actions.delete","delete-list-item","osi:delete",this.ONSTAGE_EVENTS.DELETE_LIST_ITEM),this.DUPLICATE_LIST_ITEM=new OnstageAction("overlay.actions.duplicate","duplicate-list-item","osi:duplicate",this.ONSTAGE_EVENTS.DUPLICATE_LIST_ITEM),this.LIST_ITEM_TO_PAGE=new OnstageAction("overlay.actions.list-item-to-page","create-page-from-item","osi:moveto",this.ONSTAGE_EVENTS.LIST_ITEM_TO_PAGE)}return a.$inject=["ONSTAGE_EVENTS","flags"],a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("ONSTAGE_ACTIONS",OnstageActions);var OnstageTypes={LOGO:"LOGO",BUTTON:"BUTTON",TEXT:"TEXT",LONGTEXT:"LONGTEXT",BUSINESS_NAME:"BUSINESS_NAME",CONTACT:"CONTACT",MAP:"MAP",PAGES_MENU:"PAGES_MENU",SECTIONS_MENU:"SECTIONS_MENU",SOCIAL:"SOCIAL",EXT_VIDEO:"EXT_VIDEO",VIDEO:"VIDEO",GALLERY:"GALLERY",BG_GALLERY:"BG_GALLERY",IMAGE:"IMAGE",IMAGE_WITHOUT_CROP:"IMAGE_WITHOUT_CROP",LIST_ITEM:"LIST_ITEM"},OnstageActionMap=function(){function a(a,b,c,d){void 0===d&&(d=[]),this.click=a,this.dbl_click=b,this.menuItems=c,this.moreItems=d,this._menu=c.concat(d)}return a.prototype.menu=function(a){var b;return b=_.any(this._menu,function(a){return a.actionType===OnstageActionType.Group})?_(this._menu).map(function(b){return b.actionType!==OnstageActionType.Group?b:[b].concat(b.subActionsGetter(a))}).flatten().value():this._menu,b.forEach(function(b){b.labelGetter&&(b.label=b.labelGetter(a))}),b},a}(),ABSOLUTE_BLACK="#000000",MINIMAL_CONTRAST=3.5,OnstageActionsByType=function(){function a(a,b,c,d,e){var f=this;this.ONSTAGE_ACTIONS=a,this.flags=b,this.themeChooser=c,this.chroma=d,this.designKit=e,this.colorsGetter=function(){return[]},this.currentColorGetter=function(){return""},this.currentMapStyleGetter=function(){return""},this.TYPES=(g={},g[OnstageTypes.LOGO]=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.OPEN_MEDIA,[this.ONSTAGE_ACTIONS.OPEN_MEDIA,this.ONSTAGE_ACTIONS.OPEN_MEDIA_SETTINGS,this.ONSTAGE_ACTIONS.HIDE,this.ONSTAGE_ACTIONS.MEDIA_LINK_TO]),g[OnstageTypes.BUTTON]=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,null,[this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.LINK_TO,this.ONSTAGE_ACTIONS.HIDE,this.flags.buttonStyleOverride&&this.ONSTAGE_ACTIONS.EDIT_COMPONENT_STYLE].filter(Boolean)),g[OnstageTypes.TEXT]=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,null,[this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.HIDE],[this.flags.overrideFieldColor&&this.ONSTAGE_ACTIONS.OVERRIDE_TEXT_COLOR].filter(Boolean)),g[OnstageTypes.LONGTEXT]=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,null,[this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.HIDE],[this.flags.sectionTextSplitParagraph&&this.ONSTAGE_ACTIONS.TOGGLE_PARAGRAPH_COLUMNS,this.flags.overrideFieldColor&&this.ONSTAGE_ACTIONS.OVERRIDE_TEXT_COLOR].filter(Boolean)),g[OnstageTypes.BUSINESS_NAME]=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,null,[this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.HIDE,this.ONSTAGE_ACTIONS.OPEN_SEO],[this.flags.overrideFieldColor&&this.ONSTAGE_ACTIONS.OVERRIDE_TEXT_COLOR].filter(Boolean)),g[OnstageTypes.CONTACT]=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,null,[this.ONSTAGE_ACTIONS.HIDE]),g[OnstageTypes.MAP]=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,null,[this.ONSTAGE_ACTIONS.EDIT_ADDRESS,this.ONSTAGE_ACTIONS.HIDE],this.flags.mapColoration?[this.ONSTAGE_ACTIONS.SET_MAP_STYLE]:[]),g[OnstageTypes.PAGES_MENU]=new OnstageActionMap(null,this.ONSTAGE_ACTIONS.OPEN_PAGES_PANEL,[this.ONSTAGE_ACTIONS.OPEN_PAGES_PANEL,this.ONSTAGE_ACTIONS.HIDE]),g[OnstageTypes.SECTIONS_MENU]=new OnstageActionMap(null,null,[this.ONSTAGE_ACTIONS.HIDE]),g[OnstageTypes.SOCIAL]=new OnstageActionMap(this.ONSTAGE_ACTIONS.OPEN_SOCIAL_PANEL,null,[this.ONSTAGE_ACTIONS.OPEN_SOCIAL_PANEL,this.ONSTAGE_ACTIONS.HIDE]),g[OnstageTypes.EXT_VIDEO]=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.OPEN_MEDIA,[this.ONSTAGE_ACTIONS.OPEN_MEDIA,this.ONSTAGE_ACTIONS.OPEN_MEDIA_SETTINGS,this.ONSTAGE_ACTIONS.HIDE]),g[OnstageTypes.VIDEO]=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.OPEN_MEDIA,[this.ONSTAGE_ACTIONS.OPEN_MEDIA,this.ONSTAGE_ACTIONS.HIDE]),g[OnstageTypes.GALLERY]=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.ORGANIZE_GALLERY,[this.ONSTAGE_ACTIONS.ORGANIZE_GALLERY,this.ONSTAGE_ACTIONS.CHANGE_GALLERY_TYPE,this.ONSTAGE_ACTIONS.HIDE]),g[OnstageTypes.BG_GALLERY]=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.ORGANIZE_GALLERY,[this.ONSTAGE_ACTIONS.ORGANIZE_GALLERY,this.ONSTAGE_ACTIONS.HIDE]),g[OnstageTypes.IMAGE]=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.OPEN_MEDIA,[this.ONSTAGE_ACTIONS.OPEN_MEDIA,this.ONSTAGE_ACTIONS.OPEN_MEDIA_SETTINGS,this.ONSTAGE_ACTIONS.CROP_IMAGE,this.ONSTAGE_ACTIONS.MEDIA_LINK_TO,this.ONSTAGE_ACTIONS.HIDE]),g[OnstageTypes.IMAGE_WITHOUT_CROP]=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.OPEN_MEDIA,[this.ONSTAGE_ACTIONS.OPEN_MEDIA,this.ONSTAGE_ACTIONS.OPEN_MEDIA_SETTINGS,this.ONSTAGE_ACTIONS.MEDIA_LINK_TO,this.ONSTAGE_ACTIONS.HIDE]),g[OnstageTypes.LIST_ITEM]=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_LIST_ITEM,null,[this.ONSTAGE_ACTIONS.EDIT_LIST_ITEM,this.ONSTAGE_ACTIONS.DUPLICATE_LIST_ITEM,this.ONSTAGE_ACTIONS.HIDE_LIST_ITEM,this.ONSTAGE_ACTIONS.DELETE_LIST_ITEM,this.ONSTAGE_ACTIONS.LIST_ITEM_TO_PAGE]),g),b.overrideFieldColor&&(this.colorsGetter=function(){return c.coloration.getColorsForCurrentColoration(!0)},this.ONSTAGE_ACTIONS.OVERRIDE_TEXT_COLOR.paletteGetter=function(a){var b=f.currentColorGetter(a.field),c=!1,e=f.colorsGetter(),g=_.pluck(e,"color"),h=_.pluck(e,"hex"),i=_(h).map(function(a,b){return d.contrast(a,ABSOLUTE_BLACK)<MINIMAL_CONTRAST?b:null}).without(null).value(),j=g.indexOf(b);if(b){var k=f.designKit.getColorOfFirstBackground(a.le,a.layout);c=d.contrast(h[j],k)<MINIMAL_CONTRAST}return{colorList:g,hexList:h,lightIconIndex:i,colorIndex:j,currentColor:b,contrastProblem:c}}),b.mapColoration&&(this.ONSTAGE_ACTIONS.SET_MAP_STYLE.paletteGetter=function(a){var b={hexList:[{color:"white",class:"map-style-white"},{color:"white",class:"map-style-black"},{color:"white",class:"map-style-color"}],colorIndex:void 0,lightIconIndex:[1],colorList:["white","black","color"]},c=f.currentMapStyleGetter(a.field);return c&&(b.colorIndex=b.colorList.indexOf(c)),b}),b.sectionTextSplitParagraph&&(this.ONSTAGE_ACTIONS.TOGGLE_PARAGRAPH_COLUMNS.labelGetter=function(a){return f.columnsLabelGetter(a)});var g}return a.$inject=["ONSTAGE_ACTIONS","flags","themeChooser","chroma","designKit"],a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("ONSTAGE_ACTIONS_BY_TYPE",OnstageActionsByType);var OverlaySegmentManager=function(){function a(a,b,c,d,e,f,g,h,i,j){this.storyServices=a,this.Solution=b,this.modelTree=c,this.tpaService=d,this.applicationState=e,this.sitePartTypes=f,this.$state=g,this.flags=h,this.overlayManager=i,this.slideShowService=j,this.nodeToSegmentOverlayElement={}}return a.$inject=["storyServices","Solution","modelTree","tpaService","applicationState","sitePartTypes","$state","flags","overlayManager","slideShowService"],a.prototype.isRegularListItem=function(a){var b=a.segments&&a.segments[0];return b&&b.node&&!b.node.contentElement.isSpecialListItem()},a.prototype.getLgData=function(a){var b=a.containingLG;if(this.flags.listItemSlideShow&&this.isRegularListItem(b)&&this.slideShowService.isSlideShowLG(b)){var c=this.overlayManager.data.focusedListSpan.groups,d=this.slideShowService.getNodeListLG(c);d&&d.getLgData&&(b=d)}return b.getLgData()},a.prototype.onSegmentOverlayCreate=function(a,b){this.nodeToSegmentOverlayElement[a.getId()]=b},a.prototype.onSegmentOverlayDestroy=function(a){delete this.nodeToSegmentOverlayElement[a.getId()]},a.prototype.isActiveSegmentNodeId=function(a,b){if(this.applicationState.isEditMode()){var c=this.applicationState.getContentFocus();if(c)return c.sitePart===this.sitePartTypes.HEADER?"header"===a:this.$state.params.childId?a===this.$state.params.childId:a===c.nodeId||b&&0===a.indexOf(c.nodeId)}return!1},a.prototype.isActiveSegmentNodeIdAnyEdit=function(a,b){if(this.applicationState.isInAnyEditOrDesignOfSectionPanel()){var c=this.applicationState.getContentFocus();if(c)return c.sitePart===this.sitePartTypes.HEADER?"header"===a:this.$state.params.childId?a===this.$state.params.childId:a===c.nodeId||b&&0===a.indexOf(c.nodeId)}return!1},a.prototype.getSegmentOverlayPosition=function(b){return this.nodeToSegmentOverlayElement[b].find(a.OverlaySegmentSelector).offset()},a.prototype.getMediaOverlayPosition=function(b){return this.nodeToSegmentOverlayElement[b].find(a.OverlaySegmentSelector+" "+a.OverlayMediaSelector)[0].getBoundingClientRect()},a.prototype.isSectionActive=function(a){return this.isActiveSegmentNodeIdAnyEdit(a.getSafeId(),a.contentElement.isSpecialListItem())},a.prototype.editSegment=function(a){var b="header"===a.getSafeId()?this.modelTree.getGeneralInformation():a.node,c=!0;if(b.isTpaNode()&&(c=!!this.tpaService.getEditWidgetUrl(b)),c){this.lastHoveredArgs=null,this.lastClickedArgs=null;!(["ListHeader","ListFooter"].indexOf(a.contentElement.type)>-1)&&a.node&&a.node.isListItem&&this.applicationState.isEditMode()?this.applicationState.goToEditMode(a.getSafeId()):this.applicationState.goToEditMode()}},a}();OverlaySegmentManager.OverlaySegmentSelector=".segment-overlay",OverlaySegmentManager.OverlayMediaSelector=".segment-component.media",angular.module("siteGeneratorStaticsConsumerAppInternal").service("overlaySegmentManager",OverlaySegmentManager);var OverlayData=function(){function a(a,b){this.listSpanManager=a,this.sitePartTypes=b,this.init()}return Object.defineProperty(a.prototype,"dropTargetData",{get:function(){return this._dropTargetData},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"siteParts",{get:function(){return this._siteParts},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"draggedListSpan",{get:function(){return this._draggedListSpan},set:function(a){this._draggedListSpan=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"focusedListSpan",{get:function(){return this._focusedListSpan},set:function(a){this._focusedListSpan=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hoveredListSpan",{get:function(){return this._hoveredListSpan},set:function(a){this._hoveredListSpan=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"draggedPresetPreview",{get:function(){return this._draggedPresetPreview},set:function(a){this._draggedPresetPreview=a},enumerable:!0,configurable:!0}),a.prototype.init=function(){this._siteParts={},this._siteParts[this.sitePartTypes.HEADER]={},this._siteParts[this.sitePartTypes.BODY]={},this._siteParts[this.sitePartTypes.FOOTER]={},this._dropTargetData=new OverlayDropTargetData},a}(),OverlayColumnsPosition=function(){function a(a,b,c,d){this.flags=a,this.columnService=b,this.applicationState=c,this.applicationParameters=d}return a.$inject=["flags","columnService","applicationState","applicationParameters"],a.prototype.getIndications=function(a,b){var c=a.getLENoError();if(!c||!c.argList)return null;var d,e,f,g,h,i=b,j=_.any(i&&i[0],function(a){return a.isMobile}),k=_.any(i&&i[0],function(a){return a.isVirtual}),l=!k&&_.any(i&&i[0],function(a){return a.allSettings}),m=k||l,n=a.getLayoutSelectionStore().getOverride("media",a,"allowedMediaOverrides"),o=m&&("image"===i[0][0].allSettings.backgroundMode||"imageOrColor"===i[0][0].allSettings.backgroundMode);if(m&&!j){var p=this.columnService.getColumnsContainerProps(i[0]);d=p.fullWidth?this.applicationState.previewFrameWidth-2*(p.siteMargin||0):this.applicationParameters.desktopPageWidth,e=p.columnsMargin,f=p.siteMargin,g=a.containingLG.isHeader()?d/this.applicationParameters.desktopPageWidth:(d-e*(i[0].length-1))/this.columnService.totalStructureColumns,h=a.containingLG.isHeader()?1:this.columnService.totalPageWidth/this.columnService.totalStructureColumns}return{columnsRows:i,isMobileColumns:j,isHybridColumns:m,mediaType:n,isColumnWithMediaBG:o,columnsWidth:d,columnSpacing:e,columnsMargin:f,columnsUnitWidth:g,gridUnitWidth:h}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("overlayColumnsPosition",OverlayColumnsPosition);var OverlayDropTargetData=function(){function a(){this._dropTargetId=null,this._dropTargetPosition=0,this._dropTargetLocked=!1}return Object.defineProperty(a.prototype,"dropTargetId",{get:function(){return this._dropTargetId},set:function(a){this._dropTargetId=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isDropTargetLocked",{get:function(){return this._dropTargetLocked},enumerable:!0,configurable:!0}),
Object.defineProperty(a.prototype,"dropTargetPosition",{get:function(){return this._dropTargetPosition},set:function(a){this._dropTargetPosition=a},enumerable:!0,configurable:!0}),a.prototype.lock=function(){this._dropTargetLocked=!0},a.prototype.unlock=function(){this._dropTargetLocked=!1},a}();OverlayDropTargetData.DropTargetHeight=450;var OverlayManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=this;if(this.$rootScope=a,this.solutionSantaMediator=b,this.$q=c,this.renderedModelMobileAdapter=d,this.sitePartTypes=e,this.previewScale=f,this.modelTree=g,this.designKit=h,this.storyServices=i,this.applicationParameters=j,this.Solution=k,this.documentServicesMediator=l,this.flags=m,this.FeatureList=n,this.prettyAlgoRuleEngine=o,this.prettyAlgoRules=p,this.$injector=q,this.layoutSolver=r,this.mergedHeaderService=s,this._partRenderCache={},this.isAddTargetKnown=!1,this._listSpanManager=new ListSpanManager(this.solutionSantaMediator,this.$q,this.renderedModelMobileAdapter,this.documentServicesMediator,this.previewScale,function(){return t.applicationParameters.isInMobileEditMode()},this.sitePartTypes,this.layoutSolver,this.flags,this.mergedHeaderService),this._overlayData=new OverlayData(this.listSpanManager,this.sitePartTypes),this.$rootScope.$watch(function(){return t.previewScale.getScale()},function(a){return t.calculateDropTargetPosition(t.dropTargetId)}),this.storyServices.onRenderedPart(this.renderedPartHandler.bind(this)),this.flags.debug&&this.flags.prettyAlgo){var u=this.$injector.get("prettyAlgoDX");u.init().then(function(){return u.getRulesFromDB()}).then(function(a){t.prettyAlgoRules=a,console.log("loaded rules from firebase",a)})}}return a.$inject=["$rootScope","solutionSantaMediator","$q","renderedModelMobileAdapter","sitePartTypes","previewScale","modelTree","designKit","storyServices","applicationParameters","Solution","documentServicesMediator","flags","FeatureList","prettyAlgoRuleEngine","prettyAlgoRules","$injector","layoutSolver","mergedHeaderService"],a.prototype.getPartRenderCache=function(a){void 0===a&&(a=this.applicationParameters.isInMobileEditMode());var b=a?"mobile":"desktop";return this._partRenderCache[b]=this._partRenderCache[b]||{},this._partRenderCache[b]},Object.defineProperty(a.prototype,"data",{get:function(){return this._overlayData},enumerable:!0,configurable:!0}),a.prototype.getDropTargetSection=function(){var a=this,b=this.listSpanManager.getAllInBody();return _.find(b,function(b){return b.node.getId()===a.dropTargetId})},a.prototype.onEditModeSwitched=function(){var a=this,b=_.mapValues(this.getPartRenderCache(),function(b,c){return c===a.sitePartTypes.BODY?b[a.storyServices.story.selectedPage]:b.any});_.each(b,function(b,c){return b&&a.updateData(b.solution,c,b.height)})},a.prototype.getSitePartByType=function(a){return this.data.siteParts[a]},a.prototype.updateSitePart=function(a){this.data.siteParts[a.partType]=a,this.calculatePartHeight(a.partType)},a.prototype.getViewerHeight=function(){var b=_.sum(this.data.siteParts,function(a){return a.originalHeight});return this.dropTargetId&&!this.listSpanManager.isBodyEmpty()&&(b+=a.DropTargetHeight),b},a.prototype.calculateBodyHeight=function(){this.calculatePartHeight(this.sitePartTypes.BODY)},Object.defineProperty(a.prototype,"listSpanManager",{get:function(){return this._listSpanManager},enumerable:!0,configurable:!0}),a.prototype.isListSpanHovered=function(a){return this.listSpanManager.equals(a,this.data.hoveredListSpan)},a.prototype.isListSpanFocused=function(a){return this.listSpanManager.equals(a,this.data.focusedListSpan)},a.prototype.updateContentFocus=function(a){a?(this.data.focusedListSpan=this.listSpanManager.getByNodeId(a.nodeId,a.sitePart),this.isListSpanFocused(this.data.hoveredListSpan)&&(this.data.hoveredListSpan=null)):(this.data.focusedListSpan=null,this.data.hoveredListSpan=null)},Object.defineProperty(a.prototype,"isCurrentPageEmpty",{get:function(){if(!this.storyServices.story)return!0;var a=this.modelTree.getPageNodeById(this.storyServices.story.selectedPage);return!_.some(a.children,{userHidden:!1})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dropTargetData",{get:function(){return this.data.dropTargetData},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dropTargetId",{get:function(){return this.dropTargetData.dropTargetId},enumerable:!0,configurable:!0}),a.prototype.clearDropTarget=function(){return this.setDropTarget(null)},Object.defineProperty(a.prototype,"addTargetKnown",{get:function(){return this.isAddTargetKnown},enumerable:!0,configurable:!0}),a.prototype.setAddTargetKnown=function(a){this.isAddTargetKnown=a},a.prototype.setDropTarget=function(a){if(this.dropTargetData.isDropTargetLocked)return!1;if(a===this.dropTargetId)return!0;this.designKit.resetPresetSelections();var b=this.dropTargetId;return this.dropTargetData.dropTargetId=a,this.calculatePartHeight(this.sitePartTypes.BODY),a?this.handleDropTargetChange(b,a):this.listSpanManager.rerenderFromIndex(0),!0},a.prototype.lockDropTarget=function(a){return!this.dropTargetData.isDropTargetLocked&&(this.setDropTarget(a),this.dropTargetData.lock(),!0)},a.prototype.unlockDropTarget=function(){this.dropTargetData.unlock()},a.prototype.makeSpaceForDropTarget=function(b,c){var d=this.listSpanManager.getAllInBody(),e=this.getListSpanIndex(c,d),f=b?this.getListSpanIndex(b,d):d.length,g=Math.min(f,e),h=Math.max(f,e),i=d.slice(g+1,h+1),j=f>e?1:-1,k=j*a.DropTargetHeight;return this.listSpanManager.moveListSpansByOffset(i,k)},a.prototype.handleDropTargetChange=function(a,b){this.makeSpaceForDropTarget(a,b),this.calculateDropTargetPosition(b)},a.prototype.calculateDropTargetPosition=function(a){if(!a)return void(this.data.dropTargetData.dropTargetPosition=0);var b=this.listSpanManager.getAllInBody(),c=_.find(b,function(b){return b.node.getId()===a});if(c){var d=this.listSpanManager.getListSpanLayout(c);this.data.dropTargetData.dropTargetPosition=(d.top+d.height)*this.previewScale.getScale()}else this.data.dropTargetData.dropTargetPosition=0},a.prototype.renderedPartHandler=function(a,b,c,d,e,f){var g="mobile"===f,h=b===this.sitePartTypes.BODY,i=this.getPartRenderCache(g)[b]||{};i[h?e:"any"]={solution:c,height:d},this.getPartRenderCache(g)[b]=i,g===!!this.applicationParameters.isInMobileEditMode()&&(!h||this.storyServices.story.selectedPage===e)&&this.updateData(c,b,d)},a.prototype.updateData=function(a,b,c){var d=this,e=this.Solution.calculateListSpans(a),f={partType:b,originalHeight:c,adjustedHeight:c,listSpans:e};if(this.flags.prettyAlgo&&b===this.sitePartTypes.BODY)for(var g=this.modelTree.getPageNodeById(this.storyServices.story.selectedPage),h=g.children,i=2,j=h.length;i<j;i++){var k=e[h[i-1].id],l=e[h[i].id],m=new this.FeatureList(k),n=new this.FeatureList(l),o=this.prettyAlgoRuleEngine.getScores(this.prettyAlgoRules,m,[n])[0];o&&(l.prettyAlgo={score:o.score,rules:o.rules,features:n})}this.updateSitePart(f),this.listSpanManager.setSitePartListSpans(b,_.values(e),function(){return b!==d.sitePartTypes.BODY||d.applicationParameters.isInMobileEditMode()?f.adjustedHeight:ListSpanManager.MinBodyHeight}),this.data.focusedListSpan&&(this.data.focusedListSpan=this.listSpanManager.getByNodeId(this.data.focusedListSpan.listNodeId,this.data.focusedListSpan.sitePart)),this.data.hoveredListSpan&&(this.data.hoveredListSpan=this.listSpanManager.getByNodeId(this.data.hoveredListSpan.listNodeId,this.data.hoveredListSpan.sitePart))},a.prototype.getListSpanIndex=function(a,b){var c=this;return _.findIndex(b,function(b){var d=b.node.id,e=b.sitePart;return d===a&&e===c.sitePartTypes.BODY})},a.prototype.calculatePartHeight=function(b){if(b===this.sitePartTypes.BODY){var c=this.getSitePartByType(b);if(!c)throw new Error("site part not found:"+b);c.adjustedHeight=c.originalHeight,this.data.draggedListSpan&&(c.adjustedHeight-=this.listSpanManager.getListSpanLayout(this.data.draggedListSpan).height),this.data.dropTargetData.dropTargetId&&!this.isCurrentPageEmpty&&(c.adjustedHeight+=a.DropTargetHeight)}},a}();OverlayManager.DropTargetHeight=450,angular.module("siteGeneratorStaticsConsumerAppInternal").service("overlayManager",OverlayManager);var OverlayPosition=function(){function a(a,b,c,d,e,f,g,h){var i=this;this.flags=a,this.animationChanges=b,this.columnService=c,this.overlaySegmentManager=d,this.PresetMediaType=e,this.applicationParameters=f,this.applicationState=g,this.overlayModel=h,this.siteMargin=function(){return(i.applicationState.previewFrameWidth-i.applicationParameters.desktopPageWidth)/2},this.siteWidth=function(){return i.applicationState.previewFrameWidth}}return a.$inject=["flags","animationChanges","columnService","overlaySegmentManager","PresetMediaType","applicationParameters","applicationState","overlayModel"],a.prototype.getOverlay=function(a,b){return this.applicationState.isInMobileEditMode()?this.overlayModel.getMobile(a,b):this.overlayModel.get(a,b)},a.prototype.getCache=function(a,b){var c=this;void 0===b&&(b=function(a){return a});var d={};return function(e,f){if(void 0===f&&(f=d.position),!_.isEqual(d,{scale:e,position:f})){d={scale:e,position:f};var g=b(_.mapValues(d.position,function(a){return"number"==typeof a?a*e:a}),e,f);c.animationChanges.add(function(){return a.css(g)})}}},a.prototype.fakeLayout=function(a,b){var c=_.pick(a,"height","width");if(c.left=a.absoluteLeft,c.top=a.absoluteTop,b[0].mapping.column){var d=b,e=this.columnsBounding(d);c.left-=e.left}return c},a.prototype.c2c=function(a,b,c){var d=b.containgingSegment;return(d&&d.getLayoutSelectionStore().getOverride("media",d,"allowedMediaOverrides"))===PresetMediaTypes.COAST2COAST&&b.isMediaLayout(a)&&(c.width=this.siteWidth(),c.left=-this.siteMargin()),c},a.prototype.columnsBounding=function(a,b){var c=this,d=this.shouldBoundContent(a,b)?a.map(function(a){return a.columnContentBounding(c.siteWidth())}):a.map(function(a){return a.columnBounding(c.siteWidth())});return this.overlayModel.overlayBoundingRect(d)},a.prototype.offsetInColumns=function(a,b,c){var d={left:0,top:0},e=this.columnsBounding(b),f=a.columnBounding(this.siteWidth());return d.left+=f.left-e.left,d.top+=f.top-e.top,d},a.prototype.contentOffset=function(a){var b=a.columnBounding(this.siteWidth());return a.columnContentBounding(this.siteWidth()).left-b.left},a.prototype.shouldBoundContent=function(a,b){var c=b&&b.isListItem&&!b.isListFooter()&&!b.isListHeader(),d=!!a.filter(function(a){return"media"===a.mapping.background})[0];return c&&!d},a.prototype.segmentLayout=function(a,b,c){var d=this.overlaySegmentManager.getLgData(b),e=d.strip.paddingTop||0;d.topLine.enable&&"space"===d.topLine.line&&(e+=d.topLine.space);var f=b.left,g=b.width,h=b.getRenderedHeight();if(b.containingLG.columns)if(this.flags.coreNewZigZag||b.isContact()){var i=this.columnService.getRowsHeight(b.containingLG);h=_.sum(i)}else d.strip.inlinePaddingTop&&(h+=d.strip.inlinePaddingTop),d.strip.inlinePaddingBottom&&(h+=d.strip.inlinePaddingBottom);if(a.isHybridColumns){var j=a.columnsRows[0].findIndex(function(a){return a.segment===b}),k=a.columnsRows[0].filter(function(a){return a.segment===b}),l=k.length>1?0:k[0].extraProps.alignment;f=this.columnLeft(a,k[0],j,l),(a.isColumnWithMediaBG||k.length>1)&&(g=_.sum(k,function(b){return a.columnsUnitWidth*(b.renderedWidth||b.width)+a.columnSpacing})-a.columnSpacing)}else a.mediaType===this.PresetMediaType.COAST2COAST&&(f-=(this.applicationState.previewFrameWidth-940)/2,g=this.applicationState.previewFrameWidth);var m=(e+b.top)*c,n=f*c,o=h*c,p=g*c;return this.space(m,n,o,p)},a.prototype.componentLayout=function(a,b,c,d){var e=b.containingSegment,f=this.overlaySegmentManager.getLgData(e);if(!this.overlaySegmentManager.isSectionActive(e))return{width:0,height:0,top:0,left:0,visibility:"hidden"};var g=c.absoluteLeft,h=c.absoluteTop,i=c.height,j=c.width;if(f.strip.inlinePaddingTop&&!c.isFake&&(h+=f.strip.inlinePaddingTop),a.isHybridColumns){var k=c.columnsRowIndex||0,l=a.columnsRows[k].findIndex(function(a){return a.segment===e})+(c.columnsColIndex||0),m=a.columnsRows[0].filter(function(a){return a.segment===e}),n=a.columnsRows[k][l];if(b.isMediaLayout(c)&&n&&"image"===n.currentSettings.backgroundMode){var o=this.columnService.getRowsHeight(e.containingLG);h=_.sum(_.range(k),function(a,b){return o[b]}),i=n.height,g=(n.virtualOffset||0)*a.columnsUnitWidth+a.columnSpacing*(c.columnsColIndex||0),j=a.columnsUnitWidth*(n.renderedWidth||n.width),this.flags.coreNewZigZag&&(k===a.columnsRows.length-1&&f.strip.inlinePaddingBottom?i+=f.strip.inlinePaddingBottom:0===k&&f.strip.inlinePaddingTop&&(i+=f.strip.inlinePaddingTop))}else if(b.isMediaLayout(c)&&a.mediaType===this.PresetMediaType.COAST2COAST||c.isFake){var p=a.columnsRows[0].findIndex(function(a){return a.segment===e}),q=m.length>1?0:m[0].extraProps.alignment,r=this.columnLeft(a,m[0],p,q);g=-r-(this.applicationState.previewFrameWidth-940)/2,j=this.applicationState.previewFrameWidth}else{n.virtualOffset&&(g-=n.virtualOffset*a.gridUnitWidth,g+=n.virtualOffset*a.columnsUnitWidth+a.columnSpacing*(c.columnsColIndex||0));var q=this.columnService.getAlignment(a.columnsRows[k],l);q&&(g-=(n.renderedMinWidth-e.width)*q/100,(a.isColumnWithMediaBG||m.length>1)&&(g+=(a.columnsUnitWidth*(n.renderedWidth||n.width)-n.segment.width)*q/100)),n.renderedLayoutLeftOffset&&(g+=n.renderedLayoutLeftOffset);var s=void 0,t=void 0,u=void 0;this.flags.coreNewZigZag&&e.containingLG.isZigZagWithColumns()&&!b.isMediaLayout(c)?(t=this.columnService.getRowsHeight(e.containingLG),u=_.sum(_.slice(t,0,k)),s=this.columnService.calcOffsetForCenteredColumn(b,n,n.layout,f.strip.inlinePaddingTop,f.strip.inlinePaddingBottom),h=u+c.top-s):e.isContact()&&(t=this.columnService.getRowsHeight(e.containingLG),u=_.sum(_.slice(t,0,k)),s=n.layout?this.columnService.calcOffsetForContactColumn(b,a.columnsRows[k],n,n.layout,0):0,h=u+c.top-s)}}else a.mediaType===this.PresetMediaType.COAST2COAST&&(b.isMediaLayout(c)?(g=0,j=this.applicationState.previewFrameWidth):g+=(this.applicationState.previewFrameWidth-940)/2);return this.space(h*d,g*d,i*d,j*d,!0)},a.prototype.columnLeft=function(a,b,c,d){var e=(b.renderedOffset||b.offset)*a.columnsUnitWidth+a.columnSpacing*c,f=b.renderedMinWidth;return e-=(a.columnsWidth-940)/2,f=a.isColumnWithMediaBG?a.columnsUnitWidth*(b.renderedWidth||b.width):b.segment.width,isNaN(d)&&(d=this.columnService.getAlignment(a.columnsRows[0],c)),d&&(e+=((b.renderedWidth||b.width)*a.columnsUnitWidth-f)*d/100),e},a.prototype.space=function(a,b,c,d,e){return void 0===e&&(e=!1),{width:d+2*SegmentOverlay.BorderWidth+2*SegmentOverlay.Padding,height:c+2*SegmentOverlay.Padding,top:a-(e?SegmentOverlay.BorderWidth:SegmentOverlay.Padding),left:b-(e?SegmentOverlay.BorderWidth:SegmentOverlay.BorderWidth+SegmentOverlay.Padding)}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("overlayPosition",OverlayPosition);var IframeViewAdapter=function(){function a(a,b,c,d,e){this.previewService=a,this.applicationState=b,this.flags=c,this.documentServicesMediator=d,this.$document=e}return a.$inject=["previewService","applicationState","flags","documentServicesMediator","$document"],a.prototype.prepareForPreview=function(){if(this.init()){if(this.iframe.style.width="",this.iframe.style.marginLeft="",this.iframe.style.transform="none",this.browserWrapper&&(this.browserWrapper.style.height="100%"),(this.flags.newMobilePreview||this.flags.mobileEditor)&&this.applicationState.isPreviewDisplay()&&this.applicationState.isInMobileEditMode())return this.iframe.style.height="",void(this.iframe.style.maxWidth="");this.iframe.style.height="100%",this.iframe.style.maxWidth=""}},a.prototype.exitPreview=function(){this.browserWrapper&&(this.browserWrapper.style.height="")},a.prototype.setHeight=function(a){if(this.init())return(this.flags.newMobilePreview||this.flags.mobileEditor)&&this.applicationState.isPreviewDisplay()&&this.applicationState.isInMobileEditMode()?void(this.iframe.style.height=""):void(this.iframe.style.height=this.applicationState.isPreviewDisplay()?"100%":a+"px")},a.prototype.setScale=function(a){this.init()&&this.documentServicesMediator.getDocumentServices()&&(this.documentServicesMediator.setSiteScrollAndScale(0,0,a),this.centerIframe(a))},a.prototype.setScrollTop=function(a){this.documentServicesMediator.getDocumentServices()&&this.documentServicesMediator.setSiteScroll(0,a)},a.prototype.init=function(){if(this.iframe)return!0;var a=this.$document.find(Viewer.IframeSelector);if(0===a.length)return!1;this.iframe=a[0];var b=$(".browser-wrapper");return this.browserWrapper=b&&b[0],!0},a.prototype.centerIframe=function(a){var b=this.applicationState.isInMobileEditMode()?Viewer.ViewerMobileBaseSize:Viewer.ViewerDesktopBaseSize,c=b*a,d=(b-c)/2;this.iframe.style.marginLeft="-"+d+"px",this.iframe.style.width=b+"px",this.iframe.style.maxWidth=b+"px"},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("iframeViewAdapter",IframeViewAdapter);var ViewerHeightController=function(){function a(a,b,c,d,e,f,g){var h=this;this.$window=a,this.$rootScope=b,this.previewScale=c,this.overlayManager=d,this.iframeViewAdapter=e,this.applicationState=f,this.flags=g,this.topBarHeight=0,this.registerWindowResizeListener(),this.setTopBarHeight(),this.$rootScope.$watch(function(){return h.topBarHeight+"-"+h.applicationState.isPreviewDisplay()+"-"+h.overlayManager.getViewerHeight()},function(){return h.resetHeight()})}return a.$inject=["$window","$rootScope","previewScale","overlayManager","iframeViewAdapter","applicationState","flags"],a.prototype.setTopBarHeight=function(){var a=this,b=this.$rootScope.$watch(function(){return angular.element(Viewer.TopBarSelector).height()},function(c){c&&(a.topBarHeight=c,b())})},a.prototype.setHeight=function(a,b){b&&(this.currentViewerHeight=b);var c=this.getViewportHeight(),d=this.currentViewerHeight*a,e=Math.min(d,c);0!==e&&this.iframeViewAdapter.setHeight(e)},a.prototype.getViewportHeight=function(){return angular.element(Viewer.BuilderSelector).height()-(this.applicationState.isPreviewDisplay()?0:this.topBarHeight)-2*Viewer.FakeBrowserVerticalSpacing-Viewer.FakeBrowserBarHeight},a.prototype.resetHeight=function(){this.setHeight(this.previewScale.getScale(),this.overlayManager.getViewerHeight())},a.prototype.registerWindowResizeListener=function(){var a=this,b=_.debounce(function(){a.previewScale.reset(),a.resetHeight(),a.$rootScope.$apply()},Viewer.ResizeWindowDebounce);this.$window.addEventListener(Viewer.WindowResizeEvent,b)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("viewerHeightController",ViewerHeightController);var ViewerScaleController=function(){function a(a,b,c,d,e,f,g){var h=this;this.$rootScope=a,this.initService=b,this.previewScale=c,this.applicationState=d,this.viewerHeightController=e,this.viewerScrollController=f,this.iframeViewAdapter=g,b.loaded().then(function(){h.$rootScope.$watch(function(){return h.applicationState.isPreviewDisplay()+"-"+h.applicationState.isInMobileEditMode()+"-"+h.previewScale.getScale()},function(){return h.updateScale(h.previewScale.getScale())})})}return a.$inject=["$rootScope","initService","previewScale","applicationState","viewerHeightController","viewerScrollController","iframeViewAdapter"],a.prototype.updateScale=function(a){this.applicationState.isPreviewDisplay()||this.applicationState.isRenderAndReturnToDesktop()||(this.iframeViewAdapter.setScale(a),this.viewerHeightController.setHeight(a),this.viewerScrollController.refreshScroll())},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("viewerScaleController",ViewerScaleController);var ViewerScrollController=function(){function a(a,b,c,d,e){this.$rootScope=a,this.$window=b,this.documentServicesMediator=c,this.applicationState=d,this.iframeViewAdapter=e}return a.$inject=["$rootScope","$window","documentServicesMediator","applicationState","iframeViewAdapter"],a.prototype.init=function(a){var b=this;this.$scrollingSource=a,this.$scrollingSource.on("scroll",this.onScroll.bind(this)),this.documentServicesMediator.siteChanges.register(function(){return!b.applicationState.isPreviewDisplay()&&b.refreshScroll()},!0)},a.prototype.getScrollbarWidth=function(){var a="Win32"===this.$window.navigator.platform,b=this.$window.chrome,c=void 0!==this.$window.InstallTrigger;if(a&&!b&&!c)return 0;var d,e,f=document.documentElement,g=0;return d=document.createElement("div"),d.style.cssText="position: absolute;\n                             left: -100px;\n                             width: 50px;\n                             height: 50px;\n                             overflow: scroll;\n                             -ms-overflow-style: scrollbar",e=document.createElement("div"),e.style.cssText="width: 100px; height: 100px",d.appendChild(e),f.appendChild(d),g=d.offsetWidth-d.clientWidth,f.removeChild(d),g},a.prototype.refreshScroll=function(){this.scrollIframe(this.$scrollingSource.scrollTop())},a.prototype.onScroll=function(a){this.scrollIframe(a.target.scrollTop)},a.prototype.scrollIframe=function(b){this.iframeViewAdapter.setScrollTop(b),this.$rootScope.$broadcast(a.PreviewScrollEvent)},a}();ViewerScrollController.PreviewScrollEvent="previewScroll",angular.module("siteGeneratorStaticsConsumerAppInternal").service("viewerScrollController",ViewerScrollController);var ViewerPreviewController=function(){function a(a,b,c){var d=this;this.$rootScope=a,this.applicationState=b,this.iframeViewAdapter=c,this.$rootScope.$watch(function(){return d.applicationState.isPreviewDisplay()},this.handlePreviewChange.bind(this))}return a.$inject=["$rootScope","applicationState","iframeViewAdapter"],a.prototype.handlePreviewChange=function(a,b){if(!a)return void this.iframeViewAdapter.exitPreview();a!==b&&this.iframeViewAdapter.prepareForPreview()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("viewerPreviewController",ViewerPreviewController);var Viewer=function(){function a(b,c,d,e,f,g,h,i,j,k){this.previewService=b,this.$window=c,this.$element=d,this.$scope=e,this.applicationState=f,this.viewerScrollController=g,this.viewerScaleController=h,this.viewerHeightController=i,this.documentServicesMediator=j,this.viewerPreviewController=k,a.ViewerDesktopBaseSize=this.applicationState.previewFrameWidth}return a.$inject=["previewService","$window","$element","$scope","applicationState","viewerScrollController","viewerScaleController","viewerHeightController","documentServicesMediator","viewerPreviewController"],a.prototype.$postLink=function(){var b=this,c=this.$element.find(a.IframeSelector);this.contentWindow=c[0].contentWindow,this.enableReactDevTools(),this.previewService.registerUrlLoader(this.onUrlLoad.bind(this)),this.$window.addEventListener("message",this.onWindowMessage.bind(this),!1),this.$scope.$watch(function(){return b.applicationState.isPreviewDisplay()},function(a,c){b.$element.css("opacity",a?0:1)})},a.prototype.onUrlLoad=function(a){this.contentWindow.location.replace(a)},a.prototype.onWindowMessage=function(a){"documentServicesLoaded"===a.data&&this.contentWindow&&this.contentWindow.documentServices&&this.contentWindow.documentServicesModel&&(this.documentServicesMediator.initialize(this.contentWindow),this.previewCtrl.viewerLoaded(this.contentWindow,this.contentWindow.documentServices,this.contentWindow.documentServicesModel))},a.prototype.enableReactDevTools=function(){var a=this;this.$window.__REACT_DEVTOOLS_GLOBAL_HOOK__&&this.$element.load(function(){a.contentWindow.__REACT_DEVTOOLS_GLOBAL_HOOK__=a.$window.__REACT_DEVTOOLS_GLOBAL_HOOK__})},a}();Viewer.ViewerDesktopBaseSize=1040,Viewer.ViewerMobileBaseSize=320,Viewer.FakeBrowserVerticalSpacing=18,Viewer.FakeBrowserBarHeight=36,Viewer.ResizeWindowDebounce=300,Viewer.WindowResizeEvent="resize",Viewer.BuilderSelector=".builder",Viewer.TopBarSelector="top-bar",Viewer.IframeSelector="iframe.viewer",angular.module("siteGeneratorStaticsConsumerAppInternal").component("viewer",{template:'<iframe name="viewer" class="viewer" ng-class="{ preview: $ctrl.applicationState.isPreviewDisplay(), \'fixed-fake-browser-height\': $ctrl.applicationState.isFakeBrowserHeightFixed() }" style="height: 100px;"></iframe>',require:{previewCtrl:"^preview"},controller:Viewer});var Overlay=function(){function a(a,b,c,d,e,f){var g=this;this.flags=a,this.applicationState=b,this.overlayManager=c,this.overlayPosition=d,this.storyServices=e,this.pubSub=f,this.isFakeBrowserHeightFixed=function(){return g.applicationState.isFakeBrowserHeightFixed()},this.data=function(a){return g.overlayManager.getSitePartByType(a)},this.isPreviewDisplay=function(){return g.applicationState.isPreviewDisplay()},this.isInMobileEditMode=function(){return g.applicationState.isInMobileEditMode()},this.getFocusedListSpan=function(){return g.overlayManager.data.focusedListSpan},this.getHoveredListSpan=function(){return g.overlayManager.data.hoveredListSpan},this.isShowOverlayBackdrop=function(){return g.overlayManager.showBackdrop},this.overlayBackdropClicked=function(){return g.pubSub.fire(PubSub.events.OVERLAY_BACKDROP_CLICK)}}return a.$inject=["flags","applicationState","overlayManager","overlayPosition","storyServices","pubSub"],a.prototype.height=function(a){if(this.flags.overlayModel){var b=this.storyServices.story&&this.overlayPosition.getOverlay(a,this.storyServices.story.selectedPage);return b?b.layout.height:0}return this.data(a).adjustedHeight},Object.defineProperty(a.prototype,"showFocusedListSpan",{get:function(){return!!this.getFocusedListSpan()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showHoveredListSpan",{get:function(){return this.applicationState.isSteady()&&!!this.getHoveredListSpan()},enumerable:!0,configurable:!0}),a}();Overlay.ViewportSelector=".overlay-viewport",angular.module("siteGeneratorStaticsConsumerAppInternal").component("overlay",{templateUrl:"views/preview/overlay.html",controller:Overlay,controllerAs:"$overlay"});var SolutionOverlay=function(){function a(a,b,c){this.applicationState=a,this.overlayManager=b,this.sitePartTypes=c}return a.$inject=["applicationState","overlayManager","sitePartTypes"],Object.defineProperty(a.prototype,"isInDesktopEditMode",{get:function(){return this.applicationState.isInDesktopEditMode()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dropTargetHeight",{get:function(){return this.overlayManager.isCurrentPageEmpty?ListSpanManager.MinBodyHeight:OverlayManager.DropTargetHeight},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dropTargetWidth",{get:function(){return Viewer.ViewerDesktopBaseSize},enumerable:!0,configurable:!0}),a.prototype.isAddMode=function(){return this.applicationState.isAddSectionMode()},a.prototype.handleSolutionOverlayClick=function(){this.isAddMode()&&this.applicationState.goToBuilder(!1)},a.prototype.handleSolutionOverlayMouseEnter=function(a){this.applicationState.isSteady()&&!this.isAddMode()&&(this.overlayManager.data.hoveredListSpan=this.overlayManager.isListSpanFocused(a)?null:a)},a.prototype.shouldShowDropStrip=function(){return!!this.overlayManager.dropTargetId&&this.isInDesktopEditMode},a.prototype.isBodySitePart=function(){return this.renderData.partType===this.sitePartTypes.BODY},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("solutionOverlay",{bindings:{renderData:"<"},templateUrl:"views/preview/solution-overlay.html",controller:SolutionOverlay,controllerAs:"$solutionOverlay"});var ListSpanOverlay=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=this;this.$scope=a,this.$timeout=b,this.previewScale=c,this.applicationState=d,this.consumerBiLoggerHelpers=e,this.storyServices=f,this.modelTree=g,this.assistantManager=h,this.overlayManager=i,this.overlaySegmentManager=j,this.consumerBiLogger=k,this.sectionManager=l,this.sitePartTypes=m,this.layoutSolver=n,this.sectionHeightService=o,this.slideShowService=p,this.listSpanUtils=q,this.contentElementFieldManager=r,this.flags=s,this.clearLgList=!1,this.canAddSection=!1,this.isHeaderContent=function(){var a=t.applicationState.getContentFocus();return a&&a.sitePart===t.sitePartTypes.HEADER},this.isFooterContent=function(){var a=t.applicationState.getContentFocus();return a&&a.sitePart===t.sitePartTypes.FOOTER},this.$scope.$watch(function(){return t.storyServices.story&&t.storyServices.story.selectedPage},function(){return t.refresh()}),this.$scope.$watch(function(){return t.listSpan},function(){return t.refresh()}),this.$scope.$watch(function(){return t.overlayManager.data.focusedListSpan},function(){return t.refresh()}),this.$scope.$watch(function(){return t.previewScale.getScale()},function(a){return t.refresh()})}return a.$inject=["$scope","$timeout","previewScale","applicationState","consumerBiLoggerHelpers","storyServices","modelTree","assistantManager","overlayManager","overlaySegmentManager","consumerBiLogger","sectionManager","sitePartTypes","layoutSolver","sectionHeightService","slideShowService","listSpanUtils","contentElementFieldManager","flags"],a.prototype.isMobileEditMode=function(){return this.applicationState.isInMobileEditMode()},a.prototype.showChangeSectionHeight=function(){return this.sectionHeightService.showChangeSectionHeight()},a.prototype.isFocused=function(){var a=this.applicationState.getContentFocus();return a&&a.nodeId===this.listSpan.node.getId()&&a.sitePart===this.listSpan.sitePart},a.prototype.areAddButtonsEnabled=function(){return!this.applicationState.isAddSectionMode()},a.prototype.onAdd=function(a){this.overlayManager.setAddTargetKnown(!0),this.consumerBiLogger.sectionManagement.addSectionClick("plus button"),this.sectionManager.addSection(this.listSpan.node,a)},a.prototype.blockMouse=function(){if(this.flags.enableChangeLayoutTourForTPAs){if(this.assistantManager.isInActiveTask()&&"changeLayoutTask"===this.assistantManager.getActiveTask().id)return this.isTpa()&&!this.hasPresets()}return this.isTpa()&&this.assistantManager.isInActiveTask()||this.flags.mobileEditor&&this.applicationState.isInMobileEditMode()&&this.contentElementFieldManager.isEveryHeaderFieldHidden(this.listSpan)},a.prototype.handleListSpanOverlayDblClick=function(){this.blockMouse()||this.applicationState.isEditMode()||this.isMobileTpa()||(this.consumerBiLoggerHelpers.setPanelSource("double-click on overlay"),this.goToEditMode())},a.prototype.isMobileTpa=function(){return this.isMobileEditMode()&&this.isTpa()},a.prototype.isGoToDesignPanel=function(){return(this.applicationState.isSwitchPresetMode()||this.applicationState.isInSectionBackgroundPanel()||this.applicationState.isInSectionAnimationPanel()||this.applicationState.isInSectionFontPanel())&&(this.isTpa()||this.isHeaderContent()||this.isFooterContent())||this.applicationState.isInSectionColorPanel()&&(this.isHeaderContent()||this.isFooterContent())},a.prototype.handleListSpanOverlayClick=function(){if(!this.blockMouse()){if(this.consumerBiLoggerHelpers.setPanelSource("click on overlay"),this.isFocused()&&!this.applicationState.isEditMode()&&!this.isMobileTpa())return void this.goToEditMode();if(this.applicationState.setContentFocus(this.listSpan.node.id,this.listSpan.sitePart),this.shouldReturnToBuilder())return void this.applicationState.goToBuilder();this.isGoToDesignPanel()?this.applicationState.goToSwitchPresetMode("overlay"):this.applicationState.goToSectionPanel("overlay")}},a.prototype.shouldReturnToBuilder=function(){var a=this.applicationState.isSwitchPresetMode()&&(this.isTpa()||this.isFooterContent()),b=this.applicationState.isEditMode()&&this.isTpa(),c=this.applicationState.isBuilderMode()&&this.isTpa();return this.isMobileEditMode()&&(a||b||c)},a.prototype.isTpa=function(){var a=this.getSingleSegment();return a&&a.node&&a.node.isTpaNode&&a.node.isTpaNode()},a.prototype.hasPresets=function(){return this.listSpanUtils.ceHasPresets(this.listSpan.node.contentElementType)},a.prototype.printPrettyAlgoInfo=function(){console.log(this.listSpan&&this.listSpan.prettyAlgo)},a.prototype.printSiteConverterDebugData=function(){
this.flags.debugWizSiteConverter&&(console.log("siteConverter:",this.listSpan.node.siteConverter),window.siteConverterSection=this.listSpan.node.siteConverter.wizSection,window.siteConverterNode=this.listSpan.node)},a.prototype.getPrettyAlgoScore=function(){return this.listSpan&&this.listSpan.prettyAlgo&&this.listSpan.prettyAlgo.score||"N/A"},a.prototype.prettyAlgoGetRuleNames=function(){return this.listSpan&&this.listSpan.prettyAlgo&&this.listSpan.prettyAlgo.rules?this.listSpan.prettyAlgo.rules.map(function(a){return a.name}):[]},a.prototype.printBgOpacityData=function(){console.log("opacityDebugData: "),_.each(this.listSpan.groups,function(a){_.each(a.opacityDebugData,function(a,b){console.log(b,":",a)})})},a.prototype.refresh=function(){void 0!==this.listSpan&&this.refreshIndications()},a.prototype.refreshIndications=function(){if(this.canAddSection=!1,this.storyServices.story){var a=this.modelTree.getPageNodeById(this.storyServices.story.selectedPage),b="Blog_Single_Post_Widget"!==a.tpaExtraPage&&_.some(a.children,{userHidden:!1});this.canAddSection=b&&!this.isMobileEditMode()&&this.areAddButtonsEnabled()&&!this.assistantManager.isInActiveTask()}},a.prototype.getSlideshowLG=function(){var a=this.listSpan.node,b=this.slideShowService.getSlideShowNodes(this.listSpan.node),c=b.headerNode,d=b.itemNode,e=b.footerNode,f=[this.getLgNode(c,a),this.getLgNode(d,a),this.getLgNode(e,a)];return _.filter(f,function(a){return a})},a.prototype.getLgNode=function(a,b){return a&&this.layoutSolver.getLgByNodeId("body",b.containerPageId,a.id)},a.prototype.goToEditMode=function(){var a=this.getSingleSegment();a?this.overlaySegmentManager.editSegment(a):this.applicationState.goToEditMode()},a.prototype.getSingleSegment=function(){return _.get(this,"listSpan.groups[0].segments[0]")},a.prototype.isShowSegmentOverlay=function(){return this.isFocused()&&!this.clearLgList&&!this.isMobileEditMode()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("listSpanOverlay",{templateUrl:"views/list-span-overlay.html",controller:ListSpanOverlay,bindings:{listSpan:"<"}});var SegmentOverlay=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var y=this;this.$scope=a,this.$element=b,this.modelTree=c,this.$translate=d,this.CONSUMER_DIALOGS=e,this.applicationState=f,this.overlaySegmentManager=g,this.consumerBiLoggerHelpers=h,this.consumerBiLogger=i,this.nodeTitleManager=j,this.mediaOverrideManager=k,this.contentElementFieldManager=l,this.applicationParameters=m,this.CcDialogBuilder=n,this.onstageActionsManager=o,this.consumerMenu=p,this.richTextService=q,this.slideShowService=r,this.$timeout=s,this.overlayColumnsPosition=t,this.mediaSectionUtils=u,this.overlayManager=v,this.flags=w,this.mediaTypeResolver=x,this.leArgList=[],this.tooltipOptions={trigger:"click",timer:7e3,interactive:!0},this.menuIsShown=!1,this.MENU_BI_TIMEOUT=500,this.listActionsMenu=[],this.isSegmentHighlight=function(){return y.overlaySegmentManager.lastHoveredArgs&&y.overlaySegmentManager.isActiveSegmentNodeId(y.segment.getSafeId(),y.segment.contentElement.isSpecialListItem())},this.isSectionActive=function(){return y.overlaySegmentManager.isSectionActive(y.segment)},this.onMouseEnterComponent=function(a){return y.overlaySegmentManager.lastHoveredArgs=y.getLayoutArgs(a.layout)},this.onMouseLeaveComponent=function(){return y.overlaySegmentManager.lastHoveredArgs=null},this.onClickComponent=function(a,b){return y.overlaySegmentManager.lastClickedArgs=y.getLayoutArgs(a.layout,b)},this.node=this.getNode(),this.isListItem=this.node.isListItem&&["ListFooter","ListHeader"].every(function(a){return a!==y.node.contentElementType}),this.listActionsMenu=this.onstageActionsManager.getActionsByType("LIST_ITEM").menu(),this.initComponents(),this.overlaySegmentManager.onSegmentOverlayCreate(this.node,this.$element),this.$scope.$watch(function(){return y.segment.renderTime},function(){return y.initComponents()}),this.$scope.$watch(function(){return y.segment.getLENoError()},function(){return y.initComponents()})}return a.$inject=["$scope","$element","modelTree","$translate","CONSUMER_DIALOGS","applicationState","overlaySegmentManager","consumerBiLoggerHelpers","consumerBiLogger","nodeTitleManager","mediaOverrideManager","contentElementFieldManager","applicationParameters","CcDialogBuilder","onstageActionsManager","consumerMenu","richTextService","slideShowService","$timeout","overlayColumnsPosition","mediaSectionUtils","overlayManager","flags","mediaTypeResolver"],a.prototype.$onDestroy=function(){this.overlaySegmentManager.onSegmentOverlayDestroy(this.node)},a.prototype.onMouseEnterSegment=function(){$(document.body).addClass(a.segmentHoveredClass)},a.prototype.onMouseLeaveSegment=function(){$(document.body).removeClass(a.segmentHoveredClass)},a.prototype.editSection=function(a){a.stopPropagation(),this.consumerBiLoggerHelpers.setPanelSource("click on overlay"),this.overlaySegmentManager.editSegment(this.segment)},a.prototype.getTitle=function(){if(this.isListItem){var a=this.components.find(function(a){return a.field.data.subType===core.ElementSubTypes.Title});if(!a)return"List Item";var b=a.field.data.value;return this.richTextService.isRichText(b)?_.extractPlainText(this.richTextService.unMarkRichText(b)):b}var c=this.nodeTitleManager.nodeTitle(this.node),d="general."+c,e=this.$translate.instant(d);return e===d?c:e},a.prototype.getLayoutTitle=function(a){if("shoppingCart"===a.layout.type)return"Store";if("media"===a.field.data.type)return"Logo"===a.field.key?"Logo":"Social.SocialButtons"===a.field.key?"Social":this.flags.sectionMedia?this.mediaTypeResolver.getTypeLabel(this.node):this.mediaOverrideManager.getCurrentSelectedMediaTypeLabel(this.node);var b=a.field?a.field.data.displayName:a.layout.displayName;return b||(this.flags.staticTextsWithTranslate?this.nodeTitleManager.labelBySubtype(a.field.data.subType,a.field.contentElement.type):this.nodeTitleManager.labelBySubtype(a.field.data.subType))},a.prototype.getTpaType=function(a){switch(a.layout.type){case"shoppingCart":return this.applicationParameters.tpaTypes.Stores.type;default:return""}},a.prototype.getTpaNode=function(a){return _.find(this.modelTree.getTpaNodes(),{contentElementType:this.getTpaType(a)})},a.prototype.initComponents=function(){var a=this,b=this.segment.getLENoError();if(b&&b.argList){this.layoutElement=b,this.leArgList=b.argList,this.components=this.calculateComponents(b);var c=_.filter(b.layoutArray,function(a){return"shoppingCart"===a.type});this.tpaComponents=c.map(function(c){return{layout:c,le:b,indications:a.indications}}),this.indications=this.overlayColumnsPosition.getIndications(this.segment,this.columns)}},a.prototype.doClickOnSegmentOverlay=function(a){this.isListItem&&this.runListClickAction(a,this.node)},a.prototype.getNode=function(){return"header"===this.segment.getSafeId()?this.modelTree.getGeneralInformation():this.segment.node},a.prototype.calculateComponents=function(a){var b=this;if(!a||!Array.isArray(a.layoutArray))return[];var c=this.contentElementFieldManager.getNodeFields(this.segment.contentElement,this.node,!1),d=this.contentElementFieldManager.getReferencedFields(this.segment.contentElement,this.node),e=c.concat(d);e.length>0&&(e[e.length-1].lastField=!0),a.calculateAbsoluteLocations();var f,g=_.filter(a.layoutArray,function(a){return a.argIndex>-1&&"label"!==a.subType});return this.flags.sectionMedia&&!this.hasMediaLayout(g)&&this.mediaSectionUtils.nodeHasBackground(this.node)&&(f=this.generateBGComponent(a,e)),(f?[f]:[]).concat(_.map(g,function(c){var d={type:a.argList[c.argIndex].type,subType:a.argList[c.argIndex].subType};return{layout:c,field:_.find(e,{data:d}),le:a,indications:b.indications}}))},a.prototype.hasMediaLayout=function(a){return a.some(function(a){return"media"===a.type})},a.prototype.generateFakeBGLayout=function(){var a=this.overlayManager.listSpanManager.calcLayoutGroupLayout(this.segment.containingLG).height,b=this.overlaySegmentManager.getLgData(this.segment),c=b.strip.paddingTop||0,d=this.flags.overlayModel?this.applicationParameters.desktopPageWidth:940;return{height:a,width:this.applicationState.previewFrameWidth,isFake:!0,absoluteLeft:-(this.applicationState.previewFrameWidth-d)/2,absoluteTop:-(c+this.segment.top)}},a.prototype.generateBGComponent=function(a,b){return{layout:this.generateFakeBGLayout(),field:_.find(b,{data:{type:"media",subType:"image"}}),le:a,indications:this.indications}},a.prototype.getLayoutArgs=function(a,b){return b&&this.doTooltip(b),{contentElementType:this.segment.contentElement.type,type:this.leArgList[a.argIndex].type,subType:this.leArgList[a.argIndex].subType}},a.prototype.doTooltip=function(a){var b=$(a.target);this.domHasTooltip(b)&&this.activateTooltip(b,a)},a.prototype.domHasTooltip=function(a){return a&&a.tooltipster()&&a.tooltipster().length>0},a.prototype.activateTooltip=function(a,b){var c=a.get(0).getBoundingClientRect(),d=(c.left+c.right)/2;a.tooltipster("option","offsetX",b.clientX-d),a.tooltipster("reposition")},a.prototype.getMenuTooltipOptions=function(){return this.tooltipOptions},a.prototype.getMenuTooltip=function(a){if("menu"===a.layout.type)return 1===this.consumerMenu.getVisiblePageNodes().length?"section_menu_clicked":"page_menu_clicked"},a.prototype.onPageTooltipLinkClick=function(){this.consumerBiLoggerHelpers.setPanelSource("menu tooltip"),this.applicationState.goToPageManager()},a.prototype.onSectionTooltipLinkClick=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.tooltip.sectionTooltip"),this.CONSUMER_DIALOGS.MENU_TOOLTIP_HELP)},a.prototype.runListClickAction=function(a,b){this.consumerBiLoggerHelpers.setPanelSource("click on list item"),this.runAction(a,this.onstageActionsManager.getActionsByType("LIST_ITEM").click,b)},a.prototype.runAction=function(a,b,c){a.stopPropagation(),this.consumerBiLogger.builder.onstageOsiQuickAction(BIOrigins.OSI,b.name,c.key,this.node.getId(),c.contentElement.type,this.node.alias),this.onstageActionsManager.executeAction(b,c)},a.prototype.isShowSlideShowOverlay=function(){return this.segment.node&&this.segment.node.id===this.slideShowService.getSelectedItem(this.node.identifyingNodeId)},a.prototype.stopPropagation=function(a){a.preventDefault(),a.stopPropagation()},a.prototype.onShowActionsMenu=function(){var a=this;this.menuIsShown=!0,this.$timeout(function(){a.menuIsShown&&a.consumerBiLogger.contentEditor.onstageQuickActionsTooltipShown(a.getTitle(),a.node.getId(),a.node.alias,"list-item")},this.MENU_BI_TIMEOUT)},a.prototype.onHideActionsMenu=function(){this.menuIsShown=!1},a}();SegmentOverlay.segmentHoveredClass="segment-hovered",SegmentOverlay.BorderWidth=1,SegmentOverlay.Padding=0,angular.module("siteGeneratorStaticsConsumerAppInternal").component("segmentOverlay",{templateUrl:"views/segment-overlay.html",controller:SegmentOverlay,bindings:{segment:"=",columns:"="}});var ComponentOverlay=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=this;this.consumerMenu=a,this.onstageActionsManager=b,this.overlaySegmentManager=c,this.mediaOverrideManager=d,this.nodeTitleManager=e,this.consumerBiLoggerHelpers=f,this.consumerBiLogger=g,this.applicationState=h,this.CcDialogBuilder=i,this.$translate=j,this.$timeout=k,this.pubSub=l,this.flags=m,this.CONSUMER_DIALOGS=n,this.mediaTypeResolver=o,this.menuIsShown=!1,this.MENU_BI_TIMEOUT=500,this._actionsMenu=[],this.clicksCount=0,this.isComponentHighlight=function(){return p.isLayoutArgsFitsLayout(p.overlaySegmentManager.lastHoveredArgs,p.component.layout)},this.populateActionsMenu(),this.setTitleByComponent(),this.unsubscribe=this.pubSub.subscribe(PubSub.events.MEDIA_TYPE_CHANGE,function(){p.setTitleByComponent(),p.populateActionsMenu()})}return a.$inject=["consumerMenu","onstageActionsManager","overlaySegmentManager","mediaOverrideManager","nodeTitleManager","consumerBiLoggerHelpers","consumerBiLogger","applicationState","CcDialogBuilder","$translate","$timeout","pubSub","flags","CONSUMER_DIALOGS","mediaTypeResolver"],a.prototype.$onDestroy=function(){this.unsubscribe&&this.unsubscribe(),this.palleteActionsMenu.forEach(function(a){return a.palette=null})},a.prototype.populateActionsMenu=function(){this._actionsMenu=this.onstageActionsManager.getMenuActions(this.component.field,this.node)},Object.defineProperty(a.prototype,"actionsMenu",{get:function(){return this._actionsMenu||this.populateActionsMenu(),this._actionsMenu},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"simpleActionsMenu",{get:function(){return this.actionsMenu.filter(function(a){return a.actionType===OnstageActionType.Single})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"palleteActionsMenu",{get:function(){return this.actionsMenu.filter(function(a){return a.actionType===OnstageActionType.ColorPicker})},enumerable:!0,configurable:!0}),a.prototype.getPallete=function(a,b){if(void 0===b&&(b=!1),a&&a.paletteGetter)return a.palette&&!b||(a.palette=a.paletteGetter(this.component)),a.palette},a.prototype.setColor=function(a,b){if(a){var c=this.getPallete(a).colorList[b];a.name=c,this.runAction(a),this.getPallete(a,!0)}},a.prototype.getMessage=function(a,b){if(this.getPallete(a).contrastProblem)return this.$translate.instant("overlay.messages.color-not-readable")},a.prototype.setTitleByComponent=function(){this.title=this.getLayoutTitle()},a.prototype.getLayoutTitle=function(){if("shoppingCart"===this.component.layout.type)return this.$translate.instant("general.Stores");if("map"===this.component.layout.type)return this.$translate.instant("general.map");if("media"===this.component.field.data.type)return"Logo"===this.component.field.key?this.$translate.instant("general.logo"):"Social.SocialButtons"===this.component.field.key?this.$translate.instant("general.social"):this.flags.sectionMedia?this.mediaTypeResolver.getTypeLabel(this.node):this.mediaOverrideManager.getCurrentSelectedMediaTypeLabel(this.node);var a=this.component.field?this.component.field.data.displayName:this.component.layout.displayName;return a||(this.flags.staticTextsWithTranslate?this.nodeTitleManager.labelBySubtype(this.component.field.data.subType,this.component.field.contentElement.type):this.nodeTitleManager.labelBySubtype(this.component.field.data.subType))},a.prototype.getMenuTooltipOptions=function(){return a.tooltipOptions},a.prototype.getMenuTooltip=function(){if("menu"===this.component.layout.type)return 1===this.consumerMenu.getVisiblePageNodes().length?"section_menu_clicked":"page_menu_clicked"},a.prototype.onPageTooltipLinkClick=function(){this.consumerBiLoggerHelpers.setPanelSource("menu tooltip"),this.applicationState.goToPageManager()},a.prototype.onSectionTooltipLinkClick=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.tooltip.sectionTooltip"),this.CONSUMER_DIALOGS.MENU_TOOLTIP_HELP)},a.prototype.doTooltip=function(a){var b=$(a.target);this.domHasTooltip(b)&&this.activateTooltip(b,a)},a.prototype.domHasTooltip=function(a){return a&&a.tooltipster()&&a.tooltipster().length>0},a.prototype.activateTooltip=function(a,b){var c=a.get(0).getBoundingClientRect(),d=(c.left+c.right)/2;a.tooltipster("option","offsetX",b.clientX-d),a.tooltipster("reposition")},a.prototype.isLayoutArgsFitsLayout=function(a,b){if(a&&this.overlaySegmentManager.isActiveSegmentNodeId(this.segment.getSafeId(),this.segment.contentElement.isSpecialListItem())){if(b){var c=this.leArgList[b.argIndex]||b.isFake&&{type:"media",subType:"image"};return a.contentElementType===this.segment.contentElement.type&&a.type===c.type&&a.subType===c.subType}return!!a}return!1},a.prototype.setPositionClass=function(){var a;return(this.isNotEnoughHeightInComponent()||this.isNotEnoughWidthInComponent())&&(a="ontop"),a&&this.isNotEnoughMarginFromFakeBrowserEdge()?"onbottom":a},a.prototype.isNotEnoughWidthInComponent=function(){var b=this.interactDom;return Array.prototype.reduce.call(b.children,function(a,b){return a+=b.clientWidth},0)+2*a.InnerOverlayPadding>this.component.style.width},a.prototype.isNotEnoughHeightInComponent=function(){return this.component.style.height<a.MinComponentHeight},a.prototype.isNotEnoughMarginFromFakeBrowserEdge=function(){var a=this.componentDom,b=this.overlayViewportDom;if(b){return a.getBoundingClientRect().top-b.getBoundingClientRect().top<24}},a.prototype.hasActionsMenu=function(){return this.actionsMenu&&!!this.actionsMenu.length},a.prototype.onShowActionsMenu=function(){var a=this;this.menuIsShown=!0,this.$timeout(function(){a.menuIsShown&&(a.onstageActionsManager.setSegment(a.segment),a.palleteActionsMenu.forEach(function(b){a.getPallete(b,!0)}),a.consumerBiLogger.contentEditor.onstageQuickActionsTooltipShown(a.component.field.key,a.node.getId(),a.node.alias,a.component.field.contentElement.type))},this.MENU_BI_TIMEOUT)},a.prototype.onHideActionsMenu=function(){this.menuIsShown=!1},a.prototype.runAction=function(a){var b=this;this.onstageActionsManager.executeAction(a,this.component.field),a.mightChangeMenu&&this.$timeout(function(){b._actionsMenu=null}),this.consumerBiLogger.builder.onstageOsiQuickAction(BIOrigins.OSI,a.name,this.component.field.key,this.node.getId(),this.component.field.contentElement.type,this.node.alias)},a.prototype.runDblClickAction=function(){var a=this.onstageActionsManager.getDblClickAction(this.component.field,this.node);this.consumerBiLogger.builder.onstageOsiQuickAction("Double click",a.name,this.component.field.key,this.node.getId(),this.component.field.contentElement.type,this.node.alias),this.onstageActionsManager.runDblClickAction(this.component.field,this.node)},a.prototype.runClickAction=function(a){this.doTooltip(a);var b=this.onstageActionsManager.getClickAction(this.component.field,this.node);this.consumerBiLogger.builder.onstageOsiQuickAction(BIOrigins.OSI,b.name,this.component.field.key,this.node.getId(),this.component.field.contentElement.type,this.node.alias),this.onstageActionsManager.runClickAction(this.component.field,this.node)},a.prototype.handleClicks=function(a){this.onstageActionsManager.hasDoubleClickAction(this.component.field,this.node)?this.doSingleOrDoubleClick(a):this.runClickAction(a)},a.prototype.generateOverlayId=function(){return this.node.getId()+"-"+this.component.layout.type},a.prototype.doSingleOrDoubleClick=function(b){var c=this;0===this.clicksCount?(this.clicksCount++,this.singleClickTimeout=this.$timeout(function(){c.runClickAction(b),c.clicksCount=0},a.timeMarginForDblClick)):(this.$timeout.cancel(this.singleClickTimeout),this.runDblClickAction(),this.clicksCount=0)},a}();ComponentOverlay.tooltipOptions={trigger:"click",timer:7e3,interactive:!0},ComponentOverlay.InnerOverlayPadding=6,ComponentOverlay.MinComponentHeight=60,ComponentOverlay.timeMarginForDblClick=300,angular.module("siteGeneratorStaticsConsumerAppInternal").component("componentOverlay",{templateUrl:"views/component-overlay.html",controller:ComponentOverlay,bindings:{component:"=",node:"=",segment:"=",leArgList:"=?"}});var ListSpanTools=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P){this.$element=a,this.$q=b,this.CONSUMER_DIALOGS=c,this.$translate=d,this.$scope=e,this.$stateParams=f,this.$timeout=g,this.autoSaveNotifier=h,this.CcDialogBuilder=i,this.modelTree=j,this.nodeManipulationService=k,this.notification=l,this.overlayManager=m,this.pagesManager=n,this.previewService=o,this.previewScale=p,this.sectionManager=q,this.mediaOverride=r,this.simpleSolutionManager=s,this.designKit=t,this.sitePartTypes=u,this.storyServices=v,this.undoRedo=w,this.applicationState=x,this.themeChooser=y,this.layoutSelectionStoreProvider=z,this.consumerBiLogger=A,this.tpaService=B,this.tpaUrlBuilder=C,this.spinnerService=D,this.flags=E,this.layoutSolver=F,this.consumerBiLoggerHelpers=G,this.errorReportService=H,this.selections=I,this.$state=J,this.assistantManager=K,this.listSpanUtils=L,this.partialSectionManager=M,this.contentElementFieldManager=N,this.sectionHeightService=O,this.pageAlignmentService=P,this.showMoreActions=!1,this.canAddSection=!1,this.presetPreview=null,this.shouldSuggestLayoutChange=!1,this.layoutChangeTooltipOptions={},this.scale=1,this.MarginMenuTopBottom=38,this.MarginFromEdgesOfBrowser=6,this.MenuButtonHeight=36,this.showPageAlignmentButton()&&(this.alignmentValue=this.pageAlignmentService.shouldIgnore(this.contentDesignatedListSpan.groups))}return a.$inject=["$element","$q","CONSUMER_DIALOGS","$translate","$scope","$stateParams","$timeout","autoSaveNotifier","CcDialogBuilder","modelTree","nodeManipulationService","notification","overlayManager","pagesManager","previewService","previewScale","sectionManager","mediaOverride","simpleSolutionManager","designKit","sitePartTypes","storyServices","undoRedo","applicationState","themeChooser","layoutSelectionStoreProvider","consumerBiLogger","tpaService","tpaUrlBuilder","spinnerService","flags","layoutSolver","consumerBiLoggerHelpers","errorReportService","selections","$state","assistantManager","listSpanUtils","partialSectionManager","contentElementFieldManager","sectionHeightService","pageAlignmentService"],a.prototype.$postLink=function(){var a=this;this.setScale(this.previewScale.getScale(),!1),this.initColorationItems(),this.$scope.$watch(function(){return a.previewScale.getScale()},function(b,c){b!==c&&(a.setScale(b),a.updatePosition())}),(this.flags.suggestLayoutChange||this.flags.reportLayoutErrors)&&this.$scope.$watch(function(){return a.errorReportService.hasError(a.storyServices.story.selectedPage,a.contentDesignatedListSpan.node.id,"changeLayout")},function(b){a.shouldSuggestLayoutChange=b,a.shouldSuggestLayoutChange&&a.suggestLayoutChange()}),this.$scope.$watch(function(){return a.contentDesignatedListSpan&&a.contentDesignatedListSpan.listNodeId},function(b,c){b!==c&&a.update()}),this.$scope.$on(ViewerScrollController.PreviewScrollEvent,function(){a.updateButtonsStripPosition()}),this.$scope.$watch(function(){if(a.contentDesignatedListSpan){var b=a.overlayManager.listSpanManager.getListSpanAbsoluteLayout(a.contentDesignatedListSpan);return b.top+"-"+b.height}},function(){return a.update()})},a.prototype.update=function(){this.updateViewState(),this.updatePosition()},a.prototype.updateViewState=function(){this.isManage=this.canManage(),this.isDesigns=this.shouldShowSwitchBtn(),this.isEdit=this.shouldShowEditBtn()},a.prototype.updateLssProperty=function(a,b){var c=this.layoutSelectionStoreProvider.getLayoutSelectionStore();_.set(c.siteOverrides,a,b)},a.prototype.headerColorationItemClicked=function(a){this.updateLssProperty("headerBackground",a),this.themeChooser.updateHeaderBg(),this.undoRedo.captureOperation(!1,!0)},a.prototype.isListItem=function(){return this.contentDesignatedListSpan.isList},a.prototype.footerColorationItemClicked=function(a){this.updateLssProperty("footerBackground",a),this.themeChooser.updateFooterBg(),this.undoRedo.captureOperation(!1,!0)},a.prototype.initColorationItems=function(){this.colorationItems={},this.colorationItems.header={},this.colorationItems.header.lightItems=this.getLightColorationItems(),this.colorationItems.header.darkItems=this.getDarkColorationItems(),this.colorationItems.footer={},this.colorationItems.footer.lightItems=this.getLightColorationItems(),this.colorationItems.footer.darkItems=this.getDarkColorationItems()},a.prototype.getLightColorationItems=function(){return[{text:"L1",value:"L1"},{text:"L2",value:"L2"},{text:"L3",value:"L3"}]},a.prototype.getDarkColorationItems=function(){return[{text:"D1",value:"D1"},{text:"D2",value:"D2"},{text:"D3",value:"D3"}]},a.prototype.suggestLayoutChange=function(){var b=this,c=this.$element.find(a.ChangeLayoutButtonSelector);this.shouldSuggestLayoutChange&&(this.layoutChangeTooltipOptions.trigger="",this.$timeout(function(){if(c.addClass("-active"),c.tooltipster("show"),b.flags.debug){var a=b.errorReportService.getError(b.storyServices.story.selectedPage,b.contentDesignatedListSpan.node.id,"changeLayout");a&&a.length>0&&console.log("changeLayout error was reported with messages:\n",a.join(",\n"))}b.$timeout(function(){c.removeClass("-active"),c.tooltipster("hide"),delete b.layoutChangeTooltipOptions.trigger,b.errorReportService.clearError(b.storyServices.story.selectedPage,b.contentDesignatedListSpan.node.id,"changeLayout")},7e3)}))},a.prototype.getSwitchButtonTooltip=function(){return(this.flags.suggestLayoutChange||this.flags.reportLayoutErrors)&&this.shouldSuggestLayoutChange?"suggest_layout_change":"overlay_change_preset"},a.prototype.getLayoutChangeTooltipOptions=function(){return this.layoutChangeTooltipOptions},a.prototype.shouldShowButtons=function(){return(this.stateIsHover()||!this.overlayManager.data.hoveredListSpan)&&!this.assistantManager.getCustomTaskData("hideListSpanButtons")},a.prototype.isContentFocused=function(){var a=this.applicationState.getContentFocus(),b={nodeId:this.contentDesignatedListSpan.node.getId(),sitePart:this.contentDesignatedListSpan.sitePart};return _.isEqual(b,a)},a.prototype.isHeader=function(){return this.contentDesignatedListSpan.sitePart===this.sitePartTypes.HEADER},a.prototype.isOnBody=function(){return this.contentDesignatedListSpan.sitePart===this.sitePartTypes.BODY},a.prototype.isMobileEditMode=function(){return this.applicationState.isInMobileEditMode()},a.prototype.isFooter=function(){return"footer"===this.contentDesignatedListSpan.node.containerPageId},a.prototype.canManipulate=function(){return!this.contentDesignatedListSpan.node.isTpaMultiSection()&&!this.contentDesignatedListSpan.node.isTpa},a.prototype.canDuplicate=function(){return this.canManipulate()&&"Contact"!==this.contentDesignatedListSpan.node.getContentElementType()},a.prototype.setScale=function(b,c){void 0===c&&(c=!0),this.scale=b;var d=this.applicationState.isInMobileEditMode()?Viewer.ViewerMobileBaseSize:Viewer.ViewerDesktopBaseSize,e=d*b;$(a.MiddleSectionSelector).css("flex-basis",e+"px")},a.prototype.onDelete=function(){var a=this.contentDesignatedListSpan.node;this.sectionManager.showDeleteSectionPopup(a,"more-actions")},a.prototype.canMove=function(a){if(!this.nodeManipulationService||!this.contentDesignatedListSpan)return!1;var b=this.contentDesignatedListSpan.node.containerPageId;return this.nodeManipulationService.canMove(this.contentDesignatedListSpan.node.id,b,a)},a.prototype.duplicateSection=function(){var a=this.contentDesignatedListSpan.node;this.consumerBiLogger.sectionManagement.sectionMenuDuplicateSectionClick(a.getContentElementType(),a.alias,this.tpaService.getAppId(a)),this.applicationState.clearContentFocus(),this.sectionManager.duplicateSection(this.contentDesignatedListSpan.node)},a.prototype.canMoveAwayFlow=function(){if(!this.pageList){this.pageList=_(this.modelTree.getValidPagesForNode(this.contentDesignatedListSpan.node)).collect(function(a){return{name:a.getDisplayName(),value:a.getId()}}).value();var b={name:this.$translate.instant("general.new-page"),value:a.BlankPageId};this.pageList.unshift(b)}return _.keys(this.pageList).length>0},a.prototype.moveAwayFlow=function(){var a=this,b=this.contentDesignatedListSpan.node;this.consumerBiLogger.sectionManagement.sectionMenuMoveSectionToAnotherPageClick(b.getId(),b.getContentElementType(),b.alias,this.tpaService.getAppId(b)),this.CcDialogBuilder.showPositiveContinuedAction({heading:this.$translate.instant("popups.movesection.heading"),text:this.$translate.instant("popups.movesection.text"),acceptButtonText:this.$translate.instant("general.move"),rejectButtonText:this.$translate.instant("general.cancel"),dropDownItems:this.pageList,dropDown:this.pageList[0],biDialogName:this.CONSUMER_DIALOGS.MOVE_SECTION,onHelp:function(){a.CcDialogBuilder.showSupportIframe(a.$translate.instant("help.popup.moveSection"),a.CONSUMER_DIALOGS.MOVE_SECTION_HELP)}}).then(function(b){return a.createOrGetPage(b.selected.value)}).then(function(b){return a.sectionManager.moveSectionToAnotherPage(a.contentDesignatedListSpan.node,b)}).then(function(c){var d=a.sectionManager.geSectionPositionInPage(b),e=a.storyServices.story.selectedPage,f=a.sectionManager.geSectionPositionInPage(b),g=a.tpaService.getAppId(b);if(a.consumerBiLogger.sectionManagement.sectionMovedToANewPageSuccess(b.getId(),b.getContentElementType(),b.alias,e,d,f,g),null!==c)return a.applicationState.setContentFocus(b.getId(),a.sitePartTypes.BODY,!0),a.notifySectionMoved()})},a.prototype.notifySectionMoved=function(){var a=this;return this.notification.show("toasters.section-moved","general.undo",function(){a.undoRedo.undo()})},a.prototype.stateIsHover=function(){return"hover"===this.state},a.prototype.setChangeHeightState=function(a){void 0===a&&(a=!1),this.overlayManager.listSpanManager.setChangeSectionHeightState(a)},a.prototype.shouldShowDragHandle=function(){return this.isOnBody()&&this.overlayManager.listSpanManager.getAllInBody().length>1&&this.showAllButtons()&&!this.stateIsHover()},a.prototype.isDragEnabled=function(){var a="saving"===this.autoSaveNotifier.savingState;return!this.contentDesignatedListSpan.node.isTpaNode()&&!a},a.prototype.toggleShowMoreActions=function(){this.showMoreActions||this.logBI_ClickOnMoreActionsMenu(),this.showMoreActions=!this.showMoreActions,this.showMoreActions||this.mamMouseLeave()},a.prototype.mamMouseEnter=function(){this.showMoreActions&&this.$element.addClass(a.IN_MORE_MENU_CLASS)},a.prototype.mamMouseLeave=function(){this.$element.removeClass(a.IN_MORE_MENU_CLASS)},a.prototype.logBI_ClickOnMoreActionsMenu=function(){var a=this.contentDesignatedListSpan.node,b=a.alias,c=a.getContentElementType();this.consumerBiLogger.sectionManagement.clickOnMoreActionsMenu(b,c)},a.prototype.showActions=function(){return this.isOnBody()&&!this.showMoreActions&&this.canManipulate()&&this.showAllButtons()},a.prototype.showAllButtons=function(){return!this.applicationState.isInCropperMode()},a.prototype.dragHandleClick=function(){this.applicationState.setContentFocus(this.contentDesignatedListSpan.node.id,this.contentDesignatedListSpan.sitePart)},a.prototype.createOrGetPage=function(a){return"_blank"===a?this.pagesManager.addPage(this.$translate.instant("general.blank")):this.$q.when(this.modelTree.getPageNodeById(a))},a.prototype.getSwitchButtonText=function(){return"general.designs"},a.prototype.shouldAddNoSwitchClass=function(){return!this.isDesigns&&!this.isManage},a.prototype.shouldShowSwitchBtn=function(){return!(this.applicationState.isInCropperMode()||(this.isTpa()||"footer"===this.contentDesignatedListSpan.sitePart)&&this.isMobileEditMode())&&this.listSpanUtils.ceHasPresets(this.contentDesignatedListSpan.node.contentElementType)},a.prototype.shouldShowEditBtn=function(){return!(this.applicationState.isInCropperMode()||this.applicationState.isInMobileEditMode()&&(this.isTpa()||this.isEveryHeaderFieldHidden()))&&(!this.isTpa()||this.tpaService.getEditWidgetUrl(this.contentDesignatedListSpan.node))},a.prototype.isEveryHeaderFieldHidden=function(){return this.contentElementFieldManager.isEveryHeaderFieldHidden(this.contentDesignatedListSpan)},a.prototype.isDifferentContentFocus=function(){var a=this.applicationState.getContentFocus();return!a||a.nodeId!==this.contentDesignatedListSpan.node.id||a.sitePart!==this.contentDesignatedListSpan.sitePart},a.prototype.onToggleEditMode=function(){var a=this.isDifferentContentFocus();if(this.applicationState.setContentFocus(this.contentDesignatedListSpan.node.id,this.contentDesignatedListSpan.sitePart),this.consumerBiLoggerHelpers.setPanelSource(BIOrigins.ClickEditButton),this.isTpa()){var b=this.tpaService.getAppId(this.contentDesignatedListSpan.node),c=this.tpaService.getInstanceId(this.contentDesignatedListSpan.node);this.consumerBiLogger.provisioning.tpaIntent(c,b,"GFPP_SETTINGS","ADI"),this.consumerBiLogger.apps.clickOnEditAppTpaSettings(BIOrigins.ClickEditButton,b,this.tpaService.getNaiveType(this.contentDesignatedListSpan.node.getContentElementType()),c)}a||!this.applicationState.isInEditMode()?this.applicationState.goToEditMode():this.applicationState.goToBuilder(!0)},a.prototype.onTogglePresetState=function(){
var a=this.isDifferentContentFocus();this.applicationState.setContentFocus(this.contentDesignatedListSpan.node.id,this.contentDesignatedListSpan.sitePart),a||!this.applicationState.isSwitchPresetMode()?this.applicationState.goToSwitchPresetMode("section"):this.applicationState.goToBuilder()},a.prototype.canManage=function(){if(this.isTpa()){return!!this.tpaUrlBuilder.getManagementUrl(this.getTpaType(),this.contentDesignatedListSpan.node)}return!1},a.prototype.getTpaType=function(){var a="";return this.contentDesignatedListSpan.node.contentElement&&this.isTpa()&&(a=this.contentDesignatedListSpan.node.contentElement.type,a=this.tpaService.getNaiveType(a)),a},a.prototype.getTpaTooltip=function(){return"tpa_"+this.getTpaType().toLowerCase()+"_settings"},a.prototype.getEditButtonTooltip=function(){return this.isTpa()?"overlay_settings":"overlay_edit"},a.prototype.showChangeSectionHeight=function(){return this.sectionHeightService.showChangeSectionHeight()},a.prototype.isChangeHeightDisabled=function(a){return!1},a.prototype.showMoveColumnButton=function(){var a=this.contentDesignatedListSpan.node,b=_.first(this.contentDesignatedListSpan.groups);return this.flags.internalColumnBackground&&a&&!a.isList()&&!a.isTpaNode()&&b&&this.partialSectionManager.isPartial(b)},a.prototype.moveColumn=function(){this.partialSectionManager.switchColumnPosition(this.contentDesignatedListSpan.node)},a.prototype.changeSectionHeight=function(a,b){var c=this;if(this.flags.changeSectionHeight){this.spinnerService.waitForMe("changeSectionHeight");var d=this.selections.getForNode(this.contentDesignatedListSpan.node);d.additionalHeight=(d.additionalHeight||0)+2*b,this.storyServices.recalculateCurrentPage(!0).then(function(){c.spinnerService.imDone("changeSectionHeight")})}else if(1===this.contentDesignatedListSpan.groups.length){var e=_.first(this.contentDesignatedListSpan.groups);e.changeLgHeight(a,3).then(function(){return c.storyServices.debounceLayoutSolutionChanged()})}else _.sequencePromises(this.contentDesignatedListSpan.groups,function(b){return"ListFooter"===b.segments[0].contentElement.type||"ListHeader"===b.segments[0].contentElement.type?c.$q.when():b.changeLgHeight(a,3).then(function(){return c.storyServices.debounceLayoutSolutionChanged()})}).then(function(){return c.storyServices.debounceLayoutSolutionChanged()})},a.prototype.showPrintAdditionalHeightButton=function(){return this.flags.debug},a.prototype.showPageAlignmentButton=function(){return this.flags.debug&&this.flags.corePageAlignment&&this.contentDesignatedListSpan.sitePart===this.sitePartTypes.BODY},a.prototype.togglePageAlignment=function(a){a?this.pageAlignmentService.addToIgnoreList(this.contentDesignatedListSpan.groups):this.pageAlignmentService.removeFromIgnoreList(this.contentDesignatedListSpan.groups),this.layoutSolver.onNodeChanged()},a.prototype.printAdditionalHeight=function(){if(_.each(this.contentDesignatedListSpan.groups,function(a){console.log("Additional Height for",a.contentType,":",a.segments[0].containingLG.getAdditionalHeight())}),this.flags.changeSectionHeight){var a=this.selections.getForNode(this.contentDesignatedListSpan.node);console.log("User Additional Height for section:",a.additionalHeight||0)}},a.prototype.getLayoutMedia=function(){var a=_.first(this.contentDesignatedListSpan.groups),b=_.first(a.segments),c=b.getLE();return{layout:c.getMediaLayout(),segment:b,LE:c}},a.prototype.isTpa=function(){return this.contentDesignatedListSpan.node&&this.contentDesignatedListSpan.node.isTpaNode()},a.prototype.updateButtonsStripPosition=function(b){if(void 0===b&&(b=this.contentDesignatedListSpan),b){var c,d=this.overlayManager.listSpanManager.getListSpanAbsoluteLayout(b).scale(this.scale),e=0;[!!this.isManage,!!this.isDesigns,!!this.isEdit].forEach(function(a){return a&&e++});var f=this.MenuButtonHeight*e;c=this.newCalculateButtonStripRelativeTop(d,f,b.sitePart);this.$element.find(a.ButtonsStripSelector).css({top:c-d.top})}},a.prototype.newCalculateButtonStripRelativeTop=function(a,b,c){var d,e=this.MarginFromEdgesOfBrowser,f=b/2+this.MarginMenuTopBottom,g=this.previewService.getOverlayContainer().scrollTop,h=a.height>b+e,i=a.height>b+2*this.MarginMenuTopBottom;switch(c){case this.sitePartTypes.HEADER:d=h?this.middleOfSection(a):b/2+e;break;case this.sitePartTypes.FOOTER:d=h?this.middleOfSection(a):a.top+(a.height-(e+b/2));break;default:d=i?this.marginFromTopOfSectionOrBrowser(a,g,f):this.middleOfSection(a)}return d},a.prototype.marginFromTopOfSectionOrBrowser=function(a,b,c){var d=a.top+a.height,e=b>a.top?b:a.top;return Math.min(e+c,d-c)},a.prototype.middleOfSection=function(a){return a.top+a.height/2},a.prototype.scrollPreviewToListSpan=function(a,b,c){void 0===b&&(b=null),void 0===c&&(c=!1);var d=this.overlayManager.listSpanManager.getListSpanAbsoluteLayout(a).scale(this.scale);if(this.shouldScroll(a,d)){var e=this.calculateScrollPosition(d),f=this.overlayManager.listSpanManager.getNodeTopRelativeToListSpan(b,a);this.previewService.getOverlayContainer().scrollTop=e+f}},a.prototype.shouldScroll=function(a,b){return!(b.top<0)&&!this.overlayManager.isListSpanHovered(a)},a.prototype.calculateScrollPosition=function(a){var b=a.top,c=this.previewService.getOverlay().clientHeight;if(a.height<c){var d=(c-a.height)/2;return Math.max(b-d,0)}return b-36},a.prototype.updatePosition=function(a){void 0===a&&(a=this.contentDesignatedListSpan),a&&(this.updateButtonsStripPosition(a),a&&!this.stateIsHover()&&this.scrollPreviewToListSpan(a,this.$stateParams.childId),this.pageList=null,this.scaleLayout(a))},a.prototype.scaleLayout=function(a){var b=this.overlayManager.listSpanManager.getListSpanAbsoluteLayout(a).scale(this.scale);this.$element.css({top:b.top,height:b.height})},a.prototype.showMapStyles=function(){var a=this.contentDesignatedListSpan.node;return this.flags.internalMapStyling&&"Contact"===a.contentElementType},a.prototype.changeMapStyle=function(){var a=this;if(this.showMapStyles()){var b=this.getLayoutMedia().segment,c=b.getLayoutSelectionStore(),d=c.getOverride("extra",b,"map")||{},e=[{name:"Regular",value:"r"},{name:"Stunning blue",value:"sb"},{name:"Surprising green",value:"sg"},{name:"Pinky swear pink",value:"psp"},{name:"Satellite",value:"slt"}];this.CcDialogBuilder.showPositiveContinuedAction({heading:"Map style",text:"Change map style to",acceptButtonText:"ok",rejectButtonText:"cancel",dropDownItems:e,dropDown:e[0],biDialogName:this.CONSUMER_DIALOGS.DEBUG_MAP_STYLE,onHelp:function(){a.CcDialogBuilder.showSupportIframe("Change the style of the map","map-style-help")}}).then(function(e){console.log("MAP STYLE: "+e.selected.value),d.stylingIndex=e.selected.value,c.setOverride("extra",b,"map",d),a.storyServices.reRender()})}},a.prototype.isHeaderColumnsEnabled=function(){return(this.contentDesignatedListSpan.groups[0].getColumnsData()||{}).enable},a.prototype.isHeaderColumnsFullWidthEnabled=function(){var a=this.contentDesignatedListSpan.groups[0],b=a.getColumnsData()||{};return b.enable&&b.fullWidth},a.prototype.headerUseColumnsClicked=function(){if(this.flags.headerColumns&&this.flags.debugHeaderColumns){var a=this.contentDesignatedListSpan.groups[0],b=a.getColumnsData()||{};b.enable=!b.enable,b.enable&&(b.margin=60),a.setColumnsData(b),this.storyServices.recalculateCurrentPage(!0)}},a.prototype.headerColumnsFullWidthClicked=function(){if(this.flags.headerColumns&&this.flags.debugHeaderColumns){var a=this.contentDesignatedListSpan.groups[0],b=a.getColumnsData()||{};b.enable||(b.enable=!0),b.margin=60,b.fullWidth=!b.fullWidth,a.setColumnsData(b),this.storyServices.recalculateCurrentPage(!0)}},a}();ListSpanTools.ButtonStripMargin=80,ListSpanTools.BlankPageId="_blank",ListSpanTools.ButtonsStripSelector='[data-hook="buttons-strip"]',ListSpanTools.ChangeLayoutButtonSelector='[data-hook="change-layout-button"]',ListSpanTools.MiddleSectionSelector=".overlay-tools-center",ListSpanTools.IN_MORE_MENU_CLASS="in-more",angular.module("siteGeneratorEditorInternal").component("listSpanTools",{templateUrl:"views/builder/list-span-tools.html",controller:ListSpanTools,bindings:{contentDesignatedListSpan:"=",state:"@?"}});var SectionHeightService=function(){function a(a,b){var c=this;this.flags=a,this.overlayManager=b,this.namespace="changeSectionHeight",this.handleNoneChangeHeightClicked=function(a){a.target&&c.stateIsChangeHeight&&!a.target.closest(".change-height-toolbar")&&c.setChangeSectionHeightState(!1)}}return a.$inject=["flags","overlayManager"],a.prototype.stateIsChangeHeight=function(){return this.overlayManager.listSpanManager.isChangeSectionHeightState},a.prototype.showChangeSectionHeight=function(){return this.flags.changeSectionHeight&&this.stateIsChangeHeight()},a.prototype.setChangeSectionHeightState=function(a){this.overlayManager.listSpanManager.setChangeSectionHeightState(a)},a.prototype.closeWhenClickOutside=function(){$(document.body).on("click."+this.namespace,this.handleNoneChangeHeightClicked)},a.prototype.disableCloseWhenClickOutside=function(){$(document.body).off("click."+this.namespace)},a}(),SectionHeight=function(){function a(a,b,c,d,e,f,g,h){var i=this;this.flags=a,this.$q=b,this.$timeout=c,this.applicationState=d,this.storyServices=e,this.cabbie=f,this.sectionHeightService=g,this.$translate=h,this.totalPlusClicked=0,this.totalMinusClicked=0,this.keyDownHandler=_.debounce(function(a){if(i.totalPlusClicked=0,i.totalMinusClicked=0,i.changeSectionHeight&&0!==a){var b=a>0;i.changeSectionHeight({toBigger:b,totalClicks:a})}},500)}return a.$inject=["flags","$q","$timeout","applicationState","storyServices","cabbie","sectionHeightService","$translate"],a.prototype.$postLink=function(){this.showMessageInDesktopSectionHeight()},a.prototype.$onDestroy=function(){this.sectionHeightService.disableCloseWhenClickOutside()},a.prototype.isChangeSectionHeightDisabled=function(a){this.isChangeHeightDisabled&&this.isChangeHeightDisabled({buttonName:a})},a.prototype.resizeSectionHeight=function(a){a?this.totalPlusClicked++:this.totalMinusClicked++;var b=this.totalPlusClicked-this.totalMinusClicked;console.log(b),this.keyDownHandler(b)},a.prototype.setChangeSectionHeightState=function(){this.setChangeHeightState&&this.setChangeHeightState()},a.prototype.showMessageInDesktopSectionHeight=function(){var a="first-time-in-desktop-section-height";this.flags.changeSectionHeight&&this.applicationState.isSwitchPresetMode()&&!this.storyServices.story.popupConfigurations[a]&&(this.showTooltip("change-height-toolbar","tip_content.section_height"),this.storyServices.story.popupConfigurations[a]=!0,$(".intro-tooltip").addClass("content-panel-tooltip-top"))},a.prototype.showTooltip=function(a,b){var c=this;this.$timeout(function(){c.cabbie.show({target:".vertical-menu.more-actions-panel",text:c.$translate.instant(b),position:{positionX:builders.AssistantPositionX.Center,positionY:builders.AssistantPositionY.Top},tourStepClass:"section-height-style"})},0)},a}();angular.module("siteGeneratorEditorInternal").component("sectionHeight",{templateUrl:"views/builder/section-height.html",controller:SectionHeight,bindings:{setChangeHeightState:"&",isChangeHeightDisabled:"&",changeSectionHeight:"&"}}).service("sectionHeightService",SectionHeightService);var DropTargetOverlay=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this;this.$scope=a,this.$element=b,this.$translate=c,this.applicationState=d,this.previewScale=e,this.previewService=f,this.overlayManager=g,this.sectionDrag=h,this.sectionManager=i,this.spinnerService=j,this.sitePartTypes=k,this.consumerBiLogger=l,this.consumerBiLoggerHelpers=m,this.flags=n,this.TranslateKeys={DEFAULT_TEXT:"builder.drop-target-hint",DRAG_OVER:"builder.drop-target-drag-over"},this.$scope.$watch(function(){return o.overlayManager.dropTargetData.dropTargetPosition},function(){return o.updatePosition()}),this.setDropTargetText(this.TranslateKeys.DEFAULT_TEXT),this.setDragListeners()}return a.$inject=["$scope","$element","$translate","applicationState","previewScale","previewService","overlayManager","sectionDrag","sectionManager","spinnerService","sitePartTypes","consumerBiLogger","consumerBiLoggerHelpers","flags"],a.prototype.setDropTargetText=function(a){this.dragText=this.$translate.instant(a)},a.prototype.setDragListeners=function(){var a=this;this.$element.on("dragleave",function(){return a.setDropTargetText(a.TranslateKeys.DEFAULT_TEXT)}),this.$element.on("dragenter",function(){return a.setDropTargetText(a.TranslateKeys.DRAG_OVER)})},a.prototype.updatePosition=function(){this.$element.css("top",this.overlayManager.dropTargetData.dropTargetPosition)},a}();DropTargetOverlay.SpinnerKey="addsection",angular.module("siteGeneratorStaticsConsumerAppInternal").component("dropTargetOverlay",{templateUrl:"views/preview/drop-target-overlay.html",controller:DropTargetOverlay,bindings:{sitePart:"="}});var EmptyPage=function(){function a(a,b,c,d){this.sectionManager=a,this.overlayManager=b,this.applicationState=c,this.flags=d}return a.$inject=["sectionManager","overlayManager","applicationState","flags"],a.prototype.isOnAddState=function(){return this.applicationState.isOnAddState()},a.prototype.onDrop=function(){var a=this,b=this.overlayManager.data.draggedPresetPreview;this.sectionManager.handlePreviewSelected(b,!1).then(function(){return a.applicationState.goToBuilder()})},a.prototype.onAdd=function(){this.overlayManager.setDropTarget(DropTargetCalculator.FirstDropTargetId),this.applicationState.goToAddSectionMode()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("emptyPage",{templateUrl:"views/preview/empty-page.html",controller:EmptyPage}),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("overlayLoad",["viewerScrollController",function(a){function b(){return a.getScrollbarWidth()}return{restrict:"A",require:"^preview",link:function(c,d,e,f){var g=d.find(Overlay.ViewportSelector);f.overlayLoaded(g[0]),a.init(g),d.find('[data-hook="site-overlay"]').css("padding-left",b())}}}]),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("overlayHighlightStyle",["flags","animationChanges","overlayManager","previewScale",function(a,b,c,d){function e(a){switch(a){case"hover":return c.data.hoveredListSpan;case"active":return c.data.focusedListSpan;default:return null}}function f(a,e,f){void 0===f&&(f=d.getScale());var g;if(f&&e){var h=c.listSpanManager.getListSpanAbsoluteLayout(e).scale(f);g={top:h.top,height:h.height}}else g={height:0,top:0};b.add(function(){return a.css(g)})}return{restrict:"A",link:function(a,b,g){a.$watch(function(){var a=e(g.overlayHighlightStyle);if(a){var b=c.listSpanManager.getListSpanAbsoluteLayout(a);return b.top+"-"+b.height}},function(){return f(b,e(g.overlayHighlightStyle))}),a.$watch(function(){return d.getScale()},function(a,c){return f(b,e(g.overlayHighlightStyle),a)}),a.$watch(function(){return e(g.overlayHighlightStyle)},function(a){return f(b,a)})}}}]),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("listSpanOverlayPosition",["$parse","flags","animationChanges","overlayManager","previewScale","sitePartTypes","overlayPosition","overlayModel",function(a,b,c,d,e,f,g,h){return{restrict:"A",link:function(f,i,j){var k=function(){return a(j.listSpanOverlayPosition)(f)};if(b.overlayModel){var l=function(a){void 0===a&&(a=k());var b=a&&a.groups[0];return b&&g.getOverlay(a.sitePart,b.page)},m=g.getCache(i),n=function(){var a=k(),b=l(a),c=b&&h.listSpanNode(b,a.groups),d=c?c.layout:void 0;m(e.getScale(),d)};f.$watch(function(){return l()},n),f.$watch(function(){return e.getScale()},function(a){return m(a)})}else{var o=_.debounce(function(a,b){var e=d.listSpanManager.getListSpanLayout(a).scale(b);c.add(function(){return i.css({top:e.top,height:e.height})})});f.$watch(j.listSpanOverlayPosition,function(a){return o(a,e.getScale())}),f.$watch(function(){return e.getScale()},function(a){return o(k(),a)})}}}}]),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("layoutGroupOverlayPosition",["$parse","flags","animationChanges","overlayManager","sitePartTypes","overlayPosition","overlayModel","previewScale",function(a,b,c,d,e,f,g,h){return{restrict:"A",link:function(e,i,j){var k=function(){return a(j.layoutGroupOverlayPosition)(e)};if(b.overlayModel){var l=function(a){void 0===a&&(a=k());var b=a&&a.containingPage();if(b)return a&&f.getOverlay(b.sitePart,b.page)},m=f.getCache(i),n=function(){var a=k(),b=l(a),c=b&&g.lgNode(b,a),d=c?c.layout:void 0;m(h.getScale(),d)};i.css({position:"absolute",left:"50%",transform:"translateX(-50%)"}),e.$watch(function(){return l()},n),e.$watch(function(){return h.getScale()},function(a){return m(a)})}else{var o=function(){var a=k();return d.listSpanManager.calcLayoutGroupLayout(a,e.$index).height},p=_.debounce(function(a,b){var d=k();c.add(function(){return i.css({height:a*b,width:d.targetWidth*b})})});e.$watch(function(){return o()},function(a){return p(a,h.getScale())}),e.$watch(function(){return h.getScale()},function(a){return p(o(),a)})}}}}]),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("segmentOverlayPosition",["$parse","flags","applicationParameters","PresetMediaType","columnService","overlayColumnsPosition","animationChanges","overlayManager","overlayPosition","overlayModel","sitePartTypes","previewScale",function(a,b,c,d,e,f,g,h,i,j,k,l){return{restrict:"A",link:function(c,d,e){var h=function(){return a(e.segmentOverlayPosition)(c)},k=function(){return a(e.columns)(c)};if(b.overlayModel){var m=function(a){void 0===a&&(a=h());var b=a&&a.containingLG&&a.containingLG.containingPage();return b&&i.getOverlay(b.sitePart,b.page)},n=i.getCache(d,function(a){return _.extend({left:0},a)}),o=function(){var a=h(),b=a.node,c=m(a),d=c&&j.segmentNodes(c,a);if(d&&d[0]){var e=d[0].mapping.column?i.columnsBounding(d,b):d[0].layout;n(l.getScale(),e)}};c.$watch(function(){return m()},o),c.$watch(function(){return l.getScale()},function(a){return n(a)})}else{var p=_.debounce(function(a,b){var c=a.getLENoError();if(!c||!c.argList)return null;var e=f.getIndications(a,k()),h=i.segmentLayout(e,a,b);g.add(function(){return d.css(h)})});c.$watch(e.segmentOverlayPosition,function(a){return p(a,l.getScale())}),c.$watch(function(){return h().renderTime},function(){return p(h(),l.getScale())}),c.$watch(function(){return h().getLENoError()},function(){return p(h(),l.getScale())}),c.$watch(function(){return l.getScale()},function(a){return p(h(),a)}),c.$on("$stateChangeSuccess",function(a,b){b.name!==config.STATES.BUILDER_EDIT&&b.name!==config.STATES.BUILDER_SWITCH_PRESET||p(h(),l.getScale())})}}}}]),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("componentOverlayPosition",["$parse","$state","flags","applicationState","columnService","overlayColumnsPosition","overlaySegmentManager","animationChanges","overlayManager","overlayModel","sitePartTypes","overlayPosition","previewScale",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a,b){if(!b[0])return!1;var c=b[0].getBoundingClientRect().top;return a[0].getBoundingClientRect().top-c<24}function o(a,b){var c=b.height<ComponentOverlay.MinComponentHeight;if(!c){c=Array.prototype.reduce.call(a[0].children,function(a,b){return a+=b.clientWidth},0)+12>b.width}return c}function p(a,b,c){b.forEach(function(b){a.hasClass(b)||a.addClass(b)}),c.forEach(function(b){return a.removeClass(b)})}function q(a,b,c,d,e){o(d,e)?n(a,b)?p(c,["onbottom"],["ontop"]):p(c,["ontop"],["onbottom"]):p(c,[],["ontop","onbottom"])}return{restrict:"A",link:function(e,f,i){var k=f.find(".interact-wrap"),n=f.find(".overlay-interact"),o=f.parents(".overlay-viewport"),p=function(){return a(i.componentOverlayPosition)(e)};if(c.overlayModel){var r=function(a){void 0===a&&(a=p());var b=a.le.containingLG,c=b&&b.containingPage();return c&&l.getOverlay(c.sitePart,c.page)},s=l.getCache(f,function(a,b,c){return a.width=void 0!==a.width?a.width:l.siteWidth()*b,a.left=void 0!==a.left?a.left:-l.siteMargin()*b,h.add(function(){return q(f,o,n,k,a)}),a}),t=function(){var a=p(),b=a.le,c=a.layout,d=r(a),e=a.le.containingSegment,f=e.node,h=j.layoutNode(d,b,c),i=d&&j.segmentNodes(d,e),k=h?h.layout:{};if(i[0]){if(c.isFake)k=l.fakeLayout(c,i);else if(i[0].mapping.column){var n=i,o=_.find(i,function(a){return a.children.indexOf(h)>=0});if(o){var q=l.offsetInColumns(o,n,f),t=o.columnOffset(l.siteWidth()).padLeft;k.left+=q.left+t,k.top+=q.top}else if(b.isMediaLayout(c)){var u=_.find(i,function(a){return"media"===a.mapping.background}),q=l.offsetInColumns(u,n,f);k=u.columnBounding(l.siteWidth()),k.left=q.left,k.top=q.top}if(l.shouldBoundContent(n,f)){var q=l.contentOffset(o);k.left=k.left-q}}}else k=l.c2c(c,b,k);k.left=k.left<0?0:k.left,k.visibility=g.isSectionActive(e)?"":"hidden",s(m.getScale(),k)};e.$watch(function(){return r()},t),e.$watch(function(){return m.getScale()},function(a){return s(a)}),e.$watch(function(){return d.getContentFocus()},t),e.$watch(function(){return b.params.childId},t)}else{var u,v=_.debounce(function(a,b){u=l.componentLayout(a.indications,a.le,a.layout,b),u.visibility=u.visibility||"",h.add(function(){f.css(u),h.add(function(){return q(f,o,n,k,u)})})});e.$watch(i.componentOverlayPosition,function(a){return v(a,m.getScale())}),e.$watch(function(){return m.getScale()},function(a){return v(p(),a)}),e.$on("$stateChangeSuccess",function(a,b){b.name!==config.STATES.BUILDER_EDIT&&b.name!==config.STATES.BUILDER_SWITCH_PRESET||v(p(),m.getScale())}),f.on("mouseenter",function(){v(p(),m.getScale())})}}}}]);var FakeBrowser=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){this.$scope=a,this.viewerScrollController=b,this.$element=c,this.previewScale=d,this.applicationState=e,this.previewService=f,this.iframeViewAdapter=g,this.viewerScaleController=h,this.flags=i,this.$translate=j,this.$document=k,this.overlayManager=l,this.$timeout=m,this.sitePartTypes=n,this.CcDialogBuilder=o,this.scrollbarWidth=this.viewerScrollController.getScrollbarWidth()}return a.$inject=["$scope","viewerScrollController","$element","previewScale","applicationState","previewService","iframeViewAdapter","viewerScaleController","flags","$translate","$document","overlayManager","$timeout","sitePartTypes","CcDialogBuilder"],a.prototype.$postLink=function(){var a=this;this.$scope.$watch(function(){return a.previewScale.getScale()},function(b){return a.updateWidth(b)}),this.$scope.$watch(function(){return a.applicationState.isInMobileEditMode()},function(b){return a.toggleEditModeBrowser(b)})},a.prototype.onMouseLeave=function(){this.overlayManager.data.hoveredListSpan=null},a.bindScrollBars=function(){var a=!1,b=!1,c=$(".cover > .cc-panel-frame > .cc-panel-body"),d=$(".overlay-viewport");c.scroll(function(){if(b)return void(b=!1);d[0].scrollTop=c[0].scrollTop,a=!0}),d.scroll(function(){if(a)return void(a=!1);c[0].scrollTop=d[0].scrollTop,b=!0})},a.prototype.getListSpans=function(){return[].concat(this.overlayManager.listSpanManager.getAllInHeader(),this.overlayManager.listSpanManager.getAllInBody(),this.overlayManager.listSpanManager.getAllInFooter())},a.prototype.getStyleFromListSpan=function(a){return{height:this.overlayManager.listSpanManager.getListSpanLayout(a).height,"margin-top":2===this.getListSpans().length&&this.getListSpans()[1]===a?this.getBodyListSpanHeight()+"px":""}},a.prototype.getBodyListSpanHeight=function(){return this.overlayManager.getSitePartByType(this.sitePartTypes.BODY).adjustedHeight},a.prototype.findListSpanElement=function(a){return $(".list-span-overlay").eq(this.getListSpans().indexOf(a))},a.prototype.isFakeBrowserHeightFixed=function(){return this.applicationState.isFakeBrowserHeightFixed()},a.prototype.handleListSpanMouseEnter=function(a){var b=this;this.$timeout(function(){return b.findListSpanElement(a).trigger("mouseenter")})},a.prototype.handleListSpanClick=function(a){var b=this;this.$timeout(function(){return b.findListSpanElement(a).trigger("click")})},a.prototype.isPreviewDisplay=function(){return this.applicationState.isPreviewDisplay()},a.prototype.isInMobileEditMode=function(){return this.applicationState.isInMobileEditMode()},a.prototype.extraWidthIfDefined=function(a){var b=this.applicationState.previewFrameWidth;return{width:b,maxWidth:this.isPreviewDisplay()?"100% !important":b}},a.prototype.getSiteUrl=function(){var a=this.applicationState.getStoryMetadata(),b=a&&a.publicUri;return b&&-1===b.indexOf("editor.wix")?b:"https://www.wix.com/mysite"},a.prototype.getBarLabel=function(){return this.$translate.instant("builder.fake-browser.choose-domain")},a.prototype.openConnectDomainDialog=function(b){this.CcDialogBuilder.show({parent:this.$document.body,targetEvent:b,onComplete:function(){angular.element(".md-dialog-container").addClass("tour-modal")},template:'<md-dialog aria-label="Publish dialog" class="big-modal"><publish-dialog screen="connect" source="'+a.ConnectDomainSource+'"></publish-dialog></md-dialog>'})},a.prototype.updateWidth=function(b){this.$element.find(a.BrowserWrapperSelector).width(Viewer.ViewerDesktopBaseSize*b)},a.prototype.toggleEditModeBrowser=function(b){this.$element.find(a.BrowserWrapperSelector).css(this.extraWidthIfDefined()),b?this.previewScale.setScale(1):(this.previewScale.reset(!0),this.updateWidth(this.previewScale.getScale()))},a.prototype.getWidthWithScrollbar=function(){return{width:320+this.scrollbarWidth}},a}();FakeBrowser.BrowserWrapperSelector=".browser-wrapper",FakeBrowser.InnerWrapperSelector=".inner-wrapper",FakeBrowser.IframeSelector=".viewer",FakeBrowser.ConnectDomainSource="fakebrowser",angular.module("siteGeneratorStaticsConsumerAppInternal").component("fakeBrowser",{templateUrl:"views/preview/fake-browser.html",controller:FakeBrowser});var Preview=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this;this.flags=b,this.applicationState=c,this.overlayManager=d,this.obMonitoring=e,this.clientTopology=f,this.previewService=g,this.sitePartTypes=h,this.simpleSolutionManager=i,this.solutionFetcher=j,this.storyServices=k,this.presetHelpers=l,this.$state=m,this.$window=n,this.documentServicesMediator=o,this.getPanelWidth=function(){return q.applicationState.isInMobileEditMode()&&_.get(q.$state,"current.data.mobilePanelWidth")||_.get(q.$state,"current.data.panelWidth",0)},c.isPreviewDisplay()&&(a.builder.previewSitePageView(),g.setPreviewMode(!0)),p.$watch(function(){return q.overlayManager.data.focusedListSpan},function(a){q.presetPreview=a?q.createDraggedSectionPreview(a):null})}return a.$inject=["consumerBiLogger","flags","applicationState","overlayManager","obMonitoring","clientTopology","previewService","sitePartTypes","simpleSolutionManager","solutionFetcher","storyServices","presetHelpers","$state","$window","documentServicesMediator","$scope"],a.prototype.viewerLoaded=function(a,b,c){var d=this;this.dsContentWindow=a,this.documentServices=b,this.documentServicesModel=c,this.documentServicesModel.editorSessionId=this.clientTopology.esi,this.previewLoaded(),this.documentServicesMediator.registerToErrorThrown(function(a){a&&"components.arrangement.moveToBack"===a.methodName||d.obMonitoring.error("santa error: "+JSON.stringify(a))})},a.prototype.overlayLoaded=function(a){this.previewOverlay=a,this.previewOverlayContainer=angular.element(a).closest(Overlay.ViewportSelector).get(0),this.previewLoaded()},a.prototype.adiServerOnResize=function(){this.$window.adiRunningOnServer.parameters.width===this.dsContentWindow.innerWidth&&(this.documentServicesMediator.toggleWixAds(),$("builder").addClass("-without-overlay"),this.$window.document.querySelector("iframe.viewer").setAttribute("scrolling","no"),this.$window.adiRunningOnServer.previewSwitchedOn(this.documentServicesMediator.getSiteHeight()))},a.prototype.previewLoaded=function(){var a=this;this.previewOverlay&&this.dsContentWindow&&(this.$window.adiRunningOnServer&&(this.dsContentWindow.addEventListener("resize",function(){return a.adiServerOnResize()},!1),this.adiServerOnResize(),this.documentServicesMediator.setIframeDocument(this.dsContentWindow)),this.previewService.urlLoaded(this.documentServices,this.documentServicesModel,this.previewOverlay,this.previewOverlayContainer,this.dsContentWindow))},a.prototype.createDraggedSectionPreview=function(a){var b=a.sitePart,c=a.node;if(b!==this.sitePartTypes.BODY||c.isTpaNode())return null;var d=this.solutionFetcher.getSectionSolution(this.storyServices.story.selectedPage,c.getId());return this.presetHelpers.createCurrentSectionPreview(c,d)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").directive("preview",function(){return{restrict:"E",templateUrl:"views/preview/preview.html",replace:!0,controllerAs:"$ctrl",controller:Preview}}),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("spinner",["spinnerService","notification","$timeout","$translate",function(a,b,c,d){function e(a){requestAnimationFrame(function(){a.find(".onboarding-preloader-circle1").addClass("animate"),a.find(".onboarding-preloader-circle2").addClass("animate"),a.find(".onboarding-preloader-circle3").addClass("animate")})}function f(a){a.find(".onboarding-preloader-circle1").removeClass("animate"),a.find(".onboarding-preloader-circle2").removeClass("animate"),a.find(".onboarding-preloader-circle3").removeClass("animate")}var g="progress-bar-shown";return{restrict:"E",replace:!0,templateUrl:"views/spinner.html",link:function(h,i){function j(){var a=h.isFirstTime()?m:n;return o=(o+1)%a.length,k=a[o]}var k,l={start:function(){(h.isFirstTime()||h.buildHomePagePhase)&&i.css("background","rgb(255, 255, 255)"),h.message=j(),document.body.classList.add("is-working"),i.show(),h.isSpinning=!0,h.showAnimations()&&e(i)},stop:function(){if(!h.buildHomePagePhase)return h.showAnimations()?void(h.isFirstTime()?(i.css("opacity",0),c(function(){i.css("opacity",""),i.css("transition",""),i.css("background",""),f(i),i.hide(),h.isSpinning=!1,document.body.classList.remove("is-working")},500)):(f(i),i.hide(),h.isSpinning=!1,document.body.classList.remove("is-working"))):void c(function(){i.hide(),h.isSpinning=!1},100)}};h.message="",h.isSpinning=!1,h.isFirstTime=function(){return a.isFirstTime},h.isSolidBackground=function(){return a.isSolidBackground},h.isFatalError=function(){return a.isFatalError},h.showAnimations=function(){return a.showAnimation},h.getProgressStyle=function(){if(h.buildHomePagePhase)return{width:360*h.progressInHomePage+"px"}},h.getMessage=function(){if(!h.isSpinning)return"";if(a.overrideMessage)return a.overrideMessage;var e=b.getSpinnerMessage();return h.visibleMessage&&h.visibleMessage===e?h.message:(h.buildHomePagePhase&&!e&&(h.isSpinning=!1,c(function(){i.find(".progress-bar-spinner").removeClass(g)},1e3),c(function(){h.buildHomePagePhase=!1,a.setWithAnimation(!0),l.stop()},2e3)),h.visibleMessage=e,!h.buildHomePagePhase&&e&&(h.buildHomePagePhase=!0,c(function(){return i.find(".progress-bar-spinner").addClass(g)})),e?(h.message=e.message,h.subtitle=e.currentStep?d.instant("spinner.step.step")+" "+e.currentStep+" "+d.instant("spinner.step.out-of")+" "+e.totalSteps:"",h.progressInHomePage=e.currentStep/(e.totalSteps||1)):h.message=k||j(),h.message)};var m=[d.instant("spinner.message.0"),d.instant("spinner.message.1"),d.instant("spinner.message.2")],n=[d.instant("spinner.message.3"),d.instant("spinner.message.4"),d.instant("spinner.message.5"),d.instant("spinner.message.6"),d.instant("spinner.message.7")],o=_.random(m.length);l.stop(),a.register(l)}}}]),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("headerLayoutSolver",["visualValidationContainer",function(a){return{restrict:"A",link:function(b,c){a.initHeaderLayoutSolver(c),c.html("")}}}]);var ProgressBar=function(){function a(a,b,c){var d=this;this.$rootScope=a,this.$element=b,this.$timeout=c,this.timeInterval=0,this.timer=void 0,this.width=0,this.$rootScope.$on("switchEditModeStart",function(a,b){d.startLoadingAnimation(b)}),this.$rootScope.$on("switchEditModeEnd",function(){clearInterval(d.timer),d.finishAnimation()})}return a.$inject=["$rootScope","$element","$timeout"],a.prototype.startLoadingAnimation=function(a){
this.timeInterval=a,this.width=0,this.$element.children().removeClass("-fade-out"),this.$element.children().css({width:this.width+"%",display:"block"}),this.setAnimation(a)},a.prototype.setAnimation=function(a){var b=this;this.timer=setInterval(function(){b.width>=99?clearInterval(b.timer):(b.width++,b.$element.children().css("width",b.width+"%"))},a/(100-this.width))},a.prototype.finishAnimation=function(){var b=this;this.$element.children().css("width","100%"),this.$timeout(function(){return b.$element.children().addClass("-fade-out")},a.PROGRESS_BAR_FINISH_LOADING_DURATION)},a}();ProgressBar.PROGRESS_BAR_FINISH_LOADING_DURATION=200,angular.module("siteGeneratorStaticsConsumerAppInternal").component("progressBar",{templateUrl:"views/progress-bar.html",controller:ProgressBar});var TopBar=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G){var H=this;this.clientTopology=a,this.publishService=b,this.applicationState=c,this.tpaDiscovery=d,this.$window=e,this.$state=f,this.$sce=g,this.$scope=h,this.$document=i,this.storyServices=j,this.modelTree=k,this.$timeout=l,this.$q=m,this.flags=n,this.menuService=o,this.introManager=p,this.undoRedo=q,this.CcDialogBuilder=r,this.tpaService=s,this.pagesManager=t,this.sectionManager=u,this.$translate=v,this.notification=w,this.metaDataService=x,this.spinnerService=y,this.consumerBiLogger=z,this.CONSUMER_DIALOGS=A,this.staticsUrls=B,this.autoSaveNotifier=C,this.assistantManager=D,this.initService=E,this.pageAlignmentService=F,this.layoutSolver=G,this.managablePageSelected=!0,this.activeTab="",this.isAppReady=!1,this.whilePublishing=!1,this.afterPublishing=!1,this.showPublishAnimation=!1,this.timeToRetrySave=0,this.showSavingMessage=!1,this.showSavedMessage=!1,this.shouldShowManage=!1,this.lastSaveTime=Date.now(),this.DROPDOWN_STYLE_FOR_ASSISTANT="display: block !important; transform: translateX(-50%) !important; z-index: 10000000 !important;",this.onKeyDown=_.debounce(function(a){if(a.metaKey||a.ctrlKey){switch(String.fromCharCode(a.keyCode)){case"Z":if(!a.shiftKey){H.undoRedo.undo(!0);break}case"Y":H.undoRedo.redo(!0),a.preventDefault();break;case"V":if(a.shiftKey&&a.altKey){var b=H.storyServices.story.staticsVersion;b&&0!==b.toString().length||(b="local");var c=(H.flags.contentVersionId?H.flags.contentVersionId:H.storyServices.story.contentVersion)||"unspecified",d=H.flags.realSantaVersion;H.notification.show(H.$sce.trustAsHtml(H.$translate.instant("notifications.version-info",{staticsVersion:b,contentVersion:c,santaVersion:d}))),a.preventDefault()}break;case"F":if(a.shiftKey&&a.altKey){var e=_.pick(_.omit(H.flags,_.functions(H.flags)),_.identity),f=_.keys(e);H.$window.console.log(f),H.$window.console.log("Experiments has been saved to 'openExperiments', use 'copy(openExperiments)' to copy them to your clipboard"),H.$window.openExperiments=f;var g="Active flags: "+f.join(", ");H.notification.show(g),a.preventDefault()}}}},500),this.initService.loaded().then(function(){return H.isAppReady=!0}),angular.element(this.$window).keydown(function(a){return H.onKeyDown(a)}),this.watchSave(),this.watchState(),this.activeTab=this.getActiveTab()}return a.$inject=["clientTopology","publishService","applicationState","tpaDiscovery","$window","$state","$sce","$scope","$document","storyServices","modelTree","$timeout","$q","flags","menuService","introManager","undoRedo","CcDialogBuilder","tpaService","pagesManager","sectionManager","$translate","notification","metaDataService","spinnerService","consumerBiLogger","CONSUMER_DIALOGS","staticsUrls","autoSaveNotifier","assistantManager","initService","pageAlignmentService","layoutSolver"],a.prototype.showSingleTpa=function(){return 1===_.size(this.getManageableTPAs())},a.prototype.singleTpa=function(){var a=this.getManageableTPAs();return a[Object.keys(a)[0]]},a.prototype.singleTpaType=function(){var a=this.getManageableTPAs();return Object.keys(a)[0]},a.prototype.showMultiTpa=function(){return _.size(this.getManageableTPAs())>1&&this.getManageableTPAs()},a.prototype.getManageableTPAs=function(){return this.tpaDiscovery.manageableTPAs},a.prototype.getRelevantTPANode=function(a){return this.tpaDiscovery.manageableTPAs[a].naiveNode},a.prototype.watchSave=function(){var a,b=this;this.$scope.$watch("$ctrl.autoSaveNotifier.savingState",function(c){"saving"===c?(b.showSavingMessage=!0,b.showSavedMessage=!1,b.timeToRetrySave=0,a&&b.$timeout.cancel(a)):null===b.autoSaveNotifier.saveRetryTime?(b.timeToRetrySave=0,a=b.$timeout(function(){b.showSavingMessage=!1,b.showSavedMessage=!0,a=b.$timeout(function(){b.showSavedMessage=!1,a=null},1500)},800)):(b.showSavingMessage=!1,b.showSavedMessage=!1)})},a.prototype.watchState=function(){var a=this;this.$scope.$watch(function(){return a.$state.$current&&a.$state.$current.name},function(){a.activeTab=a.getActiveTab()})},a.prototype.debugFeatures=function(){return this.flags.debugMode},a.prototype.showPageAlignment=function(){return this.flags.corePageAlignment},a.prototype.resetPageAlignment=function(a){this.pageAlignmentService.reset(1/a,this.storyServices.story.selectedPage),this.layoutSolver.onNodeChanged()},a.prototype.startOver=function(){this.introManager.reset(),this.$state.go(config.STATES.INTRO,{reload:!0})},a.prototype.isPreviewDisplay=function(){return this.applicationState.isPreviewDisplay()},a.prototype.onCustomizeSelectedKit=function(){return this.applicationState.goToDesignKitMode()},a.prototype.openFonts=function(){this.applicationState.goToFontsPanel(BIOrigins.TopBar)},a.prototype.openNewColorationPanel=function(){this.consumerBiLogger.siteDesign.customizeDesignColorPaletteMode(BIOrigins.TopBar),this.applicationState.goToColorationPanel()},a.prototype.openAnimationPanel=function(){this.consumerBiLogger.siteDesign.openAnimationList(),this.applicationState.goToAnimationPanel(BIOrigins.TopBar)},a.prototype.showSiteDesignDropdown=function(){this.isSiteDesignDropdownVisible=!0},a.prototype.hideSiteDesignDropdown=function(){this.isSiteDesignDropdownVisible=!1},Object.defineProperty(a.prototype,"mobileMode",{get:function(){return this.applicationState.isInMobileEditMode()},enumerable:!0,configurable:!0}),a.prototype.shouldShowDropDownDesign=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openSiteDesignTopBarMenu")||this.isSiteDesignDropdownVisible&&!this.assistantManager.isInActiveTask()},a.prototype.shouldShowSwitchEditMode=function(){return this.flags.mobileEditor},a.prototype.shouldShowManageDropDown=function(){return this.shouldShowManage},a.prototype.getManageDropdownStyle=function(){return this.shouldShowManage?{display:"flex"}:{display:"none"}},a.prototype.getSiteDesignDropdownStyle=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openSiteDesignTopBarMenu")?this.DROPDOWN_STYLE_FOR_ASSISTANT:this.isSiteDesignDropdownVisible&&!this.assistantManager.isInActiveTask()?"display: flex":"display: none"},a.prototype.onClickDesign=function(){this.consumerBiLogger.siteDesign.designPanelIsLoaded("header"),this.applicationState.goToDesignMode()},a.prototype.isManualSave=function(){return this.applicationState.isSupportStaffEditing()},a.prototype.onManualSave=function(){this.undoRedo.manualSave()},a.prototype.onClickPreview=function(){var a=this;this.consumerBiLogger.builder.topBarPreviewSiteClick("top bar"),this.spinnerService.waitForMe("goToPreview"),this.applicationState.goToPreview(!0).then(function(){a.consumerBiLogger.builder.topBarPreviewSiteSuccess(),a.applicationState.isSupportStaffEditing()&&a.notification.show("toasters.preview-in-manual-save"),a.spinnerService.imDone("goToPreview")})},a.prototype.publishCompleteCB=function(){var a=this;this.metaDataService.getMetadata(this.storyServices.story.id,this.applicationState.setStoryMetadata.bind(this.applicationState),!0),this.whilePublishing=!1,this.showPublishAnimation=!0,this.afterPublishing=!0,this.$timeout(function(){a.showPublishAnimation=!1,a.afterPublishing=!1},1300)},a.prototype.publisher=function(){var a=this;this.whilePublishing=!0,this.publishService.publishConsumerStory().then(function(){a.publishCompleteCB()})},a.prototype.shouldShowPublishDialog=function(){return this.storyServices.story.popupConfigurations[PublishCongrats.PublishCongratsPopupKey]},a.prototype.onClickPublish=function(a){var b=this;this.applicationState.goToBuilder(!0),this.showPublishAnimation=!1,this.consumerBiLogger.builder.topBarPublishSiteClick(),this.shouldShowPublishDialog()?this.publisher():this.CcDialogBuilder.show({parent:this.$document.body,targetEvent:a,onComplete:function(){angular.element(".md-dialog-container").addClass("tour-modal")},template:'<md-dialog aria-label="Publish dialog" class="big-modal">    <publish-dialog></publish-dialog></md-dialog>',controller:["$scope",function(a){a.publisher=b.publisher.bind(b)}]}).then(function(){b.showPublishAnimation=!0,b.publishCompleteCB()})},a.prototype.getActiveTab=function(){var a="",b=[config.STATES.BUILDER_DESIGN,config.STATES.BUILDER_DESIGN_KITS,config.STATES.BUILDER_DESIGN_KIT,config.STATES.BUILDER_DESIGN_KIT_FONTS_NEW,config.STATES.BUILDER_DESIGN_KIT_COLORATION,config.STATES.BUILDER_DESIGN_KIT_COLORATION_ADVANCED,config.STATES.BUILDER_DESIGN_KIT_ANIMATIONS],c=[config.STATES.BUILDER_ADD_SECTION],d=[config.STATES.BUILDER_ADD_PAGE,config.STATES.BUILDER_SELECTED_PAGE,config.STATES.BUILDER_PAGES,config.STATES.BUILDER_PAGES_SEO],e=[config.STATES.BUILDER_STORY_PREVIEW];return b.indexOf(this.$state.$current.name)>-1?a="design":c.indexOf(this.$state.$current.name)>-1?a="add-section":d.indexOf(this.$state.$current.name)>-1?a="page-tab":e.indexOf(this.$state.$current.name)>-1&&(a="desktop-preview"),a},a.prototype.openMainHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.home"),this.CONSUMER_DIALOGS.HOME_HELP),this.consumerBiLogger.builder.topBarHelpClick()},a.prototype.isInDesktopEditMode=function(){return this.applicationState.isInDesktopEditMode()},a.prototype.isShowPagesDropDown=function(){return this.flags.pagesDropDownNewDesign&&this.modelTree.getPagesNodes().length>1},a}();TopBar.ConnectDomainSource="site-connect",angular.module("siteGeneratorStaticsConsumerAppInternal").component("topBar",{templateUrl:"views/top-bar/top-bar.html",controller:TopBar});var PagesPanelDropdown=function(){function a(a,b,c,d,e,f,g,h,i,j){this.menuService=a,this.pagesManager=b,this.consumerBiLogger=c,this.flags=d,this.applicationState=e,this.assistantManager=f,this.$state=g,this.storyServices=h,this.modelTree=i,this.tpaService=j,this.managablePageSelected=!0,this.isPagesDropdownVisible=!1}return a.$inject=["menuService","pagesManager","consumerBiLogger","flags","applicationState","assistantManager","$state","storyServices","modelTree","tpaService"],a.prototype.getSelectedPageName=function(){var a=this.applicationState.getPageInFocus();return this.managablePageSelected=a.managable,a.name},a.prototype.showPagesDropdown=function(){},a.prototype.hidePagesDropdown=function(){},a.prototype.handlePagesDropDownClick=function(a){this.hidePagesDropdown(),this.onClickPages()},a.prototype.onClickPages=function(){var a=this.storyServices.story.selectedPage;a?this.applicationState.goToPage(a):this.applicationState.goToPageManager()},a.prototype.getCssClassesForPageTab=function(){return{active:"page-tab"===this.activeTab}},a.prototype.shouldShowDropDownDesign=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openPagesTopBarMenu")||this.isPagesDropdownVisible},a.prototype.getPagesDropdownStyle=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openPagesTopBarMenu")?{display:"block"}:this.isPagesDropdownVisible?{display:"flex"}:{display:"none"}},a.prototype.goToPage=function(a,b){var c=this,d=this,e=d.$state,f=d.applicationState,g=d.storyServices,h=d.modelTree,i=d.tpaService,j=d.consumerBiLogger,k=d.pagesManager;if(g.story.selectedPage!==a.id){var l=h.getNodeById(a.id),m=i.getAppIdByPageNode(l);j.pagesManager.clickOnPage(a.name,m,"second topbar"),f.goToBuilder(),k.goToPage(a.id).then(function(){c.setSelectedPage.bind(c)(a.id),e.current.name===config.STATES.BUILDER_PAGES_SEO&&e.go("^"),c.consumerBiLogger.pagesManager.gotoPageSuccess(a.name,m,"second topbar")})}},a.prototype.setSelectedPage=function(a){this.applicationState.clearContentFocus(),this.storyServices.story.selectedPage=a,this.storyServices.emitChangingPage()},a.prototype.shouldShowHomeIcon=function(){return this.flags.mergedHeader&&this.isPageHome()},a.prototype.isPageHome=function(a){return void 0===a&&(a=this.applicationState.getPageNodeInFocus()),a&&this.modelTree.isHomePage(a)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("pagesPanelDropdown",{templateUrl:"views/top-bar/pages-panel-dropdown/pages-panel-dropdown.html",controller:PagesPanelDropdown,bindings:{activeTab:"<"}});var PagesDropdownNewDesign=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){this.menuService=a,this.pagesManager=b,this.consumerBiLogger=c,this.flags=d,this.applicationState=e,this.layoutSolver=f,this.assistantManager=g,this.$state=h,this.$scope=i,this.$timeout=j,this.$q=k,this.storyServices=l,this.consumerBiLoggerHelpers=m,this.mobileSolutionManager=n,this.modelTree=o,this.$element=p,this.tpaService=q,this.managablePageSelected=!0,this.DROPDOWN_STYLE_FOR_ASSISTANT="display: block !important; transform: translateX(-50%) !important; z-index: 10000000 !important;",this.clickedPage="",this.ready=!1,this.isPagesDropdownVisible=!1,this.pagesDropDownVisibilityStartTime=null,this.pagesDropDownVisibilityEndTime=null}return a.$inject=["menuService","pagesManager","consumerBiLogger","flags","applicationState","layoutSolver","assistantManager","$state","$scope","$timeout","$q","storyServices","consumerBiLoggerHelpers","mobileSolutionManager","modelTree","$element","tpaService"],a.prototype.scrollInsideContainer=function(a,b,c){a.animate({scrollTop:b},c)},a.prototype.scrollToSelectedPage=function(){var a=this;this.$timeout(function(){var b=a.$element.find(".pages-dropdown-list"),c=a.$element.find(".-selected-in-pages-dropdown"),d=b[0].clientHeight,e=c[0].offsetTop+c[0].clientHeight;if(e>d){var f=d/2,g=Math.floor(e/f),h=Math.max(0,f*g);a.scrollInsideContainer(b,h,0)}})},a.prototype.getDropdownAdditionalStyleBasedOnDevice=function(){return this.isInMobileEditMode()?"mobile-dropdown-style":"desktop-dropdown-style"},a.prototype.getSubMenuAdditionalStyleBasedOnDevice=function(){return this.isInMobileEditMode()?"mobile-sub-menu-style":"desktop-sub-menu-style"},Object.defineProperty(a.prototype,"isPanelOpen",{get:function(){return!(!this.pagesDropDownVisibilityStartTime||!this.pagesDropDownVisibilityEndTime)&&this.pagesDropDownVisibilityStartTime>this.pagesDropDownVisibilityEndTime},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"timePanelIsOpen",{get:function(){return!this.pagesDropDownVisibilityStartTime||this.pagesDropDownVisibilityEndTime>this.pagesDropDownVisibilityStartTime?0:(Date.now()-this.pagesDropDownVisibilityStartTime)/1e3},enumerable:!0,configurable:!0}),a.prototype.showPagesDropdownNewDesign=function(){var a=this;if(this.applicationState.isSelectedPageMode())this.pagesDropDownVisibilityEndTime=Date.now(),this.isPagesDropdownVisible=!1;else{this.enablePagesDropdownVisibility(),this.pagesDropDownVisibilityStartTime=Date.now();var b=1;setTimeout(function(){a.isPagesDropdownVisible&&a.timePanelIsOpen>b&&a.consumerBiLogger.pagesManager.pagesDropdownListOpenOnHover()},1e3*b)}},a.prototype.enablePagesDropdownVisibility=function(){this.isPagesDropdownVisible=!0,this.scrollToSelectedPage()},a.prototype.hidePagesDropdownNewDesign=function(){this.clickedPage="",this.pagesDropDownVisibilityEndTime=Date.now(),this.isPagesDropdownVisible=!1},a.prototype.getSelectedPageName=function(){var a=this.applicationState.getPageInFocus();return this.managablePageSelected=a.managable,a.name},a.prototype.isInMobileEditMode=function(){return this.applicationState.isInMobileEditMode()},a.prototype.handlePagesDropDownClick=function(a){"UL"!==a.target.tagName&&(this.hidePagesDropdownNewDesign(),this.onClickPages())},a.prototype.isMarkAsSelected=function(a){return this.clickedPage?a===this.clickedPage:this.pagesManager.isSelectedPage(a)},a.prototype.onClickPages=function(a){this.consumerBiLoggerHelpers.setPanelSource(a);var b=this.storyServices.story.selectedPage;b?this.applicationState.goToPage(b):this.applicationState.goToPageManager()},a.prototype.getCssClassesForPageTab=function(){return{active:"page-tab"===this.activeTab}},a.prototype.shouldShowDropDownDesign=function(){return this.isPagesDropdownVisible&&!this.assistantManager.isInActiveTask()},a.prototype.getPagesDropdownStyle=function(){return this.shouldShowDropDownDesign()?{display:"flex"}:{display:"none"}},a.prototype.goToPage=function(a,b){var c=this;b.stopPropagation();var d=this,e=d.$state,f=d.applicationState,g=(d.storyServices,d.modelTree),h=d.tpaService,i=d.consumerBiLogger,j=d.pagesManager;if(!this.pagesManager.isSelectedPage(a.id)){var k=g.getNodeById(a.id),l=h.getAppIdByPageNode(k);this.$q.when().then(function(){return c.clickedPage=a.id,c.$timeout(function(){c.hidePagesDropdownNewDesign()},250),i.pagesManager.clickOnPage(a.name,l,"site pages list"),c.applicationState.isInMobileEditMode()||f.goToBuilder(),j.goToPage(a.id)}).then(function(){if(c.applicationState.isInMobileEditMode())return c.applicationState.clearContentFocus(),c.applicationState.goToMobilePage(a.id);c.setSelectedPage(a.id)}).then(function(){c.storyServices.emitChangingPage(),e.current.name===config.STATES.BUILDER_PAGES_SEO&&e.go("^"),c.consumerBiLogger.pagesManager.gotoPageSuccess(a.name,l,"site pages list")}).catch(function(a){return console.log(a.stack)})}},a.prototype.setSelectedPage=function(a){this.applicationState.clearContentFocus(),this.storyServices.story.selectedPage=a},a.prototype.getSiteDesignDropdownStyle=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openSiteDesignTopBarMenu")?this.DROPDOWN_STYLE_FOR_ASSISTANT:this.isPagesDropdownVisible&&!this.assistantManager.isInActiveTask()?"display: flex":"display: none"},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("pagesDropdownNewDesign",{templateUrl:"views/top-bar/pages-panel-dropdown/pages-dropdown-new-design.html",controller:PagesDropdownNewDesign,bindings:{activeTab:"<"}});var STATES=config.STATES,AddTabDropdown=function(){function a(a,b,c,d,e,f,g,h){var i=this;this.assistantManager=a,this.consumerBiLogger=b,this.applicationState=c,this.tpaService=d,this.initService=e,this.$state=f,this.overlayManager=g,this.flags=h,this.isAppReady=!1,this.isAddSectionDropdownVisible=!1,this.DROPDOWN_STYLE_FOR_ASSISTANT="display: block !important; transform: translateX(-50%) !important; z-index: 10000000 !important;",this.getCssClassesForAddSectionTab=function(){return{active:"add-section"===i.activeTab,"disabled-button":i.isCurrentPageSinglePostBlog()}},this.initService.loaded().then(function(){return i.isAppReady=!0})}return a.$inject=["assistantManager","consumerBiLogger","applicationState","tpaService","initService","$state","overlayManager","flags"],a.prototype.showAddSectionDropdown=function(){this.isAddSectionDropdownVisible=!0},a.prototype.hideAddSectionDropdown=function(){this.isAddSectionDropdownVisible=!1},a.prototype.shouldShowDropDownDesign=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openAddTopBarMenu")||this.isAddSectionDropdownVisible&&!this.assistantManager.isInActiveTask()},a.prototype.getAddSectionDropdownStyle=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openAddTopBarMenu")?this.DROPDOWN_STYLE_FOR_ASSISTANT:this.isAddSectionDropdownVisible&&!this.assistantManager.isInActiveTask()?"display: flex":"display: none"},a.prototype.isCurrentPageSinglePostBlog=function(){return this.isAppReady&&this.tpaService.isCurrentPageIsBlogSinglePost()},a.prototype.onClickAddSection=function(){this.isCurrentPageSinglePostBlog()||(this.overlayManager.setAddTargetKnown(!1),this.consumerBiLogger.sectionManagement.addSectionClick("second topbar"),this.applicationState.goToAddSectionMode())},a.prototype.onClickAddPage=function(){this.flags.keepPagesPanelOpen&&(this.applicationState.shouldReopenPagesPanel=this.shouldKeepPagesPanelOpen()),this.consumerBiLogger.pagesManager.addPageClick("second topbar"),this.applicationState.goToAddPageMode()},a.prototype.shouldKeepPagesPanelOpen=function(){return!(!this.$state.is(STATES.BUILDER_PAGES)&&!this.$state.is(STATES.BUILDER_SELECTED_PAGE))},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("addTabDropdown",{templateUrl:"views/top-bar/add-tab-dropdown/add-tab-dropdown.html",controller:AddTabDropdown,bindings:{activeTab:"<"}});var SiteDesignDropdown=function(){function a(a,b,c,d,e){this.assistantManager=a,this.consumerBiLogger=b,this.applicationState=c,this.flags=d,this.initService=e,this.isAppReady=!1,this.isAddSectionDropdownVisible=!1,this.DROPDOWN_STYLE_FOR_ASSISTANT="display: block !important; transform: translateX(-50%) !important; z-index: 10000000 !important;"}return a.$inject=["assistantManager","consumerBiLogger","applicationState","flags","initService"],a.prototype.onClickDesign=function(){this.consumerBiLogger.siteDesign.designPanelIsLoaded("header"),this.applicationState.goToDesignMode()},a.prototype.openNewColorationPanel=function(){this.consumerBiLogger.siteDesign.customizeDesignColorPaletteMode(BIOrigins.TopBar),this.applicationState.goToColorationPanel()},a.prototype.openFonts=function(){this.applicationState.goToFontsPanel(BIOrigins.TopBar)},a.prototype.openAnimationPanel=function(){this.consumerBiLogger.siteDesign.openAnimationList(),this.applicationState.goToAnimationPanel(BIOrigins.TopBar)},a.prototype.getSiteDesignDropdownStyle=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openSiteDesignTopBarMenu")?this.DROPDOWN_STYLE_FOR_ASSISTANT:this.assistantManager.isInActiveTask()?"display: none":"display: flex"},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("siteDesignDropdown",{templateUrl:"views/top-bar/site-design-dropdown/site-design-dropdown.html",controller:SiteDesignDropdown,bindings:{activeTab:"<"}});var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),SiteDropdown=function(a){function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=a.call(this)||this;return w.clientTopology=b,w.menuService=c,w.pagesManager=d,w.consumerBiLogger=e,w.flags=f,w.applicationState=g,w.assistantManager=h,w.$state=i,w.storyServices=j,w.modelTree=k,w.$document=l,w.CcDialogBuilder=m,w.tpaService=n,w.CONSUMER_DIALOGS=o,w.consumerDialogs=p,w.$window=q,w.staticsUrls=r,w.$translate=s,w.publishService=t,w.initService=u,w.$timeout=v,w.siteInitialized=!1,w.initService.loaded().then(function(){w.siteInitialized=!0}),w}return __extends(b,a),b.$inject=["clientTopology","menuService","pagesManager","consumerBiLogger","flags","applicationState","assistantManager","$state","storyServices","modelTree","$document","CcDialogBuilder","tpaService","CONSUMER_DIALOGS","consumerDialogs","$window","staticsUrls","$translate","publishService","initService","$timeout"],b.prototype.isSitePublished=function(){return!!this.siteInitialized&&this.publishService.isSitePublished()},b.prototype.getMetadata=function(){return this.applicationState.getStoryMetadata()},Object.defineProperty(b.prototype,"showBusinessInfo",{get:function(){return!1},enumerable:!0,configurable:!0}),b.prototype.onClickMyBusinessInfo=function(a){this.consumerBiLogger.builder.topBarEditBusinessInfoClick(),this.CcDialogBuilder.show({parent:this.$document.body,targetEvent:a,biDialogName:this.CONSUMER_DIALOGS.BUSINESS_DETAILS,template:'<md-dialog aria-label="Business details" class="big-modal"><business-info-modal></business-info-modal></md-dialog>'})},b.prototype.isManualSave=function(){return this.applicationState.isSupportStaffEditing()},b.prototype.onClickConnectDomain=function(a){this.consumerBiLogger.builder.topBarConnectDomainClick(),this.CcDialogBuilder.show({parent:this.$document.body,targetEvent:a,template:'<md-dialog aria-label="Publish dialog" class="big-modal">\n                   <publish-dialog screen="connect" source="'+TopBar.ConnectDomainSource+'"></publish-dialog>\n                 </md-dialog>'})},b.prototype.onClickMyDashboard=function(){this.consumerBiLogger.builder.topBarGoToMyDashboard(),this.openExternalLink("dashboardUri")},b.prototype.onClickSiteSettings=function(){this.consumerBiLogger.builder.topBarGoToSiteSettings(),this.openExternalLink("siteSettingsUri")},b.prototype.onClickStartNewSite=function(){this.consumerBiLogger.builder.topBarCreateNewSite(),this.$window.open("https://www.wix.com/new/vertical?ref=ADI","_blank")},b.prototype.onClickViewLiveSite=function(){this.consumerBiLogger.builder.topBarViewSiteClick(),this.openExternalLink("publicUri")},b.prototype.onClickFeedback=function(){this.consumerBiLogger.builder.topBarGiveFeedbackClick(),this.$window.open(this.$translate.instant("help.give-feedback"),"_blank")},b.prototype.onClickSEOWiz=function(){this.consumerBiLogger.builder.topBarSeoPanelGetFoundOnGoogleClick("topbar"),this.$window.open(this.staticsUrls.getSeoWizUrl("ADI_MENU"),"_blank")},b.prototype.openExternalLink=function(a){var b=this.getStoryMetadataByKey(a);b&&this.$window.open(b,"_blank")},b.prototype.getStoryMetadataByKey=function(a){var b=this.getMetadata();return b&&b[a]},b.prototype.showDropDown=function(){return this.handleOpened(),a.prototype.showDropDown.call(this)},b.prototype.hideDropDown=function(){return this.handleClosed(),a.prototype.hideDropDown.call(this)},b.prototype.handleOpened=function(){var a=this;this.reportBiMenuOpenedPromise=this.$timeout(function(){a.reportBiMenuOpenedPromise=null,a.consumerBiLogger.builder.topBarSiteMenuDialogOpen()},2e3)},b.prototype.handleClosed=function(){this.reportBiMenuOpenedPromise&&this.$timeout.cancel(this.reportBiMenuOpenedPromise)},b.prototype.showDropDownViaAssistantTask=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openSiteDropdown")},b.prototype.isShowDropDown=function(){return a.prototype.isShowDropDown.call(this)||this.showDropDownViaAssistantTask()},b.prototype.getInlineCustomStyle=function(){if(this.showDropDownViaAssistantTask())return"transform: translateX(-50%) !important; z-index: 10000000 !important;"},b}(BaseDropDown);angular.module("siteGeneratorStaticsConsumerAppInternal").component("siteDropdown",{templateUrl:"views/top-bar/site-dropdown/site-dropdown.html",controller:SiteDropdown});var GoToEditorLink=function(){function a(a,b){this.goToEditorService=a,this.consumerBiLogger=b}return a.$inject=["goToEditorService","consumerBiLogger"],a.prototype.goToEditor=function(){this.goToEditorService.launchDialog(),this.consumerBiLogger.builder.topBarGoToEditorClick("topbar")},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("goToEditorLink",{templateUrl:"views/top-bar/site-dropdown/go-to-editor-link.html",controller:GoToEditorLink});var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),UpgradeTabPopup=function(a){function b(b){var c=a.call(this)||this;return c.saleService=b,c}return __extends(b,a),b.$inject=["saleService"],b}(BaseDropDown);angular.module("siteGeneratorStaticsConsumerAppInternal").component("upgradeTabPopup",{templateUrl:"views/top-bar/upgrade-tab-popup/upgrade-tab-popup.html",controller:UpgradeTabPopup,bindings:{metaSiteId:"<"}}),angular.module("siteGeneratorStaticsConsumerAppInternal").component("upgradePopupDefault",{templateUrl:"views/top-bar/upgrade-tab-popup/upgrade-popup-default.html",bindings:{metaSiteId:"="}}),angular.module("siteGeneratorStaticsConsumerAppInternal").component("upgradePopupSeasonalCampaign",{templateUrl:"views/top-bar/upgrade-tab-popup/upgrade-popup-seasonal-campaign.html",bindings:{metaSiteId:"="}});var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),SwitchEditModeDropdown=function(a){function b(b,c,d,e,f,g,h,i,j,k,l,m,n){var o=a.call(this)||this;return o.applicationState=b,o.storyServices=c,o.consumerDialogs=d,o.flags=e,o.$log=f,o.consumerBiLogger=g,o.consumerBiLoggerHelpers=h,o.previewService=i,o.$timeout=j,o.CONSUMER_DIALOGS=k,o.assistiveMessage=l,o.$translate=m,o.$q=n,o}return __extends(b,a),b.$inject=["applicationState","storyServices","consumerDialogs","flags","$log","consumerBiLogger","consumerBiLoggerHelpers","previewService","$timeout","CONSUMER_DIALOGS","assistiveMessage","$translate","$q"],b.prototype.currentEditMode=function(){return this.applicationState.isInMobileEditMode()?"mobile":"desktop"},b.prototype.iconType=function(){return"cc-icon-switch-to-"+this.currentEditMode()},b.prototype.switchToDesktopEditMode=function(){this.switchEditorWithLogging("desktop")},b.prototype.showDialog=function(a){var b=this,c=!this.previewService.isSitePublished()&&this.storyServices.story.mobileEditorActive,d=c?this.switchEditorWithLogging("mobile"):this.$q.when();this.consumerDialogs.showDialog(ConsumerDialogTypes.EXISTING_USER_FIRST_TIME_MOBILE_EDITOR_POPUP).then(function(){b.storyServices.story.popupConfigurations[a]=!0,c||b.switchEditorWithLogging("mobile")},function(){d.then(function(){b.$timeout(b.applicationState.disableMobileEditor,Builder.ANIMATION_LENGTH-50)})})},b.prototype.switchToMobileEditMode=function(){var a=this,b="first-time-in-mobile-editor";this.flags.debug||!this.shouldShowPopup()||this.storyServices.story.popupConfigurations[b]?this.switchEditorWithLogging("mobile").then(function(){a.showAssistiveMessageIfFirstTime(b)}):this.showDialog(b)},b.prototype.shouldShowPopup=function(){return this.previewService.isSitePublished()&&!this.storyServices.story.mobileEditorActive},b.prototype.showAssistiveMessageIfFirstTime=function(a){this.flags.debug||this.shouldShowPopup()||this.storyServices.story.popupConfigurations[a]||(this.showAssistiveMessageWithBiLogging(),this.storyServices.story.popupConfigurations[a]=!0)},b.prototype.showAssistiveMessageWithBiLogging=function(){this.consumerBiLogger.dialogs.show(null,null,null,this.CONSUMER_DIALOGS.WELCOME_TO_MOBILE_EDITOR_NEW,null,null),this.applicationState.isSilent()||this.showAssistiveMessage()},b.prototype.showAssistiveMessage=function(){var a=this;this.assistiveMessage.show({target:$('[data-hook="browser-wrapper"]'),xOffset:-2,titleText:this.$translate.instant("popups.welcome-to-mobile-editor-new.heading"),text:this.$translate.instant("popups.welcome-to-mobile-editor-new.text"),icon:"EditMobileFirstTime.svg",durationBeforeEntrance:500,durationOfEntrance:300,durationOfExit:300,animationXOffset:-20,animationYOffset:0,onActionCallback:function(){return a.consumerBiLogger.dialogs.approveChanges(null,null,null,a.CONSUMER_DIALOGS.WELCOME_TO_MOBILE_EDITOR_NEW,null,null)},onHideCallback:function(){return a.consumerBiLogger.dialogs.cancel(null,null,null,a.CONSUMER_DIALOGS.WELCOME_TO_MOBILE_EDITOR_NEW,null,null)},
template:'<first-time-mobile-editor-tooltip heading="titleText" text="text" icon="icon" button-text="actionText" on-action="onAction()" on-hide="onHide()"></first-time-mobile-editor-tooltip>'})},b.prototype.switchEditorWithLogging=function(a){var b=this;return this.prepareBiLogger(a),this.$q.when().then(function(){return"mobile"===a?b.applicationState.goToMobilePage(b.storyServices.story.selectedPage):b.applicationState.disableMobileEditor()}).then(function(){b.sendBiAfterLoadFinished()}).catch(function(a){b.$log.error(a)})},b.prototype.sendBiAfterLoadFinished=function(){var a=this.consumerBiLoggerHelpers.popPanelSource();a&&this.consumerBiLogger.builder.switchBuilderTypeMobileDesktopSuccess(a,this.applicationState.isInDesktopEditMode()?"desktop":"mobile")},b.prototype.prepareBiLogger=function(a){this.currentEditMode()!==a&&(this.consumerBiLoggerHelpers.setPanelSource("top bar"),this.consumerBiLogger.builder.switchBuilderTypeMobileDesktopClick("top bar",a),this.consumerBiLoggerHelpers.resetLoadTime())},b}(BaseDropDown);angular.module("siteGeneratorStaticsConsumerAppInternal").component("switchEditModeDropdown",{templateUrl:"views/top-bar/switch-edit-mode-dropdown/switch-edit-mode-dropdown.html",controller:SwitchEditModeDropdown}),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("stateClass",["$state",function(a){return{restrict:"A",link:function(b,c,d){function e(a){return a&&a.data&&a.data[f]}var f=d.stateClass||"stateClass";c.addClass(e(a.current)),b.$on("$stateChangeSuccess",function(a,b,d,f){c.removeClass(e(f)),c.addClass(e(b))})}}}]),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("storyContainer",function(){"use strict";return{replace:!0,template:"<div ui-view></div>"}});var PublishService=function(){function a(a,b,c,d,e,f,g,h,i,j,k){this.previewService=a,this.consumerDialogs=b,this.wizardService=c,this.$http=d,this.$q=e,this.siteNameApi=f,this.consumerBiLogger=g,this.storyServices=h,this.documentServicesMediator=i,this.flags=j,this.pubSub=k,this.nextCongratsScreenIndex=0}return a.$inject=["previewService","consumerDialogs","wizardService","$http","$q","siteNameApi","consumerBiLogger","storyServices","documentServicesMediator","flags","pubSub"],a.prototype.getCongratsState=function(){var b=0;return this.isPremium()?b=this.isDomainConnected()?a.PromoteScreenIndex:a.NoPremiumScreenIndex:(b=this.nextCongratsScreenIndex,this.changeToNextCongratsScreen()),a.CongratsScreens[b]},a.prototype.getSiteDomainInfo=function(){var b=this,c=this.previewService.getMetaSiteId();return this.$http({method:"POST",url:a.PremiumStateApiUrl+c}).then(function(a){return{isDomainConnected:b.isDomainConnectedInXMLResponse(a.data),sitePublishedDomain:b.getPublishedSiteDomain(a.data),isSitePremium:b.isSitePremiumInXMLResponse(a.data)}})},a.prototype.changeToNextCongratsScreen=function(){this.nextCongratsScreenIndex=1-this.nextCongratsScreenIndex},a.prototype.changeSiteNameIfNeededAndValid=function(a){var b=this,c=this.getSiteName();if(c!==a){var d=this.previewService.getMetaSiteId();return this.siteNameApi.rename(d,a).then(function(){if(b.previewService.setSiteName(a),a=b.getSiteName(),!b.isDomainConnected()){var d=b.getPublicUrl().slice(0,-c.length);b.previewService.setPublicUrl(d+a)}return a})}return this.$q.resolve(c)},a.prototype.publishConsumerStory=function(){var a=this;return this.wizardService.publishConsumerStory().then(function(){return a.pubSub.fire(PubSub.events.PUBLISH)},function(b){var c=b;b.stack?c=b.stack:b.document&&b.document.errorType&&(c=b.document.errorType),a.consumerBiLogger.fatal(BIErrorCodes.DSPublishStoryFailed,"Error publishing story "+c);var d=a.documentServicesMediator.getDsSaveErros();return _.get(b,["document","errorType"])===d.SAVE_PUBLISH_DISABLED_ON_SERVER?(delete a.storyServices.waitsForSave,a.consumerDialogs.showDialog(ConsumerDialogTypes.DS_SAVE_PUBLISH_DISABLED_ON_SERVER_POPUP)):409===b.status||"CONCURRENT_SAVE_ERROR"===_.get(b,["document","errorType"])?a.consumerDialogs.showDialog(ConsumerDialogTypes.STORY_CONFLICTING_CHANGES_POPUP):a.consumerDialogs.showDialog(ConsumerDialogTypes.PUBLISH_FAILED_POPUP).then(function(){return a.publishConsumerStory()})})},a.prototype.getPublicUrl=function(){return this.previewService.getPublicUrl()},a.prototype.getUsername=function(){return this.previewService.getUsername()},a.prototype.getSiteName=function(){return this.previewService.getSiteName()},a.prototype.validateSiteName=function(a){return this.previewService.validateSiteName(a)},a.prototype.isSitePublished=function(){return this.previewService.isSitePublished()},a.prototype.isDomainConnected=function(){return this.previewService.isDomainConnected()},a.prototype.isPremium=function(){return this.previewService.isPremium()},Object.defineProperty(a.prototype,"freeDomain",{get:function(){return this.previewService.getFreeDomain()},enumerable:!0,configurable:!0}),a.prototype.isDomainConnectedInXMLResponse=function(b){var c=angular.element(b).find("domainName");if(_.isEmpty(c))return!1;var d=angular.element(b).find("checkStatus").text();return _.parseInt(d)===a.DomainConnectedSuccessCode},a.prototype.getPublishedSiteDomain=function(b){var c=angular.element(b).find("domainName").text();return _.isEmpty(c)||_.includes(c,a.UrlPrefix)||(c=a.UrlPrefix+c),_.isEmpty(c)?null:c},a.prototype.isSitePremiumInXMLResponse=function(a){return!_.isEmpty(angular.element(a).find("cycle"))},a}();PublishService.NoPremiumScreenIndex=0,PublishService.PromoteScreenIndex=2,PublishService.CongratsScreens=["one-action","three-actions-social","three-actions-promote"],PublishService.DomainConnectedSuccessCode=0,PublishService.UrlPrefix="https://",PublishService.PremiumStateApiUrl="//www.wix.com/_api/wix/getDocPremiumState2?siteGuid=",angular.module("siteGeneratorStaticsConsumerAppInternal").service("publishService",PublishService);var PubSub;!function(a){a.events={SWITCH_MODE:"SWITCH_MODE",CONTENT_UPDATED:"CONTENT_UPDATED",LIST_ITEMS_UPDATED:"LIST_ITEMS_UPDATED",NEW_STATE_STORY_WAS_SET:"NEW_STATE_STORY_WAS_SET",BLINK_FIELD:"BLINK_FIELD",BEFORE_CAPTURE_OPERATION:"BEFORE_CAPTURE_OPERATION",MEDIA_TYPE_CHANGE:"MEDIA_TYPE_CHANGE",OVERLAY_BACKDROP_CLICK:"OVERLAY_BACKDROP_CLICK",FIELD_TOGGLED:"FIELD_TOGGLED",LINK_OF_FIELD_UPDATED:"LINK_OF_FIELD_UPDATED",SECTION_DELETED:"SECTION_DELETED",SECTION_ADDED:"SECTION_ADDED",SECTION_DUPLICATED:"SECTION_DUPLICATED",SECTION_MOVED:"SECTION_MOVED",PAGE_DELETED:"PAGE_DELETED",PAGE_SHOWN:"PAGE_SHOWN",PAGE_HIDDEN:"PAGE_HIDDEN",PAGE_DUPLICATED:"PAGE_DUPLICATED",LIST_ITEM_ADDED_OR_SHOWN:"LIST_ITEM_ADDED_OR_SHOWN",LIST_ITEM_DELETED_OR_HIDDEN:"LIST_ITEM_DELETED_OR_HIDDEN",CREATED_PAGE_FROM_ITEM:"CREATED_PAGE_FROM_ITEM",MEDIA_CHANGED_BY_SYSTEM:"MEDIA_CHANGED_BY_SYSTEM",SOCIAL_LINKS_UPDATED:"SOCIAL_LINKS_UPDATED",PUBLISH:"PUBLISH",SMART_ASSIST_ISSUES_CLOSED:"SMART_ASSIST_ISSUES_CLOSED",SMART_ASSIST_ISSUES_MUTED:"SMART_ASSIST_ISSUES_MUTED"};var b=function(){function a(){this.listeners={}}return a.prototype.fire=function(a,b){this.listeners[a]&&this.listeners[a].forEach(function(a){return a(b)})},a.prototype.subscribe=function(a,b){var c=this;return this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(b),function(){var d=c.listeners[a].indexOf(b);-1!==d&&c.listeners[a].splice(d,1)}},a.prototype.subscribeOnce=function(a,b){var c,d=function(a){return c(),b(a)};return c=this.subscribe(a,d)},a}();a.PubSubService=b,angular.module("siteGeneratorStaticsConsumerAppInternal").service("pubSub",b)}(PubSub||(PubSub={}));var MobilePreview=function(){function a(a,b,c){this.$element=a,this.viewerScrollController=b,this.documentServicesMediator=c,this.scrollbarWidth=this.viewerScrollController.getScrollbarWidth()}return a.$inject=["$element","viewerScrollController","documentServicesMediator"],a.prototype.getPreviewUrl=function(){return this.previewUrl||"aaa"},a.prototype.$postLink=function(){var a=this,b=this.$element.find("iframe")[0];b.onload=function(){var c=b.contentWindow,d=c.setInterval(function(){try{a.documentServicesMediator.navigateToPageByPageId(a.page),a.documentServicesMediator.changeEditMode("preview"),a.documentServicesMediator.setComponentViewMode("preview"),c.clearInterval(d)}catch(a){_.noop(a)}},10)}},a.prototype.getWidthWithScrollbar=function(){return{width:320+this.scrollbarWidth}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("mobilePreview",{templateUrl:"views/preview/mobile-preview.html",controller:MobilePreview,bindings:{previewUrl:"@",page:"@"}});var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},PresetHelpers=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G){var H=this;if(this.defaultsService=a,this.layoutSolver=b,this.simpleSolutionManager=c,this.solutionFetcher=d,this.mobileSolutionManager=e,this.$q=f,this.modelTree=g,this.layoutPresetHelperService=h,this.MediaPreferences=i,this.storyServices=j,this.applicationState=k,this.flags=l,this.$window=m,this.FeatureList=n,this.PageFeatureList=o,this.prettyAlgoRules=p,this.$injector=q,this.clusters=r,this.LayoutUtils=s,this.overlayManager=t,this.prettyAlgoRuleEngine=u,this.sectionBackgroundService=v,this.mediaOverride=w,this.patternService=x,this.solutionManager=y,this.sitePartTypes=z,this.designKit=A,this.layoutSelectionStoreProvider=B,this.presetPreviewFlagUtils=C,this.tpaService=D,this.themeChooser=E,this.Solution=F,this.slideShowService=G,this.flags.debug&&this.flags.prettyAlgo){var I=this.$injector.get("prettyAlgoDX");I.init().then(function(){return I.getRulesFromDB()}).then(function(a){H.prettyAlgoRules=a,console.log("loaded rules from firebase",a)})}}return a.$inject=["defaultsService","layoutSolver","simpleSolutionManager","solutionFetcher","mobileSolutionManager","$q","modelTree","layoutPresetHelperService","MediaPreferences","storyServices","applicationState","flags","$window","FeatureList","PageFeatureList","prettyAlgoRules","$injector","clusters","LayoutUtils","overlayManager","prettyAlgoRuleEngine","sectionBackgroundService","mediaOverride","patternService","solutionManager","sitePartTypes","designKit","layoutSelectionStoreProvider","presetPreviewFlagUtils","tpaService","themeChooser","Solution","slideShowService"],a.prototype.isHomePage=function(){return this.storyServices.story.selectedPage===this.modelTree.homePageId},a.prototype.setConvertedPresetBg=function(a,b){this.flags.sectionMedia&&(a.preset.convertedPreset&&this.setImageBg(a,a.node,b),a.preset.convertedHeaderPreset&&this.setImageBg(a,a.node.children[0],b,"header"))},a.prototype.getPresetGroups=function(a,b,c){var d=[b.data.groups[0]];if(c)switch(a.contentElementType){case"ListHeader":d=[b.data.groups[0]];break;case"ListFooter":return void(d=[]);default:d=_.filter(b.data.groups,function(a){return!a.isHeader&&!a.isFooter})}return _.any(_.get(d&&d[0],["columns","singleColumnProps"]),function(a){return"image"===a.backgroundMode})||["image","imageOrColor"].indexOf(_.get(d&&d[0],["columns","backgroundMode"]))>-1?[]:d},a.prototype.changePreset=function(a,b,c){b.preset=ob.deepClone(b.preset);var d=this.getPresetGroups(a,b.preset,c);this.mediaOverride.changeC2CtoFullWidth(b.preset.data,d),_.each(d,function(a){_.each(a.layouts,function(a){var b=_.get(a.selections,["overrides","strips"]);_.each(b,function(a){_.each(a,function(a){a.strip&&(a.strip.paddingTop=40,a.strip.paddingBottom=40)})})})}),"ListHeader"===a.contentElementType?b.preset.convertedHeaderPreset=!0:b.preset.convertedPreset=!0},a.prototype.turnMediaOffForConvertedPreset=function(a,b){var c=this.getMediaFieldName(a);"ListHeader"===a.contentElementType?b.preset.convertedHeaderPreset&&(a.argsMatchingPolicy[c]=!1):b.preset.convertedPreset&&(a.argsMatchingPolicy[c]=!1)},a.prototype.convertPartialPreset=function(a,b){return b.preset.data.isList||0!==b.preset.data.groups[0].id.indexOf("Partial lg ")||(b.preset.convertedPreset=!0,this.turnMediaOffForConvertedPreset(a,b)),!0},a.prototype.convertAllOnMediaCoast2CoastPreset=function(a,b,c,d){void 0===d&&(d=!1);var e=_.get(this.getPresetGroups(a,b.preset,c),[0,"layouts",0]);if(!e)return!0;if(1===e.cluster)return e.mediaType===PresetMediaTypes.COAST2COAST&&this.changePreset(a,b,c),this.turnMediaOffForConvertedPreset(a,b),!0;if(!_.any(a.argsMatchingPolicy))return!0;var f=this.LayoutUtils.transformStructureToStringArray(e,e.structure),g=this.LayoutUtils.transformStructureToStringArray(e,e.onMediaStructure),h=e.argsSignature.split("#"),i=a.contentElement.calculateUnwantedArgs(),j=h.filter(function(a){return i.find(function(b){return b===a})});if(1===this.clusters.calculateFallBackClusterAndStructure(f,g,j).cluster&&e.mediaType===PresetMediaTypes.COAST2COAST){if(d){var k=_.intersection(_.flatten(f),j);if(k.length>0){var l=_.find(_.keys(a.contentElement.values),function(b){return a.contentElement.values[b].signature===k[0]});l&&(a.argsMatchingPolicy[l]=!0)}}return!1}return!0},a.prototype.fillArgsMatchingPolicy=function(a,b,c,d,e){var f=this.getOptimalFieldMasksArray(b.preset,a,d);f.length<=c&&(c=f.length-1);var g=f[c];if(a.contentElement.calculateWantedArgs(),_.each(a.contentElement.values,function(b,c){a.argsMatchingPolicy[c]=g.indexOf(b.signature)>-1}),this.flags.socialsMask){var h=a.contentElement.getReferenceFields();_.each(h,function(a,b){a&&-1===g.indexOf(b)&&(h[b]=!1)}),a.contentElement.setReferenceFields(h)}this.flags.sectionMedia&&e&&this.convertAllOnMediaCoast2CoastPreset(a,b,d,!0),a.contentElement.getNonBlankFields(),_.any(a.argsMatchingPolicy)||this.modelTree.updateNodeVisibility(a,d,!1)},a.prototype.getOptimalFieldMasksArray=function(a,b,c){var d=a.data.isList?"items":"single",e=b.contentElementType;"ListHeader"===b.contentElementType?(d="header",e=c.contentElementType):"ListFooter"===b.contentElementType&&(d="footer",e=c.contentElementType);var f=this.layoutPresetHelperService.getPresetPropertyValue(a,"fieldMasks",e,d),g=this.isHomePage();return f=_.sortBy(f,function(a){return 1===a.length&&-1===a[0]?0:g?a.length:-a.length})},a.prototype.getMediaFieldName=function(a){return a.isList()?{item:this.getItemMediaFieldName(_.first(this.modelTree.getListItems(a))),header:this.getItemMediaFieldName(this.modelTree.getListHeader(a))}:this.getItemMediaFieldName(a)},a.prototype.getItemMediaFieldName=function(a){var b;return _.each(a.contentElement.values,function(a,c){"media"===a.type&&(b=c)}),b},a.prototype.getBgColorOption=function(){return{mediaType:"color"}},a.prototype.getBgOptions=function(a){this.applicationState.isPagePrettyRulesActive&&(a.image=this.removeImagesAlreadyOnPage(a.image));var b=[this.getBgColorOption()],c=a.image||[];return c.splice(0,0,this.getBgColorOption()),{bgOptions:a,bgForPresetWithContent:b,bgForPresetWithContentLength:b.length,bgForPresetWithoutContent:c,bgForPresetWithoutContentLength:c.length}},a.prototype.removeImagesAlreadyOnPage=function(a){var b=_(this.PageFeatureList.getImageList(this.storyServices.story.selectedPage)).filter(function(a){return"image"===a.mediaType}).collect(function(a){return a.relativeUri}).unique().value();return _.filter(a,function(a){return-1===b.indexOf(a.relativeUri)})},a.prototype.getSectionBgOptions=function(a){return a.isList()?{headerBg:this.getBgOptions(this.sectionBackgroundService.getBackgroundOptions(a,"header")),bg:this.getBgOptions(this.sectionBackgroundService.getBackgroundOptions(a))}:this.getBgOptions(this.sectionBackgroundService.getBackgroundOptions(a))},a.prototype.setImageBg=function(a,b,c,d){void 0===d&&(d="body");var e=this.sectionBackgroundService.getBackgroundOptions(b,d),f=e.image[c%e.image.length];"header"===d?a.headerBg=f:a.bg=f},a.prototype.isShapePreset=function(a,b){var c;if(a.isListItem){var d=_.filter(b.data.groups,function(a){return!a.isHeader&&!a.isFooter});c=_.first(d).layouts[0].mediaType}else c=b.data.groups[0].layouts[0].mediaType;return c===PresetMediaTypes.SHAPE},a.prototype.getNodeBg=function(a,b,c,d,e,f){return void 0===f&&(f=!1),this.hasContentMedia(a,b,c)||f?d.bgForPresetWithContent[e%d.bgForPresetWithContentLength]:d.bgForPresetWithoutContent[e%d.bgForPresetWithoutContentLength]},a.prototype.hasContentMedia=function(a,b,c){return a.argsMatchingPolicy[c]&&!this.isShapePreset(a,b)},a.prototype.setSectionBackground=function(a,b,c,d){if(a.node.isList()){var e=this.modelTree.getListHeader(a.node),f=void 0,g=this.hasContentMedia(e,a.preset,b.header),h=void 0;if(g||c%2!=0||(f=this.getNodeBg(e,a.preset,b.header,d.headerBg,c),_.isEqual(this.getBgColorOption(),f)||(h=this.getBgColorOption())),!h){var i=_.first(this.modelTree.getListItems(a.node)),j=0===_.filter(a.preset.data.groups,function(a){return a.layouts.length>1}).length;h=this.getNodeBg(i,a.preset,b.item,d.bg,c,j)}a.bg=h,_.eq(h,f)||(a.headerBg=f)}else a.bg=this.getNodeBg(a.node,a.preset,b,d,c)},a.prototype.isMediaOnMedia=function(a,b,c){var d,e=this.sectionBackgroundService.getBackground(a),f=e&&"color"!==e.mediaType&&"pattern"!==e.mediaType;if(a.isList()){var g=this.modelTree.getListHeader(a),h=_.first(this.modelTree.getListItems(a));d=this.hasContentMedia(h,b,c.item);var i=this.sectionBackgroundService.getBackground(a,"header"),j=this.hasContentMedia(g,b,c.header),k=i&&"color"!==i.mediaType&&"pattern"!==i.mediaType;return d&&f||j&&k}return(d=this.hasContentMedia(a,b,c))&&f},a.prototype.generateFlattenedListOfPreviewsForTpa=function(a,b){_.first(b)||(b=[{}]);var c=[],d=this.flags.invertTpaPalette&&this.isDarkTpaBackground(a);return _.each(b,function(b){c.push({node:a,preset:b,isInverted:d,isTpa:!0})}),this.flags.debug&&0===c.length&&c.push({node:a,preset:null,isInverted:d,isTpa:!0}),c},a.prototype.getLgStripColorByNode=function(a){var b=this.simpleSolutionManager.getSectionSolution(a.containerPageId,a.id);return b&&b[0]&&b[0].getLgData().strip.color},a.prototype.isDarkTpaBackground=function(a){var b=this.getLgStripColorByNode(a);return a.containerPageId&&b?b===this.designKit.darkColorsSantaFormat[0]:this.themeChooser.coloration.isActiveKitColorationModeIsDark()},a.prototype.orderPresetsByPrettyAlgo=function(a,b){var c=this,d=a.map(function(a){return new c.FeatureList(a)}),e=new this.FeatureList(b),f=this.prettyAlgoRuleEngine.getScores(this.prettyAlgoRules,e,d),g=a.map(function(a,b){return __assign({},a,f[b],{features:d[b]})}).sort(function(a,b){return b.score-a.score});return console.log("pa - NUMBER OF PRESETS",g.length),g},a.prototype.getWantedArgsSignature=function(a){if(a.isList()){var b=this.modelTree.getListHeader(a),c=this.modelTree.getListFooter(a),d=_.first(this.modelTree.getListItems(a));return _.map([b,d,c],function(a){return a&&a.contentElement.getWantedArgs(!1,!0)||""}).join("#")}return a.contentElement.getWantedArgs(!1,!0)},a.prototype.calculateSolution=function(a,b){var c=this,d="|"+a.node.id+"|"+this.getWantedArgsSignature(a.node);return this.layoutSolver.createLayoutPresetPreviewSolutions([a.preset],a.node,a.isClone,d,a.node.preferredMedia).then(function(b){if(b.length>0){var d=b[0];return d.sourcePageName=a.sourcePageName,d.sourceName=a.sourceName,d.prettyAlgo={score:a.score,rules:a.rules,features:a.features},a.bg&&(d.previewNode.isList()&&c.sectionBackgroundService.setBackground(d.previewNode,a.headerBg,"header",d.solution),c.sectionBackgroundService.setBackground(d.previewNode,a.bg,"body",d.solution)),a.flags&&(d.flags=a.flags),c.slideShowService.setIsSlideShow(d.dummyPageId,d.node.id,c.isSlideShow(d)),c.$q.when(d)}return c.$q.reject("Could not find any solution to this preset")})},a.prototype.isSlideShow=function(a){return this.flags.listItemSlideShow&&_(a.flags).includes("slideShowPreset")},a.prototype.generateColorOptions=function(a){var b=this,c=a.isList()&&!this.modelTree.getListHeader(a).isUserHidden(),d=this.solutionFetcher.getSectionSolution(a.containerPageId,a.id),e=this.designKit.getConfigurationOfLg(d[0]),f=_.sortBy(this.sectionBackgroundService.getUniqueConfigurationsOfActiveKit(),function(a){return a.id!==e.id});return a.isTpa||a.isTpaWidget?_(f).filter(function(a){return"D1"===a.display||"L1"===a.display}).map(function(c){return{node:a,confId:c.id,isTpa:!0,isInverted:"D1"===c.display,preset:b.tpaService.getTpaPreset(a)}}).flatten().value():_(f).map(function(b){return c?_.map(f,function(c){return{node:a,headerConfId:b.id,confId:c.id}}):{node:a,confId:b.id}}).flatten().value()},a.prototype.createColorOptionSolution=function(a){var b=this,c=a.confId,d=a.headerConfId,e="layoutPresetPreview_switchColor_"+c+"_"+(d||0);return this.simpleSolutionManager.duplicateSectionForPreview(a.node,e).then(function(a){return b.designKit.setSpecificConfigurationForSectionByConfId(a.solution,c,d),b.preparePresetPreviewForRender(b.sitePartTypes.BODY,a),a})},a.prototype.preparePresetPreviewForRender=function(a,b){this.solutionManager.preparePresetPreviewForRender(a,b)},a.prototype.createCurrentSectionPreview=function(a,b){var c=this,d=this.layoutSelectionStoreProvider.cloneLayoutSelectionStoreForPresetPreview();this.applicationState.isInMobileEditMode()&&(b=this.mobileSolutionManager.getMobileSolution(b));var e,f=_.map(b,function(a){var b=ob.deepClone(a.getLgData());if(a.isMobile()){var c=_.get(a.getDesktopLG().getLgData(),["strip","color"]);c&&_.set(b,["strip","color"],c)}return b});this.flags.mergedHeader&&(e=this.presetPreviewFlagUtils.getPreviewFlagsByNode(a,!1)||[]);var g={prettyAlgo:void 0,node:a,preset:void 0,solution:b,previewNode:a,lss:d,selections:this.designKit.getSectionSelections(b),dummyPageId:this.storyServices.story.selectedPage,stripData:[],stripSizes:[],lgDataArray:f,flags:e},h=_.map(g.solution,function(a){return c.solutionManager.hasStripOnLE(a)});return this.solutionManager.mergeDecorativeStrips(g.solution,g.lgDataArray,h,g.stripData,g.stripSizes),g},a}();angular.module("siteGeneratorBuilderInternal").service("presetHelpers",PresetHelpers);var PresetPreviewGenerator=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){this.presetHelpers=a,this.modelTree=b,this.applicationState=c,this.mediaOverrideManager=d,this.sitePartTypes=e,this.storyServices=f,this.PageFeatureList=g,this.overlayManager=h,this.$injector=i,this.flags=j,this.presetSettingsService=k,this.sectionBackgroundService=l}return a.$inject=["presetHelpers","modelTree","applicationState","mediaOverrideManager","sitePartTypes","storyServices","PageFeatureList","overlayManager","$injector","flags","presetSettingsService","sectionBackgroundService"],a.prototype.createPreviewsFromExistingNodes=function(a,b,c){var d=this;if(c)return a.sort(function(a){return a.containerPageName?0:1}).map(function(a){return{node:d.modelTree.duplicateNodeAndContentElementForPresetPreview(a),sourcePageName:a.containerPageName,sourceName:a.containerSourceName,isClone:!0,staticRoundRobin:!0}});var e=_.first(a);return b.map(function(a){var b=d.modelTree.duplicateNodeAndContentElementForPresetPreview(e);return d.flags.presetSettings?d.presetSettingsService.applyPresetSettings(b,a,!1,void 0,!0):d.presetHelpers.fillArgsMatchingPolicy(b,a,a.maskIndex),{node:b,preset:a.preset,sourcePageName:null,sourceName:null,isClone:!0}})},a.prototype.createPreviewsFromDrafts=function(a,b,c){var d=this;return b.map(function(b,e){var f=(e+c)%a.length,g=d.modelTree.duplicateNodeAndContentElementForPresetPreview(a[f]);d.$injector.get("wizWebsite").isConvertingSite()?g.isList()&&(d.modelTree.updateNodeVisibility(g.children[0],g,!0),d.modelTree.updateNodeVisibility(_.last(g.children),g,!0)):g.isList()?g.children.forEach(function(a){d.flags.presetSettings?d.presetSettingsService.applyPresetSettings(a,b,!0,g):d.presetHelpers.fillArgsMatchingPolicy(a,b,b.maskIndex,g,!0)}):d.flags.presetSettings?d.presetSettingsService.applyPresetSettings(g,b,!0):d.presetHelpers.fillArgsMatchingPolicy(g,b,b.maskIndex,void 0,!0);var h={node:g,preset:b.preset,sourcePageName:null,sourceName:null,isClone:!0};return d.presetHelpers.setConvertedPresetBg(h,Math.floor(e/a.length)),h})},Object.defineProperty(a.prototype,"isAddMode",{get:function(){return this.applicationState.isAddMode()},enumerable:!0,configurable:!0}),a.prototype.hasBgAndColumn=function(a){var b=this.mediaOverrideManager.getAllowedMediaOverride(a);return this.sectionBackgroundService.getBackground(a).mediaType!==core.BgMediaTypes.COLOR&&b===PresetMediaTypes.COLUMNBG},a.prototype.createPreviewCombination=function(a,b,c,d,e,f,g){var h=this;void 0===g&&(g=!0);var i=this.modelTree.duplicateNodeAndContentElementForPresetPreview(a);if(f)if(i.isList()){var j=this.modelTree.getListItems(i)[0],k=e.item;j.argsMatchingPolicy[k]=!j.argsMatchingPolicy[k]}else i.argsMatchingPolicy[e]=!i.argsMatchingPolicy[e];var l={node:i,preset:b.preset,fitMode:b.fitMode,sourcePageName:null,sourceName:null,isClone:!0},m=!1;return m=l.node.isList()?_.every(l.node.children,function(a){return h.presetHelpers.convertAllOnMediaCoast2CoastPreset(a,l,l.node)}):this.presetHelpers.convertAllOnMediaCoast2CoastPreset(l.node,l)&&this.presetHelpers.convertPartialPreset(l.node,l),m?((g||this.presetHelpers.isMediaOnMedia(i,b.preset,e))&&this.presetHelpers.setSectionBackground(l,e,Math.floor(c/d),this.presetHelpers.getSectionBgOptions(i)),this.presetHelpers.setConvertedPresetBg(l,Math.floor(c/d)),l):null},a.prototype.createPreviewBgPermutations=function(a,b){var c=this,d=[],e=a.length;return _.each(a,function(a){var f=c.presetHelpers.getMediaFieldName(a);_.each(b,function(b,g){if(!c.hasBgAndColumn(a)){var h=c.createPreviewCombination(a,b,g,e,f,!1,!(g<4));h&&d.push(h)}}),_.each(b,function(b,g){var h=c.createPreviewCombination(a,b,g,e,f,!0,!(g<4));h&&d.push(h)})}),d},a.prototype.generateNewPreviews=function(a,b,c){var d=a.filter(function(a){return a.isDraft}),e=d.length,f=[];if(this.flags.presetSettings&&(b=ob.deepClone(b)),0===c){var g=a.filter(function(a){return!a.isDraft});f=f.concat(this.createPreviewsFromExistingNodes(g,b,e>0))}if(e>0)f=f.concat(this.createPreviewsFromDrafts(d,b,c));else{var g=a.filter(function(a){return!a.isDraft});g&&c>0&&"Contact"===g[0].contentElementType&&(f=f.concat(this.createPreviewsFromExistingNodes(g,b,!1)))}return f},a.prototype.generateAlternativePreviews=function(a,b){return b.map(function(b){return a.map(function(a){return{node:a,preset:b.preset,sourcePageName:null,sourceName:null,isClone:!1,fitMode:b.fitMode}})}).reduce(function(a,b){return a.concat(b)},[])},a.prototype.generateAlternativePreviewsWithBg=function(a,b){return this.createPreviewBgPermutations(a,b)},a}();angular.module("siteGeneratorBuilderInternal").service("presetPreviewGenerator",PresetPreviewGenerator);var PresetPreviewSorter=function(){function a(a,b,c,d,e){this.flags=a,this.presetHelpers=b,this.applicationState=c,this.$window=d,this.defaultsService=e}return a.$inject=["flags","presetHelpers","applicationState","$window","defaultsService"],a.prototype.sort=function(a,b){return this.flags.prettyAlgo||this.flags.noRandomForAutomationTests?this.fakeSort(a,b):this.rectangleSort(a,b)},Object.defineProperty(a.prototype,"isAddMode",{get:function(){return this.applicationState.isAddMode()},enumerable:!0,configurable:!0}),a.prototype.fakeSort=function(a,b){return this.flags.presetSettings?a.map(function(a){return{preset:a}}).concat(a.map(function(a){return{preset:a}})):a.map(function(a){return{preset:a,maskIndex:0}}).concat(a.map(function(a){return{preset:a,maskIndex:1}}))},a.prototype.rectangleSort=function(a,b){var c=this;this.printPrioritiesDebug(a,b);var d=[];if(this.flags.presetSettings)_.each(a,function(a){var e=c.defaultsService.getPriority(a,b),f=e%10;d[f]=d[f]||[],d[f].push({preset:a,priority:e})}),d=_.flatten(_.zip(d));else{var e=10;if(_.each(a,function(a){var f=c.defaultsService.getPriority(a,b);f<10&&(f+=e++);var g=Math.floor(f/10),h=f%10;d[h]||(d[h]=[]),d[h][g]={preset:a,maskIndex:0}}),this.isAddMode){var f=a[0];this.presetHelpers.getOptimalFieldMasksArray(f,b).length>1&&(d=d.concat(_.map(d,function(a){if(a)return _.map(a,function(a){if(a)return{preset:a.preset,maskIndex:1}})})))}}var g=this.applicationState.generateRandomOffset(b.getContentElementType(),d.length);return g>0&&this.insertArray(d,d.splice(0,g)),_.filter(_.flatten(d),function(a){return a})},a.prototype.insertArray=function(a,b){Array.prototype.splice.apply(a,[a.length,0].concat(b))},a.prototype.printPrioritiesDebug=function(a,b){var c=this;if(this.flags.debugMode){var d=_(a).filter(function(a){return a.data.priority}).groupBy(function(a){return a.data.priority[b.contentElementType]}).value(),e=_.map(a,function(a){return a.id});this.$window.console.log("%cPreset Priorities: "+_.keys(d),"color:green"),_.each(d,function(a,d){a.length>1&&c.$window.console.log("%cDuplication of Priority ["+b.contentElementType+"] ["+d+"] Preset IDs: "+_.map(a,function(a){return a.id}),"color:red")}),this.$window.console.log("%cPreset IDs: "+e,"color:green")}},a}();angular.module("siteGeneratorBuilderInternal").service("presetPreviewSorter",PresetPreviewSorter);var HeaderPresetUtils=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){this.modelTree=a,this.storyServices=b,this.mergedHeaderService=c,this.mergedHeaderMergeableChecker=d,this.fixedHeaderService=e,this.presetPreviewFlagUtils=f,this.layoutSelectionStoreProvider=g,this.themeChooser=h,this.sectionManager=i,this.applicationState=j,this.flags=k,this.designKit=l,this.$q=m}return a.$inject=["modelTree","storyServices","mergedHeaderService","mergedHeaderMergeableChecker","fixedHeaderService","presetPreviewFlagUtils","layoutSelectionStoreProvider","themeChooser","sectionManager","applicationState","flags","designKit","$q"],a.prototype.setHeaderMerged=function(a,b){var c=this;return this.setHeaderDark(a).then(function(d){return c.mergedHeaderService.setHeaderMerged(a,b).then(function(){return d})})},a.prototype.setHeaderDark=function(a){return a&&!this.designKit.isHeaderDark()?this.setHeaderBg("D1").then(function(){return!0}):this.$q.when(!1)},a.prototype.isHeaderNode=function(a){return a&&"GeneralDescription"===a.contentElementType&&"footer"!==a.containerPageId},a.prototype.currentPageHasSections=function(){var a=this.modelTree.getNodeById(this.storyServices.story.selectedPage);return a&&a.children.length>1},a.prototype.decorateHeaderPreviews=function(a){var b=this;return a.map(function(a){return a.flags=b.presetPreviewFlagUtils.decorateHeaderPreview(a.flags),a})},a.prototype.clonePreviewWithoutFlags=function(a){var b={};return a.lss&&(b.lss=angular.copy(a.lss)),Object.assign(b,_.omit(a,["flags","lss"]))},a.prototype.getAllHeaderModes=function(a,b,c){void 0===c&&(c=!1);var d=a.flags||["none"],e=["fix","none"];return b&&(c&&!this.flags.mergedHeaderPhase2?this.mergedHeaderService.isHeaderMerged()&&(e=["mergeHeader"]):e.push("mergeHeader")),_.difference(e,d)},a.prototype.generateHeaderPreviews=function(a,b,c){var d=this;void 0===c&&(c=!1);var e=this.getAllHeaderModes(a,b,c).map(function(b){return"none"===b?d.clonePreviewWithoutFlags(a):Object.assign({},a,{flags:[b]})}).concat(a);return c&&this.mergedHeaderService.isHeaderMerged()&&(e=_.filter(e,function(a){return _.contains(a.flags,"mergeHeader")})),e},a.prototype.setFromCurrentPreset=function(a,b){return b.map(function(b){return b.flags=a,b})},a.prototype.permutateHeaderPreviews=function(a,b){var c=this,d=this.applicationState.isInMobileEditMode();if(this.flags.mergedHeaderPhase2&&d)return this.setFromCurrentPreset(b,a);var e=this.mergedHeaderService.isHeaderMergeable(void 0,{validateHeaderSolution:!1,validateIsFixed:!1},d);return a.map(function(a){return c.generateHeaderPreviews(a,e,d)}).reduce(function(a,b){return a.concat(b)},[])},a.prototype.addHeaderPreviews=function(a,b,c){if(this.isHeaderNode(b)&&this.currentPageHasSections()){var d=this.permutateHeaderPreviews(a,c);return this.decorateHeaderPreviews(d)}return a},a.prototype.normalizeHeaderPreview=function(a){this.sectionManager.setConfigurationForSection(a)},a.prototype.isHeaderSolutionMergeable=function(a){return this.flags.mergedHeaderPhase2?this.mergedHeaderMergeableChecker.isHeaderSolutionMergeable(a):this.mergedHeaderService.isHeaderSolutionMergeable(a)},a.prototype.isValidHeaderPreview=function(a){
return!(_.includes(a.flags,"mergeHeader")&&!this.isHeaderSolutionMergeable(a.solution))&&!(_.includes(a.flags,"fix")&&!this.fixedHeaderService.isHeaderSolutionFixable(a.solution))},a.prototype.updateLssProperty=function(a,b){var c=this.layoutSelectionStoreProvider.getLayoutSelectionStore();_.set(c.siteOverrides,a,b)},a.prototype.setHeaderBg=function(a){var b=this;return this.updateLssProperty("headerBackground",a),this.$q.when().then(function(){return b.themeChooser.updateHeaderBg()})},a.prototype.getHeaderAvailableBackgroundColors=function(){return _.unique(this.themeChooser.coloration.getColorsForCurrentColoration(),function(a){return a.hex.toUpperCase()})},a}();angular.module("siteGeneratorBuilderInternal").service("headerPresetUtils",HeaderPresetUtils);var SlideShowPresetUtils=function(){function a(a,b,c,d,e,f,g,h,i){this.modelTree=a,this.storyServices=b,this.mergedHeaderService=c,this.layoutSelectionStoreProvider=d,this.mediaOverrideManager=e,this.sectionBackgroundService=f,this.flags=g,this.slideShowService=h,this.themeChooser=i}return a.$inject=["modelTree","storyServices","mergedHeaderService","layoutSelectionStoreProvider","mediaOverrideManager","sectionBackgroundService","flags","slideShowService","themeChooser"],a.prototype.getSlideShowPresetType=function(a){return a.data.properties&&a.data.properties.slideShow},Object.defineProperty(a.prototype,"supportedContentTypes",{get:function(){return["Testimonial","Event","News","Project","Feature","TeamMember","Service","Product","Project"]},enumerable:!0,configurable:!0}),a.prototype.isNodeSupportSlideShow=function(a){return _.any(a.children)&&a.children[0].isListItem&&this.supportedContentTypes.indexOf(a.contentElementType)>=0&&"color"===this.sectionBackgroundService.getBackground(a).mediaType&&!("Gallery"===this.getSelectedMediaTypeForSlideShow(a))},a.prototype.getSelectedMediaTypeForSlideShow=function(a){var b=this.slideShowService.childrenExceptHeaderAndFooter(a);return this.mediaOverrideManager.getCurrentSelectedMediaTypeLabel(b[0])},a.prototype.isPresetSupportSlideShow=function(a){return this.getSlideShowPresetType(a)===core.SlideShowValues.Only},a.prototype.addSlideShowPresetFlag=function(a){a.flags=a.flags||[],a.flags.push(SlideShowService.SLIDE_SHOW_PRESET)},a.prototype.permutateSlideShowPreview=function(a){return this.addSlideShowPresetFlag(a),[a]},a.prototype.debugSlideShowPreset=function(a){return this.flags.debugSlideShow&&a.flags&&a.flags.indexOf("slideShowPreset")>-1},a.prototype.addSlideShowPreviews=function(a){var b=this;return _.map(a,function(a){var c=a.preset;return c&&b.isPresetSupportSlideShow(c)?b.permutateSlideShowPreview(a):a}),a.reduce(function(a,b){return a.concat(b)},[])},a}();angular.module("siteGeneratorBuilderInternal").service("slideShowPresetUtils",SlideShowPresetUtils);var PresetPreviewFlagUtils=function(){function a(a,b,c,d){this.layoutSelectionStoreProvider=a,this.mergedHeaderService=b,this.applicationState=c,this.flags=d}return a.$inject=["layoutSelectionStoreProvider","mergedHeaderService","applicationState","flags"],a.prototype.isHeaderNode=function(a){return a&&"GeneralDescription"===a.contentElementType&&"footer"!==a.containerPageId},a.prototype.getPreviewFlagsByNode=function(a,b){return this.isHeaderNode(a)?this.getCurrentPageHeaderFlags(b):void 0},a.prototype.getCurrentPageHeaderFlags=function(a){var b=[];return this.applicationState.isInMobileEditMode()&&!this.flags.mergedHeaderPhase2||this.layoutSelectionStoreProvider.getLayoutSelectionStore().getFixedHeader()&&b.push("fix"),this.mergedHeaderService.isHeaderMerged()&&b.push("mergeHeader"),a&&this.decorateHeaderPreview(b),b.length?b:void 0},a.prototype.decorateHeaderPreview=function(a){return a?a.push("limitLastPresetHeight"):a=["limitLastPresetHeight"],a},a}();angular.module("siteGeneratorBuilderInternal").service("presetPreviewFlagUtils",PresetPreviewFlagUtils);var PresetSettingsService=function(){function a(a,b,c,d){this.flags=a,this.modelTree=b,this.presetHelpers=c,this.lssModifier=d}return a.$inject=["flags","modelTree","presetHelpers","lssModifier"],a.prototype.applyFieldMask=function(a,b,c,d,e){if(a.contentElement.calculateWantedArgs(),_.each(a.contentElement.values,function(b,d){a.argsMatchingPolicy[d]=c.indexOf(b.signature)>-1}),this.flags.socialsMask){var f=a.contentElement.getReferenceFields();_.each(f,function(a,b){a&&-1===c.indexOf(b)&&(f[b]=!1)}),a.contentElement.setReferenceFields(f)}this.flags.sectionMedia&&e&&(d&&!a.isListHeader()||this.presetHelpers.convertAllOnMediaCoast2CoastPreset(a,b,d,!0),d||this.presetHelpers.convertPartialPreset(a,b)),a.contentElement.getNonBlankFields(),_.any(a.argsMatchingPolicy)||(this.flags.coreEmptyLe?a.userHidden=a.isListHeader()||a.isListFooter():this.modelTree.updateNodeVisibility(a,d,!1))},a.prototype.getPartKey=function(a,b){var c=a.preset.data.isList?core.SettingsPart.items:core.SettingsPart.single;return"ListHeader"===b?c=core.SettingsPart.header:"ListFooter"===b&&(c=core.SettingsPart.footer),c},a.prototype.getSettingPerPart=function(a,b,c){var d=this.getAllSettingsPerPart(a,c);if(c!==core.SettingsPart.header&&c!==core.SettingsPart.footer||(b%=d.length),d.length-1>=b)return d[b]},a.prototype.getAllSettingsPerPart=function(a,b){var c=a[b],d=this.presetHelpers.isHomePage();return _.filter(c,function(a){return a.usage===core.SettingsUsage.all||(d?a.usage===core.SettingsUsage.homePage:a.usage===core.SettingsUsage.innerPage)})},a.prototype.filterPresetsBySettings=function(a,b,c){var d=this;return a=_.map(a,function(a){return a.settings=d.getSetting(a,b[0].contentElementType,c,b[0].isList()),a}),_.filter(a,function(a){return!!a.settings})},a.prototype.splitPresetsBySettings=function(a,b){var c=this;if(a[0].preset.data.isList){var d=[],e=b[0],f=_.filter(e.children,function(a){return!a.isListHeader()&&!a.isListFooter()&&!a.userHidden}).length,g=e.getContentElementType();return _.each(a,function(a){var b=a.preset.data.properties.settings;if(b){var e=b[g]||b.all,h=c.getAllSettingsPerPart(e,core.SettingsPart.items),i=_.filter(h,function(a){return f%a.itemsPerRow==0});i=_.uniq(i,function(a){return a.itemsPerRow}),_.each(i,function(b){var e=ob.deepClone(a);c.lssModifier.adjustPresetNumOfItemsInRow(e.preset,b.itemsPerRow),d.push(e)})}}),d}return a},a.prototype.getSetting=function(a,b,c,d){var e=a.preset.data.properties.settings;if(e){var f=e[b]||e.all,g={};if(d?(g[core.SettingsPart.header]=this.getSettingPerPart(f,c,core.SettingsPart.header),g[core.SettingsPart.items]=this.getSettingPerPart(f,c,core.SettingsPart.items),g[core.SettingsPart.footer]=this.getSettingPerPart(f,c,core.SettingsPart.footer)):g[core.SettingsPart.single]=this.getSettingPerPart(f,c,core.SettingsPart.single),g[core.SettingsPart.single]||g[core.SettingsPart.items])return g}},a.prototype.applyPresetSettings=function(a,b,c,d,e){var f=this.getPartKey(b,a.contentElementType),g=b.settings[f];if(this.applyFieldMask(a,b,g.fieldMask,d,c),a.isListHeader()||a.isListFooter()||(this.lssModifier.changePresetTextAlign(a.contentElement,b.preset,g.textAlignment),this.lssModifier.changePresetOnMediaPosition(a.contentElement,b.preset,g.boxPositionOnMedia)),this.lssModifier.changePresetPartialLg(b.preset,g.contentColumnPosition),!e&&g.itemsPerRow&&d){var h=this.modelTree.getListItems(d),i=g.itemsPerRow*g.numberOfRows,j=h.length-i;j>0&&d.children.splice(d.children.indexOf(h[i]),j),this.lssModifier.adjustPresetNumOfItemsInRow(b.preset,g.itemsPerRow)}},a}();angular.module("siteGeneratorBuilderInternal").service("presetSettingsService",PresetSettingsService);var builder;!function(a){var b=function(){function a(a,b,c,d){this.presetFeatureDetector=a,this.presetListItemFeatureDetector=b,this.mediaOverride=c,this.lssModifier=d}return a.$inject=["presetFeatureDetector","presetListItemFeatureDetector","mediaOverride","lssModifier"],a.prototype.isPresetConvertible=function(a,b,c){var d=this.getFeatureDetector(b);return c?this.isFitModeWorthy(d,{preset:a}):this.isImagePreview({preset:a},d)},a.prototype.isFitModeWorthy=function(a,b){var c=function(){return a.getMediaTypeOverride(b)===PresetMediaTypes.SHAPE},d=function(){return a.getMediaTypeOverride(b)===PresetMediaTypes.COLUMNBG},e=function(){var c=a.getStyleOverride(b);return c&&"wp3"===c.media};return this.isImagePreview(b,a)&&!c()&&!e()&&!a.isListZigZag(b)&&!d()},a.prototype.isImagePreview=function(a,b){var c=b.getMediaPreferredOverride(a);return!c||c.name===MediaOverrideManager.MO_IMAGE||c.name===MediaOverrideManager.MO_SLIDESHOW||c.name===MediaOverrideManager.MO_VIDEO},a.prototype.convertPreset=function(a,b,c){var d=this;a=ob.deepClone(a);var e=ob.deepClone(this.mediaOverride.default),f=this.getFeatureDetector(b),g={node:b,preset:a},h=f.getOrCreateMediaPreferredOverride(g,e),i=c?"full":"fill";if(h.name="Image",h.superType="media",h.type="media",h.sourceProperties.imageScaling=i,h.properties.displayMode=i,b.isList()){var j=a.data.groups.filter(function(a){return!a.isHeader&&!a.isFooter}),k=j[0].layouts[0].selections.overrides.media;j.forEach(function(a){a.layouts.forEach(function(a){a.selections.overrides.media=k})})}return 1===f.getNumberOfColumns(g)&&(b.isList()?b.children.filter(function(a){return!a.isListHeader()&&!a.isListFooter()}).forEach(function(b){d.lssModifier.changePresetTextAlign(b.contentElement,a,"center")}):this.lssModifier.changePresetTextAlign(b.contentElement,a,"center")),a},a.prototype.getFeatureDetector=function(a){return a.isList()?this.presetListItemFeatureDetector:this.presetFeatureDetector},a}();a.FitModePresetConverter=b,angular.module("siteGeneratorBuilderInternal").service("fitModePresetConverter",a.FitModePresetConverter)}(builder||(builder={}));var builder;!function(a){var b=function(){function b(a,b,c,d,e,f){this.presetFeatureDetector=a,this.sitePartTypes=b,this.overlayManager=c,this.fitModePresetConverter=d,this.flags=e,this.presetHelpers=f}return b.$inject=["presetFeatureDetector","sitePartTypes","overlayManager","fitModePresetConverter","flags","presetHelpers"],b.prototype.create=function(b){return{mode:a.PresetsStrategyMode.Change,isBackgroundSupported:function(){return!1},filterPresets:b?this.onlyFitModePresets.bind(this):this.onlyImagePresets.bind(this),orderPresets:this.orderPresetsByCluster.bind(this),preCalculate:b?this.setFitMode.bind(this):this.setUnFitMode.bind(this)}},b.prototype.createInterleaving=function(){var b=this;return{mode:a.PresetsStrategyMode.Change,isBackgroundSupported:function(){return b.flags.sectionMedia},filterPresets:null,orderPresets:this.orderPresetsByChunks.bind(this),preCalculate:this.interleaveFitMode.bind(this)}},b.prototype.onlyFitModePresets=function(a,b){var c=this;return a.filter(function(a){return c.fitModePresetConverter.isPresetConvertible(a,b[0],!0)})},b.prototype.onlyImagePresets=function(a,b){var c=this;return a.filter(function(a){return c.fitModePresetConverter.isPresetConvertible(a,b[0],!1)})},b.prototype.orderPresetsByChunks=function(a,b){var c=this,d=this.getRelevantNode(b[0]),e=function(a){return a.map(function(a){var e=c.getRelevantLayout(a,b[0]),f=c.presetFeatureDetector.enhanceWithRealStructure({},e,d).cluster;return{preset:a,fitMode:c.fitModePresetConverter.isPresetConvertible(a,b[0],!0),cluster:f}})},f=this.overlayManager.listSpanManager.getSegmentByNodeId(d.id,this.sitePartTypes.BODY),g=f.getLE().cluster,h=function(a,b){return a.cluster===g?-1:b.cluster===g?1:0},i=e(a),j=i.filter(function(a){return a.fitMode}).sort(h),k=i.map(function(a){var b=ob.deepClone(a);return b.fitMode=!1,b});return j.concat(k)},b.prototype.orderPresetsByCluster=function(a,b){var c=this,d=this.getRelevantNode(b[0]),e=a.map(function(a){var e=c.getRelevantLayout(a,b[0]);return{preset:a,cluster:c.presetFeatureDetector.enhanceWithRealStructure({},e,d).cluster}}),f=this.overlayManager.listSpanManager.getSegmentByNodeId(d.id,this.sitePartTypes.BODY),g=f.getLE().cluster,h=function(a,b){return a.cluster===g?-1:b.cluster===g?1:19===a.cluster||21===a.cluster?-1:19===b.cluster||21===b.cluster?1:0};return e.sort(h)},b.prototype.getRelevantNode=function(a){return a.isList()?a.children[1]:a},b.prototype.getRelevantLayout=function(a,b){if(b.isList()){return a.data.groups.find(function(a){return!a.isHeader&&!a.isFooter}).layouts[0]}return a.data.groups[0].layouts[0]},b.prototype.interleaveFitMode=function(a,b){return this.setDisplayMode(a,a.fitMode)},b.prototype.setFitMode=function(a){return this.setDisplayMode(a,!0)},b.prototype.setUnFitMode=function(a){return this.setDisplayMode(a,!1)},b.prototype.switchMediaToInline=function(a){var b=this.presetHelpers.getMediaFieldName(a.node);a.node.argsMatchingPolicy[b]=!0,a.bg=this.presetHelpers.getBgColorOption()},b.prototype.setDisplayMode=function(a,b){return b&&this.switchMediaToInline(a),a.preset=this.fitModePresetConverter.convertPreset(a.preset,a.node,b),a},b}();a.FitModePresetsStrategyOptions=b}(builder||(builder={})),angular.module("siteGeneratorBuilderInternal").service("fitModePresetsStrategyOptions",builder.FitModePresetsStrategyOptions);var builder;!function(a){var b=function(){function a(a,b,c,d,e,f){this.presetHelpers=a,this.designKit=b,this.$p=c,this.backgroundMediaOpacity=d,this.flags=e,this.slideShowService=f,this.hashMap={}}return a.prototype.generateListOfPreviews=function(a){return this.$p.when(this.presetHelpers.generateColorOptions(a[0]))},a.prototype.generateNextChunkOfPreviews=function(a){return[]},a.prototype.calculatePresetPreview=function(a){return this.presetHelpers.createColorOptionSolution(a)},a.prototype.isUnique=function(a){var b=this.getPresetVisualSignature(a);return this.hashMap[b]||(this.hashMap[b]=a),this.hashMap[b]===a},a.prototype.getPresetVisualSignature=function(a){var b=this;return this.flags.listItemSlideShow&&this.slideShowService.isSlideShow(a.node)&&(a.flags=a.flags||[],-1===a.flags.indexOf("slideShowPreset")&&a.flags.push("slideShowPreset")),_.each(a.solution,function(c,d){var e=a.stripData[d];e&&e.mediaItems&&(c.hasNonTransparentBackground=1===b.backgroundMediaOpacity.getBackgroundOpacity(c,e.color,e.mediaType,e.mediaItems))}),this.designKit.getColorSignature(a.solution,a.previewNode)},a.prototype.shouldLoadPreviousOnScroll=function(){return!1},a}();a.ColoredPresetsStrategy=b}(builder||(builder={}));var builder;!function(a){var b=function(){function b(a,b,c,d){this.strategyOptions=a,this.defaultsService=b,this.presetHelpers=c,this.$p=d}return b.prototype.generateListOfPreviews=function(b){var c=this,d=this.strategyOptions.mode===a.PresetsStrategyMode.Add;return this.defaultsService.getPresetsForNode(b[0],void 0,d).then(function(a){return c.presetHelpers.generateFlattenedListOfPreviewsForTpa(b[0],a)})},b.prototype.generateNextChunkOfPreviews=function(a){return[]},b.prototype.calculatePresetPreview=function(a){return this.$p.when(a)},b.prototype.isUnique=function(a){return!0},b.prototype.getPresetVisualSignature=function(a){return""},b.prototype.shouldLoadPreviousOnScroll=function(){return!1},b}();a.TpaPresetsStrategy=b}(builder||(builder={}));var builder;!function(a){var b=function(){function b(b,c,d,e,f,g,h,i,j,k,l){this.strategyOptions=b,this.defaultsService=c,this.applicationState=d,this.presetHelpers=e,this.presetPreviewGenerator=f,this.$window=g,this.$q=h,this.mobileSectionValidator=i,this.flags=j,this.sitePartTypes=k,this.presetSettingsService=l,this.chunkIndex=0,this.maxChunks=0,this.staticIndex=0,this.hashMap={};var m=this.applicationState.getContentFocus();this.sitePart=m&&m.sitePart,this.ceType=this.strategyOptions.mode===a.PresetsStrategyMode.Change&&this.sitePart===this.sitePartTypes.HEADER?"SiteHeader":null}return b.prototype.generateListOfPreviews=function(a){var b=this;return this.getPresets(a).then(function(c){var d=b.filterPresets(c,a),e=b.orderPresets(d,a);return b.generatePreviewsFromPresets(a,e)})},b.prototype.generateNextChunkOfPreviews=function(b){return this.strategyOptions.mode===a.PresetsStrategyMode.Add&&this.chunkIndex<this.maxChunks?(this.flags.presetSettings&&(this.presets=this.presetSettingsService.filterPresetsBySettings(this.presets,b,this.chunkIndex)),this.presetPreviewGenerator.generateNewPreviews(b,this.presets,this.chunkIndex++)):[]},b.prototype.calculatePresetPreview=function(a,b){var c=this;return this.tryOverrideNextPreset(a),a=this.preCalculate(a,b),this.presetHelpers.calculateSolution(a,this.sitePart).then(function(b){return c.validateMobileSolution(a,b)}).then(function(b){return c.tryUpdateNextOverridePreset(a),b},function(d){return c.flags.debugMode&&c.$window.console.log("%cCannot create solution for preset/node\nPreset ID: "+a.preset.id+"\nReason: "+d,"color:red"),c.tryNextPreset(a,b)})},b.prototype.isUnique=function(b){if(this.strategyOptions.mode===a.PresetsStrategyMode.Add)return!0;var c=this.getPresetVisualSignature(b);return this.hashMap[c]||(this.hashMap[c]=b),this.hashMap[c]===b},b.prototype.shouldLoadPreviousOnScroll=function(){return!0},b.prototype.getPresetVisualSignature=function(a){var b=this;return[_.map(a.solution,function(a){return[a.id,a.selectedHeightMutation,b.getColumnsVisualSignature(a),_.get(a.getLgData(),["menuStrip","enable"])||!1,"["+_.map(a.segments,function(a){var c=a.getLENoError();return c&&[c.id,b.getLEVisualSignature(c)].join("$")}).join(",")+"]"].join("$")}).join("\n"),this.flags.mergedHeader&&a.flags?a.flags.join("$"):null].filter(function(a){return!!a}).join("$")},b.prototype.getPresets=function(b){var c=this,d=this.strategyOptions.mode===a.PresetsStrategyMode.Add,e=b[0].isList();return this.flags.allPresets?this.defaultsService.getAllLayoutPresets(!1,this.flags.consumerMode?this.ceType:void 0).then(function(a){return a.filter(function(a){return e===a.data.isList&&c.applicationState.isInMobileEditMode()===Boolean(a.data.isMobile)&&-1===a.data.forContent.indexOf("SiteHeader")&&-1===a.data.forContent.indexOf("GeneralDescription")})}):this.defaultsService.getPresetsForNode(b[0],this.ceType,d,this.applicationState.isInMobileEditMode(),this.flags.presetSettings&&!this.applicationState.isInMobileEditMode())},b.prototype.filterPresets=function(a,b){return this.strategyOptions&&this.strategyOptions.filterPresets?this.strategyOptions.filterPresets(a,b):a},b.prototype.orderPresets=function(a,b){return!this.flags.allPresets&&this.strategyOptions&&this.strategyOptions.orderPresets?this.strategyOptions.orderPresets(a,b):a.map(function(a){return{preset:a,maskIndex:0}})},b.prototype.generatePreviewsFromPresets=function(b,c){return this.presets=c,this.tryJust1Preset(),this.strategyOptions.mode===a.PresetsStrategyMode.Add?(this.maxChunks=this.flags.presetSettings?core.maxPresetsIterations:b.filter(function(a){return a.isDraft}).length,this.flags.presetSettings&&(this.presets=this.presetSettingsService.filterPresetsBySettings(this.presets,b,this.chunkIndex)),this.presetPreviewGenerator.generateNewPreviews(b,this.presets,this.chunkIndex++)):(this.flags.presetSettings&&!this.applicationState.isInMobileEditMode()&&(this.presets=this.presetSettingsService.splitPresetsBySettings(this.presets,b)),this.strategyOptions.isBackgroundSupported()&&!this.applicationState.isInMobileEditMode()&&this.flags.sectionMedia&&this.sitePart===this.sitePartTypes.BODY?this.presetPreviewGenerator.generateAlternativePreviewsWithBg(b,this.presets):this.presetPreviewGenerator.generateAlternativePreviews(b,this.presets))},b.prototype.preCalculate=function(a,b){return this.strategyOptions&&this.strategyOptions.preCalculate?this.strategyOptions.preCalculate(a,b):a},b.prototype.validateMobileSolution=function(a,b){return b.preset.data.isMobile&&!this.mobileSectionValidator.validateMobileSolution(b.solution,this.sitePart,a.node.containerPageId,a.node.id)?this.$q.reject("Mobile solution does not fit desktop solution"):b},b.prototype.tryOverrideNextPreset=function(a){a.staticRoundRobin&&(void 0===a.staticStartIndex&&(a.staticStartIndex=this.staticIndex),a.preset=this.presets[this.staticIndex].preset)},b.prototype.tryUpdateNextOverridePreset=function(a){a.staticRoundRobin&&(this.staticIndex=(this.staticIndex+1)%this.presets.length)},b.prototype.tryNextPreset=function(a,b){return a.staticRoundRobin&&(this.staticIndex=(this.staticIndex+1)%this.presets.length,a.staticStartIndex!==this.staticIndex)?this.calculatePresetPreview(a,b):null},b.prototype.getColumnsVisualSignature=function(a){var b=a.getColumnsData();return!(!b||!b.enable||a.isMobile())&&[b.colSplit,b.rowSplit,b.fullWidth,b.spacing,b.margin,b.split].join(",")},b.prototype.getLEVisualSignature=function(a){var b=[],c=a.getLayoutSelectionStore();return a.recurseLayouts(function(d){var e;if(a.isMediaType(d)){var f=a.overrides&&a.overrides.media&&a.overrides.media[d.argIndex];e=f&&f.name||d.type}else switch(d.type){case"menu":e=[!c||c.menuOverridesManager.stretchButtons(),c?c.menuOverridesManager.alignment():"center"].join("|");case"text":e=a.getAlignment(d,"align")}e&&b.push(e)}),b.join("$")},b.prototype.tryJust1Preset=function(){var a=this;if(this.flags.debugMode&&this.$window.justThisPresetId){var b=_.find(this.presets,function(b){return b.preset.id===a.$window.justThisPresetId});b&&(this.presets=[b])}},b.prototype.preparePreset=function(a,b,c,d){var e=this;return a.then(function(a){return _.find(a,function(a){return a.id===b&&!(d&&!a.data.isMobile)})}).then(function(a){return e.generatePreviewsFromPresets([c],[{preset:a}])}).then(function(a){return e.calculatePresetPreview(a[0],1)})},b}();a.GenericPresetsStrategy=b}(builder||(builder={}));var builder;!function(a){var b;!function(a){a[a.Generic=0]="Generic",a[a.Tpa=1]="Tpa",a[a.Color=2]="Color",a[a.FitMode=3]="FitMode",a[a.UnFitMode=4]="UnFitMode",a[a.InterleaveFitMode=5]="InterleaveFitMode"}(b=a.PresetsStrategyType||(a.PresetsStrategyType={}));!function(a){a[a.Add=0]="Add",a[a.Change=1]="Change"}(a.PresetsStrategyMode||(a.PresetsStrategyMode={}));var c=function(){function c(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){this.flags=a,this.designKit=b,this.backgroundMediaOpacity=c,this.applicationState=d,this.defaultsService=e,this.presetHelpers=f,this.presetPreviewSorter=g,this.presetPreviewGenerator=h,this.mobileSectionValidator=i,this.fitModePresetsStrategyOptions=j,this.mediaOverrideManager=k,this.sitePartTypes=l,this.$p=m,this.slideShowService=n,this.$q=o,this.$window=p,this.presetSettingsService=q}return c.$inject=["flags","designKit","backgroundMediaOpacity","applicationState","defaultsService","presetHelpers","presetPreviewSorter","presetPreviewGenerator","mobileSectionValidator","fitModePresetsStrategyOptions","mediaOverrideManager","sitePartTypes","$p","slideShowService","$q","$window","presetSettingsService"],c.prototype.createFromNode=function(b,c){if(this.flags.imageFitMode&&"blank"!==b.id&&this.mediaOverrideManager.isFitMode(b))return this.create(a.PresetsStrategyType.InterleaveFitMode,c);var d=b.isTpaNode&&b.isTpaNode(),e=d?a.PresetsStrategyType.Tpa:a.PresetsStrategyType.Generic;return this.create(e,c)},c.prototype.create=function(a,c){switch(a){case b.Generic:return this.createGenericStrategyFromMode(c);case b.Tpa:return this.createTPAStrategy(c);case b.Color:return this.createColorStrategy();case b.FitMode:return this.createGenericStrategy(this.fitModePresetsStrategyOptions.create(!0));case b.UnFitMode:return this.createGenericStrategy(this.fitModePresetsStrategyOptions.create(!1));case b.InterleaveFitMode:return this.createGenericStrategy(this.fitModePresetsStrategyOptions.createInterleaving())}return null},c.prototype.createGenericStrategyFromMode=function(a){var b=this,c={mode:a,isBackgroundSupported:function(){return!0},orderPresets:function(a,c){return b.presetPreviewSorter.sort(a,c[0])}};return this.createGenericStrategy(c)},c.prototype.createGenericStrategy=function(b){return void 0===b&&(b=null),new a.GenericPresetsStrategy(b,this.defaultsService,this.applicationState,this.presetHelpers,this.presetPreviewGenerator,this.$window,this.$q,this.mobileSectionValidator,this.flags,this.sitePartTypes,this.presetSettingsService)},c.prototype.createTPAStrategy=function(b){var c={mode:b,isBackgroundSupported:function(){return!1}};return new a.TpaPresetsStrategy(c,this.defaultsService,this.presetHelpers,this.$p)},c.prototype.createColorStrategy=function(){return new a.ColoredPresetsStrategy(this.presetHelpers,this.designKit,this.$p,this.backgroundMediaOpacity,this.flags,this.slideShowService)},c}();a.PresetsStrategyFactory=c}(builder||(builder={})),angular.module("siteGeneratorBuilderInternal").service("presetsStrategyFactory",builder.PresetsStrategyFactory);var LogoExtractionPopupService=function(){function a(a,b,c){var d=this;this.flags=a,this.$timeout=b,this.$window=c,this.showIt=!1,this.$window.addEventListener("mousedown",function(a){!d.showIt&&!d.timeout||$(a.target).parents().andSelf().is("logo-extraction-popup")||d.hideLogoPopup()})}return a.$inject=["flags","$timeout","$window"],a.prototype.shouldShowPopup=function(){return this.showIt},a.prototype.showLogoPopup=function(a,b,c,d){var e=this;this.hideLogoPopup(),this.timeout=this.$timeout(function(){e.getLogoColoration=c,e.origin=a,e.anchorSelector=b,e.showIt=!0},d),this.timeout.then(function(){e.getLogoColoration()})},a.prototype.hideLogoPopup=function(){this.origin=null,this.anchorSelector=null,this.showIt=!1,this.timeout&&(this.$timeout.cancel(this.timeout),this.timeout=null)},a.prototype.getAnchorSelector=function(){return this.anchorSelector},a.prototype.getOrigin=function(){return this.origin},a}();angular.module("siteGeneratorBuilderInternal").service("logoExtractionPopupService",LogoExtractionPopupService);var builder;!function(a){var b=function(){function a(a){this.modelTree=a}return a.$inject=["modelTree"],a.prototype.getLogoURL=function(){var a=this.modelTree.getGeneralInformation(),b=_.get(a.contentElement.getFieldValue("Logo"),"value[0]");return b&&LogoColorService.getResizedWixImageURL(b)},a.prototype.isLogoVisible=function(){return!0},a}();a.BuilderLogoPersistence=b,angular.module("siteGeneratorBuilderInternal").service("builderLogoPersistence",b)}(builder||(builder={}));var Checkpoint=function(){function a(a,b,c,d,e,f,g){void 0===b&&(b=!0),void 0===c&&(c=!1),void 0===d&&(d=!1),void 0===e&&(e=null),void 0===f&&(f=!1),void 0===g&&(g=!1),this.story=a,this.refresh=b,this.setTheme=c,this.forceDsSave=d,this.revision=e,this.saveWithDs=f,this.mobileEditor=g}return a}(),UndoRedo=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){var m=this;this.undoStateManager=a,this.$timeout=b,this.obMonitoring=c,this.autoSaveNotifier=d,this.$location=e,this.consumerBiLogger=f,this.applicationState=g,this.pagesManager=h,this.$window=i,this.$translate=j,this.pubSub=k,this.flags=l,this.ongoingSave={shouldSetTheme:!1,shouldDsSave:!1,reset:function(){m.ongoingSave.shouldSetTheme=!1,m.ongoingSave.shouldDsSave=!1}},this.maxInMemorySavedStories=10,this.maxOperationsPerSave=5,this.maxTimeBetweenSavesInMilliSeconds=this.flags.dsSaveEveryAutoSave?1e4:5e3,this.maxTimeBetweenRevisionSaves=3e5,this.normalAutoSave={maxOperationsPerSave:5,maxTimeBetweenSavesInMilliSeconds:this.flags.dsSaveEveryAutoSave?1e4:5e3,maxTimeBetweenRevisionSaves:3e5},this.slowAutoSave={maxOperationsPerSave:1e4,maxTimeBetweenSavesInMilliSeconds:6e7,maxTimeBetweenRevisionSaves:6e7},this.maxStorySavesPerRevisionSave=10,this.undoCheckpoints=[],this.redoCheckpoints=[],this.timeoutPromise=null,this.timeoutPromiseForRevisions=null,this.unsavedRevisions=0,this.regularAutoSaveCount=0,this.canUndo=function(){return m.undoCheckpoints.length>0},this.canRedo=function(){return m.redoCheckpoints.length>0},this.captureInitialState=function(){return m.updateCurrentState()},this.setStoryDebounced=_.debounce(this.setStory,1e3),_.has(e.search(),"delayAutoSave")&&this.delayAutoSave()}return a.$inject=["undoStateManager","$timeout","obMonitoring","autoSaveNotifier","$location","consumerBiLogger","applicationState","pagesManager","$window","$translate","pubSub","flags"],a.prototype.captureOperation=function(a,b,c,d){void 0===a&&(a=!0),void 0===b&&(b=!1),void 0===c&&(c=!1),void 0===d&&(d=!1),this.obMonitoring.mark({name:"captureOperation"}),this.flags.mergedHeader&&this.pubSub.fire(PubSub.events.BEFORE_CAPTURE_OPERATION);var e=this.applicationState.isInMobileEditMode();this.currentState.refresh=a||e,this.currentState.forceDsSave=c,this.currentState.saveWithDs=d,this.currentState.setTheme=b,this.currentState.mobileEditor=e,this.undoCheckpoints.push(this.currentState),this.redoCheckpoints=[],this.updateCurrentState(d),this.maintainUndoListSize(),this.handleAutoSave(),this.obMonitoring.measure({name:"captureOperation"})},a.prototype.undo=function(a){void 0===a&&(a=!1),this.canUndo()&&this.undoOrRedo("undo",a,this.undoCheckpoints,this.redoCheckpoints)},a.prototype.redo=function(a){void 0===a&&(a=!1),this.canRedo()&&this.undoOrRedo("redo",a,this.redoCheckpoints,this.undoCheckpoints)},a.prototype.setSupportMode=function(){this.disableAutoSave(),this.delayAutoSave()},a.prototype.disableAutoSave=function(){this.cancelAllTimeouts(!0)},a.prototype.enableAutoSave=function(){this.handleAutoSave()},a.prototype.reloadAndResetToLatest=function(){var a=this;return this.undoStateManager.loadStoryRevision(void 0,!0,!0).then(function(){return a.resetState()})},a.prototype.resetState=function(){this.updateCurrentState()},a.prototype.updateCurrentState=function(a,b){void 0===a&&(a=!1),this.currentState=new Checkpoint(this.undoStateManager.getCurrentStory(),!0,!1,!1,null,a||this.currentState&&this.currentState.saveWithDs,!(!this.currentState||!this.currentState.mobileEditor)),b&&_.extend(this.currentState,b)},a.prototype.undoOrRedo=function(a,b,c,d){this.consumerBiLogger.builder.undoRedoLastChange(a);var e=c.pop(),f=this.currentState;d.push(this.currentState),this.currentState=e,this.ongoingSave.shouldSetTheme=this.ongoingSave.shouldSetTheme||f.setTheme||e.setTheme,this.ongoingSave.shouldDsSave=this.ongoingSave.shouldDsSave||f.forceDsSave||e.forceDsSave,b?this.setStoryDebounced(a,e):this.setStory(a,e)},a.prototype.setStory=function(b,c){var d=this;this.obMonitoring.mark({name:b}),this.updateStoryToNewState(c,b).then(function(){d.handleAutoSave(d.ongoingSave.shouldDsSave),d.ongoingSave.reset(),d.updateCurrentState(!1,_.pick(c,a.PROPERTIES)),d.obMonitoring.measure({name:b}),d.consumerBiLogger.builder.undoRedoSucces(b)}).then(function(){d.pubSub.fire(PubSub.events.NEW_STATE_STORY_WAS_SET)}).catch(function(a){return d.consumerBiLogger.err(BIErrorCodes.UndoRedoFailed,a?JSON.stringify(a):"Unable to undo/redo")})},a.prototype.updateStoryToNewState=function(a,b){return a.story?this.undoStateManager.setStory(a.story,a.refresh,this.ongoingSave.shouldSetTheme,a.mobileEditor):this.loadStoryRevision(b,a)},a.prototype.loadStoryRevision=function(a,b){var c=this;return this.consumerBiLogger.builder.undoRedoLastChangeFetchFromServer(a),this.undoStateManager.loadStoryRevision(b.revision,b.refresh,b.setTheme,b.mobileEditor).then(function(){return c.consumerBiLogger.builder.undoRedoSuccessRetrieveFromServer(a)})},a.prototype.maintainUndoListSize=function(){var a=_.filter(this.undoCheckpoints,function(a){return a&&null!==a.story});a.length>this.maxInMemorySavedStories&&(a[0].story=null),this.undoCheckpoints=this.undoCheckpoints.filter(function(a){return a&&(null!==a.story||null!==a.revision)})},a.prototype.handleAutoSave=function(a){var b=this;void 0===a&&(a=!1),a||this.unsavedRevisions===this.maxOperationsPerSave-1?this.autoSave(a||this.regularAutoSaveCount===this.maxStorySavesPerRevisionSave-1&&!this.flags.dsSaveEveryAutoSave):(this.unsavedRevisions++,this.toggleOnBeforeUnloadWarning(),null===this.timeoutPromise&&(this.timeoutPromise=this.$timeout(function(){return b.autoSave(!1)},this.maxTimeBetweenSavesInMilliSeconds)),this.flags.dsSaveEveryAutoSave||null!==this.timeoutPromiseForRevisions||(this.timeoutPromiseForRevisions=this.$timeout(function(){return b.autoSave(!0)},this.maxTimeBetweenRevisionSaves)))},a.prototype.toggleOnBeforeUnloadWarning=function(){var a=this;this.flags.lessBeforeUnloadWarnings&&(this.unsavedRevisions>0?this.$window.onbeforeunload=this.$window.onbeforeunload||function(){return a.$translate.instant("general.leave-note")}:this.$window.onbeforeunload=null)},
a.prototype.autoSave=function(a){var b=this;if(this.obMonitoring.mark({name:"autoSave"}),(this.flags.dsSaveEveryAutoSave||a)&&this.applicationState.isOnAddState())return void this.cancelAllTimeouts(a);var c=this.currentState,d=a||this.currentState.saveWithDs,e=this.currentState.saveWithDs||!!this.flags.mobileEditor,f=this.undoStateManager.saveStory(d,this.currentState.story,e).then(function(a){return c.revision=a}).then(function(){if(b.toggleOnBeforeUnloadWarning(),d&&!b.flags.dsSaveEveryAutoSave)return b.pagesManager.goToSelectedPage()});return this.currentState.saveWithDs=!1,this.autoSaveNotifier.onSave(f),this.cancelAllTimeouts(a),this.unsavedRevisions=0,a?this.regularAutoSaveCount=0:this.regularAutoSaveCount++,f.then(function(){return b.obMonitoring.measure({name:"autoSave",data:{shouldSaveRevision:a}})}),f},a.prototype.manualSave=function(){return this.autoSave(!0)},a.prototype.cancelAllTimeouts=function(a){this.timeoutPromise&&(this.$timeout.cancel(this.timeoutPromise),this.timeoutPromise=null),this.timeoutPromiseForRevisions&&a&&(this.$timeout.cancel(this.timeoutPromiseForRevisions),this.timeoutPromiseForRevisions=null)},a.prototype.delayAutoSave=function(){_.assign(this,this.slowAutoSave)},a.prototype.setSlowAutoSave=function(a){void 0===a&&(a=!1),_.assign(this,a?this.slowAutoSave:this.normalAutoSave)},a.prototype.onStartWelcomeTour=function(){this.setSlowAutoSave(!0)},a.prototype.onEndWelcomeTour=function(){var a=this;this.setSlowAutoSave(!1),this.autoSave(!0).then(function(){return a.undoStateManager.markAsMajorRevision()}),this.undoCheckpoints.length=0},a}();UndoRedo.PROPERTIES=["refresh","forceDsSave","setTheme","revision","saveWithDs"],angular.module("siteGeneratorBuilderInternal").service("undoRedo",UndoRedo);var UndoEvents=function(){function a(){}return a}();UndoEvents.STORY_REVISION_CHANGED="storyRevisionChanged";var UndoStateManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){this.$state=a,this.$rootScope=b,this.storyServices=c,this.wizardService=d,this.Story=e,this.flags=f,this.publishService=g,this.layoutSolver=h,this.pagesManager=i,this.consumerDialogs=j,this.applicationState=k,this.themeChooser=l,this.menuService=m,this.spinnerService=n,this.previewService=o,this.consumerBiLogger=p,this.updatePublishReminderTimestamp()}return a.$inject=["$state","$rootScope","storyServices","wizardService","Story","flags","publishService","layoutSolver","pagesManager","consumerDialogs","applicationState","themeChooser","menuService","spinnerService","previewService","consumerBiLogger"],a.prototype.getCurrentStory=function(){return this.storyServices.story.getCurrentState()},a.prototype.setStory=function(a,b,c,d){var e=this;return this.spinnerService.waitForMe("setStory"),b&&(this.applicationState.clearContentFocus(),this.applicationState.goToBuilder()),a.revision=this.storyServices.story.revision,this.storyServices.story.setState(a),this.pagesManager.changeStory().then(function(){return e.pagesManager.goToPage(e.storyServices.story.selectedPage)}).then(function(){e.wizardService.setFixedHeader()}).then(function(){return d?e.layoutSolver.onNodeChanged().then(function(){var a=!0;return e.applicationState.isInMobileEditMode()?e.storyServices.calculateAndRenderDesktopAndMobilePages("current",!1,!1,a):e.applicationState.goToMobilePage(e.storyServices.story.selectedPage,a)}):e.applicationState.isInMobileEditMode()?e.applicationState.disableMobileEditor().then(function(){return e.layoutSolver.onNodeChanged()}):e.layoutSolver.onNodeChanged()}).then(function(){if(c)return e.themeChooser.setStoryStyles(e.storyServices.story,!0)}).then(function(){e.$rootScope.$broadcast(UndoEvents.STORY_REVISION_CHANGED)}).then(function(){return e.previewService.waitForChanges()}).then(function(){e.menuService.refresh()}).finally(function(){e.spinnerService.imDone("setStory")})},a.prototype.saveStory=function(b,c,d){var e=this;b=b,this.consumerBiLogger.builder.autosaveStart(!1);var f;return f=this.flags.dsSaveEveryAutoSave?this.wizardService.publishStory(void 0,void 0,!0):b?this.wizardService.publishStory(void 0,void 0,d):this.wizardService.saveStory(),f.then(function(){return e.consumerBiLogger.builder.autosaveEnd(),!e.publishService.isSitePublished()&&(b||e.flags.dsSaveEveryAutoSave)&&e.minutesSinceLastPublishReminder>=a.TIME_TO_PUBLISH_REMINDER_INTERVAL&&e.showTimeToPublishPopup(),e.storyServices.story.revision})},a.prototype.markAsMajorRevision=function(){return this.storyServices.story.markAsMajorRevision()},a.prototype.loadStoryRevision=function(a,b,c,d){var e=this;return void 0===d&&(d=!1),this.spinnerService.waitForMe("loadStoryRevision"),this.Story.getStoryDataByVersion(this.storyServices.story.id,a).then(function(a){return a.revision=e.storyServices.story.revision,e.setStory(a,b,c,d)}).finally(function(){e.spinnerService.imDone("loadStoryRevision")})},a.prototype.showTimeToPublishPopup=function(){this.updatePublishReminderTimestamp(),this.consumerDialogs.showDialog(ConsumerDialogTypes.TIME_TO_PUBLISH_POPUP)},Object.defineProperty(a.prototype,"minutesSinceLastPublishReminder",{get:function(){return((new Date).getTime()-this.lastPublishReminderTimestamp)/1e3/60},enumerable:!0,configurable:!0}),a.prototype.updatePublishReminderTimestamp=function(){this.lastPublishReminderTimestamp=(new Date).getTime()},a}();UndoStateManager.TIME_TO_PUBLISH_REMINDER_INTERVAL=50,angular.module("siteGeneratorStaticsConsumerAppInternal").service("undoStateManager",UndoStateManager);var RevisionReloader=function(){function a(a,b,c,d,e){var f=this;this.undoStateManager=a,this.storyManager=b,this.urlStateKeeper=c,this.consumerBiLogger=d,this.$window=e,this.onHashChange=function(){var a=f.urlStateKeeper.getFlag("previewRevision");return void 0===a?void f.consumerBiLogger.restoreBI():(f.consumerBiLogger.pauseBI(),+a!==f.previewRevision?(f.previewRevision=+a,f.undoStateManager.loadStoryRevision(+a,!0,!0)):void 0)}}return a.$inject=["undoStateManager","storyManager","urlStateKeeper","consumerBiLogger","$window"],a.prototype.init=function(){angular.element(this.$window).on("hashchange",this.onHashChange)},a.prototype.reset=function(){angular.element(this.$window).off("hashchange",this.onHashChange)},a}();angular.module("siteGeneratorBuilderInternal").service("revisionReloader",RevisionReloader);var AutoSaveNotifier=function(){function a(a,b,c){this.flags=a,this.consumerDialogs=b,this.assistantManager=c,this.savingState="idle",this.saveRetryTime=null,this.lastSuccessfulSave=null,this.autosaveCounter=0,this.shouldCountAutosaves=!1,this.autosavePopupThreshold=2,a.autosavePopupThreshold&&(this.autosavePopupThreshold=a.autosavePopupThreshold)}return a.$inject=["flags","consumerDialogs","assistantManager"],a.prototype.onSave=function(a){var b=this;this.setState("saving"),a.then(function(){return b.onSaveSuccess()},function(a){return b.onSaveError(a)})},a.prototype.startCountingAutosaves=function(){this.shouldCountAutosaves=!0},a.prototype.onSaveSuccess=function(){this.setState("idle"),this.lastSuccessfulSave=(new Date).getTime(),this.saveRetryTime=null,this.assistantManager.isInActiveTask()||(this.shouldCountAutosaves&&this.autosaveCounter++,this.autosaveCounter===+this.autosavePopupThreshold&&this.consumerDialogs.showDialog(ConsumerDialogTypes.AUTOSAVE_POPUP))},a.prototype.onSaveError=function(a){this.setState("waitingForResave"),this.saveRetryTime=a?a.retryTime:1},a.prototype.setState=function(a){this.savingState=a},a}();angular.module("siteGeneratorBuilderInternal").service("autoSaveNotifier",AutoSaveNotifier);var ConsumerMenu=function(){function a(a,b,c,d,e,f,g,h){this.$p=a,this.flags=b,this.modelTree=c,this.menuService=d,this.layoutSelectionStoreProvider=e,this.previewService=f,this.tpaHeader=g,this.$translate=h}return a.$inject=["$p","flags","modelTree","menuService","layoutSelectionStoreProvider","previewService","tpaHeader","$translate"],a.prototype.nodeHasAnchorMenu=function(a){return!!this.menuService.getLinkToNode(a)},a.prototype.getChildrenWithAnchor=function(a){return _(a).map("children").flatten().filter(this.nodeHasAnchorMenu.bind(this)).value()},a.prototype.getVisiblePageNodes=function(){return _.reject(this.modelTree.getPagesNodes(),function(a){return a.hidePage||a.tpaExtraPage})},a.prototype.addAnchorsToMenu=function(a){var b=this;return _.each(a,function(a){b.menuService.addLinkToNode(a)})},a.prototype.removeAnchorsFromMenu=function(a){var b=this;return _.each(a,function(a){b.menuService.removeLinkToNode(a)})},a.prototype.calcMenuAnchors=function(){var a,b,c,d=this,e=this.modelTree.getPagesNodes(),f=this.getVisiblePageNodes();if(1===f.length){var g=_.first(f),h=_(g.children).reject(_.method("isUserHidden")).value(),i=_(this.layoutSelectionStoreProvider.getLayoutSelectionStore().getSolutionLGs(g.id)).keys().uniq().value(),j=function(a){return 0===a||i.indexOf(h[a].id)<0};if(a=_.reject(h,function(a,b){return d.nodeHasAnchorMenu(a)||j(b)}),b=_.filter(h,function(a,b){return d.nodeHasAnchorMenu(a)&&j(b)}),this.flags.tpaHeader){var k=this.tpaHeader.getTpaHeaderArray(h);if(_.any(k)){var l=this.tpaHeader.getTpaAnchors(k,a,b);a=l.nodesToSetAnchor,b=l.nodesToRemoveAnchor}else _.map(a,function(a){if(a.contentElementType===TPAHeader.TPA_HEADER_CE_TYPE)return a.alias=d.$translate.instant("builder.sections.Tpa_Header"),a})}this.removeAnchorsFromMenu(b),this.addAnchorsToMenu(a),c=this.previewService.waitForChanges().then(function(){_.each(h,function(a,b){b>0&&d.menuService.ensureLinkToNodePosition(a,b+e.length-1)})})}else b=this.getChildrenWithAnchor(e),this.removeAnchorsFromMenu(b),c=this.$p.when();return c},a}();angular.module("siteGeneratorBuilderInternal").service("consumerMenu",ConsumerMenu);var PageOrdering;!function(a){a[a.home=0]="home",a[a.regular=1]="regular",a[a.bookings=2]="bookings",a[a.stores=3]="stores",a[a.blog=4]="blog",a[a.contact=5]="contact"}(PageOrdering||(PageOrdering={}));var SiteBuilderPages=function(){function a(a,b,c,d){this.modelTree=a,this.menuService=b,this.tpaService=c,this.consumerMenu=d}return a.$inject=["modelTree","menuService","tpaService","consumerMenu"],a.prototype.isTpaPage=function(a){return a.tpaExtraPage||a.tpaSection},a.prototype.getTpaType=function(a){return this.tpaService.getNaiveType(a.tpaExtraPage||a.tpaSection)},a.prototype.isContact=function(a){return a.children[1]&&"Contact"===a.children[1].contentElementType},a.prototype.getPageType=function(a){return this.isTpaPage(a)?PageOrdering[this.getTpaType(a).toLowerCase()]:this.isContact(a)?PageOrdering.contact:this.modelTree.isHomePageId(a.id)?PageOrdering.home:PageOrdering.regular},a.prototype.replacePages=function(a,b){return this.getPageOrder(a)-this.getPageOrder(b)},a.prototype.getPageOrder=function(a){var b=this.modelTree.getPageNodeById(a.id),c=this.getPageType(b);return this.isBlogAsHomePage&&c===PageOrdering.blog&&(c=PageOrdering.home),c},a.prototype.sortMenuItems=function(a){this.isBlogAsHomePage=a,this.menuService.menuItems.sort(this.replacePages.bind(this)),this.menuService.refresh(),this.consumerMenu.calcMenuAnchors()},a}();angular.module("siteGeneratorBuilderInternal").service("siteBuilderPages",SiteBuilderPages);var StaticsUrls=function(){function a(a,b,c){this.wixAngularTopology=a,this.$translate=b,this.consumerBiLoggerHelpers=c,this.MEDIA_GALLERY_CSS_URL=this.wixAngularTopology.staticsUrl+"/styles/media-gallery-customize.css"}return a.$inject=["wixAngularTopology","$translate","consumerBiLoggerHelpers"],Object.defineProperty(a.prototype,"mediaGalleryCssUrl",{get:function(){return this.MEDIA_GALLERY_CSS_URL},enumerable:!0,configurable:!0}),a.prototype.getSeoWizUrl=function(a){var b=this.consumerBiLoggerHelpers.getMetaSiteId();return this.$translate.instant("builder.url.seo-wiz",{msid:b,referral:a})},a}();angular.module("siteGeneratorCommon").service("staticsUrls",StaticsUrls);var TPADiscovery=function(){function a(a,b,c,d,e,f,g){var h=this;this.$translate=a,this.applicationParameters=b,this.sitePartTypes=c,this.modelTree=d,this.tpaService=e,this.menuService=f,this.storyServices=g,this.isDirty=!1,this.toTPADictionary=this._toTPADictionary.bind(this),this.deleteUnmanageableTPAs=this._deleteUnmanageableTPAs.bind(this),this.toManageableTPATuple=this._toManageableTPATuple.bind(this),this._manageableTPAs={},this.storyServices.onRenderedPart(function(a,b,c,d,e,f){b===h.sitePartTypes.BODY&&(h.isDirty=!0)})}return a.$inject=["$translate","applicationParameters","sitePartTypes","modelTree","tpaService","menuService","storyServices"],Object.defineProperty(a.prototype,"manageableTPAs",{get:function(){return this.isDirty&&(this.updateAvailableTPAs(),this.isDirty=!1),this._manageableTPAs},enumerable:!0,configurable:!0}),a.prototype.updateAvailableTPAs=function(){this._manageableTPAs=_(this.getAllTPANodes()).mapKeys(this.toTPADictionary).each(this.deleteUnmanageableTPAs).mapValues(this.toManageableTPATuple).value()},a.prototype._toTPADictionary=function(a){return this.tpaService.getNaiveType(a.contentElementType)},a.prototype._deleteUnmanageableTPAs=function(a,b,c){var d=this.applicationParameters.tpaTypes[b];d&&!d.topBarTitle&&delete c[b]},a.prototype._toManageableTPATuple=function(a,b){return{naiveNode:a,menuItem:this.getTpaMenuItem(this.applicationParameters.tpaTypes[b])}},a.prototype.getAllTPANodes=function(){var a=[];return _.each(this.modelTree.getPagesNodes(),function(b){b&&b.children&&(a=b.children.filter(function(a){return!a.userHidden&&a.isTpa||a.isTpaWidget}).concat(a))}),a},a.prototype.getTpaMenuItem=function(a){return{title:this.$translate.instant("builder.manage-tpa",{TPA:a&&a.topBarTitle}),nameAsObject:a&&a.topBarTitle,icon:a&&a.icon}},a}();angular.module("siteGeneratorBuilderInternal").service("tpaDiscovery",TPADiscovery);var ListSpanUtils=function(){function a(){}return a.prototype.ceHasPresets=function(a){return-1===["Stores_Shopping_Cart_Widget","Stores_Thank_You_Widget","Blog_Single_Post_Widget","Events"].indexOf(a)},a}();angular.module("siteGeneratorBuilderInternal").service("listSpanUtils",ListSpanUtils),angular.module("siteGeneratorStaticsConsumerAppInternal").service("tpaPostMessageService",["$window","editorHandlers","tpaPostMessageCommon","applicationState","undoRedo","previewService",function(a,b,c,d,e,f){function g(a){return Boolean(b[a.type])}function h(a){return g(a)?["setValue","removeValue","postMessage","setStyleParam","setExternalId"].indexOf(a)>=0:!_.startsWith(a,"get")&&-1===["closeWindow","isSupported","siteInfo","appIsAlive","registerEventListener","stylesReady"].indexOf(a)}var i=_.debounce(function(){f.waitForChanges().then(function(){e.captureOperation(!0,!1,!1,!0)})},400,{leading:!1,trailing:!0}),j=function(a,c,e){c.compId&&"tpaSettings"!==c.compId||_.merge(c,{compId:d.getSelectedTpaComponentRef().id}),g(c)?b[c.type].call(this,a,c,e):(_.merge(c,{originFrame:"editor"}),a.tpa.handlers(c,e)),h(c.type)&&i()};return{init:function(b){a.addEventListener("message",c.handleTPAMessage.bind(this,b,j),!1)},callHandler:j}}]),angular.module("siteGeneratorStaticsConsumerAppInternal").service("tpaPostMessageCommon",function(){var a={TPA_MESSAGE:"TPA",TPA_MESSAGE2:"TPA2",TPA_RESPONSE:"TPA_RESPONSE",UI_LIB_RESPONSE:"UI_LIB_RESPONSE",PINGPONG_PREFIX:"pingpong:"},b=function(a,b,c){if(!_.isUndefined(a)){var d="";try{d=JSON.stringify(b)}catch(a){return}a.postMessage||(a=a.contentWindow),a.postMessage(d,c||"*")}},c=function(c,d){var e=["openColorPicker","openFontPicker"],f=a.TPA_RESPONSE;return _.includes(e,d.type)&&(f=a.UI_LIB_RESPONSE),function(a){try{b(c,{intent:f,callId:d.callId,type:d.type,res:a,status:!0})}catch(a){}}},d=function(b){return(b.intent===a.TPA_MESSAGE||b.intent===a.TPA_MESSAGE2)&&!e(b)},e=function(a){return"[UNKNOWN]"===a.compId};return{Intents:a,callPostMessage:b,generateResponseFunction:c,isTPAMessage:d,fixOldPingPongMessageType:function(b){return b.replace(a.PINGPONG_PREFIX,"")},handleTPAMessage:function(a,b,e){var f;try{e.data?f=JSON.parse(e.data):e.originalEvent&&e.originalEvent.data&&(e=e.originalEvent,f=JSON.parse(e.data))}catch(a){return}f&&d(f)&&b(a,f,c(e.source,f))}}}),angular.module("siteGeneratorStaticsConsumerAppInternal").service("editorHandlers",["flags","undoRedo","modelTree","CONSUMER_DIALOGS","$log","CcDialogBuilder","tpaSettings","applicationState","tpaStyleService","tpaService","linkEditorCAB","linkBuilder",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){return a.components.data.get(h.getSelectedTpaComponentRef())}function n(a){var b;return c.getPagesNodes().some(function(c){return c.children.some(function(c){if(c.isTpaNode()){if((c.widgetRef||j.getCompRef(c.contentElementType)).id===a)return b=c,!0}})}),b}function o(a,b,c){var d=n(b.compId);c(d?!(!d.dockToWidget||!d.dockToWidget.fullWidth):null)}function p(a){var b={vw:0,px:0};if(a=(a||"").trim()){var c=parseInt(a,10),d=a.substr(c.toString().length);"%"===d&&(d="vw"),b[d]=c}return b}function q(a,c,d){var f=n(c.compId);f?(f.setTpaFullWidth(!!_.get(c,"data.stretch")),f.dockToWidget.margins.left=p(c.data.options&&c.data.options.margins&&c.data.options.margins.left),f.dockToWidget.margins.right=p(c.data.options&&c.data.options.margins&&c.data.options.margins.right),e.info("TPA full width state change",c.compId,f.dockToWidget.fullWidth,f.dockToWidget.margins.left,f.dockToWidget.margins.right),j.updateStyle(f,function(){b.captureOperation(),d(!0)})):d(!1)}function r(a,b,c){var d=n(b.compId),e=b.data.link?l.fromDSLink(b.data.link):{},f={linkDetails:e,node:d,biSource:"ProGallery"};k.show(f).then(function(a){if(a){var b=l.toDSLink(a);c(b)}})}var s=function(a,b,c){c(a.tpa.style.get(b.compId))},t=function(a,b,c){var d=a.components.get.byId(b.compId);a.tpa.data.set(d,b.data.key,b.data.value,b.data.scope,c)},u=function(a,b,c){if(b.data.scope===a.tpa.data.SCOPE.APP){var d=m(a);a.tpa.data.app.get(d.applicationId,b.data.key,c)}else{var e=a.components.get.byId(b.compId);a.tpa.data.comp.get(e,b.data.key,c)}},v=function(a,b,c){var d=a.components.get.byId(b.compId);a.tpa.data.remove(d,b.data.key,b.data.scope,c)},w=function(a,b,c){if(b.data.scope===a.tpa.data.SCOPE.APP){var d=m(a);a.tpa.data.app.getMulti(d.applicationId,b.data.keys,c)}else{var e=a.components.get.byId(b.compId);a.tpa.data.comp.getMulti(e,b.data.keys,c)}},x=function(a,b){var c=m(a);c&&a.tpa.change.trigger.settingsUpdated(c.applicationId,b.data.compId,b.data.message)},y=function(a,b,c){i.setStyleParam(a,b.compId,b.data,c),a.tpa.style.setParamOldSDK(b.compId,b.data)},z=function(a,b,c){c(a.tpa.style.get(b.compId))},A=function(a,b,c){var d=a.components.get.byId(b.compId);a.tpa.comp.setExternalId(d,b.data.externalId,c)},B=function(a,b,c){var d=a.components.get.byId(b.compId);c(a.tpa.comp.getExternalId(d))},C=function(a,b,c,d){d=d||{};var e=_.assign(_.pick(b,["name","appIcon","colorSvgIcon","packages","features","price","upgradeBenefits","upgradeTitle","upgradedToYearly","appDefinitionId"]),_.pick(c,"vendorProductId"));e.packages=_.reject(b.packages,{id:"oneTime"});var f={appDefId:c.appDefinitionId,referralAdditionalInfo:d.origin};return e.upgradeUrl=a.tpa.billing.getSiteUpgradeUrl(f),e},D=function(a,b,c,d){E(a,b,c,d)},E=function(a,b,c,d){a.tpa.appMarket.getDataAsync(b).then(function(b){var e=C(a,b,d);c(e.upgradeUrl)})},F=function(a,b,c){var d=a.components.data.get(a.components.get.byId(b.compId)),e=a.tpa.app.getData(d.applicationId);a.tpa.app.hasPremiumOffering(e.applicationId)&&D(a,e.appDefinitionId,c,e)},G=function(a,b){g.closeSettings(b.data.message)},H=function(a){var b=_.get(a,["data","eventData","url"]);b?f.showSupportIframe(b,d.TPA_HELP):e.info("tpa sent onHelp with invalid data")},I=function(a,b){var c=_.get(b,["compId"]);if(c){var d=a.components.get.byId(c),f=a.components.data.get(d);j.openManageForApp(f.applicationId,_.get(b,["data","eventData","state"]))}else e.info("tpa sent onManage with invalid data")},J=function(a,b){switch(_.get(b,["data","eventKey"])){case"TPA_PUB_SUB_OB_ON_HELP":H(b);break;case"TPA_PUB_SUB_OB_ON_MANAGE":I(a,b)}};return{isFullWidth:o,setFullWidth:q,setValue:t,removeValue:v,getValue:u,getValues:w,trackAppUpgrade:_.noop(),getWixUpgradeUrl:F,postMessage:x,superAppsOpenMediaDialog:_.noop(),setStyleParam:y,appIsAlive:z,stylesReady:_.noop(),getDashboardAppUrl:_.noop(),setWindowPlacement:_.noop(),getWindowPlacement:_.noop(),settingsOpenModal:_.noop(),addComponent:_.noop(),setExternalId:A,getExternalId:B,closeWindow:G,publish:J,getStyleByCompId:s,openBillingPage:_.noop(),openMediaDialog:_.noop(),openReviewInfo:_.noop(),openLinkPanel:r}}]);var TpaSettings=function(){function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=this;this.$rootScope=b,this.$translate=c,this.$window=d,this.$timeout=e,this.miscUtils=f,this.applicationState=g,this.applicationParameters=h,this.consumerBiLogger=i,this.consumerBiLoggerHelpers=j,this.CcDialogBuilder=k,this.tpaService=l,this.tpaUrlBuilder=m,this.tpaDiscovery=n,this.osUtils=o,this.storyServices=p,this.CONSUMER_DIALOGS=q,this.clientTopology=r,this.flags=s,this.registerTpaHandlers=function(b,c){return t.tpaService.registerTpaOpener(b,function(d){return t.$rootScope.$apply(function(){var e=t.tpaService.getInstanceId(c);t.consumerBiLogger.apps.clickOnManageApp(a.SETTINGS_PANEL_ORIGIN,t.tpaService.getAppIdByType(b),b,e),t.openManagement(a.SETTINGS_PANEL_ORIGIN,c,b,d)})})},this.isFullScreen=function(b){return b&&a.MANAGE_FULL_SCREEN_TYPES.indexOf(b.contentElementType)>=0},this.closeManagement=function(){return t.CcDialogBuilder.hide()},this.closeSettings=function(){return t.applicationState.goToBuilder()},l.registerTpaManagementCallback(a.TPA_EVENT_CLOSE_WINDOW,function(){return t.closeManagement()})}return a.$inject=["$rootScope","$translate","$window","$timeout","miscUtils","applicationState","applicationParameters","consumerBiLogger","consumerBiLoggerHelpers","CcDialogBuilder","tpaService","tpaUrlBuilder","tpaDiscovery","osUtils","storyServices","CONSUMER_DIALOGS","clientTopology","flags"],a.prototype.openManagement=function(a,b,c,d){var e=this;void 0===d&&(d=""),this.isFullScreen(b)&&this.applicationState.setSelectedTpaComponentRef(b.widgetRef),this.applicationParameters.tpaTypes[c].closeSettingsPanelWhenManaging&&this.applicationState.goToBuilder(),this.applicationParameters.updateCurrentlyManaged(c);var f=this.buildManagementUrl(c,b,a,d);this.CcDialogBuilder.show(this.getManageDialogOptions(b,c,f)).finally(function(){return e.onDialogClosed(c)})},a.prototype.buildManagementUrl=function(b,c,d,e){var f=d===a.SETTINGS_PANEL_ORIGIN?SdkBIEventType.Settings:d===a.SECTION_ORIGIN?SdkBIEventType.Manage:SdkBIEventType.Topbar,g=this.tpaUrlBuilder.getManagementUrl(b,c,d)+e;return this.consumerBiLoggerHelpers.addSDKJsonForBiEvent(g,this.tpaService.getAppIdByType(b),f)},a.prototype.onDialogClosed=function(b){var c=this;this.tpaUrlBuilder.isBizMgrURL(b)?_.values(this.tpaDiscovery.manageableTPAs).map(function(a){var b=a.naiveNode;return c.tpaService.getNaiveType(b.contentElementType)}).forEach(function(a){return c.tpaService.refreshApp(a)}):this.tpaService.refreshApp(b),this.storyServices.reRender(),this.$rootScope.$emit(a.TPA_EVENT_CLOSE_WINDOW)},a.prototype.getManageDialogOptions=function(a,b,c){var d=this,e=this.$translate.instant("builder.manage-tpa",{TPA:b}),f=this.miscUtils.translateIfPossible("builder.manage-tpa-"+b)||e,g=this.flags.businessManagerPhase4&&this.tpaUrlBuilder.isBizMgrURL(b);return{autoWrap:!1,hasBackdrop:!0,fullscreen:!0,templateUrl:"views/editor/tpa-manage-dialog.html",locals:{manageUrl:c,title:f,type:b&&b.toLowerCase(),fullScreen:this.isFullScreen(a),showHeader:!g,close:function(){return d.CcDialogBuilder.hide()},help:function(){var a=d.$translate.instant("help.tpa."+b);d.CcDialogBuilder.showSupportIframe(a,d.CONSUMER_DIALOGS.TPA_HELP)}},controllerAs:"$ctrl",bindToController:!0,controller:angular.noop,escapeToClose:!g}},a}();TpaSettings.MANAGE_FULL_SCREEN_TYPES=["ProGallery_Widget"],TpaSettings.TPA_EVENT_CLOSE_WINDOW="closeWindow",TpaSettings.SETTINGS_PANEL_ORIGIN="settings-panel",TpaSettings.SECTION_ORIGIN="ADI-section",angular.module("siteGeneratorBuilderInternal").service("tpaSettings",TpaSettings);var TpaHeaderData=function(){function a(a,b){this.header=a,this.tpa=b}return a}(),TPAHeader=function(){function a(a,b,c,d,e,f,g,h,i,j){this.presetsStrategyFactory=a,this.$q=b,this.defaultSections=c,this.contentSource=d,this.menuService=e,this.applicationParameters=f,this.assistantUtils=g,this.defaultContent=h,this.siteModelData=i,this.modelTree=j}return a.$inject=["presetsStrategyFactory","$q","defaultSections","contentSource","menuService","applicationParameters","assistantUtils","defaultContent","siteModelData","modelTree"],a.prototype.extractPresetPreview=function(a,b,c,d){var e=this;if(b===a.length)return void d.reject("couldn't find preset");c.calculatePresetPreview(a[b]).then(function(f){f?d.resolve(f):e.extractPresetPreview(a,++b,c,d)})},a.prototype.getTpaAnchors=function(a,b,c){var d=this;if(_.any(a)){this.addAliasToHeaders(a);var e=a.map(function(a){return a.tpa}),f=a.map(function(a){return a.header}),g=_.filter(f,function(a){return!d.nodeHasAnchorMenu(a)});b=b.filter(function(a){return-1===e.findIndex(function(b){return b.id===a.id})}),b=b.concat(g.filter(function(a){return-1===b.findIndex(function(b){return b.id===a.id})})),c=c.filter(function(a){return-1===f.findIndex(function(b){return b.id===a.id})}),c=c.concat(e.filter(function(a){return-1===c.findIndex(function(b){return b.id===a.id})}))}return{nodesToSetAnchor:b,nodesToRemoveAnchor:c}},a.prototype.addAliasToHeaders=function(a){_.each(a,function(a){a.header.alias=a.tpa.alias})},a.prototype.getTpaHeaderArray=function(a){for(var b=[],c=0,d=a.length;c<d-1;){var e=a[c];if(this.isTpaHeader(e)){var f=this.modelTree.getPageNodeById(e.containerPageId),g=this.getNextNodeInPage(e,f);g&&g.isTpaNode()&&this.isSupportHeader(g.contentElementType)&&(b.push(new TpaHeaderData(e,g)),c++)}c++}return b},a.prototype.get=function(a){var b=this,c=this.prepareTpaDraft(a),d=this.$q.defer(),e=this.presetsStrategyFactory.createFromNode(c,builder.PresetsStrategyMode.Change);return e.generateListOfPreviews([c]).then(function(a){b.extractPresetPreview(a,0,e,d)}),d.promise},a.prototype.prepareTpaDraft=function(b){var c=this.contentSource.prepareDrafts(this.getSuggestionByTypa(b.contentElementType))[0],d=this.contentSource.prepareDrafts(this.getSuggestionByTypa(a.TPA_HEADER_CE_TYPE))[0],e=this.modelTree.createNodeFromCE(d,"999."+d.type+"_0");return this.copyTpaValues(e.contentElement,c.values),this.setDefaultValues(e.contentElement.values),delete e.contentElement.values[b.contentElementType],this.addArgsMatchingPolicy(e),e},a.prototype.nodeHasAnchorMenu=function(a){return!!this.menuService.getLinkToNode(a)},a.prototype.getTPAHeaderKeys=function(){return this.contentSource.prepareDrafts(this.getSuggestionByTypa(a.TPA_HEADER_CE_TYPE))[0].values},a.prototype.hasDefaultValues=function(a){return _.contains(["TpaHeaderTitle","TpaHeaderBody","TpaHeaderSubtitle","button"],a)},a.prototype.copyTpaValues=function(a,b){a.values={};var c=this.getTPAHeaderKeys();Object.keys(c).forEach(function(d){a.values[d]=_.values(b).find(function(a){return a.subType===c[d].subType})})},a.prototype.setDefaultValues=function(b){var c=this;_.each(b,function(b,d){if(c.hasDefaultValues(d)&&!b.value){var e=c.siteModelData.calcNodeType(a.TPA_HEADER_CE_TYPE,!1,"");b.value=c.defaultContent.ValuesData[e][d]}})},a.prototype.getSuggestionByTypa=function(a){var b=this.defaultSections.getSectionOfceType(a);return{ceType:b.ceType,id:b.id,rawSectionBrief:b}},a.prototype.addArgsMatchingPolicy=function(a){var b=Object.keys(a.contentElement.values).reduce(function(b,c){return b[c]=a.contentElement.values[c].subType===core.ElementSubTypes.Title,b},{});a.argsMatchingPolicy=b,a.contentElement.setArgsMatchingPolicy(b)},a.prototype.isBlogAsHP=function(a){var b=this.applicationParameters.tpaTypes.Blog.type;return a===b&&this.assistantUtils.shouldAutoProvisionTPAOfType(b)},a.prototype.isSupportHeader=function(a){return _.includes(["Music_Widget","Stores","Stores_Product_specific_Widget","Stores_Grid_Gallery_Widget","Stores_Slider_Gallery_Widget","BandsInTown_Widget","Video_Widget","ProGallery_Widget","Bookings_Widget","Blog","Blog_Post_Gallery"],a)&&!this.isBlogAsHP(a)},a.prototype.getNodeIndex=function(a,b){var c=_.filter(b.children,function(a){return"PageHeader"!==a.contentElementType});return _.findIndex(c,function(b){return b.id===a.id})},a.prototype.getPrevNodeInPage=function(a,b){var c=this.getNodeIndex(a,b),d=_.filter(b.children,function(a){return"PageHeader"!==a.contentElementType});return c-1<0?null:d[c-1]},a.prototype.getNextNodeInPage=function(a,b){var c=this.getNodeIndex(a,b),d=_.filter(b.children,function(a){return"PageHeader"!==a.contentElementType});return c+1>=d.length?null:d[c+1]},a.prototype.isTpaHeader=function(b){return b.contentElementType===a.TPA_HEADER_CE_TYPE},a.prototype.isTpaHasHeader=function(b,c){return!!this.isSupportHeader(c[b].contentElementType)&&(b>0&&c[b-1].contentElementType===a.TPA_HEADER_CE_TYPE)},a}();TPAHeader.TPA_HEADER_CE_TYPE="Tpa_Header",TPAHeader.TPA_HEADER_ID="Tpa Header",angular.module("siteGeneratorEditorInternal").service("tpaHeader",TPAHeader);var Validation=function(){function a(a){this.$translate=a}return a.$inject=["$translate"],a.prototype.isEmail=function(a){var b=new RegExp(this.$translate.instant("regex.email_format"));return _.isString(a)&&b.test(a)},a.prototype.isPhone=function(a){var b=/^[ \(\)\-\+\d]+$/;return _.isString(a)&&b.test(a)&&a.length<=DocumentServicesMediator.GENERAL_VALIDATIONS.MAX_PHONE_NUMBER_LENGTH},a.prototype.isUrl=function(a){var b=/^(?:(?:https?|ftp):\/\/)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9]+-?)*[a-z0-9]+)(?:\.(?:[a-z0-9]+-?)*[a-z0-9]+)*(?:\.(?:[a-z]{2,6})))(?::\d{2,5})?(?:\/[-\w:@&?=+,.!\/~*'%$_;]*)?(#[a-z_.-][a-z0-9+\$_.-]*)?$/i;return _.isString(a)&&b.test(a)},a.prototype.isWebsite=function(a){var b=new RegExp("^(http[s]?://|www.)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-zA-Z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");return a&&!a.startsWith("http")&&(a="http://"+a),!a||b.test(a)},a.prototype.isPageName=function(a){var b=/^([a-z-][a-z0-9-]*)+?$/i;return _.isString(a)&&b.test(a)},a}();angular.module("siteGeneratorCommon").service("validation",Validation);var SocialLinksValidator=function(){function a(a,b,c){this.siteModelData=a,this.modelTree=b,this.storyServices=c}return a.$inject=["siteModelData","modelTree","storyServices"],a.prototype.validateSocialLink=function(a){if(!a||!(a.url||a.data&&a.data.link))return!1;var b=a.url||a.data.link;return a.invalidDefaultURL=this.isDefaultUrl(b),!!SocialLinkManager.urlValidation.exec(b)&&!a.invalidDefaultURL},a.prototype.isDefaultUrl=function(a){return-1!==this.getDefaultSocialLinksArray().indexOf(a)},a.prototype.getDefaultSocialLinksArray=function(){return this._defaultSocialLinks||(this._defaultSocialLinks=this.getDefaultSocialValues()),this._defaultSocialLinks},a.prototype.getDefaultSocialValues=function(){var a=_.find(this.modelTree.data.children,{contentElementType:"Social"}),b=this.siteModelData.getDefaultValues(a,this.storyServices.story);return b?b.SocialButtons.map(function(a){return a.Link.targetUrl}):[]},a}();SocialLinksValidator.DEFAULT_SOCIAL_LINKS=["https://www.facebook.com/wix","https://twitter.com/Wix","https://www.linkedin.com/company/wix-com"],angular.module("siteGeneratorBuilderInternal").service("socialLinksValidator",SocialLinksValidator);var DesignKitManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){this.themeChooser=a,this.undoRedo=b,this.modelTree=c,
this.spinnerService=d,this.$q=e,this.flags=f,this.colorationUtils=g,this.fontCustomizationService=h,this.fontUtils=i,this.animationKit=j,this.animationUtils=k,this.backgroundScrollService=l,this.pagesManager=m,this.layoutSelectionStoreProvider=n,this.defaultBackground=o,this.componentStyleOverrideSolver=p,this.animationPatterns=this.animationKit.getPatternsOptions()}return a.$inject=["themeChooser","undoRedo","modelTree","spinnerService","$q","flags","colorationUtils","fontCustomizationService","fontUtils","animationKit","animationUtils","backgroundScrollService","pagesManager","layoutSelectionStoreProvider","defaultBackground","componentStyleOverrideSolver"],a.prototype.setActiveMainKit=function(a){var b=this;return this.flags.debugHeaderFooterColoration&&this.deleteHeaderAndFooterBackgroundsFromLss(),this.componentStyleOverrideSolver.clearAllOverrides(),this.modelTree.dirtifyAllPages(),this.fontCustomizationService.resetFontSize(),this.spinnerService.waitForMe("setActiveKit"),this.colorationUtils.initialize().then(function(){return b.themeChooser.setThemeByID({color:a,font:a})}).then(function(){b.themeChooser.serializeMainKitSelection(a),b.themeChooser.serializeColorKitSelection(),b.themeChooser.serializeFontKitSelection(),b.colorationUtils.resetColoration(),b.resetAnimations(),b.flags.newColorationUpdateKitPalettes&&b.themeChooser.coloration.recalculateColorationConfigurations(),b.undoRedo.captureOperation(!1,!0)}).finally(function(){return b.spinnerService.imDone("setActiveKit")})},a.prototype.getPaletteColors=function(){return this.colorationUtils.getPaletteColors()},a.prototype.getActiveFontTheme=function(){return this.themeChooser.getActiveFontTheme()},a.prototype.getActiveFontThemeAsThumbnail=function(){return this.fontUtils.convertFontDataToThumbnail(this.getActiveFontTheme())},a.prototype.getActiveTheme=function(){return this.themeChooser.getActiveTheme("mainKit")},a.prototype.getActiveAnimationPatterns=function(){return _.find(this.animationPatterns,{id:this.animationUtils.getActivePatternForSite()})},a.prototype.getDefaultAnimationPatterns=function(){return _.find(this.animationPatterns,{id:this.animationUtils.getDefaultSiteAnimation()})},a.prototype.deleteHeaderAndFooterBackgroundsFromLss=function(){var a=this.layoutSelectionStoreProvider.getLayoutSelectionStore(),b=a.siteOverrides;b&&(delete b.headerBackground,delete b.footerBackground)},a.prototype.isKitOveridden=function(){var a=this.getActiveTheme(),b=!this.isActiveFontKit(a),c=this.fontCustomizationService.getFontSizeAllSite(),d=!this.isActiveColorKit(a),e=this.isKitColorationOverriden(),f=!this.isKitAnimationChanged(),g=this.isScrollEffectNotDefault(),h=this.pagesManager.getPagesTransition()!==this.pagesManager.getDefaultPagesTransition();return c||b||d||e||f||g||h},a.prototype.getActiveKitDefaultColors=function(){return this.themeChooser.coloration.getActiveKitDefaultColors()},a.prototype.isActiveFontKit=function(a){return this.themeChooser.getChosenFonts().font_0.themeId===a.id},a.prototype.isActiveColorKit=function(a){return this.themeChooser.getActiveTheme("color")===a},a.prototype.isKitColorationOverriden=function(){return this.colorationUtils.isColorationModeOverriden()||this.colorationUtils.areKitColorsOverriden()},a.prototype.isKitAnimationChanged=function(){var a=this.getActiveAnimationPatterns(),b=this.getDefaultAnimationPatterns();return a.label===b.label},a.prototype.isScrollEffectNotDefault=function(){return this.backgroundScrollService.getSiteOverride()!==this.backgroundScrollService.getDefaultScrollType()},a.prototype.resetAnimations=function(){var a=this.animationUtils.getDefaultSiteAnimation();this.animationUtils.setSiteAnimationPattern(a),this.backgroundScrollService.setDefaultScrollType(),this.pagesManager.setDefaultPagesTransition()},a}();angular.module("siteGeneratorBuilderInternal").service("designKitManager",DesignKitManager);var CatalogStylesDialog=function(){function a(a,b,c,d,e,f,g,h,i,j){var k=this;this.nodeFetcher=a,this.componentStyleOverrideSolver=b,this.modelTreeHelpers=c,this.notification=d,this.storyServices=e,this.catalog=f,this.undoRedo=g,this.simpleSolutionManager=h,this.consumerBiLogger=i,this.catalogItemSorter=j,this.catalogIds=[],this.catalogIds=Object.keys(f[this.catalogType]),this.catalogIds.sort(function(a,b){return k.catalogItemSorter.sort(a,b)}),this.consumerBiLogger.contentEditor.popupDialogIsLoaded(this.catalogType+" style","button")}return a.$inject=["nodeFetcher","componentStyleOverrideSolver","modelTreeHelpers","notification","storyServices","catalog","undoRedo","simpleSolutionManager","consumerBiLogger","catalogItemSorter"],a.prototype.setCatalogItem=function(a,b){var c=this.getNode();this.consumerBiLogger.contentEditor.changeButtonStyleClick(b+1,c.id),this.componentStyleOverrideSolver.setCatalogItem(c,this.catalogType,a),this.undoRedo.captureOperation(!1,!1),this.notifyIfAppliesToAllListItems(c),this.close(),this.refreshStage(c),this.consumerBiLogger.contentEditor.changeButtonStyleSuccess(b+1,c.id)},a.prototype.refreshStage=function(a){var b=this.simpleSolutionManager.getSectionSolution(a.containerPageId,a.id);this.simpleSolutionManager.setSolutionDirty(b),this.storyServices.recalculateCurrentPage(!0)},a.prototype.isActiveCatalogItem=function(a){var b=this.getNode();return a===this.componentStyleOverrideSolver.getCatalogId(b,this.catalogType)},a.prototype.close=function(){"function"==typeof this.onSelect&&this.onSelect(),this.consumerBiLogger.contentEditor.popupDialogIsClosed(this.catalogType+" style","button")},a.prototype.notifyIfAppliesToAllListItems=function(a){var b=this;this.modelTreeHelpers.isItemOfList(a)&&this.notification.show("toasters.list-item-design-changed","general.undo",function(){b.undoRedo.undo()})},a.prototype.getNode=function(){return this.nodeFetcher.getCurrentActiveNode()},a}();angular.module("siteGeneratorEditorInternal").component("catalogStylesDialog",{controller:CatalogStylesDialog,templateUrl:"views/editor/catalog-styles-dialog.html",bindings:{catalogType:"=",text:"=",onSelect:"=?"}});var CatalogStylesPreview=function(){function a(a,b){this.$element=a,this.catalogPreviewGenerator=b;var c=this.catalogPreviewGenerator.generate(this.catalogType,this.catalogId,this.text);this.$element.append(c)}return a.$inject=["$element","catalogPreviewGenerator"],a}();angular.module("siteGeneratorEditorInternal").component("catalogStylesPreview",{controller:CatalogStylesPreview,bindings:{catalogType:"<",catalogId:"<",text:"<"}});var SinglePanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=this;this.$scope=a,this.CONSUMER_DIALOGS=b,this.nodeTitleManager=c,this.consumerBiLogger=d,this.CcDialogBuilder=e,this.$translate=f,this.storyServices=g,this.consumerBiLoggerHelpers=h,this.modelTree=i,this.nodeFetcher=j,this.flags=k,this.menuService=l,this.tipManager=m,this.sectionBackgroundManager=n,this.applicationState=o,this.$element=p,this.editorEventManager=q,this.slideShowService=r,this.$timeout=s,this.flags.sectionMedia&&this.isItemSupportBackground?this.background=this.sectionBackgroundManager.getSelectedBackgroundAsThumbnail():this.background=null;var u;a.$watch("$ctrl.node",function(){try{var a=t.nodeFetcher.getNode(t.node.id);u=ListPanel.filterChildren(a.parent.children),t.currentItem=u.indexOf(t.node)+1,t.totalItems=u.length}catch(a){t.currentItem=1,t.totalItems=1}if(t.flags.listItemSlideShow&&t.node.isListItem&&t.slideShowService.isSlideShow(t.node.identifyingNode)){var b=u.filter(function(a){return!a.userHidden}).indexOf(t.node);if(b>-1){var c=t.slideShowService.getMoveToSlideObj(b);t.slideShowService.slidesNavigation(t.node.identifyingNode,SlideShowService.MOVE_TO_SLIDE,c),t.slideShowService.setSelectedItem(t.node.identifyingNodeId,t.node.id)}}t.isItem?(t.consumerBiLoggerHelpers.openedPanelStack.push("list item"),t.consumerBiLogger.contentEditor.panelIsLoaded(t.node.getId(),t.node.getSpecificContentElementType(),t.node.alias,t.consumerBiLoggerHelpers.popPanelSource())):(t.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId!==t.node.id&&(t.consumerBiLoggerHelpers.openedPanelStack.push("main"),t.consumerBiLogger.contentEditor.panelIsLoaded(t.node.getId(),t.node.getSpecificContentElementType(),t.node.alias,t.consumerBiLoggerHelpers.popPanelSource())),t.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId=t.node.id)}),a.$watch("$ctrl.currentItem",function(a,b){if(void 0!==t.currentItem&&a!==b){t.consumerBiLoggerHelpers.setPanelSource("navigate item");var c=u[t.currentItem-1];t.editorEventManager.editListItem({id:c.id,label:t.nodeTitleManager.getNodeTitleValue(c),hidden:c.isUserHidden()})}})}return a.$inject=["$scope","CONSUMER_DIALOGS","nodeTitleManager","consumerBiLogger","CcDialogBuilder","$translate","storyServices","consumerBiLoggerHelpers","modelTree","nodeFetcher","flags","menuService","tipManager","sectionBackgroundManager","applicationState","$element","editorEventManager","slideShowService","$timeout"],Object.defineProperty(a.prototype,"title",{get:function(){return this.nodeTitleManager.nodeTitle(this.node)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"contentElement",{get:function(){return this.node.contentElement},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isHeader",{get:function(){return"GeneralDescription"===this.node.contentElementType&&"footer"!==this.node.containerPageId},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isFooter",{get:function(){return"GeneralDescription"===this.node.contentElementType&&"footer"===this.node.containerPageId},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isNested",{get:function(){return this.isItem},enumerable:!0,configurable:!0}),a.prototype.closeSinglePanel=function(){this.isItem?(this.consumerBiLogger.contentEditor.panelClosed(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.consumerBiLoggerHelpers.openedPanelStack.pop()):(void 0!==this.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId&&(this.consumerBiLogger.contentEditor.panelClosed(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.consumerBiLoggerHelpers.openedPanelStack.pop()),this.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId=void 0),this.editorEventManager.closePanel(this.node.id),this.applicationState.clearContentFocus()},a.prototype.openSinglePanelHelp=function(){var a="help.section.edit("+this.node.contentElementType+")",b=this.$translate.instant(a);b!==a&&""!==b||(b=this.node.isListItem||this.node.nodeDescription.isListItem?this.$translate.instant("help.section.editListItem"):this.flags.sectionMedia?this.$translate.instant("help.section.sectionMedia.editSection"):this.$translate.instant("help.section.editSection")),this.isFooter&&(b=this.$translate.instant("help.section.edit(Footer)")),this.applicationState.isInMobileEditMode()&&(b=this.$translate.instant("help.section.editMobileSection")),this.CcDialogBuilder.showSupportIframe(b,this.CONSUMER_DIALOGS.SINGLE_PANEL_HELP)},a.prototype.showNameInMenuEditor=function(){return this.modelTree.isSiteMenuVisible()&&null!==this.menuService.getLinkToNode(this.node)&&!this.applicationState.isInMobileEditMode()},a.prototype.onEditBackground=function(){this.applicationState.goToSectionBackgroundPanel(BIOrigins.ContentPanel)},a.prototype.isShowSectionBackground=function(){return this.flags.sectionMedia&&this.isItemSupportBackground},Object.defineProperty(a.prototype,"isItemSupportBackground",{get:function(){return!this.isHeader&&!this.isFooter&&!this.node.isListItem},enumerable:!0,configurable:!0}),a}();angular.module("siteGeneratorEditorInternal").component("singlePanel",{templateUrl:"views/editor/single-panel.html",controller:SinglePanel,bindings:{node:"=",childId:"=?",onItemToPage:"&?",isItem:"=?"}});var SlideShowNavigationOverlay=function(){function a(a,b,c,d){var e=this;this.slideShowService=a,this.applicationState=b,this.flags=c,this.nodeFetcher=d,this.navigateInSlides=_.throttle(function(a){e.slideShowService.slidesNavigation(e.node.identifyingNode,a,null);var b=e.slideShowService.getSelectedItem(e.node.identifyingNodeId);b?e.slideShowService.selectUnHiddenItemByOperation(e.node.identifyingNode,b,a):e.slideShowService.setSelectedItem(e.node.identifyingNodeId,e.node.id),e.node=e.getSelectedNode()},2e3*SlideShowService.TRANSITION_DURATION,{leading:!0,trailing:!1})}return a.$inject=["slideShowService","applicationState","flags","nodeFetcher"],a.prototype.isShowOverlay=function(){return this.flags.listItemSlideShow&&$(document.body).hasClass(SegmentOverlay.segmentHoveredClass)&&this.applicationState.isInEditMode()&&this.slideShowService.isSlideShow(this.node.identifyingNode)},a.prototype.getNavigationMessage=function(){return this.slideShowService.getNavigationMessage(this.node.identifyingNode)},Object.defineProperty(a.prototype,"nextSlide",{get:function(){return SlideShowService.NEXT_SLIDE},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"prevSlide",{get:function(){return SlideShowService.PREV_SLIDE},enumerable:!0,configurable:!0}),a.prototype.getSelectedNode=function(){var a=this.slideShowService.getSelectedItem(this.node.identifyingNodeId);return this.nodeFetcher.getNode(a).node||this.node},a}();angular.module("siteGeneratorEditorInternal").component("slideShowNavigationOverlay",{templateUrl:"views/editor/slide-show-navigation-overlay.html",controller:SlideShowNavigationOverlay,bindings:{node:"="}});var ListPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){var C=this;this.$scope=a,this.$q=b,this.CONSUMER_DIALOGS=c,this.contentManager=d,this.nodeTitleManager=e,this.simpleSolutionManager=f,this.nodeManipulationService=g,this.storyServices=h,this.sectionManager=i,this.undoRedo=j,this.spinnerService=k,this.consumerBiLoggerHelpers=l,this.consumerBiLogger=m,this.notification=n,this.CcDialogBuilder=o,this.$translate=p,this.flags=q,this.menuService=r,this.modelTree=s,this.sectionBackgroundManager=t,this.applicationState=u,this.onstageActionsManager=v,this.ONSTAGE_EVENTS=w,this.editorEventManager=x,this.listPanelManager=y,this.pubSub=z,this.slideShowService=A,this.sectionMedia=B,this.listItems=[],this.unsubscribers=[],this.onAnyFieldToggle=function(){C.setBackground()},this.pageId=this.storyServices.story.selectedPage,this.setBackground(),this.watchListItems(),this.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId!==this.node.id&&(this.consumerBiLoggerHelpers.openedPanelStack.push("main"),this.consumerBiLogger.contentEditor.panelIsLoaded(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,this.consumerBiLoggerHelpers.popPanelSource())),this.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId=this.node.id,this.unsubscribers.push(z.subscribe(PubSub.events.LIST_ITEMS_UPDATED,this.refreshListItems.bind(this))),this.flags.sectionMedia&&!this.isMobileMode&&this.unsubscribers.push(z.subscribe(PubSub.events.CONTENT_UPDATED,function(){return C.tryMoveToListBackground(C.node,C.header)}))}return a.$inject=["$scope","$q","CONSUMER_DIALOGS","contentManager","nodeTitleManager","simpleSolutionManager","nodeManipulationService","storyServices","sectionManager","undoRedo","spinnerService","consumerBiLoggerHelpers","consumerBiLogger","notification","CcDialogBuilder","$translate","flags","menuService","modelTree","sectionBackgroundManager","applicationState","onstageActionsManager","ONSTAGE_EVENTS","editorEventManager","listPanelManager","pubSub","slideShowService","sectionMedia"],a.prototype.tryMoveToListBackground=function(a,b){var c=this,d=this.sectionMedia.getSelectedOption(b)===sectionMedia.MediaSizeOptions.BackgroundList;if(!b.isUserHidden()||d)return this.$q.when(!0);var e=this.sectionMedia.getMediaType(b);return e===cc.MediaPreviewType.MultipleImages?this.sectionMedia.setOption(a,cc.MediaPreviewType.SingleImage,sectionMedia.MediaSizeOptions.BackgroundList).then(function(a){return c.pubSub.fire(PubSub.events.MEDIA_CHANGED_BY_SYSTEM),a}):this.sectionMedia.setOption(a,e,sectionMedia.MediaSizeOptions.BackgroundList)},a.prototype.$onDestroy=function(){this.unsubscribers&&this.unsubscribers.forEach(function(a){return a()})},a.prototype.setBackground=function(){this.background=this.sectionBackgroundManager.getSelectedBackgroundAsThumbnail()},Object.defineProperty(a.prototype,"title",{get:function(){return this.nodeTitleManager.nodeTitle(this.node)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"header",{get:function(){return _.find(this.node.children,function(a){return"ListHeader"===a.getContentElementType()})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"footer",{get:function(){return _.find(this.node.children,function(a){return"ListFooter"===a.getContentElementType()})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showHeader",{get:function(){return void 0!==this.header},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showFooter",{get:function(){return void 0!==this.footer},enumerable:!0,configurable:!0}),a.prototype.watchListItems=function(){var a=this;this.$scope.$watch(this.node.children,function(){return a.refreshListItems()}),this.$scope.$watch(function(){return a.slideShowService.getSelectedItem(a.node.getId())},function(){var b=_.find(a.listItems,function(b){return b.id===a.slideShowService.getSelectedItem(a.node.getId())});b&&(_.map(a.listItems,function(a){return a.selected=!1}),b.selected=!0)})},a.prototype.refreshListItems=function(){this.listItems=this.createListItems()},a.prototype.getOverrideLabel=function(){return this.slideShowService.isSlideShow(this.node)?this.$translate.instant("builder.add-slide"):""},a.prototype.getListItemsLabel=function(){return this.slideShowService.isSlideShow(this.node)?this.$translate.instant("builder.list-items-title-slideshow"):this.$translate.instant("builder.list-items-title")},a.prototype.isShowSlideShowTooltip=function(){return this.slideShowService.isSlideShow(this.node)},a.prototype.createListItems=function(){var b=this,c=a.filterChildren(this.node.children).find(function(a){return!a.userHidden});return this.slideShowService.isSlideShow(this.node)&&!this.slideShowService.getSelectedItem(this.node.id)&&c&&this.slideShowService.setSelectedItem(this.node.id,c.id),a.filterChildren(this.node.children).map(function(a){return b.generateItem(a)})},a.prototype.generateItem=function(a){var b=a.identifyingNode,c=b&&this.slideShowService.isSlideShow(b)&&this.slideShowService.getSelectedItem(b.id);return this.listPanelManager.generateItem(a,c)},a.prototype.getRealItem=function(a){return _.find(this.node.children,function(b){return b.id===a.id})},a.filterChildren=function(a){return _.filter(a,function(a){return"ListHeader"!==a.getContentElementType()&&"ListFooter"!==a.getContentElementType()&&"HomePageTeaser"!==a.getContentElementType()})},a.prototype.addListItem=function(a,b,c,d){var e=this;return this.sectionManager.addListItem(this.node,a,b).then(function(){e.handleAfterUpdateList(c,d),e.consumerBiLogger.contentEditor.addDuplicateItemSuccess(e.node.getId(),e.node.getSpecificContentElementType(),e.node.alias,"onAdd"===d?"new":"duplicate")})},a.prototype.handleAfterUpdateList=function(a,b){this.refreshListItems(),this.undoRedo.captureOperation(!1),a&&this.notification.show(a,2e3),this.spinnerService.imDone(b)},a.prototype.realIndexAndStatus=function(a){var b=this.getRealItem(a),c=this.nodeManipulationService.nodeIndexAndStatus(this.node,b);if(!c)throw"cannot toggle a non list item from this flow";return c.childNode=b,c},a.prototype.itemToPage=function(a){this.editorEventManager.itemToPage(a)},a.prototype.onEdit=function(a){this.consumerBiLoggerHelpers.setPanelSource("click edit in menu"),this.editorEventManager.editListItem(a)},a.prototype.onAdd=function(){if(this.consumerBiLogger.contentEditor.clickOnAddDuplicateItemInAList(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,"new"),this.flags.listPanelRefactor)this.listPanelManager.createItemNodeAndAddToList(this.node),this.refreshListItems();else{var a=this.createNewCEDraft(),b=this.createNewNodeFromCE(a);this.spinnerService.waitForMe("onAdd"),this.addListItem(b,void 0,"toasters.list-item-added","onAdd")}},a.prototype.createNewNodeFromCE=function(a){var b=this.nodeManipulationService.addNodeToList(this.node);return _.each(a.values,function(a,c){return b.contentElement.values[c]=a}),b},a.prototype.getSectionSuggestionByNode=function(a){var b=this,c={rawSectionBrief:{id:this.node.alias,ceType:this.node.getContentElementType(),cardinality:2}},d=this.contentManager.suggestedSections().suggestions,e=d&&d.find(function(a){return a.id===b.node.alias});return e&&e.rawSectionBrief.cardinality>1&&(c.rawSectionBrief.item=e.rawSectionBrief.item),c},a.prototype.createNewCEDraft=function(){var a=this.getSectionSuggestionByNode(this.node),b=this.modelTree.getListItems(this.node).length;return this.contentManager.prepareDrafts(a,1,b)[0].items[0]},a.prototype.onDuplicate=function(a){var b=this;this.flags.listPanelRefactor?this.listPanelManager.onDuplicate(a,!0,this.node).then(function(){b.refreshListItems()}):this.listPanelManager.onDuplicate(a,!0).then(function(){b.refreshListItems()})},a.prototype.onDelete=function(a){var b=this;this.listPanelManager.onDelete(a).then(function(){b.refreshListItems()})},a.prototype.onToggle=function(a){var b=this,c=this.listPanelManager.onToggle(a,!0,this.flags.listPanelRefactor&&this.node);c.then instanceof Function&&c.then(function(){a.hidden||b.slideShowService.moveToRealIndex(b.node,a.id),b.refreshListItems()})},a.prototype.closeListPanel=function(){void 0!==this.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId&&(this.consumerBiLogger.contentEditor.panelClosed(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.consumerBiLoggerHelpers.openedPanelStack.pop()),this.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId=void 0,this.editorEventManager.closePanel(this.node.id),this.applicationState.clearContentFocus()},a.prototype.onOrderChange=function(a){var b=this;this.consumerBiLogger.contentEditor.reorderItemInAList(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias);var c=this.createListItems(),d=c[a.fromIndex],e=this.realIndexAndStatus(d),f=_(c).filter({hidden:!1}).collect(function(a){return a.id}).value().join("|"),g=_(this.listItems).filter({hidden:!1}).collect(function(a){return a.id}).value().join("|");if(this.nodeManipulationService.moveListItem(this.node,a.fromIndex,a.toIndex),f!==g){var h=this.realIndexAndStatus(d);this.spinnerService.waitForMe("reorder"),this.simpleSolutionManager.reorderItems(this.pageId,this.node.getId(),e.indexInVisibleItemsIgnoringHeader,h.indexInVisibleItemsIgnoringHeader).then(function(a){var c={direction:b.simpleSolutionManager.Animation.Direction.REVERSE,type:b.simpleSolutionManager.Animation.Type.CROSS_FADE};return b.sectionManager.startAnimatedRender(a,c)}).then(function(){b.slideShowService.changeOrderInListItem(b.node,a.fromIndex,a.toIndex),b.refreshListItems(),b.undoRedo.captureOperation(!1),b.spinnerService.imDone("reorder"),b.consumerBiLogger.contentEditor.itemReorderSuccess(b.node.getId(),b.node.getSpecificContentElementType(),b.node.alias)})}},a.prototype.onItemClick=function(a){if(!a.hidden){var b=this.modelTree.getNodeById(a.id);b.identifyingNode&&this.slideShowService.isSlideShow(b.identifyingNode)&&this.slideShowService.setSelectedItem(this.node.getId(),a.id)}this.onEdit(a),this.consumerBiLoggerHelpers.setPanelSource("click item in panel")},a.prototype.onItemDoubleClick=function(a){this.onItemClick(a)},a.prototype.openListPanelHelp=function(){var a;a=this.flags.sectionMedia?this.$translate.instant("help.section.sectionMedia.editListPageSection"):this.slideShowService.isSlideShow(this.node)?this.$translate.instant("help.section.editSlideShow"):this.$translate.instant("help.section.editListPageSection"),this.CcDialogBuilder.showSupportIframe(a,this.CONSUMER_DIALOGS.LIST_PANEL_HELP)},a.prototype.showNameInMenuEditor=function(){return this.modelTree.isSiteMenuVisible()&&null!==this.menuService.getLinkToNode(this.node)&&!this.applicationState.isInMobileEditMode()},Object.defineProperty(a.prototype,"isMobileMode",{get:function(){return this.applicationState.isInMobileEditMode()},enumerable:!0,configurable:!0}),a.prototype.onEditHeaderBackground=function(){this.applicationState.goToSectionHeaderBackgroundPanel(BIOrigins.ContentPanel)},a.prototype.onEditListBackground=function(){this.applicationState.goToSectionListBackgroundPanel(BIOrigins.ContentPanel)},a.prototype.isShowSectionBackground=function(){return this.flags.sectionMedia},a}();angular.module("siteGeneratorEditorInternal").component("listPanel",{templateUrl:"views/editor/list-panel.html",controller:ListPanel,bindings:{node:"=",onItemToPage:"&"}});var SocialPanel=function(){function a(a,b,c,d,e,f,g,h,i,j){var k=this;this.$scope=a,this.modelTree=b,this.CcDialogBuilder=c,this.$translate=d,this.CONSUMER_DIALOGS=e,this.consumerBiLoggerHelpers=f,this.consumerBiLogger=g,this.editorEventManager=h,this.socialLinksHelpers=i,this.socialPanelManager=j,this.node=this.modelTree.getNodeByContentElementName("Social"),this.$scope.$watch("$ctrl.node",function(a,b){k.socialLinks=k.socialLinksHelpers.extractSocialLinks(k.node)}),this.$scope.$watch("$ctrl.socialLinks",_.debounce(function(a,b){a!==b&&k.socialPanelManager.updateSocialLinks(a,k.editedNode)},500),!0),this.consumerBiLoggerHelpers.openedPanelStack.push("social"),this.consumerBiLogger.contentEditor.panelIsLoaded(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,this.consumerBiLoggerHelpers.popPanelSource())}return a.$inject=["$scope","modelTree","CcDialogBuilder","$translate","CONSUMER_DIALOGS","consumerBiLoggerHelpers","consumerBiLogger","editorEventManager","socialLinksHelpers","socialPanelManager"],Object.defineProperty(a.prototype,"title",{get:function(){return this.$translate.instant("builder.social-panel.title")},enumerable:!0,configurable:!0}),a.prototype.closeSocialPanel=function(){this.consumerBiLogger.contentEditor.panelClosed(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.consumerBiLoggerHelpers.openedPanelStack.pop(),this.editorEventManager.closePanel(NodeEditorManager.SOCIAL_ID)},a.prototype.openSocialPanelHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.social.menu"),this.CONSUMER_DIALOGS.SOCIAL_PANEL_HELP)},a}();angular.module("siteGeneratorEditorInternal").component("socialPanel",{templateUrl:"views/editor/social-panel.html",controller:SocialPanel,bindings:{editedNode:"="}});var SocialPanelInner=function(){function a(a,b,c,d,e,f){var g=this;this.$scope=a,this.socialLinkManager=b,this.applicationParameters=c,this.modelTree=d,this.consumerBiLogger=e,this.pubSub=f,this.labelFilter=function(a){var b=g.socialLinkManager,c=b.getPlatformNameByUrl(a);if(c&&c!==SocialLinkManager.VALID_CUSTOM_LINK){var d=b.getPlatformRelativePath(a);return"/"===d[0]&&(d=d.substring(1,d.length)),d}return a},this.isDraggable=!1!==this.isDraggable,this.newSocialUrl=""}return a.$inject=["$scope","socialLinkManager","applicationParameters","modelTree","consumerBiLogger","pubSub"],a.prototype.$onInit=function(){var a=this;this.data.forEach(function(b){b.platform=a.socialLinkManager.getPlatformNameByUrl(b.url)||a.socialLinkManager.invalidPlatformName,b.icon=a.socialLinkManager.getPlatformIconClass(b.platform,!0)})},a.prototype.canAddSocialLink=function(){return this.data.length<this.applicationParameters.maxSocialLinks},a.prototype.onNewPlatform=function(){if(this.canAddSocialLink()){var a=this.newSocialUrl;if(a){var b=this.socialLinkManager.getPlatformNameByUrl(a);this.data.push({platform:b||this.socialLinkManager.invalidPlatformName,url:a,icon:this.socialLinkManager.getPlatformIconClass(b,!0)}),this.newSocialUrl=""}}},a.prototype.removePlatform=function(a){_.pull(this.data,a),this.consumerBiLogger.contentEditor.valueWasDeleted(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,"social","link")},a.prototype.onToggle=function(a){this.consumerBiLogger.contentEditor.clickOnHideUnhideComponent(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,"social","link",a.hidden?"hide":"unhide","social-panel")},a.prototype.onEdit=function(a){""===a.url?this.removePlatform(a):(a.platform=this.socialLinkManager.getPlatformNameByUrl(a.url)||this.socialLinkManager.invalidPlatformName,a.icon=this.socialLinkManager.getPlatformIconClass(a.platform,!0))},a.prototype.getIconClassForNewSocialUrl=function(){var a=this.socialLinkManager.getPlatformNameByUrl(this.newSocialUrl);return a?this.socialLinkManager.getPlatformIconClass(a):"cc-icon-social-placeholder"},a.prototype.getInvalidtooltipName=function(a){return a.invalidDefaultURL?"intro_card_url_default":"intro_card_url_invalid"},a}();angular.module("siteGeneratorEditorInternal").component("socialPanelInner",{templateUrl:"views/editor/social-panel-inner.html",controller:SocialPanelInner,bindings:{data:"=",isDraggable:"=?",node:"<",noHide:"=?",itemValidator:"&?"}});var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},FieldEditor=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){var B=this;this.$q=a,this.assistiveMessage=b,this.$scope=c,this.fieldEditorConfiguration=d,this.nodeTitleManager=e,this.socialLinkManager=f,this.linkEditorCAB=g,this.consumerBiLogger=h,this.modelTree=i,this.validation=j,this.$translate=k,this.socialLinksValidator=l,this.spinnerService=m,this.storyServices=n,this.mediaOverrideManager=o,this.richTextService=p,this.designKit=q,this.$timeout=r,this.flags=s,this.applicationState=t,this.$element=u,this.osUtils=v,this.domHelpers=w,this.editorEventManager=x,this.pubSub=y,this.contentElementFieldManager=z,this.cabbie=A,this.config={email:{validator:function(a){return B.validation.isEmail(a)},errorMessage:this.$translate.instant("general.email.invalid")}},this.debouncedUpdateViewer=_.debounce(this.updateViewer,this.fieldEditorConfiguration.getDebounceDelay(this.field)),this.fieldTitle=this.getFieldTitle(),this.unsubscribe=d.isTextType(this.fieldData)&&y.subscribe(PubSub.events.BLINK_FIELD,function(a){a===B.field&&B.blinkField()}),c.$watch("$ctrl.field",function(){B.fieldEditorConfiguration.isRichTextInput(B.fieldData)&&B.initRichText(),B.initTextValue()}),c.$watch("$ctrl.field.focused",function(a){a&&B.scrollToField()})}return a.$inject=["$q","assistiveMessage","$scope","fieldEditorConfiguration","nodeTitleManager","socialLinkManager","linkEditorCAB","consumerBiLogger","modelTree","validation","$translate","socialLinksValidator","spinnerService","storyServices","mediaOverrideManager","richTextService","designKit","$timeout","flags","applicationState","$element","osUtils","domHelpers","editorEventManager","pubSub","contentElementFieldManager","cabbie"],a.prototype.getAutomationLabel=function(){return this.field.data.type+"-"+this.field.data.subType},a.prototype.$onDestroy=function(){this.unsubscribe&&this.unsubscribe()},a.prototype.$onInit=function(){this.scrollParent=angular.element(this.$element.parents(".cc-panel-body")),this.isInMobileEditMode=this.applicationState.isInMobileEditMode(),this.debounceDelay=0,this.updateILink(),this.validator=_.get(this.config,this.fieldData.subType+".validator"),this.validateEmail(),this.fieldEditorConfiguration.isSocialInput(this.fieldData)&&this.watchSocialLinks()},a.prototype.blinkField=function(){var a=this;this.blink=!0,this.$timeout(function(){a.blink=!1},250)},a.prototype.scrollToField=function(){var a=this.$element[0],b=this.calculateHeightCompensation(),c=Math.max(0,a.offsetTop-b-12);this.domHelpers.scrollInsideContainer(this.scrollParent,c,1e3)},a.prototype.calculateHeightCompensation=function(){if(this.fieldEditorConfiguration.isRichTextInput(this.fieldData)){if(!this.$element.find(".in-focus").length){
var a=this.$element.parent().find("p22-rich-text-toolbar"),b=this.$element.parent().find(".in-focus"),c=this.$element.find("p22-rich-text-toolbar"),d=a.index(b);if(a.index(c)>d)return b.height()}}return 0},a.prototype.initRichText=function(){this.designKitFormatting=this.designKit.getFormattingForRichTextEditor(this.modelTree.getGeneralInformation()!==this.node&&this.node||null,this.fieldData.subType),this.richTextStylesManager=a.richTextStylesManager,this.richTextLinksManager=this.richTextService.getEditorLinksManager(),this.displayedRTTSections=[cc.RTTSection.BoldUnderlineItalic,cc.RTTSection.Linking,cc.RTTSection.ClearFormatting],this.fieldData.subType!==core.ElementSubTypes.LongText&&"address"!==this.fieldData.subType||this.displayedRTTSections.push(cc.RTTSection.Listing),this.maxRowsOnBlur=this.fieldData.subType===core.ElementSubTypes.LongText?8:2,this.initRichTextValue()},a.prototype.initRichTextValue=function(){this.richTextValue=this.richTextService.isRichText(this.fieldData.value)?this.richTextService.unMarkRichText(this.fieldData.value):this.richTextService.transformForEditor(this.fieldData.value,this.designKitFormatting)},a.prototype.initTextValue=function(){this.fieldEditorConfiguration.isTextInput(this.fieldData)&&(this.fieldEditorConfiguration.isButton(this.fieldData)?this.textInputValue=this.fieldData.value.callToAction:this.textInputValue=this.fieldData.value,this.isInMobileEditMode&&this.richTextService.isRichText(this.textInputValue)&&(this.textInputValue=this.richTextService.toPlainText(this.textInputValue)))},a.prototype.watchSocialLinks=function(){var a=this,b=this.modelTree.getNodeByContentElementName("Social");this.$scope.$watch(function(){return b.contentElement.getValuesByMediaType().icon},function(b){return a.socialItems=a.createSocialItems(b)},!0)},Object.defineProperty(a.prototype,"isMediaAutocomplete",{get:function(){return this.field.suggestedContent&&this.field.suggestedContent.length>0&&_.has(this.field.suggestedContent[0],"media")},set:function(a){_.map([],function(){return[]})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fieldData",{get:function(){return this.field.data},enumerable:!0,configurable:!0}),a.prototype.validateEmail=function(){this.validator&&(this.isValid=this.validator(this.fieldData.value),this.isValid||(this.errorMessage=this.config[this.fieldData.subType].errorMessage))},a.prototype.getDebounceDelay=function(){return this.debounceDelay},a.prototype.isArgsFitsField=function(a){return a&&this.field.contentElement.type===a.contentElementType&&this.fieldData.type===a.type&&this.fieldData.subType===a.subType},Object.defineProperty(a.prototype,"isHighlighted",{get:function(){return this.isArgsFitsField(this.highlightArg)},enumerable:!0,configurable:!0}),a.prototype.createSocialItems=function(a){var b=this;return _.map(a,function(a){return{cssClass:b.socialLinkManager.getPlatformIconClass(a.platform),data:{link:a.Link.targetUrl}}})},a.prototype.onRichTextLinkCommand=function(a){var b=this,c=this.richTextService.getLink(a)||{},d={linkDetails:c,node:this.node,biSource:"richtext"};return this.linkEditorCAB.show(d).then(function(c){if(b.richTextService.removeLink(a),!_.isEmpty(c))return b.richTextService.addLink(c)})},a.prototype.resetRichText=function(a){var b=this,c=this.richTextService.resetFormatting(a);this.onChange(c,!1),this.richTextValue=null,this.$timeout(function(){b.initRichTextValue()})},a.prototype.isEmptyValue=function(a){return this.richTextService.isEmpty(a)},a.prototype.updateViewer=function(a,b){this.flags.sectionMedia||b!==IEditEventType.TypeChange||this.pubSub.fire(PubSub.events.MEDIA_TYPE_CHANGE);var c=_.clone(this.fieldData);c.value=a;var d=__assign({},this.field,{data:c}),e=this.mediaOverrideManager.getFieldDataType(this.fieldData.subType,this.node);this.consumerBiLogger.contentEditor.updateField(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias||"",this.field.key,e),this.editorEventManager.fieldChanged(d,!1,b,BIOrigins.EditPanel)},a.prototype.onChange=function(a,b,c){if(void 0===b&&(b=!1),void 0===c&&(c=IEditEventType.ValueChange),!!this.onValueChange&&this.onValueChange(this.field),!_.isUndefined(a)||this.fieldData.type===core.ElementTypes.Media){if(b&&this.isEmptyValue(a)&&(a="",this.richTextValue=null),!(a||b||this.fieldData.type!==core.ElementTypes.Text&&this.fieldData.type!==core.ElementTypes.Button))return this.isValid=!0,this.fieldData.type===core.ElementTypes.Button?this.fieldData.value.callToAction=a:this.fieldData.value="",void this.debouncedUpdateViewer(a,c);if(!_.isUndefined(a))if(this.fieldData.type===core.ElementTypes.Button)this.fieldData.value.callToAction=a;else{var d=_.has(a,"text")?a.text:a;this.fieldData.value=b&&d?this.richTextService.tryToExtractPlainText(d,this.designKitFormatting)||this.richTextService.markRichText(d):d}if(this.debouncedUpdateViewer(a,c),!a&&b)return void(this.isValid=!0);this.validateEmail()}},a.prototype.onMaskChange=function(a){this.onFieldToggle(this.field),a&&this.fieldEditorConfiguration.isRichTextInput(this.fieldData)&&this.initRichTextValue(),this.isInMobileEditMode&&!a&&this.maybeShowAssistiveMessage("popup.hide-field-in-mobile","tip_content.first_time_hide_field")},a.prototype.maybeShowAssistiveMessage=function(a,b){var c=this;return this.storyServices.story.popupConfigurations[a]?this.$q.when():(this.storyServices.story.popupConfigurations[a]=!0,this.spinnerService.waitForStop().then(function(){return c.assistiveMessage.show({target:c.$element.find('[data-hook="toggle-icon"]:visible'),xOffset:23,text:c.$translate.instant(b)})}))},a.prototype.onSocialItemClick=function(){this.editorEventManager.editSocial()},a.prototype.onRichTextCommand=function(a,b){var c=b?"on":"off",d=P23RichTextInput.getCKEditorCommandName(a);this.consumerBiLogger.contentEditor.richTextClick(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias||"",c,d,this.field.key,this.fieldData.subType,this.field.data.value,this.field.data.value&&this.field.data.value.length)},a.prototype.socialButtonsParagraph=function(){var a=this;return this.socialItems&&this.socialItems.length&&_.every(this.socialItems.map(function(b){return a.socialLinksValidator.validateSocialLink({url:b.data.link})}))?"":this.$translate.instant("builder.field-editor.social-paragraph")},a.prototype.onLinkItemEdit=function(){this.contentElementFieldManager.onLinkItemEdit(this.field,this.node,BIOrigins.EditPanel)},a.prototype.updateILink=function(){this.fieldData.linkAsILink=this.fieldEditorConfiguration.getILink(this.fieldData)},a.prototype.goToDesktopContentPanel=function(){var a=this,b=this.applicationState.getContentFocus();$(".cc-tooltip").remove(),this.applicationState.goToBuilder().then(function(){return a.applicationState.disableMobileEditor()}).then(function(){a.applicationState.setContentFocus(b.nodeId,b.sitePart),a.applicationState.goToEditMode()})},a.prototype.isTextManagerEnabled=function(){return this.flags.textManager},a.prototype.openTextManager=function(){this.field.focused=!0,this.cabbie.show({target:'[field-title="'+this.getFieldTitle()+'"]',element:"TextManagerDialog",attributes:{onReplace:this.onTextManagerReplaceText.bind(this),onAppend:this.onTextManagerAppendText.bind(this),sectionType:"Welcome",fieldName:"Description"},hideAttribute:"closeDialog"})},a.prototype.getFieldTitle=function(){return this.fieldEditorConfiguration.getFieldTitle(this.fieldData,this.node)},a.prototype.isTextField=function(){return this.fieldEditorConfiguration.isRichTextInput(this.fieldData)||this.fieldEditorConfiguration.isTextInput(this.fieldData)||this.fieldEditorConfiguration.isLongTextInput(this.fieldData)},a.prototype.onTextManagerReplaceText=function(a){this.richTextValue?this.richTextValue=a:this.textInputValue?this.textInputValue=a:this.fieldData.value=a},a.prototype.onTextManagerAppendText=function(a){this.onTextManagerReplaceText((this.richTextValue||this.textInputValue||this.fieldData.value)+" "+a)},a}();FieldEditor.richTextStylesManager={getFonts:function(){return{}},getThemes:function(){return{}},getCssData:function(){var a={};return a["adi-ux-fonts"]={id:"adi-ux-fonts",value:"//static.parastorage.com/services/third-party/fonts/Helvetica/fontFace.css",isLink:!0,force:!1},a.theme_fonts={id:"theme_fonts",value:".cke_editable p,.cke_editable h1,.cke_editable h2,.cke_editable h3,.cke_editable h4,.cke_editable h5,.cke_editable h6,.cke_editable div,.cke_editable li,.cke_editable ol,.cke_editable ul {-webkit-font-smoothing: antialiased;font: normal normal 300 16px/24px HelveticaNeueW01-55Roma,HelveticaNeueW02-55Roma,HelveticaNeueW10-55Roma,\"'Helvetica Neue', Helvetica, Arial, Meiryo, 'Hiragino Kaku Gothic Pro W3', 'Hiragino Kaku Gothic Pro', sans-serif\";color:#20303c;}::selection {background-color:#d3edff}.cke_editable a {color:#4196e0}.cke_editable ol,.cke_editable ul {margin-top:0;margin-bottom:0}",isLink:!1,force:!1},a}},angular.module("siteGeneratorEditorInternal").component("fieldEditor",{templateUrl:"views/editor/field-editor.html",controller:FieldEditor,bindings:{field:"=",node:"=",highlightArg:"=",clickArg:"=",onFieldToggle:"&",onValueChange:"&?",toggleDisabled:"=?"}});var ContentElementEditor=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=this;this.$scope=a,this.$timeout=b,this.overlaySegmentManager=c,this.contentElementFieldManager=d,this.onstageActionsManager=e,this.applicationState=f,this.ONSTAGE_EVENTS=g,this.wizardService=h,this.linkEditorCAB=i,this.fieldEditorConfiguration=j,this.editorEventManager=k,this.$element=l,this.domHelpers=m,this.flags=n,this.assistiveMessage=o,this.storyServices=p,this.$translate=q,this.pubSub=r,this.getFieldArgs=function(a){return{contentElementType:a.contentElement.type,type:a.data.type,subType:a.data.subType}},this.resetLastHoveredField=function(){return s.overlaySegmentManager.lastHoveredArgs=null},this.resetHoveredFieldWithDelay=_.debounce(this.resetLastHoveredField,1e3),this.setLastHoveredField=function(a){return s.overlaySegmentManager.lastHoveredArgs=s.getFieldArgs(a)},this.onMouseEnter=this.setLastHoveredField,this.onClicked=function(a){return s.overlaySegmentManager.lastClickedArgs=s.getFieldArgs(a)},this.isInMobileEditMode=function(){return s.applicationState.isInMobileEditMode()},this.unsubscribe=r.subscribe(PubSub.events.NEW_STATE_STORY_WAS_SET,this.prepareFields.bind(this)),this.prepareFields(),this.$scope.$watch("$ctrl.overlaySegmentManager.lastHoveredArgs",function(a){return s.highlightArg=s.getLayoutArgs(a)}),this.$scope.$watch("$ctrl.overlaySegmentManager.lastClickedArgs",function(a){return s.clickArg=s.getLayoutArgs(a)}),this.maybeShowFirstTimeTooltip()}return a.$inject=["$scope","$timeout","overlaySegmentManager","contentElementFieldManager","onstageActionsManager","applicationState","ONSTAGE_EVENTS","wizardService","linkEditorCAB","fieldEditorConfiguration","editorEventManager","$element","domHelpers","flags","assistiveMessage","storyServices","$translate","pubSub"],a.prototype.$onDestory=function(){this.unsubscribe&&this.unsubscribe()},a.prototype.maybeShowFirstTimeTooltip=function(){this.showMessageInMobileEditPanel(),this.showMessageInDesktopEditHeaderPanel()},a.prototype.showMessageInMobileEditPanel=function(){var a="first-time-in-mobile-content-panel";this.applicationState.isInMobileEditMode()&&!this.storyServices.story.popupConfigurations[a]&&(this.showAssistiveMessage("node-editor-wrapper","tip_content.first-time-mobile-content-panel"),this.storyServices.story.popupConfigurations[a]=!0,$(".intro-tooltip").addClass("content-panel-tooltip-top"))},a.prototype.showMessageInDesktopEditHeaderPanel=function(){var a="first-time-in-desktop-header-panel";this.flags.fieldsMasks&&this.applicationState.isInEditMode()&&!this.applicationState.isInMobileEditMode()&&this.applicationState.isHeaderContent()&&!this.storyServices.story.popupConfigurations[a]&&(this.showAssistiveMessage("node-editor-wrapper","tip_content.first-time-desktop-content-panel"),this.storyServices.story.popupConfigurations[a]=!0,$(".intro-tooltip").addClass("content-panel-tooltip-top"))},a.prototype.showAssistiveMessage=function(a,b){this.assistiveMessage.show({target:$('[data-hook="'+a+'"]'),xOffset:-4,durationBeforeEntrance:500,durationOfEntrance:300,durationOfExit:300,animationXOffset:-20,animationYOffset:0,text:this.$translate.instant(b)})},a.prototype.onLinkItemEdit=function(a){return this.contentElementFieldManager.onLinkItemEdit(a,this.node,BIOrigins.EditPanel)},Object.defineProperty(a.prototype,"contentElement",{get:function(){return this.node?this.node.contentElement:null},enumerable:!0,configurable:!0}),a.prototype.getLayoutArgs=function(a){var b=null;return a&&(this.overlaySegmentManager.isActiveSegmentNodeId(this.node.id,this.node.contentElement.isSpecialListItem())||this.overlaySegmentManager.isActiveSegmentNodeId("header",!1)&&"GeneralDescription"===this.node.contentElementType)&&(b=a),b},a.prototype.temporaryHighlight=function(a){this.setLastHoveredField(a),this.resetHoveredFieldWithDelay()},Object.defineProperty(a.prototype,"fields",{get:function(){return this.isInMobileEditMode()?_.filter(this._fields,"visible"):this._fields},enumerable:!0,configurable:!0}),a.prototype.updateToggleDisable=function(){if(this.isInMobileEditMode()){var a=this.fields.filter(function(a){return a.active});this._fields.forEach(function(b){return b.lastActiveField=1===a.length&&a[0]===b})}},a.prototype.onFieldToggle=function(a){this.onAnyFieldToggle&&this.onAnyFieldToggle(),this.contentElementFieldManager.toggleField(a,this.node,BIOrigins.EditPanel),this.updateToggleDisable()},Object.defineProperty(a.prototype,"nodeId",{get:function(){return this.node.id},enumerable:!0,configurable:!0}),a.prototype.prepareFields=function(){this._fields=this.contentElementFieldManager.getNodeAndReferencedFields(this.contentElement,this.node),this.updateToggleDisable(),!this.flags.mergedHeader&&this.applicationState.isHeaderContent()&&this.addFixedHeaderField(),this.fields.length>0&&(this.fields[this.fields.length-1].lastField=!0)},a.prototype.addFixedHeaderField=function(){var a=this,b={key:"fixedHeader",contentElement:this.contentElement,data:{type:core.ElementTypes.FixedHeader,subType:core.ElementSubTypes.FixedHeader,value:!0,displayName:"Freeze Header",helpTooltip:"header_fixed_header"}};Object.defineProperty(b,"active",{get:function(){return a.wizardService.isFixedHeader()},set:function(b){a.wizardService.setFixedHeader(b)},enumerable:!0,configurable:!0}),this.fields.unshift(b)},a}();angular.module("siteGeneratorEditorInternal").component("contentElementEditor",{templateUrl:"views/editor/content-element-editor.html",controller:ContentElementEditor,bindings:{node:"=",onItemToPage:"&",isItem:"=",onAnyFieldToggle:"&?"}});var NodeEditor=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M){var N=this;this.onstageActionsManager=a,this.ONSTAGE_EVENTS=b,this.$stateParams=c,this.$scope=d,this.$rootScope=e,this.$state=f,this.modelTree=g,this.nodeFetcher=h,this.simpleSolutionManager=i,this.sectionManager=j,this.wizardService=k,this.layoutSelectionStoreProvider=l,this.applicationState=m,this.storyServices=n,this.undoRedo=o,this.$element=p,this.notification=q,this.tipManager=r,this.TipManagerTypeMap=s,this.linkDetailsManager=t,this.mediaOverrideManager=u,this.initService=v,this.spinnerService=w,this.consumerBiLogger=x,this.flags=y,this.osUtils=z,this.focusKeeper=A,this.nodeChangeReporter=B,this.contentManager=C,this.colorationUtils=D,this.mobileSolutionManager=E,this.logoExtractionPopupService=F,this.layoutSolver=G,this.lssModifier=H,this.sitePartTypes=I,this.logoHandler=J,this.editorEventManager=K,this.nodeEditorManager=L,this.contentElementFieldManager=M,this.unsubscribers=[],this.showNested=!1,v.loaded().then(function(){return C.initialize(n.story)}).then(function(){N.init(),N.initEventHandlers()}),d.$on(UndoEvents.STORY_REVISION_CHANGED,function(){N.init()})}return a.$inject=["onstageActionsManager","ONSTAGE_EVENTS","$stateParams","$scope","$rootScope","$state","modelTree","nodeFetcher","simpleSolutionManager","sectionManager","wizardService","layoutSelectionStoreProvider","applicationState","storyServices","undoRedo","$element","notification","tipManager","TipManagerTypeMap","linkDetailsManager","mediaOverrideManager","initService","spinnerService","consumerBiLogger","flags","osUtils","focusKeeper","nodeChangeReporter","contentManager","colorationUtils","mobileSolutionManager","logoExtractionPopupService","layoutSolver","lssModifier","sitePartTypes","logoHandler","editorEventManager","nodeEditorManager","contentElementFieldManager"],a.prototype.init=function(){var a=this.nodeFetcher.getNode(this.nodeId);this.node=a&&a.node,this.sitePart=a&&a.sitePart,this.node?(this.nodeChangeReporter.init(this.node),this.childId&&(this.isItemEditor?this.showItemEditor():this.isSocialEditor&&this.showSocialEditor()),this.tipManager.show(this.TipManagerTypeMap.EDIT,this.node.alias||this.node.contentElementType)):this.applicationState.goToBuilder()},a.prototype.$onDestroy=function(){this.unsubscribers.forEach(function(a){return a()})},a.prototype.isTpa=function(){return this.node.isTpaNode()},a.prototype.initEventHandlers=function(){var a=this;this.unsubscribers=[this.editorEventManager.onNodeChanged(function(b){return a.updateViewer(b)}),this.editorEventManager.onEditListItem(function(b){return a.loadItemEditor(b.item)}),this.editorEventManager.onItemToPage(function(b){return a.itemToPage(b.item)}),this.editorEventManager.onEditSocial(function(){return a.loadSocialEditor()}),this.editorEventManager.onClosePanel(function(b){return a.handleClose()})],this.unsubscribers.push(this.onstageActionsManager.subscribe(this.ONSTAGE_EVENTS.EDIT_CONTENT,function(){a.isSocialEditor&&a.handleClose()}))},a.prototype.itemToPage=function(a){this.makeIntoPage(this.getRealItem(a))},a.prototype.getRealItem=function(a){return _.find(this.node.children,function(b){return b.id===a.id})},a.prototype.updateViewer=function(a){switch(a.whatChanged){case IEditEventType.ParagraphColumnsToggle:this.toggleParagraphColumns(a);break;case IEditEventType.SetMapStyle:this.setMapStyle(a);break;default:this.handleMediaChange(a)}},a.prototype.toggleParagraphColumns=function(a){this.lssModifier.toggleParagraphColumns(a.node),this.nodeEditorManager.updateViewer(a)},a.prototype.setMapStyle=function(a){var b=this.onstageActionsManager.getSegment(),c=this.layoutSelectionStoreProvider.getLayoutSelectionStore(),d=c.getMapStyleOverride(b,a.field.subType),e=a.extraData.name;e!==d&&(c.setMapStyleOverride(b,a.field.subType,e),this.nodeEditorManager.updateViewer(a))},a.prototype.fullUpdateViewer=function(a){this.nodeEditorManager.updateViewer(a),this.updateViewer(a)},a.prototype.handleMediaChange=function(a){if(a.field.value&&a.field.value.media&&a.field.value.text){var b=_.find(a.node.contentElement.values,{type:core.ElementTypes.Media});b&&(b.value[0]=a.field.value.media);var c=this.$element.find(".nested-panel ng-transclude");c.scrollTop(0),c.perfectScrollbar("update")}},a.prototype.loadItemEditor=function(a){this.nodeEditorManager.loadItemEditor(a)},a.prototype.loadSocialEditor=function(){this.nodeEditorManager.loadSocialEditor()},a.prototype.showItemEditor=function(){var a=this,b=_.find(this.node.children,function(b){return b.id===a.childId});void 0!==b&&(this.showNested=!0,this.editedNode=b)},a.prototype.showSocialEditor=function(){this.showNested=!0,this.editedNode=this.node},Object.defineProperty(a.prototype,"showMediaSettings",{get:function(){return this.nodeEditorManager.mediaSettingsActive},enumerable:!0,configurable:!0}),a.prototype.showMediaSettingsEditor=function(){this.$state.go(config.STATES.BUILDER_MEDIA_SETTINGS,this.$stateParams)},a.prototype.hideMediaSettingsEditor=function(){this.$state.go(config.STATES.BUILDER_EDIT,this.$stateParams)},Object.defineProperty(a.prototype,"isList",{get:function(){return"contentElementList"===this.node.getNodeType()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isItemEditor",{get:function(){return this.nodeEditorManager.isItemEditor()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isSocialEditor",{get:function(){return this.nodeEditorManager.isSocialEditor()},enumerable:!0,configurable:!0}),a.prototype.handleClose=function(){this.showNested?(this.showNested=!1,this.editedNode=null,this.$state.go(".",{childId:void 0})):this.applicationState.goToBuilder(!0)},a.prototype.makeIntoPage=function(a){this.nodeEditorManager.makeIntoPage(a)},a}();angular.module("siteGeneratorEditorInternal").component("nodeEditor",{templateUrl:"views/editor/node-editor.html",controller:NodeEditor,bindings:{nodeId:"=",childId:"=?"}});var NameInMenuEditor=function(){function a(a,b,c,d,e){var f=this;this.undoRedo=a,this.$scope=b,this.consumerBiLogger=c,this.menuService=d,this.flags=e,this.validator=function(a){return a.trim().length>0},this.defaultName=this.node.alias||this.node.contentElementType,this.value=this.initialValue,this.$scope.$watch(function(){return f.node.getMetadatum(MenuService.NameInMenu)},function(){f.value=f.initialValue,f.menuService.updateLinkToNode(f.node,f.value)})}return a.$inject=["undoRedo","$scope","consumerBiLogger","menuService","flags"],Object.defineProperty(a.prototype,"initialValue",{get:function(){return this.node.getMetadatum(MenuService.NameInMenu)||this.defaultName},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rectifiedValue",{get:function(){return this.validator(this.value)?this.value.trim():this.defaultName},enumerable:!0,configurable:!0}),a.prototype.onChangeValue=function(a){this.value=a.trim(),this.menuService.updateLinkToNode(this.node,this.rectifiedValue)},a.prototype.onBlur=function(){this.value=this.rectifiedValue,this.value!==this.initialValue&&(this.consumerBiLogger.contentEditor.updateField(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias||"","nameInMenu","text"),this.node.setMetadatum(MenuService.NameInMenu,this.value),this.undoRedo.captureOperation(!1),this.consumerBiLogger.contentEditor.fieldWasUpdatedSuccess(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias||"","nameInMenu","text",this.value,this.value.length,0,void 0))},a.prototype.onToggle=function(){var a=!this.node.getMetadatum(MenuService.HiddenFromMenu);this.consumerBiLogger.contentEditor.clickOnHideUnhideComponent(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias||"","showInMenu","text",a?"hide":"unhide",BIOrigins.EditPanel),this.node.setMetadatum(MenuService.HiddenFromMenu,a),this.menuService.updateLinkToNodeVisibility(this.node),this.undoRedo.captureOperation(!1),this.consumerBiLogger.contentEditor.componentWasHiddenSuccess(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias||"","showInMenu","text",a?"hide":"unhide",BIOrigins.EditPanel)},a.prototype.isActive=function(){return!this.node.getMetadatum(MenuService.HiddenFromMenu)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("nameInMenuEditor",{templateUrl:"views/editor/name-in-menu-editor.html",controller:NameInMenuEditor,bindings:{node:"="}});var TpaEditor=function(){function a(a,b,c,d,e,f){var g=this;this.$rootScope=a,this.$scope=b,this.tpaService=c,this.applicationState=d,this.editorEventManager=e,this.flags=f,this.$scope.$watch("$ctrl.node",function(a){return g.init()}),this.deregisterCloseEvent=this.$rootScope.$on(TpaSettings.TPA_EVENT_CLOSE_WINDOW,function(){g.flags.tpaSettingsRefresh&&g.init()})}return a.$inject=["$rootScope","$scope","tpaService","applicationState","editorEventManager","flags"],a.prototype.$onDestroy=function(){this.deregisterCloseEvent()},a.prototype.init=function(){this.node&&this.canEdit(this.node)?(this.compRef=this.node.isTpa?this.tpaService.getCompRef(this.node.contentElementType):this.node.widgetRef,this.applicationState.setSelectedTpaComponentRef(this.compRef),this.iFrameUrl=this.tpaService.getEditWidgetUrl(this.node)+"&"+(new Date).getTime()):this.applicationState.goToBuilder()},a.prototype.canEdit=function(a){var b=!0;return a.isTpaNode()&&(b=this.tpaService.getEditWidgetUrl(a)),b},a.prototype.onClose=function(){this.editorEventManager.closePanel(this.node.id)},a}();angular.module("siteGeneratorBuilderInternal").component("tpaEditor",{templateUrl:"views/editor/tpa-editor.html",controller:TpaEditor,bindings:{node:"="}});var IEditEventType;!function(a){a[a.ValueChange=0]="ValueChange",a[a.TypeChange=1]="TypeChange",a[a.VisibilityChange=2]="VisibilityChange",a[a.AlignmentChange=3]="AlignmentChange",a[a.GalleryLayoutChange=4]="GalleryLayoutChange",a[a.VideoSettingsChange=5]="VideoSettingsChange",a[a.MediaTitleChange=6]="MediaTitleChange",a[a.MediaDescriptionChange=7]="MediaDescriptionChange",a[a.ParagraphColumnsToggle=8]="ParagraphColumnsToggle",a[a.OverrideTextColor=9]="OverrideTextColor",a[a.SetMapStyle=10]="SetMapStyle"}(IEditEventType||(IEditEventType={}));var EditorEvents=function(){function a(){}return a}();EditorEvents.FIELD_CHANGED="fieldChanged",EditorEvents.NODE_FIELD_CHANGED="nodeFieldChanged",EditorEvents.EDIT_LIST_ITEM="editListItem",EditorEvents.ITEM_TO_PAGE="itemToPage",EditorEvents.EDIT_SOCIAL="editSocial",EditorEvents.CLOSE_PANEL="closePanel";var EditorEventManager=function(){function a(a){this.$rootScope=a}return a.$inject=["$rootScope"],a.prototype.fieldChanged=function(a,b,c,d,e){void 0===b&&(b=!1),void 0===c&&(c=IEditEventType.ValueChange);var f={contentElementField:a,key:a.key,field:a.data,maskChanged:b,whatChanged:c,extraData:e};d&&(f.BIOrigin=d),this.send(EditorEvents.FIELD_CHANGED,f)},a.prototype.nodeChangedOnFieldChanged=function(a){var b=this;return this.onReceive(EditorEvents.FIELD_CHANGED,function(c){var d=a(c);b.send(EditorEvents.NODE_FIELD_CHANGED,_.assign(c,d))})},a.prototype.nodeChanged=function(a){this.send(EditorEvents.NODE_FIELD_CHANGED,a)},a.prototype.editListItem=function(a){this.send(EditorEvents.EDIT_LIST_ITEM,{item:a})},a.prototype.itemToPage=function(a){this.send(EditorEvents.ITEM_TO_PAGE,{item:a})},a.prototype.editSocial=function(){this.send(EditorEvents.EDIT_SOCIAL,{})},a.prototype.closePanel=function(a){this.send(EditorEvents.CLOSE_PANEL,{id:a})},a.prototype.onNodeChanged=function(a){return this.onReceive(EditorEvents.NODE_FIELD_CHANGED,a)},a.prototype.onEditListItem=function(a){return this.onReceive(EditorEvents.EDIT_LIST_ITEM,a)},a.prototype.onItemToPage=function(a){return this.onReceive(EditorEvents.ITEM_TO_PAGE,a)},a.prototype.onEditSocial=function(a){return this.onReceive(EditorEvents.EDIT_SOCIAL,a)},a.prototype.onClosePanel=function(a){return this.onReceive(EditorEvents.CLOSE_PANEL,a)},a.prototype.send=function(a,b){this.$rootScope.$emit(a,b)},a.prototype.onReceive=function(a,b,c){return void 0===c&&(c=!0),this.$rootScope.$on(a,function(a,d){c&&a.preventDefault(),b(d)})},a}();angular.module("siteGeneratorEditorInternal").service("editorEventManager",EditorEventManager);var MediaEditor=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F){var G=this;this.onstageActionsManager=a,this.ONSTAGE_EVENTS=b,this.$scope=c,this.undoRedo=d,this.overlaySegmentManager=e,this.overlayManager=f,this.mediaGallery=g,this.consumerMediaUtils=h,this.$compile=i,this.notification=j,this.applicationState=k,this.flags=l,this.storyServices=m,this.mediaOverrideManager=n,this.$timeout=o,this.consumerBiLogger=p,this.consumerBiLoggerHelpers=q,this.previewScale=r,this.linkEditorCAB=s,this.cropFaceService=t,this.mediaEditorManager=u,this.previewListCAB=v,this.$element=w,this.slideShowService=x,this.columnService=y,this.selections=z,this.sectionMedia=A,this.mediaSectionUtils=B,this.$stateParams=C,this.pubSub=D,this.CcDialogBuilder=E,this.$translate=F,this.overrideToggleDisabled=!1,this.unsubscribers=[],this.handleMediaChange=function(a){a&&a.changed&&G.onMediaChange({whatChanged:IEditEventType.ValueChange})},this.fixExtVideoThumbnail(),void 0===this.active&&(this.active=!0),this.flags.sectionMedia&&this.updateCurrentMedia(),this.mediaEditorManager.setCurrentMediaType(this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(this.node)),this.isInMobileEditMode=this.applicationState.isInMobileEditMode(),this.visibleMediaTypes=this.getVisibleMediaTypes(),this.updateCurrentMediaType(),this.label=this.initLabel(),this.tabLabels=this.initTabLabels(),this.disableMediaChangeButton=this.isInMobileEditMode,this.seg=this.mediaEditorManager.getCurrentSegment(),this.initImageFitMode(),this.initAlignmentDropdown(),this.disableToggleIfAllColumnBackgroundsHaveMedia(),this.flags.sectionMedia&&this.unsubscribers.push(this.pubSub.subscribe(PubSub.events.MEDIA_CHANGED_BY_SYSTEM,function(){return G.updateCurrentMediaType()}))}return a.$inject=["onstageActionsManager","ONSTAGE_EVENTS","$scope","undoRedo","overlaySegmentManager","overlayManager","mediaGallery","consumerMediaUtils","$compile","notification","applicationState","flags","storyServices","mediaOverrideManager","$timeout","consumerBiLogger","consumerBiLoggerHelpers","previewScale","linkEditorCAB","cropFaceService","mediaEditorManager","previewListCAB","$element","slideShowService","columnService","selections","sectionMedia","mediaSectionUtils","$stateParams","pubSub","CcDialogBuilder","$translate"],a.prototype.$onDestroy=function(){this.unsubscribers.forEach(function(a){return a()})},a.prototype.fixExtVideoThumbnail=function(){var a=this;this.media&&this.media.filter(function(a){return a.mediaType===core.MediaItemTypes.ExtVideo}).forEach(function(b){return a.consumerMediaUtils.addExtVideoThumbnail(b)})},a.prototype.updateCurrentMedia=function(){this.active=this.active||this.mediaSectionUtils.nodeHasBackground(this.node),this.currentMedia=this.sectionMedia.getMedia(this.node)},a.prototype.updateCurrentMediaType=function(){this.currentTab=this.getCurrentTab()},a.prototype.disableToggleIfAllColumnBackgroundsHaveMedia=function(){var a=this;if(this.isInMobileEditMode&&this.seg&&!this.toggleDisabled){var b=this.seg.containingLG.getDesktopLG();if(b.columns){var c=_.flatten(b.columns);this.overrideToggleDisabled=this.toggleDisabled=_.every(c,function(b){return a.columnService.hasMediaBackground(b)})}}},a.prototype.isToggleDisabled=function(){return this.overrideToggleDisabled||this.toggleDisabled},a.prototype.changeLink=function(){var a=this.mediaOverrideManager.getActiveMediaValue(this.node),b={linkDetails:a.Link,node:this.node,biSource:"media"};this.linkEditorCAB.show(b).then(function(b){return a.Link=b})},a.prototype.initAlignmentDropdown=function(){var a=this;this.flags.alignmentDropDownInFirstPanel&&this.seg&&(this.imageAlignmentOptions=this.mediaOverrideManager.listAlignmentOptions(),this.$scope.$watch(function(){return a.seg.getAlignment()},function(b){a.selectedImageAlignment=a.mediaOverrideManager.getAlignmentOption(b)})),this.flags.alignmentDropDownInFirstPanel&&this.seg&&this.$scope.$watch(function(){return a.seg.getAlignment()},function(b){var c=ImagePositions.getLabelDetailsByPosName(b);a.selectedPositionName=c.selectedPosition,a.selectedPositionImage=c.imagePosition,a.selectedPositionIndex=ImagePositions.invertedPosToDetails[b]})},a.prototype.toggle=function(a){var b=this;this.flags.sectionMedia&&!this.applicationState.isInMobileEditMode()||!this.onToggle?this.sectionMedia.toggle(this.node,a,this.field).then(function(){b.updateCurrentMedia(),b.updateCurrentMediaType()}):this.onToggle({visibility:a})},a.prototype.openCropper=function(a,b){this.mediaEditorManager.openCropper()},a.prototype.mediaTypeChange=function(a){var b=this;this.mediaEditorManager.setCurrentMediaType(a),this.consumerMediaUtils.biSwitchMediaTypeClick(this.node,a),this.initImageFitMode();var c=this.mediaOverrideManager.getAllowedMediaOverride(this.node)===PresetMediaTypes.COAST2COAST,d=this.mediaOverrideManager.getAllowedMediaOverride(this.node)===PresetMediaTypes.COLUMNBG;switch(a){case cc.MediaPreviewType.SingleImage:
this.mediaOverrideManager.setMediaOverride(this.node,c?MediaOverrideManager.MO_STRIP_IMAGE:MediaOverrideManager.MO_IMAGE),this.mediaOverrideManager.setFitMode(this.node,this.imageFitMode);break;case cc.MediaPreviewType.MultipleImages:this.mediaOverrideManager.setMediaOverride(this.node,c?MediaOverrideManager.MO_STRIP_SLIDESHOW:MediaOverrideManager.MO_SLIDESHOW);break;case cc.MediaPreviewType.ExtVideo:this.mediaOverrideManager.setMediaOverride(this.node,MediaOverrideManager.MO_VIDEO);break;case cc.MediaPreviewType.Video:this.mediaOverrideManager.setMediaOverride(this.node,d?MediaOverrideManager.MO_WIX_VIDEO:MediaOverrideManager.MO_STRIP_VIDEO);break;case cc.MediaPreviewType.Shape:this.setSmallImageOverrideWithOnlyOneVisibleMediaByType("shape");break;case cc.MediaPreviewType.Clipart:this.setSmallImageOverrideWithOnlyOneVisibleMediaByType("clipart")}this.initAlignmentDropdown(),this.onMediaChange({whatChanged:IEditEventType.TypeChange}),(this.node.isListItem||this.node.nodeDescription&&this.node.nodeDescription.isListItem)&&"ListHeader"!==this.node.contentElementType&&"ListFooter"!==this.node.contentElementType&&this.notification.show("toasters.list-item-media-type-changed","general.undo",function(){b.undoRedo.undo()})},a.prototype.mediaChange=function(a){var b=this;this.disableMediaChangeButton||(this.disableMediaChangeButton=!0,this.consumerMediaUtils.biReplaceMediaClick(this.node,a),this.consumerMediaUtils.biCheckIfReplaceLogoClick(this.node,BIOrigins.HeaderPanel),this.consumerBiLoggerHelpers.organizeMediaNode=this.node,this.mediaEditorManager.mediaChange(this.field,this.contentElement,BIOrigins.EditPanel).then(this.handleMediaChange).finally(function(){b.disableMediaChangeButton=!1}))},a.prototype.changeGallery=function(){var a=this,b=this.mediaOverrideManager.getAvailableGalleries(this.node),c=this.mediaOverrideManager.getAllowedMediaOverride(this.node),d=!1;this.CcDialogBuilder.show({autoWrap:!1,hasBackdrop:!1,templateUrl:"views/editor/gallery-picker.html",clickOutsideToClose:!0,onRemoving:function(){d||a.consumerBiLogger.contentEditor.galleryLayoutWindowClosed(a.node.getId(),a.node.getSpecificContentElementType(),a.node.alias,null,b.length,c===PresetMediaTypes.SHAPE?"shape":c===PresetMediaTypes.COAST2COAST?"full width":c===PresetMediaTypes.IMAGE?"image":"")},controller:["$scope","CcDialogBuilder",function(e,f){e.galleries=b,e.onSelect=function(e){e&&e.gallery&&a.mediaOverrideManager.setGallery(a.node,e.gallery)&&(d=!0,a.onMediaChange({whatChanged:IEditEventType.GalleryLayoutChange}),a.consumerBiLogger.contentEditor.galleryLayoutChanged(a.node.getId(),a.node.getSpecificContentElementType(),a.node.alias,e.gallery.name,b.length,b.indexOf(e),c===PresetMediaTypes.SHAPE?"shape":c===PresetMediaTypes.COAST2COAST?"full width":c===PresetMediaTypes.IMAGE?"image":"")),f.hide()},e.getDisplayName=function(a){return a.name},a.consumerBiLogger.contentEditor.galleryLayoutWindowOpened(a.node.getId(),a.node.getSpecificContentElementType(),a.node.alias,b.length,c===PresetMediaTypes.SHAPE?"shape":c===PresetMediaTypes.COAST2COAST?"full width":c===PresetMediaTypes.IMAGE?"image":"")}]})},a.prototype.openSettingsPanel=function(){this.consumerBiLogger.contentEditor.mediaSettingsShow(this.node.getId(),this.node.getContentElementType(),this.node.alias,this.consumerMediaUtils.mediaTypeToString(this.mediaEditorManager.getCurrentMediaType()),this.consumerMediaUtils.mediaTypeToGalleryType(this.mediaEditorManager.getCurrentMediaType())),this.nodeEditorCtrl.showMediaSettingsEditor()},a.prototype.onReplace=function(){this.applicationState.goToMediaSettingsPanel(this.$stateParams.childId)},a.prototype.setSmallImageOverrideWithOnlyOneVisibleMediaByType=function(a){this.toggleAllMediaByType("shape",!1),this.toggleAllMediaByType("clipart",!1),this.toggleFirstMediaByType(a,!0),this.contentElement.fillValuesByMediaType(),this.mediaOverrideManager.setMediaOverride(this.node,MediaOverrideManager.MO_IMAGE)},a.prototype.toggleAllMediaByType=function(a,b){var c=this,d=this.getMediaField();this.contentElement.hiddenMedia[a]=this.contentElement.hiddenMedia[a]||{};var e=_.get(this.contentElement.hiddenMedia,a);_.forEach(d.value,function(d){d.mediaType===a&&(e[c.mediaGallery.getItemId(d)]=!b)})},a.prototype.initImageFitMode=function(){var a=_.get(this,"applicationState.contentFocus.sitePart");this.imageFitMode=this.flags.imageFitMode&&!this.applicationState.isInMobileEditMode()&&"body"===a&&this.mediaOverrideManager.isFitMode(this.node)},a.prototype.toggleFirstMediaByType=function(a,b){var c=this.getMediaField(),d=_.find(c.value,function(b){return b.mediaType===a});if(d){this.contentElement.hiddenMedia[a]=this.contentElement.hiddenMedia[a]||{};_.get(this.contentElement.hiddenMedia,a)[this.mediaGallery.getItemId(d)]=!b}},a.prototype.showNewMediaControl=function(){return this.flags.sectionMedia&&!this.applicationState.isInMobileEditMode()},a.prototype.getMediaField=function(){return _.find(this.contentElement.values,function(a){return"media"===a.type})},a.prototype.getCurrentTab=function(){return this.flags.sectionMedia?this.sectionMedia.getMediaType(this.node):this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(this.node)},a.prototype.getVisibleMediaTypes=function(){if(this.isInMobileEditMode)return[this.currentTab];switch(this.mediaOverrideManager.getAllowedMediaOverride(this.node)){case PresetMediaTypes.SHAPE:return[cc.MediaPreviewType.Clipart,cc.MediaPreviewType.Shape];case PresetMediaTypes.IMAGE:return this.getAllowedMediaTypes([cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages,cc.MediaPreviewType.ExtVideo]);case PresetMediaTypes.COAST2COAST:return this.getAllowedMediaTypes([cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages,cc.MediaPreviewType.Video]);case PresetMediaTypes.AGGREGATOR:return[cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages];case PresetMediaTypes.COLUMNBG:return[cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.Video];default:return[cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages,cc.MediaPreviewType.ExtVideo]}},a.prototype.getAllowedMediaTypes=function(a){return this.flags.listItemSlideShow&&this.node.isListItem&&this.slideShowService.isSlideShow(this.node.identifyingNode)?a.filter(function(a){return a!==cc.MediaPreviewType.MultipleImages}):a},a.prototype.initLabel=function(){return"GeneralDescription"===this.node.getContentElementType()?this.$translate.instant("builder.field-editor.single.logo"):this.$translate.instant("builder.field-editor.single.media")},a.prototype.initTabLabels=function(){if("GeneralDescription"===this.node.getContentElementType()){var a={};return a[cc.MediaPreviewType.Shape]=this.$translate.instant("editor.media-settings.logo.shape"),a[cc.MediaPreviewType.Clipart]=this.$translate.instant("editor.media-settings.logo.image"),a}return null},Object.defineProperty(a.prototype,"isImageCropEnabled",{get:function(){if(this.isInMobileEditMode)return!1;if(this.imageFitMode)return!1;var a=this.mediaOverrideManager.getAllowedMediaOverride(this.node);return a!==PresetMediaTypes.COAST2COAST&&a!==PresetMediaTypes.COLUMNBG},enumerable:!0,configurable:!0}),a.prototype.onDontCropChange=function(a){var b=this,c=this.imageFitMode,d=a?builder.PresetsStrategyType.FitMode:builder.PresetsStrategyType.UnFitMode,e=a?"fitmode":"unfitmode";this.imageFitMode=a,this.previewListCAB.show({target:this.$element.find('[data-hook="media-preview"]'),title:"popups."+e+".heading",text:"popups."+e+".text",nodes:[this.node.identifyingNode],strategyType:d}).then(function(a){a||(b.imageFitMode=c)})},a.prototype.canChangeAlignment=function(){return this.flags.alignmentDropDownInFirstPanel&&!this.isInMobileEditMode&&this.seg&&this.seg.shouldAlignImage()},a.prototype.changeAlignment=function(a){var b=_.get(this,"seg.node.contentElement.allValuesByMediaType.image[0].relativeUri");this.seg.updateAlignment(b,a),this.onMediaChange({whatChanged:IEditEventType.AlignmentChange})},a.prototype.onPositionClicked=function(a){this.changeAlignment(a)},a.prototype.onAlignmentChange=function(a){this.changeAlignment(a.value)},a}();angular.module("siteGeneratorEditorInternal").component("mediaEditor",{templateUrl:"views/editor/media-editor.html",require:{nodeEditorCtrl:"^?nodeEditor"},controller:MediaEditor,bindings:{media:"=",field:"=",active:"<?",node:"=",contentElement:"=",onMediaChange:"&",onToggle:"&",mediaTooltip:"@?",onTooltipLinkClick:"&?",toggleDisabled:"="}});var PreviewModeToggle=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=this;this.CcDialogBuilder=a,this.$q=b,this.previewService=c,this.documentServicesMediator=d,this.undoRedo=e,this.previewScale=f,this.pagesManager=g,this.storyServices=h,this.overlayManager=i,this.applicationState=j,this.$window=k,this.consumerBiLogger=l,this.iframeViewAdapter=m,this.viewerHeightController=n,this.$scope=o,this.assistantManager=p,this.flags=q,this.spinnerService=r,this.tpaService=s,this.isClosing=!1,this.tpaAppsToRefreshAfterMobilePreview=["Stores"],this.$scope.$on("$stateChangeStart",function(a,b,c,d){!_.include(b.name,config.STATES.BUILDER_STORY_PREVIEW)&&_.include(d.name,config.STATES.BUILDER_STORY_PREVIEW)&&(t.applicationState.setMobilePreviewDisplay(!1),t.overlayManager.clearDropTarget(),t.previewService.setPreviewMode(!1),t.$window.viewer.document.body.scrollLeft=0,t.$window.viewer.document.body.scrollTop=0)})}return a.$inject=["CcDialogBuilder","$q","previewService","documentServicesMediator","undoRedo","previewScale","pagesManager","storyServices","overlayManager","applicationState","$window","consumerBiLogger","iframeViewAdapter","viewerHeightController","$scope","assistantManager","flags","spinnerService","tpaService"],a.prototype.refreshTpaApps=function(){var a=this;_.each(this.tpaAppsToRefreshAfterMobilePreview,function(b){a.tpaService.refreshApp(b)})},a.prototype.hideMobilePreview=function(){var a=this;this.isNewMobilePreview()&&this.applicationState.isInDesktopEditMode()||!this.isNewMobilePreview()&&!this.applicationState.isMobilePreviewDisplay()||(this.consumerBiLogger.builder.previewSiteSwitchToMobileDesktopView("desktop"),(this.flags.newMobilePreview||this.flags.mobileEditor)&&this.applicationState.disableMobileEditor(!0).then(function(){return a.previewService.setPreviewMode(!0)}),this.iframeViewAdapter.prepareForPreview(),this.applicationState.setMobilePreviewDisplay(!1),this.CcDialogBuilder.hide(),this.refreshTpaApps())},a.prototype.openMobilePreview=function(){var a=this;if(!this.applicationState.isMobilePreviewDisplay()&&!this.applicationState.isInMobileEditMode()){if(this.spinnerService.waitForMe("mobilePreview"),this.consumerBiLogger.builder.previewSiteSwitchToMobileDesktopView("mobile"),this.isNewMobilePreview())return void this.$q.when().then(function(){return a.applicationState.isPreviewDisplay()?a.previewService.setPreviewMode(!1):void 0}).then(function(){return a.flags.mobileEditor&&a.storyServices.calculateAndRenderDesktopAndMobilePages("all")}).then(function(){return a.applicationState.enableMobileEditor()}).then(function(){return a.applicationState.isPreviewDisplay()?a.previewService.setPreviewMode(!0):void 0}).then(function(){return a.iframeViewAdapter.prepareForPreview()}).then(function(){return a.spinnerService.imDone("mobilePreview")});var b=void 0;b=this.applicationState.isSupportStaffEditing()?this.$q.when():this.undoRedo.manualSave(),b.then(function(){a.isClosing||(a.applicationState.setMobilePreviewDisplay(!0),a.applicationState.mobilePreviewUrl(a.previewService.mobilePreviewUrl(a.storyServices.siteId,a.storyServices.metaSiteId)),a.applicationState.mobilePreviewPageId(a.pagesManager.getCurrentPageName())),a.spinnerService.imDone("mobilePreview")})}},a.prototype.onStopPreview=function(){this.isClosing=!0,this.assistantManager.setDockStatus(builders.AssistantDockStatus.Stopped),this.consumerBiLogger.builder.previewSiteClosePage(),this.applicationState.setMobilePreviewDisplay(!1),this.applicationState.isMobilePreviewDisplay()&&this.refreshTpaApps(),this.applicationState.returnFromPreview(),this.$window.viewer.document.body.scrollLeft=0,this.$window.viewer.document.body.scrollTop=0,this.applicationState.isInMobileEditMode()&&(this.flags.mobileEditor?this.previewScale.reset():this.applicationState.disableMobileEditor(!1)),this.iframeViewAdapter.exitPreview(),this.viewerHeightController.resetHeight()},a.prototype.isMobilePreview=function(){return this.isNewMobilePreview()?this.applicationState.isInMobileEditMode():this.applicationState.isMobilePreviewDisplay()},a.prototype.isNewMobilePreview=function(){return(this.flags.newMobilePreview||this.flags.mobileEditor)&&this.storyServices.story&&this.storyServices.story.mobileEditorActive},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("previewModeToggle",{templateUrl:"views/preview/preview-mode-toggle.html",controller:PreviewModeToggle,bindings:{}});var SeoPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=this;this.modelTree=a,this.$state=b,this.$scope=c,this.$stateParams=d,this.$window=e,this.CcDialogBuilder=f,this.$translate=g,this.$timeout=h,this.previewService=i,this.documentServicesMediator=j,this.pagesManager=k,this.rendererSeo=l,this.undoRedo=m,this.initService=n,this.consumerBiLogger=o,this.consumerBiLoggerHelpers=p,this.tpaService=q,this.staticsUrls=r,this.flags=s,this.CONSUMER_DIALOGS=t,this.pubSub=u,this.validation=v,this.seo=w,this.seoErrorHandler={pageTitleSEO:{isValid:!0,isRequired:!0,validatorConfigKey:"title",isErrorShown:!1},descriptionSEO:{isValid:!0,validatorConfigKey:"description",isErrorShown:!1},metaKeywordsSEO:{isValid:!0,validatorConfigKey:"keywords",isErrorShown:!1},pageUriSEO:{isValid:!0,isRequired:!0,validatorConfigKey:"url",isErrorShown:!1}},this.state={},this.defaults={},this.config={description:{validation:{validator:function(a){var b=a||"";return x.documentServicesMediator.validateSeoDescription(b)},tooltip:"seo_description_validation"},helpTooltip:"seo_description_tooltip",placeholder:this.$translate.instant("seo_panel.description.placeholder")},title:{validation:{validator:function(a){var b=a||"";return x.documentServicesMediator.validateSeoTitle(b)},tooltip:"seo_title_validation"},helpTooltip:"seo_title_tooltip"},keywords:{validation:{validator:function(a){var b=a||"";return x.documentServicesMediator.validateSeoKeywords(b)},tooltip:"seo_keywords_validation"},helpTooltip:"seo_keywords_tooltip",placeholder:this.$translate.instant("seo_panel.keywords.placeholder")},url:{validation:{validator:function(a){var b=a||"";return x.validation.isPageName(b)},tooltip:"seo_url_validation"},helpTooltip:"seo_url_tooltip"}},this.indexableCheckbox={label:this.$translate.instant("seo_panel.search_results.placeholder")},this.openSeoPanelHelp=function(){x.CcDialogBuilder.showSupportIframe(x.$translate.instant("help.pages.seo"),x.CONSUMER_DIALOGS.SEO_PANEL_HELP)},this.updateValueAndSaveForm=function(a){x.seoErrorHandler[a].isRequired&&0===x.state[a].value.length&&(x.state[a].value=x.defaults[a]),x.saveForm(a)},this.saveForm=function(a){if(x.shouldSaveForm(a)){"indexable"===a&&x.updateCheckboxInnerState(),x.updateModel(a),x.updateAppState();var b=x.pageNode.contentElement.values[a],c=b.value+"";x.consumerBiLogger.pagesManager.seoPanelFieldWasUpdated(x.tpaService.getAppIdByPageNode(x.pageNode),a,b.type,c,c.length)}},this.$onInit=function(){x.initService.loaded().then(function(){x.pageId=x.$stateParams.pageId,x.pageNode=a.getPageNodeById(x.pageId),x.ce=x.pageNode&&x.pageNode.getContentElement()||{},x.initInnerState(),x.consumerBiLogger.pagesManager.seoPanelIsLoaded(q.getAppIdByPageNode(x.pageNode)),x.state.pageTitleSEO.value=x.state.pageTitleSEO.value||x.defaults.pageTitleSEO,x.state.pageUriSEO.value=x.state.pageUriSEO.value||x.defaults.pageUriSEO,x.$scope.$watch(function(){return x.state.pageTitleSEO.value},function(a,b){x.showErrorIfNeeded("pageTitleSEO",a,b)}),x.$scope.$watch(function(){return x.state.descriptionSEO.value},function(a,b){x.showErrorIfNeeded("descriptionSEO",a,b)}),x.$scope.$watch(function(){return x.state.metaKeywordsSEO.value},function(a,b){x.showErrorIfNeeded("metaKeywordsSEO",a,b)}),x.flags.editPageSeoManually&&(x.$scope.$watch(function(){return x.state.pageUriSEO.value},function(a,b){x.showErrorIfNeeded("pageUriSEO",a,b)}),x.$scope.$watch(function(){return x.ce.values.displayName.value},function(a,b){a!==b&&(j.isSitePublished()?(x.state.displayName.value=a,x.updateState()):x.initInnerState())})),x.unsubscribeOverlayBackdropClick=x.pubSub.subscribe(PubSub.events.OVERLAY_BACKDROP_CLICK,function(){return x.onOverlayBackdropClick()})})},this.$scope.$on("$destroy",function(){x.consumerBiLogger.pagesManager.pagesPanelWasClosed("seo panel"),x.unsubscribeOverlayBackdropClick()})}return a.$inject=["modelTree","$state","$scope","$stateParams","$window","CcDialogBuilder","$translate","$timeout","previewService","documentServicesMediator","pagesManager","rendererSeo","undoRedo","initService","consumerBiLogger","consumerBiLoggerHelpers","tpaService","staticsUrls","flags","CONSUMER_DIALOGS","pubSub","validation","seo"],a.prototype.onOverlayBackdropClick=function(){this.unsubscribeOverlayBackdropClick(),this.closeSeoPanel()},a.prototype.showErrorIfNeeded=function(a,b,c){var d=this,e=this.seoErrorHandler[a].isErrorShown,f=this.seoErrorHandler[a].validatorConfigKey;"url"===f&&(b=b.toLowerCase(),this.state[a].value=b),this.config[f].validation.validator(b)||(""!==b&&(this.state[a].value=c),e||(this.seoErrorHandler[a].isValid=!1,this.seoErrorHandler[a].isErrorShown=!0,this.$timeout(function(){d.seoErrorHandler[a].isValid=!0,d.seoErrorHandler[a].isErrorShown=!1},5e3)))},a.prototype.closeSeoPanel=function(){this.$state.go("^")},a.prototype.updateAppState=function(){this.rendererSeo.setPageSEO(this.pageNode,this.pagesManager.getPageIdByName(this.pageNode.getId())),this.undoRedo.captureOperation(!1)},a.prototype.shouldSaveForm=function(a){return this.hasValueChanged(a)},a.prototype.hasValueChanged=function(a){return"indexable"===a||this.state[a].value!==this.ce.values[a].value},a.prototype.updateModel=function(a){this.ce.values[a].value=this.state[a].value},a.prototype.updateDefaultsAndIndexableCheckbox=function(){var a=this.pagesManager.getPageIdByName(this.pageId);this.defaults=ob.deepClone(this.seo.getPageSEODefaults(this.pageNode.displayName,a))},a.prototype.initInnerState=function(){this.updateDefaultsAndIndexableCheckbox(),this.state=ob.deepClone(this.ce.values),this.indexableCheckbox.checked=!this.state.indexable.value},a.prototype.updateState=function(){this.updateDefaultsAndIndexableCheckbox(),this.state.pageTitleSEO.value=this.ce.values.pageTitleSEO.value},a.prototype.updateCheckboxInnerState=function(){this.state.indexable.value=!this.indexableCheckbox.checked},a.prototype.wixSEOWizUrl=function(){return this.staticsUrls.getSeoWizUrl("ADI_PAGES")},a.prototype.onSEOWizClick=function(){this.consumerBiLogger.builder.topBarSeoPanelGetFoundOnGoogleClick("seo panel")},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("seoPanel",{templateUrl:"views/seo-panel.html",controller:SeoPanel});var PublishChooseDomain=function(){function a(a,b,c,d,e,f,g){this.$translate=a,this.CONSUMER_DIALOGS=b,this.CcDialogBuilder=c,this.$q=d,this.publishService=e,this.$timeout=f,this.consumerBiLogger=g,this.domainModel="free-domain",this.username=this.publishService.getUsername(),this.siteName=this.publishService.getSiteName(),this.validateSiteName()}return a.$inject=["$translate","CONSUMER_DIALOGS","CcDialogBuilder","$q","publishService","$timeout","consumerBiLogger"],a.prototype.closeChooseDomainDialog=function(){this.onClose()},a.prototype.validateSiteName=function(){this.siteNameValidation=this.publishService.validateSiteName(this.siteName),this.siteNameValidation.success=this.doesNewNameEqualToExistingSite()||this.siteNameValidation.success},a.prototype.onChangeSiteName=function(){var a=this;this.validateSiteName(),this.siteNameValidation.success?this.$timeout(function(){return a.invalidSiteNameTooltip=""},0):(this.invalidSiteNameTooltip="publish_error_"+(this.siteNameValidation.errorCode||"site_name_invalid").toLowerCase(),this.$timeout(function(){return a.showValidationErrorTooltip()},0))},a.prototype.nextStep=function(){var a=this;this.consumerBiLogger.builder.firstPublishClick(this.domainModel),this.publishService.changeSiteNameIfNeededAndValid(this.siteName).then(function(){return a.publishService.publishConsumerStory()}).then(function(){"free-domain"===a.domainModel?a.setState({$value:PublishDialogStates.CONGRATS}):a.setState({$value:PublishDialogStates.CONNECT})})},a.prototype.doesNewNameEqualToExistingSite=function(){return this.siteName===this.publishService.getSiteName()},Object.defineProperty(a.prototype,"validationTooltip",{get:function(){return angular.element("#invalid-name-tooltip")},enumerable:!0,configurable:!0}),a.prototype.showValidationErrorTooltip=function(){this.validationTooltip.tooltipster("show")},a.prototype.openChooseDomainHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.publish"),this.CONSUMER_DIALOGS.PUBLISH_CHOOSE_DOMAIN_HELP)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("publishChooseDomain",{templateUrl:"views/publish/publish-choose-domain.html",controller:PublishChooseDomain,bindings:{setState:"&",onClose:"&"}});var PublishCongrats=function(){function a(a,b,c,d,e,f,g,h,i,j){this.$translate=a,this.CcDialogBuilder=b,this.saleService=c,this.publishService=d,this.storyServices=e,this.CONSUMER_DIALOGS=f,this.flags=g,this.staticsUrls=h,this.consumerBiLogger=i,this.documentServicesMediator=j,this.translatePrefix="popups.publish-congrats",this.metaSiteId=this.documentServicesMediator.getMetaSiteId(),this.publicUrl=this.publishService.getPublicUrl();var k=this.publishService.getCongratsState();this.flags.publishCongratsNewSpec?this.rightPart={state:k,"three-actions-social":{subtitle:this.inTranslate("three-actions-social.subtitle"),actions:[{iconClassName:"cc-icon-seowiz",description:this.inTranslate("action.seowiz.description"),linkText:this.inTranslate("action.seowiz.linkText"),linkUrl:this.getSEOWizUrl(k)},{iconClassName:"cc-icon-twitter",description:this.inTranslate("action.twitter.description"),linkText:this.inTranslate("action.twitter.linkText"),social:"twitter",socialUrl:this.publicUrl,socialText:this.inTranslate("action.twitter.socailText"),socialVia:"",socialHashtags:this.inTranslate("action.twitter.socialHashTags")},{iconClassName:"cc-icon-shoutout",description:this.inTranslate("action.shoutout.description"),linkText:this.inTranslate("action.shoutout.linkText"),linkUrl:this.getShoutoutUrl(this.metaSiteId,k)}]},"three-actions-promote":{subtitle:"Promote your website and business",actions:[{iconClassName:"cc-icon-shoutout",description:this.inTranslate("action.shoutout.description"),linkText:this.inTranslate("action.shoutout.linkText"),linkUrl:this.getShoutoutUrl(this.metaSiteId,k)},{iconSrc:"bower_components/common-controls/dist/images/svg-font-icons/mailbox.svg",description:this.inTranslate("action.email.description"),linkText:this.inTranslate("action.email.linkText"),linkUrl:this.getMailboxesUrl(k)},{iconSrc:"bower_components/common-controls/dist/images/svg-font-icons/dashboard.svg",description:this.inTranslate("action.dashboard.description"),linkText:this.inTranslate("action.dashboard.linkText"),linkUrl:this.getWixHomeUrl(this.metaSiteId,k)}]}}:this.rightPart={state:k,"three-actions-social":{subtitle:"Drive traffic to your website",actions:[{iconClassName:"cc-icon-seowiz",description:"Get your website found on Google",linkText:"Follow Your SEO Plan",linkUrl:this.getSEOWizUrl(k)},{iconClassName:"cc-icon-twitter",description:"Tweet your site and build a loyal following",linkText:"Tweet on Twitter",social:"twitter",socialUrl:this.publicUrl,socialText:"My very own website! Created by me - made with @Wix",socialVia:"",socialHashtags:"MyProWebsite, StartStunning"},{iconClassName:"cc-icon-shoutout",description:"Promote your site with beautiful newsletters",linkText:"Email a ShoutOut",linkUrl:this.getShoutoutUrl(this.metaSiteId,k)}]},"three-actions-promote":{subtitle:"Promote your website and business",actions:[{iconClassName:"cc-icon-shoutout",description:"Promote your site with beautiful newsletters",linkText:"Email a ShoutOut",linkUrl:this.getShoutoutUrl(this.metaSiteId,k)},{iconSrc:"bower_components/common-controls/dist/images/svg-font-icons/mailbox.svg",description:"Get an email address at your domain",linkText:"Get Your Own Mailbox",linkUrl:this.getMailboxesUrl(k)},{iconSrc:"bower_components/common-controls/dist/images/svg-font-icons/dashboard.svg",description:"Grow your business & get people to your site",linkText:"Go to Your Wix Home",linkUrl:this.getWixHomeUrl(this.metaSiteId,k)}]}},this.consumerBiLogger.builder.publishSiteCongratsPageView(this.rightPart.state,this.referral)}return a.$inject=["$translate","CcDialogBuilder","saleService","publishService","storyServices","CONSUMER_DIALOGS","flags","staticsUrls","consumerBiLogger","documentServicesMediator"],a.prototype.inTranslate=function(a){return this.$translate.instant(this.translatePrefix+"."+a)},a.prototype.getSEOWizUrl=function(a){var b=this.generatePageName(this.referral,a);return this.staticsUrls.getSeoWizUrl(b)},a.prototype.getMailboxesUrl=function(a){return"https://premium.wix.com/wix/api/mpContainerStaticController#/mailboxes?referralAdditionalInfo="+this.generatePageName(this.referral,a)},a.prototype.getWixHomeUrl=function(a,b){var c=this.generatePageName(this.referral,b);return"https://www.wix.com/my-account/sites/"+this.metaSiteId+"?referralInfo="+c},a.prototype.getShoutoutUrl=function(a,b){return["https://www.wix.com/my-account/sites/",a,"/app/","135c3d92-0fea-1f9d-2ba5-2a1dfb04297e","?referralInfo="+this.generatePageName(this.referral,b),"&appState=%3Fdl%3Dmessage%26messageId%3D","feedb3b8-0b1a-413f-bcab-73e805d0f554"].join("")},a.prototype.continueEditing=function(){var b=this.generatePageName(this.referral,this.rightPart.state);this.consumerBiLogger.builder.publishSiteCongratsPageDoneClick(b,!!this.dontShowValue),this.CcDialogBuilder.hide(),this.storyServices.story.popupConfigurations[a.PublishCongratsPopupKey]=this.dontShowValue},a.prototype.onViewSite=function(){var a=this.generatePageName(this.referral,this.rightPart.state);this.consumerBiLogger.builder.publishSiteCongratsPageViewSiteClick(a)},a.prototype.onSocialShare=function(a){var b=this.generatePageName(this.referral,this.rightPart.state);this.consumerBiLogger.builder.publishSiteCongratsPageSocialClick(b,a)},a.prototype.goToManagePremium=function(){this.publishDialogCtrl.goToManagePremium(this.rightPart.state)},a.prototype.closeCongratsDialog=function(){this.publishDialogCtrl.closeDialog()},a.prototype.generatePageName=function(a,b){return this.referral+"|"+b},a.prototype.openCongratsHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.publish"),this.CONSUMER_DIALOGS.PUBLISH_CONGRATS_HELP)},a}();PublishCongrats.PublishCongratsPopupKey="popup.publish-congrats",angular.module("siteGeneratorStaticsConsumerAppInternal").component("publishCongrats",{templateUrl:"views/publish/publish-congrats.html",controller:PublishCongrats,bindings:{referral:"@"},require:{publishDialogCtrl:"^publishDialog"}});var PublishConnectDomain=function(){function a(a,b,c,d){this.$translate=a,this.CONSUMER_DIALOGS=b,this.consumerBiLogger=c,this.CcDialogBuilder=d,this.consumerBiLogger.builder.connectDomainPageView(this.source,this.referral)}return a.$inject=["$translate","CONSUMER_DIALOGS","consumerBiLogger","CcDialogBuilder"],a.prototype.goToNewDomain=function(){this.publishDialogCtrl.goToNewDomain()},a.prototype.goToConnectDomain=function(){this.publishDialogCtrl.goToConnectDomain()},a.prototype.onClose=function(){this.publishDialogCtrl.skipToCongrats("close")},a.prototype.onCancel=function(){this.publishDialogCtrl.skipToCongrats("later")},Object.defineProperty(a.prototype,"biSource",{get:function(){switch(this.source){case TopBar.ConnectDomainSource:return this.CONSUMER_DIALOGS.TOPBAR_CONNECT_DOMAIN_HELP;case FakeBrowser.ConnectDomainSource:return this.CONSUMER_DIALOGS.FAKEBROWSER_CONNECT_DOMAIN_HELP;default:return this.CONSUMER_DIALOGS.PUBLISH_CONNECT_DOMAIN_HELP}},enumerable:!0,configurable:!0}),a.prototype.openConnectDomainHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.connectDomain"),this.biSource)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("publishConnectDomain",{templateUrl:"views/publish/publish-connect-domain.html",controller:PublishConnectDomain,bindings:{source:"@",referral:"@"},require:{publishDialogCtrl:"^publishDialog"}});var PublishDialogStates=function(){function a(){}return a}();PublishDialogStates.CHOOSE="choose",PublishDialogStates.CONNECT="connect",PublishDialogStates.CONGRATS="congrats";var PublishDialog=function(){function a(b,c,d,e,f,g,h,i,j){this.$q=b,this.$log=c,this.$window=d,this.publishService=e,this.documentServicesMediator=f,this.consumerBiLogger=g,this.userService=h,this.flags=i,this.CcDialogBuilder=j,this.metaSiteId=f.getMetaSiteId(),this.firstPublish=!e.isSitePublished(),this.disableGoToConnectDomain=!1,this.referralString="onboarding-"+(this.source?this.source:(this.firstPublish?1:2)+"publish"),this.managePremiumUrl=""+a.MyAccountPrefix+this.metaSiteId+"/manage-premium/?referralAdditionalInfo="+this.referralString,this.newDomainUrl=""+a.PremiumPrefix+a.DomainsMidfix+"?domainSearch=true&referralAdditionalInfo="+this.referralString,this.connectNewOwnedDomainUrl=""+a.PremiumPrefix+a.DomainsMidfix+"?connectDomain=true&referralAdditionalInfo="+this.referralString,this.connectUnattachedOwnedDomainUrl=""+a.MyAccountPrefix+this.metaSiteId+"/manage-premium/?referralAdditionalInfo="+this.referralString,this.packagePickerUrl=a.PremiumPrefix+"premiumStart?siteGuid="+this.metaSiteId+"&referralAdditionalInfo="+this.referralString,this.consumerBiLogger=g,this.screen?this.setState(this.screen):this.firstPublish&&!e.isDomainConnected()?this.setState(PublishDialogStates.CHOOSE):(this.setState(PublishDialogStates.CONGRATS),e.publishConsumerStory())}return a.$inject=["$q","$log","$window","publishService","documentServicesMediator","consumerBiLogger","userService","flags","CcDialogBuilder"],a.prototype.sendCloseDialogBiEvents=function(){this.state!==PublishDialogStates.CONNECT&&this.consumerBiLogger.builder.publishSiteClosePage(this.referralString)},a.prototype.setState=function(a){this.state=a},a.prototype.closeDialog=function(){this.sendCloseDialogBiEvents(),this.CcDialogBuilder.hide()},a.prototype.closeDialogAndCancelPublish=function(){this.sendCloseDialogBiEvents(),this.CcDialogBuilder.cancel()},a.prototype.skipToCongrats=function(a){this.userHasChosenConnectADomain=!0,this.consumerBiLogger.builder.connectDomainClosePage(a),this.screen===PublishDialogStates.CONNECT?this.closeDialog():this.setState(PublishDialogStates.CONGRATS)},a.prototype.goToNewDomain=function(){this.userHasChosenConnectADomain=!0,this.consumerBiLogger.builder.connectDomainNavigateToDomainSPages("newdomain"),this.$window.open((this.publishService.isPremium()?this.newDomainUrl:this.packagePickerUrl)+"-newdomain"),this.screen===PublishDialogStates.CONNECT?this.closeDialog():this.setState(PublishDialogStates.CONGRATS)},a.prototype.goToConnectDomain=function(){var a=this;if(!this.disableGoToConnectDomain){this.disableGoToConnectDomain=!0,this.userHasChosenConnectADomain=!0,this.consumerBiLogger.builder.connectDomainNavigateToDomainSPages("owndomain");var b;b=this.publishService.isPremium()?this.userService.hasUnattachedOwnedDomain().then(function(b){return b?a.connectUnattachedOwnedDomainUrl:a.connectNewOwnedDomainUrl}):this.$q.when(this.packagePickerUrl);var c;return b.then(function(a){c=a}).catch(function(b){a.$log.error("Failed reading from server, so using fallback url",b),c=a.connectNewOwnedDomainUrl}).then(function(){a.$window.open(c+"-owndomain")
}).finally(function(){a.disableGoToConnectDomain=!1,a.screen===PublishDialogStates.CONNECT?a.closeDialog():a.setState(PublishDialogStates.CONGRATS)})}},a.prototype.goToManagePremium=function(a){var b=this.publishService.isPremium()?this.managePremiumUrl:this.packagePickerUrl;this.$window.open(b+"-"+a)},a}();PublishDialog.MyAccountPrefix="https://www.wix.com/my-account/sites/",PublishDialog.PremiumPrefix="https://premium.wix.com/wix/api/",PublishDialog.DomainsMidfix="mpContainerStaticController#/domains",angular.module("siteGeneratorStaticsConsumerAppInternal").component("publishDialog",{templateUrl:"views/publish/publish-dialog.html",controller:PublishDialog,bindings:{source:"@",screen:"@"}}),angular.module("siteGeneratorStaticsConsumerAppInternal").component("simpleSavingAnimation",{templateUrl:"views/animations/simple-saving-animation.html",bindings:{isSaved:"=",isCurrentlySaving:"="}});var ApplicationState=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){var D=this;this.applicationParameters=a,this.storyServices=b,this.$q=c,this.$state=d,this.$stateParams=e,this.sitePartTypes=f,this.$rootScope=g,this.renderedModelApi=h,this.mobileRenderedModelApi=i,this.$translate=j,this.designKit=k,this.notify=l,this.previewService=m,this.modelTree=n,this.tipManager=o,this.clientTopology=p,this.pagesManager=q,this.tpaService=r,this.flags=s,this.consumerBiLogger=t,this.assistantManager=u,this.overlayManager=v,this.spinnerService=w,this.visualValidation=x,this.documentServicesMediator=y,this.layoutSolver=z,this.$window=A,this.pubSub=B,this.$timeout=C,this.ignoreStateSaving=[config.STATES.BUILDER_ADD_SECTION],this.mobileViewVisible=!1,this.isCroppperMode=!1,this._isRenderAndReturnToDesktop=!1,this._steady=!0,this.previewFrameWidth=1040,this._isGoToEditorState=!1,this._isMobileEditorEnabled=!1,this._pagePrettyRulesMode=ePrettyPageRulesMode.rulesOff,this.customAddMode=!1,this.calculateAndRenderDesktopAndMobilePages=function(a,b,c,d){void 0===b&&(b=!1),void 0===c&&(c=!1),void 0===d&&(d=!1);var e=D.modelTree.getPagesNodes().filter(function(b){return"current"!==a||D.storyServices.story.selectedPage===b.id}),f=D.isInDesktopEditMode(),g=f&&c||b;return D._isRenderAndReturnToDesktop=g,D.$q.when().then(function(){return D.storyServices.prepareForMobileRendering(e,b)}).then(function(){return D.storyServices.renderMobilePages(e,b,d)}).then(function(){return g?D.disableMobileEditor():void 0}).finally(function(){return D._isRenderAndReturnToDesktop=!1})},this.generateRandomOffset=function(a,b){return void 0===b&&(b=101),D.flags.noRandomForAutomationTests?0:D.storyServices.generateRandomOffset(a,b)},this.isInEditListMode=function(){return D.isInEditMode()&&!D.$state.params.childId},this.isSupportStaffEditing=function(a){return(a||_.isUndefined(D.supportStaffEditing))&&(D.isWixStaff()||D.clientTopology.isImpersonatedUser?D.supportStaffEditing=D.clientTopology.isImpersonatedUser||D.storyServices.story&&D.storyServices.story.dbStory&&!D.storyServices.story.dbStory.isStoryOwner:D.supportStaffEditing=!1),D.supportStaffEditing},this.isSilent=function(){return Boolean("true"===D.$state.params.silent||D.isSilentInTour()||D.flags.silentMode)},this.isSilentInTour=function(){return!D.assistantManager.allowDialogInterruptions()},this.isAddPage=function(){return D.$state.current.name===config.STATES.BUILDER_ADD_PAGE},this.isContentFocusEnabled=function(){return D.$state.current.name!==config.STATES.BUILDER_ADD_SECTION},this.getContentFocus=function(){return D.contentFocus},this.clearContentFocus=function(){D.contentFocus=null,D.overlayManager.updateContentFocus(null)},this.setContentFocus=function(a,b,c){if(void 0===c&&(c=!1),c||D.isContentFocusEnabled()){var d={nodeId:a,sitePart:b};_.eq(d,D.contentFocus)||(D.contentFocus=d,D.overlayManager.updateContentFocus(D.contentFocus))}},this.refreshContentFocus=function(){D.overlayManager.updateContentFocus(D.contentFocus)},this.setStoryMetadata=function(a){D.storyMetadata=a},this.getStoryMetadata=function(){return D.storyMetadata},this.getSelectedTpaComponentRef=function(){return D.selectedTpaComponentRef},this.setSelectedTpaComponentRef=function(a){D.selectedTpaComponentRef=a},this.goToDesignMode=function(){D.builderSubStateToggle(config.STATES.BUILDER_DESIGN_KITS)},this.goToIntro=function(){return D.$state.go(config.STATES.INTRO)},this.goToDesignKitMode=function(){return D.clearContentFocus(),D.$state.go(config.STATES.BUILDER_DESIGN_KIT)},this.goToColorationPanel=function(){return D.clearContentFocus(),D.$state.go(config.STATES.BUILDER_DESIGN_KIT_COLORATION)},this.goToAdvancedPaletteEditing=function(){return D.clearContentFocus(),D.$state.go(config.STATES.BUILDER_DESIGN_KIT_COLORATION_ADVANCED)},this.goToFontsPanel=function(a){return D.clearContentFocus(),D.consumerBiLogger.siteDesign.customizeDesignSubPanelIsLoaded("font",a),D.$state.go(config.STATES.BUILDER_DESIGN_KIT_FONTS_NEW)},this.goToAnimationPanel=function(a){return D.clearContentFocus(),D.consumerBiLogger.siteDesign.customizeDesignSubPanelIsLoaded("animation",a),D.$state.go(config.STATES.BUILDER_DESIGN_KIT_ANIMATIONS)},this.isInSectionMediaSettingsPanel=function(){return D.$state.includes(config.STATES.BUILDER_NEW_MEDIA_SETTINGS)},this.goToMediaSettingsPanel=function(a){return D.$state.go(config.STATES.BUILDER_NEW_MEDIA_SETTINGS,{contentId:D.toContentId(D.contentFocus),childId:a})},this.goToSectionAnimationPanel=function(){var a=D.toContentNode(D.contentFocus);return D.consumerBiLogger.sectionDesign.animationPanelOpened(a.alias,a.getContentElementType(),""),D.$state.go(config.STATES.BUILDER_SECTION_DESIGN_ANIMATIONS,{contentId:D.toContentId(D.contentFocus)})},this.goToSlideshowAnimationPanel=function(){var a=D.toContentNode(D.contentFocus);return D.consumerBiLogger.sectionDesign.animationPanelOpened(a.alias,a.getContentElementType(),"slideshow"),D.$state.go(config.STATES.BUILDER_SLIDESHOW_ANIMATIONS,{contentId:D.toContentId(D.contentFocus)})},this.isInSectionAnimationPanel=function(){return D.$state.includes(config.STATES.BUILDER_SECTION_DESIGN_ANIMATIONS)},this.goToSectionBackgroundPanel=function(a,b){return D.reportBiForSectionBackgroundPanel(a,D.getBackgroundModeForBi()),D.$state.go(config.STATES.BUILDER_SECTION_DESIGN_BACKGROUND,{contentId:D.toContentId(D.contentFocus),mode:b})},this.goToSectionHeaderBackgroundPanel=function(a){return D.reportBiForSectionBackgroundPanel(a,D.getBackgroundModeForBi()),D.$state.go(config.STATES.BUILDER_SECTION_DESIGN_BACKGROUND,{contentId:D.toContentId(D.contentFocus),mode:config.BACKGROUND_PANEL_MODE.HEADER_MODE})},this.goToSectionListBackgroundPanel=function(a){return a&&D.reportBiForSectionBackgroundPanel(a,D.getBackgroundModeForBi()),D.$state.go(config.STATES.BUILDER_SECTION_DESIGN_BACKGROUND,{contentId:D.toContentId(D.contentFocus),mode:config.BACKGROUND_PANEL_MODE.LIST_MODE})},this.isInSectionBackgroundPanel=function(){return D.$state.includes(config.STATES.BUILDER_SECTION_DESIGN_BACKGROUND)},this.goToSectionColorPanel=function(a){var b=D.toContentNode(D.contentFocus);return D.consumerBiLogger.sectionDesign.colorPanelOpened(b.alias,b.getContentElementType(),a),D.$state.go(config.STATES.BUILDER_SECTION_DESIGN_COLORS,{contentId:D.toContentId(D.contentFocus)})},this.isInSectionColorPanel=function(){return D.$state.includes(config.STATES.BUILDER_SECTION_DESIGN_COLORS)},this.goToSectionFontPanel=function(){var a=D.toContentNode(D.contentFocus);return D.consumerBiLogger.sectionDesign.fontPanelOpened(a.alias,a.getContentElementType()),D.$state.go(config.STATES.BUILDER_SECTION_DESIGN_FONTS,{contentId:D.toContentId(D.contentFocus)})},this.isInSectionFontPanel=function(){return D.$state.includes(config.STATES.BUILDER_SECTION_DESIGN_FONTS)},this.goToAddSectionMode=function(){D.builderSubStateToggle(config.STATES.BUILDER_ADD_SECTION)},this.goToAddPageMode=function(){return D.clearContentFocus(),D.$state.go(config.STATES.BUILDER_ADD_PAGE)},this.goToSectionPanel=function(a){if(D.isSwitchPresetMode())return D.goToSwitchPresetMode(a);if(D.isInSectionFontPanel())return D.goToSectionFontPanel();if(D.isInSectionColorPanel())return D.goToSectionColorPanel(a);if(D.isInSectionAnimationPanel())return D.goToSectionAnimationPanel();if(D.isInSectionMediaSettingsPanel())return D.goToMediaSettingsPanel();if(D.isInSectionBackgroundPanel()){return D.toContentNode(D.contentFocus).isList()?D.goToSectionListBackgroundPanel(a):D.goToSectionBackgroundPanel(a)}return D.goToEditMode()},this.goToPreview=function(a){return a&&!_.includes(D.ignoreStateSaving,D.$state.current.name)?D.savedState={state:D.$state.$current,params:_.extend(_.clone(D.$stateParams),D.getContentFocus())}:D.savedState=null,D.clearContentFocus(),D.storyServices.nodesRefMap={},D.documentServicesMediator.setSiteScrollAndScale(0,0,1),(D.isInMobileEditMode()?D.storyServices.calculateAndRenderDesktopAndMobilePages("all"):D.storyServices.calculateAndRenderAllPages(!1)).then(function(){return D.notify.closeAll(),D.previewService.setPreviewMode(!0),D.$state.go(config.STATES.BUILDER_STORY_PREVIEW,null,{location:"replace"})})},this.returnFromPreview=function(){return D.savedState?D.$state.go(D.savedState.state,D.savedState.params,{location:"replace"}):D.goToBuilder()},this.builderSubStateToggle=function(a,b){if(void 0===b&&(b={}),D.$state.current.name.indexOf(a+".")>-1)return D.tipManager.hide(),D.goToBuilder(!1);D.clearContentFocus();var c=a!==D.$state.current.name;return D.$state.transitionTo(a,b,{location:!0,inherit:!0,relative:D.$state.$current,notify:c})},this.getPageNodeInFocus=function(){var a=D.storyServices.story&&D.storyServices.story.selectedPage;return D.modelTree.getNodeById(a)},this.getPageInFocus=function(){var a=D.getPageNodeInFocus();return{name:a&&a.getDisplayName(),managable:a&&"Blog_Single_Post_Widget"!==a.tpaExtraPage}},this.goToBuilder=function(a,b){void 0===a&&(a=!1),D.overlayManager.clearDropTarget(),D.isPreviewDisplay()&&(D.previewService.setPreviewMode(!1),D.pagesManager.goToPage(D.storyServices.story.selectedPage));var c;return c=b?D.$state.go(config.STATES.BUILDER_STORY,{storyId:b},{reload:!0}):D.$state.go(config.STATES.BUILDER_STORY,null,{reload:!0}),a&&D.clearContentFocus(),c},this.goToBuilderDeepLink=function(a,b,c){var d={industryId:b,structureId:a,businessName:c};D.$state.transitionTo(config.STATES.BUILDER,d,{reload:!0})},this.goToPageManager=function(){D.builderSubStateToggle(config.STATES.BUILDER_PAGES)},this.goToPage=function(a){return D.overlayManager.clearDropTarget(),D.builderSubStateToggle(config.STATES.BUILDER_SELECTED_PAGE,{pageId:a})},this.goToPageSeo=function(a){D.overlayManager.clearDropTarget(),D.builderSubStateToggle(config.STATES.BUILDER_PAGES_SEO,{pageId:a})},this.goToMobilePage=function(a,b){if(void 0===b&&(b=!1),D.isInMobileEditMode()&&D.storyServices.story.selectedPage===a)return D.$q.when();var c=D.modelTree.getPageNodeById(a);return D.$q.when().then(function(){return D.$rootScope.$emit("switchEditModeStart",3e3,!0),D.$timeout(angular.noop,2*Builder.ANIMATION_LENGTH)}).then(function(){D.isInDesktopEditMode()&&D.goToBuilder()}).then(function(){D.storyServices.story.selectedPage=a,D.storyServices.story.mobileEditorActive=!0}).then(function(){return D.storyServices.prepareForMobileRendering([c])}).then(function(){return D.enableMobileEditor()}).then(function(){return D.storyServices.renderMobilePages([c],!1,b)}).then(function(){return D.pagesManager.goToPage(a)}).finally(function(){D.$rootScope.$emit("switchEditModeEnd")})},this.isOnAddState=function(){return D.$state.includes(config.STATES.BUILDER_ADD_SECTION)},this.isInEditMode=function(){return D.$state.includes(config.STATES.BUILDER_EDIT)},this.inIntroMode=function(){return D.$state.includes(config.STATES.INTRO)},this.goToEditMode=function(a){return D.overlayManager.clearDropTarget(),D.$state.go(config.STATES.BUILDER_EDIT,{contentId:D.toContentId(D.contentFocus),childId:a})},this.goToSwitchPresetMode=function(a){D.overlayManager.clearDropTarget();var b=D.toContentNode(D.contentFocus);return b&&D.consumerBiLogger.sectionManagement.replaceSectionPanelIsLoaded(b.getId(),b.getSpecificContentElementType(),b.alias,a),D.$state.go(config.STATES.BUILDER_SWITCH_PRESET,{contentId:D.toContentId(D.contentFocus)})},this.isFooterContent=function(){return D.contentFocus&&D.contentFocus.sitePart===D.sitePartTypes.FOOTER},this.isHeaderContent=function(){return D.contentFocus&&D.contentFocus.sitePart===D.sitePartTypes.HEADER},this.isAddSectionMode=function(){return D.$state.current.name===config.STATES.BUILDER_ADD_SECTION},this.isEditMode=function(){return D.$state.current.name===config.STATES.BUILDER_EDIT},this.isSwitchPresetMode=function(){return D.$state.current.name===config.STATES.BUILDER_SWITCH_PRESET},this.isSelectedPageMode=function(){return D.$state.current.name===config.STATES.BUILDER_SELECTED_PAGE},this.isSectionColorsMode=function(){return D.$state.current.name===config.STATES.BUILDER_SECTION_DESIGN_COLORS},this.isMediaSettingsActive=function(){return D.$state.current.name===config.STATES.BUILDER_MEDIA_SETTINGS},this.isSeoPanelActive=function(){return D.$state.current.name===config.STATES.BUILDER_PAGES_SEO},this.isBuilderMode=function(){return D.$state.current.name===config.STATES.BUILDER_STORY},this.isSwitchDesignMode=function(){return D.isSectionColorsMode()||D.isSwitchPresetMode()},this.isInAnyEditOrDesignOfSectionPanel=function(){return D.isInEditMode()||D.isSwitchDesignMode()||D.isInSectionBackgroundPanel()||D.isInSectionFontPanel()||D.isInSectionAnimationPanel()||D.isInSectionMediaSettingsPanel()},this.isPreviewDisplay=function(){return D.$state.current.name===config.STATES.BUILDER_STORY_PREVIEW},this.previewRevision=function(){return D.isPreviewDisplay()?D.flags.previewRevision:null},this.isMobilePreviewDisplay=function(){return D.mobileViewVisible},this.setMobilePreviewDisplay=function(a){D.mobileViewVisible=a},this.mobilePreviewUrl=function(a){return a?D._mobilePreviewUrl=a:D._mobilePreviewUrl},this.mobilePreviewPageId=function(a){return a?D._mobilePreviewPageId=a:D._mobilePreviewPageId},this.setCropperMode=function(a){D.isCroppperMode=a},this.isInCropperMode=function(){return D.flags.updatedCropper&&D.isCroppperMode},this.onStateChangeSuccess=function(a,b,c,d){if(D._isMobileEditorEnabled&&!b.mobile&&D.disableMobileEditor(!1),c.contentId){var e=D.toContentFocus(c.contentId);_.eq(e,D.contentFocus)||(D.contentFocus=e,D.overlayManager.updateContentFocus(D.contentFocus))}d&&d.name===config.STATES.BUILDER_STORY_PREVIEW&&D.pagesManager.goToPage(D.storyServices.story.selectedPage)},this.init=function(){D.$rootScope.$on("$stateChangeSuccess",D.onStateChangeSuccess.bind(D)),D.$rootScope.$on("$stateChangeError",function(a,b,c,d,e){console.log(a)}),D.onStateChangeSuccess(void 0,D.$state.current,D.$state.params),D.flags.mobileEditorBrowserHeight&&FakeBrowser.bindScrollBars()},this.setGoToEditorState=function(a){D._isGoToEditorState=a},this.isGoToEditorState=function(){return D._isGoToEditorState},this.isInMobileEditMode=function(){return D._isMobileEditorEnabled},this.isInDesktopEditMode=function(){return!D._isMobileEditorEnabled},this.setPrettyPageMode=function(a){D._pagePrettyRulesMode=a},this.enableMobileEditor=function(){if(!D.isInMobileEditMode())return D._isMobileEditorEnabled=!0,D.previewFrameWidth=Viewer.ViewerMobileBaseSize,D.clearContentFocus(),D.documentServicesMediator.setEditorToMobileMode(D._isRenderAndReturnToDesktop).then(function(){D.overlayManager.onEditModeSwitched(),D.pubSub.fire(PubSub.events.SWITCH_MODE),D.isPreviewDisplay()||D.goToBuilder()})},this.disableMobileEditor=function(a){return D.isInDesktopEditMode()?D.$q.when():D.$q.when().then(function(){if(!a)return D.$rootScope.$emit("switchEditModeStart"),D.$timeout(angular.noop,2*Builder.ANIMATION_LENGTH)}).then(function(){return D._isMobileEditorEnabled=!1,D.previewFrameWidth=Viewer.ViewerDesktopBaseSize,D.isPreviewDisplay()||D.goToBuilder(),D.clearContentFocus(),D.documentServicesMediator.setEditorToDesktopMode(a,D._isRenderAndReturnToDesktop).then(function(){D.overlayManager.onEditModeSwitched(),D.pubSub.fire(PubSub.events.SWITCH_MODE)}).finally(function(){D.$rootScope.$emit("switchEditModeEnd")})})},a.registerMobileModeCallbacks(this.isInMobileEditMode.bind(this),this.enableMobileEditor.bind(this)),_.isNaN(Number.parseInt(this.flags.extraWidth))&&(this.flags.extraWidth=100),this.previewFrameWidth+=Number.parseInt(this.flags.extraWidth),this.storyServices.calculateAndRenderDesktopAndMobilePages=this.calculateAndRenderDesktopAndMobilePages}return a.$inject=["applicationParameters","storyServices","$q","$state","$stateParams","sitePartTypes","$rootScope","renderedModelApi","mobileRenderedModelApi","$translate","designKit","notify","previewService","modelTree","tipManager","clientTopology","pagesManager","tpaService","flags","consumerBiLogger","assistantManager","overlayManager","spinnerService","visualValidation","documentServicesMediator","layoutSolver","$window","pubSub","$timeout"],a.prototype.isRenderAndReturnToDesktop=function(){return this._isRenderAndReturnToDesktop},a.prototype.isSteady=function(){return this._steady},a.prototype.setSteady=function(a){this._steady=a},a.prototype.toContentId=function(a){if(a)return a.sitePart===this.sitePartTypes.BODY?a.nodeId:a.sitePart},a.prototype.toContentFocus=function(a){var b=this.modelTree.getGeneralInformation();return"header"===a?{sitePart:this.sitePartTypes.HEADER,nodeId:b.getId()}:"footer"===a?{sitePart:this.sitePartTypes.FOOTER,nodeId:b.getId()}:{sitePart:this.sitePartTypes.BODY,nodeId:a}},a.prototype.toContentNode=function(a){return this.modelTree.findById(a.nodeId)},a.prototype.isWixStaff=function(){return this.clientTopology.isWixStaff||this.storyServices.story&&(this.storyServices.story.userRoles.indexOf("wixStaff")>-1||this.storyServices.story.userRoles.indexOf("superuser")>-1||this.storyServices.story.userRoles.indexOf("superuser-limited")>-1)},a.prototype.goBack=function(){this.$window.history.back()},a.prototype.getBackgroundModeForBi=function(){var a=this.$stateParams.mode;return a||"regular"},a.prototype.reportBiForSectionBackgroundPanel=function(a,b){var c=this.toContentNode(this.contentFocus);this.consumerBiLogger.sectionDesign.backgroundPanelOpened(b,a,c.alias,c.getContentElementType())},a.prototype.isFakeBrowserHeightFixed=function(){return this.isInMobileEditMode()&&this.flags.mobileEditorBrowserHeight&&!this.isPreviewDisplay()},a.prototype.isAddMode=function(){return this.isAddSectionMode()||this.isAddPage()},a.prototype.forceAddMode=function(a){this.customAddMode=a},a.prototype.isForcedAddMode=function(){return this.customAddMode},a.prototype.isLeftPanelOpen=function(){return this.isInAnyEditOrDesignOfSectionPanel()||this.isAddSectionMode()},Object.defineProperty(a.prototype,"isPagePrettyRulesActive",{get:function(){return this._pagePrettyRulesMode!==ePrettyPageRulesMode.rulesOff},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isPagePrettyRulesCached",{get:function(){return this._pagePrettyRulesMode===ePrettyPageRulesMode.rulesOnAndCaching},enumerable:!0,configurable:!0}),a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("applicationState",ApplicationState);var getKitName=function(a){return a?_.without(a.name.split("-"),"all").join("-"):""},createGuid=function(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};angular.module("siteGeneratorStaticsConsumerAppInternal").factory("getStageBackgroundColors",getStageBackgroundColorsFactory).constant("defaultToastDuration",6e3).constant("getKitName",getKitName).constant("createGuid",createGuid);var NodeFetcherResult=function(){function a(){}return a}(),NodeFetcher=function(){function a(a,b,c,d,e){this.modelTree=a,this.storyServices=b,this.sitePartTypes=c,this.applicationState=d,this.$stateParams=e}return a.$inject=["modelTree","storyServices","sitePartTypes","applicationState","$stateParams"],a.prototype.getNode=function(a){if(!a)return null;if("header"===a)return{parent:null,node:this.modelTree.getGeneralInformation(),sitePart:this.sitePartTypes.HEADER};if("footer"===a)return{parent:null,node:this.modelTree.getFooterInformation(),sitePart:this.sitePartTypes.FOOTER};var b=this.modelTree.findNodeAndParentAndPageByNodeId(a,this.storyServices.story.selectedPage);return b&&b.node?{parent:b.parentNode,node:b.node,sitePart:this.sitePartTypes.BODY}:null},a.prototype.getCurrentNodeResult=function(){var a=this.applicationState.getContentFocus(),b=this.getCorrectNodeId(a);return b?this.getNode(b):null},a.prototype.getCurrentNode=function(){var a=this.getCurrentNodeResult();return a?a.node:null},a.prototype.getCurrentActiveNode=function(){var a=this.getCurrentNode();return a?a.isList()?this.getSpecificNode(a):a:null},a.prototype.getSpecificNode=function(a){var b=this,c=_.find(a.children,function(a){return a.id===b.$stateParams.childId});return c||a.children[0]},a.prototype.getCorrectNodeId=function(a){return _.isEmpty(a)?null:a.sitePart===this.sitePartTypes.FOOTER||a.sitePart===this.sitePartTypes.HEADER?a.sitePart:a.nodeId},a.prototype.getCurrentCorrectNodeId=function(){return this.getCorrectNodeId(this.applicationState.getContentFocus())},a.prototype.getNodeByContentElement=function(a,b){return a.contentElement&&b.id&&b.id===a.contentElement.id||a.contentElement===b?a:b.id?_.find(a.children,function(a){return a.contentElement.id===b.id}):_.find(a.children,{contentElement:b})},a.prototype.getNodeSitePart=function(a){return this.isGeneralDescription(a)?"footer"!==a.containerPageId?this.sitePartTypes.HEADER:this.sitePartTypes.FOOTER:this.sitePartTypes.BODY},a.prototype.isNodeBody=function(a){return this.getNodeSitePart(a)===this.sitePartTypes.BODY},a.prototype.isGeneralDescription=function(a){return a&&"GeneralDescription"===a.getContentElementType()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("nodeFetcher",NodeFetcher);var SolutionFetcher=function(){function a(a,b,c){this.sitePartTypes=a,this.layoutSolver=b,this.simpleSolutionManager=c}return a.$inject=["sitePartTypes","layoutSolver","simpleSolutionManager"],a.prototype.getSectionSolution=function(a,b,c){return c&&c!==this.sitePartTypes.BODY?this.layoutSolver.getSelectedSolution(c):this.simpleSolutionManager.getSectionSolution(a,b)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("solutionFetcher",SolutionFetcher);var SmartAssistState=function(){function a(a,b,c,d,e,f,g){var h=this;this.SmartAssistManager=a,this.smartAssistHelpers=b,this.storyServices=c,this.smartAssistConf=d,this.publishService=e,this.flags=f,this.pubSub=g,g.subscribe(PubSub.events.NEW_STATE_STORY_WAS_SET,function(){h.SmartAssistManager.reset(),h.evaluateAllIssues()})}return a.$inject=["SmartAssistManager","smartAssistHelpers","storyServices","smartAssistConf","publishService","flags","pubSub"],a.prototype.init=function(){this.initSmartAssistConfiguration(),this.evaluateAllIssues()},a.prototype.initSmartAssistConfiguration=function(){var a=this;this.storyServices.story.smartAssist||(this.storyServices.story.smartAssist={});var b={onCloseIssues:function(b){a.SmartAssistManager.unmute(b),a.pubSub.fire(PubSub.events.SMART_ASSIST_ISSUES_CLOSED,b)},onMuteIssues:function(){a.storyServices.story.save(),a.pubSub.fire(PubSub.events.SMART_ASSIST_ISSUES_MUTED)},onUnmuteIssues:function(){a.storyServices.story.save()},onOpenIssues:!this.issuesExisted&&function(){a.publishService.isSitePublished()&&!a.storyServices.story.smartAssist.issuesExisted&&(a.storyServices.story.smartAssist.issuesExisted=!0,a.storyServices.story.save())}};this.pubSub.subscribeOnce(PubSub.events.PUBLISH,function(){a.storyServices.story.smartAssist.issuesExisted=!!Object.keys(a.SmartAssistManager.getActiveIssues()).length}),this.SmartAssistManager.init(this.smartAssistConf.getPotentialIssues(),this.storyServices.story.smartAssist,b)},a.prototype.evaluateAllIssues=function(){this.smartAssistHelpers.evaluateAllSocialRelated(),this.smartAssistHelpers.evaluateAllButtonsRelated()},Object.defineProperty(a.prototype,"issuesExisted",{get:function(){return this.storyServices.story.smartAssist.issuesExisted},enumerable:!0,configurable:!0}),a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("smartAssistState",SmartAssistState);var SmartAssistHelpers=function(){function a(a,b,c){var d=this;this.SmartAssistManager=a,this.modelTreeHelpers=b,this.nodeTitleManager=c,this.evaluateAllSocialRelated=function(){d.SmartAssistManager.evaluateIssue({contexts:d.modelTreeHelpers.getAllSocialsRelatedNodes(),issueNamespaceId:SmartAssistConfNS.namespaces.SOCIALS})},this.evaluateAllButtonsRelated=function(){d.SmartAssistManager.evaluateIssue({contexts:d.modelTreeHelpers.getAllNodesWithContentElement(!0),issueNamespaceId:SmartAssistConfNS.namespaces.BUTTONS})}}return a.$inject=["SmartAssistManager","modelTreeHelpers","nodeTitleManager"],a.prototype.activeIssuesByIssueTypeId=function(a){return _.values(this.SmartAssistManager.getActiveIssues()).filter(function(b){return b.issueType.id===a})},a.prototype.getIssuePageInfo=function(a){return{pageName:this.modelTreeHelpers.getPageAliasById(a.containerPageId),pageId:a.containerPageId,sectionName:a.alias,sectionPosition:this.getSectionPosition(a)}},a.prototype.getSectionPosition=function(a){return this.modelTreeHelpers.getPositionInPage(a)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("smartAssistHelpers",SmartAssistHelpers),angular.module("siteGeneratorStaticsConsumerAppInternal").factory("smartAssistButtonsIssueTypes",["smartAssistButtonsManager","unlinkedButtonTask","modelTreeHelpers",function(a,b,c){return[{id:SmartAssistConfNS.issueTypeIds.UNLINKED_BUTTON,generateIdByContext:function(b){return a.generateId(b)},action:function(a){return b.start(a)},trigger:function(b){return a.isNodeHasButtonLinkIssue(b)},validateContext:function(a){return c.validateNode(a)},config:{priority:1,isInterrupt:!1}}]}]);var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};angular.module("siteGeneratorStaticsConsumerAppInternal").factory("smartAssistButtonsIssueUIDataBuilders",["$translate","fieldEditorConfiguration","nodeTitleManager","modelTreeHelpers","smartAssistHelpers",function(a,b,c,d,e){return f={},f[SmartAssistConfNS.issueTypeIds.UNLINKED_BUTTON]=function(f){var g=d.isItemOfList(f),h={icon:"cc-icon-smart-assist-connect-button",pageInfo:e.getIssuePageInfo(f)};return g?__assign({},h,{text:a.instant("smart-assist.unlinked-button-issue.text-for-list-items",{listItemName:c.getNodeTitleValue(f)})}):__assign({},h,{text:a.instant("smart-assist.unlinked-button-issue.text",{buttonName:_.find(f.contentElement.values,function(a){return b.isButton(a)}).value.callToAction})})},f;var f}]);var SmartAssistButtonsManager=function(){function a(a,b,c,d,e,f,g){var h=this;if(this.flags=a,this.nodeFetcher=b,this.fieldEditorConfiguration=c,this.pubSub=d,this.SmartAssistManager=e,this.modelTreeHelpers=f,this.smartAssistHelpers=g,this.flags.smartAssist){[PubSub.events.PAGE_SHOWN,PubSub.events.PAGE_DUPLICATED,PubSub.events.PAGE_HIDDEN,PubSub.events.PAGE_DELETED,PubSub.events.SECTION_ADDED,PubSub.events.SECTION_MOVED,PubSub.events.SECTION_DUPLICATED,PubSub.events.SECTION_DELETED,PubSub.events.LIST_ITEM_ADDED_OR_SHOWN,PubSub.events.LIST_ITEM_DELETED_OR_HIDDEN,PubSub.events.LINK_OF_FIELD_UPDATED,PubSub.events.CREATED_PAGE_FROM_ITEM].forEach(function(a){d.subscribe(a,h.runEvaluateOnButtons.bind(h))}),d.subscribe(PubSub.events.FIELD_TOGGLED,function(a){var b=a.node;"button"===a.field.data.type&&h.SmartAssistManager.evaluateIssue({contexts:h.modelTreeHelpers.isItemOfList(b)?h.modelTreeHelpers.getItemsOfList(b.identifyingNode):[b],issueNamespaceId:SmartAssistConfNS.namespaces.BUTTONS})})}}return a.$inject=["flags","nodeFetcher","fieldEditorConfiguration","pubSub","SmartAssistManager","modelTreeHelpers","smartAssistHelpers"],a.prototype.runEvaluateOnButtons=function(a){var b="Page"===a.contentElementType?this.modelTreeHelpers.getNodesWithContentElementOfPages([a]):[a],c=_.flatten(b.map(function(a){return a&&a.isList()?a.children:a}));this.SmartAssistManager.evaluateIssue({contexts:c,issueNamespaceId:SmartAssistConfNS.namespaces.BUTTONS})},a.prototype.isNodeHasButtonLinkIssue=function(a){return!(!a||a.userHidden||this.modelTreeHelpers.isPageOfNodeHidden(a))&&this.isButtonUnlinked(a)},a.prototype.isButtonUnlinked=function(a){var b=this,c=_.findKey(a.contentElement.values,function(a){return b.fieldEditorConfiguration.isButton(a)}),d=a.contentElement.values[c],e=a.argsMatchingPolicy[c];return!(!d||!e)&&!this.fieldEditorConfiguration.getILink(d).state},a.prototype.generateId=function(a){return a?a.id:""},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("smartAssistButtonsManager",SmartAssistButtonsManager),angular.module("siteGeneratorStaticsConsumerAppInternal").factory("smartAssistSocialsIssueTypes",["smartAssistSocialsManager","socialDefaultLinksTask","modelTreeHelpers",function(a,b,c){return[{id:SmartAssistConfNS.issueTypeIds.SOCIALS_DEFAULT_LINKS,validateContext:function(a){return c.validateNode(a)},action:function(a){return b.start(a)},trigger:function(b){return a.isSocialsHasDefaultAndVisibleLink(b)},isSingleton:!0,config:{priority:1,isInterrupt:!1}}]}]),angular.module("siteGeneratorStaticsConsumerAppInternal").factory("smartAssistSocialsIssueUIDataBuilders",["$translate",function(a){return b={},b[SmartAssistConfNS.issueTypeIds.SOCIALS_DEFAULT_LINKS]=function(b){return{text:a.instant("smart-assist.socials-default-links-issue.text"),icon:"cc-icon-smart-assist-connect-socials"}},b;var b}]);var SmartAssistSocialsManager=function(){function a(a,b,c,d,e,f,g,h,i,j){var k=this;if(this.flags=a,this.nodeFetcher=b,this.fieldEditorConfiguration=c,this.pubSub=d,this.SmartAssistManager=e,this.modelTreeHelpers=f,this.smartAssistHelpers=g,this.socialLinksHelpers=h,this.socialLinksValidator=i,this.ReferenceFieldTypes=j,this.flags.smartAssist){[PubSub.events.PAGE_SHOWN,PubSub.events.PAGE_DUPLICATED,PubSub.events.SECTION_ADDED,PubSub.events.SECTION_MOVED,PubSub.events.PAGE_DELETED,PubSub.events.PAGE_HIDDEN,PubSub.events.SECTION_DELETED,PubSub.events.SOCIAL_LINKS_UPDATED].forEach(function(a){d.subscribe(a,k.smartAssistHelpers.evaluateAllSocialRelated)}),d.subscribe(PubSub.events.FIELD_TOGGLED,function(a){"social"===a.field.data.subType&&k.smartAssistHelpers.evaluateAllSocialRelated()})}}return a.$inject=["flags","nodeFetcher","fieldEditorConfiguration","pubSub","SmartAssistManager","modelTreeHelpers","smartAssistHelpers","socialLinksHelpers","socialLinksValidator","ReferenceFieldTypes"],a.prototype.getSocialsNode=function(){return this._socialsNode||(this._socialsNode=this.modelTreeHelpers.getSocialNode()),this._socialsNode},a.prototype.isSocialsHasDefaultAndVisibleLink=function(a){var b=this,c=_.get(a,"contentElement.referenceFields")||{};return!(!a||!c[this.ReferenceFieldTypes.SOCIAL]||this.modelTreeHelpers.isPageOfNodeHidden(a))&&this.socialLinksHelpers.extractSocialLinks(this.getSocialsNode()).some(function(a){return!a.hidden&&b.socialLinksValidator.isDefaultUrl(a.url)})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("smartAssistSocialsManager",SmartAssistSocialsManager);var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},SmartAssistConfNS;!function(a){a.namespaces={BUTTONS:"buttons",SOCIALS:"socials"},a.issueTypeIds={UNLINKED_BUTTON:"unlinked_button",SOCIALS_DEFAULT_LINKS:"socials_default_links"};var b=function(){function b(a,b,c,d){this.smartAssistButtonsIssueTypes=a,this.smartAssistSocialsIssueTypes=b,this.smartAssistButtonsIssueUIDataBuilders=c,this.smartAssistSocialsIssueUIDataBuilders=d,this.populatePotentialIssues(),this.populateIssueUIDataBuilders()}
return b.$inject=["smartAssistButtonsIssueTypes","smartAssistSocialsIssueTypes","smartAssistButtonsIssueUIDataBuilders","smartAssistSocialsIssueUIDataBuilders"],b.prototype.getPotentialIssues=function(){return this.potentialIssues},b.prototype.getIssueUIDataBuilder=function(a){return this.issueUIDataBuilders[a]},b.prototype.populatePotentialIssues=function(){this.potentialIssues={},this.populatePotentialIssueNamespace(a.namespaces.BUTTONS,this.smartAssistButtonsIssueTypes),this.populatePotentialIssueNamespace(a.namespaces.SOCIALS,this.smartAssistSocialsIssueTypes)},b.prototype.populatePotentialIssueNamespace=function(a,b){this.potentialIssues[a]={id:a,issues:b.reduce(function(a,b){return __assign({},a,(c={},c[b.id]=b,c));var c},{})}},b.prototype.populateIssueUIDataBuilders=function(){this.issueUIDataBuilders=__assign({},this.smartAssistButtonsIssueUIDataBuilders,this.smartAssistSocialsIssueUIDataBuilders)},b}();a.SmartAssistConf=b,angular.module("siteGeneratorStaticsConsumerAppInternal").service("smartAssistConf",b)}(SmartAssistConfNS||(SmartAssistConfNS={}));var BIErrorCodes;!function(a){a[a.GeneralFatal=-1]="GeneralFatal",a[a.GeneralError=-2]="GeneralError",a[a.GeneralWarning=-3]="GeneralWarning",a[a.ExcessiveErrors=-4]="ExcessiveErrors",a[a.InitSetPropertiesFailed=20]="InitSetPropertiesFailed",a[a.DSSaveFailed=21]="DSSaveFailed",a[a.DSPublishStoryFailed=22]="DSPublishStoryFailed",a[a.UploadImagesFailed=23]="UploadImagesFailed",a[a.SetColorKitFailed=24]="SetColorKitFailed",a[a.SetFontKitFailed=25]="SetFontKitFailed",a[a.SaveStoryHangs=26]="SaveStoryHangs",a[a.SaveStoryFailed=27]="SaveStoryFailed",a[a.PublishStoryFailed=28]="PublishStoryFailed",a[a.MarkMajorRevisionStoryFailed=29]="MarkMajorRevisionStoryFailed",a[a.UndoRedoFailed=30]="UndoRedoFailed",a[a.GetCampaignFailed=200]="GetCampaignFailed"}(BIErrorCodes||(BIErrorCodes={}));var BIOrigins=function(){function a(){}return a}();BIOrigins.TopBar="topbar",BIOrigins.DesignPanel="design panel",BIOrigins.SectionPanel="section panel",BIOrigins.SectionFontPanel="section font panel",BIOrigins.SectionAnimationPanel="section animation panel",BIOrigins.SectionColorsPanel="section colors panel",BIOrigins.SectionBackgroundPanel="section background panel",BIOrigins.ContentPanel="content panel",BIOrigins.AddSectionPanel="add-section",BIOrigins.AddPagePanel="add-page",BIOrigins.HeaderPanel="header-panel",BIOrigins.ColorationPanel="customize-palette-panel",BIOrigins.WelcomeTour="welcomeTour",BIOrigins.InfoCard="info-card",BIOrigins.ClipartSettingsPanel="clipart-settings-panel",BIOrigins.EditPanel="edit panel",BIOrigins.MediaSetting="media settings panel",BIOrigins.MediaSettingsPanel="media settings panel",BIOrigins.OSI="OSI",BIOrigins.ClickEditButton="click edit button",BIOrigins.ToFitModeButton="fit-mode",BIOrigins.ToCropModeButton="crop-mode",BIOrigins.UnknownSource="unknown-source",BIOrigins.SwitchEditModeDropdown="switch-edit-mode-dropdown",BIOrigins.OnSiteStart="on-site-start",BIOrigins.TourTask="tour",BIOrigins.AssistantDockButton="assistant-dock-button",BIOrigins.SwitchTab="switch-tab",BIOrigins.SmartAssistEmptyStateButton="smart-assist empty state button",BIOrigins.SmartAssistSocialsDefaultLinks="smart-assist socials default links",BIOrigins.SmartAssistUnlinkedButtons="smart-assist unlinked buttons";var BIInitator=function(){function a(){}return a}();BIInitator.System="system",BIInitator.User="user";var BIHeaderTypes=function(){function a(){}return a}();BIHeaderTypes.Solid="solid",BIHeaderTypes.Transparent="transparent",BIHeaderTypes.Fixed="freeze";var BIInitSteps=function(){function a(){}return a}();BIInitSteps.InitStory="init story",BIInitSteps.InitCoreB=core.BIWizardServiceInitBSteps.Init,BIInitSteps.ListenToSiteChanges="listen to site changes",BIInitSteps.InitSiteData="init site data",BIInitSteps.MarkCreated="mark created",BIInitSteps.ProvisionTPAs="provision tpas",BIInitSteps.GenerateInitialContent="generate initial content",BIInitSteps.InitialSave="initial save",BIInitSteps.FullSave="full save",BIInitSteps.DocumentServicesSave="ds save",BIInitSteps.LayoutSolverRender="layout solver render",BIInitSteps.InitContent="init content",BIInitSteps.RecalculatePages="recalculate pages";var BILoadStorySteps=function(){function a(){}return a}();BILoadStorySteps.GetMetadata="get metadata",BILoadStorySteps.FetchStory="fetch story",BILoadStorySteps.InitCoreA=core.BIWizardServiceInitSteps.Init,BILoadStorySteps.BackwardCompatibility="backward compatibility",BILoadStorySteps.DeepLink="deep link";var BICreateStorySteps=function(){function a(){}return a}();BICreateStorySteps.GetUniqueName="get unique name",BICreateStorySteps.SaveNewStory="save new story",BICreateStorySteps.LoadMetadataAndContent="load metadata and content",BICreateStorySteps.GetMetadata="get metadata",BICreateStorySteps.InitContent="init content",BICreateStorySteps.SetMainKit="set main kit",BICreateStorySteps.InitCoreA=core.BIWizardServiceInitSteps.Init,BICreateStorySteps.SetSiteProperties="set site properties";var SdkBIEventType=function(){function a(){}return a}();SdkBIEventType.Settings="GFPP_SETTINGS",SdkBIEventType.Topbar="TOP_BAR_MANAGE",SdkBIEventType.Manage="GFPP_MANAGE";var ConsumerBiLoggerHelpers=function(){function a(a,b,c,d,e,f,g){this.clientTopology=a,this.urlParser=b,this.$injector=c,this.initStopwatch=d,this.$window=e,this.applicationParameters=f,this.consumerBiLoggerSanitizer=g,this.services={},this.extraPagesAdded=0,this.defaultValues={},this.openedPanelStack=[]}return a.$inject=["clientTopology","urlParser","$injector","initStopwatch","$window","applicationParameters","consumerBiLoggerSanitizer"],a.prototype.getService=function(a){return this.services[a]||(this.services[a]=this.$injector.get(a)),this.services[a]},Object.defineProperty(a.prototype,"storyServices",{get:function(){return this.getService("storyServices")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"themeChooser",{get:function(){return this.getService("themeChooser")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"assistantManager",{get:function(){return this.getService("assistantManager")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"introManager",{get:function(){return this.getService("introManager")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"BackendStory",{get:function(){return this.getService("BackendStory")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"nodeFetcher",{get:function(){return this.getService("nodeFetcher")},enumerable:!0,configurable:!0}),a.prototype.getSDKJsonForBIEvent=function(a,b){var c={app_id:a,evid:12,initiator:"ADI",instance_id:this.getInstanceId(),msid:this.getMetaSiteId(),ownerId:this.getOwnerId(),src:75,type:b};return"cbi="+encodeURIComponent(JSON.stringify(c))},a.prototype.sanitizePII=function(a){return a&&this.consumerBiLoggerSanitizer.sanitizePII(a)},a.prototype.addSDKJsonForBiEvent=function(a,b,c){var d=this.getSDKJsonForBIEvent(b,c),e=a.split("#"),f=e[0].includes("?")?"&":"?",g=e[0]+f+d;return e[1]?g+"#"+e[1]:g},a.prototype.getPanelType=function(){return this.openedPanelStack[this.openedPanelStack.length-1]},a.prototype.setDefaultValue=function(a,b){this.defaultValues[a]=b},a.prototype.setPanelSource=function(a){this.panelSource=a},a.prototype.popPanelSource=function(){var a=this.panelSource;return this.panelSource=void 0,a},a.prototype.getPanelSource=function(){return this.panelSource},a.prototype.getStoryId=function(){return this.storyServices.story?this.storyServices.story.id:this.defaultValues.storyId},a.prototype.getStoryRevision=function(){return this.storyServices.story?this.storyServices.story.revision:this.defaultValues.storyRevision},a.prototype.getIsNewSite=function(){var a=this.defaultValues.isNewSite;return"true"===a?"new site":"false"===a?"existing site":""},a.prototype.getMetaSiteId=function(){try{return this.BackendStory.parseId(this.getStoryId()).metaSiteId}catch(a){return this.defaultValues.metaSiteId}},a.prototype.getInstanceId=function(){try{return this.BackendStory.parseId(this.getStoryId()).instanceId}catch(a){return this.defaultValues.instanceId}},a.prototype.getStructureId=function(){return this.storyServices.story?this.storyServices.story.structureId:this.defaultValues.structureId},a.prototype.getIndustryId=function(){return this.storyServices.story?this.storyServices.story.industryId:this.defaultValues.industryId},a.prototype.getEsi=function(){return this.clientTopology.esi},a.prototype.getPageId=function(){return this.storyServices.story?this.storyServices.story.selectedPage:""},a.prototype.getMainCategory=function(){return this.urlParser.queryParams().vertical||null},a.prototype.getReferral=function(){return decodeURI(this.urlParser.getQueryStringValueByKey("referral"))},a.prototype.getReferralForBI=function(){var a=this.getReferral(),b=this.getMainCategory();return"invalid_story"===a||b&&"business"===b.toLowerCase()?a:""},a.prototype.getWixWizSearchGuid=function(){return this.introManager.wixWizSearchId||null},a.prototype.getLod=function(){return this.introManager.getLod()},a.prototype.getEditMode=function(){if(!this.assistantManager.isInActiveTask()||this.assistantManager.isMenuOpen())return"no-tour";var a=this.assistantManager.getCustomTaskData("editMode");return a||(this.assistantManager.isInAutoplayMode()?"auto-tour":"manual-tour")},a.prototype.getAssistType=function(){return this.assistantManager.getActiveTask().BI.assistType},a.prototype.getAdiBuilderType=function(){return this.applicationParameters.isInMobileEditMode()?"mobile":"desktop"},a.prototype.getNode=function(){return this.nodeFetcher.getCurrentActiveNode()},a.prototype.getNodeId=function(){var a=this.getNode();return a&&a.id},a.prototype.getSectionTypeAndAlias=function(){var a=this.getNode();return[a.getContentElementType(),a.alias]},a.prototype.getSectionType=function(){return"TBD"},a.prototype.getSectionAlias=function(){return"TBD"},a.prototype.getObjectType=function(){return"TBD"},a.prototype.getDesignId=function(){var a=this.themeChooser.getActiveTheme("mainKit");if(a)return a.id},a.prototype.getDesignNumber=function(){return-1},a.prototype.getNoOfDesigns=function(){return this.themeChooser.getColorThemes().length},a.prototype.getPhaseNumber=function(){return this.assistantManager.getActiveTask().activeActionIndex},a.prototype.getTotalPhases=function(){return this.assistantManager.getActiveTask().actions.length},a.prototype.getPhaseName=function(){var a=this.assistantManager.getActiveAction();return a&&a.BI.description},a.prototype.getVersion=function(){return this.BackendStory.getStaticsVersion()},a.prototype.getLastPhase=function(){return this.assistantManager.getActiveTask().activeActionIndex},a.prototype.getIntervalLoadTime=function(){return this.initStopwatch.sample},a.prototype.getLoadTime=function(){return this.initStopwatch.total},a.prototype.resetLoadTime=function(){this.initStopwatch.reset()},a.prototype.getOwnerId=function(){return this.storyServices.story&&this.storyServices.story.ownerId},a.prototype.getUserRoles=function(){return this.storyServices.story&&this.storyServices.story.userRoles&&this.storyServices.story.userRoles.join(",")},a.prototype.getScreenResolution=function(){return this.$window.screen?this.$window.screen.availWidth+"x"+this.$window.screen.availHeight:"unknown"},a.prototype.resetExtraPagesCount=function(){this.extraPagesAdded=0},a.prototype.incExtraPagesCount=function(){this.extraPagesAdded++},a.prototype.extraPagesCount=function(){return this.extraPagesAdded},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("consumerBiLoggerHelpers",ConsumerBiLoggerHelpers);var AutomationConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.loadTestCompleted=function(a){try{var b=this.consumerBiLoggerHelpers.getLoadTime(),c=this.consumerBiLoggerHelpers.getMetaSiteId();return a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(b),this.mainHelper.validateGuid(c),this.mainHelper.log({src:66,evid:30,testName:a,loadTime:b,msid:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report automation.loadTestCompleted",a.stack)}},a}(),AppsConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.clickOnManageApp=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:450,source:a,appId:b,appName:c,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,revision:j,structureId:k,adiBuilderType:l,appInstanceId:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report apps.clickOnManageApp",a.stack)}},a.prototype.clickOnEditAppTpaSettings=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:453,source:a,appId:b,appName:c,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,revision:j,structureId:k,adiBuilderType:l,appInstanceId:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report apps.clickOnEditAppTpaSettings",a.stack)}},a}(),BuilderConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.loadingPhaseInInitStart=function(a,b){try{var c=this.consumerBiLoggerHelpers.getLoadTime(),d=this.consumerBiLoggerHelpers.getIsNewSite(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:1,loadTime:c,loadType:d,phaseName:a,subPhaseName:b,esi:e,industryId:f,instanceId:g,msid:h,structureId:i,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.loadingPhaseInInitStart",a.stack)}},a.prototype.loadingPhaseInInitComplete=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getLoadTime(),e=this.consumerBiLoggerHelpers.getIsNewSite(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateNumber(d),e=this.mainHelper.validateString(e),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),j=this.mainHelper.validateString(j),k=this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:2,intervalLoadTime:a,loadTime:d,loadType:e,phaseName:b,subPhaseName:c,esi:f,industryId:g,instanceId:h,msid:i,structureId:j,adiBuilderType:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.loadingPhaseInInitComplete",a.stack)}},a.prototype.firstTimeStart=function(a){try{var b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),a=this.mainHelper.validateString(a),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:125,esi:b,industryId:c,origin:a,structureId:d,adiBuilderType:e,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.firstTimeStart",a.stack)}},a.prototype.firstTimeComplete=function(a,b){try{var c=this.consumerBiLoggerHelpers.getIntervalLoadTime(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getLoadTime(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateNumber(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(b),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:134,intervalLoadTime:c,esi:d,industryId:e,instanceId:f,loadTime:g,msid:h,structureId:i,validStory:a,timeInPage:b,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.firstTimeComplete",a.stack)}},a.prototype.existingSiteStart=function(a){try{var b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),a=this.mainHelper.validateString(a),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:135,esi:b,industryId:c,instanceId:d,msid:e,origin:a,structureId:f,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.existingSiteStart",a.stack)}},a.prototype.existingSiteComplete=function(a,b){try{var c=this.consumerBiLoggerHelpers.getIntervalLoadTime(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getLoadTime(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateNumber(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(b),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:139,intervalLoadTime:c,esi:d,industryId:e,instanceId:f,loadTime:g,msid:h,structureId:i,validStory:a,timeInPage:b,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.existingSiteComplete",a.stack)}},a.prototype.undoRedoLastChange=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),a=this.mainHelper.validateString(a),g=this.mainHelper.validateString(g),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:140,instanceId:b,msid:c,structureId:d,industryId:e,esi:f,action:a,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.undoRedoLastChange",a.stack)}},a.prototype.undoRedoSucces=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getLoadTime(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:141,instanceId:b,msid:c,structureId:d,industryId:e,esi:f,action:a,loadTime:g,adiBuilderType:h,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.undoRedoSucces",a.stack)}},a.prototype.topBarHelpClick=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:142,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.topBarHelpClick",a.stack)}},a.prototype.topBarEditBusinessInfoClick=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:143,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.topBarEditBusinessInfoClick",a.stack)}},a.prototype.businessInfoEditBusinessInfoPageView=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:144,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.businessInfoEditBusinessInfoPageView",a.stack)}},a.prototype.businessInfoUpdateChanges=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),i=this.mainHelper.validateString(i),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:145,instanceId:d,msid:e,structureId:f,industryId:g,esi:h,fieldsAdded:a,fieldsRemoved:b,fieldsUpdated:c,adiBuilderType:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.businessInfoUpdateChanges",a.stack)}},a.prototype.businessInfoUpdateChangesSuccess=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getLoadTime(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:146,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,loadTime:f,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.businessInfoUpdateChangesSuccess",a.stack)}},a.prototype.businessInfoClosePage=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:147,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.businessInfoClosePage",a.stack)}},a.prototype.topBarGoToMyDashboard=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:148,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.topBarGoToMyDashboard",a.stack)}},a.prototype.topBarGoToSiteSettings=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:149,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.topBarGoToSiteSettings",a.stack)}},a.prototype.topBarConnectDomainClick=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:150,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.topBarConnectDomainClick",a.stack)}},a.prototype.connectDomainPageView=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),a=this.mainHelper.validateString(a),h=this.mainHelper.validateString(h),b=this.mainHelper.validateString(b),this.mainHelper.log({src:66,evid:151,instanceId:c,msid:d,structureId:e,industryId:f,esi:g,referral:a,adiBuilderType:h,referralAdditionalInfo:b,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.connectDomainPageView",a.stack)}},a.prototype.connectDomainNavigateToDomainSPages=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),
this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),a=this.mainHelper.validateString(a),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:152,instanceId:b,msid:c,structureId:d,industryId:e,esi:f,action:a,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.connectDomainNavigateToDomainSPages",a.stack)}},a.prototype.connectDomainClosePage=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:153,instanceId:b,msid:c,structureId:d,industryId:e,esi:f,adiBuilderType:g,name:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.connectDomainClosePage",a.stack)}},a.prototype.topBarViewSiteClick=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:154,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.topBarViewSiteClick",a.stack)}},a.prototype.topBarGoToEditorClick=function(a){try{var b=this.consumerBiLoggerHelpers.getAdiBuilderType(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:155,origin:a,adiBuilderType:b,esi:c,industryId:d,instanceId:e,msid:f,structureId:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.topBarGoToEditorClick",a.stack)}},a.prototype.goToEditorNotificationPageView=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:156,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.goToEditorNotificationPageView",a.stack)}},a.prototype.goToEditorContinueToProEditorClick=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:157,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.goToEditorContinueToProEditorClick",a.stack)}},a.prototype.goToEditorClosePage=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:158,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.goToEditorClosePage",a.stack)}},a.prototype.topBarPreviewSiteClick=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),a=this.mainHelper.validateString(a),g=this.mainHelper.validateString(g),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:159,instanceId:b,msid:c,structureId:d,industryId:e,esi:f,origin:a,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.topBarPreviewSiteClick",a.stack)}},a.prototype.previewSitePageView=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:160,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.previewSitePageView",a.stack)}},a.prototype.previewSiteSwitchToMobileDesktopView=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),a=this.mainHelper.validateString(a),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:161,instanceId:b,msid:c,structureId:d,industryId:e,esi:f,viewMode:a,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.previewSiteSwitchToMobileDesktopView",a.stack)}},a.prototype.previewSiteClosePage=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:162,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.previewSiteClosePage",a.stack)}},a.prototype.topBarPublishSiteClick=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:163,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.topBarPublishSiteClick",a.stack)}},a.prototype.publishSiteCongratsPageView=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.log({src:66,evid:164,instanceId:c,msid:d,structureId:e,industryId:f,esi:g,adiBuilderType:h,pageView:a,referralAdditionalInfo:b,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.publishSiteCongratsPageView",a.stack)}},a.prototype.publishSiteClosePage=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:165,instanceId:b,msid:c,structureId:d,industryId:e,esi:f,adiBuilderType:g,referralAdditionalInfo:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.publishSiteClosePage",a.stack)}},a.prototype.zoomInOut=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(b),h=this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:166,instanceId:c,msid:d,structureId:e,industryId:f,esi:g,zoomType:a,scale:b,adiBuilderType:h,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.zoomInOut",a.stack)}},a.prototype.loadingError=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getIsNewSite(),e=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),a=this.mainHelper.validateString(a),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:167,instanceId:b,msid:c,err:a,loadType:d,adiBuilderType:e,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.loadingError",a.stack)}},a.prototype.autosaveStart=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:168,saveToSanta:a,instanceId:b,esi:c,msid:d,revision:e,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.autosaveStart",a.stack)}},a.prototype.autosaveEnd=function(){try{var a=this.consumerBiLoggerHelpers.getEsi(),b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(a),b=this.mainHelper.validateString(b),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:174,esi:a,instanceId:b,revision:c,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.autosaveEnd",a.stack)}},a.prototype.topBarGiveFeedbackClick=function(){try{var a=this.consumerBiLoggerHelpers.getEsi(),b=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:178,esi:a,industryId:b,instanceId:c,msid:d,structureId:e,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.topBarGiveFeedbackClick",a.stack)}},a.prototype.topBarPreviewSiteSuccess=function(){try{var a=this.consumerBiLoggerHelpers.getEsi(),b=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getLoadTime(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:179,esi:a,industryId:b,instanceId:c,msid:d,structureId:e,loadTime:f,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.topBarPreviewSiteSuccess",a.stack)}},a.prototype.topBarCreateNewSite=function(){try{var a=this.consumerBiLoggerHelpers.getEsi(),b=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:180,esi:a,industryId:b,instanceId:c,msid:d,structureId:e,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.topBarCreateNewSite",a.stack)}},a.prototype.topBarSeoPanelGetFoundOnGoogleClick=function(a){try{var b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:181,origin:a,esi:b,industryId:c,instanceId:d,msid:e,structureId:f,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.topBarSeoPanelGetFoundOnGoogleClick",a.stack)}},a.prototype.topBarSiteMenuDialogOpen=function(){try{var a=this.consumerBiLoggerHelpers.getAdiBuilderType(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStructureId();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:182,adiBuilderType:a,esi:b,industryId:c,instanceId:d,msid:e,structureId:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.topBarSiteMenuDialogOpen",a.stack)}},a.prototype.firstPublishClick=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:183,instanceId:b,msid:c,structureId:d,industryId:e,esi:f,adiBuilderType:g,domainOption:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.firstPublishClick",a.stack)}},a.prototype.publishSiteCongratsPageDoneClick=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:186,instanceId:c,msid:d,structureId:e,industryId:f,esi:g,adiBuilderType:h,pageView:a,showNextTime:b,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.publishSiteCongratsPageDoneClick",a.stack)}},a.prototype.publishSiteCongratsPageViewSiteClick=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:187,instanceId:b,msid:c,structureId:d,industryId:e,esi:f,adiBuilderType:g,pageView:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.publishSiteCongratsPageViewSiteClick",a.stack)}},a.prototype.publishSiteCongratsPageSocialClick=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.log({src:66,evid:188,instanceId:c,msid:d,structureId:e,industryId:f,esi:g,adiBuilderType:h,pageView:a,socialButton:b,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.publishSiteCongratsPageSocialClick",a.stack)}},a.prototype.switchBuilderTypeMobileDesktopClick=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),b=this.mainHelper.validateString(b),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:35,source:a,editMode:c,esi:d,industryId:e,instanceId:f,msid:g,selectedBuilder:b,revision:h,structureId:i,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.switchBuilderTypeMobileDesktopClick",a.stack)}},a.prototype.switchBuilderTypeMobileDesktopSuccess=function(a,b){try{var c=this.consumerBiLoggerHelpers.getLoadTime(),d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(c),a=this.mainHelper.validateString(a),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),b=this.mainHelper.validateString(b),this.mainHelper.validateNumber(i),j=this.mainHelper.validateString(j),k=this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:36,loadTime:c,source:a,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,selectedBuilder:b,revision:i,structureId:j,adiBuilderType:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.switchBuilderTypeMobileDesktopSuccess",a.stack)}},a.prototype.onstageOsiQuickAction=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getStoryRevision(),n=this.consumerBiLoggerHelpers.getStructureId();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),c=this.mainHelper.validateString(c),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),d=this.mainHelper.validateString(d),l=this.mainHelper.validateString(l),this.mainHelper.validateNumber(m),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:236,origin:a,name:b,editMode:g,esi:h,fieldName:c,industryId:i,instanceId:j,msid:k,nodeId:d,pageId:l,revision:m,sectionAlias:e,sectionType:f,structureId:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.onstageOsiQuickAction",a.stack)}},a.prototype.goToEditorContinueToProEditorSuccess=function(){try{var a=this.consumerBiLoggerHelpers.getLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:185,loadTime:a,esi:b,industryId:c,instanceId:d,msid:e,structureId:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.goToEditorContinueToProEditorSuccess",a.stack)}},a.prototype.undoRedoLastChangeFetchFromServer=function(a){try{var b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStructureId();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:451,action:a,esi:b,industryId:c,instanceId:d,msid:e,structureId:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.undoRedoLastChangeFetchFromServer",a.stack)}},a.prototype.undoRedoSuccessRetrieveFromServer=function(a){try{var b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStructureId();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:452,action:a,esi:b,industryId:c,instanceId:d,msid:e,structureId:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.undoRedoSuccessRetrieveFromServer",a.stack)}},a}(),ContentEditorConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.panelIsLoaded=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getPanelType(),n=this.consumerBiLoggerHelpers.getObjectType(),o=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),k=this.mainHelper.validateString(k),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),l=this.mainHelper.validateString(l),d=this.mainHelper.validateString(d),m=this.mainHelper.validateString(m),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.log({src:66,evid:200,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,source:d,panelType:m,objectType:n,adiBuilderType:o,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.panelIsLoaded",a.stack)}},a.prototype.panelClosed=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getPanelType(),m=this.consumerBiLoggerHelpers.getObjectType(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),j=this.mainHelper.validateString(j),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),m=this.mainHelper.validateString(m),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:201,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:a,sectionType:b,sectionAlias:c,pageId:k,panelType:l,objectType:m,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.panelClosed",a.stack)}},a.prototype.updateField=function(a,b,c,d,e){try{
var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),l=this.mainHelper.validateString(l),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),m=this.mainHelper.validateString(m),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),n=this.mainHelper.validateString(n),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:202,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:l,nodeId:a,sectionType:b,sectionAlias:c,pageId:m,fieldName:d,fieldType:e,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.updateField",a.stack)}},a.prototype.valueWasDeleted=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),l=this.mainHelper.validateString(l),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),m=this.mainHelper.validateString(m),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:203,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:l,nodeId:a,sectionType:b,sectionAlias:c,pageId:m,fieldName:d,fieldType:e,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.valueWasDeleted",a.stack)}},a.prototype.clickOnHideUnhideComponent=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),n=this.mainHelper.validateString(n),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),o=this.mainHelper.validateString(o),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),p=this.mainHelper.validateString(p),g=this.mainHelper.validateString(g),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:204,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,nodeId:a,sectionType:b,sectionAlias:c,pageId:o,fieldName:d,fieldType:e,action:f,adiBuilderType:p,origin:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.clickOnHideUnhideComponent",a.stack)}},a.prototype.componentWasHiddenSuccess=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getLoadTime(),q=this.consumerBiLoggerHelpers.getAdiBuilderType();return h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),n=this.mainHelper.validateString(n),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),o=this.mainHelper.validateString(o),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateNumber(p),q=this.mainHelper.validateString(q),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:205,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,nodeId:a,sectionType:b,sectionAlias:c,pageId:o,fieldName:d,fieldType:e,action:f,loadTime:p,adiBuilderType:q,origin:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.componentWasHiddenSuccess",a.stack)}},a.prototype.switchMediaTypeClick=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),k=this.mainHelper.validateString(k),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),l=this.mainHelper.validateString(l),d=this.mainHelper.validateString(d),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:206,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,mediaType:d,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.switchMediaTypeClick",a.stack)}},a.prototype.clickOnReplaceOrganizeMedia=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),k=this.mainHelper.validateString(k),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),l=this.mainHelper.validateString(l),d=this.mainHelper.validateString(d),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:207,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,mediaType:d,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.clickOnReplaceOrganizeMedia",a.stack)}},a.prototype.cropImageDialogIsShown=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getObjectType(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),j=this.mainHelper.validateString(j),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:208,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:a,sectionType:b,sectionAlias:c,pageId:k,objectType:l,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.cropImageDialogIsShown",a.stack)}},a.prototype.imageCropZoomInZoomOut=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getObjectType(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),k=this.mainHelper.validateString(k),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),l=this.mainHelper.validateString(l),d=this.mainHelper.validateString(d),m=this.mainHelper.validateString(m),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:209,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,zoomType:d,objectType:m,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.imageCropZoomInZoomOut",a.stack)}},a.prototype.imageCropSuccess=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getObjectType(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),j=this.mainHelper.validateString(j),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:210,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:a,sectionType:b,sectionAlias:c,pageId:k,objectType:l,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.imageCropSuccess",a.stack)}},a.prototype.imageCropCancel=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getObjectType(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),j=this.mainHelper.validateString(j),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:211,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:a,sectionType:b,sectionAlias:c,pageId:k,objectType:l,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.imageCropCancel",a.stack)}},a.prototype.linkDialogIsLoaded=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getPanelType(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),k=this.mainHelper.validateString(k),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),l=this.mainHelper.validateString(l),m=this.mainHelper.validateString(m),d=this.mainHelper.validateString(d),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:212,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,panelType:m,source:d,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.linkDialogIsLoaded",a.stack)}},a.prototype.linkDialogDoneClicked=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getPanelType(),q=this.consumerBiLoggerHelpers.getAdiBuilderType();return h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),n=this.mainHelper.validateString(n),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),o=this.mainHelper.validateString(o),p=this.mainHelper.validateString(p),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),q=this.mainHelper.validateString(q),this.mainHelper.log({src:66,evid:213,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,nodeId:a,sectionType:b,sectionAlias:c,pageId:o,panelType:p,linkTo:d,targetPage:e,place:f,source:g,adiBuilderType:q,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.linkDialogDoneClicked",a.stack)}},a.prototype.linkDialogClosed=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getPanelType(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),k=this.mainHelper.validateString(k),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),l=this.mainHelper.validateString(l),m=this.mainHelper.validateString(m),d=this.mainHelper.validateString(d),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:214,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,panelType:m,source:d,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.linkDialogClosed",a.stack)}},a.prototype.clickOnAddDuplicateItemInAList=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),k=this.mainHelper.validateString(k),a=this.mainHelper.validateString(a),l=this.mainHelper.validateString(l),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),m=this.mainHelper.validateString(m),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:215,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,pageId:l,sectionType:b,sectionAlias:c,addType:d,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.clickOnAddDuplicateItemInAList",a.stack)}},a.prototype.addDuplicateItemSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getLoadTime(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),k=this.mainHelper.validateString(k),a=this.mainHelper.validateString(a),l=this.mainHelper.validateString(l),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(m),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:216,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,pageId:l,sectionType:b,sectionAlias:c,addType:d,loadTime:m,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.addDuplicateItemSuccess",a.stack)}},a.prototype.reorderItemInAList=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),j=this.mainHelper.validateString(j),a=this.mainHelper.validateString(a),k=this.mainHelper.validateString(k),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),l=this.mainHelper.validateString(l),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:217,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:a,pageId:k,sectionType:b,sectionAlias:c,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.reorderItemInAList",a.stack)}},a.prototype.itemReorderSuccess=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getLoadTime(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),j=this.mainHelper.validateString(j),a=this.mainHelper.validateString(a),k=this.mainHelper.validateString(k),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(l),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:218,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:a,pageId:k,sectionType:b,sectionAlias:c,loadTime:l,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.itemReorderSuccess",a.stack)}},a.prototype.switchListItemToPage=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),k=this.mainHelper.validateString(k),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),m=this.mainHelper.validateString(m),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:219,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,originPageId:b,pageId:l,sectionType:c,sectionAlias:d,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.switchListItemToPage",a.stack)}},a.prototype.itemMovedToAnotherPageSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getLoadTime(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),k=this.mainHelper.validateString(k),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),l=this.mainHelper.validateString(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(m),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:220,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,originPageId:b,pageId:l,sectionType:c,sectionAlias:d,loadTime:m,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.itemMovedToAnotherPageSuccess",a.stack)}},a.prototype.galleryLayoutWindowOpened=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),l=this.mainHelper.validateString(l),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),m=this.mainHelper.validateString(m),this.mainHelper.validateNumber(d),e=this.mainHelper.validateString(e),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:221,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:l,nodeId:a,sectionType:b,sectionAlias:c,pageId:m,noOfSuggestions:d,layoutType:e,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.galleryLayoutWindowOpened",a.stack)}},a.prototype.galleryLayoutChanged=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),n=this.mainHelper.validateString(n),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),o=this.mainHelper.validateString(o),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:222,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,nodeId:a,sectionType:b,sectionAlias:c,pageId:o,galleryType:d,noOfSuggestions:e,placeOfSelected:f,layoutType:g,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.galleryLayoutChanged",a.stack)}},a.prototype.galleryLayoutWindowClosed=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),m=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.getPageId(),o=this.consumerBiLoggerHelpers.getAdiBuilderType();return g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),j=this.mainHelper.validateString(j),k=this.mainHelper.validateString(k),this.mainHelper.validateGuid(l),m=this.mainHelper.validateString(m),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),n=this.mainHelper.validateString(n),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),o=this.mainHelper.validateString(o),this.mainHelper.log({src:66,evid:224,instanceId:g,msid:h,revision:i,structureId:j,industryId:k,esi:l,editMode:m,nodeId:a,sectionType:b,sectionAlias:c,pageId:n,galleryType:d,noOfSuggestions:e,layoutType:f,adiBuilderType:o,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.galleryLayoutWindowClosed",a.stack)}},a.prototype.failoverReArrangeSolution=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),j=this.mainHelper.validateString(j),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:225,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:a,sectionType:b,sectionAlias:c,pageId:k,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.failoverReArrangeSolution",a.stack)}},a.prototype.failoverReArrangeLayout=function(a,b,c){try{
var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),j=this.mainHelper.validateString(j),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:226,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:a,sectionType:b,sectionAlias:c,pageId:k,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.failoverReArrangeLayout",a.stack)}},a.prototype.failToFitLayoutCanTFindAProperLayout=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),k=this.mainHelper.validateString(k),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),l=this.mainHelper.validateString(l),d=this.mainHelper.validateString(d),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:227,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,reason:d,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.failToFitLayoutCanTFindAProperLayout",a.stack)}},a.prototype.fieldWasUpdatedSuccess=function(a,b,c,d,e,f,g,h,i){try{var j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),p=this.consumerBiLoggerHelpers.getEditMode(),q=this.consumerBiLoggerHelpers.getPageId(),r=this.consumerBiLoggerHelpers.getLoadTime(),s=this.consumerBiLoggerHelpers.getAdiBuilderType();return j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(l),m=this.mainHelper.validateString(m),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),p=this.mainHelper.validateString(p),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),q=this.mainHelper.validateString(q),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateNumber(g),this.mainHelper.validateNumber(h),this.mainHelper.validateNumber(r),s=this.mainHelper.validateString(s),this.mainHelper.log({src:66,evid:228,instanceId:j,msid:k,revision:l,structureId:m,industryId:n,esi:o,editMode:p,nodeId:a,sectionType:b,sectionAlias:c,pageId:q,fieldName:d,fieldType:e,fieldValue:f,fieldLength:g,noOfFaces:h,loadTime:r,adiBuilderType:s,isDefaultValue:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.fieldWasUpdatedSuccess",a.stack)}},a.prototype.dataInsertedToTpaAutomatically=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getEsi(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),k=this.mainHelper.validateString(k),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(l),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:229,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,esi:l,extraInfo:d,appId:e,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.dataInsertedToTpaAutomatically",a.stack)}},a.prototype.clickOnHideShowOnItemInListItems=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),b=this.mainHelper.validateString(b),j=this.mainHelper.validateString(j),this.mainHelper.validateNumber(k),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),l=this.mainHelper.validateString(l),m=this.mainHelper.validateString(m),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:230,action:a,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,nodeId:b,pageId:j,revision:k,sectionAlias:c,sectionType:d,structureId:l,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.clickOnHideShowOnItemInListItems",a.stack)}},a.prototype.clickOnHideShowOnItemInListItemsSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getLoadTime(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),b=this.mainHelper.validateString(b),j=this.mainHelper.validateString(j),this.mainHelper.validateNumber(k),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),l=this.mainHelper.validateString(l),this.mainHelper.validateNumber(m),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:231,action:a,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,nodeId:b,pageId:j,revision:k,sectionAlias:c,sectionType:d,structureId:l,loadTime:m,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.clickOnHideShowOnItemInListItemsSuccess",a.stack)}},a.prototype.richTextClick=function(a,b,c,d,e,f,g,h,i){try{var j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),p=this.consumerBiLoggerHelpers.getEditMode(),q=this.consumerBiLoggerHelpers.getPageId(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(l),m=this.mainHelper.validateString(m),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),p=this.mainHelper.validateString(p),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),q=this.mainHelper.validateString(q),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateNumber(i),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:232,instanceId:j,msid:k,revision:l,structureId:m,industryId:n,esi:o,editMode:p,nodeId:a,sectionType:b,sectionAlias:c,pageId:q,richTextMode:d,richTextType:e,fieldName:f,fieldType:g,fieldValue:h,fieldLength:i,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.richTextClick",a.stack)}},a.prototype.onstageQuickActionsTooltipShown=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),a=this.mainHelper.validateString(a),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),b=this.mainHelper.validateString(b),j=this.mainHelper.validateString(j),this.mainHelper.validateNumber(k),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:235,editMode:e,esi:f,fieldName:a,industryId:g,instanceId:h,msid:i,nodeId:b,pageId:j,revision:k,sectionAlias:c,sectionType:d,structureId:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.onstageQuickActionsTooltipShown",a.stack)}},a.prototype.changeContentColorClick=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getStoryRevision(),n=this.consumerBiLoggerHelpers.getStructureId();return g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),a=this.mainHelper.validateString(a),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),b=this.mainHelper.validateString(b),l=this.mainHelper.validateString(l),this.mainHelper.validateNumber(m),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:237,editMode:g,esi:h,contentName:a,industryId:i,instanceId:j,msid:k,nodeId:b,pageId:l,revision:m,colorLocation:c,colorType:d,sectionAlias:e,sectionType:f,structureId:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.changeContentColorClick",a.stack)}},a.prototype.changeContentColorSuccess=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getStoryRevision(),n=this.consumerBiLoggerHelpers.getStructureId();return g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),a=this.mainHelper.validateString(a),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),b=this.mainHelper.validateString(b),l=this.mainHelper.validateString(l),this.mainHelper.validateNumber(m),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:238,editMode:g,esi:h,contentName:a,industryId:i,instanceId:j,msid:k,nodeId:b,pageId:l,revision:m,colorLocation:c,colorType:d,sectionAlias:e,sectionType:f,structureId:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.changeContentColorSuccess",a.stack)}},a.prototype.resetContentColorClick=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),a=this.mainHelper.validateString(a),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),b=this.mainHelper.validateString(b),j=this.mainHelper.validateString(j),this.mainHelper.validateNumber(k),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:239,editMode:e,esi:f,contentName:a,industryId:g,instanceId:h,msid:i,nodeId:b,pageId:j,revision:k,sectionAlias:c,sectionType:d,structureId:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.resetContentColorClick",a.stack)}},a.prototype.resetContentColorSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),a=this.mainHelper.validateString(a),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),b=this.mainHelper.validateString(b),j=this.mainHelper.validateString(j),this.mainHelper.validateNumber(k),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:240,editMode:e,esi:f,contentName:a,industryId:g,instanceId:h,msid:i,nodeId:b,pageId:j,revision:k,sectionAlias:c,sectionType:d,structureId:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.resetContentColorSuccess",a.stack)}},a.prototype.replaceMediaWindowIsLoaded=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),n=this.mainHelper.validateString(n),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),o=this.mainHelper.validateString(o),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateNumber(g),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:400,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,nodeId:a,sectionType:b,sectionAlias:c,pageId:o,mediaType:d,galleryType:e,origin:f,numTotal:g,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.replaceMediaWindowIsLoaded",a.stack)}},a.prototype.closeMediaWindow=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),m=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.getPageId(),o=this.consumerBiLoggerHelpers.getAdiBuilderType();return g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),j=this.mainHelper.validateString(j),k=this.mainHelper.validateString(k),this.mainHelper.validateGuid(l),m=this.mainHelper.validateString(m),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),n=this.mainHelper.validateString(n),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),o=this.mainHelper.validateString(o),this.mainHelper.log({src:66,evid:401,instanceId:g,msid:h,revision:i,structureId:j,industryId:k,esi:l,editMode:m,nodeId:a,sectionType:b,sectionAlias:c,pageId:n,mediaType:d,galleryType:e,origin:f,adiBuilderType:o,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.closeMediaWindow",a.stack)}},a.prototype.approveChangesInTheMediaWindow=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),n=this.mainHelper.validateString(n),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),o=this.mainHelper.validateString(o),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateNumber(g),p=this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:402,origin:a,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,nodeId:b,sectionType:c,sectionAlias:d,pageId:o,mediaType:e,galleryType:f,numTotal:g,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.approveChangesInTheMediaWindow",a.stack)}},a.prototype.mediaSettingsShow=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),l=this.mainHelper.validateString(l),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),m=this.mainHelper.validateString(m),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:411,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:l,nodeId:a,sectionType:b,sectionAlias:c,pageId:m,mediaType:d,galleryType:e,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.mediaSettingsShow",a.stack)}},a.prototype.mediaSettingsFieldWasUpdated=function(a,b,c,d,e,f,g,h,i){try{var j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),p=this.consumerBiLoggerHelpers.getEditMode(),q=this.consumerBiLoggerHelpers.getPageId(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(l),m=this.mainHelper.validateString(m),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),p=this.mainHelper.validateString(p),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),q=this.mainHelper.validateString(q),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateNumber(i),r=this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:412,instanceId:j,msid:k,revision:l,structureId:m,industryId:n,esi:o,editMode:p,nodeId:a,sectionType:b,sectionAlias:c,pageId:q,mediaType:d,galleryType:e,fieldName:f,fieldType:g,fieldValue:h,fieldLength:i,adiBuilderType:r,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.mediaSettingsFieldWasUpdated",a.stack)}},a.prototype.mediaSettingsClosePanel=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),l=this.mainHelper.validateString(l),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),m=this.mainHelper.validateString(m),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:413,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:l,nodeId:a,sectionType:b,sectionAlias:c,pageId:m,mediaType:d,galleryType:e,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.mediaSettingsClosePanel",a.stack)}},a.prototype.imageCropSave=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getObjectType(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId();return d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),a=this.mainHelper.validateString(a),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateNumber(k),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:233,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,nodeId:a,objectType:i,pageId:j,revision:k,sectionAlias:b,sectionType:c,structureId:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.imageCropSave",a.stack)}},a.prototype.hideComponentFromSite=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getAdiBuilderType(),f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId();return a=this.mainHelper.validateString(a),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(k),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:241,action:a,adiBuilderType:e,editMode:f,esi:g,fieldName:b,fieldType:c,industryId:h,instanceId:i,msid:j,origin:d,revision:k,structureId:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.hideComponentFromSite",a.stack)}},a.prototype.hideComponentFromSiteSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getAdiBuilderType(),f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId();return a=this.mainHelper.validateString(a),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(k),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:242,action:a,adiBuilderType:e,editMode:f,esi:g,fieldName:b,fieldType:c,industryId:h,instanceId:i,msid:j,origin:d,revision:k,structureId:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.hideComponentFromSiteSuccess",a.stack)}},a.prototype.changeButtonStyleClick=function(a,b){try{var c=this.consumerBiLoggerHelpers.getObjectType(),d=this.consumerBiLoggerHelpers.getAdiBuilderType(),e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId();return c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(a),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),b=this.mainHelper.validateString(b),j=this.mainHelper.validateString(j),this.mainHelper.validateNumber(k),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:243,objectType:c,adiBuilderType:d,styleIndex:a,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,nodeId:b,pageId:j,revision:k,structureId:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.changeButtonStyleClick",a.stack)}},a.prototype.changeButtonStyleSuccess=function(a,b){try{var c=this.consumerBiLoggerHelpers.getObjectType(),d=this.consumerBiLoggerHelpers.getAdiBuilderType(),e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId();return c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(a),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),b=this.mainHelper.validateString(b),j=this.mainHelper.validateString(j),this.mainHelper.validateNumber(k),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:244,objectType:c,adiBuilderType:d,styleIndex:a,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,nodeId:b,pageId:j,revision:k,structureId:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.changeButtonStyleSuccess",a.stack)}},a.prototype.popupDialogIsLoaded=function(a,b){try{var c=this.consumerBiLoggerHelpers.getObjectType(),d=this.consumerBiLoggerHelpers.getAdiBuilderType(),e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId();return c=this.mainHelper.validateString(c),a=this.mainHelper.validateString(a),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),j=this.mainHelper.validateString(j),this.mainHelper.validateNumber(k),b=this.mainHelper.validateString(b),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:245,objectType:c,name:a,adiBuilderType:d,
editMode:e,esi:f,industryId:g,instanceId:h,msid:i,pageId:j,revision:k,source:b,structureId:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.popupDialogIsLoaded",a.stack)}},a.prototype.popupDialogIsClosed=function(a,b){try{var c=this.consumerBiLoggerHelpers.getObjectType(),d=this.consumerBiLoggerHelpers.getAdiBuilderType(),e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId();return c=this.mainHelper.validateString(c),a=this.mainHelper.validateString(a),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),j=this.mainHelper.validateString(j),this.mainHelper.validateNumber(k),b=this.mainHelper.validateString(b),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:246,objectType:c,name:a,adiBuilderType:d,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,pageId:j,revision:k,source:b,structureId:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report contentEditor.popupDialogIsClosed",a.stack)}},a}(),DialogsConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.show=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),l=this.mainHelper.validateString(l),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),m=this.mainHelper.validateString(m),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:47,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:l,nodeId:a,sectionType:b,sectionAlias:c,pageId:m,name:d,origin:e,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report dialogs.show",a.stack)}},a.prototype.approveChanges=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),m=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.getPageId(),o=this.consumerBiLoggerHelpers.getAdiBuilderType();return g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),j=this.mainHelper.validateString(j),k=this.mainHelper.validateString(k),this.mainHelper.validateGuid(l),m=this.mainHelper.validateString(m),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),n=this.mainHelper.validateString(n),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),o=this.mainHelper.validateString(o),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:48,instanceId:g,msid:h,revision:i,structureId:j,industryId:k,esi:l,editMode:m,nodeId:a,sectionType:b,sectionAlias:c,pageId:n,name:d,targetName:e,origin:f,adiBuilderType:o,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report dialogs.approveChanges",a.stack)}},a.prototype.cancel=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),l=this.mainHelper.validateString(l),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),m=this.mainHelper.validateString(m),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),n=this.mainHelper.validateString(n),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:49,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:l,nodeId:a,sectionType:b,sectionAlias:c,pageId:m,name:d,origin:e,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report dialogs.cancel",a.stack)}},a}(),IntroConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.fullStoryStarted=function(a){try{var b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getMainCategory(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),a=this.mainHelper.validateString(a),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:11,esi:b,mainCategory:c,fullStoryUrl:a,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.fullStoryStarted",a.stack)}},a.prototype.pageView=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getMainCategory(),e=this.consumerBiLoggerHelpers.getWixWizSearchGuid(),f=this.consumerBiLoggerHelpers.getReferralForBI(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(c),a=this.mainHelper.validateString(a),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(b),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:100,esi:c,view:a,mainCategory:d,searchGuid:e,noOfMatches:b,referral:f,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.pageView",a.stack)}},a.prototype.businessTypeWasSelected=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getMainCategory(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(f),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),e=this.mainHelper.validateString(e),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:101,esi:f,level:a,name:b,text:c,position:d,suggestList:e,mainCategory:g,adiBuilderType:h,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.businessTypeWasSelected",a.stack)}},a.prototype.businessTypeTypingClientEvent=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getMainCategory(),e=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(c),a=this.mainHelper.validateString(a),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(b),e=this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:102,esi:c,text:a,mainCategory:d,"returnedResults ":b,adiBuilderType:e,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.businessTypeTypingClientEvent",a.stack)}},a.prototype.selectBusinessTypePageNavigationClick=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getMainCategory(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(h),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:103,esi:h,nextView:a,name:b,text:c,suggestList:d,navButton:e,selectedStructureId:f,selectedIndustryId:g,mainCategory:i,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.selectBusinessTypePageNavigationClick",a.stack)}},a.prototype.servicesSelected=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getMainCategory(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(e),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:104,esi:e,stores:a,bookings:b,userSubscription:c,blog:d,mainCategory:f,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.servicesSelected",a.stack)}},a.prototype.selectServicesPageNavigationClick=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getMainCategory(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(g),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:105,esi:g,nextView:a,navButton:b,stores:c,bookings:d,userSubscription:e,blog:f,mainCategory:h,adiBuilderType:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.selectServicesPageNavigationClick",a.stack)}},a.prototype.typeBusinessNamePageNavigationClick=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getMainCategory(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(d),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:106,esi:d,nextView:a,navButton:b,text:c,mainCategory:e,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.typeBusinessNamePageNavigationClick",a.stack)}},a.prototype.typeBusinessLocationPageNavigationClick=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getLod(),f=this.consumerBiLoggerHelpers.getMainCategory(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(d),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),e=this.mainHelper.validateString(e),c=this.mainHelper.validateString(c),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:107,esi:d,nextView:a,navButton:b,lod:e,text:c,mainCategory:f,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.typeBusinessLocationPageNavigationClick",a.stack)}},a.prototype.approveSearchInformationPageNavigationClick=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getLod(),f=this.consumerBiLoggerHelpers.getMainCategory(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(d),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),e=this.mainHelper.validateString(e),c=this.mainHelper.validateString(c),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:108,esi:d,nextView:a,navButton:b,lod:e,text:c,mainCategory:f,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.approveSearchInformationPageNavigationClick",a.stack)}},a.prototype.wixwizSearchResultsGoToTopOfPageClick=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getWixWizSearchGuid(),e=this.consumerBiLoggerHelpers.getMainCategory(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(a),this.mainHelper.validateNumber(b),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:109,esi:c,searchGuid:d,noOfMatches:a,noOfSeenMatches:b,mainCategory:e,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.wixwizSearchResultsGoToTopOfPageClick",a.stack)}},a.prototype.selectInfoCardPageNavigationClick=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getWixWizSearchGuid(),j=this.consumerBiLoggerHelpers.getMainCategory(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(h),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(c),this.mainHelper.validateNumber(d),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(f),this.mainHelper.validateNumber(g),j=this.mainHelper.validateString(j),k=this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:110,esi:h,nextView:a,navButton:b,searchGuid:i,noOfMatches:c,noOfSeenMatches:d,position:e,similarityScore:f,locationScore:g,mainCategory:j,adiBuilderType:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.selectInfoCardPageNavigationClick",a.stack)}},a.prototype.infoCardAddEditRemoveInfo=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getWixWizSearchGuid(),i=this.consumerBiLoggerHelpers.getMainCategory(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(g),this.mainHelper.validateGuid(h),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),i=this.mainHelper.validateString(i),e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(f),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:111,esi:g,searchGuid:h,fieldName:a,fieldType:b,fieldLength:c,action:d,mainCategory:i,origin:e,loadTime:f,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.infoCardAddEditRemoveInfo",a.stack)}},a.prototype.editInfoCardPageNavigationClick=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getMainCategory(),e=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(c),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:112,esi:c,nextView:a,navButton:b,mainCategory:d,adiBuilderType:e,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.editInfoCardPageNavigationClick",a.stack)}},a.prototype.businessTypeNotSupported=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getMainCategory(),e=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(c),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:113,esi:c,name:a,text:b,mainCategory:d,adiBuilderType:e,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.businessTypeNotSupported",a.stack)}},a.prototype.clickOnSearchButtonInSelectUserPage=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getMainCategory(),e=this.consumerBiLoggerHelpers.getLod(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),a=this.mainHelper.validateString(a),e=this.mainHelper.validateString(e),b=this.mainHelper.validateString(b),f=this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:115,esi:c,mainCategory:d,text:a,lod:e,address:b,adiBuilderType:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.clickOnSearchButtonInSelectUserPage",a.stack)}},a.prototype.clickOnReplaceLogoIntroWelcometourBuilder=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:117,editMode:c,esi:d,industryId:e,instanceId:f,msid:g,name:a,origin:b,revision:h,structureId:i,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.clickOnReplaceLogoIntroWelcometourBuilder",a.stack)}},a.prototype.genericCategoryDialogIsShown=function(a){try{var b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getMainCategory(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),a=this.mainHelper.validateString(a),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:118,esi:b,mainCategory:c,text:a,adiBuilderType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.genericCategoryDialogIsShown",a.stack)}},a.prototype.siteConverterPagesNavigationClick=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getAdiBuilderType(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getMainCategory();return d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:121,adiBuilderType:d,esi:e,mainCategory:f,navButton:a,nextView:b,view:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.siteConverterPagesNavigationClick",a.stack)}},a.prototype.siteConverterErrorIsShown=function(a,b){try{var c=this.consumerBiLoggerHelpers.getAdiBuilderType(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getMainCategory();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.log({src:66,evid:122,adiBuilderType:c,esi:d,mainCategory:e,name:a,view:b,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.siteConverterErrorIsShown",a.stack)}},a.prototype.siteConverterPhaseInImportStart=function(a){try{var b=this.consumerBiLoggerHelpers.getAdiBuilderType(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getLoadTime(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStructureId();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(f),this.mainHelper.validateGuid(g),a=this.mainHelper.validateString(a),h=this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:123,adiBuilderType:b,esi:c,industryId:d,instanceId:e,loadTime:f,msid:g,phaseName:a,structureId:h,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.siteConverterPhaseInImportStart",a.stack)}},a.prototype.siteConverterPhaseInImportComplete=function(a,b){try{var c=this.consumerBiLoggerHelpers.getAdiBuilderType(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getIntervalLoadTime(),h=this.consumerBiLoggerHelpers.getLoadTime(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStructureId();return a=this.mainHelper.validateString(a),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateNumber(g),this.mainHelper.validateNumber(h),this.mainHelper.validateGuid(i),b=this.mainHelper.validateString(b),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:124,details:a,adiBuilderType:c,esi:d,industryId:e,instanceId:f,intervalLoadTime:g,loadTime:h,msid:i,phaseName:b,structureId:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report intro.siteConverterPhaseInImportComplete",a.stack)}},a}(),PagesManagerConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.addPageClick=function(a){try{var b=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getPageId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:349,source:a,editMode:b,esi:c,industryId:d,instanceId:e,msid:f,pageId:g,revision:h,structureId:i,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.addPageClick",a.stack)}},a.prototype.pagesPanelIsLoaded=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getPageId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),a=this.mainHelper.validateString(a),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:350,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,pageId:i,source:a,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.pagesPanelIsLoaded",a.stack)}},a.prototype.addPagePanelIsLoaded=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getPageId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:351,instanceId:a,msid:b,revision:c,structureId:d,industryId:e,esi:f,editMode:g,pageId:h,adiBuilderType:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.addPagePanelIsLoaded",a.stack)}},a.prototype.switchPageTypeInTheAddPagePanel=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),j=this.mainHelper.validateString(j),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),k=this.mainHelper.validateString(k),c=this.mainHelper.validateString(c),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:352,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,sectionType:a,sectionAlias:b,pageId:k,place:c,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.switchPageTypeInTheAddPagePanel",a.stack)}},a.prototype.clickOnDesiredNewPage=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),n=this.mainHelper.validateString(n),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),o=this.mainHelper.validateString(o),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),p=this.mainHelper.validateString(p),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:353,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,sectionType:a,sectionAlias:b,pageId:o,place:c,noOfSuggestions:d,placeOfSelected:e,selectedLayout:f,is_columns:g,adiBuilderType:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.clickOnDesiredNewPage",a.stack)}},a.prototype.addNewPageSuccess=function(a,b,c,d,e,f,g,h,i,j,k){try{var l=this.consumerBiLoggerHelpers.getInstanceId(),m=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStoryRevision(),o=this.consumerBiLoggerHelpers.getStructureId(),p=this.consumerBiLoggerHelpers.getIndustryId(),q=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getPageId(),s=this.consumerBiLoggerHelpers.getLoadTime(),t=this.consumerBiLoggerHelpers.getAdiBuilderType();return l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),p=this.mainHelper.validateString(p),this.mainHelper.validateGuid(q),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),r=this.mainHelper.validateString(r),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateNumber(s),t=this.mainHelper.validateString(t),this.mainHelper.log({src:66,evid:354,instanceId:l,msid:m,revision:n,structureId:o,industryId:p,esi:q,editMode:a,sectionType:b,sectionAlias:c,pageId:r,nodeId:d,place:e,noOfSuggestions:f,placeOfSelected:g,selectedLayout:h,appId:i,appPageType:j,loadTime:s,is_columns:k,adiBuilderType:t,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.addNewPageSuccess",a.stack)}},a.prototype.duplicatePage=function(a){try{
var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getPageId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),a=this.mainHelper.validateString(a),j=this.mainHelper.validateString(j),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:367,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,pageId:i,originPageId:a,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.duplicatePage",a.stack)}},a.prototype.hideShowPage=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),k=this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:356,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,pageId:j,action:a,appId:b,adiBuilderType:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.hideShowPage",a.stack)}},a.prototype.renamePage=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getPageId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),a=this.mainHelper.validateString(a),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:357,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,pageId:i,appId:a,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.renamePage",a.stack)}},a.prototype.setPageAsSubpageMainPage=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),k=this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:358,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,pageId:j,direction:a,appId:b,adiBuilderType:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.setPageAsSubpageMainPage",a.stack)}},a.prototype.clickOnDeletePage=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getPageId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),a=this.mainHelper.validateString(a),j=this.mainHelper.validateString(j),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:359,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,pageId:i,appId:a,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.clickOnDeletePage",a.stack)}},a.prototype.deletePageSuccess=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getPageId(),j=this.consumerBiLoggerHelpers.getLoadTime(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:360,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,pageId:i,appId:a,loadTime:j,adiBuilderType:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.deletePageSuccess",a.stack)}},a.prototype.clickOnSetPageAsHomepage=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getPageId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:361,instanceId:a,msid:b,revision:c,structureId:d,industryId:e,esi:f,editMode:g,pageId:h,adiBuilderType:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.clickOnSetPageAsHomepage",a.stack)}},a.prototype.seoPanelIsLoaded=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getPageId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),a=this.mainHelper.validateString(a),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:362,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,pageId:i,appId:a,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.seoPanelIsLoaded",a.stack)}},a.prototype.seoPanelFieldWasUpdated=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),l=this.mainHelper.validateString(l),m=this.mainHelper.validateString(m),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:363,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:l,pageId:m,appId:a,fieldName:b,fieldType:c,fieldValue:d,fieldLength:e,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.seoPanelFieldWasUpdated",a.stack)}},a.prototype.transitionBetweenPagesUpdated=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),k=this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:364,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,pageId:j,transitionType:a,prevTransitionType:b,adiBuilderType:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.transitionBetweenPagesUpdated",a.stack)}},a.prototype.reorderPage=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),j=this.mainHelper.validateString(j),k=this.mainHelper.validateString(k),this.mainHelper.validateNumber(a),this.mainHelper.validateNumber(b),c=this.mainHelper.validateString(c),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:365,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,pageId:k,position:a,prevPosition:b,appId:c,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.reorderPage",a.stack)}},a.prototype.pagesPanelWasClosed=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),a=this.mainHelper.validateString(a),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:366,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,name:a,adiBuilderType:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.pagesPanelWasClosed",a.stack)}},a.prototype.duplicatePageSuccess=function(a){try{var b=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getPageId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getLoadTime(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),a=this.mainHelper.validateString(a),g=this.mainHelper.validateString(g),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:355,editMode:b,esi:c,industryId:d,instanceId:e,msid:f,originPageId:a,pageId:g,revision:h,structureId:i,loadTime:j,adiBuilderType:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.duplicatePageSuccess",a.stack)}},a.prototype.clickOnPage=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getPageId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:368,pageName:a,appId:b,source:c,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,pageId:i,revision:j,structureId:k,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.clickOnPage",a.stack)}},a.prototype.clickOnSettings=function(a){try{var b=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getPageId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:369,pageName:a,editMode:b,esi:c,industryId:d,instanceId:e,msid:f,pageId:g,revision:h,structureId:i,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.clickOnSettings",a.stack)}},a.prototype.gotoPageSuccess=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getPageId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getLoadTime(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),this.mainHelper.validateNumber(l),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:370,pageName:a,appId:b,source:c,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,pageId:i,revision:j,structureId:k,loadTime:l,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.gotoPageSuccess",a.stack)}},a.prototype.addTpaPackageSuccess=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),b=this.mainHelper.validateString(b),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateNumber(d),this.mainHelper.validateGuid(j),e=this.mainHelper.validateString(e),this.mainHelper.validateNumber(k),l=this.mainHelper.validateString(l),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:371,numOfPages:a,appId:b,editMode:f,esi:g,industryId:h,instanceId:i,is_columns:c,loadTime:d,msid:j,nodeId:e,revision:k,structureId:l,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.addTpaPackageSuccess",a.stack)}},a.prototype.pagesDropdownListOpenOnHover=function(){try{var a=this.consumerBiLoggerHelpers.getEditMode(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getPageId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:372,editMode:a,esi:b,industryId:c,instanceId:d,msid:e,pageId:f,revision:g,structureId:h,adiBuilderType:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report pagesManager.pagesDropdownListOpenOnHover",a.stack)}},a}(),ProvisioningConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.tpaIntent=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getMetaSiteId();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(e),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.log({src:75,evid:12,instance_id:a,msid:e,app_id:b,type:c,initiator:d,adapter:"app-sdk"})}catch(a){this.mainHelper.onError("BISafe: failed to report provisioning.tpaIntent",a.stack)}},a.prototype.tpaAppEngagement=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getMetaSiteId();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(d),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),this.mainHelper.log({src:75,evid:13,instance_id:a,msid:d,app_id:b,premium_intent:c,adapter:"app-sdk"})}catch(a){this.mainHelper.onError("BISafe: failed to report provisioning.tpaAppEngagement",a.stack)}},a}(),SectionDesignConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.colorPanelOpened=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),j=this.mainHelper.validateString(j),c=this.mainHelper.validateString(c),k=this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:550,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,revision:i,sectionAlias:a,sectionType:b,structureId:j,origin:c,adiBuilderType:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.colorPanelOpened",a.stack)}},a.prototype.fontPanelOpened=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:553,editMode:c,esi:d,industryId:e,instanceId:f,msid:g,revision:h,sectionAlias:a,sectionType:b,structureId:i,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.fontPanelOpened",a.stack)}},a.prototype.animationPanelOpened=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),j=this.mainHelper.validateString(j),k=this.mainHelper.validateString(k),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:556,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,revision:i,sectionAlias:a,sectionType:b,structureId:j,adiBuilderType:k,animationType:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.animationPanelOpened",a.stack)}},a.prototype.backgroundPanelOpened=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:561,name:a,origin:b,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,revision:j,sectionAlias:c,sectionType:d,structureId:k,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.backgroundPanelOpened",a.stack)}},a.prototype.changeFontSizeClick=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getDesignId(),f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateNumber(k),l=this.mainHelper.validateString(l),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:554,sectionType:a,sectionAlias:b,fontSize:c,setId:d,designId:e,editMode:f,esi:g,industryId:h,instanceId:i,msid:j,revision:k,structureId:l,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeFontSizeClick",a.stack)}},a.prototype.changeFontSizeSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getDesignId(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.validateNumber(e),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(l),m=this.mainHelper.validateString(m),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:555,sectionAlias:a,sectionType:b,loadTime:e,fontSize:c,setId:d,designId:f,editMode:g,esi:h,industryId:i,instanceId:j,msid:k,revision:l,structureId:m,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeFontSizeSuccess",a.stack)}},a.prototype.changeColorSuccess=function(a,b){try{var c=this.consumerBiLoggerHelpers.getLoadTime(),d=this.consumerBiLoggerHelpers.getDesignId(),e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:552,sectionAlias:a,sectionType:b,loadTime:c,designId:d,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,revision:j,structureId:k,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeColorSuccess",a.stack)}},a.prototype.changeColorClick=function(a,b){try{var c=this.consumerBiLoggerHelpers.getDesignId(),d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),
d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),j=this.mainHelper.validateString(j),k=this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:551,sectionAlias:a,sectionType:b,designId:c,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,revision:i,structureId:j,adiBuilderType:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeColorClick",a.stack)}},a.prototype.changeElementAnimationClick=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getDesignId(),f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateNumber(k),l=this.mainHelper.validateString(l),m=this.mainHelper.validateString(m),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:557,sectionAlias:a,sectionType:b,name:c,designId:e,editMode:f,esi:g,industryId:h,instanceId:i,msid:j,revision:k,structureId:l,adiBuilderType:m,animationType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeElementAnimationClick",a.stack)}},a.prototype.changeElementAnimationSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getDesignId(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.validateNumber(e),c=this.mainHelper.validateString(c),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(l),m=this.mainHelper.validateString(m),n=this.mainHelper.validateString(n),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:558,sectionAlias:a,sectionType:b,loadTime:e,name:c,designId:f,editMode:g,esi:h,industryId:i,instanceId:j,msid:k,revision:l,structureId:m,adiBuilderType:n,animationType:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeElementAnimationSuccess",a.stack)}},a.prototype.changeScrollAnimationClick=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getDesignId(),f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateNumber(k),l=this.mainHelper.validateString(l),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:559,sectionAlias:a,sectionType:b,alias:c,name:d,designId:e,editMode:f,esi:g,industryId:h,instanceId:i,msid:j,revision:k,structureId:l,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeScrollAnimationClick",a.stack)}},a.prototype.changeScrollAnimationSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getDesignId(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(e),d=this.mainHelper.validateString(d),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(l),m=this.mainHelper.validateString(m),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:560,sectionAlias:a,sectionType:b,alias:c,loadTime:e,name:d,designId:f,editMode:g,esi:h,industryId:i,instanceId:j,msid:k,revision:l,structureId:m,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeScrollAnimationSuccess",a.stack)}},a.prototype.changeBackgroundClick=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getDesignId(),f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateNumber(k),l=this.mainHelper.validateString(l),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:562,mediaType:a,sectionType:b,sectionAlias:c,name:d,designId:e,editMode:f,esi:g,industryId:h,instanceId:i,msid:j,revision:k,structureId:l,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeBackgroundClick",a.stack)}},a.prototype.changeBackgroundSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getDesignId(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(e),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(l),m=this.mainHelper.validateString(m),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:563,mediaType:a,loadTime:e,sectionType:b,sectionAlias:c,name:d,designId:f,editMode:g,esi:h,industryId:i,instanceId:j,msid:k,revision:l,structureId:m,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeBackgroundSuccess",a.stack)}},a.prototype.showHideListHeaderBackgroundClick=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getDesignId(),e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:564,sectionType:a,sectionAlias:b,action:c,designId:d,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,revision:j,structureId:k,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.showHideListHeaderBackgroundClick",a.stack)}},a.prototype.showHideListHeaderBackgroundSuccess=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getLoadTime(),e=this.consumerBiLoggerHelpers.getDesignId(),f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(d),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateNumber(k),l=this.mainHelper.validateString(l),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:565,loadTime:d,sectionType:a,sectionAlias:b,action:c,designId:e,editMode:f,esi:g,industryId:h,instanceId:i,msid:j,revision:k,structureId:l,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.showHideListHeaderBackgroundSuccess",a.stack)}},a.prototype.uploadBackgroundClick=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getDesignId(),f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(j),b=this.mainHelper.validateString(b),this.mainHelper.validateNumber(k),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),l=this.mainHelper.validateString(l),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:566,designId:e,editMode:f,esi:g,industryId:h,instanceId:i,mediaType:a,msid:j,name:b,revision:k,sectionAlias:c,sectionType:d,structureId:l,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.uploadBackgroundClick",a.stack)}},a.prototype.openBackgroundImageSettings=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getDesignId(),e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(j),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:567,designId:d,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,name:a,revision:j,sectionAlias:b,sectionType:c,structureId:k,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.openBackgroundImageSettings",a.stack)}},a.prototype.changeBackgroundImagePositionClick=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getDesignId(),f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),b=this.mainHelper.validateString(b),this.mainHelper.validateNumber(k),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),l=this.mainHelper.validateString(l),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:568,value:a,designId:e,editMode:f,esi:g,industryId:h,instanceId:i,msid:j,name:b,revision:k,sectionAlias:c,sectionType:d,structureId:l,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeBackgroundImagePositionClick",a.stack)}},a.prototype.changeBackgroundImagePositionSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getDesignId(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(e),a=this.mainHelper.validateString(a),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),b=this.mainHelper.validateString(b),this.mainHelper.validateNumber(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),m=this.mainHelper.validateString(m),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:569,loadTime:e,value:a,designId:f,editMode:g,esi:h,industryId:i,instanceId:j,msid:k,name:b,revision:l,sectionAlias:c,sectionType:d,structureId:m,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeBackgroundImagePositionSuccess",a.stack)}},a.prototype.changeTextAlignmentClick=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getAdiBuilderType(),f=this.consumerBiLoggerHelpers.getDesignId(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),a=this.mainHelper.validateString(a),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(l),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:570,adiBuilderType:e,designId:f,editMode:g,esi:h,textAlign:a,industryId:i,instanceId:j,msid:k,revision:l,sectionAlias:b,sectionType:c,setId:d,structureId:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeTextAlignmentClick",a.stack)}},a.prototype.changeTextAlignmentSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getAdiBuilderType(),g=this.consumerBiLoggerHelpers.getDesignId(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),m=this.consumerBiLoggerHelpers.getStoryRevision(),n=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),a=this.mainHelper.validateString(a),j=this.mainHelper.validateString(j),k=this.mainHelper.validateString(k),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(m),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:571,loadTime:e,adiBuilderType:f,designId:g,editMode:h,esi:i,textAlign:a,industryId:j,instanceId:k,msid:l,revision:m,sectionAlias:b,sectionType:c,setId:d,structureId:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeTextAlignmentSuccess",a.stack)}},a.prototype.changeHeaderTransparencyStart=function(a,b){try{var c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getAdiBuilderType(),e=this.consumerBiLoggerHelpers.getDesignId(),f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId();return c=this.mainHelper.validateString(c),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateNumber(k),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:572,pageId:c,changeBy:a,value:b,adiBuilderType:d,designId:e,editMode:f,esi:g,industryId:h,instanceId:i,msid:j,revision:k,structureId:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeHeaderTransparencyStart",a.stack)}},a.prototype.changeHeaderTransparencySuccess=function(a,b){try{var c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getLoadTime(),e=this.consumerBiLoggerHelpers.getAdiBuilderType(),f=this.consumerBiLoggerHelpers.getDesignId(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId();return c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(l),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:573,pageId:c,loadTime:d,changeBy:a,value:b,adiBuilderType:e,designId:f,editMode:g,esi:h,industryId:i,instanceId:j,msid:k,revision:l,structureId:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeHeaderTransparencySuccess",a.stack)}},a.prototype.changeTextPositionClick=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),k=this.mainHelper.validateString(k),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:574,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,revision:j,sectionAlias:a,sectionType:b,setId:c,structureId:k,textPosition:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeTextPositionClick",a.stack)}},a.prototype.changeTextPositionSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),k=this.mainHelper.validateString(k),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:575,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,revision:j,sectionAlias:a,sectionType:b,setId:c,structureId:k,textPosition:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeTextPositionSuccess",a.stack)}},a}(),SectionManagementConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.replaceSectionPanelIsLoaded=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),k=this.mainHelper.validateString(k),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),l=this.mainHelper.validateString(l),m=this.mainHelper.validateString(m),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:250,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,adiBuilderType:m,source:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.replaceSectionPanelIsLoaded",a.stack)}},a.prototype.changeASectionLayout=function(a,b,c,d,e,f,g,h,i){try{var j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),p=this.consumerBiLoggerHelpers.getEditMode(),q=this.consumerBiLoggerHelpers.getPageId(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(l),m=this.mainHelper.validateString(m),n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),p=this.mainHelper.validateString(p),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),q=this.mainHelper.validateString(q),this.mainHelper.validateNumber(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),r=this.mainHelper.validateString(r),i=this.mainHelper.validateString(i),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:251,instanceId:j,msid:k,revision:l,structureId:m,industryId:n,esi:o,editMode:p,nodeId:a,sectionType:b,sectionAlias:c,pageId:q,noOfSuggestions:d,placeOfSelected:e,selectedLayout:f,appId:g,is_columns:h,adiBuilderType:r,source:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.changeASectionLayout",a.stack)}},a.prototype.changeSectionLayoutSuccess=function(a,b,c,d,e,f,g,h,i,j){try{var k=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),m=this.consumerBiLoggerHelpers.getStoryRevision(),n=this.consumerBiLoggerHelpers.getStructureId(),o=this.consumerBiLoggerHelpers.getIndustryId(),p=this.consumerBiLoggerHelpers.getEsi(),q=this.consumerBiLoggerHelpers.getPageId(),r=this.consumerBiLoggerHelpers.getAdiBuilderType(),s=this.consumerBiLoggerHelpers.getLoadTime();return k=this.mainHelper.validateString(k),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(m),n=this.mainHelper.validateString(n),o=this.mainHelper.validateString(o),this.mainHelper.validateGuid(p),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),q=this.mainHelper.validateString(q),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),j=this.mainHelper.validateString(j),r=this.mainHelper.validateString(r),this.mainHelper.validateNumber(s),this.mainHelper.log({src:66,evid:252,instanceId:k,msid:l,revision:m,structureId:n,industryId:o,esi:p,editMode:a,nodeId:b,sectionType:c,sectionAlias:d,pageId:q,noOfSuggestions:e,placeOfSelected:f,selectedLayout:g,appId:h,is_columns:i,source:j,adiBuilderType:r,loadTime:s,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.changeSectionLayoutSuccess",a.stack)}},a.prototype.addSectionPanelIsLoaded=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getPageId();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:253,instanceId:a,msid:b,revision:c,structureId:d,industryId:e,esi:f,editMode:g,pageId:h,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.addSectionPanelIsLoaded",a.stack)}},a.prototype.switchSectionTypeInTheAddSectionPanel=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId();return d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),j=this.mainHelper.validateString(j),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),k=this.mainHelper.validateString(k),c=this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:254,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,sectionType:a,sectionAlias:b,pageId:k,place:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.switchSectionTypeInTheAddSectionPanel",a.stack)}},a.prototype.addSectionToPage=function(a,b,c,d,e,f,g,h,i,j,k){try{var l=this.consumerBiLoggerHelpers.getInstanceId(),m=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStoryRevision(),o=this.consumerBiLoggerHelpers.getStructureId(),p=this.consumerBiLoggerHelpers.getIndustryId(),q=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getEditMode(),s=this.consumerBiLoggerHelpers.getPageId();return l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),this.mainHelper.validateNumber(n),o=this.mainHelper.validateString(o),p=this.mainHelper.validateString(p),this.mainHelper.validateGuid(q),
r=this.mainHelper.validateString(r),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),s=this.mainHelper.validateString(s),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:255,instanceId:l,msid:m,revision:n,structureId:o,industryId:p,esi:q,editMode:r,sectionType:a,sectionAlias:b,pageId:s,position:c,place:d,noOfSuggestions:e,placeOfSelected:f,selectedLayout:g,addType:h,appId:i,is_columns:j,isLinked:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.addSectionToPage",a.stack)}},a.prototype.addSectionToPageSuccess=function(a,b,c,d,e,f,g,h,i,j,k,l,m){try{var n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),p=this.consumerBiLoggerHelpers.getStoryRevision(),q=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getEsi(),t=this.consumerBiLoggerHelpers.getPageId(),u=this.consumerBiLoggerHelpers.getLoadTime();return n=this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(p),q=this.mainHelper.validateString(q),r=this.mainHelper.validateString(r),this.mainHelper.validateGuid(s),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),t=this.mainHelper.validateString(t),f=this.mainHelper.validateString(f),this.mainHelper.validateNumber(g),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),k=this.mainHelper.validateString(k),this.mainHelper.validateNumber(u),this.mainHelper.log({src:66,evid:256,instanceId:n,msid:o,revision:p,structureId:q,industryId:r,esi:s,editMode:a,nodeId:b,position:c,sectionType:d,sectionAlias:e,pageId:t,place:f,noOfSuggestions:g,placeOfSelected:h,selectedLayout:i,addType:j,appId:k,is_columns:l,loadTime:u,isLinked:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.addSectionToPageSuccess",a.stack)}},a.prototype.sectionMenuDeleteSectionClick=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),m=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.getPageId();return g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),j=this.mainHelper.validateString(j),k=this.mainHelper.validateString(k),this.mainHelper.validateGuid(l),m=this.mainHelper.validateString(m),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),n=this.mainHelper.validateString(n),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:257,instanceId:g,msid:h,revision:i,structureId:j,industryId:k,esi:l,editMode:m,nodeId:a,sectionType:b,sectionAlias:c,pageId:n,appId:d,origin:e,isLinked:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionMenuDeleteSectionClick",a.stack)}},a.prototype.deleteSectionSuccess=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),m=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.getPageId(),o=this.consumerBiLoggerHelpers.getLoadTime();return g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),j=this.mainHelper.validateString(j),k=this.mainHelper.validateString(k),this.mainHelper.validateGuid(l),m=this.mainHelper.validateString(m),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),n=this.mainHelper.validateString(n),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(o),e=this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:258,instanceId:g,msid:h,revision:i,structureId:j,industryId:k,esi:l,editMode:m,nodeId:a,sectionType:b,sectionAlias:c,pageId:n,appId:d,loadTime:o,origin:e,isLinked:f,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.deleteSectionSuccess",a.stack)}},a.prototype.moveSectionWithinThePageStartDragging=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId();return f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),l=this.mainHelper.validateString(l),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),m=this.mainHelper.validateString(m),this.mainHelper.validateNumber(d),e=this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:259,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:l,nodeId:a,sectionType:b,sectionAlias:c,pageId:m,originPosition:d,appId:e,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.moveSectionWithinThePageStartDragging",a.stack)}},a.prototype.moveSectionWithinThePageClick=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId();return h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),n=this.mainHelper.validateString(n),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),o=this.mainHelper.validateString(o),this.mainHelper.validateNumber(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:260,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,nodeId:a,sectionType:b,sectionAlias:c,pageId:o,position:d,originPosition:e,direction:f,appId:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.moveSectionWithinThePageClick",a.stack)}},a.prototype.sectionMovedWithinThePageSuccess=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getLoadTime();return h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),n=this.mainHelper.validateString(n),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),o=this.mainHelper.validateString(o),this.mainHelper.validateNumber(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateNumber(p),this.mainHelper.log({src:66,evid:261,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,nodeId:a,sectionType:b,sectionAlias:c,pageId:o,position:d,originPosition:e,direction:f,appId:g,loadTime:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionMovedWithinThePageSuccess",a.stack)}},a.prototype.sectionMenuMoveSectionToAnotherPageClick=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),k=this.mainHelper.validateString(k),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),l=this.mainHelper.validateString(l),d=this.mainHelper.validateString(d),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:262,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,appId:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionMenuMoveSectionToAnotherPageClick",a.stack)}},a.prototype.sectionMovedToANewPageSuccess=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getLoadTime();return h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),n=this.mainHelper.validateString(n),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),o=this.mainHelper.validateString(o),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),this.mainHelper.validateNumber(p),this.mainHelper.log({src:66,evid:263,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,nodeId:a,sectionType:b,sectionAlias:c,pageId:o,originPageId:d,position:e,originPosition:f,appId:g,loadTime:p,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionMovedToANewPageSuccess",a.stack)}},a.prototype.sectionMenuDuplicateSectionClick=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId();return d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),j=this.mainHelper.validateString(j),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),k=this.mainHelper.validateString(k),c=this.mainHelper.validateString(c),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:264,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,sectionType:a,sectionAlias:b,pageId:k,appId:c,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionMenuDuplicateSectionClick",a.stack)}},a.prototype.sectionDuplicateSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getLoadTime();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),k=this.mainHelper.validateString(k),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),l=this.mainHelper.validateString(l),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(m),this.mainHelper.log({src:66,evid:265,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,appId:d,loadTime:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionDuplicateSuccess",a.stack)}},a.prototype.showMoreSectionPageLayoutsOnScroll=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),k=this.mainHelper.validateString(k),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),l=this.mainHelper.validateString(l),d=this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:266,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,context:d,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.showMoreSectionPageLayoutsOnScroll",a.stack)}},a.prototype.sectionPanelClosed=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getAdiBuilderType(),l=this.consumerBiLoggerHelpers.getPageId();return d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),j=this.mainHelper.validateString(j),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:267,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:a,sectionType:b,sectionAlias:c,adiBuilderType:k,pageId:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionPanelClosed",a.stack)}},a.prototype.addSectionClick=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),a=this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:268,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,source:a,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.addSectionClick",a.stack)}},a.prototype.addSectionToPageStartDragging=function(a,b,c,d,e,f,g,h){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getEditMode(),p=this.consumerBiLoggerHelpers.getPageId();return i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateNumber(k),l=this.mainHelper.validateString(l),m=this.mainHelper.validateString(m),this.mainHelper.validateGuid(n),o=this.mainHelper.validateString(o),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),p=this.mainHelper.validateString(p),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:269,instanceId:i,msid:j,revision:k,structureId:l,industryId:m,esi:n,editMode:o,sectionType:a,sectionAlias:b,pageId:p,place:c,noOfSuggestions:d,placeOfSelected:e,selectedLayout:f,addType:g,appId:h,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.addSectionToPageStartDragging",a.stack)}},a.prototype.clickOnMoreActionsMenu=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:270,editMode:c,esi:d,industryId:e,instanceId:f,msid:g,revision:h,sectionAlias:a,sectionType:b,structureId:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.clickOnMoreActionsMenu",a.stack)}},a.prototype.planToAddTpaInWelcomeTour=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.log({src:66,evid:271,source:a,appId:b,appName:c,esi:d,industryId:e,instanceId:f,msid:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.planToAddTpaInWelcomeTour",a.stack)}},a.prototype.fetchImagesInAddSectionPanel=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateNumber(a),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),j=this.mainHelper.validateString(j),b=this.mainHelper.validateString(b),this.mainHelper.validateNumber(k),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:272,numOfImages:a,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,pageId:j,place:b,revision:k,sectionAlias:c,sectionType:d,structureId:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report sectionManagement.fetchImagesInAddSectionPanel",a.stack)}},a}(),SiteDesignConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.designPanelIsLoaded=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),a=this.mainHelper.validateString(a),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:300,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,origin:a,adiBuilderType:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.designPanelIsLoaded",a.stack)}},a.prototype.clickOnDesiredDesign=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getNoOfDesigns(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),k=this.mainHelper.validateString(k),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(b),this.mainHelper.validateNumber(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),m=this.mainHelper.validateString(m),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:301,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,prevDesignId:a,designNumber:b,noOfDesigns:l,origin:c,targetDesignId:d,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.clickOnDesiredDesign",a.stack)}},a.prototype.designChangeSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getNoOfDesigns(),m=this.consumerBiLoggerHelpers.getLoadTime(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),k=this.mainHelper.validateString(k),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(b),this.mainHelper.validateNumber(l),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(m),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:302,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,prevDesignId:a,designNumber:b,noOfDesigns:l,origin:c,targetDesignId:d,loadTime:m,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.designChangeSuccess",a.stack)}},a.prototype.customizeDesignPanelIsLoaded=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getDesignId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:303,instanceId:a,msid:b,revision:c,structureId:d,industryId:e,esi:f,editMode:g,designId:h,adiBuilderType:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignPanelIsLoaded",a.stack)}},a.prototype.customizeDesignSubPanelIsLoaded=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getDesignId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),k=this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:304,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,designId:j,name:a,origin:b,adiBuilderType:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignSubPanelIsLoaded",a.stack)}},a.prototype.clickOnDesiredColorFontSet=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getDesignId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.validateNumber(c),this.mainHelper.validateNumber(d),m=this.mainHelper.validateString(m),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:305,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,designId:l,name:a,setId:b,setNumber:c,noOfSets:d,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.clickOnDesiredColorFontSet",a.stack)}},a.prototype.colorFontSetChangeSuccess=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getDesignId(),m=this.consumerBiLoggerHelpers.getLoadTime(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),a=this.mainHelper.validateString(a),l=this.mainHelper.validateString(l),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(m),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:306,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:a,designId:l,name:b,setId:c,setNumber:d,noOfSets:e,loadTime:m,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.colorFontSetChangeSuccess",a.stack)}},a.prototype.clickOnResetDesign=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getDesignId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),
this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:307,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,designId:i,isAdvanced:a,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.clickOnResetDesign",a.stack)}},a.prototype.resetDesignSuccess=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getDesignId(),j=this.consumerBiLoggerHelpers.getLoadTime(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:308,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,designId:i,loadTime:j,isAdvanced:a,adiBuilderType:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.resetDesignSuccess",a.stack)}},a.prototype.designWindowWasClosed=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),a=this.mainHelper.validateString(a),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:309,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,name:a,adiBuilderType:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.designWindowWasClosed",a.stack)}},a.prototype.customizeDesignColorPaletteMode=function(a){try{var b=this.consumerBiLoggerHelpers.getDesignId(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),a=this.mainHelper.validateString(a),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:310,designId:b,editMode:c,esi:d,industryId:e,instanceId:f,msid:g,revision:h,structureId:i,origin:a,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignColorPaletteMode",a.stack)}},a.prototype.customizeDesignColorPaletteModeChangeColorMainClick=function(){try{var a=this.consumerBiLoggerHelpers.getEditMode(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:311,editMode:a,esi:b,industryId:c,instanceId:d,msid:e,revision:f,structureId:g,adiBuilderType:h,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignColorPaletteModeChangeColorMainClick",a.stack)}},a.prototype.customizeDesignColorPaletteModeColorSelect=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),b=this.mainHelper.validateString(b),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:312,advancedEdit:a,editMode:c,esi:d,industryId:e,instanceId:f,msid:g,name:b,revision:h,structureId:i,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignColorPaletteModeColorSelect",a.stack)}},a.prototype.customizeDesignColorPaletteModeAdvancedEditingColorClick=function(){try{var a=this.consumerBiLoggerHelpers.getEditMode(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:313,editMode:a,esi:b,industryId:c,instanceId:d,msid:e,revision:f,structureId:g,adiBuilderType:h,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignColorPaletteModeAdvancedEditingColorClick",a.stack)}},a.prototype.clickOnDesiredPaletteFromCustomizePallete=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getDesignId(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(b),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(l),this.mainHelper.validateNumber(d),m=this.mainHelper.validateString(m),e=this.mainHelper.validateString(e),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:314,num_of_colors:a,designId:f,editMode:g,esi:h,industryId:i,instanceId:j,msid:k,noOfSets:b,palleteCreator:c,revision:l,setNumber:d,structureId:m,origin:e,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.clickOnDesiredPaletteFromCustomizePallete",a.stack)}},a.prototype.openAnimationList=function(){try{var a=this.consumerBiLoggerHelpers.getDesignId(),b=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:315,designId:a,editMode:b,esi:c,industryId:d,instanceId:e,msid:f,revision:g,structureId:h,adiBuilderType:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.openAnimationList",a.stack)}},a.prototype.changeAnimationClick=function(a){try{var b=this.consumerBiLoggerHelpers.getDesignId(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:316,name:a,designId:b,editMode:c,esi:d,industryId:e,instanceId:f,msid:g,revision:h,structureId:i,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.changeAnimationClick",a.stack)}},a.prototype.changeAnimationSuccess=function(a){try{var b=this.consumerBiLoggerHelpers.getLoadTime(),c=this.consumerBiLoggerHelpers.getDesignId(),d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),j=this.mainHelper.validateString(j),k=this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:317,name:a,loadTime:b,designId:c,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,revision:i,structureId:j,adiBuilderType:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.changeAnimationSuccess",a.stack)}},a.prototype.customizeDesignChangeDarkLightMode=function(a){try{var b=this.consumerBiLoggerHelpers.getDesignId(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:318,name:a,designId:b,editMode:c,esi:d,industryId:e,instanceId:f,msid:g,revision:h,structureId:i,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignChangeDarkLightMode",a.stack)}},a.prototype.customizeDesignChangeDarkLightModeSuccess=function(a){try{var b=this.consumerBiLoggerHelpers.getAdiBuilderType(),c=this.consumerBiLoggerHelpers.getDesignId(),d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getLoadTime(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateNumber(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:319,name:a,adiBuilderType:b,designId:c,editMode:d,esi:e,industryId:f,instanceId:g,loadTime:h,msid:i,revision:j,structureId:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignChangeDarkLightModeSuccess",a.stack)}},a.prototype.customizeDesignColorPaletteModeColorSelectSuccess=function(a,b){try{var c=this.consumerBiLoggerHelpers.getLoadTime(),d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),b=this.mainHelper.validateString(b),this.mainHelper.validateNumber(i),j=this.mainHelper.validateString(j),k=this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:320,loadTime:c,advancedEdit:a,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,name:b,revision:i,structureId:j,adiBuilderType:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignColorPaletteModeColorSelectSuccess",a.stack)}},a.prototype.customizeDesignColorPaletteModeAdvancedEditingColorClickSuccess=function(){try{var a=this.consumerBiLoggerHelpers.getLoadTime(),b=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:321,loadTime:a,editMode:b,esi:c,industryId:d,instanceId:e,msid:f,revision:g,structureId:h,adiBuilderType:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignColorPaletteModeAdvancedEditingColorClickSuccess",a.stack)}},a.prototype.clickOnDesiredPaletteFromCustomizePalleteSuccess=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getDesignId(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),m=this.consumerBiLoggerHelpers.getStoryRevision(),n=this.consumerBiLoggerHelpers.getStructureId(),o=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),j=this.mainHelper.validateString(j),k=this.mainHelper.validateString(k),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(b),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),this.mainHelper.validateNumber(m),this.mainHelper.validateNumber(e),n=this.mainHelper.validateString(n),f=this.mainHelper.validateString(f),o=this.mainHelper.validateString(o),this.mainHelper.log({src:66,evid:322,loadTime:a,designId:g,editMode:h,esi:i,industryId:j,instanceId:k,msid:l,num_of_colors:b,noOfSets:c,palleteCreator:d,revision:m,setNumber:e,structureId:n,origin:f,adiBuilderType:o,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess",a.stack)}},a.prototype.customizeDesignChangeScrollAnimationClick=function(a,b){try{var c=this.consumerBiLoggerHelpers.getDesignId(),d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.validateNumber(i),j=this.mainHelper.validateString(j),k=this.mainHelper.validateString(k),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:323,designId:c,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,name:a,alias:b,revision:i,structureId:j,adiBuilderType:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignChangeScrollAnimationClick",a.stack)}},a.prototype.customizeDesignChangeScrollAnimationSuccess=function(a,b){try{var c=this.consumerBiLoggerHelpers.getDesignId(),d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getLoadTime(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateNumber(h),this.mainHelper.validateGuid(i),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:324,designId:c,editMode:d,esi:e,industryId:f,instanceId:g,loadTime:h,msid:i,name:a,alias:b,revision:j,structureId:k,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignChangeScrollAnimationSuccess",a.stack)}},a.prototype.customizeDesignAdvancedColorsAreHardToReadDisplayed=function(){try{var a=this.consumerBiLoggerHelpers.getEditMode(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:325,editMode:a,esi:b,industryId:c,instanceId:d,msid:e,revision:f,structureId:g,adiBuilderType:h,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignAdvancedColorsAreHardToReadDisplayed",a.stack)}},a.prototype.customizeDesignAdvancedUserClicksFixColors=function(){try{var a=this.consumerBiLoggerHelpers.getEditMode(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:326,editMode:a,esi:b,industryId:c,instanceId:d,msid:e,revision:f,structureId:g,adiBuilderType:h,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignAdvancedUserClicksFixColors",a.stack)}},a.prototype.customizeDesignAdvancedFixColorsSuccess=function(){try{var a=this.consumerBiLoggerHelpers.getLoadTime(),b=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:327,loadTime:a,editMode:b,esi:c,industryId:d,instanceId:e,msid:f,revision:g,structureId:h,adiBuilderType:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignAdvancedFixColorsSuccess",a.stack)}},a.prototype.changeFontSizeClick=function(a,b){try{var c=this.consumerBiLoggerHelpers.getDesignId(),d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),b=this.mainHelper.validateString(b),j=this.mainHelper.validateString(j),k=this.mainHelper.validateString(k),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:328,fontSize:a,designId:c,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,revision:i,setId:b,structureId:j,adiBuilderType:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.changeFontSizeClick",a.stack)}},a.prototype.changeFontSizeSuccess=function(a,b){try{var c=this.consumerBiLoggerHelpers.getLoadTime(),d=this.consumerBiLoggerHelpers.getDesignId(),e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(c),a=this.mainHelper.validateString(a),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),b=this.mainHelper.validateString(b),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:329,loadTime:c,fontSize:a,designId:d,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,revision:j,setId:b,structureId:k,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.changeFontSizeSuccess",a.stack)}},a.prototype.customizeDesignOverrideSectionDesignDisplayed=function(a){try{var b=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:330,name:a,editMode:b,esi:c,industryId:d,instanceId:e,msid:f,revision:g,structureId:h,adiBuilderType:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignOverrideSectionDesignDisplayed",a.stack)}},a.prototype.customizeDesignOverrideSectionDesignClickApply=function(a){try{var b=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:331,name:a,editMode:b,esi:c,industryId:d,instanceId:e,msid:f,revision:g,structureId:h,adiBuilderType:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignOverrideSectionDesignClickApply",a.stack)}},a.prototype.customizeDesignOverrideSectionDesignApplySuccess=function(a){try{var b=this.consumerBiLoggerHelpers.getLoadTime(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(b),a=this.mainHelper.validateString(a),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),e=this.mainHelper.validateString(e),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),i=this.mainHelper.validateString(i),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:332,loadTime:b,name:a,editMode:c,esi:d,industryId:e,instanceId:f,msid:g,revision:h,structureId:i,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignOverrideSectionDesignApplySuccess",a.stack)}},a.prototype.createPaletteFromLogoAlgoStart=function(a){try{var b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:333,origin:a,esi:b,industryId:c,instanceId:d,msid:e,revision:f,structureId:g,adiBuilderType:h,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.createPaletteFromLogoAlgoStart",a.stack)}},a.prototype.createPaletteFromLogoAlgoSuccess=function(a,b,c,d,e){try{
var f=this.consumerBiLoggerHelpers.getDesignId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateNumber(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),f=this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),h=this.mainHelper.validateString(h),i=this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(k),l=this.mainHelper.validateString(l),m=this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:334,loadTime:a,intervalLoadTime:b,name:c,origin:d,designId:f,esi:g,industryId:h,instanceId:i,msid:j,num_of_colors:e,revision:k,structureId:l,adiBuilderType:m,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.createPaletteFromLogoAlgoSuccess",a.stack)}},a.prototype.customizeDesignChangeColorationLevel=function(a){try{var b=this.consumerBiLoggerHelpers.getAdiBuilderType(),c=this.consumerBiLoggerHelpers.getDesignId(),d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getLoadTime(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateNumber(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:335,name:a,adiBuilderType:b,designId:c,editMode:d,esi:e,industryId:f,instanceId:g,loadTime:h,msid:i,revision:j,structureId:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignChangeColorationLevel",a.stack)}},a.prototype.customizeDesignChangeColorationLevelSuccess=function(a){try{var b=this.consumerBiLoggerHelpers.getAdiBuilderType(),c=this.consumerBiLoggerHelpers.getDesignId(),d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getLoadTime(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateNumber(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:336,name:a,adiBuilderType:b,designId:c,editMode:d,esi:e,industryId:f,instanceId:g,loadTime:h,msid:i,revision:j,structureId:k,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignChangeColorationLevelSuccess",a.stack)}},a}(),TipsConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.show=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:45,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,name:a,type:b,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report tips.show",a.stack)}},a.prototype.close=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:46,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,name:a,type:b,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report tips.close",a.stack)}},a}(),TourConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.start=function(a){try{var b=this.consumerBiLoggerHelpers.getAssistType(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),a=this.mainHelper.validateString(a),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:50,assistType:b,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,name:a,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report tour.start",a.stack)}},a.prototype.phaseDuringTour=function(a){try{var b=this.consumerBiLoggerHelpers.getAssistType(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getPhaseNumber(),k=this.consumerBiLoggerHelpers.getTotalPhases(),l=this.consumerBiLoggerHelpers.getPhaseName(),m=this.consumerBiLoggerHelpers.getDesignId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),this.mainHelper.validateNumber(j),this.mainHelper.validateNumber(k),l=this.mainHelper.validateString(l),a=this.mainHelper.validateString(a),m=this.mainHelper.validateString(m),n=this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:51,assistType:b,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,phaseNumber:j,totalPhases:k,phaseName:l,name:a,designId:m,adiBuilderType:n,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report tour.phaseDuringTour",a.stack)}},a.prototype.complete=function(a){try{var b=this.consumerBiLoggerHelpers.getAssistType(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),a=this.mainHelper.validateString(a),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:52,assistType:b,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,name:a,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report tour.complete",a.stack)}},a.prototype.assistantMenuShown=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:53,state:a,origin:b,name:c,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report tour.assistantMenuShown",a.stack)}},a.prototype.skipTour=function(a){try{var b=this.consumerBiLoggerHelpers.getAssistType(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),a=this.mainHelper.validateString(a),i=this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:54,assistType:b,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,name:a,adiBuilderType:i,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report tour.skipTour",a.stack)}},a.prototype.closeAssistant=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateNumber(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:55,instanceId:a,msid:b,revision:c,structureId:d,industryId:e,esi:f,adiBuilderType:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report tour.closeAssistant",a.stack)}},a.prototype.quitTour=function(a){try{var b=this.consumerBiLoggerHelpers.getAssistType(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return b=this.mainHelper.validateString(b),c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),a=this.mainHelper.validateString(a),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:56,assistType:b,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,name:a,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report tour.quitTour",a.stack)}},a.prototype.firstStepSelectionForMeOrShowMe=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:57,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,button:a,name:b,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report tour.firstStepSelectionForMeOrShowMe",a.stack)}},a.prototype.lastStepSelectionKeepOrTryAnother=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return c=this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),f=this.mainHelper.validateString(f),g=this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),i=this.mainHelper.validateString(i),a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),j=this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:58,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,button:a,name:b,adiBuilderType:j,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report tour.lastStepSelectionKeepOrTryAnother",a.stack)}},a.prototype.timeout=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getLastPhase(),e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(d),this.mainHelper.validateNumber(a),b=this.mainHelper.validateString(b),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),g=this.mainHelper.validateString(g),h=this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),c=this.mainHelper.validateString(c),this.mainHelper.validateNumber(j),k=this.mainHelper.validateString(k),l=this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:59,lastPhase:d,secondsSinceLastPhase:a,button:b,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,name:c,revision:j,structureId:k,adiBuilderType:l,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report tour.timeout",a.stack)}},a.prototype.assistantVideoModalLoaded=function(a){try{var b=this.consumerBiLoggerHelpers.getAdiBuilderType(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId();return a=this.mainHelper.validateString(a),b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:63,origin:a,adiBuilderType:b,esi:c,industryId:d,instanceId:e,msid:f,revision:g,structureId:h,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report tour.assistantVideoModalLoaded",a.stack)}},a.prototype.assistantVideoModalClose=function(){try{var a=this.consumerBiLoggerHelpers.getAdiBuilderType(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId();return a=this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),c=this.mainHelper.validateString(c),d=this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),g=this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:64,adiBuilderType:a,esi:b,industryId:c,instanceId:d,msid:e,revision:f,structureId:g,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report tour.assistantVideoModalClose",a.stack)}},a.prototype.smartAssistCardMute=function(a){try{var b=this.consumerBiLoggerHelpers.getAdiBuilderType(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId();return b=this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),d=this.mainHelper.validateString(d),e=this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),a=this.mainHelper.validateString(a),this.mainHelper.validateNumber(g),h=this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:65,adiBuilderType:b,esi:c,industryId:d,instanceId:e,msid:f,name:a,revision:g,structureId:h,screenResolution:this.consumerBiLoggerHelpers.getScreenResolution()})}catch(a){this.mainHelper.onError("BISafe: failed to report tour.smartAssistCardMute",a.stack)}},a}(),ConsumerBiLogger=function(){function a(a,b,c){var d=this,e=function(a,b){},f={validateNumber:function(a){null===a||isFinite(a)||e("invalid number",a)},validateString:function(b){return b=a.sanitizePII(b),null!==b&&"string"!=typeof b&&e("Invalid string",b),b},validateGuid:function(a){null===a||"string"==typeof a&&/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/.test(a.toLowerCase())||e("Invalid guid",a)},onError:e,_log:_.noop,log:function(b){var d=a.getOwnerId();d&&(b.ownerId=d);var e=a.getUserRoles();e&&(b.roles=e);var f=_.pick(b,function(a){return null!==a});return c.log(f)}},g=!1;this.pauseBI=function(){g||(f._log=f.log,f.log=_.noop,g=!0)},this.restoreBI=function(){f._log&&g&&(f.log=f._log,g=!1)},this.apps=new AppsConsumerBiLogger(a,b,f),this.automation=new AutomationConsumerBiLogger(a,b,f),this.builder=new BuilderConsumerBiLogger(a,b,f),this.contentEditor=new ContentEditorConsumerBiLogger(a,b,f),this.dialogs=new DialogsConsumerBiLogger(a,b,f),this.intro=new IntroConsumerBiLogger(a,b,f),this.pagesManager=new PagesManagerConsumerBiLogger(a,b,f),this.provisioning=new ProvisioningConsumerBiLogger(a,b,f),this.sectionDesign=new SectionDesignConsumerBiLogger(a,b,f),this.sectionManagement=new SectionManagementConsumerBiLogger(a,b,f),this.siteDesign=new SiteDesignConsumerBiLogger(a,b,f),this.tips=new TipsConsumerBiLogger(a,b,f),this.tour=new TourConsumerBiLogger(a,b,f),this.warn=function(a,b){return d.errorEvent(a,b,20)},this.err=function(a,b){return d.errorEvent(a,b,30)},this.fatal=function(a,b){return d.errorEvent(a,b,40)},this.errorEvent=function(b,d,e){return d=d&&d.substr(0,1600),c.log({adapter:"trg",src:66,evid:10,cat:1,iss:1,sev:e,errc:b,dsc:d,ver:a.getVersion(),did:a.getStoryId(),msid:a.getMetaSiteId()})}}return a.$inject=["consumerBiLoggerHelpers","clientTopology","wixBiLogger"],a}();angular.module("siteGeneratorCommon").service("consumerBiLogger",ConsumerBiLogger);var MiscUtils=function(){function a(a){var b=this;this.$translate=a,this.deepGet=function(a,c){var d;"string"==typeof c?d=c.split("."):c instanceof Array&&(d=c);var e=[];return b.getByKeys(a,d,e),e},this.getByKeys=function(a,c,d){if("object"!=typeof a)return null;var e=a[c[0]];e&&(c.length>1?b.getByKeys(e,c.slice(1),d):d.push(e));var f=Object.keys(a);f.length&&f.forEach(function(e){b.getByKeys(a[e],c,d)})}}return a.$inject=["$translate"],a.prototype.translateIfPossible=function(a){var b=this.$translate.instant(a);return b===a?"":b},a.prototype.shuffleArray=function(a){Math.seedrandom(Date.now());for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}return a},a.prototype.minBy=function(a,b){var c={};a.forEach(function(a){c[a[b]]=a});var d=_.min(a.map(function(a){return b instanceof Function?b(a):"string"==typeof b?a[b]:void console.error("key should be a function or string")}));return c[d]},a.prototype.JSONClone=function(a){return JSON.parse(JSON.stringify(a))},a.prototype.getRandomItem=function(a){return a[_.random(a.lemgth-1)]},a.prototype.softFilter=function(a,b){var c=a.filter(b);return c.length?c:a},a.prototype.keyBy=function(a,b){return a.reduce(function(a,c){return a[c[b]]=c,a},{})},a.prototype.isArraysOfObjectsEqualByOrderAndKeys=function(a,b,c){return!(!c||!c.length)&&a.every(function(a,d){return c.every(function(c){return a[c]===b[d][c]})})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("miscUtils",MiscUtils);var DomHelpers=function(){function a(){}return a.prototype.scrollInsideContainer=function(a,b,c){a.animate({scrollTop:b},c)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("domHelpers",DomHelpers),angular.module("siteGeneratorStaticsConsumerAppInternal").factory("BackendStoryLocale",function(){return{build:function(a){return a}}});var BackendStory=function(){function a(a,b,c,d,e,f){this.consumerBiLogger=a,this.flags=b,this.storyManager=c,this.previewService=d,this.introManager=e,this.dbStory=f,this.saving=null,this.publishing=null,this.markingAsMajor=null,this.owner={},this.selectedStyle={},this.selectedPage="",this.bft="{}"}return a.prototype.fromDbStory=function(){var b={revision:this.dbStory.revision,id:a.calcId(this.dbStory)},c={userRoles:this.dbStory.userRoles?this.dbStory.userRoles.split(","):[],ownerId:this.dbStory.ownerId,isDraft:!!this.dbStory.isDraft};return _.extend(b,this.dbStory.blob,c),b},a.prototype.toDbStory=function(a){this.dbStory.blob=_.omit(a,"revision"),this.dbStory.blob.adiFeatures=this.dbStory.blob.adiFeatures||{},this.dbStory.blob.adiFeatures.htmlRevision=!0,this.dbStory.blob.htmlRevision=this.previewService.getHtmlRevision(),this.dbStory.revision=a.revision},a.prototype.saveStory=function(a,b,c){var d=this;if(this.saving)this.checkIfStoryIsHanging();else{this.latestSave=(new Date).getTime();var e=a.id?this.update(a):this.create(b,a,c);this.saving=e.catch(function(a){return d.consumerBiLogger.err(BIErrorCodes.SaveStoryFailed,JSON.stringify(a))}).finally(function(){c&&(a.isDraft=!0),d.saving=null})}return this.saving},a.prototype.markCreated=function(b){return this.storyManager.markCreated(this.dbStory,a.BLANK_TEMPLATE_META_SITE_ID,this.dbStory.siteId)},a.prototype.publishStory=function(a){var b=this;return this.publishing||(this.publishing=this.storyManager.publish(this.dbStory).then(function(b){return a.revision=b,a}).catch(function(a){return b.consumerBiLogger.err(BIErrorCodes.PublishStoryFailed,JSON.stringify(a))}).finally(function(){return b.publishing=null})),this.publishing},a.prototype.markStoryAsMajorRevision=function(a){var b=this;return this.markingAsMajor||(this.markingAsMajor=this.storyManager.markAsMajorRevision(this.dbStory).then(function(b){return a.revision=b,a}).catch(function(a){return b.consumerBiLogger.err(BIErrorCodes.MarkMajorRevisionStoryFailed,JSON.stringify(a))}).finally(function(){b.markingAsMajor=null})),this.markingAsMajor},a.prototype.update=function(a){var b=this;return this.toDbStory(a.getCurrentState(!0)),this.dbStory.htmlRevision=this.previewService.getHtmlRevision(),this.storyManager.update(this.dbStory).then(function(c){return b.dbStory=c,a.revision=c.revision,a})},Object.defineProperty(a.prototype,"websiteUrl",{get:function(){return this.introManager.data.contactDetails?this.introManager.data.contactDetails.website:""},enumerable:!0,configurable:!0}),a.prototype.headlessFirstSave=function(a,b){return this.doFirstUpdate(a,b)},a.prototype.doFirstUpdate=function(b,c){var d=this;b.id=a.calcId(c),b.siteId=c.siteId,this.dbStory=c,b.revision=c.revision,b.flags=_.pick(_.omit(this.flags,_.functions(this.flags)),_.identity);var e=b.getCurrentState();return e.industryId=this.introManager.data.category.industryId,e.structureId=this.introManager.data.category.structureId,e.selectedOffers=this.introManager.data.serviceOffer,this.flags.introWebsiteAddressField&&(e.websiteUrl=this.websiteUrl),this.toDbStory(e),this.storyManager.update(this.dbStory).then(function(a){return b.revision=a.revision,d.dbStory=a,b.setState(d.fromDbStory(),!0),b})},a.prototype.create=function(b,c,d){var e=this;void 0===d&&(d=!1);var f={templateMetaSiteId:a.BLANK_TEMPLATE_META_SITE_ID,suggestedSiteName:b};return d&&(f.creationPhase="DuringIntro"),this.storyManager.create2(f).then(function(a){return e.doFirstUpdate(c,a)})},a.prototype.checkIfStoryIsHanging=function(){(new Date).getTime()-this.latestSave>=6e4&&this.consumerBiLogger.warn(BIErrorCodes.SaveStoryHangs,"save story is hanging")},a}();BackendStory.BLANK_TEMPLATE_META_SITE_ID="bb80349d-97a4-48a5-b9f2-8ddc2463709a",angular.module("siteGeneratorStaticsConsumerAppInternal").factory("BackendStory",["consumerBiLogger","flags","$q","$window","storyManager","storyServices","previewService","introManager","clientTopology","wixAngular","metaDataVersion","healthCheck",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(c){return l.validateAndFix(c),new BackendStory(a,b,e,g,h,c)}return BackendStory.build=function(c){return new BackendStory(a,b,e,g,h,c&&c.dbStory||void 0)},BackendStory.find=function(a,b){var f=BackendStory.parseId(a);if(d.storyCache&&d.storyCache[a]&&!b){var g=d.storyCache[a];return g=e.preload(f,g),c.when(m(g))}return e.get(f,b).then(function(a){return m(a)})},BackendStory.parseId=function(a){var b=a.split(":");return{instanceId:b[0],metaSiteId:b[1]}},BackendStory.calcId=function(a){return a.storyId.instanceId+":"+a.storyId.metaSiteId},BackendStory.getContentVersion=function(){return i&&i.contentVersionNumber},BackendStory.getStaticsVersion=function(){return j.staticsUrl.split("/").splice(-2,1)[0]},BackendStory.getMetadataVersion=function(){return k},BackendStory}]);var MetaDataService=function(){function a(a,b,c,d){this.storyApi=a,this.$q=b,this.storyServices=c,this.BackendStory=d}return a.$inject=["storyApi","$q","storyServices","BackendStory"],a.prototype.getMetadata=function(a,b,c){var d=this;return this.storyMetadata&&!c?this.$q.when(this.storyMetadata):this.storyApi.metadata(this.BackendStory.parseId(a)).then(function(a){return d.storyMetadata=a,b&&b(a),d.storyServices.metaSiteId=a.htmlEditorUri.match(/metaSiteId=[^"]*/)[0].split("=")[1],d.storyServices.siteId=a.htmlEditorUri.match(/edit\/[^?]*/)[0].split("/")[1],a})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("metaDataService",MetaDataService);var ImportSiteContent=function(){function a(a,b,c){this.siteDataRetrivalApi=a,this.$q=b,this.$timeout=c}return a.$inject=["siteDataRetrivalApi","$q","$timeout"],a.prototype.getSiteInfo=function(a){var b=new ob.SiteInfoRequest(a);return this.siteDataRetrivalApi.getSiteInfo(b)},a.prototype.getSiteValidation=function(a){var b=new ob.SiteInfoRequest(a);return this.siteDataRetrivalApi.getSiteValidation(b)},a.prototype.getBusinessInfo=function(a,b,c){var d=this;return this.$q(function(e,f){c&&d.$timeout(function(){f(null)},c);var g=new ob.SiteInfoRequest(a,b);d.siteDataRetrivalApi.getBusinessInfo(g).then(function(a){e(a)})})},a.prototype.getFullSiteData=function(a,b,c){var d=this;return new Promise(function(e,f){c&&d.$timeout(function(){f("timeout")},c);var g=new ob.SiteInfoRequest(a,b);return d.siteDataRetrivalApi.getFullSiteData(g).then(function(a){e(a)})})},a}();ImportSiteContent.phasesNames={SiteInfo:"site-info",SiteValidationWixwiz:"site-validation-wixwiz",SiteBusinessInfoImport:"site-business-info-import",SiteFullDataImport:"site-full-data-import"},angular.module("siteGeneratorIntroInternal").service("importSiteContent",ImportSiteContent),angular.module("siteGeneratorStaticsConsumerAppInternal").service("stories",["$q",function(a){return{loadStoryLocales:function(){return a.when()}}}]);var service;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j){this.$timeout=a,this.$q=b,this.documentServicesMediator=c,this.obMonitoring=d,this.applicationState=e,this.notification=f,this.storyServices=g,this.spinnerService=h,this.consumerBiLogger=i,this.consumerDialogs=j,this.KNOWN_SERVER_ERRORS=[409],this.saveCount=0}return a.$inject=["$timeout","$q","documentServicesMediator","obMonitoring","applicationState","notification","storyServices","spinnerService","consumerBiLogger","consumerDialogs"],a.prototype.changePageCB=function(){},a.prototype.getMetaSiteDetails=function(){return this.$q.when()},a.prototype.customPromise=function(){return this.$q.when()},a.prototype.togglePreview=function(){return!1},a.prototype.saveStory=function(){var a=this,b=this.storyServices.story;return(b?b.save():this.$q.when(!1)).then(function(){return a.saveCount=0}).catch(function(b){return a.onObError(b,"ob save")})},a.prototype.publishStory=function(){var a=this,b=this.storyServices.story;return(b?b.publish():this.$q.when(!1)).catch(function(b){
return a.onObError(b,"ob publish")})},a.prototype.onDsSaveStart=function(){this.consumerBiLogger.builder.autosaveStart(!0)},a.prototype.onObError=function(a,b){if(!a.handledEvent){var c=a.status;return this.KNOWN_SERVER_ERRORS.indexOf(c)<0&&(++this.saveCount>=2&&(a.handledEvent=!0,this.consumerDialogs.showDialog(ConsumerDialogTypes.SAVE_VALIDATION_ERROR_POPUP)),this.obMonitoring.error("ob save error: "+JSON.stringify(a))),this.$q.reject()}},a.prototype.onDsSaveError=function(a){if(!a.handledEvent){var b=this.documentServicesMediator.getDsSaveErros();if(a.document)switch(a.document.errorType){case b.DUPLICATE_COMPONENTS:case b.DATA_REFERENCE_MISMATCH:case b.MISSING_CONTAINERS:a.handledEvent=!0,this.spinnerService.forceStop(),this.consumerDialogs.showDialog(ConsumerDialogTypes.SAVE_VALIDATION_ERROR_POPUP);default:this.consumerBiLogger.err(BIErrorCodes.DSSaveFailed,"error during ds save: "+a.document.errorType)}else this.obMonitoring.error("ob save error: "+JSON.stringify(a))}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").factory("wizardCallbacksService",["$injector","$q","$timeout","storyServices","Story","notification","StoryLocale","modelTree","menuService","BackendStory","$state","applicationState","renderedModelApi","layoutSelectionStoreProvider","documentServicesMediator","consumerDialogs","spinnerService","flags","consumerBiLogger","healthCheck","richTextLinks",function(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){function w(a){return{undefined:a?_.omit(a.undefined,["metaSiteId","siteId"]):{}}}return _.extend(f,{create:function(a){var b=f.build(a);return b.storyLocales={en:h.build()},b},find:function(a){return k.find(a,m.previewRevision()).then(function(a){var b=a.dbStory.isDraft?f.create(a):new f(a);return b.setState(a.fromDbStory(),!0),b})},getStoryDataByVersion:function(a,b){return k.find(a,b).then(function(a){return a.fromDbStory()})}}),f.prototype.save=function(a,b){return void 0===b&&(b=!1),u.validateBeforeSave(),this.sourceObject.saveStory(this,a,b)},f.prototype.markAsMajorRevision=function(){return this.sourceObject.markStoryAsMajorRevision(this)},f.prototype.markCreated=function(){return this.sourceObject.markCreated(this)},f.prototype.headlessFirstSave=function(){return this.sourceObject.headlessFirstSave(this,this.dbStory)},f.prototype.publish=function(){return this.sourceObject.publishStory(this)},f.prototype.getActiveLocale=function(){var a=this.storyLocales[this.activeLocale]||{};return e.metaSiteId&&e.siteId&&(a.savedSites=a.savedSites||{},a.savedSites.undefined=a.savedSites.undefined||{},a.savedSites.undefined.metaSiteId=e.metaSiteId,a.savedSites.undefined.siteId=e.siteId),a},f.prototype.getCurrentState=function(a){void 0===a&&(a=!1);var b=this.getActiveLocale(),c={description:this.description,selectedPage:this.selectedPage,name:this.name,selectedStyle:this.selectedStyle,contentElements:this.contentElements,activeLocale:this.activeLocale,archived:this.archived,industryId:this.industryId,structureId:this.structureId,selectedOffers:this.selectedOffers,contentVersion:k.getContentVersion(),staticsVersion:k.getStaticsVersion(),metadataVersion:k.getMetadataVersion(),privateMediaFolderId:this.privateMediaFolderId||"",coloration:this.coloration,smartAssist:this.smartAssist,revision:this.revision,flags:this.flags,locale:{savedSites:w(b.savedSites),contentElements:b.contentElements,layoutSelections:o.getLayoutSelectionStore().serialize(!1,!0),styles:b.styles},userRoles:this.userRoles,ownerId:this.ownerId};return a&&s.preloadRenderedModel&&(c.locale.renderedModel=n.getToSave()),c.popupConfigurations=this.popupConfigurations,c.mobileEditorActive=this.mobileEditorActive,this.flags.introWebsiteAddressField&&(c.websiteUrl=this.websiteUrl||""),c.tourState=this.tourState||{},c.nodeIdToSlideshowTransition=this.nodeIdToSlideshowTransition||{},i.data&&(c.mainMenu=j.serialize(),c.bft=i.serialize(!0),c.richTextLinks=v.getData()),ob.deepClone(c)},f.prototype.setState=function(a,b){if(_.extend(this,a),a.locale){var c=_.isString(a.locale)?JSON.parse(a.locale):ob.deepClone(a.locale);this.storyLocales[this.activeLocale]=c,this.selectedStyle=_.isString(a.selectedStyle)?JSON.parse(a.selectedStyle):ob.deepClone(a.selectedStyle),a.contentElements=a.contentElements||{},a.flags=a.flags||{},this.contentElements=_.isString(a.contentElements)?JSON.parse(a.contentElements):ob.deepClone(a.contentElements),b||(j.deserialize(a.mainMenu),this.bft=i.deserialize(a.bft),o.getLayoutSelectionStore().deserialize(c.layoutSelections)),b&&s.preloadRenderedModel&&a.locale.renderedModel&&n.loadSaved(a.locale.renderedModel)}},a.instantiate(b)}])}(service||(service={}));var UserService=function(){function a(a,b,c){this.$q=a,this.$http=b,this.wixCookies=c}return a.$inject=["$q","$http","wixCookies"],a.prototype.getCurrentUser=function(){return this.$q.when({})},a.prototype.hasUnattachedOwnedDomain=function(){var a=this;return this.$http.get("/premium-management/userHasUnattachedDomains").then(function(b){return 200===b.status?b.data:a.$q.reject(b)})},a.prototype.getUUID=function(){return this.wixCookies.userGUID},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("userService",UserService),function(){function a(a,b,c,d,e,f){function g(a,b){return a?h(a,b):e.get(l+"LayoutElements/"+encodeURIComponent(b)+".raw.js",{cache:!0}).then(function(a){return a.data})}function h(c,e){var f=c.file(e);if(f){var g=(new Date).getTime(),h=f.asText(),i=(new Date).getTime()-g,j=JSON.parse(h),k=(new Date).getTime()-g-i;return d.debugMode&&b.info("extracted entry with key "+(e||"undefined")+" in zip (extraction: "+i+"ms, parse: "+k+"ms)"),a.resolve(j)}return d.debugMode&&b.info("found no entry with key "+(e||"undefined")+" in zip"),a.reject()}function i(b){var c=a.defer();return JSZipUtils.getBinaryContent(l+b+".zip.js",function(a,b){a?c.reject(a):c.resolve(new JSZip(b))}),c.promise}var j,k=new Set,l=f+"resources/";this.init=function(a){return i("LayoutElements").then(function(a){j=a}),i("ContactProtoTypeLayoutElements").then(function(b){return h(b,"").then(a)})},this.prepareLEsForFetch=function(b,c,d){var e=b+"_"+c;return k.has(e)?a.when():g(j,e).then(d).catch(function(){}).finally(function(){return k.add(e)})}}a.$inject=["$q","$log","wixAngularTopology","flags","$http","metaDataBaseUrl"],angular.module("siteGeneratorStaticsConsumerAppInternal").service("layoutElementsFetcher",a)}();var ConsumerDialogTypes;!function(a){a[a.SHOW_POPUP_EVENT=0]="SHOW_POPUP_EVENT",a[a.TIME_TO_PUBLISH_POPUP=1]="TIME_TO_PUBLISH_POPUP",a[a.SESSION_EXPIRED_POPUP=2]="SESSION_EXPIRED_POPUP",a[a.STORY_CONFLICTING_CHANGES_POPUP=3]="STORY_CONFLICTING_CHANGES_POPUP",a[a.SITE_NOT_MANAGED_BY_OB_POPUP=4]="SITE_NOT_MANAGED_BY_OB_POPUP",a[a.STORY_ARCHIVED_POPUP=5]="STORY_ARCHIVED_POPUP",a[a.PUBLISH_FAILED_POPUP=6]="PUBLISH_FAILED_POPUP",a[a.CANT_REMOVE_HEADER_POPUP=7]="CANT_REMOVE_HEADER_POPUP",a[a.CANT_REMOVE_FOOTER_POPUP=8]="CANT_REMOVE_FOOTER_POPUP",a[a.AUTOSAVE_POPUP=9]="AUTOSAVE_POPUP",a[a.SAVE_VALIDATION_ERROR_POPUP=10]="SAVE_VALIDATION_ERROR_POPUP",a[a.DS_SAVE_PUBLISH_DISABLED_ON_SERVER_POPUP=11]="DS_SAVE_PUBLISH_DISABLED_ON_SERVER_POPUP",a[a.PALETTE_COLOR_DIALOG_POPUP=12]="PALETTE_COLOR_DIALOG_POPUP",a[a.BACKGROUND_IMAGE_SETTINGS=13]="BACKGROUND_IMAGE_SETTINGS",a[a.BACKGROUND_VIDEO_SETTINGS=14]="BACKGROUND_VIDEO_SETTINGS",a[a.BACKGROUND_GALLERY_SETTINGS=15]="BACKGROUND_GALLERY_SETTINGS",a[a.NEW_USER_FIRST_TIME_MOBILE_EDITOR_POPUP=16]="NEW_USER_FIRST_TIME_MOBILE_EDITOR_POPUP",a[a.EXISTING_USER_FIRST_TIME_MOBILE_EDITOR_POPUP=17]="EXISTING_USER_FIRST_TIME_MOBILE_EDITOR_POPUP",a[a.COLOR_MODE_DIALOG_POPUP=18]="COLOR_MODE_DIALOG_POPUP"}(ConsumerDialogTypes||(ConsumerDialogTypes={}));var ConsumerDialogs=function(){function a(a,b,c,d,e,f,g){var h=this;this.$rootScope=a,this.$window=b,this.$translate=c,this.applicationState=d,this.consumerBiLogger=e,this.CONSUMER_DIALOGS=f,this.CcDialogBuilder=g,this.popups={},this.firstTimeInMobileBiEvents={onNextClick:function(a){h.consumerBiLogger.dialogs.approveChanges(null,null,null,a,null,BIOrigins.SwitchEditModeDropdown)},onShow:function(a,b){h.consumerBiLogger.dialogs.show(null,null,null,a?h.CONSUMER_DIALOGS.AFFECTS_ONLY_MOBILE_EDITOR:b,BIOrigins.SwitchEditModeDropdown)},onHide:function(){h.consumerBiLogger.dialogs.approveChanges(null,null,null,h.CONSUMER_DIALOGS.AFFECTS_ONLY_MOBILE_EDITOR,null,BIOrigins.SwitchEditModeDropdown)},onCancel:function(a,b){h.consumerBiLogger.dialogs.cancel(null,null,null,a?h.CONSUMER_DIALOGS.AFFECTS_ONLY_MOBILE_EDITOR:b,null,null)}};var i=this.popups;a.$on(ConsumerDialogTypes[ConsumerDialogTypes.SHOW_POPUP_EVENT],function(a,b){return h.showDialog(b)}),i[ConsumerDialogTypes.TIME_TO_PUBLISH_POPUP]=function(){return g.showFirstTimeNotice({heading:c.instant("popups.time-to-publish.heading"),text:c.instant("popups.time-to-publish.text"),acceptButtonText:c.instant("general.got-it"),icon:"time-to-publish.gif",hideFirstTimeCheckBox:!0,biDialogName:h.CONSUMER_DIALOGS.TIME_TO_PUBLISH})},i[ConsumerDialogTypes.PALETTE_COLOR_DIALOG_POPUP]=function(a,b,c){var d={color:"#000000",colorType:coloration.ePaletteColorPickerStates.mainColor,state:ePaletteColorDialogStates.NORMAL,layout:"top bottom",onColorSelected:angular.noop},e=angular.extend(d,c);return g.show({parent:"body",templateUrl:"views/design/palette-color-dialog.html",controllerAs:"$ctrl",controller:PaletteColorDialog,clickOutsideToClose:!0,onShowing:function(b,c){a&&a(e.$event,b,c)},onRemoving:function(a,c){b&&b(a,c)},locals:e,biDialogName:h.CONSUMER_DIALOGS.PALETTE_COLOR})},i[ConsumerDialogTypes.COLOR_MODE_DIALOG_POPUP]=function(a,b){return g.show({parent:"body",templateUrl:"views/design/color-mode-dialog.html",controllerAs:"$ctrl",controller:ColorModeDialog,clickOutsideToClose:!0,onShowing:function(b,c){a&&a(null,b,c)},onRemoving:function(a,c){b&&b(a,c)},locals:{},biDialogName:h.CONSUMER_DIALOGS.COLOR_SETTINGS})},i[ConsumerDialogTypes.SESSION_EXPIRED_POPUP]=function(){return g.showNegativeConfirmation({text:c.instant("error.session-expired.text"),acceptButtonText:c.instant("error.session-expired.ok-button"),biDialogName:h.CONSUMER_DIALOGS.SESSION_EXPIRED,icon:"fail.gif"}).then(function(){return b.open("https://users.wix.com/signin?loginDialogContext=login&referralInfo=ONBOARDING&postLogin=https://www.wix.com/my-account/sites/","_blank")})},i[ConsumerDialogTypes.STORY_CONFLICTING_CHANGES_POPUP]=function(){return g.showPositiveConfirmation({text:c.instant("error.conflicting-changes.text"),acceptButtonText:c.instant("error.conflicting-changes.ok-button"),icon:"reload.gif",biDialogName:h.CONSUMER_DIALOGS.CONFLICTING_CHANGES,noClose:!0}).then(function(){return b.location.reload()})},i[ConsumerDialogTypes.SITE_NOT_MANAGED_BY_OB_POPUP]=function(){return g.showPositiveConfirmation({heading:c.instant("error.site-not-managed-by-ob.heading"),text:c.instant("error.site-not-managed-by-ob.text"),acceptButtonText:c.instant("error.site-not-managed-by-ob.ok-button"),icon:"wrong-way.gif",noClose:!0,biDialogName:h.CONSUMER_DIALOGS.SITE_NOT_MANAGED_BY_OB}).then(function(){var a=d.getStoryMetadata(),c=a&&a.htmlEditorUri;c&&(b.location.href=c)})},i[ConsumerDialogTypes.STORY_ARCHIVED_POPUP]=function(){return g.showPositiveConfirmation({text:c.instant("error.story-archived.text"),acceptButtonText:"",icon:"fail.gif",noClose:!0,biDialogName:h.CONSUMER_DIALOGS.STORY_ARCHIVED}).then(function(){return b.location.href=PublishDialog.MyAccountPrefix})},i[ConsumerDialogTypes.PUBLISH_FAILED_POPUP]=function(){return g.showNegativeConfirmation({heading:h.$translate.instant("popups.publish-failed.heading"),text:h.$translate.instant("popups.publish-failed.text"),acceptButtonText:h.$translate.instant("popups.publish-failed.accept"),rejectButtonText:h.$translate.instant("general.cancel"),icon:"fail.gif",biDialogName:h.CONSUMER_DIALOGS.PUBLISH_FAILED})},i[ConsumerDialogTypes.CANT_REMOVE_HEADER_POPUP]=function(){return g.showPositiveConfirmation({heading:c.instant("popups.cant-delete-header.heading"),text:c.instant("popups.cant-delete-header.text"),acceptButtonText:c.instant("general.got-it"),icon:"fail.gif",biDialogName:h.CONSUMER_DIALOGS.FIELD_VISIBILITY_SHOW_HIDE})},i[ConsumerDialogTypes.CANT_REMOVE_FOOTER_POPUP]=function(){return g.showPositiveConfirmation({heading:c.instant("popups.cant-delete-footer.heading"),text:c.instant("popups.cant-delete-footer.text"),acceptButtonText:c.instant("general.got-it"),icon:"fail.gif",biDialogName:h.CONSUMER_DIALOGS.FIELD_VISIBILITY_SHOW_HIDE})},i[ConsumerDialogTypes.AUTOSAVE_POPUP]=function(){return g.showPositiveConfirmation({heading:c.instant("popups.autosave.heading"),text:c.instant("popups.autosave.text"),acceptButtonText:c.instant("general.got-it"),icon:"autosave.gif",biDialogName:h.CONSUMER_DIALOGS.AUTOSAVE})},i[ConsumerDialogTypes.SAVE_VALIDATION_ERROR_POPUP]=function(){return g.showPositiveConfirmation({text:c.instant("error.save-failure.text"),acceptButtonText:c.instant("error.save-failure.ok-button"),icon:"reload.gif",biDialogName:h.CONSUMER_DIALOGS.SAVE_VALIDATION_ERROR,noClose:!0}).then(function(){h.$window.onbeforeunload=null,b.location.reload()})},i[ConsumerDialogTypes.DS_SAVE_PUBLISH_DISABLED_ON_SERVER_POPUP]=function(){return g.showPositiveConfirmation({text:c.instant("error.publish-disabled-on-server.text"),acceptButtonText:c.instant("error.publish-disabled-on-server.ok-button"),icon:"fail.gif",biDialogName:h.CONSUMER_DIALOGS.DS_SAVE_PUBLISH_DISABLED_ON_SERVER,noClose:!0})},i[ConsumerDialogTypes.EXISTING_USER_FIRST_TIME_MOBILE_EDITOR_POPUP]=function(){return g.showMultiPagePopup({heading:c.instant("popups.welcome-to-mobile-editor-existing.heading"),headingNext:c.instant("popups.welcome-to-mobile-editor-existing.heading-next"),text:c.instant("popups.welcome-to-mobile-editor-existing.text"),textNext:c.instant("popups.welcome-to-mobile-editor-existing.text-next"),nextButtonText:c.instant("general.continue"),cancelButtonText:c.instant("general.no-thanks"),gotItButtonText:c.instant("popups.edit-now"),icon:"EditMobileFirstTime.svg",iconNext:"EditMobileFirstTime2.svg",showCancelButton:!0,biEvents:h.firstTimeInMobileBiEvents,dialogName:h.CONSUMER_DIALOGS.WELCOME_TO_MOBILE_EDITOR_EXISTING})}}return a.$inject=["$rootScope","$window","$translate","applicationState","consumerBiLogger","CONSUMER_DIALOGS","CcDialogBuilder"],a.prototype.showDialog=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=this.popups[a];if(!d)throw new Error("Couldn't launch popup: Popup doesn't exist");return d.apply(void 0,b)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("consumerDialogs",ConsumerDialogs);var FeatureDetector=function(){function a(a,b,c){this.mediaOverride=a,this.applicationParameters=b,this.PresetMediaType=c}return a.prototype._getNumberOfColumns=function(a){return a&&a[0]&&a[0].length},a.prototype.getMediaType=function(b){if(this.hasMedia(b)){var c=this.getMediaPreferredOverride(b),d=this.getMediaTypeOverride(b);return c?this.isImageGallery(c.name)?a.MediaTypes.gallery:c.name===a.MediaTypes.video?a.MediaTypes.extVideo:"Strip Video"===c.name?a.MediaTypes.video:d===this.PresetMediaType.SHAPE?a.MediaTypes.shape:a.MediaTypes.image:d===this.PresetMediaType.SHAPE?a.MediaTypes.shape:a.MediaTypes.image}},a.prototype._getMediaWidth=function(a){var b=a.match(/m(\d{1,2})/),c=b[1];if(c)return this.applicationParameters.getPixelsFromGridUnits(c)},a.prototype._getTextPositions=function(a,b,c,d,e){var f=[];return a>-1&&c>-1&&(a>c?f.push("below"):a<c&&f.push("above"),b<d?f.push("left"):b>d&&f.push("right")),e&&e.length>0&&f.push("on"),f},a.prototype._getMediaPositions=function(a,b,c,d){var e=[];return a>-1&&(c>a?e.push("below"):c<a&&e.push("above"),d<b?e.push("left"):d>b&&e.push("right")),e},a.prototype.isImageGallery=function(a){return-1!==this.mediaOverride.imageGalleriesTypes.indexOf(a)},a}();FeatureDetector.MediaTypes={extVideo:"extVideo",image:"image",gallery:"gallery",shape:"shape",video:"video",pattern:"pattern"};var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),__assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},PresetFeatureDetector=function(a){function b(b,c,d,e,f,g){var h=a.call(this,b,d,e)||this;return h.clusters=c,h.LayoutUtils=f,h.BoxDecorationTypes=g,h.stripGalleriesTypes=["Strip Image","Strip Slideshow","Strip Showcase","Fullwidth Collage","Strip Video"],h.shortSubtypeToLongForm={t:"title",s:core.ElementSubTypes.Subtitle,lt:core.ElementSubTypes.LongText,b:"button",m:"media"},h.DEFAULT_TEXT_ALIGNMENT="left",h}return __extends(b,a),b.$inject=["mediaOverride","clusters","applicationParameters","PresetMediaType","LayoutUtils","BoxDecorationTypes"],b.prototype.enhanceWithRealStructure=function(a,b,c){void 0===c&&(c=this.getNode(a));var d=this.calculateRealStructures(b,c),e=d.structure,f=d.onMediaStructure,g=d.cluster;return __assign({},a,{realStructure:e,realOnMediaStructure:f,cluster:g})},b.prototype.getNumberOfColumns=function(b){return a.prototype._getNumberOfColumns.call(this,this.getLE(b).structure)},b.prototype.getColumns=function(a){var b=this.getLG(a);return b.columns&&b.columns.singleColumnProps},b.prototype.getMediaWidth=function(b){if(!(!this.hasMedia(b)||this.isList(b)&&this.isHeaderHidden(b))){if(this.hasSectionBackgroundImage(b))return 940;var c=a.prototype._getMediaWidth.call(this,this.getLE(b).leId),d=this.getVariations(b).media;return d&&d.squareImage?d.size*c:c}},b.prototype.getMediaPosition=function(a){if(!this.hasMedia(a)||!this.hasText(a)||this.hasSectionBackgroundImage(a))return[];var b=this.getFirstCoordinateOfElement(this.getStructure(a),"text"),c=b.rowIndex,d=b.columnIndex,e=this.getFirstCoordinateOfElement(this.getStructure(a),"media"),f=e.rowIndex,g=e.columnIndex;return this._getMediaPositions(c,d,f,g)},b.prototype.getTextPosition=function(a){if(!this.hasMedia(a)||!this.hasText(a))return[];if(this.hasSectionBackgroundImage(a))return["on"];var b=this.getFirstCoordinateOfElement(this.getStructure(a),"text"),c=b.rowIndex,d=b.columnIndex,e=this.getFirstCoordinateOfElement(this.getStructure(a),"media"),f=e.rowIndex,g=e.columnIndex;return this._getTextPositions(c,d,f,g,a.realOnMediaStructure)},b.prototype.hasMedia=function(a){if(this.hasSectionBackgroundImage(a)||this.isList(a)&&this.isHeaderHidden(a))return!0;var b=this.getFirstCoordinateOfElement(this.getStructure(a),"media"),c=b.rowIndex,d=b.columnIndex;return c>-1&&d>-1},b.prototype.hasText=function(a){var b=this.getFirstCoordinateOfElement(this.getStructure(a),"text"),c=b.rowIndex,d=b.columnIndex;return c>-1&&d>-1||!!a.realOnMediaStructure},b.prototype.isMediaStrip=function(a){if(!this.hasMedia(a)||this.isList(a)&&this.isHeaderHidden(a))return!1;if(this.hasSectionBackgroundImage(a))return!0;var b=this.getMediaPreferredOverride(a);if(b){var c=b.name;return this.stripGalleriesTypes.indexOf(c)>-1}return!1},b.prototype.isMediaStretched=function(a){if(!this.hasMedia(a)||this.hasSectionBackgroundImage(a)||this.isList(a)&&this.isHeaderHidden(a))return!1;var b=this.getVariations(a);return!(!b.media||!b.media.imageStretch||0===b.media.imageStretch.bottom&&0===b.media.imageStretch.top&&0===b.media.imageStretch.left&&0===b.media.imageStretch.right)},b.prototype.getHorizontalTextAlignment=function(a){var b=this.getVariations(a),c=this.getLE(a).argList,d=c.find(this.isTextArg),e=this.DEFAULT_TEXT_ALIGNMENT;if(this.hasBoxOnMedia(a)&&(e="center"),d)return _.get(b,[this.shortSubtypeToLongForm[d],"align"],e);var f=c.find(function(a){return"b"===a});return _.get(b,[this.shortSubtypeToLongForm[f],"hPosition"],e)},b.prototype.getMediaObjects=function(a){if(!this.hasMedia(a)&&!this.hasPattern(a))return[];if(this.hasSectionBackgroundImage(a))if(a.headerBg){if(!this.headerHasColorBG(a)&&!this.headerHasPatternBG(a))return"gallery"===a.headerBg.mediaType?a.headerBg.mediaItems:[a.headerBg]}else if(!this.hasColorBG(a)&&!this.hasPatternBG(a))return"gallery"===a.bg.mediaType?a.bg.mediaItems:[a.bg];var b,c=this.getMediaType(a),d=this.isList(a)?a.node.children.find(function(a){return!a.userHidden}):a.node,e=d.contentElement.valuesByMediaType;switch(c){case FeatureDetector.MediaTypes.image:case FeatureDetector.MediaTypes.video:case FeatureDetector.MediaTypes.extVideo:b=[e[c][0]];break;case FeatureDetector.MediaTypes.gallery:b=e.image;break;case FeatureDetector.MediaTypes.shape:b=[e.shape&&e.shape[0]||e.clipart&&e.clipart[0]];break;default:b=[]}return this.hasPattern(a)&&b.push(a.bg),b},b.prototype.getMediaUrls=function(a){return this.getMediaObjects(a).map(function(a){return a.videoUrl||a.relativeUri})},b.prototype.hasPatternBG=function(a){return this.headerHasPatternBG(a)||a.bg&&"pattern"===a.bg.mediaType},b.prototype.hasColorBG=function(a){return this.headerHasColorBG(a)||a.bg&&"color"===a.bg.mediaType},b.prototype.startsWithMedia=function(a){return!(!this.hasMedia(a)||this.isList(a)&&this.isHeaderHidden(a))&&(!!this.hasSectionBackgroundImage(a)||0===this.getFirstCoordinateOfElement(this.getStructure(a),"media").rowIndex)},b.prototype.endsWithMedia=function(a){return!(!this.hasMedia(a)||this.isList(a)&&this.isHeaderHidden(a))&&(!!this.hasSectionBackgroundImage(a)||this.getLastCoordinateOfElement(a,"media").rowIndex===this.getStructure(a).length-1)},b.prototype.getTextWidth=function(a){for(var b=this.getStructure(a),c=0,d=b.length;c<d;c++){var e=b[c];if(e[0]===e[e.length-1]&&this.isTextOrButtonArg(e[0]))return"full"}return"part"},b.prototype.isList=function(a){return a.preset.data.isList},b.prototype.isListZigZag=function(a){return!!a.preset.data.zigZagState},b.prototype.getOrCreateMediaPreferredOverride=function(a,b){var c=this.getMediaPreferredOverride(a);if(c)return c;var d=this.getOverrides(a,"media");if(!d)return null;var e=this.getContentType(a);d[e]||(d[e]={});var f=d[e];f._preferred||(f._preferred={});var g=f._preferred;return g[0]||(g[0]=b),g[0]},b.prototype.getMediaPreferredOverride=function(a){var b=this.getOverrides(a,"media",this.getContentType(a));return b&&b._preferred&&b._preferred&&b._preferred[0]},b.prototype.isCircularImage=function(a){var b=this.getStyleOverride(a);return b&&"wp3"===b.media},b.prototype.getStyleOverride=function(a){return this.getOverrides(a,"style",this.getContentType(a))},b.prototype.hasBox=function(a){var b=this,c=this.getOverrides(a,"decorations",this.getContentType(a));if(!c)return!1;var d=Object.keys(this.BoxDecorationTypes).map(function(a){return b.BoxDecorationTypes[a]});return Object.keys(c).some(function(a){var b=parseInt(a,10);return!isNaN(b)&&d.indexOf(b)>-1})},b.prototype.hasColumns=function(a){return!!this.getColumns(a)},b.prototype.isColumnBG=function(a){return this.hasColumns(a)&&this.getColumns(a).some(function(a){return!!a.backgroundMode})},b.prototype.hasPattern=function(a){return a.bg&&"pattern"===a.bg.mediaType},b.prototype.hasListHeader=function(a){return!this.isHeaderHidden(a)},b.prototype.hasBoxOnMedia=function(a){return a.realOnMediaStructure&&!!a.realOnMediaStructure.length},b.prototype.isTextOrButtonArg=function(a){return this.isTextArg(a)||"b"===a},b.prototype.isTextArg=function(a){return["t","s","lt"].indexOf(a)>-1},b.prototype.getFirstCoordinateOfElement=function(a,b){for(var c=0,d=a.length;c<d;c++)for(var e=0,f=a[c].length;e<f;e++){var g=a[c][e];if(b===core.ElementTypes.Text&&this.isTextOrButtonArg(g)||b===core.ElementTypes.Media&&"m"===g)return{rowIndex:c,columnIndex:e}}return{rowIndex:-1,columnIndex:-1}},b.prototype.getLastCoordinateOfElement=function(a,b){for(var c=this.getStructure(a),d=c.length-1;d>=0;d--)for(var e=c[d].length-1;e>=0;e--){var f=c[d][e];if(b===core.ElementTypes.Text&&this.isTextOrButtonArg(f)||b===core.ElementTypes.Media&&"m"===f)return{rowIndex:d,columnIndex:e}}return{rowIndex:-1,columnIndex:-1}},b.prototype.getOverrides=function(a,b,c){var d=this.getLE(a).selections,e=d&&d.overrides&&d.overrides[b];return c?e&&e[c]:e},b.prototype.getVariations=function(a){var b=this.getLE(a).cluster,c=this.getOverrides(a,"variations",this.getContentType(a));return c?c[b]:{}},b.prototype.getContentType=function(a){return this.getLG(a).isHeader?a.preset.data.contentType+"ListHeaderList":a.preset.data.contentType},b.prototype.getMediaTypeOverride=function(a){return this.getLE(a).mediaType},b.prototype.getLE=function(a){return this.getLG(a).layouts[0]},b.prototype.getLG=function(a){return a.preset.data.groups[0]},b.prototype.getNode=function(a){return this.isList(a)?a.node.children.find(function(a){return!a.userHidden}):a.node},b.prototype.calculateRealStructures=function(a,b){var c=this.LayoutUtils.transformStructureToStringArray(a,a.structure),d=this.LayoutUtils.transformStructureToStringArray(a,a.onMediaStructure),e=b.contentElement.calculateUnwantedArgs(),f=a.argsSignature.split("#"),g=f.filter(function(a){return e.find(function(b){return b===a})}),h=this.clusters.calculateFallBackClusterAndStructure(c,d,g);return{structure:h.structure,onMediaStructure:h.onMediaStructure,cluster:h.cluster}},b.prototype.getStructure=function(a){return a.realStructure},b.prototype.hasSectionBackgroundImage=function(a){return!!a.bg&&["image","video","gallery"].indexOf(a.bg.mediaType)>-1},b.prototype.isHeaderHidden=function(a){return this.isList(a)&&a.node.children[0].userHidden},b.prototype.headerHasPatternBG=function(a){return a.headerBg&&"pattern"===a.headerBg.mediaType},b.prototype.headerHasColorBG=function(a){return a.headerBg&&"color"===a.headerBg.mediaType},b}(FeatureDetector);angular.module("siteGeneratorStaticsConsumerAppInternal").service("presetFeatureDetector",PresetFeatureDetector);var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),PresetListItemFeatureDetector=function(a){function b(b,c,d,e,f,g){return a.call(this,b,c,d,e,f,g)||this}return __extends(b,a),b.$inject=["mediaOverride","clusters","applicationParameters","PresetMediaType","LayoutUtils","BoxDecorationTypes"],b.prototype.getNumberOfListItems=function(a){return this.areListItemsInTheSameGroup(a)?this.getLG(a).layouts.length:a.preset.data.groups.filter(function(a){return!a.isHeader&&!a.isFooter}).length},b.prototype.enhanceListItemWithRealStructure=function(a){var b=this.getLG(a),c=this.getLE(a);Object.assign(b,this.enhanceWithRealStructure(b,c,this.getNode(a)))},b.prototype.getNumberOfItemsInRow=function(a){return a.preset.data.itemsInRow||1},b.prototype.getNode=function(a){return a.node.children.find(function(a){return!a.userHidden&&"ListHeader"!==a.contentElementType})},b.prototype.getContentType=function(a){return a.preset.data.contentType+"List"},b.prototype.getLG=function(a){return a.preset.data.groups.find(function(a){return!a.isHeader&&!a.isFooter})},b.prototype.areListItemsInTheSameGroup=function(a){return this.getLG(a).layouts.length>1},b.prototype.getStructure=function(a){return this.getLG(a).realStructure},b}(PresetFeatureDetector);angular.module("siteGeneratorStaticsConsumerAppInternal").service("presetListItemFeatureDetector",PresetListItemFeatureDetector);var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),__assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},SectionFeatureDetector=function(a){function b(b,c,d,e,f){var g=a.call(this,b,d,c)||this;return g.sectionBackgroundService=e,g.BoxDecorationTypes=f,g}return __extends(b,a),b.$inject=["mediaOverride","PresetMediaType","applicationParameters","sectionBackgroundService","BoxDecorationTypes"],b.prototype.getNumberOfColumns=function(b){return a.prototype._getNumberOfColumns.call(this,b.structure)},b.prototype.getColumns=function(a){return a.columns},b.prototype.getMediaPosition=function(a){if(!this.hasContentMedia(a)||this.hasSectionBackgroundImage(a)||!this.hasText(a))return[];if(this.hasColumns(a))return this.getMediaPositionForColumns(a);var b=this.getFirstCoordinateOfElement(a,"text"),c=b.rowIndex,d=b.columnIndex,e=this.getFirstCoordinateOfElement(a,"media"),f=e.rowIndex,g=e.columnIndex;return this._getMediaPositions(c,d,f,g)},b.prototype.getTextPosition=function(a){if(!this.hasMedia(a)||!this.hasText(a))return[];if(this.hasSectionBackgroundImage(a))return["on"];if(this.hasColumns(a))return this.getTextPositionForColumns(a);var b=this.getFirstCoordinateOfElement(a,"text"),c=b.rowIndex,d=b.columnIndex,e=this.getFirstCoordinateOfElement(a,"media"),f=e.rowIndex,g=e.columnIndex;return this._getTextPositions(c,d,f,g,a.onMediaStructure)},b.prototype.isMediaStrip=function(a){return this.hasContentMedia(a)&&this.mediaOverride.isStripType(a)||this.hasSectionBackgroundImage(a)},b.prototype.isMediaStretched=function(a){return this.hasContentMedia(a)&&!!a.getLayoutSelectionStore().getImageStretch(a.containingSegment,a)},b.prototype.getHorizontalTextAlignment=function(a){var b=this.getSectionVariations(a),c=a.argList.find(function(a){return"text"===a.type}),d="left";if(this.hasBoxOnMedia(a)&&(d="center"),c)return _.get(b,[c.subType,"align"],d);var e=a.argList.find(function(a){return"button"===a.type});return _.get(b,[e.subType,"hPosition"],d)},b.prototype.getMediaObjects=function(a){if(!this.hasMedia(a)&&!this.hasPattern(a))return[];var b=[];if((this.hasSectionBackgroundImage(a)||this.hasPattern(a))&&(b=this.sectionBackgroundService.extractBackgroundData(a.containingSegment.node,null,a.containingLG).mediaItems),this.getElementArgIndex(a,"media")>-1){var c=_.find(a.containingSegment.node.contentElement.ceFields,function(a){return"media"===a.type});if(c){b.push(c.value[0]);var d=this.getMediaPreferredOverride(a);d&&this.isImageGallery(d.name)&&b.push.apply(b,c.value.slice(1).map(function(a){return __assign({},a,{mediaType:"gallery"})}))}}return b},b.prototype.getMediaUrls=function(a){return this.getMediaObjects(a).filter(function(a){return"pattern"!==a.mediaType}).map(function(a){return a.videoUrl||a.relativeUri})},b.prototype.getMediaWidth=function(a){if(this.hasMedia(a)){if(this.hasSectionBackgroundImage(a))return a.width;var b=a.getLayoutBySubType("image");return b?b.width:void 0}},b.prototype.startsWithMedia=function(a){if(this.hasSectionBackgroundImage(a))return!0;if(!this.hasMedia(a))return!1;if(this.hasColumns(a))return!!a.columns.filter(function(a){return a.hasMedia&&a.doesMediaFill}).length;if(1===a.structure[0].length){var b=a.structure[0][0];return"media"===a.argList[b].type}return!1},b.prototype.endsWithMedia=function(a){if(this.hasSectionBackgroundImage(a))return!0;if(!this.hasMedia(a))return!1;if(this.hasColumns(a))return!!a.columns.filter(function(a){return a.hasMedia&&a.doesMediaFill}).length;if(1===a.structure[0].length){var b=a.structure[a.structure.length-1][0];return"media"===a.argList[b].type}return!1},b.prototype.getTextWidth=function(a){for(var b=0,c=a.structure.length;b<c;b++){var d=a.structure[b],e=a.argList[d[0]].type;if(("text"===e||"button"===e)&&d[0]===d[d.length-1])return"full"}return"part"},b.prototype.hasMedia=function(a){return this.hasContentMedia(a)||this.hasSectionBackgroundImage(a)},b.prototype.hasText=function(a){return!!a.argList.find(function(a){return"text"===a.type||"button"===a.type})},b.prototype.isList=function(a){return a.isList},b.prototype.isListZigZag=function(a){return!!a.node.zigZagState},
b.prototype.hasBox=function(a){var b=this,c=Object.keys(this.BoxDecorationTypes).map(function(a){return b.BoxDecorationTypes[a]});return!!a.boxTypes&&a.boxTypes.some(function(a){return c.indexOf(a)>-1})},b.prototype.hasColumns=function(a){return!!this.getColumns(a)},b.prototype.isColumnBG=function(a){return this.hasColumns(a)&&this.getColumns(a).some(function(a){return a.doesMediaFill})},b.prototype.hasPattern=function(a){var b=this.sectionBackgroundService.extractBackgroundData(a.containingSegment.node,null,a.containingLG);return b&&"pattern"===b.mediaType},b.prototype.hasListHeader=function(a){return this.isList(a)&&!!a.groups.find(function(a){return"ListHeader"===a.contentType})},b.prototype.hasBoxOnMedia=function(a){return a.onMediaStructure&&!!a.onMediaStructure.length},b.prototype.hasContentMedia=function(a){return this.getElementArgIndex(a,"media")>-1},b.prototype.getFirstCoordinateOfElement=function(a,b){var c=this.getElementArgIndex(a,b);b===core.ElementTypes.Text&&-1===c&&(c=this.getElementArgIndex(a,core.ElementTypes.Button));var d=this.findTypeInStructure(c,a.structure),e=d.rowIndex,f=d.columnIndex;return-1===e&&a.onMediaStructure?this.findTypeInStructure(c,a.onMediaStructure):{rowIndex:e,columnIndex:f}},b.prototype.findTypeInStructure=function(a,b){if(b)for(var c=0,d=b.length;c<d;c++)for(var e=0,f=b[c].length;e<f;e++)if(b[c][e]===a)return{rowIndex:c,columnIndex:e};return{rowIndex:-1,columnIndex:-1}},b.prototype.getMediaPreferredOverride=function(a){var b=this.getOverride(a,"media","_preferred");return b&&b[0]},b.prototype.getOverride=function(a,b,c){return a.getLayoutSelectionStore().getOverride(b,a.containingSegment,c)},b.prototype.getOverrides=function(a,b,c){a.getLayoutSelectionStore().getOverrideMap()[b][c]},b.prototype.getSectionVariations=function(a){var b=a.containingSegment.getTypeForLSSWithoutPartition(),c=a.containingLG.getLayoutSelectionStore();return _.get(c.variations,[b,a.cluster])},b.prototype.getElementArgIndex=function(a,b){return a.argList.findIndex(function(a){return a.type===b})},b.prototype.getMediaTypeOverride=function(a){return this.getOverrides(a,"media","allowedMediaOverrides")},b.prototype.getTextPositionForColumns=function(a){var b=this.getColumns(a),c=b.findIndex(function(a){return a.hasText}),d=b.findIndex(function(a){return a.hasMedia}),e=[];return c>-1&&d>-1&&(c>d?e.push("right"):e.push("left")),e},b.prototype.getMediaPositionForColumns=function(a){var b=this.getColumns(a),c=b.findIndex(function(a){return a.hasText}),d=b.findIndex(function(a){return a.hasMedia}),e=[];return c>-1&&d>-1&&(d>c?e.push("right"):e.push("left")),e},b.prototype.hasSectionBackgroundImage=function(a){return["image","video","gallery"].indexOf(this.sectionBackgroundService.getBackground(a.containingSegment.node).mediaType)>-1},b}(FeatureDetector);angular.module("siteGeneratorStaticsConsumerAppInternal").service("sectionFeatureDetector",SectionFeatureDetector);var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),SectionListItemFeatureDetector=function(a){function b(b,c,d,e,f){return a.call(this,b,d,c,e,f)||this}return __extends(b,a),b.$inject=["mediaOverride","PresetMediaType","applicationParameters","sectionBackgroundService","BoxDecorationTypes"],b.prototype.enhanceListItemWithRealStructure=function(a){},b.prototype.getNumberOfItemsInRow=function(a){var b=this.getListItemGroups(a);return b[0].columns?b[0].columns.length:1},b.prototype.getNumberOfListItems=function(a){var b=this.getListItemGroups(a);return b[0].columns?b[0].columns.length:b.length},b.prototype.getListItemGroups=function(a){return a.groups.filter(function(a){return"ListHeader"!==a.contentType&&"ListFooter"!==a.contentType})},b}(SectionFeatureDetector);angular.module("siteGeneratorStaticsConsumerAppInternal").service("sectionListItemFeatureDetector",SectionListItemFeatureDetector);var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},__decorate=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},MEMOIZE_IDENTIFIER={};angular.module("siteGeneratorStaticsConsumerAppInternal").factory("FeatureList",FeatureListFactory);var PrettyAlgoRuleEngine=function(){function a(){}return a.prototype.getScores=function(a,b,c){var d=this,e=a.filter(function(a){return d.isConditionMatching(a.name,a.conditionA,b)});return e.length?c.map(function(a){var c=e.filter(function(b){return d.isConditionMatching(b.name,b.conditionB,a)}).filter(function(c){return d.isCompareConditionMatching(c.compareFeaturesCondition,b,a)});return{rules:c,score:c.reduce(function(a,b){return a+b.score},0)}}):[]},a.prototype.isConditionMatching=function(a,b,c){var d=function(a){if(Array.isArray(c[a])){if(!c[a].some(function(c){return-1!==b[a].indexOf(c)}))return{value:!1}}else if(b.hasOwnProperty(a)&&b[a]!==c[a])return{value:!1}};for(var e in b){var f=d(e);if("object"==typeof f)return f.value}return!0},a.prototype.isCompareConditionMatching=function(a,b,c){return!a||(console.log("same media",void 0!==a.sameMedia,a.sameMedia,b.isSameMedia(c)!==a.sameMedia),(void 0===a.sameMedia||b.isSameMedia(c)===a.sameMedia)&&(void 0===a.sameTextAlignment||b.isSameTextAlignment(c)===a.sameTextAlignment))},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("prettyAlgoRuleEngine",PrettyAlgoRuleEngine),angular.module("siteGeneratorStaticsConsumerAppInternal").constant("prettyAlgoRules",[{approved:!1,conditionA:{hasColumns:!0,hasMedia:!0,hasText:!0,mediaPosition:["left"],mediaWidth:620,numberOfColumns:2,textPosition:["right"],textWidth:"part"},conditionB:{hasColumns:!0,hasMedia:!0,hasText:!0,mediaPosition:["left"],mediaWidth:460,numberOfColumns:2},example:"http://prntscr.com/fqzxsr",label:"",name:"2:1 image left to text + 1:1 image left to text",owner:"yanayn",score:-2},{approved:!1,conditionA:{hasColumns:!0,hasMedia:!0,hasText:!0,mediaPosition:["left"],mediaWidth:620,numberOfColumns:2,textPosition:["right"],textWidth:"part"},conditionB:{hasMedia:!0,horizontalTextAlignment:"center",isCoastToCoast:!0},example:"http://prntscr.com/fqzzpi",label:"",name:"2:1 image left to text + c2c media below text aligned center",owner:"yanayn",score:2},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textWidth:"full"},conditionB:{endsWithMedia:!1,hasBox:!0,hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"http://prntscr.com/fliobg",name:"Box between media Pretty",owner:"Yonatan",score:1},{approved:!1,conditionA:{hasMedia:!0,horizontalTextAlignment:"center",isCoastToCoast:!0,textPosition:["below"],textWidth:"full"},conditionB:{hasColumns:!1,hasMedia:!0,hasText:!0,horizontalTextAlignment:"center",isCoastToCoast:!1,mediaPosition:["above"],startsWithMedia:!0,textPosition:["below"],textWidth:"full"},example:"http://prntscr.com/fp8qzl",name:"Center text below C2C image + image above center text",owner:"shayca0",score:1},{approved:!0,conditionA:{hasBox:!1,hasColumns:!0,hasMedia:!0,isCoastToCoast:!1,mediaPosition:["right"],mediaType:["Image"],numberOfColumns:2,textPosition:["left"],textWidth:"part"},conditionB:{hasColumns:!1,hasMedia:!0,mediaPosition:["right"],mediaType:["Image"],textPosition:["left"],textWidth:"part"},example:"https://prnt.sc/fliodp",name:"Columns and non-Column same side",owner:"Yanay",score:-1},{approved:!0,conditionA:{hasBox:!1,hasColumns:!0,hasMedia:!0,mediaPosition:["right"],mediaType:["Image"],numberOfColumns:2,textPosition:["left"]},conditionB:{hasColumns:!0,hasMedia:!0,mediaPosition:["right"],mediaType:["Image"],numberOfColumns:2,textPosition:["left"]},example:"https://prnt.sc/fliodp",name:"Columns same side Ugly",owner:"Yanay",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"part"},conditionB:{hasMedia:!0,mediaPosition:["left"],textPosition:["right"],textWidth:"part"},example:"https://www.screencast.com/t/u5BvTblf",name:"Diagonal text pretty",owner:"Noa",score:1},{approved:!0,conditionA:{endsWithMedia:!1,hasMedia:!0,isCoastToCoast:!0,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,textWidth:"part"},example:"https://prnt.sc/fmsyce",name:"Diagonal text pretty 2",owner:"Yonatan",score:1},{approved:!1,conditionA:{hasColumns:!0,hasText:!0,horizontalTextAlignment:"center",mediaPosition:["right"],numberOfColumns:2,textPosition:["left"],textWidth:"part"},conditionB:{hasColumns:!1,hasMedia:!0,hasText:!0,horizontalTextAlignment:"left",isCoastToCoast:!1,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},example:"https://prnt.sc/flir04",name:"Left text column above image with left text",owner:"shayca0",score:1},{approved:!1,conditionA:{isList:!0,listItemTextPosition:["on"],listItemTextWidth:"part",numberOfListItemsInRow:3},conditionB:{hasMedia:!0,hasText:!0,horizontalTextAlignment:"center",isCoastToCoast:!1,mediaPosition:["above"],startsWithMedia:!0},example:"http://prntscr.com/fp9p6q",name:"List 3 columns + image above text centered",owner:"shayca0",score:1},{approved:!0,conditionA:{endsWithMedia:!1,hasText:!0,isList:!0,listItemTextPosition:["below"],numberOfListItemsInRow:3},conditionB:{hasMedia:!0,hasText:!0,mediaPosition:["above"],startsWithMedia:!0},example:"https://prnt.sc/flioo0",name:"List centered and a large image Pretty- should replace to same alignment",owner:"shayca0",score:1},{approved:!0,conditionA:{isList:!0,listItemHorizontalTextAlignment:"center",listItemTextPosition:["below"],numberOfListItemsInRow:3},conditionB:{hasMedia:!0,mediaType:["Gallery"],textPosition:["left"],textWidth:"part"},example:"https://prnt.sc/flixvs",name:"List centered and gallery Ugly",owner:"Inbal",score:-1},{approved:!0,conditionA:{isList:!0,listItemHorizontalTextAlignment:"center",listItemMediaPosition:["above"],listItemTextPosition:["below"],listItemTextWidth:"full",numberOfListItemsInRow:3},conditionB:{hasMedia:!0,mediaPosition:["right"],mediaType:["Gallery"],mediaWidth:620,textPosition:["left"],textWidth:"part"},example:"https://prnt.sc/flixvs",name:"List centered with half left aligned Ugly",owner:"inbal ",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaWidth:940,textPosition:["above"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaWidth:940,textPosition:["above"],textWidth:"full"},example:"https://screencast.com/t/scEA5cXKJ0V9",name:"Media Pretty 940",owner:"Karina",score:1},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,mediaType:["Gallery"]},conditionB:{hasColumns:!0,hasMedia:!0,startsWithMedia:!0},example:"https://prnt.sc/fliu1s",name:"Paired C2C Gallery and columns Ugly",owner:"Yonatan",score:-1},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],startsWithMedia:!0,textPosition:["below"]},example:"http://prntscr.com/flimp7",name:"Paired C2C media Ugly 1",owner:"Shay",score:-1},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,textPosition:["on"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],startsWithMedia:!0,textPosition:["below"]},example:"",name:"Paired C2C media Ugly 2",owner:"Shay",score:-1},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,textPosition:["above"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,startsWithMedia:!0,textPosition:["on"]},example:"https://prnt.sc/fliqrv",name:"Paired C2C media Ugly 3",owner:"Shay",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"]},example:"https://www.absolutesocialagency.com/",name:"Paired Media 3",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaType:["Gallery"],textPosition:["on"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaType:["Gallery"]},example:"http://bellanightside.wixsite.com/forestdogs",name:"Paired Media Gallery Ugly",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaType:["Video"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaType:["Video"],textPosition:["below"]},example:"http://sachin2panday.wixsite.com/stxaviersnagra",name:"Paired Media Videos Ugly",owner:"Karina",score:-1},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,mediaType:["Video"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],mediaType:["Video"],startsWithMedia:!0},example:"PARALAX + VIDEO C2C",name:"Paired Video In the meantime",owner:"Shay",score:-1},{approved:!0,conditionA:{isSameMedia:!0},conditionB:{isSameMedia:!0},example:"",name:"Same Media",owner:"Shay",score:-1},{approved:!0,conditionA:{endsWithMedia:!0,hasBox:!1,hasMedia:!0,isCoastToCoast:!0,isList:!1,mediaPosition:["below"],mediaType:["Gallery"],startsWithMedia:!1,textPosition:["above"],textWidth:"full"},conditionB:{endsWithMedia:!1,hasBox:!1,hasMedia:!0,isCoastToCoast:!0,isList:!1,mediaPosition:["above"],mediaType:["Image"],startsWithMedia:!0,textPosition:["below"],textWidth:"full"},example:"https://prnt.sc/flimp7",name:"Strip gallery & Strip Image Ugly",owner:"Yonatan",score:-1},{approved:!0,conditionA:{hasMedia:!0,textPosition:["on"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],mediaWidth:460,textPosition:["right"],textWidth:"part"},example:"https://www.screencast.com/t/Pq0PWTlbr",name:"Text Alignment Pretty 1",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,isList:!0,isListZigZag:!1,listItemHorizontalTextAlignment:"center",listItemMediaPosition:["above"],listItemTextPosition:["below"],mediaPosition:["above"],mediaType:["Shape"],mediaWidth:60,numberOfListItemsInRow:3,startsWithMedia:!0,textPosition:["below"],textWidth:"full"},example:"https://www.screencast.com/t/dqqX4ZJzT9",name:"Text Alignment Pretty 1 Lists",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{isList:!0,isListZigZag:!1,listItemHorizontalTextAlignment:"center",listItemTextPosition:["on"],numberOfListItemsInRow:3},example:"https://www.screencast.com/t/D9i6chZ9kvga",name:"Text Alignment Pretty 1 Lists column",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,textWidth:"part"},example:"https://screencast.com/t/w4EdxB810mD",name:"Text Alignment Pretty 2",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,textPosition:["on"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],textPosition:["right"],textWidth:"part"},example:"https://www.screencast.com/t/6dvsEefsSZr",name:"Text Alignment Pretty 3",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],mediaWidth:460,textPosition:["right"],textWidth:"part"},example:"https://www.screencast.com/t/aiFsy2bI87",name:"Text Alignment Pretty 4",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],mediaWidth:620,textPosition:["right"],textWidth:"part"},example:"https://www.screencast.com/t/J0bvg4AK3wR",name:"Text Alignment Pretty 5",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["right"],mediaWidth:620,textPosition:["left"],textWidth:"part"},example:"https://www.screencast.com/t/ezV5N4orPS",name:"Text Alignment Pretty 6",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:940,textPosition:["below"],textWidth:"full"},conditionB:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],mediaWidth:460,startsWithMedia:!0,textPosition:["right"],textWidth:"part"},example:"https://www.screencast.com/t/kftMHkt5QaD",name:"Text Alignment Pretty 7",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["right"],textPosition:["left"],textWidth:"part"},conditionB:{hasMedia:!0,textPosition:["above"],textWidth:"full"},example:"http://12raouff.wixsite.com/website",name:"Text Alignment Ugly 1",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:940,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"https://www.screencast.com/t/dQF4b5NKP",name:"Text Alignment Ugly 10",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:940,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"https://www.screencast.com/t/dQF4b5NKP",name:"Text Alignment Ugly 11",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:940,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaWidth:940,textPosition:["below"],textWidth:"full"},example:"https://www.screencast.com/t/IkMgB5iaM",name:"Text Alignment Ugly 12",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!1,textWidth:"full"},conditionB:{hasMedia:!1,textWidth:"full"},example:"http://joyanngoodridge.wixsite.com/advancedlearning",name:"Text Alignment Ugly 2",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["right"],textPosition:["left"],textWidth:"part"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],textPosition:["right"],textWidth:"part"},example:"http://smbatha3871.wixsite.com/website",name:"Text Alignment Ugly 3",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!1,textWidth:"full"},example:"http://pattorsiello.wixsite.com/website",name:"Text Alignment Ugly 4",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"full"},example:"http://jordanclark84.wixsite.com/website",name:"Text Alignment Ugly 5",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,textPosition:["on"]},conditionB:{hasMedia:!0,mediaPosition:["below"],textPosition:["above"]},example:"https://rioterradevelopmen.wixsite.com/website",name:"Text Alignment Ugly 6",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,mediaPosition:["right"],textPosition:["left"],textWidth:"part"},conditionB:{hasMedia:!0,mediaPosition:["left"],textPosition:["right"],textWidth:"part"},example:"https://marmoladynka.wixsite.com/kakapo",name:"Text Alignment Ugly 7",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["right"],mediaType:["Image"],mediaWidth:460,textPosition:["left"],textWidth:"part"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],mediaType:["Image"],mediaWidth:460,textPosition:["right"],textWidth:"part"},example:"https://linafacepainting.wixsite.com/website",name:"Text Alignment Ugly 8",owner:"Karina",score:-10},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaType:["Image"],mediaWidth:940,textPosition:["below"],textWidth:"full"},example:"",name:"Text Alignment Ugly 9",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{isList:!0,isListZigZag:!1,listItemHorizontalTextAlignment:"center",listItemMediaPosition:["above"],listItemTextPosition:["below"],listItemTextWidth:"full",numberOfListItemsInRow:3},example:"https://www.screencast.com/t/3IF39nJsk",name:"Text Blocks Pretty 1 Lists",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{isList:!0,isListZigZag:!1,listItemHorizontalTextAlignment:"center",listItemMediaPosition:["above"],listItemTextPosition:["below"],listItemTextWidth:"full",numberOfListItemsInRow:1},example:"https://www.screencast.com/t/QhIXPTmuw",name:"Text Blocks Pretty 2 Lists",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"http://zahratelatela.wixsite.com/website",name:"Text Blocks Ugly 1",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!1,isCoastToCoast:!1,isList:!0,textWidth:"full"},example:"https://www.screencast.com/t/xUTXBDGiQJo",name:"Text Blocks Ugly 1 Lists",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"full"},conditionB:{hasMedia:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"https://www.screencast.com/t/bawiNhytF",name:"Text Blocks Ugly 10",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"http://kimschulz1.wixsite.com/petportraits",name:"Text Blocks Ugly 2",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:460,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaType:["Shape"],textPosition:["above"],textWidth:"full"},example:"https://cleaningangelsllcva.wixsite.com/cleaning",name:"Text Blocks Ugly 4",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:460,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaType:["Shape"],textPosition:["above"],textWidth:"full"},example:"https://andrewrezin.wixsite.com/website",name:"Text Blocks Ugly 5",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:460,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaType:["Shape"],textPosition:["above"],textWidth:"full"},example:"https://ibtnickhalverson.wixsite.com/imagineballet",name:"Text Blocks Ugly 6",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!1,textWidth:"full"},conditionB:{hasMedia:!1,textWidth:"full"},example:"https://leigh925.wixsite.com/website",name:"Text Blocks Ugly 7",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,mediaPosition:["below"],mediaWidth:940,textPosition:["above"],textWidth:"full"},conditionB:{hasMedia:!0,mediaPosition:["above"],mediaWidth:940,textPosition:["below"],textWidth:"full"},example:"https://cowanmillbaptist.wixsite.com/cowanmill",name:"Text Blocks Ugly 8",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"https://www.screencast.com/t/bawiNhytF",name:"Text Blocks Ugly 9",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaWidth:940,textPosition:["above"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,isList:!0,mediaPosition:["above"],mediaType:["Shape"],mediaWidth:60,startsWithMedia:!0,textPosition:["below"],textWidth:"full"},example:"https://www.screencast.com/t/zUMvGoOfiN0",name:"Text alignment pretty 2 Lists",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,isList:!0,listItemHorizontalTextAlignment:"center",listItemMediaPosition:["above"],listItemTextPosition:["below"],listItemTextWidth:"full",mediaPosition:["above"],mediaType:["Shape"],mediaWidth:60,numberOfListItemsInRow:3,startsWithMedia:!0,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"full"},example:"https://www.screencast.com/t/hj0wyQHXeh",name:"Text alignment pretty 3 Lists",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,isList:!0,listItemHorizontalTextAlignment:"center",listItemMediaPosition:["above"],listItemTextPosition:["below"],listItemTextWidth:"full",mediaPosition:["above"],mediaType:["Shape"],mediaWidth:60,numberOfListItemsInRow:3,startsWithMedia:!0,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"full"},example:"https://www.screencast.com/t/hj0wyQHXeh",name:"Text alignment ugly 1 Lists",owner:"Karina",score:-1},{approved:!0,conditionA:{endsWithMedia:!1,hasMedia:!0,hasText:!0,isCoastToCoast:!0,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,startsWithMedia:!0,textPosition:["below"]},example:"http://prntscr.com/fmsuwb",name:"Text below C2C + C2C above text",owner:"shayca0",score:-1},{approved:!1,conditionA:{hasMedia:!0,hasText:!0,horizontalTextAlignment:"center",isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!1,hasText:!0,horizontalTextAlignment:"left"},example:"http://prntscr.com/fp8m2h",name:"Text below C2C + only text below",owner:"shayca0",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,hasText:!0,isCoastToCoast:!0,textWidth:"full"},example:"https://prnt.sc/fmt1tl",name:"Text below C2C + text above C2C",owner:"shayca0",score:-1},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,textPosition:["on"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,textPosition:["above"]},example:"https://screencast.com/t/5Zpik5v3",name:"Text block alignment ugly",owner:"Shay",score:-1},{approved:!1,compareFeaturesCondition:{sameTextAlignment:!1},conditionA:{hasMedia:!0,hasText:!0,horizontalTextAlignment:"left",isCoastToCoast:!0,textPosition:["on"]},conditionB:{hasColumns:!0,hasMedia:!0,hasText:!0,horizontalTextAlignment:"center",isColumnBG:!1,mediaPosition:["right"],numberOfColumns:2,textPosition:["left"],textWidth:"part"},example:"https://prnt.sc/fqz48x",label:"",name:"left text on C2C + centered text left to media",owner:"inbalt3",score:-1},{approved:!1,compareFeaturesCondition:{sameTextAlignment:!1},conditionA:{hasMedia:!0,hasText:!0,horizontalTextAlignment:"left",isCoastToCoast:!1,isList:!0,listItemHorizontalTextAlignment:"left",listItemTextPosition:["below"],mediaPosition:["above"],textPosition:["below"]},conditionB:{hasMedia:!0,hasText:!0,horizontalTextAlignment:"center",isCoastToCoast:!0,mediaPosition:["above"],mediaType:"image",textPosition:["below","on"],textWidth:"full"},example:"https://prnt.sc/fqzjzo",label:"text below image  940 align text + c2c image full text below align center",name:"text below image  940 align text + c2c image full text below align center",owner:"or6793",score:1},{approved:!1,compareFeaturesCondition:{sameTextAlignment:!1},conditionA:{hasMedia:!0,hasText:!0,isCoastToCoast:!0,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,hasText:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},name:"text below image + C2C above text same alignment",owner:"shayca0",score:1}]);var PageFeatureDetector=function(){function a(a,b,c,d,e){this.FeatureList=a,this.Solution=b,this.layoutSolver=c,this.storyServices=d,this.applicationState=e,this.storyServices.onRenderedPart(this.renderedPartHandler.bind(this)),this._featureListPerPage=new Map}return a.$inject=["FeatureList","Solution","layoutSolver","storyServices","applicationState"],a.prototype._calcPageFeatures=function(a){var b=this,c=this.layoutSolver.getPartSolutions("body",a),d=c.getSelectedSolution(),e=this.Solution.calculateListSpans(d),f=[];return _.each(e,function(a){f=f.concat(new b.FeatureList(a).mediaObjects)}),{pageId:a,allMedia:f}},a.prototype._pageFeatures=function(a){return this.applicationState.isPagePrettyRulesCached?(this._featureListPerPage.get(a)||this._featureListPerPage.set(a,this._calcPageFeatures(a)),this._featureListPerPage.get(a)):this._calcPageFeatures(a)},a.prototype.renderedPartHandler=function(a,b,c,d,e,f){this._featureListPerPage.delete(e)},a.prototype.getPatternList=function(a){return _.filter(this._pageFeatures(a).allMedia,function(a){return"pattern"===a.mediaType})},a.prototype.hasAnyPattern=function(a){return this.getPatternList(a).length>0},a.prototype.getImageList=function(a){return _.filter(this._pageFeatures(a).allMedia,function(a){return"image"===a.mediaType})},a.prototype.getVideoList=function(a){return _.filter(this._pageFeatures(a).allMedia,function(a){return"video"===a.mediaType})},a}(),ePrettyPageRulesMode;!function(a){a[a.rulesOff=1]="rulesOff",a[a.ruleOnNoCaching=2]="ruleOnNoCaching",a[a.rulesOnAndCaching=3]="rulesOnAndCaching"}(ePrettyPageRulesMode||(ePrettyPageRulesMode={})),angular.module("siteGeneratorStaticsConsumerAppInternal").service("PageFeatureList",PageFeatureDetector);var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},DefaultSections=function(){function a(a,b){var c=this;this.flags=a,this.$translate=b,this.list=[{id:"Welcome",ceType:"Welcome",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Services",ceType:"Service",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"About",ceType:"About",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Team Members",ceType:"TeamMember",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Testimonials",ceType:"Testimonial",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Projects",ceType:"Project",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Products",ceType:"Product",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Clients",ceType:"Client",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Features",ceType:"Feature",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"FAQ",ceType:"FAQ",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Events",aliasKey:this.flags.wixEvents?"Past_Events":"Event",ceType:"Event",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"News",ceType:"News",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Contact",ceType:"Contact",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Opening Hours",ceType:"OpeningHours",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Quote",ceType:"Quote",cardinality:1,
item:{hidden:[[]],labels:{}}},{id:"CV",ceType:"CV",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Headliner",ceType:"Widget",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Gallery",ceType:"Portfolio",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Subscribe",ceType:"GetSubscribers_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Instagram",ceType:"Instagram_Widget",uniqOnCeType:!0,cardinality:1,flag:"instagram",item:{hidden:[[]],labels:{}}},{id:"Featured Product",ceType:"Stores_Product_specific_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Product Slider",ceType:"Stores_Slider_Gallery_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Product Gallery",ceType:"Stores_Grid_Gallery_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Blog Post Gallery",ceType:"Blog_Post_Gallery",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Blog",ceType:"Blog",uniqOnCeType:!0,hideInAllSections:!0,cardinality:1,flag:"tpaHeader",item:{hidden:[[]],labels:{}}},{id:"Stores",ceType:"Stores",uniqOnCeType:!0,hideInAllSections:!0,cardinality:1,flag:"tpaHeader",item:{hidden:[[]],labels:{}}},{id:"Music Player",ceType:"Music_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Tour Dates",ceType:"BandsInTown_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Pro Gallery",ceType:"ProGallery_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Bookings Widget",ceType:"Bookings_Widget",uniqOnCeType:!0,cardinality:1,flag:"bookingsWidget",item:{hidden:[[]],labels:{}}},{id:"Event",ceType:core.TpaWidgetTypes.Events_Single,uniqOnCeType:!0,cardinality:1,flag:"wixEvents",item:{hidden:[[]],labels:{}}},{id:"Events List",ceType:core.TpaWidgetTypes.Events_Multiple,uniqOnCeType:!0,cardinality:1,flag:"wixEvents",item:{hidden:[[]],labels:{}}},{id:"Video Player",ceType:"Video_Widget",uniqOnCeType:!0,cardinality:1,flag:"wixVideo",item:{hidden:[[]],labels:{}}},{id:"Section Title",ceType:"Tpa_Header",uniqOnCeType:!0,cardinality:1,flag:"tpaHeader",item:{hidden:[[]],labels:{}}},{id:"Files",ceType:"Files",uniqOnCeType:!0,cardinality:3,flag:"smallPresets",item:{hidden:[[]],labels:{}}},{id:"Price List",ceType:"Price",uniqOnCeType:!0,cardinality:3,flag:"smallPresets",item:{hidden:[[]],labels:{}}},{id:"Schedule",ceType:"ScheduleItem",uniqOnCeType:!0,cardinality:3,flag:"smallPresets",item:{hidden:[[]],labels:{}}}],this.sectionItem={hidden:[[]],labels:{},prefix:""},this.flags.translateSectionTitles&&this.list&&this.list.length&&this.list.forEach(function(a){return a.alias=c.$translate.instant("builder.sections."+(a.aliasKey||a.ceType))})}return a.prototype.getSectionOfceType=function(a){var b=this.list.find(function(b){return b.ceType===a});if(b)return __assign({},b,{item:this.sectionItem,header:this.sectionItem,footer:this.sectionItem})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").factory("defaultSections",["flags","$translate",function(a,b){return new DefaultSections(a,b)}]);var ConsumerTooltips=function(){function a(){this.list=[{name:"intro_delete",type:"hint",content:"Delete",appearance:"info"},{name:"intro_card_url_invalid",type:"hint",content:"URL is invalid",appearance:"error"},{name:"intro_card_website_address_invalid",type:"hint",content:"Web address is invalid",appearance:"error"},{name:"intro_card_email_invalid",type:"rich",content:"This is not a valid<br />email address",appearance:"error"},{name:"intro_card_url_default",type:"rich",content:"Change the links so they go to your social pages (and not Wix’s)",appearance:"error"},{name:"menu_home",type:"hint",content:"Add & manage pages",appearance:"info"},{name:"menu_add_section",type:"hint",content:"Add a new section",appearance:"info"},{name:"menu_add_dropdown",type:"hint",content:"Add a page or a section",appearance:"info"},{name:"menu_add_page",type:"hint",content:"Add a new page",appearance:"info"},{name:"menu_undo",type:"hint",content:"Undo",appearance:"info"},{name:"menu_redo",type:"hint",content:"Redo",appearance:"info"},{name:"menu_preview",type:"rich",content:"See what your site looks like on desktop & mobile",appearance:"info"},{name:"menu_publish",type:"hint",content:"Share your website <br />with the world",appearance:"info"},{name:"menu_saved_text",type:"hint",content:"Your changes are<br/> automatically saved",appearance:"info"},{name:"zoom_in",type:"hint",content:"Zoom in",appearance:"info"},{name:"zoom_out",type:"hint",content:"Zoom out",appearance:"info"},{name:"overlay_plus",type:"hint",content:"Add new section here",appearance:"info"},{name:"overlay_edit",type:"hint",content:"Edit content",appearance:"info"},{name:"overlay_settings",type:"hint",content:"Change settings",appearance:"info"},{name:"overlay_change_preset",type:"hint",content:"Change design",appearance:"info"},{name:"suggest_layout_change",type:"rich",content:"Your photos will look better in a different layout, choose one now",appearance:"info"},{name:"overlay_gear",type:"hint",content:"More Actions",appearance:"info"},{name:"overlay_delete",type:"hint",content:"Delete",appearance:"info"},{name:"overlay_move_up",type:"hint",content:"Move up",appearance:"info"},{name:"overlay_move_down",type:"hint",content:"Move down",appearance:"info"},{name:"overlay_move_page",type:"hint",content:"Move",appearance:"info"},{name:"overlay_duplicate_section",type:"hint",content:"Duplicate",appearance:"info"},{name:"overlay_rotate_color_section",type:"hint",content:"Rotate colors",appearance:"info"},{name:"overlay_enlarge_font_section",type:"hint",content:"Enlarge fonts",appearance:"info"},{name:"overlay_shrink_font_section",type:"hint",content:"Shrink fonts",appearance:"info"},{name:"overlay_enlarge_section_height",type:"hint",content:"Enlarge section",appearance:"info"},{name:"overlay_shrink_section_height",type:"hint",content:"Shrink section",appearance:"info"},{name:"overlay_print_additional_height",type:"hint",content:"Print additional height",appearance:"info"},{name:"overlay_image_fit_section",type:"hint",content:"Toggle image fit",appearance:"info"},{name:"overlay_reset_font_section",type:"hint",content:"Reset fonts",appearance:"info"},{name:"overlay_change_column_position",type:"hint",content:"Change column position",appearance:"info"},{name:"overlay_connect_domain",type:"rich",content:"Connect Your Domain:<br/> Give your site a more professional look with your own branded domain name",appearance:"info"},{name:"preview_toggle_desktop",type:"hint",content:"Desktop Preview",appearance:"info"},{name:"preview_toggle_mobile",type:"hint",content:"Mobile Preview",appearance:"info"},{name:"edit_mode_toggle_desktop",type:"hint",content:"Edit for Desktop",appearance:"info"},{name:"edit_mode_toggle_mobile",type:"hint",content:"Edit for Mobile",appearance:"info"},{name:"social_validation",type:"hint",content:"Update social links to your own profiles!",appearance:"error"},{name:"seo_title_validation",type:"hint",content:"Title length must be 70 characters at most (including white spaces)",appearance:"error"},{name:"seo_description_validation",type:"hint",content:"Description length must be 160 characters at most (including white spaces)",appearance:"error"},{name:"seo_keywords_validation",type:"rich",content:"Can only accept up to 10 keywords and 250 characters at most (including white spaces)",appearance:"error"},{name:"seo_url_validation",type:"rich",content:"Page URL should be 1 character or more with no special characters (%,&,# etc.)",appearance:"error"},{name:"seo_title_tooltip",type:"rich",content:"Your site name, page name. and an idea of what you do in 55-70 characters (including spaces)",appearance:"info"},{name:"seo_description_tooltip",type:"rich",content:"Your site's description should be between 50-160 characters (including spaces)",appearance:"info"},{name:"seo_keywords_tooltip",type:"rich",content:"Use up to 10 keywords or phrases, separated by commas",appearance:"info"},{name:"seo_url_tooltip",type:"rich",content:"This is your page address on the web. It helps people find and remember the page, so make it catchy and relevant",appearance:"info"},{name:"next_item",type:"hint",content:"Next",appearance:"info"},{name:"previous_item",type:"hint",content:"Previous",appearance:"info"},{name:"drag_section",type:"hint",content:"Drag section",appearance:"info"},{name:"close_preview",type:"hint",content:"Back to Edit Mode",appearance:"info"},{name:"crop_cancel",type:"hint",content:"Cancel",appearance:"info"},{name:"crop_apply",type:"hint",content:"Apply",appearance:"info"},{name:"publish_error_site_name_is_not_string",type:"hint",content:"Cannot be empty",appearance:"error"},{name:"publish_error_site_name_too_short",type:"rich",content:"Your site name must be<br/>between 4-20 characters",appearance:"error"},{name:"publish_error_site_name_too_long",type:"rich",content:"Your site name must be<br/>between 4-20 characters",appearance:"error"},{name:"publish_error_site_name_already_exists",type:"hint",content:"Name already exists",appearance:"error"},{name:"publish_error_site_name_invalid_chars",type:"hint",content:"Invalid character",appearance:"error"},{name:"publish_error_site_name_invalid",type:"hint",content:"Invalid site name",appearance:"error"},{name:"publish_error_site_name_ends_with_hyphen",type:"hint",content:"Name cannot end with hyphen",appearance:"error"},{name:"tpa_bookings_settings",type:"hint",content:"Manage Bookings",appearance:"info"},{name:"tpa_stores_settings",type:"hint",content:"Manage Store",appearance:"info"},{name:"tpa_blog_settings",type:"hint",content:"Manage Blog",appearance:"info"},{name:"header_fixed_header",type:"rich",content:"Keep your header visible, <br/>even when your visitors scroll down the page. <br/>Preview your site to see <br/>it in action",appearance:"info"},{name:"section_name_in_menu",type:"rich",content:"Section name as it appears in your site's header menu",appearance:"info"},{name:"design_coloration_palette_list",type:"rich",content:"These palettes best complement your main color",appearance:"info"},{name:"design_coloration_logo_palette",type:"rich",content:"This color palette has been created automatically from your logo",appearance:"info"},{name:"design_kit_reset",type:"hint",content:"Reset to default settings",appearance:"info"},{name:"design_coloration_palette_edit",type:"hint",content:"Edit Color Settings",appearance:"info"},{name:"design_change_animation",type:"hint",content:"Edit animation settings",appearance:"info"},{name:"design_coloration_help",type:"rich",content:"Help",appearance:"info"},{name:"design_coloration_mode_toggle",type:"rich",content:"Set light or dark<br/>background from<br/>your color palette",appearance:"info"},{name:"design_change_font",type:"hint",content:"Change Fonts",appearance:"info"},{name:"design_coloration_main_color",type:"rich",content:"Choose from a list of recommended colors or add your own",appearance:"info"},{name:"design_coloration_add_color",type:"hint",content:"Add your own custom color",appearance:"info"},{name:"design_advanced_colors_reset",type:"hint",content:"Reset colors",appearance:"info"},{name:"section_menu_clicked",type:"rich",content:'To rename or hide a section in your menu, edit that section. <span class="cc-tooltip-link"><a ng-click="$ctrl.onSectionTooltipLinkClick()" href="">Learn More</a></span>',appearance:"info",compiled:!0},{name:"page_menu_clicked",type:"rich",content:'Manage your menu and navigate between pages in the <span class="cc-tooltip-link"><a ng-click="$ctrl.onPageTooltipLinkClick()" href="">pages manager</a></span>.',appearance:"info",compiled:!0},{name:"animation_animation_type_help",type:"rich",content:"Add a lively animation to the elements in your site",appearance:"info"},{name:"animation_scroll_effects_help",type:"rich",content:"Add impressive scroll effects to your site background images. To see them in action, click Preview and scroll.",appearance:"info"},{name:"slideshow-transition-help",type:"rich",content:"Click on each slide to add your own content.<br/> To change the order they appear, move them up<br/>or down.",appearance:"info"},{name:"animation_page_transition_help",type:"rich",content:"Add fun page transitions to bring your site to life! Click Preview to check them out",appearance:"info"},{name:"intro_website_help",type:"rich",content:"Info from your existing site will be automatically imported to your new Wix ADI site.",appearance:"info"},{name:"design_coloration_readability_positive",type:"rich",content:"The colors in your palette<br/>make your site text easy<br/>to read",appearance:"info"},{name:"design_coloration_readability_negative",type:"rich",content:"The selected colors can<br/>make text hard to read.<br/>Click “Adjust Colors”<br/>to automatically adjust<br/>your colors",appearance:"info"},{name:"design_header_type_transparent_home",type:"rich",content:"For a seamless modern<br/>look, make the background<br/>of your homepage transparent.",appearance:"info"},{name:"design_header_type_transparent_non_home",type:"rich",content:"The header background<br/>is only transparent on<br/>your homepage.",appearance:"info"},{name:"design_header_type_transparent_disabled",type:"rich",content:"For a transparent header,<br/>select a media background<br/>for your first section below<br/>the header, set your site<br/>design color mode to dark<br/>and try again.",appearance:"info"},{name:"design_header_type_fixed",type:"rich",content:"Fixed headers are always<br/>visible, even when your<br/>visitors scroll.",appearance:"info"},{name:"section_background_categories_color",type:"rich",content:"Background colors from your palette.",appearance:"info"},{name:"section_background_categories_media",type:"rich",content:"Images, videos and galleries that best complement your website.",appearance:"info"},{name:"section_background_categories_pattern",type:"rich",content:"Pattern colors are taken<br/> from your site's palette. Change your site colors to see other options.",appearance:"info",compiled:!0},{name:"mobile_text_field_disabled",type:"rich",content:'Want to edit your text?<br/>Go to <span class="cc-tooltip-link"><a ng-click="$ctrl.onTooltipLinkClick()" href="">Desktop</a></span>.',compiled:!0,appearance:"info"},{name:"mobile_media_edit_disabled",type:"rich",content:'Want to replace your media? Go to <span class="cc-tooltip-link"><a ng-click="$ctrl.onTooltipLinkClick()" href="">Desktop</a></span>.',compiled:!0,appearance:"info"},{name:"user_web_address",type:"rich",content:"",appearance:"info"},{name:"floating-go-to-editor-link",type:"rich",content:"Go to the Wix Editor for more site customization options",appearance:"info"},{name:"web-address-is-not-valid",type:"rich",content:"Please type a vaild web address",appearance:"info"},{name:"media-settings.size-button.cropped",type:"hint",appearance:"info",translated:!0,content:null},{name:"media-settings.size-button.croppedheader",type:"hint",appearance:"info",translated:!0,content:null},{name:"media-settings.size-button.uncropped",type:"hint",appearance:"info",translated:!0,content:null},{name:"media-settings.size-button.strip",type:"hint",appearance:"info",translated:!0,content:null},{name:"media-settings.size-button.stripheader",type:"hint",appearance:"info",translated:!0,content:null},{name:"media-settings.size-button.column",type:"hint",appearance:"info",translated:!0,content:null},{name:"media-settings.size-button.background",type:"hint",appearance:"info",translated:!0,content:null},{name:"media-settings.size-button.backgroundheader",type:"hint",appearance:"info",translated:!0,content:null},{name:"media-settings.size-button.backgroundlist",type:"hint",appearance:"info",translated:!0,content:null},{name:"media-settings.size-button.backgroundfull",type:"hint",appearance:"info",translated:!0,content:null},{name:"media-settings.size-button.gallery",type:"hint",appearance:"info",translated:!0,content:null},{name:"media-settings.disabled-tab-video",type:"hint",appearance:"info",translated:!0,content:null,compiled:!0,interactive:!0},{name:"media-settings.disabled-tab-gallery",type:"hint",appearance:"info",translated:!0,content:null,compiled:!0,interactive:!0},{name:"image",type:"hint",content:null,appearance:"info",translated:!0},{name:"video",type:"hint",content:null,appearance:"info",translated:!0},{name:"gallery",type:"hint",content:null,appearance:"info",translated:!0},{name:"pattern",type:"hint",content:null,appearance:"info",translated:!0},{name:"shape",type:"hint",content:null,appearance:"info",translated:!0},{name:"brightness",type:"hint",content:null,appearance:"info",translated:!0},{name:"saturation",type:"hint",content:null,appearance:"info",translated:!0},{name:"link-details-paypal.fixed",type:"hint",content:null,appearance:"info",translated:!0},{name:"link-details-paypal.toggle.on",type:"hint",content:null,appearance:"info",translated:!0},{name:"link-details-paypal.toggle.off",type:"hint",content:null,appearance:"info",translated:!0}]}return a.prototype.registerTooltips=function(a,b){_.each(this.list,function(c){c.translated&&(c.content=b.instant("tooltips."+c.name));var d=_.omit(c,"name","translated");a.setToolTip(c.name,d)})},a}(),ConsumerTooltips2=function(){function a(){this.list=[{name:"intro_delete",type:"hint",appearance:"info"},{name:"intro_card_url_invalid",type:"hint",appearance:"error"},{name:"intro_card_website_address_invalid",type:"hint",appearance:"error"},{name:"intro_card_email_invalid",type:"rich",appearance:"error"},{name:"intro_card_url_default",type:"rich",appearance:"error"},{name:"menu_home",type:"hint",appearance:"info"},{name:"menu_add_section",type:"hint",appearance:"info"},{name:"menu_add_dropdown",type:"hint",appearance:"info"},{name:"menu_add_page",type:"hint",appearance:"info"},{name:"menu_undo",type:"hint",appearance:"info"},{name:"menu_redo",type:"hint",appearance:"info"},{name:"menu_preview",type:"rich",appearance:"info"},{name:"menu_publish",type:"hint",appearance:"info"},{name:"menu_saved_text",type:"hint",appearance:"info"},{name:"zoom_in",type:"hint",appearance:"info"},{name:"zoom_out",type:"hint",appearance:"info"},{name:"overlay_plus",type:"hint",appearance:"info"},{name:"overlay_edit",type:"hint",appearance:"info"},{name:"overlay_settings",type:"hint",appearance:"info"},{name:"overlay_change_preset",type:"hint",appearance:"info"},{name:"suggest_layout_change",type:"rich",appearance:"info"},{name:"overlay_gear",type:"hint",appearance:"info"},{name:"overlay_delete",type:"hint",appearance:"info"},{name:"overlay_move_up",type:"hint",appearance:"info"},{name:"overlay_move_down",type:"hint",appearance:"info"},{name:"overlay_move_page",type:"hint",appearance:"info"},{name:"overlay_duplicate_section",type:"hint",appearance:"info"},{name:"overlay_rotate_color_section",type:"hint",appearance:"info"},{name:"overlay_enlarge_font_section",type:"hint",appearance:"info"},{name:"overlay_shrink_font_section",type:"hint",appearance:"info"},{name:"overlay_enlarge_section_height",type:"hint",appearance:"info"},{name:"overlay_shrink_section_height",type:"hint",appearance:"info"},{name:"overlay_print_additional_height",type:"hint",appearance:"info"},{name:"overlay_image_fit_section",type:"hint",appearance:"info"},{name:"overlay_reset_font_section",type:"hint",appearance:"info"},{name:"overlay_change_column_position",type:"hint",appearance:"info"},{name:"overlay_connect_domain",type:"rich",appearance:"info"},{name:"preview_toggle_desktop",type:"hint",appearance:"info"},{name:"preview_toggle_mobile",type:"hint",appearance:"info"},{name:"edit_mode_toggle_desktop",type:"hint",appearance:"info"},{name:"edit_mode_toggle_mobile",type:"hint",appearance:"info"},{name:"social_validation",type:"hint",appearance:"error"},{name:"seo_title_validation",type:"hint",appearance:"error"},{name:"seo_description_validation",type:"hint",appearance:"error"},{name:"seo_keywords_validation",type:"rich",appearance:"error"},{name:"seo_url_validation",type:"rich",appearance:"error"},{name:"seo_title_tooltip",type:"rich",appearance:"info"},{name:"seo_description_tooltip",type:"rich",appearance:"info"},{name:"seo_keywords_tooltip",type:"rich",appearance:"info"},{name:"seo_url_tooltip",type:"rich",appearance:"info"},{name:"next_item",type:"hint",appearance:"info"},{name:"previous_item",type:"hint",appearance:"info"},{name:"drag_section",type:"hint",appearance:"info"},{name:"close_preview",type:"hint",appearance:"info"},{name:"crop_cancel",type:"hint",appearance:"info"},{name:"crop_apply",type:"hint",appearance:"info"},{name:"publish_error_site_name_is_not_string",type:"hint",appearance:"error"},{name:"publish_error_site_name_too_short",type:"rich",appearance:"error"},{name:"publish_error_site_name_too_long",type:"rich",appearance:"error"},{name:"publish_error_site_name_already_exists",type:"hint",appearance:"error"},{name:"publish_error_site_name_invalid_chars",type:"hint",appearance:"error"},{name:"publish_error_site_name_invalid",type:"hint",appearance:"error"},{name:"publish_error_site_name_ends_with_hyphen",type:"hint",appearance:"error"},{name:"tpa_bookings_settings",type:"hint",appearance:"info"},{name:"tpa_stores_settings",type:"hint",appearance:"info"},{name:"tpa_blog_settings",type:"hint",appearance:"info"},{name:"header_fixed_header",type:"rich",appearance:"info"},{name:"section_name_in_menu",type:"rich",appearance:"info"},{name:"design_coloration_palette_list",type:"rich",appearance:"info"},{name:"design_coloration_logo_palette",type:"rich",appearance:"info"},{name:"design_kit_reset",type:"hint",appearance:"info"},{name:"design_coloration_palette_edit",type:"hint",appearance:"info"},{name:"design_change_animation",type:"hint",appearance:"info"},{name:"design_coloration_help",type:"rich",appearance:"info"},{name:"design_coloration_mode_toggle",type:"rich",appearance:"info"},{name:"design_change_font",type:"hint",appearance:"info"},{name:"design_coloration_main_color",type:"rich",appearance:"info"},{name:"design_coloration_add_color",type:"hint",appearance:"info"},{name:"design_advanced_colors_reset",type:"hint",appearance:"info"},{name:"section_menu_clicked",type:"rich",appearance:"info",compiled:!0},{name:"page_menu_clicked",type:"rich",appearance:"info",compiled:!0},{name:"animation_animation_type_help",type:"rich",appearance:"info"},{name:"animation_scroll_effects_help",type:"rich",appearance:"info"},{name:"slideshow-transition-help",type:"rich",appearance:"info"},{name:"animation_page_transition_help",type:"rich",appearance:"info"},{name:"intro_website_help",type:"rich",appearance:"info"},{name:"design_coloration_readability_positive",type:"rich",appearance:"info"},{name:"design_coloration_readability_negative",type:"rich",appearance:"info"},{name:"design_header_type_transparent_home",type:"rich",appearance:"info"},{name:"design_header_type_transparent_non_home",type:"rich",appearance:"info"},{name:"design_header_type_transparent_disabled",type:"rich",appearance:"info"},{name:"design_header_type_fixed",type:"rich",appearance:"info"},{name:"section_background_categories_color",type:"rich",appearance:"info"},{name:"section_background_categories_media",type:"rich",appearance:"info"},{name:"section_background_categories_pattern",type:"rich",appearance:"info",compiled:!0},{name:"mobile_text_field_disabled",type:"rich",compiled:!0,appearance:"info"},{name:"mobile_media_edit_disabled",type:"rich",compiled:!0,appearance:"info"},{name:"user_web_address",type:"rich",compiled:!0,interactive:!0,appearance:"info"},{name:"floating-go-to-editor-link",type:"rich",appearance:"info"},{name:"web-address-is-not-valid",type:"rich",appearance:"info"},{name:"media-settings.size-button.cropped",type:"hint",appearance:"info"},{name:"media-settings.size-button.croppedheader",type:"hint",appearance:"info"},{name:"media-settings.size-button.uncropped",type:"hint",appearance:"info"},{name:"media-settings.size-button.strip",type:"hint",appearance:"info"},{name:"media-settings.size-button.stripheader",type:"hint",appearance:"info"},{name:"media-settings.size-button.column",type:"hint",appearance:"info"},{name:"media-settings.size-button.background",type:"hint",appearance:"info"},{name:"media-settings.size-button.backgroundheader",type:"hint",appearance:"info"},{name:"media-settings.size-button.backgroundlist",type:"hint",appearance:"info"},{name:"media-settings.size-button.backgroundfull",type:"hint",appearance:"info"},{name:"media-settings.size-button.gallery",type:"hint",appearance:"info"},{name:"media-settings.disabled-tab-video",type:"hint",appearance:"info",compiled:!0,interactive:!0},{name:"media-settings.disabled-tab-gallery",type:"hint",appearance:"info",compiled:!0,interactive:!0},{name:"image",type:"hint",appearance:"info"},{name:"video",type:"hint",appearance:"info"},{name:"gallery",type:"hint",appearance:"info"},{name:"pattern",type:"hint",appearance:"info"},{name:"shape",type:"hint",appearance:"info"},{name:"brightness",type:"hint",appearance:"info"},{name:"saturation",type:"hint",appearance:"info"},{name:"link-details-paypal.fixed",type:"hint",appearance:"info"},{name:"link-details-paypal.toggle.on",type:"hint",appearance:"info"},{name:"link-details-paypal.toggle.off",type:"hint",appearance:"info"},{name:"section-name",type:"hint",appearance:"info"}]}return a.prototype.registerTooltips=function(a){_.each(this.list,function(b){var c=_.omit(b,"name");a.setToolTip(b.name,c)})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").constant("consumerTooltips",new ConsumerTooltips).run(["ccTooltipManager","$translate","flags",function(a,b,c){c.tooltipsWithTranslate?(new ConsumerTooltips2).registerTooltips(a):(new ConsumerTooltips).registerTooltips(a,b)}]),angular.module("siteGeneratorStaticsConsumerAppInternal").constant("kitToPrimaryColor",{maison:"#193340",playground:"#50daea",vogue:"#f4e4cc",soho:"#1e1e96",indulge:"#b3894c",bouquet:"#f3dada",midnight:"#9b8158",merlot:"#5f0038",breeze:"#46b5ef",elegant:"#3a3b3f",agile:"#f44345",bounce:"#f270b6",evolution:"#1777cb",cadenza:"#500008",rosewater:"#f5bbb2",minimal:"#ffffff",sugar:"#655773",horizon:"#38c098","hi-rise":"#22384d",fuse:"#207af5",vintage:"#cb5139",bold:"#ffb703",classic:"#ffffff",skyscraper:"#41b7c4",sophisticated:"#f65100",clean:"#e5f0f1",chic:"#fbf883",spark:"#f64028",fresh:"#9db946",forest:"#382a23",intensity:"#31d677",delight:"#fdef8c",upbeat:"#ef4135",smart:"#334ed7","jet-black":"#16161a",timeless:"#e7e9df",rustic:"#0d3a35",innovative:"#17c37b",charming:"#ffbfb3",fun:"#f2d261",funky:"#f73f52",sincere:"#f9e666",army:"#574a3d",royal:"#edeadc",organic:"#a2ce63",tender:"#68cba7",dynamic:"#448d4e",pure:"#f4bb97"});var builder;!function(a){var b=function(){function a(){this.data={agile:{name:"Agile",description:"Vivacious and swift with a dash of spontaneity",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},army:{name:"Army",description:"A commanding presence, both strong and tenacious",fontNameSize:32,fontDescriptionSize:13,fontName:"font_0",fontDescription:"font_9"},"black-ice":{name:"Black Ice",description:"Compelling and intense with a magnetic nature",fontNameSize:22,fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},"black-ice-2":{name:"Black Ice 2",description:"Compelling and intense with a magnetic nature",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},bold:{name:"Bold",description:"An adventurous spirit that's loud and proud",fontNameSize:"",fontDescriptionSize:"",fontName:"font_2",fontDescription:"font_9"},"bold-2":{name:"Bold 2",description:"An adventurous spirit that's loud and proud",fontNameSize:"",fontDescriptionSize:"",fontName:"font_2",fontDescription:"font_9"},bounce:{name:"Bounce",description:"A burst of kinetic energy, bright and animated",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},bouquet:{name:"Bouquet",description:"Lovely and inviting with a celebratory feel",fontNameSize:"",fontDescriptionSize:"",fontName:"font_2",fontDescription:"font_9"},breeze:{name:"Breeze",description:"A gust of cool mountain air, brisk and refreshing",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},"breeze-2":{name:"Breeze 2",description:"A gust of cool mountain air, brisk and refreshing",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},cadenza:{name:"Cadenza",description:"Intense yet harmonious, like the sound of a powerful symphony",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},"cadenza-2":{name:"Cadenza 2",description:"Intense yet harmonious, like the sound of a powerful symphony",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},charming:{name:"Charming",description:"A charismatic character, both dashing and suave",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},chic:{name:"Chic",description:"Effortless style and poise with a hint of glamour",fontNameSize:"",fontDescriptionSize:"",fontName:"font_7",fontDescription:"font_9"},"chic-2":{name:"Chic 2",description:"Effortless style and poise with a hint of glamour",fontNameSize:"",fontDescriptionSize:"",fontName:"font_7",fontDescription:"font_9"},classic:{name:"Classic",description:"A graceful nature, truly tasteful and polished",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},clean:{name:"Clean",description:"Neat and balanced, like a perfectly blank slate",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},"clean-2":{name:"Clean 2",description:"Neat and balanced, like a perfectly blank slate",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},"deep-forest":{name:"Deep Forest",description:"A woodsy, free spirited vibe that's intriguing and pleasant",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},delight:{name:"Delight",description:"Engaging and joyful with a spark of jubilation",fontNameSize:22,fontDescriptionSize:11,fontName:"font_0",fontDescription:"font_9"},"delight-2":{name:"Delight 2",description:"Engaging and joyful with a spark of jubilation",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},dynamic:{name:"Dynamic",description:"A thrill-seeking quality, energetic and audacious",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},elegant:{name:"Elegant",description:"A beauty that never fades, both upscale and exquisite",fontNameSize:"",fontDescriptionSize:"",fontName:"font_2",fontDescription:"font_9"},evolution:{name:"Evolution",description:"Visionary and progressive with a contemporary touch",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},fresh:{name:"Fresh",description:"Like freshly cut grass on a summer day, crisp and invigorating",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},"fresh-2":{name:"Fresh 2",description:"Like freshly cut grass on a summer day, crisp and invigorating",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},fun:{name:"Fun",description:"Bold, bright and buzzing with an upbeat tone",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},funky:{name:"Funky",description:"An out-of-the-box vibe, uniquely hip and colorful",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},fuse:{name:"Fuse",description:"Deliberate and strong with unwavering focus",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},"hi-rise":{name:"Hi Rise",description:"Established and professional, a highly approachable feel",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},horizon:{name:"Horizon",description:"Simple yet stunning, like a sunset over the ocean",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},
"horizon-2":{name:"Horizon 2",description:"Simple yet stunning, like a sunset over the ocean",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},indulge:{name:"Indulge",description:"Luxuriously classy while exuding an air of gentle refinement",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},innovative:{name:"Innovative",description:"Creative and modern with a spark of cutting-edge discovery",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},intensity:{name:"Intensity",description:"A fierce vibe with electric energy and determination",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},"jet-black":{name:"Jet black",description:"A serious tone, sleek and striking with a dash of resilience",fontNameSize:32,fontDescriptionSize:13,fontName:"font_0",fontDescription:"font_9"},maison:{name:"Maison",description:"Like a grand estate in the French countryside, elegant and fine",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},merlot:{name:"Merlot",description:"Rich, tasteful and full-bodied, like a fine red wine",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},midnight:{name:"Midnight",description:"An unsolved mystery, both vivid and captivating",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},minimal:{name:"Minimal",description:"Balance and simplicity with a touch of refinement",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},organic:{name:"Organic",description:"A cheerful nature, authentic and friendly",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},playground:{name:"Playground",description:"Youthful and lighthearted with a sense of pure joy",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},"playground-2":{name:"Playground 2",description:"Youthful and lighthearted with a sense of pure joy",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},pure:{name:"Pure",description:"Wholesome, natural and kind with a genuine quality",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},rosewater:{name:"Rosewater",description:"Enchanting, delicate and just the right touch of romance",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},royal:{name:"Royal",description:"An air of aristocratic dignity and a modern, confident feel",fontNameSize:32,fontDescriptionSize:13,fontName:"font_0",fontDescription:"font_9"},rustic:{name:"Rustic",description:"Simple country charm garnished with an urban twist",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},serene:{name:"Serene",description:"A light, tranquil tone that's pleasant and relaxed",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},sincere:{name:"Sincere",description:"Cool and candid with an earnest approach",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},skyscraper:{name:"Skyscraper",description:"Cosmopolitan style with an influential, modern feel",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},smart:{name:"Smart",description:"Professional and intelligent, with a look that's easy on the eyes",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},soho:{name:"Soho",description:"Contemporary taste with a touch of downtown class",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},sophisticated:{name:"Sophisticated",description:"A seasoned world traveler, refined and cultured",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},spark:{name:"Spark",description:"Sharp and inspired with a flicker of excitement",fontNameSize:"",fontDescriptionSize:"",fontName:"font_2",fontDescription:"font_9"},sugar:{name:"Sugar",description:"Sweet and lively with a hint of spice and everything nice",fontNameSize:"",fontDescriptionSize:"",fontName:"font_6",fontDescription:"font_9"},"sugar-2":{name:"Sugar 2",description:"Sweet and lively with a hint of spice and everything nice",fontNameSize:"",fontDescriptionSize:"",fontName:"font_6",fontDescription:"font_9"},tender:{name:"Tender",description:"Soft and gentle with a warm, welcoming character",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},timeless:{name:"Timeless",description:"An enduring, ageless look that never goes out of style",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},unplugged:{name:"Unplugged",description:"An edgy vibe, raw and exposed",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},upbeat:{name:"Upbeat",description:"Bright and optimistic with a captivating energy",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},vintage:{name:"Vintage",description:"A retro tone, like a valuable antique that's been renewed",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},vogue:{name:"Vogue",description:"Striking glamour with a touch of je ne sais quoi",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"}}}return a}();a.FontDataForThumbnail=b}(builder||(builder={})),angular.module("siteGeneratorStaticsConsumerAppInternal").run(["flags","$translate","fontDataForThumbnail",function(a,b,c){if(a.staticTextsWithTranslate)for(var d in c.data)c.data.hasOwnProperty(d)&&(c.data[d].name=b.instant("design.font-data."+d+".name"),c.data[d].description=b.instant("design.font-data."+d+".description"))}]).constant("fontDataForThumbnail",new builder.FontDataForThumbnail);var OnstageEvents=function(){function a(){this.HIDE="HIDE",this.RENAME_BUTTON="RENAME_BUTTON",this.EDIT_LIST_ITEM="EDIT_LIST_ITEM",this.HIDE_LIST_ITEM="HIDE_LIST_ITEM",this.TOGGLE_PARAGRAPH_COLUMNS="TOGGLE_PARAGRAPH_COLUMNS",this.DELETE_LIST_ITEM="DELETE_LIST_ITEM",this.DUPLICATE_LIST_ITEM="DUPLICATE_LIST_ITEM",this.LIST_ITEM_TO_PAGE="LIST_ITEM_TO_PAGE",this.OPEN_MEDIA_MANAGER="OPEN_MEDIA_MANAGER",this.CROP_IMAGE="CROP_IMAGE",this.EDIT_BACKGROUND="EDIT_BACKGROUND",this.MANAGE_PAGES="MANAGE_PAGES",this.OPEN_SETTINGS="OPEN_SETTINGS",this.LINK_TO="LINK_TO",this.MEDIA_LINK_TO="MEDIA_LINK_TO",this.TO_SETTING_MEDIA_LINK_TO="TO_SETTING_MEDIA_LINK_TO",this.FOCUS_CONTENT="FOCUS_CONTENT",this.EDIT_CONTENT="EDIT_CONTENT",this.OPEN_SEO="OPEN_SEO",this.OPEN_SOCIAL_PANEL="OPEN_SOCIAL_PANEL",this.CHANGE_GALLERY_TYPE="CHANGE_GALLERY_TYPE",this.OVERRIDE_TEXT_COLOR="OVERRIDE_TEXT_COLOR",this.SET_MAP_STYLE="SET_MAP_STYLE",this.EDIT_COMPONENT_STYLE="EDIT_COMPONENT_STYLE"}return a}();angular.module("siteGeneratorStaticsConsumerAppInternal").constant("ONSTAGE_EVENTS",new OnstageEvents);var TpaAppInstanceHolder=function(){function a(){}return a.prototype.updateCurrentlyManagedInstance=function(a,b){this.currentlyManagedTpaInstanceId=b},a.prototype.getCurrentlyManagedInstance=function(){return this.currentlyManagedTpaInstanceId},a}();angular.module("siteGeneratorCommon").constant("tpaAppInstanceHolder",new TpaAppInstanceHolder);var ob;!function(a){a.TimeZones=[{key:"Pacific/Niue",displayName:"(GMT-11:00) Niue"},{key:"Pacific/Pago_Pago",displayName:"(GMT-11:00) Pago Pago"},{key:"Pacific/Honolulu",displayName:"(GMT-10:00) Hawaii Time"},{key:"Pacific/Rarotonga",displayName:"(GMT-10:00) Rarotonga"},{key:"Pacific/Tahiti",displayName:"(GMT-10:00) Tahiti"},{key:"Pacific/Marquesas",displayName:"(GMT-09:30) Marquesas"},{key:"America/Anchorage",displayName:"(GMT-09:00) Alaska Time"},{key:"Pacific/Gambier",displayName:"(GMT-09:00) Gambier"},{key:"America/Los_Angeles",displayName:"(GMT-08:00) Pacific Time"},{key:"America/Tijuana",displayName:"(GMT-08:00) Pacific Time - Tijuana"},{key:"America/Vancouver",displayName:"(GMT-08:00) Pacific Time - Vancouver"},{key:"America/Whitehorse",displayName:"(GMT-08:00) Pacific Time - Whitehorse"},{key:"Pacific/Pitcairn",displayName:"(GMT-08:00) Pitcairn"},{key:"America/Dawson_Creek",displayName:"(GMT-07:00) Mountain Time - Dawson Creek"},{key:"America/Denver",displayName:"(GMT-07:00) Mountain Time"},{key:"America/Edmonton",displayName:"(GMT-07:00) Mountain Time - Edmonton"},{key:"America/Hermosillo",displayName:"(GMT-07:00) Mountain Time - Hermosillo"},{key:"America/Mazatlan",displayName:"(GMT-07:00) Mountain Time - Chihuahua, Mazatlan"},{key:"America/Phoenix",displayName:"(GMT-07:00) Mountain Time - Arizona"},{key:"America/Yellowknife",displayName:"(GMT-07:00) Mountain Time - Yellowknife"},{key:"America/Belize",displayName:"(GMT-06:00) Belize"},{key:"America/Chicago",displayName:"(GMT-06:00) Central Time"},{key:"America/Costa_Rica",displayName:"(GMT-06:00) Costa Rica"},{key:"America/El_Salvador",displayName:"(GMT-06:00) El Salvador"},{key:"America/Guatemala",displayName:"(GMT-06:00) Guatemala"},{key:"America/Managua",displayName:"(GMT-06:00) Managua"},{key:"America/Mexico_City",displayName:"(GMT-06:00) Central Time - Mexico City"},{key:"America/Regina",displayName:"(GMT-06:00) Central Time - Regina"},{key:"America/Tegucigalpa",displayName:"(GMT-06:00) Central Time - Tegucigalpa"},{key:"America/Winnipeg",displayName:"(GMT-06:00) Central Time - Winnipeg"},{key:"Pacific/Galapagos",displayName:"(GMT-06:00) Galapagos"},{key:"America/Bogota",displayName:"(GMT-05:00) Bogota"},{key:"America/Cancun",displayName:"(GMT-05:00) America Cancun"},{key:"America/Guayaquil",displayName:"(GMT-05:00) Guayaquil"},{key:"America/Havana",displayName:"(GMT-05:00) Havana"},{key:"America/Iqaluit",displayName:"(GMT-05:00) Eastern Time - Iqaluit"},{key:"America/Jamaica",displayName:"(GMT-05:00) Jamaica"},{key:"America/Lima",displayName:"(GMT-05:00) Lima"},{key:"America/Montreal",displayName:"(GMT-05:00) Eastern Time - Montreal"},{key:"America/Nassau",displayName:"(GMT-05:00) Nassau"},{key:"America/New_York",displayName:"(GMT-05:00) Eastern Time"},{key:"America/Panama",displayName:"(GMT-05:00) Panama"},{key:"America/Port-au-Prince",displayName:"(GMT-05:00) Port-au-Prince"},{key:"America/Rio_Branco",displayName:"(GMT-05:00) Rio Branco"},{key:"America/Toronto",displayName:"(GMT-05:00) Eastern Time - Toronto"},{key:"Pacific/Easter",displayName:"(GMT-05:00) Easter Island"},{key:"America/Caracas",displayName:"(GMT-04:30) Caracas"},{key:"America/Asuncion",displayName:"(GMT-04:00) Asuncion"},{key:"America/Barbados",displayName:"(GMT-04:00) Barbados"},{key:"America/Boa_Vista",displayName:"(GMT-04:00) Boa Vista"},{key:"America/Campo_Grande",displayName:"(GMT-04:00) Campo Grande"},{key:"America/Cuiaba",displayName:"(GMT-04:00) Cuiaba"},{key:"America/Curacao",displayName:"(GMT-04:00) Curacao"},{key:"America/Grand_Turk",displayName:"(GMT-04:00) Grand Turk"},{key:"America/Guyana",displayName:"(GMT-04:00) Guyana"},{key:"America/Halifax",displayName:"(GMT-04:00) Atlantic Time - Halifax"},{key:"America/La_Paz",displayName:"(GMT-04:00) La Paz"},{key:"America/Manaus",displayName:"(GMT-04:00) Manaus"},{key:"America/Martinique",displayName:"(GMT-04:00) Martinique"},{key:"America/Port_of_Spain",displayName:"(GMT-04:00) Port of Spain"},{key:"America/Porto_Velho",displayName:"(GMT-04:00) Porto Velho"},{key:"America/Puerto_Rico",displayName:"(GMT-04:00) Puerto Rico"},{key:"America/Santo_Domingo",displayName:"(GMT-04:00) Santo Domingo"},{key:"America/Thule",displayName:"(GMT-04:00) Thule"},{key:"Atlantic/Bermuda",displayName:"(GMT-04:00) Bermuda"},{key:"America/St_Johns",displayName:"(GMT-03:30) Newfoundland Time - St. Johns"},{key:"America/Araguaina",displayName:"(GMT-03:00) Araguaina"},{key:"America/Argentina/Buenos_Aires",displayName:"(GMT-03:00) Buenos Aires"},{key:"America/Bahia",displayName:"(GMT-03:00) Salvador"},{key:"America/Belem",displayName:"(GMT-03:00) Belem"},{key:"America/Cayenne",displayName:"(GMT-03:00) Cayenne"},{key:"America/Fortaleza",displayName:"(GMT-03:00) Fortaleza"},{key:"America/Godthab",displayName:"(GMT-03:00) Godthab"},{key:"America/Maceio",displayName:"(GMT-03:00) Maceio"},{key:"America/Miquelon",displayName:"(GMT-03:00) Miquelon"},{key:"America/Montevideo",displayName:"(GMT-03:00) Montevideo"},{key:"America/Paramaribo",displayName:"(GMT-03:00) Paramaribo"},{key:"America/Recife",displayName:"(GMT-03:00) Recife"},{key:"America/Santiago",displayName:"(GMT-03:00) Santiago"},{key:"America/Sao_Paulo",displayName:"(GMT-03:00) Sao Paulo"},{key:"Antarctica/Palmer",displayName:"(GMT-03:00) Palmer"},{key:"Antarctica/Rothera",displayName:"(GMT-03:00) Rothera"},{key:"Atlantic/Stanley",displayName:"(GMT-03:00) Stanley"},{key:"America/Noronha",displayName:"(GMT-02:00) Noronha"},{key:"Atlantic/South_Georgia",displayName:"(GMT-02:00) South Georgia"},{key:"America/Scoresbysund",displayName:"(GMT-01:00) Scoresbysund"},{key:"Atlantic/Azores",displayName:"(GMT-01:00) Azores"},{key:"Atlantic/Cape_Verde",displayName:"(GMT-01:00) Cape Verde"},{key:"Africa/Abidjan",displayName:"(GMT+00:00) Abidjan"},{key:"Africa/Accra",displayName:"(GMT+00:00) Accra"},{key:"Africa/Bissau",displayName:"(GMT+00:00) Bissau"},{key:"Africa/Casablanca",displayName:"(GMT+00:00) Casablanca"},{key:"Africa/El_Aaiun",displayName:"(GMT+00:00) El Aaiun"},{key:"Africa/Monrovia",displayName:"(GMT+00:00) Monrovia"},{key:"America/Danmarkshavn",displayName:"(GMT+00:00) Danmarkshavn"},{key:"Atlantic/Canary",displayName:"(GMT+00:00) Canary Islands"},{key:"Atlantic/Faroe",displayName:"(GMT+00:00) Faeroe"},{key:"Atlantic/Reykjavik",displayName:"(GMT+00:00) Reykjavik"},{key:"Etc/GMT",displayName:"(GMT+00:00) GMT (no daylight saving)"},{key:"Europe/Dublin",displayName:"(GMT+00:00) Dublin"},{key:"Europe/Lisbon",displayName:"(GMT+00:00) Lisbon"},{key:"Europe/London",displayName:"(GMT+00:00) London"},{key:"Africa/Algiers",displayName:"(GMT+01:00) Algiers"},{key:"Africa/Ceuta",displayName:"(GMT+01:00) Ceuta"},{key:"Africa/Lagos",displayName:"(GMT+01:00) Lagos"},{key:"Africa/Ndjamena",displayName:"(GMT+01:00) Ndjamena"},{key:"Africa/Tunis",displayName:"(GMT+01:00) Tunis"},{key:"Africa/Windhoek",displayName:"(GMT+01:00) Windhoek"},{key:"Europe/Amsterdam",displayName:"(GMT+01:00) Amsterdam"},{key:"Europe/Andorra",displayName:"(GMT+01:00) Andorra"},{key:"Europe/Belgrade",displayName:"(GMT+01:00) Central European Time - Belgrade"},{key:"Europe/Berlin",displayName:"(GMT+01:00) Berlin"},{key:"Europe/Brussels",displayName:"(GMT+01:00) Brussels"},{key:"Europe/Budapest",displayName:"(GMT+01:00) Budapest"},{key:"Europe/Copenhagen",displayName:"(GMT+01:00) Copenhagen"},{key:"Europe/Gibraltar",displayName:"(GMT+01:00) Gibraltar"},{key:"Europe/Luxembourg",displayName:"(GMT+01:00) Luxembourg"},{key:"Europe/Madrid",displayName:"(GMT+01:00) Madrid"},{key:"Europe/Malta",displayName:"(GMT+01:00) Malta"},{key:"Europe/Monaco",displayName:"(GMT+01:00) Monaco"},{key:"Europe/Oslo",displayName:"(GMT+01:00) Oslo"},{key:"Europe/Paris",displayName:"(GMT+01:00) Paris"},{key:"Europe/Prague",displayName:"(GMT+01:00) Central European Time - Prague"},{key:"Europe/Rome",displayName:"(GMT+01:00) Rome"},{key:"Europe/Stockholm",displayName:"(GMT+01:00) Stockholm"},{key:"Europe/Tirane",displayName:"(GMT+01:00) Tirane"},{key:"Europe/Vienna",displayName:"(GMT+01:00) Vienna"},{key:"Europe/Warsaw",displayName:"(GMT+01:00) Warsaw"},{key:"Europe/Zurich",displayName:"(GMT+01:00) Zurich"},{key:"Africa/Cairo",displayName:"(GMT+02:00) Cairo"},{key:"Africa/Johannesburg",displayName:"(GMT+02:00) Johannesburg"},{key:"Africa/Maputo",displayName:"(GMT+02:00) Maputo"},{key:"Africa/Tripoli",displayName:"(GMT+02:00) Tripoli"},{key:"Asia/Amman",displayName:"(GMT+02:00) Amman"},{key:"Asia/Beirut",displayName:"(GMT+02:00) Beirut"},{key:"Asia/Damascus",displayName:"(GMT+02:00) Damascus"},{key:"Asia/Gaza",displayName:"(GMT+02:00) Gaza"},{key:"Asia/Jerusalem",displayName:"(GMT+02:00) Jerusalem"},{key:"Asia/Nicosia",displayName:"(GMT+02:00) Nicosia"},{key:"Europe/Athens",displayName:"(GMT+02:00) Athens"},{key:"Europe/Bucharest",displayName:"(GMT+02:00) Bucharest"},{key:"Europe/Chisinau",displayName:"(GMT+02:00) Chisinau"},{key:"Europe/Helsinki",displayName:"(GMT+02:00) Helsinki"},{key:"Europe/Istanbul",displayName:"(GMT+02:00) Istanbul"},{key:"Europe/Kaliningrad",displayName:"(GMT+02:00) Moscow-01 - Kaliningrad"},{key:"Europe/Kiev",displayName:"(GMT+02:00) Kiev"},{key:"Europe/Riga",displayName:"(GMT+02:00) Riga"},{key:"Europe/Sofia",displayName:"(GMT+02:00) Sofia"},{key:"Europe/Tallinn",displayName:"(GMT+02:00) Tallinn"},{key:"Europe/Vilnius",displayName:"(GMT+02:00) Vilnius"},{key:"Africa/Khartoum",displayName:"(GMT+03:00) Khartoum"},{key:"Africa/Nairobi",displayName:"(GMT+03:00) Nairobi"},{key:"Antarctica/Syowa",displayName:"(GMT+03:00) Syowa"},{key:"Asia/Baghdad",displayName:"(GMT+03:00) Baghdad"},{key:"Asia/Qatar",displayName:"(GMT+03:00) Qatar"},{key:"Asia/Riyadh",displayName:"(GMT+03:00) Riyadh"},{key:"Europe/Minsk",displayName:"(GMT+03:00) Minsk"},{key:"Europe/Moscow",displayName:"(GMT+03:00) Moscow+00"},{key:"Asia/Baku",displayName:"(GMT+04:00) Baku"},{key:"Asia/Dubai",displayName:"(GMT+04:00) Dubai"},{key:"Asia/Tbilisi",displayName:"(GMT+04:00) Tbilisi"},{key:"Asia/Yerevan",displayName:"(GMT+04:00) Yerevan"},{key:"Europe/Samara",displayName:"(GMT+04:00) Moscow+00 - Samara"},{key:"Indian/Mahe",displayName:"(GMT+04:00) Mahe"},{key:"Indian/Mauritius",displayName:"(GMT+04:00) Mauritius"},{key:"Indian/Reunion",displayName:"(GMT+04:00) Reunion"},{key:"Asia/Kabul",displayName:"(GMT+04:30) Kabul"},{key:"Antarctica/Mawson",displayName:"(GMT+05:00) Mawson"},{key:"Asia/Aqtau",displayName:"(GMT+05:00) Aqtau"},{key:"Asia/Aqtobe",displayName:"(GMT+05:00) Aqtobe"},{key:"Asia/Ashgabat",displayName:"(GMT+05:00) Ashgabat"},{key:"Asia/Dushanbe",displayName:"(GMT+05:00) Dushanbe"},{key:"Asia/Karachi",displayName:"(GMT+05:00) Karachi"},{key:"Asia/Tashkent",displayName:"(GMT+05:00) Tashkent"},{key:"Asia/Yekaterinburg",displayName:"(GMT+05:00) Moscow+02 - Yekaterinburg"},{key:"Indian/Kerguelen",displayName:"(GMT+05:00) Kerguelen"},{key:"Indian/Maldives",displayName:"(GMT+05:00) Maldives"},{key:"Asia/Calcutta",displayName:"(GMT+05:30) India Standard Time"},{key:"Asia/Colombo",displayName:"(GMT+05:30) Colombo"},{key:"Asia/Katmandu",displayName:"(GMT+05:45) Katmandu"},{key:"Antarctica/Vostok",displayName:"(GMT+06:00) Vostok"},{key:"Asia/Almaty",displayName:"(GMT+06:00) Almaty"},{key:"Asia/Bishkek",displayName:"(GMT+06:00) Bishkek"},{key:"Asia/Dhaka",displayName:"(GMT+06:00) Dhaka"},{key:"Asia/Omsk",displayName:"(GMT+06:00) Moscow+03 - Omsk, Novosibirsk"},{key:"Asia/Thimphu",displayName:"(GMT+06:00) Thimphu"},{key:"Indian/Chagos",displayName:"(GMT+06:00) Chagos"},{key:"Asia/Rangoon",displayName:"(GMT+06:30) Rangoon"},{key:"Indian/Cocos",displayName:"(GMT+06:30) Cocos"},{key:"Antarctica/Davis",displayName:"(GMT+07:00) Davis"},{key:"Asia/Bangkok",displayName:"(GMT+07:00) Bangkok"},{key:"Asia/Hovd",displayName:"(GMT+07:00) Hovd"},{key:"Asia/Jakarta",displayName:"(GMT+07:00) Jakarta"},{key:"Asia/Krasnoyarsk",displayName:"(GMT+07:00) Moscow+04 - Krasnoyarsk"},{key:"Asia/Saigon",displayName:"(GMT+07:00) Hanoi"},{key:"Indian/Christmas",displayName:"(GMT+07:00) Christmas"},{key:"Antarctica/Casey",displayName:"(GMT+08:00) Casey"},{key:"Asia/Brunei",displayName:"(GMT+08:00) Brunei"},{key:"Asia/Choibalsan",displayName:"(GMT+08:00) Choibalsan"},{key:"Asia/Hong_Kong",displayName:"(GMT+08:00) Hong Kong"},{key:"Asia/Irkutsk",displayName:"(GMT+08:00) Moscow+05 - Irkutsk"},{key:"Asia/Kuala_Lumpur",displayName:"(GMT+08:00) Kuala Lumpur"},{key:"Asia/Macau",displayName:"(GMT+08:00) Macau"},{key:"Asia/Makassar",displayName:"(GMT+08:00) Makassar"},{key:"Asia/Manila",displayName:"(GMT+08:00) Manila"},{key:"Asia/Shanghai",displayName:"(GMT+08:00) China Time - Beijing"},{key:"Asia/Singapore",displayName:"(GMT+08:00) Singapore"},{key:"Asia/Taipei",displayName:"(GMT+08:00) Taipei"},{key:"Asia/Ulaanbaatar",displayName:"(GMT+08:00) Ulaanbaatar"},{key:"Australia/Perth",displayName:"(GMT+08:00) Western Time - Perth"},{key:"Asia/Dili",displayName:"(GMT+09:00) Dili"},{key:"Asia/Jayapura",displayName:"(GMT+09:00) Jayapura"},{key:"Asia/Pyongyang",displayName:"(GMT+09:00) Pyongyang"},{key:"Asia/Seoul",displayName:"(GMT+09:00) Seoul"},{key:"Asia/Tokyo",displayName:"(GMT+09:00) Tokyo"},{key:"Asia/Yakutsk",displayName:"(GMT+09:00) Moscow+06 - Yakutsk"},{key:"Pacific/Palau",displayName:"(GMT+09:00) Palau"},{key:"Australia/Adelaide",displayName:"(GMT+09:30) Central Time - Adelaide"},{key:"Australia/Darwin",displayName:"(GMT+09:30) Central Time - Darwin"},{key:"Antarctica/DumontDUrville",displayName:"(GMT+10:00) Dumont D'Urville"},{key:"Asia/Magadan",displayName:"(GMT+10:00) Moscow+08 - Magadan"},{key:"Asia/Vladivostok",displayName:"(GMT+10:00) Moscow+07 - Yuzhno-Sakhalinsk"},{key:"Australia/Brisbane",displayName:"(GMT+10:00) Eastern Time - Brisbane"},{key:"Australia/Hobart",displayName:"(GMT+10:00) Eastern Time - Hobart"},{key:"Australia/Sydney",displayName:"(GMT+10:00) Eastern Time - Melbourne, Sydney"},{key:"Pacific/Chuuk",displayName:"(GMT+10:00) Truk"},{key:"Pacific/Guam",displayName:"(GMT+10:00) Guam"},{key:"Pacific/Port_Moresby",displayName:"(GMT+10:00) Port Moresby"},{key:"Pacific/Efate",displayName:"(GMT+11:00) Efate"},{key:"Pacific/Guadalcanal",displayName:"(GMT+11:00) Guadalcanal"},{key:"Pacific/Kosrae",displayName:"(GMT+11:00) Kosrae"},{key:"Pacific/Noumea",displayName:"(GMT+11:00) Noumea"},{key:"Pacific/Pohnpei",displayName:"(GMT+11:00) Ponape"},{key:"Pacific/Norfolk",displayName:"(GMT+11:30) Norfolk"},{key:"Asia/Kamchatka",displayName:"(GMT+12:00) Moscow+08 - Petropavlovsk-Kamchatskiy"},{key:"Pacific/Auckland",displayName:"(GMT+12:00) Auckland"},{key:"Pacific/Fiji",displayName:"(GMT+12:00) Fiji"},{key:"Pacific/Funafuti",displayName:"(GMT+12:00) Funafuti"},{key:"Pacific/Kwajalein",displayName:"(GMT+12:00) Kwajalein"},{key:"Pacific/Majuro",displayName:"(GMT+12:00) Majuro"},{key:"Pacific/Nauru",displayName:"(GMT+12:00) Nauru"},{key:"Pacific/Tarawa",displayName:"(GMT+12:00) Tarawa"},{key:"Pacific/Wake",displayName:"(GMT+12:00) Wake"},{key:"Pacific/Wallis",displayName:"(GMT+12:00) Wallis"},{key:"Pacific/Apia",displayName:"(GMT+13:00) Apia"},{key:"Pacific/Enderbury",displayName:"(GMT+13:00) Enderbury"},{key:"Pacific/Fakaofo",displayName:"(GMT+13:00) Fakaofo"},{key:"Pacific/Tongatapu",displayName:"(GMT+13:00) Tongatapu"},{key:"Pacific/Kiritimati",displayName:"(GMT+14:00) Kiritimati"}]}(ob||(ob={}));var ReferenceFieldTypes=function(){function a(){this.SOCIAL="Social.SocialButtons"}return a}();angular.module("siteGeneratorStaticsConsumerAppInternal").constant("ReferenceFieldTypes",new ReferenceFieldTypes),angular.module("siteGeneratorContentManagerInternal").constant("contentCMSFallback",{industryAncestry:["9e0d43c23f82998a6ac269b5","0e7f141a196bcc3bd9ed0670"],pages:[{id:"1fe99a018486bb847d2d8fe5",name:"Home",sections:[{id:"Welcome",ceType:"Welcome",cardinality:1,header:{prefix:"",hidden:[],labels:{}},footer:{prefix:"",hidden:[],labels:{}},item:{prefix:"",hidden:[],labels:{longText:"Description"}},dbId:"0cb352d003dfebe801b8a3ea",syncWithBooking:"none",preferredMedia:null},{id:"About",ceType:"Homepage_about",cardinality:1,header:{prefix:"",hidden:[],labels:{}},footer:{prefix:"",hidden:[],labels:{}},item:{prefix:"",hidden:[],labels:{longText:"Description"}},dbId:"7d8e9fb29d64167e6762f2e0",syncWithBooking:"none",preferredMedia:null}],optional:!1}],contentItems:[{industryIds:[],structureIds:["e51e11f3597e0c565deb792f"],sectionIds:["Welcome"],content:{title:["{{GeneralDescription.BusinessName}}"],subTitle:["Doing Business the Right Way"],longText:["Welcome to {{GeneralDescription.BusinessName}}. Our main goal is to always achieve a high level of customer satisfaction with the services and products that we provide. This simple approach has effectively fueled our growth since we opened our doors in {{GeneralDescription.YearFounded}}. We’re thrilled you’ve decided to visit us - please browse our site to discover what we’re all about."],button:["Get in Touch"]},sets:[]},{industryIds:[],structureIds:["e51e11f3597e0c565deb792f"],sectionIds:["About"],content:{title:["About Us"],subTitle:["Our Background"],longText:["As one of the leading local businesses in the {{Contact.City}} area, we attribute our reputation to the lasting customer relationships we’ve developed throughout the years. We believe that all of our customers deserve the highest level of service, and we are committed to providing just that. Get in touch today to learn more."],button:["Contact"]},sets:[]}],kits:["56ea6ad2688a379f00b7d1f1","56a9cb909abbe1240060883c","56dff911433b5a5b001fe394","57021f5f0ac9962e00c8e5d4","56e59effcc38532900200577","579ef944a10db9520021b737","5868d4eb6764341f00cac0c6","56e57bfd917ec97a001e0f1a","571cadb3ff1cf8f8009ba1e7","585fb8e641d27e20005b9b63","570267dce69a766d001fbb20","585fac6a41d27e20005b9b5e","56e6d6d18d7e8364002629da","56e178c9aeeaf64900372cd6","56e0514d203a352000f655b4","56e03c0d40213a5700098eee","56f8e5ff2479f32000bb279a","56dd4d23a23c9120000cdae0","56d45a44952a2d370028a4da","56e52efbe394dda300b8519c","56f7c38a0b19ae2e00eaab27","56e7d6b101e8043700af8382","56f3b343c9e0624900dfb8f1","56e98ace8b6487fc00c58822","56f801b45cd1577600f36112","56e91b1c7471472e009ffa46","5702657d8b893b91002cde69","56dd4bc6ea63ca680027c89e","56f93d103f30a72e0004f8d5","56e80ad06c755b9a00887e26","570243aca24ae92e00ad3204","56f26ee2596068370028f88e","56f9147e2479f32000bb279b","56dff99f9a628e8800362dd4","56e17e13f241a288009888d1","56e52be07e8ffe5b00846e59","570225f6e4b8ef9a00841798","56a49c8dfb85744900a2b2b1","57b05bd92560436d00544050","57b07fc1b0ff73640098ce3e","56e964357ab3fc3700a1197f","584d5fbdc8e7512000dad50f","5682a826a81c70310001c611","5682ae70a81c70310001c64c","5697e4d67bfbe94400385a70","568297b6208c4c310054508b","587b3a36c587ef1400686bc5","587b7e7dc25b1014009cba44","587b9783c587ef1400686bca","587babe4c25b1014009cba49","5869222c7f055d1f00e42a28"],placeholders:[]});var ContentDefaults=function(){function a(){}return a}();ContentDefaults.images=[{Description:"",Link:{},Title:"Misty Slope",fileName:"Misty Slope",height:1280,mediaType:"image",relativeUri:"99ec98fdb81945c29c25a3ad6c5606b1.jpg",width:1920},{Description:"",Link:{},Title:"Taj Mahal",fileName:"Taj Mahal",height:1275,mediaType:"image",relativeUri:"d967ba93f0314c78924edc8a8c8cfa15.jpg",width:1920},{Description:"",Link:{},Title:"Palm Trees",fileName:"Palm Trees",height:1280,mediaType:"image",relativeUri:"3cd1de924697419088c1e033bb3384ef.jpg",width:1920}],ContentDefaults.clipart={Title:"Black and White Star in Circle",fileName:"Black and White Star in Circle",mediaType:"clipart",relativeUri:"cd115295292ab894d58b44978c02d931.png",uri:"cd115295292ab894d58b44978c02d931.png",fileUrl:"media/cd115295292ab894d58b44978c02d931.png",width:378,height:349},ContentDefaults.shape={Description:"",Link:{},Title:"Graphic Shape 4",fileName:"Graphic Shape 4",mediaType:"shape",relativeUri:"shapes/92535d40ff564d3a9f61477bcdceb206.svg"},ContentDefaults.extVideo={videoUrl:"https://youtu.be/Pdq8ddrLd1A",videoId:"Pdq8ddrLd1A",thumbnailUrl:"https://i.ytimg.com/vi/Pdq8ddrLd1A/hqdefault.jpg",width:480,height:360,Title:"Wix default video",Description:"",mediaType:"extVideo",active:!0,controls:1,playmode:{autoplay:!0,loop:!1}},ContentDefaults.bgVideo={mediaType:core.MediaItemTypes.Video,fileName:"11062b_3e2f37c297534f9ead156265242fbca8",uri:"11062b_3e2f37c297534f9ead156265242fbca8",fileUrl:"video/11062b_3e2f37c297534f9ead156265242fbca8",title:"Urban View",fileInput:{audioBitrate:196,videoBitrate:10082,height:1080,width:1920,fps:25,duration:19600,type:"video",displayAspectRatio:"16:9"},fileOutput:{image:[{status:"READY",secure:!1,format:"jpg",url:"media/11062b_3e2f37c297534f9ead156265242fbca8f000.jpg",height:1080,width:1920,key:"poster.0"},{status:"READY",secure:!1,format:"jpg",url:"media/11062b_3e2f37c297534f9ead156265242fbca8f001.jpg",height:1080,width:1920,key:"poster.1"},{status:"READY",secure:!1,format:"jpg",url:"media/11062b_3e2f37c297534f9ead156265242fbca8f002.jpg",height:1080,width:1920,key:"poster.2"},{status:"READY",secure:!1,format:"jpg",url:"media/11062b_3e2f37c297534f9ead156265242fbca8f003.jpg",height:1080,width:1920,key:"poster.3"}],video:[{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"mp4",url:"video/11062b_3e2f37c297534f9ead156265242fbca8/480p/mp4/file.mp4",height:480,videoBitrate:877,tag:"High",key:"480p.mp4",duration:19600,displayAspectRatio:"16:9",quality:"480p",width:854},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"webm",url:"video/11062b_3e2f37c297534f9ead156265242fbca8/480p/webm/file.webm",height:480,videoBitrate:1457,tag:"High",key:"480p.webm",duration:19600,displayAspectRatio:"16:9",quality:"480p",width:854},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"mp4",url:"video/11062b_3e2f37c297534f9ead156265242fbca8/720p/mp4/file.mp4",height:720,videoBitrate:3362,tag:"HD",key:"720p.mp4",duration:19600,displayAspectRatio:"16:9",quality:"720p",width:1280},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"webm",url:"video/11062b_3e2f37c297534f9ead156265242fbca8/720p/webm/file.webm",height:720,videoBitrate:3954,tag:"HD",key:"720p.webm",duration:19600,displayAspectRatio:"16:9",quality:"720p",width:1280},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"mp4",url:"video/11062b_3e2f37c297534f9ead156265242fbca8/1080p/mp4/file.mp4",height:1080,videoBitrate:5753,tag:"HD",key:"1080p.mp4",duration:19600,displayAspectRatio:"16:9",quality:"1080p",width:1920},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"webm",url:"video/11062b_3e2f37c297534f9ead156265242fbca8/1080p/webm/file.webm",height:1080,videoBitrate:7151,tag:"HD",key:"1080p.webm",duration:19600,displayAspectRatio:"16:9",quality:"1080p",width:1920}]},vendor:"bigstock&bigstock&bigstock&clipcanvas",reference:"v49780622&v493478872&v49737086&v318347",fileBaseUrl:"video/11062b_3e2f37c297534f9ead156265242fbca8",relativeUri:"11062b_3e2f37c297534f9ead156265242fbca8",thumbnailUrl:"https://static.wixstatic.com/media/11062b_3e2f37c297534f9ead156265242fbca8f002.jpg/v1/fit/w_288,h_155/11062b_3e2f37c297534f9ead156265242fbca8f002.jpg",Title:"Urban View",Description:"",controls:0,playmode:{autoplay:!0,loop:!0},active:!0},ContentDefaults.BackgroundImages=[{uri:"2379e4390e594221acd483caa3d5afc7.jpg",fileUrl:"media/2379e4390e594221acd483caa3d5afc7.jpg",Description:"",Link:{},Title:"Stormy Sea",fileName:"Stormy Sea",height:938,mediaType:"image",relativeUri:"2379e4390e594221acd483caa3d5afc7.jpg",width:1668},{uri:"cd7b6a553a774ce780addec100682fca.jpg",fileUrl:"media/cd7b6a553a774ce780addec100682fca.jpg",Description:"",Link:{},Title:"Wooden Stairs",fileName:"Wooden Stairs",height:938,mediaType:"image",relativeUri:"cd7b6a553a774ce780addec100682fca.jpg",width:1668},{uri:"4d5f2554f931463aa9fdaef1e0d2ecb9.jpg",fileUrl:"media/4d5f2554f931463aa9fdaef1e0d2ecb9.jpg",Description:"",Link:{},Title:"Foggy Mountains",fileName:"Foggy Mountains",height:938,mediaType:"image",relativeUri:"4d5f2554f931463aa9fdaef1e0d2ecb9.jpg",width:1668},{uri:"bd25f30956dc48209db806fcff2388f6.jpg",fileUrl:"media/bd25f30956dc48209db806fcff2388f6.jpg",Description:"",Link:{},Title:"Sand Desert",fileName:"Sand Desert",height:938,mediaType:"image",relativeUri:"bd25f30956dc48209db806fcff2388f6.jpg",width:1668},{uri:"5dadfd66dd1644648b00e5e817af30f6.jpg",fileUrl:"media/5dadfd66dd1644648b00e5e817af30f6.jpg",Description:"",Link:{},Title:"Black Marble",fileName:"Black Marble",height:938,mediaType:"image",relativeUri:"5dadfd66dd1644648b00e5e817af30f6.jpg",width:1668},{uri:"95017e4b1ba74b09853aa12cdc8a9d62.jpg",fileUrl:"media/95017e4b1ba74b09853aa12cdc8a9d62.jpg",Description:"",Link:{},Title:"Magnified Grass",fileName:"Magnified Grass",height:938,mediaType:"image",relativeUri:"95017e4b1ba74b09853aa12cdc8a9d62.jpg",width:1668},{uri:"1f298e41bf3246d7a52d3bb8be1b084a.jpg",fileUrl:"media/1f298e41bf3246d7a52d3bb8be1b084a.jpg",Description:"",Link:{},Title:"Dark Leaf",fileName:"Dark Leaf",height:938,
mediaType:"image",relativeUri:"1f298e41bf3246d7a52d3bb8be1b084a.jpg",width:1668},{uri:"c6df3104034149ba9ca173dfb8bf326c.jpg",fileUrl:"media/c6df3104034149ba9ca173dfb8bf326c.jpg",Description:"",Link:{},Title:"Abstract Architecture",fileName:"Abstract Architecture",height:938,mediaType:"image",relativeUri:"c6df3104034149ba9ca173dfb8bf326c.jpg",width:1668}];var ContentScores=function(){function a(){}return a}();ContentScores.scoreForDefaultContent=.05,ContentScores.scoreForDefaultIndustry=.3,ContentScores.scoreForDefaultSpecificIndustry=.4,ContentScores.scoreForFullSignature=4,ContentScores.scoreForNoIndustrySignature=3,ContentScores.scoreForNoStructureSignature=2,ContentScores.scoreForNoStructureAndIndustrySignature=1,ContentScores.scoreForUsingDefaultValues=.5,ContentScores.scoreForUsingPlaceholderValues=.9,ContentScores.scoreForUsingTemplateValues=1;var ContentInterpolator=function(){function a(a,b){this.$interpolate=a,this.flags=b}return a.$inject=["$interpolate","flags"],a.prototype.interpolateSingleValue=function(a,b,c,d){if(!_.isString(a))return{content:a,score:1,isFinal:!0};var e=this.$interpolate(a,!0,null,!0);if(!e)return{content:a,score:1,isFinal:!0};var f=e({});if(f)return{content:f,score:ContentScores.scoreForUsingDefaultValues,isFinal:!0};var g=e(b);if(g)return{content:g,score:ContentScores.scoreForUsingTemplateValues,isFinal:!0};var h=e(c);if(h)return{content:h,score:ContentScores.scoreForUsingPlaceholderValues,isFinal:!0};var i=e(d),j=void 0!==i,k=j?ContentScores.scoreForUsingDefaultValues:1;return{content:i||a,score:k,isFinal:j}},a}();angular.module("siteGeneratorContentManagerInternal").service("contentInterpolator",ContentInterpolator);var ContentElementGenerator=function(){function a(a,b,c,d,e,f,g,h,i,j){this.consumerBiLogger=a,this.ContentElement=b,this.contentAllocator=c,this.contentMapCreator=d,this.siteModelData=e,this.mediaGallery=f,this.contentNormalizer=g,this.contentInterpolator=h,this.nodeTitleManager=i,this.flags=j,this.contentItemElements={},this.backgroundMedia={},this.lastSocialImageCount=0,this.preparedImages=[]}return a.$inject=["consumerBiLogger","ContentElement","contentAllocator","contentMapCreator","siteModelData","mediaGallery","contentNormalizer","contentInterpolator","nodeTitleManager","flags"],a.prototype.initialize=function(a){this.contentItemElements=a,this.flags.sectionMedia&&this.initBackgroundRepository()},a.prototype.generate=function(a,b){return void 0===b&&(b=0),1===a.cardinality?this.generateSingleContentElement(a,b):this.generateListContentElement(a,b)},a.prototype.generateListContentElement=function(a,b){var c=this;void 0===b&&(b=0);var d=a.cardinality;this.flags.presetSettings&&(d=core.maxListCardinality);var e={self:{items:_.range(0,d).map(function(a){return{}}),header:{},footer:{}}};return{type:a.ceType,items:_.range(0,d).map(function(d){return c.generateSingleContentElement(a,d+b,e.self.items[d],{self:e.self.items[d]},!0,a.ceType)}),header:this.generateSingleContentElement(this.createListSection(a,!0),0,e.self.header,e,!1,a.ceType),footer:this.generateSingleContentElement(this.createListSection(a,!1),0,e.self.footer,e,!1,a.ceType)}},a.prototype.getMediaFieldValue=function(a,b,c){var d=b;a.setValues&&0===b.length&&(d=this.contentAllocator.getMediaValue(a.setValues,c,!1));var e=_.uniq(_.map(d,function(a){return a.mediaType}));return{content:d.concat(this.contentAllocator.getMediaValue(a.itemValues,c,!0,e))}},a.prototype.getNonMediaFieldValue=function(a,b,c,d){var e=b.setValues||b.itemValues,f=this.createSortedScoresWithSelfValues(e,d);if(!f.length)return null;var g=c%f.length,h=f[g];return h.setItems&&(this.setItems=h.setItems),this.flags.includeIdInContentElement?this.contentAllocator.getFieldValueAndId(h,a):{content:this.contentAllocator.getFieldValue(h,a)}},a.prototype.generateSingleContentElement=function(a,b,c,d,e,f){var g=this;void 0===b&&(b=0),void 0===c&&(c={}),void 0===d&&(d={self:c}),void 0===e&&(e=!1),void 0===f&&(f="");var h=this.getAdjustedCEType(a),i=new this.ContentElement(h,null),j=this.resolveContentItemElements(a);this.setFallbackDefaultValues(h,e,f),this.resetSets();var k=0,l=function(){g.flags.preferSocialImages&&g.contentMapCreator.settings.socialImageUsagefilter.indexOf(h.toLowerCase())>-1&&g.consumerBiLogger.sectionManagement.fetchImagesInAddSectionPanel(k,"recommended",a.id,h)},m=function(a,c){var e=g.resolveItemValuesForField(j,a,b);if(!e.itemValues)return g.getDefaultValue(h,c);if("media"===a.type){var f=g.useSocialImages(h);return f.length&&(i.usesSocialImages=!0),k=g.preparedImages?g.preparedImages.length:0,g.getMediaFieldValue(e,f,b)}return g.getNonMediaFieldValue(a,e,b,d)||g.getDefaultValue(h,c)};return _.forEach(i.values,function(a,b){var d=m(a,b);a.value=d.content,g.flags.includeIdInContentElement&&(a.id=d.id),c[a.subType]=a.value}),l(),this.setupFieldLabels(i,a),this.setHiddenMedia(i),this.flags.sectionMedia&&!e&&this.addBackgroundMedia(i,a),i},a.prototype.getAdjustedCEType=function(a){return this.isListHeader(a)?"ListHeader":this.isListFooter(a)?"ListFooter":a.ceType.trim()},a.prototype.resolveContentItemElements=function(a){var b=this.getSectionCEType(a),c=b in this.contentItemElements?ob.deepClone(this.contentItemElements[b]):{},d=ob.deepClone(c);return a.id&&a.id!==b&&this.handleAliasContentOverride(c,a.id.trim()),this.removeLowerScoredContent(c),this.completeMissingMediaTypes(c.image,d.image),c},a.prototype.handleAliasContentOverride=function(a,b){var c=this.contentItemElements[b]||{};_.keys(c).forEach(function(b){var d=b in a,e=!!d&&_.any(a[b],function(a){return a.setItems}),f=_.any(c[b],function(a){return a.setItems});d&&e&&!f||(a[b]=c[b])})},a.prototype.removeLowerScoredContent=function(a){_.keys(a).forEach(function(b){var c=0,d=0;_.forEach(a[b],function(a){a.setItems&&a.score>d&&(d=a.score),!a.setItems&&a.score>c&&(c=a.score)}),d>0?a[b]=_.filter(a[b],function(a){return a.score===d&&a.setItems}).map(function(a,c){var d=_.find(a.setItems,function(a){return a.field===b});return d&&d.index>c&&(d.index=c),a}):c>0&&(a[b]=_.filter(a[b],function(a){return a.score===c}))})},a.prototype.resetSets=function(){this.setItems=null,this.setContent={}},a.prototype.resolveItemValuesForField=function(a,b,c){var d=a&&a[b.subType],e=this.contentItemElements[ContentMapCreator.DefaultSectionKey],f=ob.deepClone(_.get(e,b.subType)),g=this.tryGetSetValues(b),h=ob.deepClone(d||f);return g||this.setItems||(h=this.setupSetsIfNeeded(a,d,f,c)),"media"===b.type&&this.completeMissingMediaTypes(h,f),{itemValues:h,setValues:g}},a.prototype.completeMissingMediaTypes=function(a,b){if(a){var c=this.getAllMediaTypes(a),d=this.scoreMissingMediaByType(b,c),e=d.content,f=d.maxScoreByType;this.addMissingMediaByTypeScore(a,e,f)}},a.prototype.getAllMediaTypes=function(a){var b=a.map(function(a){return _.map(a.content,function(a){return a.mediaType})});return _(b).flatten().uniq().value()},a.prototype.scoreMissingMediaByType=function(a,b){var c=this,d=[],e={};return a?(a.forEach(function(a){var f=c.removeContentEntriesByMediaType(a,b);d.push(f),f.content.forEach(function(b){var c=_.get(e,b.mediaType,0);a.score>c&&(e[b.mediaType]=a.score)})}),{content:d,maxScoreByType:e}):{content:d,maxScoreByType:e}},a.prototype.addMissingMediaByTypeScore=function(a,b,c){_.forEach(b,function(b){var d=ob.deepClone(b);_.remove(d.content,function(a){var d=c[a.mediaType];return b.score<d}),a.push(d)})},a.prototype.removeContentEntriesByMediaType=function(a,b){var c=ob.deepClone(a);return _.remove(c.content,function(a){return _.contains(b,a.mediaType)}),c},a.prototype.setupSetsIfNeeded=function(a,b,c,d){var e=null,f=b?d%b.length:0;return b&&b.length>0&&b[f].setItems?(this.setItems=b[f].setItems,this.setContent=a,e=b):c&&c.length>0&&c[0].setItems?(this.setItems=c[0].setItems,this.setContent=ob.deepClone(this.contentItemElements[ContentMapCreator.DefaultSectionKey]),e=c):e=b||c,e},a.prototype.isRestoreValues=function(a){return!(this.flags.tpaHeader&&a===TPAHeader.TPA_HEADER_CE_TYPE)},a.prototype.getDefaultValue=function(a,b){var c=this.contentNormalizer.normalizeKey(b),d=a+"."+c;if(_.has(this.contentMapCreator.settings.replacements,d)){var e=_.get(this.contentMapCreator.settings.replacements,d);if(void 0!==e&&this.isRestoreValues(a))return{content:e}}return this.fallbackDefaultValues?{content:this.fallbackDefaultValues[b]}:b===core.ElementTypes.Button?{content:{callToAction:"Click Me"}}:{content:void 0}},a.prototype.setFallbackDefaultValues=function(a,b,c){this.fallbackDefaultValues=this.siteModelData.getDefaultValuesForCeType(a,b,c),_.isArray(this.fallbackDefaultValues)&&this.fallbackDefaultValues.length>0&&(this.fallbackDefaultValues=this.fallbackDefaultValues[0])},a.prototype.tryGetSetValues=function(a){var b=this.setItems?_.find(this.setItems,{field:a.subType}):null;return b?[this.setContent[a.subType][b.index]]:null},a.prototype.createSortedScoresWithSelfValues=function(a,b){var c=this,d=_.map(a,function(a){return c.interpolateNonFinal(a,b)}).filter(function(a){return a.isFinal});return _.sortBy(d,function(a){return-a.score})},a.prototype.interpolateNonFinal=function(a,b){if(!a.isFinal){var c=this.contentInterpolator.interpolateSingleValue(a.content,b,_.merge(this.contentMapCreator.replacementsWithPlaceholders,b),_.merge(this.contentMapCreator.replacementsWithDefaults,b));return c.score*=a.score,a.id&&!c.id&&(c.id=a.id),c}return a},a.prototype.createListSection=function(a,b){var c=angular.copy(a);return b?(c.id+="_ListHeader",c.item=a.header):(c.id+="_ListFooter",c.item=a.footer),c},a.prototype.getSectionCEType=function(a){return this.isListHeader(a)?a.ceType+"_ListHeader":this.isListFooter(a)?a.ceType+"_ListFooter":a.ceType},a.prototype.isListHeader=function(a){return(!this.flags.tpaHeader||a.id!==TPAHeader.TPA_HEADER_ID)&&(a.id&&a.id.endsWith("Header"))},a.prototype.isListFooter=function(a){return a.id&&a.id.endsWith("Footer")},a.prototype.setHiddenMedia=function(b){var c=this;b.setHiddenMedia({});var d=_.find(b.values,{type:core.ElementTypes.Media});if(d){var e={},f=_.filter(d.value,function(a){return"image"===a.mediaType});_.drop(f,a.MaxInitialActiveImages).forEach(function(a){e[c.mediaGallery.getItemId(a)]=!0}),b.setHiddenMedia({image:e})}},a.prototype.scoreImage=function(a){var b=1,c=0;if(a.width*a.height*a.fileSize!=0){c+=a.width/1e3>1?b:0,c+=a.height/1e3>1?b:0;var d=a.height/a.width;c+=d>.7&&d<1.5?b:0;c+=Math.log(1e3*a.file_size/(a.width*a.height))}return c},a.prototype.prepareImages=function(){var a=this,b=this.contentMapCreator.settings.getSocialImages();if(b&&(0===this.lastSocialImageCount||b.length>this.lastSocialImageCount)){var c=_(b).filter(function(a){return"picture"===a.mediaType}).each(function(b){a.contentNormalizer.convertFromWixmpSearchResult(b),b.mediaType="image",b.score=a.scoreImage(b)}).sortByOrder("score","desc").value();this.lastSocialImageCount=b.length,this.preparedImages=c}},a.prototype.useSocialImages=function(a){return this.contentMapCreator.settings.socialImageUsagefilter&&this.contentMapCreator.settings.getSocialImages&&this.contentMapCreator.settings.socialImageUsagefilter.indexOf(a.toLowerCase())>-1?(this.prepareImages(),_.filter(this.preparedImages.slice(20),function(){return _.random(0,20)>2})):[]},a.prototype.getMediaField=function(a){var b=function(a){return"media"===a.type},c=Object.keys(a.values).find(function(c){return b(a.values[c])});return c&&a.values[c]},a.prototype.createListMediaField=function(a){return a.values.ListImage={type:core.ElementTypes.Media,subType:"image",value:[]}},a.prototype.addBackgroundMedia=function(a,b){var c=this,d=this.isListHeader(b)||this.isListFooter(b),e=this.getMediaField(a);if(!e&&d&&(e=this.createListMediaField(a)),e){var f={},g=function(a){var b=c.mediaGallery.getItemId(a);b in c.backgroundMedia?(a.usage=core.MediaUsageType.All,f[b]=!0):a.usage=core.MediaUsageType.Content};if(e.value=e.value||[],e.value.forEach(g),"Welcome"!==a.type)_.keys(this.backgroundMedia).forEach(function(a){a in f||e.value.push(c.backgroundMedia[a])});else{var h=ContentDefaults.BackgroundImages.map(function(a){return Object.assign({},a,{usage:core.MediaUsageType.Bg})});(i=e.value).push.apply(i,h)}var i}},a.prototype.initBackgroundRepository=function(){var a=this,b={id:"Welcome",ceType:"Welcome"},c=this.generateSingleContentElement(b),d=c&&c.values.WelcomeMedia;d&&d.value&&d.value.filter(function(a){return a.mediaType===core.MediaItemTypes.Image||a.mediaType===core.MediaItemTypes.Video}).map(function(a){return Object.assign({},a,{usage:core.MediaUsageType.Bg})}).forEach(function(b){return a.backgroundMedia[a.mediaGallery.getItemId(b)]=b}),ContentDefaults.BackgroundImages.map(function(a){return Object.assign({},a,{usage:core.MediaUsageType.Bg})}).forEach(function(b){return a.backgroundMedia[a.mediaGallery.getItemId(b)]=b})},a.prototype.setupFieldLabels=function(a,b){var c=this,d=b.item,e=null;"ListHeader"===b.ceType||b.id&&b.id.endsWith("ListHeader")?(d=b.header,e="header"):"ListFooter"===b.ceType||b.id&&b.id.endsWith("ListFooter")?(d=b.footer,e="footer"):b.cardinality>1&&(e="item"),_.forEach(a.values,function(b){d&&d.labels&&b.subType in d.labels?b.displayName=d.labels[b.subType]:c.flags.staticTextsWithTranslate||(b.displayName=c.nodeTitleManager.fieldLabel(b,e,a.type))})},a.prototype.getTpaMetaSiteIds=function(){if(this.flags.wixEvents||this.flags.wixVideo)return _.reduce(this.contentItemElements,function(a,b,c){return b.metasite&&(a[c]=b.metasite[0].content),a},{});var a=_(this.contentItemElements).pick(["Blog","Stores","ProGallery_Widget","Pro Gallery widget"]).reduce(function(a,b,c){return a[c]=b.metasite[0].content,a},{});return a.ProGallery_Widget=a.ProGallery_Widget||a["Pro Gallery widget"],a},a}();ContentElementGenerator.MaxInitialActiveImages=6,angular.module("siteGeneratorContentManagerInternal").service("contentElementGenerator",ContentElementGenerator);var ContentManager=function(){function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=this;this.consumerBiLogger=b,this.cmsApi=c,this.defaultsService=d,this.contentCMSFallback=e,this.contentElementGenerator=f,this.contentMapCreator=g,this.contentSuggestSections=h,this.contentModelTree=i,this.defaultSections=j,this.contentNormalizer=k,this.applicationState=l,this.storyServices=m,this.$q=n,this.wixmpServices=o,this.applicationParameters=p,this.flags=q,this.$translate=r,this.socialImageRetryCount=0,this.shouldRetrySocialImages=function(){return s.socialImageRetryCount<=a.socialImageRetryCountMax||!s.socialImages||s.socialImages.length<a.enoughSocialImages},this.mockDefaults={GeneralDescription:_.zipObject(a.mockDefaultsValues,a.mockDefaultsValues)},this.mockDefaults.GeneralDescription.title="Business Name"}return a.$inject=["consumerBiLogger","cmsApi","defaultsService","contentCMSFallback","contentElementGenerator","contentMapCreator","contentSuggestSections","contentModelTree","defaultSections","contentNormalizer","applicationState","storyServices","$q","wixmpServices","applicationParameters","flags","$translate"],a.prototype.initialize=function(a){var b=this;return this._initialized?this.initParams.industryId===a.industryId&&this.initParams.structureId===a.structureId?this._initialized.then(function(){return b.initSocialImages()}):(this._initialized.stop(),this._initialized=this.initializeInternal(a),this._initialized):(this._initialized=this.initializeInternal(a),this._initialized)},a.prototype.initializeInternal=function(a){var b=this;return this.initParams=a,utils.stoppable(this.cmsApi.load(this.initParams)).catch(function(){return b.cmsApi.load(_.clone(intro.DEFAULT_CATEGORY))}).catch(function(){return b.contentCMSFallback}).then(function(a){return b.cmsData=a}).then(function(){return b.initSocialImages()}).then(function(){b.buildContentMap(),b.buildAliasToTypeMap()})},a.prototype.isSocialImageEnabled=function(){return this.flags.preferSocialImages&&this.storyServices.story&&this.storyServices.story.privateMediaFolderId},a.prototype.initSocialImages=function(){var a=this;return this.isSocialImageEnabled()&&this.shouldRetrySocialImages()?this.wixmpServices.getSocialImages(this.storyServices.story.privateMediaFolderId,!0).then(function(){a.socialImageRetryCount+=1,a.socialImages=a.wixmpServices.socialImages&&a.wixmpServices.socialImages.data,a.socialImages&&a.consumerBiLogger.warn(BIErrorCodes.GeneralWarning,"Social Images found: "+a.socialImages.length)}):this.$q.when()},a.prototype.buildContentMap=function(){var a=this,b={structureId:this.initParams.structureId,industryId:this.initParams.industryId,contentItems:this.cmsData.contentItems,placeholders:this.cmsData.placeholders,replacements:this.contentModelTree.getValues(),defaultReplacements:this.mockDefaults,getSocialImages:function(){return a.socialImages},socialImageUsagefilter:[]};this.flags.preferSocialImages&&(b.socialImageUsagefilter="all"===this.flags.preferSocialImages?["about","inner_about","homepage_about","welcome","contact"]:["about","inner_about","homepage_about"]),this.contentMap=this.contentMapCreator.createMap(b),this.contentElementGenerator.initialize(this.contentMap)},a.prototype.buildAliasToTypeMap=function(){var a=this;return this.aliasToTypeMap={},_.forEach(this.cmsData.pages,function(b){_.forEach(b.sections,function(b){b.id&&b.id!==b.ceType&&(a.aliasToTypeMap[b.id]=b.ceType)})}),this.aliasToTypeMap},a.prototype.getAliasForType=function(a){return _.findKey(this.aliasToTypeMap,function(b){return b===a})},a.prototype.getKitIds=function(){return this.cmsData&&this.cmsData.kits},a.prototype.suggestedSections=function(a){return this.throwIfNotInitialized(),this.contentSuggestSections.suggest(this.cmsData.pages,this.defaultSections.list,a)},a.prototype.suggestedSectionsByPage=function(a){this.throwIfNotInitialized();var b=_.find(this.cmsData.pages,function(b){return b.name===a});return _.map(b.sections,function(a){return{ceType:a.ceType,id:a.id,section:a,isCurrentPage:!1,isRecommendedPage:!0,isRecommendedForSite:!1,rawSectionBrief:a}})},a.prototype.suggestedPages=function(a,b){void 0===b&&(b=!0),this.throwIfNotInitialized();var c=this.flags.staticTextsWithTranslate?this.cmsData.pages.slice(1):this.cmsData.pages,d=this.contentSuggestSections.suggestPages(c,this.defaultSections.list,a);if(b){var e=this.flags.staticTextsWithTranslate?this.$translate.instant("builder.sections.blank"):"Blank",f=this.flags.staticTextsWithTranslate?this.$translate.instant("builder.sections.blank"):"Blank";d.pageSuggestions.push({id:e,pageTitle:f,isBlank:!0,ceType:"Blank",rawSectionBrief:{}})}return d},a.prototype.prepareDrafts=function(a,b,c){var d=this;void 0===b&&(b=1),void 0===c&&(c=0);var e=this.generateRandomOffset(a);return _.range(b).map(function(b){return d.contentElementGenerator.generate(a.rawSectionBrief,c+b+e)})},a.prototype.generateRandomOffset=function(a){return this.applicationState.generateRandomOffset(a.id?a.id:a.ceType)},a.prototype.getTpaMetaSiteIds=function(){var a=this.contentElementGenerator.getTpaMetaSiteIds(),b=this.applicationParameters.tpaTypes.Stores.type,c=this.applicationParameters.tpaTypes.Blog.type;return a[b]=a[b]||"e681103e-6662-41ca-8196-f995c9f0558d",a[c]=a[c]||"b0ee2dd4-d99b-42b4-a04e-d3a80588ed27",a},a.prototype.contentOptions=function(a,b,c,d){var e=this;if(void 0===d&&(d=!1),!this.contentMap[a]||!this.contentMap[a][b])return[];if(d){return _.find(this.contentMap[a][b],function(a){return e.isTextMatch(a,c)&&e.setHasImage(a)})?_.filter(this.contentMap[a][b],function(a){return e.isTextMatch(a,c)&&e.setHasImage(a)}).map(function(b){return e.createMediaTextOption(a,b)}):[]}return _.filter(this.contentMap[a][b],function(a){return e.isTextMatch(a,c)&&!a.setItems}).map(function(a){return"string"==typeof a.content?e.contentNormalizer.normalizeText(a.content):a})},a.prototype.createMediaTextOption=function(a,b){var c=_.find(b.setItems,{field:"image"}),d=this.contentMap[a][c.field][c.index];return{text:this.contentNormalizer.normalizeText(b.content),media:this.contentNormalizer.normalizeMedia(d.content.length?d.content[0]:d.content)}},a.prototype.isTextMatch=function(a,b){return a.isFinal&&(void 0===b||-1!==a.content.indexOf(b))},a.prototype.setHasImage=function(a){return a.setItems&&!!_.find(a.setItems,{field:"image"})},a.prototype.throwIfNotInitialized=function(){if(!this.cmsData)throw"Content Manager called without proper initialization";this.initSocialImages()},a}();ContentManager.mockDefaultsValues=["title","practice1","practice3","teamMember1","teamMember3","newsItemTitle2","clientName2","eventName2","eventName3","industry2","service","typeOfTrip1","typeOfTrip3","vacationSpecial1","vacationSpecial3","newsItem1","newsItem3","customerName1","customerName3","jobTitle2","date","industry1","industry3","travelDestination1","travelDestination3","newsItemDate","companySize","practice2","yearFounded","city","teamMember2","year","openingHours"],ContentManager.enoughSocialImages=10,ContentManager.socialImageRetryCountMax=5,angular.module("siteGeneratorContentManagerInternal").service("contentManager",ContentManager);var ContentSource=function(){function a(a,b,c,d){this.contentManager=a,this.wizContentManager=b,this.wizWebsite=c,this.flags=d}return a.$inject=["contentManager","wizContentManager","wizWebsite","flags"],a.prototype.provider=function(){return this.wizWebsite.isConvertingSite()?this.wizContentManager:this.contentManager},a.prototype.suggestedSections=function(a){return this.provider().suggestedSections(a)},a.prototype.prepareDrafts=function(a,b,c){return void 0===b&&(b=1),void 0===c&&(c=0),this.provider().prepareDrafts(a,b,c)},a}();angular.module("siteGeneratorContentManagerInternal").service("contentSource",ContentSource);var Currencies={ILS:"ILS",AUD:"AUD",BRL:"BRL",GBP:"GBP",CAD:"CAD",CZK:"CZK",DKK:"DKK",EUR:"EUR",HKD:"HKD",HUF:"HUF",JPY:"JPY",MXN:"MXN",TWD:"TWD",NZD:"NZD",NOK:"NOK",PHP:"PHP",PLN:"PLN",RUB:"RUB",SGD:"SGD",SEK:"SEK",CHF:"CHF",THB:"THB",USD:"USD"},ContentModelTree=function(){function a(a,b,c){this.modelTree=a,this.storyServices=b,this.contentNormalizer=c}return a.$inject=["modelTree","storyServices","contentNormalizer"],a.prototype.isSectionInTree=function(a){var b=this.storyServices.story.selectedPage,c=this.modelTree.getPageNodeById(b),d=c&&c.children;return _.filter(d,function(b){var c=b.getContentElementType()===a.ceType||b.parentContentElementType===a.ceType,d=a.id===a.ceType||a.id===b.alias;return("Homepage_about"===a.ceType||"OpeningHours"===a.ceType||"Contact"===a.ceType||!a.id||d)&&c}).length>0},a.prototype.getPageTitleValues=function(){return _.map(this.modelTree.getPagesNodes(),function(a){return a.alias})},a.prototype.getValues=function(){var a=this,b={};return this.modelTree.traverse(function(c){var d=c.getContentElementType();return d&&(b[d]=a.getNodeValues(c)),0}),b},a.prototype.getNodeValues=function(a){var b=this,c={},d=a.getContentElement();return d&&d.values?(_.forEach(d.values,function(a,d){if(a.value){var e=b.contentNormalizer.normalizeKey(d);c[e]=a.value}}),c):c},a}();angular.module("siteGeneratorContentManagerInternal").service("contentModelTree",ContentModelTree);var ContentMapCreator=function(){function a(a,b,c){this.contentInterpolator=a,this.contentNormalizer=b,this.flags=c}return a.$inject=["contentInterpolator","contentNormalizer","flags"],a.prototype.createMap=function(a){return this.settings=a,this.initReplacements(),this.sortMapByScore(this.initMap())},a.prototype.initMap=function(){var b=this,c={};return c[a.DefaultSectionKey]={},this.settings.contentItems?(this.settings.contentItems.forEach(function(d){if(d.sectionIds.length>0&&d.sectionIds[0]!==a.DefaultSectionKey)_.forEach(d.sectionIds,function(a){a=b.contentNormalizer.normalizeSectionId(a),_.has(c,a)||(c[a]={});var e=c[a],f=b.calculateItemSignatureScore(d);b.addContent(e,d,f)});else{var e=b.calculateItemSignatureScore(d,!0),f=c[a.DefaultSectionKey];b.addContent(f,d,e)}}),c):c},a.prototype.calculateItemSignatureScore=function(a,b){void 0===b&&(b=!1);var c=a.structureIds&&a.structureIds.length>0,d=a.industryIds&&a.industryIds.length>0;return b?this.scoreDefaultContent(a):c&&d?ContentScores.scoreForFullSignature:c&&!d?ContentScores.scoreForNoIndustrySignature:!c&&d?ContentScores.scoreForNoStructureSignature:ContentScores.scoreForNoStructureAndIndustrySignature},a.prototype.scoreDefaultContent=function(a){var b=a.industryIds&&a.industryIds.length>0,c=b&&_.contains(a.industryIds,this.settings.industryId);return b?c?ContentScores.scoreForDefaultSpecificIndustry:ContentScores.scoreForDefaultIndustry:ContentScores.scoreForDefaultContent},a.prototype.getIds=function(a){return a?a.split("-"):[]},a.prototype.addContent=function(a,b,c){var d=this,e={},f=this.flags.includeIdInContentElement?this.getIds(b.id):void 0;_.forEach(b.content,function(b,g){var h=b.map(function(a,b){var e=d.contentInterpolator.interpolateSingleValue(a,d.settings.replacements,d.replacementsWithPlaceholders,d.replacementsWithDefaults);return e.score*=c,d.flags.includeIdInContentElement&&(e.id=f[b]),e}),i=a[g];e[g]=i?i.length:0,a[g]=(i||[]).concat(h)}),this.buildSets(b.sets,a,e)},a.prototype.buildSets=function(a,b,c){_.forEach(a,function(a){var d=_.map(a,function(a,b){return{field:b,index:a+c[b]}});_.forEach(d,function(a){b[a.field][a.index].setItems=d})})},a.prototype.sortMapByScore=function(a){return _.mapValues(a,function(a){return _.mapValues(a,function(a){return _.sortBy(a,function(a){return a.isFinal&&-a.score})})})},a.prototype.initReplacements=function(){this.preprocessReplacements();var a=this.createPlaceholderReplacements();this.replacementsWithPlaceholders=_.merge({},a,this.settings.replacements),this.replacementsWithDefaults=_.merge({},this.settings.defaultReplacements,a,this.settings.replacements)},a.prototype.preprocessReplacements=function(){var a=this;this.settings.replacements&&this.iterateValues(this.settings.replacements,function(b){return a.contentNormalizer.normalizeRichText(b)})},a.prototype.iterateValues=function(a,b){for(var c in a)a.hasOwnProperty(c)&&("object"==typeof a[c]?this.iterateValues(a[c],b):a[c]=b(a[c]))},a.prototype.createPlaceholderReplacements=function(){var a=this;if(!this.settings.placeholders)return{};var b={};return _.forEach(this.settings.placeholders,function(c){var d=c.structureId&&c.structureId===a.settings.structureId;(!c.structureId&&!_.has(b,c.name)||d)&&(_.set(b,c.name,c.default),_.set(b,"placeholder."+c.name,c.default),c.value&&!c.value.startsWith("self.")&&_.set(b,c.value,c.default))}),b},a}();ContentMapCreator.DefaultSectionKey="#DEFAULT#",angular.module("siteGeneratorContentManagerInternal").service("contentMapCreator",ContentMapCreator);var ContentAllocator=function(){function a(a,b){this.contentNormalizer=a,this.flags=b}return a.$inject=["contentNormalizer","flags"],a.prototype.fillDefaultValue=function(a,b,c){return(!a||0===a.length&&c)&&(a=[].concat(ContentDefaults[b])),a},a.prototype.getMediaValue=function(a,b,c,d){var e=this;void 0===c&&(c=!1),void 0===d&&(d=[]);var f=this.getMediaContent(a,b,core.MediaItemTypes.Video),g=this.getMediaContent(a,b,core.MediaItemTypes.Image),h=this.getMediaContent(a,b,core.MediaItemTypes.Shape),i=this.getMediaContent(a,b,core.MediaItemTypes.Clipart),j=this.getMediaContent(a,b,core.MediaItemTypes.ExtVideo);return f=this.fillDefaultValue(f,"bgVideo",c),g=this.fillDefaultValue(g,"images",c),h=this.fillDefaultValue(h,"shape",c),i=this.fillDefaultValue(i,"clipart",c),j=this.fillDefaultValue(j,"extVideo",c),g.concat(h).concat(i).concat(f).concat(j).filter(function(a){return!_.contains(d,a.mediaType)}).map(function(a){return e.contentNormalizer.normalizeMedia(a)})},a.prototype.getFieldValue=function(a,b){var c=a&&a.content;return"string"==typeof c&&(c=this.contentNormalizer.normalizeText(c)),b.type===core.ElementTypes.Button?{callToAction:c}:c},a.prototype.getFieldValueAndId=function(a,b){return{content:this.getFieldValue(a,b),id:a&&a.id}},a.prototype.getMediaContent=function(a,b,c){var d=this,e={},f=0;if(_.filter(a,function(a){return a.score}).forEach(function(a){var b=_.filter(a.content,function(a){return a.mediaType===c});if(b.length>0){var d=e[a.score]||[];a.score>f&&(f=a.score),e[a.score]=d.concat(b)}}),0===f)return[];var g=e[f];return _.range(0,g.length).map(function(a){var c=d.cycleIndex(b+a,g.length);return d.contentNormalizer.normalizeMedia(g[c])})},a.prototype.cycleIndex=function(a,b){return a%b},a}();angular.module("siteGeneratorContentManagerInternal").service("contentAllocator",ContentAllocator);var ContentNormalizer=function(){function a(a){this.richTextService=a}return a.$inject=["richTextService"],a.prototype.convertFromWixmpSearchResult=function(a){_.assign(a,{Link:{},Description:"",Title:"Untitled",fileName:"Untitled",mediaType:"image",relativeUri:a.id})},a.prototype.normalizeMedia=function(a){return a.mediaType===core.MediaItemTypes.Shape?a=this.normalizeShape(a):a.mediaType===core.MediaItemTypes.Video&&(a=this.normalizeVideo(a)),a.title&&(a.Title=a.title,delete a.title),_.defaults(a,{Description:"",Link:{},Title:""})},a.prototype.normalizeShape=function(a){return a.fileUrl&&(a.relativeUri=a.fileUrl),a.relativeUri=(a.relativeUri||"").replace(/\.js$/,".svg"),a.relativeUri&&!a.relativeUri.startsWith("shapes/")&&(a.relativeUri="shapes/"+a.relativeUri),a},a.prototype.normalizeVideo=function(a){return a.fileOutput||(a=this.simulateWixVideoItem(a)),!_.has(a,"thumbnailUrl")&&a.posters&&a.posters.length>0&&(a.thumbnailUrl="https://static.wixstatic.com/media/"+a.posters[0].uri+"_srz_p_100_70_75_22_0.50_1.20_0.00_jpg_srz"),a},a.prototype.simulateWixVideoItem=function(a){var b=a.fileName,c=a.width,d=a.height,e=a.duration,f=a.displayAspectRatio,g=a.videoBitrate,h=a.audioBitrate,i=a.fps,j=a.title;return{mediaType:core.MediaItemTypes.Video,fileName:b,uri:b,fileUrl:"video/"+b,title:j,fileInput:{audioBitrate:h/1e3,videoBitrate:g/1e3,height:d,width:c,fps:i,duration:e,type:"video",displayAspectRatio:f},fileOutput:{image:[{status:"READY",secure:!1,format:"jpg",url:"media/"+b+"f000.jpg",height:d,width:c,key:"poster.0"},{status:"READY",secure:!1,format:"jpg",url:"media/"+b+"f001.jpg",height:d,width:c,key:"poster.1"},{status:"READY",secure:!1,format:"jpg",url:"media/"+b+"f002.jpg",height:d,width:c,key:"poster.2"},{status:"READY",secure:!1,format:"jpg",url:"media/"+b+"f003.jpg",height:d,width:c,key:"poster.3"}],video:[{status:"READY",audioBitrate:-1,secure:!1,fps:i,format:"mp4",url:"video/"+b+"/480p/mp4/file.mp4",height:480,videoBitrate:877,tag:"High",key:"480p.mp4",duration:e,displayAspectRatio:f,quality:"480p",width:Math.round(480*c/d)},{status:"READY",audioBitrate:-1,secure:!1,fps:i,format:"webm",url:"video/"+b+"/480p/webm/file.webm",height:480,videoBitrate:1457,tag:"High",key:"480p.webm",duration:e,displayAspectRatio:f,quality:"480p",width:Math.round(480*c/d)},{status:"READY",audioBitrate:-1,secure:!1,fps:i,format:"mp4",url:"video/"+b+"/720p/mp4/file.mp4",height:720,videoBitrate:3362,tag:"HD",key:"720p.mp4",duration:e,displayAspectRatio:f,quality:"720p",width:Math.round(720*c/d)},{status:"READY",audioBitrate:-1,secure:!1,fps:i,format:"webm",url:"video/"+b+"/720p/webm/file.webm",height:720,videoBitrate:3954,tag:"HD",key:"720p.webm",duration:e,displayAspectRatio:f,quality:"720p",width:Math.round(720*c/d)},{status:"READY",audioBitrate:-1,secure:!1,fps:i,format:"mp4",url:"video/"+b+"/1080p/mp4/file.mp4",height:1080,videoBitrate:5753,tag:"HD",key:"1080p.mp4",duration:e,displayAspectRatio:f,quality:"1080p",width:Math.round(1080*c/d)},{status:"READY",audioBitrate:-1,secure:!1,fps:i,format:"webm",url:"video/"+b+"/1080p/webm/file.webm",height:1080,videoBitrate:7151,tag:"HD",key:"1080p.webm",duration:e,displayAspectRatio:f,quality:"1080p",width:Math.round(1080*c/d)}]},vendor:"bigstock&bigstock&bigstock&clipcanvas",reference:"v49780622&v493478872&v49737086&v318347",fileBaseUrl:"video/"+b,relativeUri:b,thumbnailUrl:"https://static.wixstatic.com/media/"+b+"f002.jpg/v1/fit/w_288,h_155/"+b+"f002.jpg",Title:j,Description:"",controls:0,playmode:{autoplay:!0,loop:!0},active:!0}},a.prototype.normalizeText=function(a){var b=a.replace(/^\s+|\s+$/g,"").replace(/</g,"_").replace(/>/g,"_").replace(/\{\{(\w|\s|^\.)*\}\}/g,this.normalizeToken)
;return b||"no-text"},a.prototype.normalizeRichText=function(a){if(!this.richTextService.isRichText(a))return a;var b=this.richTextService.unMarkRichText(a);return this.richTextService.resetFormatting(b)},a.prototype.normalizeKey=function(a){return-1===a.indexOf(" ")?a:a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}).replace(/\s/g,"")},a.prototype.normalizeSectionId=function(a){var b=a.indexOf("_");return-1!==b&&(a=a.substr(0,b+1)+a[b+1].toUpperCase()+a.substr(b+2)),a.trim()},a.prototype.normalizeToken=function(a){var b=a.replace("{{","").replace("}}","").trim();return-1!==b.indexOf(" ")&&(b="'"+b+"'"),b?"{{"+b+"}}":""},a}();angular.module("siteGeneratorContentManagerInternal").service("contentNormalizer",ContentNormalizer);var ContentSuggestSections=function(){function a(a,b,c,d,e){this.contentModelTree=a,this.storyServices=b,this.modelTree=c,this.flags=d,this.$translate=e}return a.$inject=["contentModelTree","storyServices","modelTree","flags","$translate"],a.prototype.suggest=function(b,c,d){var e=this;this.flags.tpaHeader&&(c=_.reject(c,function(a){return a.hideInAllSections}));var f=_.filter(c,function(a){return!a.flag||e.flags[a.flag]}),g=this.sectionListFromPageList(b).concat(this.suggestDefaults(f)),h=this.generateUniqueSuggestions(g);return d&&(h=_.filter(h,function(b){return!b.isRecommendedForSite||-1===a.blacklistedAliasesForStore.indexOf(b.rawSectionBrief.id)})),{suggestions:h,selectedIndex:_.findIndex(h,function(a){return!e.contentModelTree.isSectionInTree(a.rawSectionBrief)}),remainingSuggestedSections:_.filter(h,function(a){return!e.contentModelTree.isSectionInTree(a.rawSectionBrief)&&a.isRecommendedForPage}).length}},a.prototype.suggestPages=function(b,c,d){var e=this,f=function(a){return!!e.flags.staticTextsWithTranslate||!e.isHomePage(a)},g=_.filter(b,f).map(function(a){return{ceType:a.sections[0].ceType,id:a.sections[0].id,pageTitle:a.name,isRecommendedPage:!a.optional,isRecommendedForSite:!0,rawSectionBrief:a.sections[0]}});d&&(g=_.filter(g,function(b){return-1===a.blacklistedPageNamesForStore.indexOf(b.id)}));var h=this.contentModelTree.getPageTitleValues();return{pageSuggestions:g,selectedIndex:_.findIndex(g,function(a){return-1===h.indexOf(a.pageTitle)})}},a.prototype.suggestDefaults=function(a){return _.map(a,function(a){return{section:a,isCurrentPage:!1,isRecommendedPage:!1,isRecommendedForSite:!1}})},a.prototype.generateUniqueSuggestions=function(a){var b=this,c=a.map(function(a){var c=a.section,d=a.isCurrentPage,e=a.isRecommendedPage,f=a.isRecommendedForSite;return{ceType:c.ceType,id:c.id?c.id:b.flags.staticTextsWithTranslate?b.$translate.instant("builder.sections."+c.ceType):c.ceType,alias:c.alias,isRecommendedForPage:d,isRecommendedPage:e,isRecommendedForSite:f,isUsedAlready:b.modelTree.isTypeUsedInPage(c.id,c.ceType),rawSectionBrief:c}}),d=_.sortBy(c,function(a){return a.isRecommendedPage?0:1}),e=_.sortBy(d,function(a){return a.isRecommendedForPage?0:1});return _.uniq(e,!1,"id")},a.prototype.sectionListFromPageList=function(a){var b=this;return _.flatten(a.map(function(a){return a.sections.map(function(c){return{section:c,isCurrentPage:b.isCurrentPage(a),isRecommendedPage:!a.optional,isRecommendedForSite:!0}})}))},a.prototype.isCurrentPage=function(a){var b=this.storyServices.story&&this.storyServices.story.selectedPage;if(!b)return!1;var c=this.modelTree.getPageNodeById(b);if(!c)return!1;var d=a.name.trim().toLowerCase(),e=c.alias;return!!e&&e.trim().toLowerCase()===d},a.prototype.isHomePage=function(b){return b.name.trim().toLowerCase()===a.DefaultHomePageName},a}();ContentSuggestSections.DefaultHomePageName="home",ContentSuggestSections.blacklistedAliasesForStore=["All Products","Collections","Products","Custom Design","Customer Favorites","Featured Inventory","Gift Cards","Gift Certificates","Gift Certificates","Gift Shop","Home & Personal","Inventory","Merchandise","My Products","New Collection","New Releases","Our Collection","Our Inventory","Packing Supplies","Parts","Shop","Wedding Arrangements","Special Offers","Specialty Items","Used Products","Used Collection","What we buy","Our Products"],ContentSuggestSections.blacklistedPageNamesForStore=["Products","Our Products","Special Offers","Shop","Merchandise","Store","Packing Supplies","Gift Shop","Mobile App","Our Inventory","Inventory","My Products","Products By Request","Custom Design","Gift Cards","Gift Certificates","Home & Personal","Books","Parts","Specialty Items"],angular.module("siteGeneratorContentManagerInternal").service("contentSuggestSections",ContentSuggestSections);var NodeTitleManager=function(){function a(a,b,c,d,e){this.nodeFetcher=a,this.sitePartTypes=b,this.richTextService=c,this.$translate=d,this.flags=e}return a.$inject=["nodeFetcher","sitePartTypes","richTextService","$translate","flags"],a.prototype.getNodeTitleValue=function(a){var b="Testimonial"===a.getContentElementType()?core.ElementSubTypes.Subtitle:core.ElementSubTypes.Title,c=_.findKey(a.contentElement.values,function(a){return a.subType===b});return c?this.humanize(a.contentElement.values[c].value):null},a.prototype.isListHeaderFooter=function(a){return a.isListItem&&("ListHeader"===a.contentElement.type||"ListFooter"===a.contentElement.type)},a.prototype.nodeTitle=function(a){if(this.flags.staticTextsWithTranslate)return a.contentElement?this.resolveNodeTitle(a):a.alias||this.$translate.instant("builder.sections."+a.getContentElementType());var b=a.contentElement?this.resolveNodeTitle(a):a.alias||a.getContentElementType();return this.humanize(b)},a.prototype.resolveNodeTitle=function(a){var b=this.nodeFetcher.getNodeSitePart(a),c=a.contentElement.type;return a.alias?this.isListHeaderFooter(a)?a.alias+c:a.alias:b===this.sitePartTypes.HEADER?this.$translate.instant("builder.sections.header"):b===this.sitePartTypes.FOOTER?this.$translate.instant("builder.sections.footer"):"Homepage_about"===c||"Inner_about"===c?this.$translate.instant("builder.sections.About"):this.flags.staticTextsWithTranslate?this.$translate.instant("builder.sections."+c):c},a.prototype.fieldLabel=function(a,b,c){return a.displayName?a.displayName:a.subType===core.ElementSubTypes.Image&&a.type===core.ElementTypes.Media?this.$translate.instant("builder.field-editor.single.media"):this.labelBySubtype(a.subType,c,b)},a.prototype.labelBySubtype=function(a,b,c){if(void 0===b&&(b=null),void 0===c&&(c=null),a){var d="item"===c,e=this.labelFieldKey(a,d,b),f=this.$translate.instant(e);switch(c){case"header":return this.$translate.instant("builder.field-editor.list-header",{text:f});case"footer":return this.$translate.instant("builder.field-editor.list-footer",{text:f});case"item":return a===core.ElementSubTypes.Button?f:this.$translate.instant("builder.field-editor.list-item",{text:f})}return f}},a.prototype.labelFieldKey=function(a,b,c){var d="Contact"===c,e="GeneralDescription"===c;if(this.flags.staticTextsWithTranslate)switch(a){case core.ElementSubTypes.Title:return e?"builder.field-editor.single.business-name":b?"builder.field-editor.list.item.title":"builder.field-editor.single.title";case core.ElementSubTypes.Subtitle:return e?"builder.field-editor.single.tagline":"builder.field-editor.single.subtitle";case core.ElementSubTypes.Copyright:return"builder.field-editor.single.copyright-message";case"menu":return"builder.field-editor.single.menu";case core.ElementSubTypes.Email:return"builder.field-editor.single.site-email";case core.ElementSubTypes.LongText:return b||d?"builder.field-editor.list.item.long":"builder.field-editor.single.long";case core.ElementSubTypes.Form:return"builder.field-editor.single.form";case core.ElementSubTypes.Button:return"builder.field-editor.single.button";case core.ElementSubTypes.Address:return"builder.field-editor.single.address";case core.ElementSubTypes.Phone:return"builder.field-editor.single.phone-number";case core.ElementSubTypes.Fax:return"builder.field-editor.single.fax";case core.ElementSubTypes.Map:return"builder.field-editor.single.map";case core.ElementSubTypes.Social:return"builder.field-editor.social-title";default:return a}else switch(a){case core.ElementSubTypes.Title:return b?"builder.field-editor.list.item.title":"builder.field-editor.single.title";case core.ElementSubTypes.Subtitle:return"builder.field-editor.single.subtitle";case core.ElementSubTypes.LongText:return b||d?"builder.field-editor.list.item.long":"builder.field-editor.single.long";case core.ElementSubTypes.Form:return"builder.field-editor.single.form";case core.ElementSubTypes.Button:return"builder.field-editor.single.button";default:return a}},a.prototype.humanize=function(a){if(!a)return"";this.richTextService.isRichText(a)&&(a=this.richTextService.unMarkRichText(a),a=this.richTextService.resetFormatting(a));var b=a.replace(/_/g,"").replace(/([A-Z])/g," $1").trim();return 0===b.length?"":b[0].toUpperCase()+b.substring(1).replace(/([a-z])(?=[A-Z])/g,"$1 ")},a}();angular.module("siteGeneratorContentManagerInternal").service("nodeTitleManager",NodeTitleManager);var WizContentManager=function(){function a(a,b,c,d,e,f,g,h,i,j){this.$q=a,this.contentManager=b,this.defaultSections=c,this.ContentElement=d,this.richTextService=e,this.richTextLinks=f,this.miscUtils=g,this.wixWizDataManager=h,this.wizWebsite=i,this.siteConverterConf=j,this.numOfSectionsAdded=0,this.mediaUrls=[],this.folderId=[],this.contactSuggestion={ceType:"Contact",id:"Contact",isRecommendedForPage:!0,isRecommendedForSite:!0,isUsedAlready:!1,rawSectionBrief:{id:"Contact",ceType:"Contact",cardinality:1,header:{prefix:"",hidden:[],labels:{}},footer:{prefix:"",hidden:[],labels:{}},item:{prefix:"",hidden:[],labels:{longText:"Description "}},dbId:"084f0ea5f7db69db5469a903",syncWithBooking:"none",preferredMedia:null}},this.contactPage={ceType:"Contact",id:"Contact",pageTitle:"Contact",isRecommendedPage:!0,isRecommendedForSite:!0,rawSectionBrief:{id:"Contact",ceType:"Contact",cardinality:1,header:{prefix:"",hidden:[],labels:{}},footer:{prefix:"",hidden:[],labels:{}},item:{prefix:"",hidden:[],labels:{}},syncWithBooking:"none",preferredMedia:null}}}return a.$inject=["$q","contentManager","defaultSections","ContentElement","richTextService","richTextLinks","miscUtils","wixWizDataManager","wizWebsite","siteConverterConf"],a.prototype.resetState=function(){this.numOfSectionsAdded=0},a.prototype.suggestedSections=function(a){var b=this;return this.resetState(),{suggestions:this.getSectionsFromWizPage(this.getWizMainPage()).map(function(a){return b.extractSectionSuggestionFromWizBlock(a)}).concat(this.contactSuggestion).filter(_.isObject),selectedIndex:0,remainingSuggestedSections:null}},a.prototype.prepareDrafts=function(a,b,c){var d=this.contentManager.prepareDrafts(a,b,c);return a.data?[this.generateContentElement(a,d[0])]:d},a.prototype.uploadMedia=function(a){var b=this;return this.mediaItemsMap=this.generateMediaItemsMap(a),this.mediaUrls=Object.keys(this.mediaItemsMap),this.mediaUrls.length?this.wixWizDataManager.uploadMediaToFolder(this.mediaUrls).then(function(a){b.folderId=a}):this.$q.when()},a.prototype.prepareMedia=function(){var a=this;if(this.folderId){var b=this.mediaUrls;return this.wixWizDataManager.getMediasFromFolder(this.folderId,b).then(function(c){return c=c.map(function(b){return a.miscUtils.mediaGalleryAdapter.convertToMediaObject(b)}),c.forEach(function(c,d){c&&(c.Title=a.mediaItemsMap[b[d]].title)}),a.preparedMedia=a.miscUtils.keyBy(c,"sourceUrl"),c})}return this.$q.when()},a.prototype.generateMediaItemsMap=function(a){var b=_.flattenDeep(this.miscUtils.deepGet(a,"media")).filter(function(a){return a.src}),c=b.map(function(a){return a.src});return _.zipObject(c,b)},a.prototype.isListHeader=function(a){return a.id&&a.id.endsWith("Header")},a.prototype.isListFooter=function(a){return a.id&&a.id.endsWith("Footer")},a.prototype.getAdjustedCEType=function(a){return this.isListHeader(a)?"ListHeader":this.isListFooter(a)?"ListFooter":a.ceType.trim()},a.prototype.generateContentElement=function(a,b){return 1===a.rawSectionBrief.cardinality?this.generateSingleContentElement(a,a.data.contents,b):this.generateListContentElement(a,b)},a.prototype.generateSingleContentElement=function(a,b,c,d,e,f,g){void 0===d&&(d={}),void 0===e&&(e={self:d}),void 0===f&&(f=!1),void 0===g&&(g="");var h=this.getAdjustedCEType(a.rawSectionBrief),i=new this.ContentElement(h,null);return i.setArgsMatchingPolicy({}),this.populateValuesInContentElement(i,b,c),i},a.prototype.populateValuesInContentElement=function(a,b,c){var d=this;void 0===b&&(b={}),_.forEach(a.values,function(e,f){var g=null;switch(e.subType){case core.ElementSubTypes.Image:g=d.getMediaFromWizMediaArray(b.media,ob.deepClone(c.values[f].value));break;case core.ElementSubTypes.LongText:g=b.rawParagraph?d.prepareRichText(b.rawParagraph):b.paragraph||"";break;case core.ElementSubTypes.Subtitle:g=b.rawSubtitle?d.prepareRichText(b.rawSubtitle):b.subtitle||"";break;case core.ElementSubTypes.Title:g=b.rawTitle?d.prepareRichText(b.rawTitle):b.title||"";break;case core.ElementSubTypes.Button:g=d.getButtonValueFromWizLink(b.button)}if(null!==g){a.values[f].value=g;var h=a.getArgsMatchingPolicy();h[f]=h[f]||"button"!==e.subType&&!!g||!!g.callToAction}else e.subType===core.ElementSubTypes.Image&&(a.values[f].value=ob.deepClone(c.values[f].value))})},a.prototype.prepareRichText=function(a){return this.richTextService.markRichText(this.richTextService.convertToValidHtml(this.removeLinks(a)))},a.prototype.removeLinks=function(a){var b="(?:(?:\\s+[-_A-Za-z0-9]+(?:\\s*=\\s*(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>\\s]+))?)*)",c=new RegExp("<a\\s*"+b+"(href\\s*=\\s*('|\")(?:(?!\\2).)+\\2)?"+b+">(.*?)</a>","gim");return a.replace(c,function(a,b,c,d){return d})},a.prototype.generateListContentElement=function(a,b){var c=this,d={self:{items:_.range(0,a.rawSectionBrief.cardinality).map(function(a){return{}}),header:{},footer:{}}},e={type:a.ceType,items:_.range(0,a.rawSectionBrief.cardinality).map(function(e){return c.generateSingleContentElement(a,a.data.contents.list[e],b.items[e%b.items.length],d.self.items[e],{self:d.self.items[e]},!0,a.ceType)}),header:this.generateSingleContentElement(this.createListSection(a,!0),a.data.contents.header,b.header,d.self.header,d,!1,a.ceType),footer:this.generateSingleContentElement(this.createListSection(a,!1),a.data.contents.footer,b.footer,d.self.footer,d,!1,a.ceType)},f=e.items[0],g=f.getArgsMatchingPolicy();return _.forEach(f.values,function(a,b){g[b]=_.some(e.items,function(a){return a.getArgsMatchingPolicy()[b]})}),_.forEach(e.items,function(a){a.setArgsMatchingPolicy(g)}),e},a.prototype.createListSection=function(a,b){var c=angular.copy(a);return b?(c.id+="_ListHeader",c.rawSectionBrief.id+="_ListHeader",c.rawSectionBrief.item=a.rawSectionBrief.header):(c.id+="_ListFooter",c.rawSectionBrief.id+="_ListFooter",c.rawSectionBrief.item=a.rawSectionBrief.footer),c},a.prototype.getURLFromWizLink=function(a){return a.url},a.prototype.getMediaFromWizMedia=function(a){return this.preparedMedia&&this.preparedMedia[a.src]?this.preparedMedia[a.src]:"video"===a.type?{Description:"",Title:"",Link:{},height:a.height,width:a.width,mediaType:"extVideo",videoUrl:a.src}:a.relativeUri?a:{Description:"",Title:"",fileName:"",height:200,mediaType:a.type,platform:"wizMedia",relativeUri:"//static.wixstatic.com/shapes/92535d40ff564d3a9f61477bcdceb206.svg",width:200}},a.prototype.getMediaFromWizMediaArray=function(a,b){var c=this;if(!a)return"";var d=a.sort(function(a,b){return b.background&&!a.background?1:!b.background&&a.background?-1:0}).map(function(a){return c.getMediaFromWizMedia(a)}).filter(function(a){return a});if(!d.length)return"";var e=_.groupBy(b,function(a){return a.mediaType}),f=_.groupBy(d,function(a){return a.mediaType}),g=[];return _.each(e,function(a,b){g.push.apply(g,f[b]||e[b])}),g},a.prototype.getButtonValueFromWizLink=function(a){return a?{callToAction:a.text||"",targetUrl:this.getURLFromWizLink(a),isPageRef:!1}:{callToAction:"",media:[],targetUrl:""}},a.prototype.getSectionsFromWizPage=function(a){return a.sections.filter(function(a){return"single"===a.type||"list"===a.type})},a.prototype.extractSectionSuggestionFromWizBlock=function(a){var b,c;switch(a.type){case"single":b=this.getSingleCEType(),c=1,this.numOfSectionsAdded++;break;case"list":var d=a.list.map?Math.min.apply(Math,a.list.map(function(a){return a.media?Math.min.apply(Math,a.media.map(function(a){return Math.min(a.realWidth,a.width)})):-1})):-1;b=this.getListCEType(d),c=a.list.length,this.numOfSectionsAdded++}var e=this.defaultSections.list.filter(function(a){return a.ceType===b})[0].id;return{ceType:b,id:e,isRecommendedForPage:!0,rawSectionBrief:{id:e,ceType:b,cardinality:c,item:{prefix:"",hidden:[[]],labels:{}},header:{prefix:"",hidden:[[]],labels:{}},footer:{prefix:"",hidden:[[]],labels:{}}},origin:"wiz",data:{type:"wizBlock",contents:a}}},a.prototype.getSingleCEType=function(){return 0===this.numOfSectionsAdded?"Welcome":"About"},a.prototype.getListCEType=function(a){return a>0&&a<this.siteConverterConf.SMALL_IMAGE_WIDTH_HIGH_BOUNDARY?"Client":"Service"},a.prototype.getWizMainPage=function(){return _.first(this.getWizSite().pages.filter(function(a){return"/"===a.path}))},a.prototype.getWizSite=function(){return this.wizWebsite.getSite()},a}();angular.module("siteGeneratorContentManagerInternal").service("wizContentManager",WizContentManager);var CatalogItemSorter=function(){function a(){this.sortOrder=["text","square","round6","round"]}return a.prototype.sort=function(a,b){var c=this.getPrefixIndex(a),d=this.getPrefixIndex(b);return c!==d?c-d:a>b?1:-1},a.prototype.getPrefixIndex=function(a){var b;for(b=0;b<this.sortOrder.length&&!a.startsWith(this.sortOrder[b]);b++);return b},a}();angular.module("siteGeneratorEditorInternal").service("catalogItemSorter",CatalogItemSorter);var CatalogPreviewGenerator=function(){function a(a){this.visualValidation=a}return a.$inject=["visualValidation"],a.prototype.generate=function(a,b,c){var d=this.visualValidation.getCatalogValidators(a),e=d[b],f=angular.element(e.div).clone(),g=angular.element(this.visualValidation.innerChild(f[0]));g.html(_.htmlEncode(c));var h={"box-sizing":"border-box",position:"static","text-align":"center","line-height":"32px"};return f.css(Object.assign({height:"32px",width:"90px"},h)),g.css(Object.assign({"font-size":"10px",width:"auto",display:"block"},h)),f},a}();angular.module("siteGeneratorEditorInternal").service("catalogPreviewGenerator",CatalogPreviewGenerator);var CatalogStylesManager=function(){function a(a,b,c,d){var e=this;this.onstageActionsManager=a,this.ONSTAGE_EVENTS=b,this.nodeFetcher=c,this.cabbie=d,this.onstageActionKeyToCatalogType={button:"buttons","Contact form email":"contactForms"},this.onstageActionsManager.subscribe(this.ONSTAGE_EVENTS.EDIT_COMPONENT_STYLE,function(a){var b=a.key,c=e.onstageActionKeyToCatalogType[b],d=e.nodeFetcher.getCurrentActiveNode();e.cabbie.show({target:'[data-overlay-id="'+d.id+"-"+b+'"]',element:"catalog-styles-dialog",attributes:{catalogType:c,text:_.capitalize(b)},hideAttribute:"onSelect",position:{positionX:builders.AssistantPositionX.Left,positionY:builders.AssistantPositionY.Center}})})}return a.$inject=["onstageActionsManager","ONSTAGE_EVENTS","nodeFetcher","cabbie"],a}();angular.module("siteGeneratorEditorInternal").service("catalogStylesManager",CatalogStylesManager);var ConsumerMediaUtils=function(){function a(a,b,c,d,e,f){this.mediaOverrideManager=a,this.mediaGalleryAdapter=b,this.mediaOrganizeAdapter=c,this.consumerBiLogger=d,this.$translate=e,this.videoProvidersUtils=f}return a.$inject=["mediaOverrideManager","mediaGalleryAdapter","mediaOrganizeAdapter","consumerBiLogger","$translate","videoProvidersUtils"],a.prototype.getChangeMediaMethod=function(a,b){var c=this.mediaOverrideManager.getAllowedMediaOverride(a)===PresetMediaTypes.COAST2COAST;switch(b){case cc.MediaPreviewType.SingleImage:return this.mediaGalleryAdapter.selectImage.bind(this.mediaGalleryAdapter,c);case cc.MediaPreviewType.MultipleImages:return this.mediaOrganizeAdapter.selectGallery.bind(this.mediaOrganizeAdapter);case cc.MediaPreviewType.ExtVideo:return this.mediaOrganizeAdapter.selectExtVideo.bind(this.mediaOrganizeAdapter);case cc.MediaPreviewType.Video:return this.mediaGalleryAdapter.selectVideo.bind(this.mediaGalleryAdapter);case cc.MediaPreviewType.Shape:return this.mediaGalleryAdapter.selectShape.bind(this.mediaGalleryAdapter);case cc.MediaPreviewType.Clipart:return this.mediaGalleryAdapter.selectClipart.bind(this.mediaGalleryAdapter)}},a.prototype.biSwitchMediaTypeClick=function(a,b){this.consumerBiLogger.contentEditor.switchMediaTypeClick(a.getId(),a.getSpecificContentElementType(),a.alias,this.mediaTypeToString(b))},a.prototype.biReplaceMediaClick=function(a,b){this.consumerBiLogger.contentEditor.clickOnReplaceOrganizeMedia(a.getId(),a.getSpecificContentElementType(),a.alias,this.mediaTypeToString(b))},a.prototype.biCheckIfReplaceLogoClick=function(a,b){"Header"===a.getSpecificContentElementType()&&this.consumerBiLogger.intro.clickOnReplaceLogoIntroWelcometourBuilder("no-tour",b)},a.prototype.biReplaceMediaLoaded=function(a,b,c){this.consumerBiLogger.contentEditor.replaceMediaWindowIsLoaded(a.getId(),a.getSpecificContentElementType(),a.alias,this.mediaTypeToString(b),this.mediaTypeToGalleryType(b),c,null)},a.prototype.biReplaceMediaClosed=function(a,b,c){this.consumerBiLogger.contentEditor.closeMediaWindow(a.getId(),a.getContentElementType(),a.alias,this.mediaTypeToString(b),this.mediaTypeToGalleryType(b),c)},a.prototype.biReplaceMediaApproved=function(a,b,c,d){this.consumerBiLogger.contentEditor.approveChangesInTheMediaWindow(d,a.getId(),a.getContentElementType(),a.alias,this.mediaTypeToString(b),this.mediaTypeToGalleryType(b),c)},a.prototype.mediaTypeToString=function(a){switch(a){case cc.MediaPreviewType.SingleImage:case cc.MediaPreviewType.MultipleImages:return"image";case cc.MediaPreviewType.ExtVideo:return"extVideo";case cc.MediaPreviewType.Shape:return"shape";case cc.MediaPreviewType.Clipart:return"clipart";case cc.MediaPreviewType.Video:return"bgVideo";default:return"unknown_type"}},a.prototype.mediaTypeToGalleryType=function(a){switch(a){case cc.MediaPreviewType.SingleImage:case cc.MediaPreviewType.Shape:case cc.MediaPreviewType.Clipart:case cc.MediaPreviewType.Video:return"single item";case cc.MediaPreviewType.MultipleImages:return"gallery";case cc.MediaPreviewType.ExtVideo:return"external video"}return null},a.prototype.mediaTypeToLabel=function(a){switch(a){case cc.MediaPreviewType.SingleImage:return this.$translate.instant("editor.media-settings.types.image");case cc.MediaPreviewType.Shape:case cc.MediaPreviewType.Clipart:return this.$translate.instant("editor.media-settings.types.shape");case cc.MediaPreviewType.ExtVideo:case cc.MediaPreviewType.Video:return this.$translate.instant("editor.media-settings.types.video");case cc.MediaPreviewType.MultipleImages:return this.$translate.instant("editor.media-settings.types.gallery")}},a.prototype.isVideo=function(a){return a===cc.MediaPreviewType.Video||a===cc.MediaPreviewType.ExtVideo||a===core.MediaItemTypes.ExtVideo||a===core.MediaItemTypes.Video},a.prototype.addExtVideoThumbnail=function(a){if(a.mediaType===core.MediaItemTypes.ExtVideo&&!a.thumbnailUrl){var b=this.videoProvidersUtils.getVideoThumbnailUrl(a.videoUrl,a);b.then?b.then(function(b){a.thumbnailUrl=b}):a.thumbnailUrl=b}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("consumerMediaUtils",ConsumerMediaUtils);var ContentElementFieldManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=this;this.$rootScope=a,this.modelTree=b,this.applicationState=c,this.contentManager=d,this.consumerBiLogger=e,this.mediaOverrideManager=f,this.createGuid=g,this.flags=h,this.nodeFetcher=i,this.$timeout=j,this.onstageActionsManager=k,this.ONSTAGE_EVENTS=l,this.editorEventManager=m,this.nodeEditorManager=n,this.linkEditorCAB=o,this.fieldEditorConfiguration=p,this.pubSub=q,this.SmartAssistManager=r,this.$injector=s,this.modelTreeHelpers=t,this.smartAssistHelpers=u,this.sitePartTypes=v,this.$translate=w,this.referenceFieldsMap={},this.nodeFieldsMap={},this.resetFocus=function(a){var b=a||x.nodeFetcher.getCorrectNodeId(x.applicationState.getContentFocus()),c=x.nodeFetcher.getNode(b);if(c){var d=c.node,e=x.extractFieldsFromNode(d),f=e.find(function(a){return a.focused});f&&(f.focused=null)}},m.nodeChangedOnFieldChanged(this.createEditEvent.bind(this)),m.onNodeChanged(function(a){x.nodeEditorManager.updateViewer(a)}),this.resetMaps(),k.subscribe(this.ONSTAGE_EVENTS.EDIT_CONTENT,function(a){var b=x.getFields(a.contentElement,x.nodeFetcher.getCurrentActiveNode());b.forEach(function(a){return a.focused=!1}),x.$timeout(function(){b.forEach(function(b){return b.focused=b===a}),q.fire(PubSub.events.BLINK_FIELD,a)})}),k.subscribe(this.ONSTAGE_EVENTS.HIDE,function(a){x.toggleField(a,x.nodeFetcher.getCurrentNode(),BIOrigins.OSI)}),k.subscribe(this.ONSTAGE_EVENTS.LINK_TO,function(a){x.onLinkItemEdit(a,x.nodeFetcher.getCurrentActiveNode(),BIOrigins.OSI)}),this.flags.sectionTextSplitParagraph&&k.subscribe(this.ONSTAGE_EVENTS.TOGGLE_PARAGRAPH_COLUMNS,function(a){m.fieldChanged(a,!0,IEditEventType.ParagraphColumnsToggle,BIOrigins.OSI)}),this.flags.mapColoration&&k.subscribe(this.ONSTAGE_EVENTS.SET_MAP_STYLE,function(a){m.fieldChanged(a,!1,IEditEventType.SetMapStyle,BIOrigins.OSI,a.actionData)}),q.subscribe(PubSub.events.SWITCH_MODE,this.resetMaps.bind(this)),q.subscribe(PubSub.events.NEW_STATE_STORY_WAS_SET,this.resetMaps.bind(this))}return a.$inject=["$rootScope","modelTree","applicationState","contentManager","consumerBiLogger","mediaOverrideManager","createGuid","flags","nodeFetcher","$timeout","onstageActionsManager","ONSTAGE_EVENTS","editorEventManager","nodeEditorManager","linkEditorCAB","fieldEditorConfiguration","pubSub","SmartAssistManager","$injector","modelTreeHelpers","smartAssistHelpers","sitePartTypes","$translate"],a.prototype.resetMaps=function(){this.referenceFieldsMap={},this.nodeFieldsMap={}},a.prototype.extractFieldsFromNode=function(a){var b=this;return(a.isList()?a.children:[a]).reduce(function(a,c){return a.concat(b.getFields(c.contentElement,c))},[])},a.prototype.getFields=function(a,b){return this.getNodeFields(a,b).concat(this.getReferencedFields(a,b))},a.prototype.onLinkItemEdit=function(a,b,c){var d=this,e={linkDetails:a.data.value,node:b,biSource:"button"};return this.linkEditorCAB.show(e).then(function(e){a.data.value=e,d.editorEventManager.fieldChanged(a,!1,IEditEventType.ValueChange,c),a.data.linkAsILink=d.fieldEditorConfiguration.getILink(a.data),d.flags.smartAssist&&d.pubSub.fire(PubSub.events.LINK_OF_FIELD_UPDATED,b)})},a.prototype.toggleField=function(a,b,c){var d=!a.active;this.consumerBiLogger.contentEditor.clickOnHideUnhideComponent(b.getId(),b.getSpecificContentElementType(),b.alias,a.key,a.data.subType,d?"unhide":"hide",c),a.active=d,this.editorEventManager.fieldChanged(a,!0,IEditEventType.VisibilityChange,c),this.flags.smartAssist&&this.pubSub.fire(PubSub.events.FIELD_TOGGLED,{field:a,node:b})},a.prototype.createEditEvent=function(a){var b=a.contentElementField.contentElement,c=this.nodeFetcher.getCurrentNode(),d=this.nodeFetcher.getNodeByContentElement(c,b),e=this.getReferencedFields(d.contentElement,d),f=e&&_.findIndex(e,{key:a.key});return _.assign(a,{node:d,parent:null,isReferencedField:e&&-1!==f})},a.prototype.defineVisibleProperty=function(a,b,c,d){this.applicationState.isInDesktopEditMode()?c.visible=!0:c.visible=d?this.isReferencedFieldActive(a,b):this.isFieldActive(a,b)},a.prototype.defineActiveProperty=function(a,b,c,d){var e=this;this.applicationState.isInMobileEditMode()?Object.defineProperty(d,"active",{get:function(){return!e.isFieldHiddenMobile(b,c)},set:function(a){b.getMobileArgsPolicy()[c]=!a},enumerable:!0,configurable:!0}):Object.defineProperty(d,"active",{get:function(){return e.isFieldActive(b,c)},set:function(a){b.getArgsMatchingPolicy()[c]=a,e.flags.mobileEditor&&(a||e.makeSureMobileHasAtLeastOneVisibleField(b,a))},enumerable:!0,configurable:!0})},a.prototype.makeSureMobileHasAtLeastOneVisibleField=function(a,b){var c=a.getArgsMatchingPolicy();if(!a.calculateWantedArgs(!0,!0).length){var d=a.getMobileArgsPolicy();if(!this.exposeMobileHiddenField(d,c)){var e=a.getReferenceFields(),f=a.getMobileReferenceFields();this.exposeMobileHiddenField(f,e)}}},a.prototype.exposeMobileHiddenField=function(a,b){return _.some(a,function(c,d){if(b[d]&&a[d])return a[d]=!1,!0})},a.prototype.defineActiveReferenceProperty=function(a,b,c,d){var e=this;this.applicationState.isInMobileEditMode()?Object.defineProperty(d,"active",{get:function(){return!e.isReferencedFieldHiddenMobile(b,c)},set:function(a){b.getMobileReferenceFields()[c]=!a}}):Object.defineProperty(d,"active",{get:function(){return e.isReferencedFieldActive(b,c)},set:function(a){b.getReferenceFields()[c]=a,e.flags.mobileEditor&&(a||e.makeSureMobileHasAtLeastOneVisibleField(b,a))}})},a.prototype.getNodeAndReferencedFields=function(a,b){return this.getNodeFields(a,b).concat(this.getReferencedFields(a,b))},a.prototype.getNodeFields=function(a,b,c){if(void 0===c&&(c=!0),!a||!a.values)return[];if(this.flags.mobileEditor&&!b)return[];var d;return _.isUndefined(a.id)&&(a.id=this.createGuid()),this.nodeFieldsMap[a.id]||(d=this.generateNodeFields(a,b,c).sort(function(b,c){return a.sortFields(b.key)-a.sortFields(c.key)}),this.nodeFieldsMap[a.id]=d),this.nodeFieldsMap[a.id]},a.prototype.generateNodeFields=function(a,b,c){var d=this;void 0===c&&(c=!0);var e=this.getSupportedMediaType(b),f=b&&b.alias,g=this.getRelevantFields(a,b);return _.map(g,function(g,h){var i=b&&b.getContentElementType?b.getContentElementType():a.type,j=c?d.calculateSuggestedContent(f||i,i,g.subType,e):[];d.flags.staticTextsWithTranslate||d.overrideFieldLabel(i,g);var k={key:h,data:g,contentElement:a,suggestedContent:j};return d.defineActiveProperty(b,a,h,k),d.defineVisibleProperty(a,h,k,!1),k})},a.prototype.getReferencedFields=function(a,b){if(!a||!a.type)return[];if(this.flags.mobileEditor&&!b)return[];var c=[];return _.isUndefined(a.id)&&(a.id=this.createGuid()),this.referenceFieldsMap[a.id]||(c=this.generateReferenceFields(a,b),this.referenceFieldsMap[a.id]=c),this.referenceFieldsMap[a.id]},a.prototype.generateReferenceFields=function(a,b){var c=this,d=[],e=this.modelTree.getAllVisibleContentElements(),f=this.getContentElementReferencedFields(a,b);return _.keys(f).forEach(function(g){var h=_.find(e,{type:g});if(h){var i=_.map(f[g],function(d){var e=g+"."+d,f=h.values[d];if(f){var i={key:e,data:f,contentElement:a};return c.defineVisibleProperty(a,e,i,!0),c.flags.staticTextsWithTranslate||c.overrideFieldLabel(g,f),c.defineActiveReferenceProperty(b,a,e,i),i}});d.push.apply(d,i)}}),d},a.prototype.getRelevantFields=function(a,b){var c=[];return"GeneralDescription"===a.type?c=(this.flags.mobileEditor?this.isFooter(b):this.applicationState.isFooterContent())?["BusinessTagline","Logo","Menu"]:["CopyrightMessage","fax","address for display"]:"Testimonial"===a.type?c=["CustomerPosition"]:"Contact"===a.type?c=["Contact form title"]:"ListFooter"===a.type&&c.push("ListImage"),this.applicationState.isInMobileEditMode()&&c.push("Menu"),_.omit(a.values,c)},a.prototype.overrideFieldLabel=function(a,b){if("GeneralDescription"===a)switch(b.subType){case core.ElementSubTypes.Title:b.displayName="Business Name";break;case core.ElementSubTypes.Subtitle:b.displayName="Tagline";break;case core.ElementSubTypes.Copyright:b.displayName="Copyright Message";break;case"menu":b.displayName="Menu";break;case core.ElementSubTypes.Email:b.displayName="Site Email"}else"Contact"===a&&b.subType===core.ElementSubTypes.Phone&&(b.displayName="Phone Number")},a.prototype.getSupportedMediaType=function(a){if(null===a)return"";var b=this.mediaOverrideManager.getAllowedMediaOverride(a);return b===PresetMediaTypes.SHAPE?"shape":b===PresetMediaTypes.IMAGE?"image":null},a.prototype.getHeaderReferencedFields=function(){return{Contact:["phone number"],
Social:["SocialButtons"]}},a.prototype.getFooterReferencedFields=function(){return{Contact:["phone number","fax","address for display"],Social:["SocialButtons"]}},a.prototype.getContactReferencedFields=function(){return{Social:["SocialButtons"]}},a.prototype.getContentElementReferencedFields=function(a,b){return"Contact"===a.type?this.getContactReferencedFields():"GeneralDescription"===a.type?(this.flags.mobileEditor?this.isFooter(b):this.applicationState.isFooterContent())?this.getFooterReferencedFields():this.getHeaderReferencedFields():{}},a.prototype.isFooter=function(a){return"footer"===a.containerPageId},a.prototype.isFieldActive=function(a,b){return null===a.getArgsMatchingPolicy||!!a.getArgsMatchingPolicy()[b]},a.prototype.isFieldHiddenMobile=function(a,b){return null!==a.getMobileArgsPolicy&&a.getMobileArgsPolicy()[b]},a.prototype.isReferencedFieldActive=function(a,b){var c=a.getReferenceFields();return null!==c&&b in c&&c[b]},a.prototype.isReferencedFieldHiddenMobile=function(a,b){var c=a.getMobileReferenceFields();return null!==c&&b in c&&c[b]},a.prototype.calculateSuggestedContent=function(a,b,c,d){if("Service"!==b&&"FAQ"!==b&&"Feature"!==b&&"Client"!==b||c!==core.ElementSubTypes.Title)return[];var e="Feature"===b||"Client"===b,f=this.contentManager.contentOptions(a,c,"",e),g=this.enforceSupportedMediaType(f,d);if(0===g.options.length&&a!==b){var h=this.contentManager.contentOptions(b,c,"",e);return this.enforceSupportedMediaType(h,d).options}return g.options},a.prototype.enforceSupportedMediaType=function(a,b){if(0===a.length)return{options:[],hasMedia:!1};var c=!1;return _.has(a[0],"media")&&(a=_.map(a,function(a){return a.media.mediaType===b?a:a.text}),c=!0),{options:a,hasMedia:c}},a.prototype.isEveryHeaderFieldHidden=function(a){if(a.sitePart===this.sitePartTypes.HEADER){var b=a.node;return 0===this.getNodeAndReferencedFields(b.contentElement,b).filter(function(a){return a.visible}).length}},a}();angular.module("siteGeneratorEditorInternal").service("contentElementFieldManager",ContentElementFieldManager);var LinkDetailsManager=function(){function a(a,b,c,d,e,f,g,h,i,j){this.$q=a,this.$rootScope=b,this.$compile=c,this.$log=d,this.modelTree=e,this.pagesManager=f,this.$translate=g,this.validation=h,this.flags=i,this.clientTopology=j}return a.$inject=["$q","$rootScope","$compile","$log","modelTree","pagesManager","$translate","validation","flags","clientTopology"],a.prototype.getLinkDetailsHandler=function(){var a=this;return{editLinkCallback:function(b,c){return a.getEditLinkCallback(b,c)},linkDetailsToILink:function(b){return a.generateILink(b)}}},a.prototype.getEditLinkCallback=function(a,b){var c=this,d=_.assign(this.$rootScope.$new(),{value:b});return this.$compile('<link-details value="value"></link-details>')(d).appendTo(angular.element(a)),{save:function(){var a=c.$q.defer();return d.$broadcast("linkDetails.save",a),a.promise.then(function(a){return c.$log.log(a),a})}}},a.prototype.getAnchorType=function(a){return"page-anchor"===a.type?"page":"anchor"},a.prototype.ensureHttpPrefix=function(a){return!a||/^(http):\/\//i.test(a)||-1!=="http://".indexOf(a)||/^(https):\/\//i.test(a)||-1!=="https://".indexOf(a)?a:"http://"+a},a.prototype.convertLinkDetailsToStateWeb=function(a,b){return a.isPageRef=!1,a.targetUrl=this.ensureHttpPrefix(b),this.validation.isUrl(b)?(delete a.paypal,delete a.link,delete a.targetPage,delete a.targetEmail,delete a.targetPhone,this.$q.when(a)):this.$q.reject("linkDetailsManager: invalid url")},a.prototype.convertLinkDetailsToStateEmail=function(a,b){return a.isPageRef=!1,a.targetEmail=b,this.validation.isEmail(b)?(delete a.link,delete a.targetPage,delete a.targetUrl,delete a.targetPhone,delete a.paypal,this.$q.when(a)):this.$q.reject("linkDetailsManager: invalid email")},a.prototype.convertLinkDetailsToStatePhone=function(a,b){return a.isPageRef=!1,a.targetPhone=b,this.validation.isPhone(b)?(delete a.paypal,delete a.link,delete a.targetPage,delete a.targetUrl,delete a.targetEmail,this.$q.when(a)):this.$q.reject("linkDetailsManager: invalid phone number")},a.prototype.cleanBusinessName=function(a){var b=$("<div />").html(a).children();return b.length>0?b.text():a},a.prototype.convertLinkDetailsToPaypal=function(a,b){return a.isPageRef=!1,a.paypal=b,this.validation.isEmail(b.email)?(a.paypal.name=this.cleanBusinessName(a.paypal.name),delete a.link,delete a.targetPage,delete a.targetUrl,delete a.targetEmail,delete a.targetPhone,this.$q.when(a)):this.$q.reject("linkDetailsManager: invalid business email")},a.prototype.convertLinkDetailsToStateNone=function(a){return delete a.isPageRef,delete a.link,delete a.targetPage,delete a.targetUrl,delete a.targetEmail,delete a.targetPhone,delete a.paypal,this.$q.when(a)},a.prototype.convertLinkDetailsToStatePage=function(a,b){return delete a.targetUrl,delete a.targetEmail,delete a.targetPhone,delete a.paypal,this.setPageLink(a,b),this.$q.when(a)},a.prototype.convertLinkDetailsToStateDocument=function(a){return a.file?(a.isPageRef=!1,a.file={id:a.file.id,url:a.file.fileUrl,name:a.file.title},a.targetUrl=this.getTargetUrlForDocument(a.file),delete a.paypal,this.$q.when(a)):this.convertLinkDetailsToStateNone(a)},a.prototype.setPageLink=function(a,b){var c=this.getAnchorType(b);a.isPageRef=!0,"page"===c?(delete a.link,a.targetPage=b.id):"anchor"===c&&(a.link=this.addAnchor(b),delete a.targetPage)},a.prototype.getTargetUrlForDocument=function(a){return this.clientTopology.filesBaseUrl+a.url},a.prototype.getAnchorId=function(a){return"anchor"===this.getAnchorType(a)?a.getId():a.id},a.prototype.resolveTargetPage=function(a){return this.isPage(a)?a.targetPage||a.link.targetPage:this.isWeb(a)?a.targetUrl:""},a.prototype.resolveLinkToType=function(a){if(this.isNone(a))return"none";if(this.isPhone(a))return"phone";if(this.isEmail(a))return"email";if(this.isPage(a))return"page";if(this.isWeb(a))return"web";if(this.isDocument(a))return"document";if(this.isPaypal(a))return"paypal";throw new Error("linkTo type unknown")},a.prototype.isNone=function(a){return!(a.hasOwnProperty("isPageRef")||a.hasOwnProperty("link")||a.hasOwnProperty("targetPage")||a.hasOwnProperty("targetUrl")||a.hasOwnProperty("targetEmail")||a.hasOwnProperty("targetPhone"))},a.prototype.isDocument=function(a){return!!a.file},a.prototype.isPage=function(a){return!0===a.isPageRef},a.prototype.isWeb=function(a){return!1===a.isPageRef&&!a.file&&a.targetUrl},a.prototype.isPaypal=function(a){return!!a.paypal},a.prototype.isEmail=function(a){return!a.file&&a.targetEmail},a.prototype.isPhone=function(a){return!a.file&&a.targetPhone},a.prototype.getPages=function(){var a=this.modelTree.getPagesNodes();return _.filter(a,function(a){return!a.userHidden})},a.prototype.getMainPages=function(){var a=this.modelTree.getPagesNodes(),b=[];return _.filter(a,function(a){if(a.userHidden)return!1;var c=-1!==b.indexOf(a.alias);return c||b.push(a.alias),!c})},a.prototype.isLinkBroken=function(a){if(!this.isPage(a))return!1;var b=a.link&&a.link.nodeId||a.targetPage,c=a.link&&a.link.targetPage||a.targetPage;return!this.findNodeByIdInPage(b,c)},a.prototype.findNodeByIdInPage=function(a,b){var c;if(c="string"==typeof b?this.modelTree.findPageNodeByName(b):b)return a===c.getId()?c:c.children.find(function(b){return a===b.getId()})},a.prototype.findNodeById=function(a){var b,c=this;return this.getPages().forEach(function(d){if(b)return!1;b=c.findNodeByIdInPage(a,d)}),b},a.prototype.linkDetailsToString=function(a){return a&&a.hasOwnProperty("isPageRef")?this.isLinkBroken(a)?null:this.isDocument(a)?a.file.name:this.isWeb(a)?a.targetUrl:this.isEmail(a)?a.targetEmail:this.isPhone(a)?a.targetPhone:this.isPaypal(a)?this.$translate.instant("link-details.paypal.label"):a.targetPage?this.modelTree.getPageById(a.targetPage):a.link.anchorName:null},a.prototype.getLinkfromNode=function(a){return _.get(a,"contentElement.values.button.value")},a.prototype.isAnchorLink=function(a){return!!_.get(a,"link")},a.prototype.updateLinkDetailsOnPageMove=function(a,b){var c=this,d=b.getId(),e=a.getId();this.modelTree.traverse(function(b){var f=c.getLinkfromNode(b);if(f&&f.isPageRef)if(c.isAnchorLink(f)){var g=f.link;g.targetPage===d&&g.nodeId===e&&(f.link=c.generateAnchorLink(a),c.modelTree.markPageNodeAsDirty(b))}else f.targetPage===d&&(f.targetPage=a.containerPageId,c.modelTree.markPageNodeAsDirty(b))},!1)},a.prototype.generateILink=function(a){var b=this.linkDetailsToString(a);return{value:b||this.$translate.instant("general.no-link"),state:!!b}},a.prototype.generateAnchorLink=function(a){var b=this.pagesManager.getAnchorLinkObj(a);return{nodeId:a.getId(),targetPage:a.containerPageId,type:b.type,anchorName:this.modelTree.getAnchorName(a)}},a.prototype.addAnchor=function(a){return this.pagesManager.addAnchorLink(a),this.generateAnchorLink(a)},a.prototype.targetUrlIsDocument=function(a){return _(a).contains(this.clientTopology.filesBaseUrl)},a.prototype.getBusinessNameAndEmail=function(){var b=this.modelTree.getGeneralInformation(),c=b.contentElement.values,d=c.BusinessName,e=c.MainEmail;return{name:d.value||a.DEFAULT_BUSINESS_NAME,email:e.value||a.DEFAULT_MAIN_EMAIL}},a}();LinkDetailsManager.DEFAULT_BUSINESS_NAME="My Site",LinkDetailsManager.DEFAULT_MAIN_EMAIL="info@mysite.com",angular.module("siteGeneratorStaticsConsumerAppInternal").service("linkDetailsManager",LinkDetailsManager);var FieldEditorConfiguration=function(){function a(a,b,c,d){this.linkDetailsManager=a,this.applicationState=b,this.flags=c,this.nodeTitleManager=d}return a.$inject=["linkDetailsManager","applicationState","flags","nodeTitleManager"],a.prototype.isTextType=function(a){return"text"===a.type},a.prototype.isTextSubType=function(a){return a.subType===core.ElementSubTypes.Text||a.subType===core.ElementSubTypes.Title||a.subType===core.ElementSubTypes.Subtitle||a.subType===core.ElementSubTypes.LongText||a.subType===core.ElementSubTypes.Address||a.subType===core.ElementSubTypes.Email||a.subType===core.ElementSubTypes.Copyright||a.subType===core.ElementSubTypes.Phone||a.subType===core.ElementSubTypes.Fax||a.subType===core.ElementSubTypes.Map||a.subType===core.ElementSubTypes.ContactFormTitle},a.prototype.isMobile=function(){return this.applicationState.isInMobileEditMode()},a.prototype.isTextInput=function(a){return this.isMobile()?this.isTextType(a)&&this.isTextSubType(a)||this.isButton(a):this.isTextType(a)&&this.isTextSubType(a)&&!this.isRichTextField(a)},a.prototype.isLongTextInput=function(a){return!1},a.prototype.isRichTextInput=function(a){return!this.isMobile()&&(this.isTextType(a)&&this.isRichTextField(a))},a.prototype.isRichTextField=function(a){return a.subType===core.ElementSubTypes.Title||a.subType===core.ElementSubTypes.Subtitle||a.subType===core.ElementSubTypes.LongText||a.subType===core.ElementSubTypes.Address||a.subType===core.ElementSubTypes.Copyright},a.prototype.isButtonInput=function(a){return this.isButton(a)&&!this.isMobile()},a.prototype.isButton=function(a){return a.type===core.ElementTypes.Button&&a.subType===core.ElementSubTypes.Button},a.prototype.isImage=function(a){return a.type===core.ElementTypes.Media&&a.subType===core.ElementSubTypes.Image},a.prototype.isSocial=function(a){return a.type===core.ElementTypes.Media&&a.subType===core.ElementSubTypes.Social},a.prototype.isSocialInput=function(a){return this.isSocial(a)&&!this.isMobile()},a.prototype.isBoolean=function(a){return a.type===core.ElementTypes.Menu||a.type===core.ElementTypes.FixedHeader||a.subType===core.ElementSubTypes.Form||this.isSocial(a)&&this.isMobile()},a.prototype.isMedia=function(a){return this.isImage(a)&&!this.isSocial(a)},a.prototype.isCheckbox=function(a){return a.type===core.ElementTypes.Menu||a.subType===core.ElementSubTypes.Form||this.isSocial(a)&&this.isMobile()},a.prototype.getDebounceDelay=function(b){return b.data&&b.data.subType===core.ElementSubTypes.Image?0:b.suggestedContent&&b.suggestedContent.length>0?a.DEFAULT_SUGGESTION_DEBOUNCE:a.DEFAULT_DEBOUNCE},a.prototype.getFieldTitle=function(a,b){if(this.flags.staticTextsWithTranslate){var c=b.getContentElementType(),d=null;return b.isListItem&&(d="ListHeader"===c?"header":"ListFooter"===c?"footer":"item"),a.displayName||this.nodeTitleManager.fieldLabel(a,d,c)}return a.displayName||a.subType},a.prototype.getILink=function(a){return this.linkDetailsManager.generateILink(a.value)},a}();FieldEditorConfiguration.DEFAULT_DEBOUNCE=200,FieldEditorConfiguration.DEFAULT_SUGGESTION_DEBOUNCE=500,angular.module("siteGeneratorEditorInternal").service("fieldEditorConfiguration",FieldEditorConfiguration);var LogoHandler=function(){function a(a,b,c,d){this.mediaOverrideManager=a,this.colorationUtils=b,this.logoExtractionPopupService=c,this.undoRedo=d,this.logoOrigin=BIOrigins.UnknownSource}return a.$inject=["mediaOverrideManager","colorationUtils","logoExtractionPopupService","undoRedo"],a.prototype.handleLogoChange=function(a,b){var c=this;this.colorationUtils.saveLogoPaletteAsCustom();var d=a.whatChanged===IEditEventType.VisibilityChange&&!b,e=this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(a.node),f=e!==cc.MediaPreviewType.Clipart;if(d||f)return void this.logoExtractionPopupService.hideLogoPopup();var g=a.node.contentElement.getFieldValue("Logo"),h=g.value[0];this.logoOrigin=BIOrigins.HeaderPanel;var i=function(){return c.lazyGetLogoColorationPromise(h)};a.whatChanged===IEditEventType.ValueChange?this.logoExtractionPopupService.showLogoPopup(this.logoOrigin,".c4-preview-wrapper",i,1e3):i()},a.prototype.lazyGetLogoColorationPromise=function(a){return this.prevPromise&&_.isEqual(a,this.prevPromiseImageDescription)?this.prevPromise:(this.prevPromiseImageDescription=a,this.prevPromise=this.getLogoColoration(a),this.prevPromise)},a.prototype.getLogoColoration=function(a){var b=this;return this.colorationUtils.initialize().then(function(){return b.colorationUtils.preparePaletteFromLogo(a,b.logoOrigin)}).then(function(a){return null!==a.mode&&b.logoOrigin!==BIOrigins.UnknownSource&&b.colorationUtils.setColorationMode(a.mode),b.colorationUtils.setLogoColors(a),b.undoRedo.captureOperation(!1,!0),a})},a}();angular.module("siteGeneratorEditorInternal").service("logoHandler",LogoHandler);var sectionMedia;!function(a){var b=function(){function a(a,b,c,d,e){this.solutionFetcher=a,this.mediaSectionUtils=b,this.sectionBackgroundService=c,this.modelTree=d,this.solutionManager=e}return a.$inject=["solutionFetcher","mediaSectionUtils","sectionBackgroundService","modelTree","solutionManager"],a.prototype.getBackgroundAlignment=function(a){return this.sectionBackgroundService.getBackgroundAlignment(a,"body")},a.prototype.getInlineAlignment=function(a){var b=this.solutionFetcher.getSectionSolution(a.containerPageId,this.modelTree.findIdentifyingNodeId(a));return this.solutionManager.getSegmentForNode(b,a).getAlignment()},a.prototype.setBackgroundAlignment=function(a,b,c){return this.sectionBackgroundService.setBackgroundAlignment(a,b,c),this.sectionBackgroundService.updateViewer(a.identifyingNode)},a.prototype.setInlineAlignment=function(a,b){var c=this.solutionFetcher.getSectionSolution(a.containerPageId,this.modelTree.findIdentifyingNodeId(a)),d=this.solutionManager.getSegmentForNode(c,a),e=_.get(a,"contentElement.allValuesByMediaType.image[0].relativeUri");return d.updateAlignment(e,b),this.mediaSectionUtils.updateFieldOnViewer(a,null,IEditEventType.AlignmentChange)},a}();a.MediaAlignment=b,angular.module("siteGeneratorEditorInternal").service("mediaAlignment",b)}(sectionMedia||(sectionMedia={}));var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},MediaEditorManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){var A=this;this.$timeout=a,this.flags=b,this.storyServices=c,this.mediaGallery=d,this.undoRedo=e,this.cropFaceService=f,this.linkEditorCAB=g,this.editorEventManager=h,this.applicationState=i,this.consumerBiLogger=j,this.nodeFetcher=k,this.mediaOverrideManager=l,this.ONSTAGE_EVENTS=m,this.consumerMediaUtils=n,this.consumerBiLoggerHelpers=o,this.overlaySegmentManager=p,this.previewScale=q,this.overlayManager=r,this.onstageActionsManager=s,this.nodeEditorManager=t,this.sectionBackgroundService=u,this.pubSub=v,this.sectionMedia=w,this.CcDialogBuilder=x,this.galleryTypeCAB=y,this.mediaTypeResolver=z,this.handleMediaChange=function(a,b,c,d,e,f,g){return A.consumerMediaUtils.biReplaceMediaApproved(a,d,f,g),e&&(c.fillValuesByMediaType(),A.pubSub.fire(PubSub.events.CONTENT_UPDATED),A.flags.sectionMedia?A.sectionMedia.updateMedia(a):A.updateViewer(a,b,BIOrigins.OSI)),{changed:e,numTotal:f,mediaType:d}},this.handleCancellingOfMediaChange=function(a,b,c){A.consumerMediaUtils.biReplaceMediaClosed(a,b,c)},s.subscribe(m.OPEN_MEDIA_MANAGER,function(a){A.mediaChange(a,a.contentElement,BIOrigins.OSI)}),s.subscribe(m.CROP_IMAGE,function(a){A.openCropper()}),s.subscribe(m.MEDIA_LINK_TO,function(a){A.changeLink()}),s.subscribe(m.CHANGE_GALLERY_TYPE,function(b){A.flags.sectionMedia?a(function(){var a=A.nodeFetcher.getCurrentActiveNode();A.galleryTypeCAB.openGalleryType(a,A.galleryTypeCAB.getSizeDropdownButton())}):A.changeGallery()}),s.subscribe(m.OPEN_SETTINGS,function(a){A.openSettingsPanel()})}return a.$inject=["$timeout","flags","storyServices","mediaGallery","undoRedo","cropFaceService","linkEditorCAB","editorEventManager","applicationState","consumerBiLogger","nodeFetcher","mediaOverrideManager","ONSTAGE_EVENTS","consumerMediaUtils","consumerBiLoggerHelpers","overlaySegmentManager","previewScale","overlayManager","onstageActionsManager","nodeEditorManager","sectionBackgroundService","pubSub","sectionMedia","CcDialogBuilder","galleryTypeCAB","mediaTypeResolver"],a.prototype.setCurrentMediaType=function(a){this.currentMediaType=a},a.prototype.getCurrentMediaType=function(){return this.currentMediaType},a.prototype.openSettingsPanel=function(){var a=this.nodeFetcher.getCurrentActiveNode(),b=this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(a);this.consumerBiLogger.contentEditor.mediaSettingsShow(a.getId(),a.getContentElementType(),a.alias,this.consumerMediaUtils.mediaTypeToString(b),this.consumerMediaUtils.mediaTypeToGalleryType(b))},a.prototype.changeGallery=function(){var a=this,b=this.nodeFetcher.getCurrentActiveNode(),c=this.mediaOverrideManager.getAvailableGalleries(b),d=this.mediaOverrideManager.getAllowedMediaOverride(b),e=!1;this.CcDialogBuilder.show({autoWrap:!1,hasBackdrop:!1,templateUrl:"views/editor/gallery-picker.html",clickOutsideToClose:!0,onRemoving:function(){e||a.consumerBiLogger.contentEditor.galleryLayoutWindowClosed(b.getId(),b.getSpecificContentElementType(),b.alias,null,c.length,d===PresetMediaTypes.SHAPE?"shape":d===PresetMediaTypes.COAST2COAST?"full width":d===PresetMediaTypes.IMAGE?"image":"")},controller:["$scope","CcDialogBuilder",function(f,g){f.galleries=c,f.onSelect=function(f){f&&f.gallery&&a.mediaOverrideManager.setGallery(b,f.gallery)&&(e=!0,a.nodeEditorManager.updateViewer(a.createEvent(BIOrigins.OSI,IEditEventType.GalleryLayoutChange)),a.consumerBiLogger.contentEditor.galleryLayoutChanged(b.getId(),b.getSpecificContentElementType(),b.alias,f.gallery.name,c.length,c.indexOf(f),d===PresetMediaTypes.SHAPE?"shape":d===PresetMediaTypes.COAST2COAST?"full width":d===PresetMediaTypes.IMAGE?"image":"")),g.hide()},f.getDisplayName=function(a){return a.name},a.consumerBiLogger.contentEditor.galleryLayoutWindowOpened(b.getId(),b.getSpecificContentElementType(),b.alias,c.length,d===PresetMediaTypes.SHAPE?"shape":d===PresetMediaTypes.COAST2COAST?"full width":d===PresetMediaTypes.IMAGE?"image":"")}]})},a.prototype.handleMediaPropertiesChange=function(a){var b=this.createEvent(BIOrigins.MediaSetting,a);return this.nodeEditorManager.updateViewer(b)},a.prototype.createEvent=function(a,b,c,d,e){void 0===b&&(b=IEditEventType.ValueChange),c=c||this.getMediaValueProjection(),d=d||Object.keys(c)[0];var f=this.nodeFetcher.getCurrentActiveNode();return{key:d,field:c[d],subField:e,maskChanged:!1,whatChanged:b,node:f,isReferencedField:!1,BIOrigin:a}},a.prototype.getMediaValueProjection=function(){var a=this.nodeFetcher.getCurrentActiveNode();return _.reduce(a.contentElement.values,function(a,b,c){return"media"===b.type&&(a[c]=b),a},{})},a.prototype.mediaChange=function(a,b,c,d){var e=this;if(void 0===d&&(d=this.currentMediaType),!this.applicationState.isInMobileEditMode()){var f=this.nodeFetcher.getCurrentActiveNode(),g=this.consumerMediaUtils.getChangeMediaMethod(f,d),h={contentElement:b,media:b.getMediaField().value};return this.consumerBiLoggerHelpers.organizeMediaNode=f,this.consumerMediaUtils.biReplaceMediaLoaded(f,d,c),g(h,this.getCurrentSegment()).then(function(g){return e.handleMediaChange(f,a,b,d,g.isChanged,g.numTotal,c)},function(){return e.handleCancellingOfMediaChange(f,d,c)})}},a.prototype.changeLink=function(){var a=this,b=this.nodeFetcher.getCurrentActiveNode(),c=this.mediaOverrideManager.getActiveMediaValue(b),d={linkDetails:c.Link,node:b,biSource:"media"};this.linkEditorCAB.show(d).then(function(b){c.Link=b,a.nodeEditorManager.updateViewer(a.createEvent(BIOrigins.OSI))})},a.prototype.openCropper=function(a,b){var c=this,d=this,e=this.getCurrentSegment(),f=this.nodeFetcher.getCurrentActiveNode(),g=e.getLE(),h=this.overlaySegmentManager.getMediaOverlayPosition(f.getId()),i=this.previewScale.getScale();this.imageLayout=g.getMediaLayout();var j=this.calculateViewportStyle(h,e,i),k=$(".overlay-viewport"),l=k.height(),m=64;if(!a){var n=j.height+m;if(n>l)return this.previewScale.setScaleFactor((l/n).toFixed(1)-.1),this.$timeout(function(){return c.openCropper(!0,b)},300)}if(!b){var o=$(".browser-toolbar"),p=o.offset().top+o.outerHeight(),q=j.top,r=q+j.height;if(q<p||r>l&&q>p){var s=k.scrollTop();return $(".overlay-viewport").animate({scrollTop:s-p+(this.flags.updatedCropper?j.top-m:j.top)},500),this.$timeout(function(){return c.openCropper(a,!0)},550)}}var t=[g.getArgValue(this.imageLayout.argIndex)[0]];this.imgData=_.map(t,function(a){var b=d.cropFaceService.getLimitingAlpha(4e3,4e3,a.width,a.height);return{uri:d.mediaGallery.itemToThumbnailUrl(a,Math.round(b*a.width),Math.round(b*a.height)),width:a.width,height:a.height,relativeUri:a.relativeUri}});var u=_.map(t,function(a){var b=e.node.getCropOfImage(d.imageLayout.argIndex,a.relativeUri,d.imageLayout);if(b)return{x:b.x,y:b.y,h:b.height,w:b.width}});this.CcDialogBuilder.show({template:'\n        <md-dialog class="cropper-md-dialog">\n          <cropper-controller\n            node="node"\n            crop="crop"\n            autoclose="autoClose"\n            imgdata="imgData"\n            viewport="viewport"\n            consumer-bi-logger="consumerBiLogger"\n            oncropclose="onCropClose"\n            bindoutsideclick="bindOutsideClick"\n          ></cropper-controller>\n        </md-dialog>',hasBackdrop:!1,locals:{node:f,crop:u,autoclose:!0,imgData:this.imgData,viewport:j,consumerBiLogger:d.consumerBiLogger,onCropClose:this.onCropClose.bind(this)},onRemoving:function(){c.applicationState.setCropperMode(!1),i&&c.previewScale.setScaleFactor(i)},controller:["$scope","CcDialogBuilder","crop","autoclose","imgData","viewport","onCropClose","node","consumerBiLogger","applicationState",function(a,b,c,e,f,g,h,i,j,k){k.setCropperMode(!0),a.crop=c,a.autoclose=e,a.imgData=f,a.viewport=g,a.consumerBiLogger=j,a.node=i,a.bindOutsideClick=function(b){a.onOutsideClick=b},a.onCropClose=function(a,c){b.hide(),h(a,c)},d.consumerBiLogger.contentEditor.cropImageDialogIsShown(i.getId(),i.getSpecificContentElementType(),i.alias)}]})},a.prototype.onCropClose=function(a,b){var c=this;if("ok"===a){_.forEach(this.imgData,function(a,d){if(b[d]){c.nodeFetcher.getCurrentActiveNode().setCropData(c.imageLayout.argIndex,a.relativeUri,c.imageLayout,b[d])}});var d=void 0;d=this.storyServices.reRender(),d.then instanceof Function&&d.then(function(){c.pubSub.fire(PubSub.events.CONTENT_UPDATED)}),this.undoRedo.captureOperation()}},a.prototype.calculateViewportStyle=function(a,b,c){var d=b.getLE(),e=b.getLayoutSelectionStore().getImageStretch(b,d);return{left:a.left-(e&&e.left||0)*c,top:a.top-(e&&e.top||0)*c,width:a.width+((e&&e.left||0)+(e&&e.right||0))*c,height:a.height+((e&&e.top||0)+(e&&e.bottom||0))*c}},a.prototype.getCurrentSegment=function(){var a=this.nodeFetcher.getCurrentNodeResult(),b=a&&a.sitePart,c=this.nodeFetcher.getCurrentActiveNode();if("header"!==b)return c&&this.applicationState&&this.applicationState.getContentFocus()&&this.overlayManager.listSpanManager.getSegmentByNodeId(c.getId(),b)},a.prototype.updateViewer=function(a,b,c){var d=this.overrideFieldDataValue(b,null),e=this.mediaOverrideManager.getFieldDataType(b.data.subType,a);this.consumerBiLogger.contentEditor.updateField(a.getId(),a.getSpecificContentElementType(),a.alias||"",b.key,e),this.editorEventManager.fieldChanged(d,!1,IEditEventType.ValueChange,c)},a.prototype.overrideFieldDataValue=function(a,b){var c=_.clone(a.data);return c.value=b,__assign({},a,{data:c})},a}();angular.module("siteGeneratorEditorInternal").service("mediaEditorManager",MediaEditorManager);var MediaGalleryAdapter=function(){function a(a,b,c,d,e,f,g,h,i,j){this.mediaFrame=a,this.mediaOrganizeDataAdapter=b,this.$q=c,this.RECOMMENDED_TAB_PARAMS=d,this.$translate=e,this.clientTopology=f,this.miscUtils=g,this.mediaGalleryCustomTabBuilder=h,this.staticsUrls=i,this.mediaGallery=j,this.onMediaFrameItemsWrapperBound=this.onMediaFrameItemsWrapper.bind(this),this.onMediaFrameCancelWrapperBound=this.onMediaFrameCancelWrapper.bind(this),this.miscUtils.mediaGalleryAdapter=this}return a.$inject=["mediaFrame","mediaOrganizeDataAdapter","$q","RECOMMENDED_TAB_PARAMS","$translate","clientTopology","miscUtils","mediaGalleryCustomTabBuilder","staticsUrls","mediaGallery"],a.prototype.onMediaFrameItemsWrapper=function(a){this.mediaFrame.off("close",this.onMediaFrameCancelWrapperBound),this.onMediaFrameItems&&this.onMediaFrameItems(a)},a.prototype.onMediaFrameCancelWrapper=function(){this.mediaFrame.off("items",this.onMediaFrameItemsWrapperBound),this.onMediaFrameCancel&&this.onMediaFrameCancel()},a.prototype.openMediaGallery=function(a,b,c){var d,e,f,g="custom,private,external,public,photoStock",h="picture";switch(b){case core.MediaItemTypes.Image:d=c?"backgrounds":"photos",e=g;break;case core.MediaItemTypes.Video:d="videos",e="custom,private,public",h="video",f="video";break;case core.MediaItemTypes.Shape:d="shapes",e="custom,public",f="shape";break;case core.MediaItemTypes.Clipart:d="clipart",e=g;break;case core.MediaItemTypes.Document:d="document",e="private",h="document",f="document";break;default:d="photos",e=g}this.mediaFrame.one("items",this.onMediaFrameItemsWrapperBound),this.mediaFrame.one("close",this.onMediaFrameCancelWrapperBound),this.mediaFrame.open({cssUrl:this.staticsUrls.mediaGalleryCssUrl,vision:["face"],mediaGalleryBaseHost:"https://www.wix.com/_partials/media-gallery-g5/"+this.RECOMMENDED_TAB_PARAMS.MEDIA_GALLERY_VERSION+"/",publicMediaRoot:d,mediaType:h,selectionType:"single",tabsList:e,path:"custom",customData:a,translations:{help_url:this.$translate.instant("help.mediagallery.single"+b)},i18nCode:this.clientTopology.locale,i18nPrefix:f})},a.prototype.convertToMediaOrganizerFormat=function(a,b){return Object.assign({},a,{fileName:a.title||"",relativeUri:("shape"===b?a.fileUrl:a.uri)||"",width:Number(a.width)||0,height:Number(a.height)||0,Title:a.title||a.Title||"",Description:a.Description||"",Link:a.Link||{},mediaType:b,active:!0})},a.prototype.convertToMediaObject=function(a){var b={Link:{},Description:"",Title:"Untitled",fileName:"Untitled",mediaType:"image"},c={fileName:a.name,fileUrl:a.fileUrl,height:a.height,width:a.width,relativeUri:a.id,sourceUrl:a.sourceUrl,fileInput:a.fileInput};return _.defaults(c,b)},a.prototype.selectMediaByType=function(a,b,c,d){var e=this;return void 0===b&&(b=[]),this.mediaGalleryCustomTabBuilder.buildCustomTabData(b,a,c).then(function(f){return e.openMediaGallery(f,a,c),e.managingResultsActiveState(b,a,d)})},a.prototype.selectContentElementMediaByType=function(a,b,c,d){var e=this,f=this.mediaOrganizeDataAdapter.prepareData(a||{contentElement:{},media:[]},b);return this.selectMediaByType(b,f,c,d).then(function(c){e.handleInvalidrelativeUri(c);var g=_.unique(c.concat(f),"relativeUri"),h=e.mediaOrganizeDataAdapter.handleResult(g,a,b,b!==core.MediaItemTypes.Video);return d&&(h.data=c),h})},a.prototype.selectImage=function(a,b,c,d){return this.segment=c,this.selectContentElementMediaByType(b,core.MediaItemTypes.Image,a,d)},a.prototype.selectVideo=function(a,b,c){return this.selectContentElementMediaByType(a,core.MediaItemTypes.Video,null,c)},a.prototype.selectShape=function(a){return this.selectContentElementMediaByType(a,core.MediaItemTypes.Shape)},a.prototype.selectClipart=function(a){return this.selectContentElementMediaByType(a,core.MediaItemTypes.Clipart)},a.prototype.selectLogo=function(){return this.selectMediaByType("image")},a.prototype.selectDocument=function(){return this.selectMediaByType("document")},a.prototype.handleInvalidrelativeUri=function(a){void 0===a&&(a=[]),a.filter(function(a){return"file"===a.relativeUri}).forEach(function(a){var b=a.fileBaseUrl.match(/\d+.*/);b&&""!==b[0]&&(a.relativeUri=a.uri=b[0])})},a.prototype.managingResultsActiveState=function(a,b,c){var d=this;return this.$q(function(e,f){d.onMediaFrameItems=function(f){var g=function(a){return"video"===b?a:a.map(function(a){return a.active=!1,a})},h=function(b){var c=a.map(function(a){return a.active=!1,a});return b.filter(function(a){var b=d.mediaGallery.getItemId(a),e=c.find(function(a){return d.mediaGallery.getItemId(a)===b});return!e||(e.active=!0,!1)}).concat(c)},i=f.items.map(function(a){return d.convertToMediaOrganizerFormat(a,b)}),j=c?g(i):h(i);e(j)},d.onMediaFrameCancel=function(){f()}})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("mediaGalleryAdapter",MediaGalleryAdapter);var MediaGalleryCustomTabBuilder=function(){function a(a,b,c,d,e,f){this.wixmp=a,this.RECOMMENDED_TAB_PARAMS=b,this.storyServices=c,this.flags=d,this.$translate=e,this.$q=f}return a.$inject=["wixmp","RECOMMENDED_TAB_PARAMS","storyServices","flags","$translate","$q"],a.prototype.getPrivateMedia=function(a){return"video"===a||"shape"===a?{data:[]}:this.wixmp.Source(this.wixmp.sources.PRIVATE).items.list(this.storyServices.story.privateMediaFolderId)},a.prototype.getPublicMedia=function(a,b){if("document"===a)return this.$q.when({data:[]});var c=b?this.RECOMMENDED_TAB_PARAMS.BG_IMAGE_PUBLIC_ROOT_GUID:this.RECOMMENDED_TAB_PARAMS[a.toUpperCase()+"_PUBLIC_ROOT_GUID"];return this.wixmp.Source(this.wixmp.sources.PUBLIC).items.list(c)},a.prototype.prepareRecommendedSection=function(a){return{title:this.flags.staticTextsWithTranslate?this.$translate.instant("media-organize.custom-tab.recommended-section"):"Recommended especially for your section",data:a}},a.prototype.prepareSectionPreview=function(a,b,c,d){var e,f;return b.length>c?(e=d,f=c-1):(e=void 0,f=c),{title:a,data:b.slice(0,f),action:e}},a.prototype.preparePrivateSection=function(a){var b=this.flags.staticTextsWithTranslate?this.$translate.instant("media-organize.custom-tab.from-business"):"Images from your business";return this.prepareSectionPreview(b,a,this.RECOMMENDED_TAB_PARAMS.PRIVATE_IMAGES_AMOUNT,{url:"private/"+this.storyServices.story.privateMediaFolderId,title:this.flags.staticTextsWithTranslate?this.$translate.instant("media-organize.custom-tab.show-all"):"Show All"})},a.prototype.preparePublicSection=function(a){var b=this.flags.staticTextsWithTranslate?this.$translate.instant("media-organize.custom-tab.free"):"Free from Wix";return this.prepareSectionPreview(b,a,this.RECOMMENDED_TAB_PARAMS.PUBLIC_IMAGES_AMOUNT,{url:"public",title:this.flags.staticTextsWithTranslate?this.$translate.instant("media-organize.custom-tab.show-all"):"Show All"})},a.prototype.convertToPictureFormat=function(a){return Object.assign({},a,{name:a.Title,width:a.width,
height:a.height,fileUrl:"media/"+a.relativeUri,id:a.relativeUri,mediaType:"picture",originalUrl:"//static.wixstatic.com/media/"+a.relativeUri,previewUrl:"//static.wixstatic.com/media/"+a.relativeUri+"_srb_375_375_75_22_0.5_1.20_0.00_jpg_srb",thumbnailUrl:"//static.wixstatic.com/media/"+a.relativeUri+"_srz_210_210_75_22_0.5_1.20_0.00_jpg_srz"})},a.prototype.convertToShapeFormat=function(a){return Object.assign({},a,{name:a.Title,fileUrl:a.relativeUri,id:a.relativeUri,mediaType:"shape",originalUrl:"//static.wixstatic.com/"+a.relativeUri,previewUrl:"//static.wixstatic.com/"+a.relativeUri,thumbnailUrl:"//static.wixstatic.com/"+a.relativeUri})},a.prototype.convertToVideoFormat=function(a){return Object.assign({},a,{name:a.Title,id:a.relativeUri,originalUrl:"//static.wixstatic.com/"+a.fileUrl,videoPreviewUrls:["//video.wixstatic.com/video/"+a.relativeUri+"/1080p/mp4/file.mp4"],thumbnailUrl:a.thumbnailUrl,previewUrl:a.thumbnailUrl})},a.prototype.convertToMediaGalleryFormat=function(a,b){switch(b){case"image":case"clipart":return this.convertToPictureFormat(a);case"shape":return this.convertToShapeFormat(a);case"video":return this.convertToVideoFormat(a)}},a.prototype.buildCustomTabData=function(a,b,c){var d=this;return this.$q.all([this.getPrivateMedia(b),this.getPublicMedia(b,c)]).then(function(c){var e=d.prepareRecommendedSection(a.map(function(a){return d.convertToMediaGalleryFormat(a,b)})),f=d.preparePrivateSection(c[0].data),g=d.preparePublicSection(c[1].data);return{title:d.flags.staticTextsWithTranslate?d.$translate.instant("media-organize.custom-tab.title"):"Recommended",sections:[e,f,g]}})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("mediaGalleryCustomTabBuilder",MediaGalleryCustomTabBuilder);var MediaOrganizeAdapter=function(){function a(a,b,c,d,e,f,g){this.organizeMedia=a,this.mediaOrganizeDataAdapter=b,this.linkDetailsManager=c,this.$translate=d,this.mediaGalleryCustomTabBuilder=e,this.staticsUrls=f,this.mediaGallery=g}return a.$inject=["organizeMedia","mediaOrganizeDataAdapter","linkDetailsManager","$translate","mediaGalleryCustomTabBuilder","staticsUrls","mediaGallery"],a.prototype.selectImage=function(a){var b=this;return this.organizeMedia.open({mediaGalleryCSSOverridesURL:this.staticsUrls.mediaGalleryCssUrl,title:"Media Manager",subtitle:"Select Image",suggestionsTitle:"Other suggested images, select an image to replace the one on top",dataSource:this.mediaOrganizeDataAdapter.prepareData(a,"image"),type:"image",mode:"single",linkDetailsHandler:this.linkDetailsManager.getLinkDetailsHandler()}).then(function(c){return b.mediaOrganizeDataAdapter.handleResult(c,a,"image",!0)})},a.prototype.selectGallery=function(a,b,c,d){var e,f=this,g=this.mediaOrganizeDataAdapter.prepareData(a,"image");return e=d||(a?g:[]),this.mediaGalleryCustomTabBuilder.buildCustomTabData(e,"image").then(function(a){return f.organizeMedia.open({mediaGalleryCSSOverridesURL:f.staticsUrls.mediaGalleryCssUrl,title:f.$translate.instant("media-organize.gallery.title"),subtitle:f.$translate.instant("media-organize.gallery.subtitle"),dataSource:e,customData:a,type:"image",mode:"gallery",linkDetailsHandler:f.linkDetailsManager.getLinkDetailsHandler(),mediaGalleryHelpPage:f.$translate.instant("help.mediagallery.imagegallery"),helpPage:f.$translate.instant("help.organizemedia.imagegallery")})}).then(function(b){var d=_.unique(b.concat(g),function(a){return f.mediaGallery.getItemId(a)});if(a){c&&(b=b.filter(function(a){return a.active}),b.map(function(a){var b=f.mediaGallery.getItemId(a);a.active=!!_.get(_.find(g,function(a){return f.mediaGallery.getItemId(a)===b}),"active")}),d=_.unique(g.concat(b),function(a){return f.mediaGallery.getItemId(a)}));var e=f.mediaOrganizeDataAdapter.handleResult(d,a,"image",!1);return e.data=b,e}return d})},a.prototype.selectVideo=function(a){var b=this;return this.organizeMedia.open({mediaGalleryCSSOverridesURL:this.staticsUrls.mediaGalleryCssUrl,title:this.$translate.instant("media-organize.type.title"),subtitle:this.$translate.instant("media-organize.video.subtitle"),suggestionsTitle:this.$translate.instant("media-organize.video.suggestions-title"),dataSource:this.mediaOrganizeDataAdapter.prepareData(a,"video"),type:"video",mode:"single"}).then(function(c){return b.mediaOrganizeDataAdapter.handleResult(c,a,"video",!1)})},a.prototype.selectExtVideo=function(a){var b=this;return this.organizeMedia.open({mediaGalleryCSSOverridesURL:this.staticsUrls.mediaGalleryCssUrl,title:this.$translate.instant("media-organize.type.title"),subtitle:this.$translate.instant("media-organize.video.subtitle"),suggestionsTitle:this.$translate.instant("media-organize.video.suggestions-title"),dataSource:this.mediaOrganizeDataAdapter.prepareData(a,"extVideo"),type:"extVideo",mode:"single",helpPage:this.$translate.instant("help.organizemedia.singleextvideo")}).then(function(c){return b.mediaOrganizeDataAdapter.handleResult(c,a,"extVideo",!1)})},a.prototype.selectShape=function(a){var b=this;return this.organizeMedia.open({mediaGalleryCSSOverridesURL:this.staticsUrls.mediaGalleryCssUrl,title:this.$translate.instant("media-organize.type.title"),subtitle:this.$translate.instant("media-organize.shape.subtitle"),suggestionsTitle:this.$translate.instant("media-organize.shape.suggestions-title"),dataSource:this.mediaOrganizeDataAdapter.prepareData(a,"shape"),type:"shape",mode:"single",linkDetailsHandler:this.linkDetailsManager.getLinkDetailsHandler()}).then(function(c){return b.mediaOrganizeDataAdapter.handleResult(c,a,"shape",!1)})},a.prototype.selectClipart=function(a){var b=this;return this.organizeMedia.open({mediaGalleryCSSOverridesURL:this.staticsUrls.mediaGalleryCssUrl,title:this.$translate.instant("media-organize.type.title"),subtitle:this.$translate.instant("media-organize.clipart.subtitle"),suggestionsTitle:this.$translate.instant("media-organize.clipart.suggestions-title"),dataSource:this.mediaOrganizeDataAdapter.prepareData(a,"clipart"),type:"clipart",mode:"single",linkDetailsHandler:this.linkDetailsManager.getLinkDetailsHandler()}).then(function(c){return b.mediaOrganizeDataAdapter.handleResult(c,a,"clipart",!1)})},a}();angular.module("siteGeneratorEditorInternal").service("mediaOrganizeAdapter",MediaOrganizeAdapter);var MediaOrganizeDataAdapter=function(){function a(a){this.mediaGallery=a}return a.$inject=["mediaGallery"],a.prototype.prepareData=function(a,b){var c=this;return _(a.media).filter(function(a){return b===a.mediaType}).unique(function(a){return c.mediaGallery.getItemId(a)}).map(function(d){var e=_.get(a.contentElement.hiddenMedia,b,{}),f=e[c.mediaGallery.getItemId(d)]||!1;return _.assign(d,{active:!f})}).value()},a.prototype.handleResult=function(a,b,c,d){var e=this;this.normalizeMedia(a,c);var f=b.media.filter(function(a){return a.mediaType!==c}),g=b.media.filter(function(a){return a.mediaType===c}),h=_.map(g,function(a){return e.mediaGallery.getItemId(a)}),i=_.map(a,function(a){return e.mediaGallery.getItemId(a)}),j=b.contentElement.hiddenMedia[c]||{};if(d){var k=_.difference(i,h),l=_.difference(h,i),m=ob.deepClone(j);_.each(k,function(a){m[a]=!0}),_.each(l,function(a){delete m[a]});var n=_.find(g,function(a){return!j[e.mediaGallery.getItemId(a)]}),o=_.find(a,function(a){return a.active}),p=m[this.mediaGallery.getItemId(o)];delete m[this.mediaGallery.getItemId(o)],p&&n&&(m[this.mediaGallery.getItemId(n)]=p),_.pull(a,o),a.unshift(o),b.contentElement.hiddenMedia[c]=m}else{var q=a.filter(function(a){return!a.active}).map(function(a){return e.mediaGallery.getItemId(a)});b.contentElement.hiddenMedia[c]=_.zipObject(q,_.times(q.length,_.constant(!0)))}b.media.length=0,b.media.push.apply(b.media,a.concat(f));var r=!_.isEqual(g,a),s=!_.isEqual(j,b.contentElement.hiddenMedia[c]);return{isChanged:r||s,numTotal:a.filter(function(a){return a.active}).length,data:a}},a.prototype.normalizeMedia=function(a,b){_.each(a,function(a){a.mediaType=b})},a}();angular.module("siteGeneratorEditorInternal").service("mediaOrganizeDataAdapter",MediaOrganizeDataAdapter);var PresetMediaTypes={SHAPE:0,COAST2COAST:1,IMAGE:2,AGGREGATOR:3,COLUMNBG:4},MediaOverrideManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){this.flags=a,this.mediaOverride=b,this.simpleSolutionManager=c,this.solutionFetcher=d,this.modelTree=e,this.layoutSelectionStoreProvider=f,this.sectionBackgroundService=g,this.patternService=h,this.previewColors=i,this.nodeFetcher=j,this.$translate=k,this.solutionManager=l,this.MEDIA_DEFAULTS={base:{Slideshow:[{name:"slideshow",properties:{}}],"Grid (with margins)":[{name:"grid6",displayName:"6 Column Grid",properties:{columns:6}},{name:"grid4",displayName:"4 Column Grid",properties:{columns:4}},{name:"grid3",displayName:"3 Column Grid",properties:{columns:3}},{name:"grid2",displayName:"2 Column Grid",properties:{columns:2}}],"Animated Grid":[{name:"animatedgrid3",properties:{columns:3}}],Collage:[{name:"collage",properties:{columns:3,maxImageSize:2}}],Slider:[{name:"slider",properties:{}}],Thumbnails:[{name:"thumbnails",displayName:"Thumbnail Slideshow",properties:{}}],Masonry:[{name:"masonry",properties:{columns:3}}],Accordion:[{name:"accordion",displayName:"Accordion Slider",properties:{}}]},coast2coast:{"Fullwidth Collage":[{name:"fullwidthcollage",displayName:"Full Width Collage",properties:{}}],"Strip Slideshow":[{name:"stripslideshow",displayName:"Full Width Slideshow",properties:{}}],"Strip Showcase":[{name:"stripshowcase",displayName:"Full Width Showcase",properties:{}}],Accordion:[{name:"stripaccordion",displayName:"Full Width Accordion Slider",properties:{stretch:"coast2coast"}}],stripmasonry:[{name:"stripmasonry",displayName:"Full Width Masonry",properties:{columns:3}}]}},this.imageAlignmentOptions=[{label:this.$translate.instant("media.image-alignment-options.top"),value:"top"},{label:this.$translate.instant("media.image-alignment-options.center"),value:"center"},{label:this.$translate.instant("media.image-alignment-options.bottom"),value:"bottom"}],a.useConstantGalleryProperties&&(this.MEDIA_DEFAULTS.coast2coast["Fullwidth Collage"]=[{name:"fullwidthcollage_b",displayName:"4 Column Full Width Collage",properties:{columns:4}},{name:"fullwidthcollage_c",displayName:"3 Column Full Width Collage",properties:{columns:3}}])}return a.$inject=["flags","mediaOverride","simpleSolutionManager","solutionFetcher","modelTree","layoutSelectionStoreProvider","sectionBackgroundService","patternService","previewColors","nodeFetcher","$translate","solutionManager"],a.prototype.findSegment=function(a){var b=this.solutionFetcher.getSectionSolution.bind(this.solutionFetcher),c=b(a.containerPageId,this.modelTree.findIdentifyingNodeId(a));return this.solutionManager.getSegmentForNode(c,a)},a.prototype.getAlignmentOption=function(a){return _.find(this.imageAlignmentOptions,{value:a})},a.prototype.listAlignmentOptions=function(){return this.imageAlignmentOptions},a.prototype.isFitMode=function(a){var b=this.getGallery(a);return"full"===(_.get(b,["properties","displayMode"])||"fill")},a.prototype.setFitMode=function(a,b){var c=this.getGallery(a);c&&(c.properties.displayMode=b?"full":"fill",this.setGallery(a,c))},a.prototype.getAvailableGalleries=function(a){var b=this,c=this.getAllowedMediaOverride(a)===PresetMediaTypes.COAST2COAST,d=this.findSegment(a),e=d.getLE(),f=e.getMediaLayout(),g=this.mediaOverride.makeListOfValidatedGalleries(f.argIndex,d),h=this.mediaOverride.getGallery(e,f,d);h&&h.properties&&(h.properties=_.omit(h.properties,"zIndex"));var i=c?this.MEDIA_DEFAULTS.coast2coast:this.MEDIA_DEFAULTS.base;return _(g.valid).filter(function(a){return i[a.name]}).map(function(a){return _(i[a.name]).map(function(d){var e=_.clone(d.properties);c&&(e.stretch="coast2coast");var f=b.mediaOverride.transformGallery(a,e);if(!e.columns||e.columns===f.properties.numCols||b.flags.useConstantGalleryProperties&&e.columns===f.properties.numOfCells)return{gallery:f,selected:_.eq(f,h),cssKey:d.name,name:d.displayName||a.name}}).filter().value()}).flatten().sortBy(function(a){return a.selected&&-1||0}).value()},a.prototype.setGallery=function(a,b){if("GeneralDescription"!==a.getContentElementType()){var c=this.findSegment(a);if(!c)return cc.MediaPreviewType.SingleImage;var d=c.getLE(),e=d.getMediaLayout();return this.mediaOverride.setGallery(d,e,c,b)}},a.prototype.getGallery=function(a){if(a.isList()&&!(a=a.children.find(function(a){return!a.isListHeader()&&!a.isListFooter()})))return null;var b=this.findSegment(a);if(!b)return null;var c=b.getLE(),d=c.getMediaLayout();return c&&d&&this.mediaOverride.getGallery(c,d,b)},a.prototype.setMediaOverride=function(a,b){if("GeneralDescription"!==a.getContentElementType()){var c=this.findSegment(a),d=c.getLE(),e=d.getMediaLayout();return this.mediaOverride.setGalleryByNameAndValues(d,e,c,b,{})}},a.prototype.getFieldDataType=function(a,b){return a===core.ElementSubTypes.Image?this.getSelectedMediaName(b):a},a.prototype.getSelectedMediaName=function(a){var b=this.getCurrentSelectedMediaPreviewType(a);return this.getSelectedMediaNameByTabIndex(b)},a.prototype.getSelectedMediaNameByTabIndex=function(a){return a===cc.MediaPreviewType.ExtVideo||a===cc.MediaPreviewType.Video?"video":"image"},a.prototype.getCurrentSelectedMediaPreviewType=function(a){if("GeneralDescription"===a.getContentElementType())return a.contentElement.getValuesByMediaType().shape&&cc.MediaPreviewType.Shape||cc.MediaPreviewType.Clipart;var b=_.first(this.layoutSelectionStoreProvider.getLayoutSelectionStore(a.containerPageId).getOverrideByNode("media",a,"_preferred"));return this.getMediaTypeFromGallery(b,a)},a.prototype.getMediaTypeFromGallery=function(a,b){var c=b?this.getAllowedMediaOverride(b):void 0,d=a&&a.name||"Image";return c===PresetMediaTypes.COLUMNBG&&"Wix Video"!==d?cc.MediaPreviewType.SingleImage:-1!==this.mediaOverride.imageGalleriesTypes.indexOf(d)?cc.MediaPreviewType.MultipleImages:"video"===d?cc.MediaPreviewType.ExtVideo:"Strip Video"===d?cc.MediaPreviewType.Video:"Wix Video"===d?cc.MediaPreviewType.Video:c===PresetMediaTypes.SHAPE?this.getCE(b).getValuesByMediaType().shape&&cc.MediaPreviewType.Shape||cc.MediaPreviewType.Clipart:cc.MediaPreviewType.SingleImage},a.prototype.getCE=function(a){return(a.isList()&&a.children.length?a.children[0]:a).contentElement},a.prototype.typeToLabel=function(a){switch(a){case cc.MediaPreviewType.SingleImage:return this.flags.staticTextsWithTranslate?this.$translate.instant("editor.media-settings.types.image"):"Image";case cc.MediaPreviewType.Shape:case cc.MediaPreviewType.Clipart:return this.flags.staticTextsWithTranslate?this.$translate.instant("editor.media-settings.types.shape"):"Shape";case cc.MediaPreviewType.ExtVideo:case cc.MediaPreviewType.Video:return this.flags.staticTextsWithTranslate?this.$translate.instant("editor.media-settings.types.video"):"Video";case cc.MediaPreviewType.MultipleImages:return this.flags.staticTextsWithTranslate?this.$translate.instant("editor.media-settings.types.gallery"):"Gallery"}},a.prototype.getCurrentSelectedMediaTypeLabel=function(a){var b=this.getCurrentSelectedMediaPreviewType(a);return this.typeToLabel(b)},a.prototype.getAllowedMediaOverride=function(a){return"GeneralDescription"===a.getContentElementType()?PresetMediaTypes.SHAPE:this.layoutSelectionStoreProvider.getLayoutSelectionStore(a.containerPageId).getOverrideByNode("media",a,"allowedMediaOverrides")},a.prototype.getMediaValues=function(a){return this.extractActiveMediaValues(a,this.getCurrentSelectedMediaPreviewType(a))},a.prototype.getPatternMediaForNode=function(a){var b,c=this.sectionBackgroundService.getBackground(a);if("pattern"===c.mediaType)b=c;else{var d=this.patternService.getPatternOptions(1,!1);if(0===d.length)return null;b=d[0]}return this.convertBgPatternToMedia(a,b)},a.prototype.convertBgPatternToMedia=function(a,b){var c=this.simpleSolutionManager.getSectionSolution(a.containerPageId,this.modelTree.findIdentifyingNodeId(a))[0],d=this.patternService.getPatternItem({mediaId:b.mediaId},c);return d.rgbBackgroundColor=this.previewColors.getRGBColor(d.backgroundColor.display),d},a.prototype.getAllMediaValues=function(a){var b=_(a.contentElement.allValuesByMediaType).values().flatten().unique("fileName").value();if(this.flags.sectionMedia){var c=this.getPatternMediaForNode(a);c&&b.push(c)}return b},a.prototype.getActiveMediaValue=function(a){var b=this.getMediaValues(a);return b&&b.length&&b[0]},a.prototype.extractActiveMediaValues=function(a,b){var c=this.convertToMediaTypeName(b);return a.contentElement.allValuesByMediaType[c]},a.prototype.convertToMediaTypeName=function(a){var b=cc.MediaPreviewType[a];return"SingleImage"===b?"image":"MultipleImages"===b?"image":""+b.slice(0,1).toLowerCase()+b.slice(1)},a}();MediaOverrideManager.MO_IMAGE="Image",MediaOverrideManager.MO_STRIP_IMAGE="Strip Image",MediaOverrideManager.MO_SLIDESHOW="Slideshow",MediaOverrideManager.MO_STRIP_SLIDESHOW="Strip Slideshow",MediaOverrideManager.MO_VIDEO="video",MediaOverrideManager.MO_STRIP_VIDEO="Strip Video",MediaOverrideManager.MO_WIX_VIDEO="Wix Video",angular.module("siteGeneratorEditorInternal").service("mediaOverrideManager",MediaOverrideManager);var sectionMedia;!function(a){a.MediaSizeOptions={Box:"Box",Cropped:"Cropped",CroppedHeader:"CroppedHeader",Uncropped:"Uncropped",Strip:"Strip",StripHeader:"StripHeader",Column:"Column",Background:"Background",BackgroundHeader:"BackgroundHeader",BackgroundList:"BackgroundList",BackgroundFull:"BackgroundFull"},a.MediaLayoutFormats={Inline:"Inline",Strip:"Strip",Column:"Column",Background:"Background"}}(sectionMedia||(sectionMedia={}));var sectionMedia;!function(a){var b=function(){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=this;this.sectionBackgroundService=a,this.editorEventManager=b,this.columnService=c,this.solutionFetcher=d,this.mediaOverrideManager=e,this.flags=f,this.modelTree=g,this.nodeFetcher=h,this.nodeEditorManager=i,this.$q=j,this.applicationState=k,this.mediaTypeResolver=l,this.sectionBackgroundManager=m,this.undoRedo=n,this.mediaGallery=o,this.nodeEditorBiReporter=p,this.modelTreeHelpers=q,this.$log=r,this.solutionManager=s,this.colorBgOption={mediaType:"color",confId:-1},this.darkColorBgOption={mediaType:"color",confId:3,color:"D1"},this.isMediaActive=function(a,b){return void 0===b&&(b=t.getMediaKey(a)),t.applicationState.isInMobileEditMode()?a.getMobileArgsPolicy()[b]:a.getArgsMatchingPolicy()[b]},this.setMediaActive=function(a,b,c){void 0===b&&(b=t.getMediaKey(a)),t.applicationState.isInMobileEditMode()?a.getMobileArgsPolicy()[b]=c:a.getArgsMatchingPolicy()[b]=c}}return b.$inject=["sectionBackgroundService","editorEventManager","columnService","solutionFetcher","mediaOverrideManager","flags","modelTree","nodeFetcher","nodeEditorManager","$q","applicationState","mediaTypeResolver","sectionBackgroundManager","undoRedo","mediaGallery","nodeEditorBiReporter","modelTreeHelpers","$log","solutionManager"],b.prototype.toggleFirstMediaByType=function(a,b,c,d){var e=_.find(c.value,function(b){return b.mediaType===a});if(e){d.contentElement.hiddenMedia[a]=d.contentElement.hiddenMedia[a]||{};_.get(d.contentElement.hiddenMedia,a)[this.mediaGallery.getItemId(e)]=!b}},b.prototype.setSmallImageOption=function(a,b){var c=a.contentElement.getMediaField();return this.toggleAllMediaByType("shape",!1,c,a),this.toggleAllMediaByType("clipart",!1,c,a),this.toggleFirstMediaByType(b,!0,c,a),this.changeMediaFieldVisibility(a,!0),a.contentElement.fillValuesByMediaType(),this.mediaOverrideManager.setMediaOverride(a,MediaOverrideManager.MO_IMAGE),this.updateFieldOnViewer(a),this.$q.when(!0)},b.prototype.toggleAllMediaByType=function(a,b,c,d){var e=this;d.contentElement.hiddenMedia[a]=d.contentElement.hiddenMedia[a]||{};var f=_.get(d.contentElement.hiddenMedia,a);_.forEach(c.value,function(c){c.mediaType===a&&(f[e.mediaGallery.getItemId(c)]=!b)})},b.prototype.isFitMode=function(a){var b="GeneralDescription"!==a.getContentElementType();return this.flags.imageFitMode&&b&&this.mediaOverrideManager.isFitMode(a)},b.prototype.isShapeVisible=function(a){if(this.mediaOverrideManager.getAllowedMediaOverride(a)===PresetMediaTypes.SHAPE)return!!this.solutionFetcher.getSectionSolution(a.containerPageId,a.id)[0].segments[0].getLE().getMediaLayout();return!1},b.prototype.listBackgroundType=function(b){b=this.modelTree.findIdentifyingNode(b);var c=this.sectionBackgroundService.getBackground(b);return this.sectionBackgroundService.getBackground(b,"header")?"color"===c.mediaType?a.MediaSizeOptions.BackgroundHeader:a.MediaSizeOptions.BackgroundList:a.MediaSizeOptions.BackgroundFull},b.prototype.getSolution=function(a){return this.solutionFetcher.getSectionSolution(a.containerPageId,this.modelTree.findIdentifyingNodeId(a))},b.prototype.isListHeaderHidden=function(a,b){return void 0===b&&(b=this.getSolution(a)),a.isListHeader()&&b&&!b[0].isListHeader()},b.prototype.getMediaLayoutFormat=function(b){var c=this.getSolution(b);if(!c||!this.nodeFetcher.isNodeBody(b))return a.MediaLayoutFormats.Inline;if(this.isListHeaderHidden(b,c))return a.MediaLayoutFormats.Background;var d=this.solutionManager.getSegmentForNode(c,b).getLE();if(d.getMediaLayout()){if(1===d.cluster)return a.MediaLayoutFormats.Background;switch(this.mediaOverrideManager.getAllowedMediaOverride(b)){case PresetMediaTypes.COLUMNBG:return a.MediaLayoutFormats.Column;case PresetMediaTypes.COAST2COAST:return a.MediaLayoutFormats.Strip;default:return a.MediaLayoutFormats.Inline}}return a.MediaLayoutFormats.Background},b.prototype.layoutHasColumns=function(a){return this.mediaOverrideManager.getAllowedMediaOverride(a)===PresetMediaTypes.COLUMNBG},b.prototype.layoutHasStrip=function(a){return this.mediaOverrideManager.getAllowedMediaOverride(a)===PresetMediaTypes.COAST2COAST},b.prototype.layoutHasOnMedia=function(a){return a=this.modelTree.findIdentifyingNode(a),1===this.solutionFetcher.getSectionSolution(a.containerPageId,a.id)[0].segments[0].getLE().cluster},b.prototype.switchToColumnBackground=function(a,b){return this.switchToInline(a,b)},b.prototype.switchToBackgroundHeader=function(a,b){a=this.modelTree.findIdentifyingNode(a);var c=this.getBgOptionByType(a,b);return c&&(this.sectionBackgroundService.setBackground(a,this.colorBgOption),this.sectionBackgroundService.setBackground(a,c,"header")),this.changeMediaFieldVisibilityAndUpdateViewer(this.modelTree.getListHeader(a),!1)},b.prototype.switchToFullListBackground=function(a,b){a=this.modelTree.findIdentifyingNode(a);var c=this.getBgOptionByType(a,b);return c&&(this.sectionBackgroundService.setBackground(a,c),this.sectionBackgroundService.setBackground(a,c,"header")),this.changeMediaFieldVisibilityAndUpdateViewer(this.modelTree.getListHeader(a),!1)},b.prototype.switchToListBackground=function(a,b){a=this.modelTree.findIdentifyingNode(a);var c=this.getBgOptionByType(a,b);return c&&(this.sectionBackgroundService.setBackground(a,c),this.sectionBackgroundService.setBackground(a,this.colorBgOption,"header")),this.changeMediaFieldVisibilityAndUpdateViewer(this.modelTree.getListHeader(a),!1)},b.prototype.switchToBackground=function(a,b){var c=this.getBgOptionByType(a,b);return c&&this.sectionBackgroundService.setBackground(a,c),this.changeMediaFieldVisibilityAndUpdateViewer(a,!1)},b.prototype.getBgOptionByType=function(a,b){var c,d=this.sectionBackgroundService.getBackgroundOptions(a);switch(b){case cc.MediaPreviewType.SingleImage:c=ob.deepClone(d.image[0]),c.backgroundColor=this.darkColorBgOption;break;case cc.MediaPreviewType.Video:c=ob.deepClone(d.video[0]),c.backgroundColor=this.darkColorBgOption;break;case cc.MediaPreviewType.ExtVideo:c=d.extVideo[0];case cc.MediaPreviewType.Pattern:var e=this.sectionBackgroundManager.getBackgroundSingleOrList(a);c=e&&this.mediaTypeResolver.toCoreType(b)===e.mediaType?e:d.pattern[0];break;case cc.MediaPreviewType.MultipleImages:c={mediaType:"gallery",galleryType:SectionBackgroundManager.STRIP_SLIDESHOW,galleryProps:{},mediaItems:d.image,backgroundColor:this.darkColorBgOption}}return c},b.prototype.switchToStrip=function(a,b){var c=this;return this.inlineOn(a).then(function(){return c.stripOverride(a,b)})},b.prototype.switchToInline=function(a,b){var c=this;return this.inlineOn(a).then(function(){return c.inlineOverride(a,b)})},b.prototype.inlineOverride=function(a,b){var c=this.mediaOverrideManager.getGallery(a),d=this.getOverrideByType(a,b,!1);d&&(c&&c.name===d||this.mediaOverrideManager.setMediaOverride(a,d),this.updateViewerForInline(a,IEditEventType.TypeChange))},b.prototype.stripOverride=function(a,b){var c=this.mediaOverrideManager.getGallery(a),d=this.getOverrideByType(a,b,!0);d&&(c&&c.name===d||this.mediaOverrideManager.setMediaOverride(a,d),this.updateViewerForInline(a,IEditEventType.TypeChange))},b.prototype.getOverrideByType=function(a,b,c){switch(b){case cc.MediaPreviewType.SingleImage:return c?MediaOverrideManager.MO_STRIP_IMAGE:MediaOverrideManager.MO_IMAGE;case cc.MediaPreviewType.MultipleImages:var d=this.mediaOverrideManager.getGallery(a);if(!(this.mediaOverrideManager.getMediaTypeFromGallery(d)===cc.MediaPreviewType.MultipleImages))return c?MediaOverrideManager.MO_STRIP_SLIDESHOW:MediaOverrideManager.MO_SLIDESHOW;break;case cc.MediaPreviewType.ExtVideo:case cc.MediaPreviewType.Video:return this.layoutHasColumns(a)?MediaOverrideManager.MO_WIX_VIDEO:c?MediaOverrideManager.MO_STRIP_VIDEO:MediaOverrideManager.MO_VIDEO}return null},b.prototype.updateViewerForInline=function(a,b){var c=this.getMediaField(a.contentElement);this.editorEventManager.fieldChanged(c,!1,b,BIOrigins.MediaSetting)},b.prototype.nodeHasBackground=function(a){return!this.modelTreeHelpers.isItemOfList(a)&&!a.isListFooter()&&!!this.getBackgroundMedia(a)},b.prototype.getBackgroundMedia=function(a){var b=this.sectionBackgroundManager.getBackgroundSingleOrList(a);if(b&&b.mediaType!==core.BgMediaTypes.COLOR)return this.getBgAsMedia(a,b)},b.prototype.getBgAsMedia=function(a,b){if(b.mediaType===core.BgMediaTypes.PATTERN)return this.mediaOverrideManager.convertBgPatternToMedia(a,b);var c=b.mediaType===core.BgMediaTypes.GALLERY?core.BgMediaTypes.IMAGE:b.mediaType;return a.contentElement.allValuesByMediaType[c].find(function(a){return _.contains(b.mediaId||b.mediaIds[0],a.relativeUri)})},b.prototype.isMediaSizeBackground=function(b){return b===a.MediaSizeOptions.Background||b===a.MediaSizeOptions.BackgroundFull||b===a.MediaSizeOptions.BackgroundHeader||b===a.MediaSizeOptions.BackgroundList},b.prototype.reportBackgroundVisibilityBI=function(a,b){var c=this.getMediaField(a.contentElement),d=this.createEvent(a,c,IEditEventType.VisibilityChange),e=(f={},f[c.key]=b,f);this.nodeEditorBiReporter.reportBi(d,e,this.nodeEditorManager.getParent(d));var f},b.prototype.resetBackground=function(a){if(!this.modelTreeHelpers.isItemOfList(a)){var b=this.modelTree.findIdentifyingNode(a),c={header:b.isList()?this.sectionBackgroundService.getBackground(b,"header"):null,body:this.sectionBackgroundService.getBackground(b)};return b.isList()&&this.sectionBackgroundService.setBackground(b,this.colorBgOption,"header"),this.sectionBackgroundService.setBackground(b,this.colorBgOption),c}},b.prototype.restoreBackground=function(a,b){if(!this.modelTreeHelpers.isItemOfList(a)){var c=this.modelTree.findIdentifyingNode(a);this.sectionBackgroundService.setBackground(c,b.body),c.isList()&&b.header&&this.sectionBackgroundService.setBackground(c,b.header,"header")}},b.prototype.inlineOn=function(a){return this.moveMediaBgToInline(a),this.resetBackground(a),this.changeMediaFieldVisibilityAndUpdateViewer(a,!0)},b.prototype.moveMediaBgToInline=function(a){var b=this.sectionBackgroundManager.getBackgroundSingleOrList(a);if(b){var c=this.getMediaField(a.contentElement),d=c.data.value;switch(b.mediaType){case core.BgMediaTypes.IMAGE:var e=d.findIndex(function(a){return _.contains(b.mediaId,a.relativeUri)});e>-1?d.unshift.apply(d,d.splice(e)):this.$log.error("can't find the image in media",b);break;case core.BgMediaTypes.VIDEO:var f=_(d).filter(function(a){return a.mediaType===core.MediaItemTypes.Video}).each(function(a){return a.active=!1}).find(function(a){return _.contains(b.mediaId,a.relativeUri)});f&&(f.active=!0),f||this.$log.error("can't find the video in media",b);break;default:this.$log.warn("don't know how to move "+b.mediaType+" to inline")}}},b.prototype.createEvent=function(a,b,c,d){return void 0===d&&(d=BIOrigins.EditPanel),{node:a,isReferencedField:!1,key:b.key,field:b.data,contentElementField:b,maskChanged:c===IEditEventType.VisibilityChange,whatChanged:c,BIOrigin:d}},b.prototype.updateGalleryOnViewer=function(a,b){b||(b=this.getMediaField(a.contentElement));var c=this.createEvent(a,b,IEditEventType.GalleryLayoutChange);this.nodeEditorManager.updateViewer(c)},b.prototype.updateFieldOnViewer=function(a,b,c){void 0===c&&(c=IEditEventType.VisibilityChange),b||(b=this.getMediaField(a.contentElement));var d=this.createEvent(a,b,c);return this.nodeEditorManager.updateViewer(d)},b.prototype.getMediaKey=function(a){return Object.keys(a.values).find(function(b){return"media"===a.values[b].type})},b.prototype.getMediaField=function(a){var b=this,c=this.getMediaKey(a),d=a.values[c];return{key:c,data:d,get active(){return b.isMediaActive(a,c)},set active(d){b.setMediaActive(a,c,d)},contentElement:a}},b.prototype.changeMediaFieldVisibility=function(a,b){var c=this.getMediaField(a.contentElement);return c.active&&c.active===b?this.$q.when(!1):(c.active=b,this.updateFieldOnViewer(a,c).then(function(){return!0}))},b.prototype.updateViewerInternal=function(a,b){return b?this.$q.when():this.applicationState.isHeaderContent()?(this.updateViewerForInline(a,IEditEventType.ValueChange),this.$q.when()):this.sectionBackgroundService.updateViewer(this.modelTree.findIdentifyingNode(a))},b.prototype.changeMediaFieldVisibilityAndUpdateViewer=function(a,b){var c=this;return this.changeMediaFieldVisibility(a,b).then(function(b){return c.updateViewerInternal(a,b)})},b}();a.MediaSectionUtils=b,angular.module("siteGeneratorEditorInternal").service("mediaSectionUtils",b)}(sectionMedia||(sectionMedia={}));var sectionMedia;!function(a){var b=function(){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){this.mediaFitCAB=a,this.$q=b,this.flags=c,this.nodeFetcher=d,this.pubSub=e,this.consumerMediaUtils=f,this.mediaSectionUtils=g,this.mediaTypeResolver=h,this.mediaSizeResolver=i,this.mediaSectionCache=j,this.modelTree=k,this.PresetMediaType=l,this.slideShowService=m,this.galleryTypeCAB=n,this.modelTreeHelpers=o,this.applicationState=p,this.undoRedo=q}return b.$inject=["mediaFitCAB","$q","flags","nodeFetcher","pubSub","consumerMediaUtils","mediaSectionUtils","mediaTypeResolver","mediaSizeResolver","mediaSectionCache","modelTree","PresetMediaType","slideShowService","galleryTypeCAB","modelTreeHelpers","applicationState","undoRedo"],b.prototype.getSelectedOption=function(a){var b=this.getMediaType(a),c=this.getOptions(a,b);return c&&c.items.length>0?c.items[c.selectedIndex]:null},b.prototype.getOptions=function(b,c){if(this.flags.listItemSlideShow&&b.isListItem&&this.slideShowService.isSlideShow(b.identifyingNode))return this.getOptionsForSlideShow(b);switch(c){case cc.MediaPreviewType.SingleImage:return this.removeBgForListItem(b,this.getImageOptions(b));case cc.MediaPreviewType.MultipleImages:return this.removeBgForListItem(b,this.getGalleryOptions(b));case cc.MediaPreviewType.Video:return this.removeBgForListItem(b,this.getVideoOptions(b));case cc.MediaPreviewType.ExtVideo:return this.removeBgForListItem(b,this.getExternalVideoOptions(b));case cc.MediaPreviewType.Pattern:return this.getPatternOptions(b);case cc.MediaPreviewType.Clipart:case cc.MediaPreviewType.Shape:return this.buildOptions([a.MediaSizeOptions.Uncropped])}return this.buildOptions([])},b.prototype.updateMedia=function(a){var b=this;return this.updateMediaInternal(a).then(function(){return b.undoRedo.captureOperation(!1)})},b.prototype.updateMediaInternal=function(b){var c=this.mediaTypeResolver.getType(b),d=this.getSelectedOption(b);switch(d){case a.MediaSizeOptions.Box:case a.MediaSizeOptions.Cropped:
case a.MediaSizeOptions.CroppedHeader:case a.MediaSizeOptions.Uncropped:return this.mediaSectionUtils.switchToInline(b,c);case a.MediaSizeOptions.Strip:case a.MediaSizeOptions.StripHeader:return this.mediaSectionUtils.switchToStrip(b,c);case a.MediaSizeOptions.Column:return this.mediaSectionUtils.switchToColumnBackground(b,c);case a.MediaSizeOptions.Background:return this.mediaSectionUtils.switchToBackground(b,c);case a.MediaSizeOptions.BackgroundHeader:return this.mediaSectionUtils.switchToBackgroundHeader(b,c);case a.MediaSizeOptions.BackgroundList:return this.mediaSectionUtils.switchToListBackground(b,c);case a.MediaSizeOptions.BackgroundFull:return this.mediaSectionUtils.switchToFullListBackground(b,c);default:return Promise.reject("can't handle media size: "+d)}},b.prototype.normalizeResult=function(a){var b=_.isUndefined(a);return"boolean"==typeof a||b?{doCapture:!0,changed:a||b}:a},b.prototype.setOption=function(a,b,c){var d=this;if(!c){var e=this.getSelectedOption(a),f=this.getMediaType(a);b=this.fixTargetType(e,b),c=this.mediaSizeResolver.resolve(f,e,b)}return this.mediaSectionCache.set(a,b,c),this.setOptionInternal(a,b,c).then(function(a){var b=d.normalizeResult(a);return b.doCapture&&d.undoRedo.captureOperation(!1),b.changed})},b.prototype.getMedia=function(a){return this.getMediaByType(a,this.getMediaType(a))},b.prototype.isHeaderWithNoMedia=function(a){return this.applicationState.isHeaderContent()&&!this.mediaSectionUtils.isMediaActive(a.contentElement)},b.prototype.hasBackgroundOrHasNoMedia=function(b){return!this.modelTreeHelpers.isItemOfList(b)&&this.mediaSectionUtils.getMediaLayoutFormat(b)===a.MediaLayoutFormats.Background},b.prototype.getMediaByType=function(a,b){if(!this.isHeaderWithNoMedia(a)){if(a.isList()&&!a.contentElement){var c=this.modelTree.getListHeader(a);c&&(a=c)}if(this.hasBackgroundOrHasNoMedia(a)){var d=this.mediaSectionUtils.getBackgroundMedia(a);if(d)return d}var e=this.mediaTypeResolver.toCoreType(b);if(e){var f=a.contentElement.getValuesByMediaType()[e][0];return f.mediaType===core.MediaItemTypes.ExtVideo&&this.consumerMediaUtils.addExtVideoThumbnail(f),f}}},b.prototype.toggle=function(b,c,d){var e=this;if(c){var f=this.mediaSectionCache.get(b),g=f.mediaType,h=f.mediaSizeOption;return h===a.MediaSizeOptions.Uncropped&&(h=a.MediaSizeOptions.Cropped),this.setOption(b,g,h).then(function(){e.mediaSectionUtils.isMediaSizeBackground(h)&&e.mediaSectionUtils.reportBackgroundVisibilityBI(b,!0)})}this.setUnChangedSectionCache(b);var i;return this.mediaSectionUtils.nodeHasBackground(b)&&(i=this.mediaSectionUtils.resetBackground(b),this.mediaSectionUtils.reportBackgroundVisibilityBI(b,!1)),this.mediaSectionUtils.changeMediaFieldVisibilityAndUpdateViewer(b,!1).catch(function(){if(i){e.mediaSectionUtils.restoreBackground(b,i);e.mediaSectionUtils.getMediaField(b.contentElement).active=!1}})},b.prototype.setUnChangedSectionCache=function(a){this.mediaSectionCache.set(a,this.getMediaType(a),this.getSelectedOption(a))},b.prototype.getMediaType=function(a){return this.mediaTypeResolver.getType(a)},b.prototype.getVisibleMediaTypes=function(b,c,d){var e=this;if(this.applicationState.isInMobileEditMode())return[{mediaType:this.getMediaType(b)}];var f=c===a.MediaLayoutFormats.Background?cc.MediaPreviewType.Video:cc.MediaPreviewType.ExtVideo,g=function(){var a=[cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages,f];return e.modelTreeHelpers.isItemOfList(b)||a.push(cc.MediaPreviewType.Pattern),a},h=function(a,b){return angular.extend({},{mediaType:a},{disabled:!0,tooltip:b,onTooltipClick:function(){return e.applicationState.goToSwitchPresetMode(BIOrigins.MediaSetting)},showTooltipIcon:!1})};switch(d){case this.PresetMediaType.SHAPE:return this.applicationState.isHeaderContent()?[{mediaType:cc.MediaPreviewType.Clipart},{mediaType:cc.MediaPreviewType.Shape}]:[{mediaType:cc.MediaPreviewType.Clipart},{mediaType:cc.MediaPreviewType.Shape},h(cc.MediaPreviewType.ExtVideo,"media-settings.disabled-tab-video"),h(cc.MediaPreviewType.MultipleImages,"media-settings.disabled-tab-gallery")];case this.PresetMediaType.IMAGE:return this.getAllowedMediaTypes(b,g());case this.PresetMediaType.COAST2COAST:return this.getAllowedMediaTypes(b,[cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages,cc.MediaPreviewType.Video,cc.MediaPreviewType.Pattern]);case this.PresetMediaType.AGGREGATOR:return this.convertToMediaTypeTabs([cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages,cc.MediaPreviewType.Pattern]);case this.PresetMediaType.COLUMNBG:if(b.isListHeader()){var i=this.convertToMediaTypeTabs([cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages,cc.MediaPreviewType.Video,cc.MediaPreviewType.Pattern]);return this.mediaSectionUtils.isListHeaderHidden(b)&&(i=i.filter(function(a){return a.mediaType!==cc.MediaPreviewType.MultipleImages})),i}return this.convertToMediaTypeTabs([cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.Video]);default:return this.convertToMediaTypeTabs(g())}},b.prototype.getOptionsForSlideShow=function(b){var c={};return c.items=[a.MediaSizeOptions.BackgroundHeader,a.MediaSizeOptions.StripHeader],c.selectedIndex=0,c},b.prototype.removeBgForListItem=function(b,c){return this.modelTreeHelpers.isItemOfList(b)&&(c.items=c.items.filter(function(b){return b!==a.MediaSizeOptions.Background}),c.items[c.selectedIndex]||(c.selectedIndex=0)),c},b.prototype.setOptionInternal=function(a,b,c){switch(b){case cc.MediaPreviewType.SingleImage:return this.setImageOption(a,c);case cc.MediaPreviewType.MultipleImages:return this.setGalleryOption(a,c);case cc.MediaPreviewType.Video:case cc.MediaPreviewType.ExtVideo:return this.setVideoOption(a,c);case cc.MediaPreviewType.Pattern:return this.setPatternOption(a,c);case cc.MediaPreviewType.Clipart:case cc.MediaPreviewType.Shape:return this.mediaSectionUtils.setSmallImageOption(a,this.mediaTypeResolver.toCoreType(b));default:return this.$q.reject("Unsupported mediaType")}},b.prototype.setImageOption=function(b,c){var d=this;switch(c){case a.MediaSizeOptions.Background:return this.mediaSectionUtils.switchToBackground(b,cc.MediaPreviewType.SingleImage);case a.MediaSizeOptions.BackgroundHeader:return this.mediaSectionUtils.switchToBackgroundHeader(b,cc.MediaPreviewType.SingleImage);case a.MediaSizeOptions.BackgroundFull:return this.mediaSectionUtils.switchToFullListBackground(b,cc.MediaPreviewType.SingleImage);case a.MediaSizeOptions.BackgroundList:return this.mediaSectionUtils.switchToListBackground(b,cc.MediaPreviewType.SingleImage);case a.MediaSizeOptions.Cropped:return this.mediaSectionUtils.getMediaLayoutFormat(b)===a.MediaLayoutFormats.Inline&&this.mediaSectionUtils.isFitMode(b)?this.mediaFitCAB.open(b,!1).then(function(a){return{changed:a,doCapture:!1}}):this.mediaSectionUtils.switchToInline(b,cc.MediaPreviewType.SingleImage);case a.MediaSizeOptions.Uncropped:var e=this.getSelectedOption(b);return this.mediaFitCAB.open(b,!0).then(function(a){return{changed:a||d.undoFitMode(b,e),doCapture:!1}});case a.MediaSizeOptions.Column:return this.mediaSectionUtils.switchToColumnBackground(b,cc.MediaPreviewType.SingleImage);case a.MediaSizeOptions.Strip:return this.mediaSectionUtils.switchToStrip(b,cc.MediaPreviewType.SingleImage);default:return this.$q.reject("Can't set image to size "+c)}},b.prototype.undoFitMode=function(b,c){return c!==a.MediaSizeOptions.Cropped&&this.setImageOption(b,c).then(function(){return!1})},b.prototype.setGalleryOption=function(b,c){switch(c){case a.MediaSizeOptions.Background:return this.mediaSectionUtils.switchToBackground(b,cc.MediaPreviewType.MultipleImages);case a.MediaSizeOptions.BackgroundHeader:return this.mediaSectionUtils.switchToBackgroundHeader(b,cc.MediaPreviewType.MultipleImages);case a.MediaSizeOptions.BackgroundFull:return this.mediaSectionUtils.switchToFullListBackground(b,cc.MediaPreviewType.MultipleImages);case a.MediaSizeOptions.BackgroundList:return this.mediaSectionUtils.switchToListBackground(b,cc.MediaPreviewType.MultipleImages);case a.MediaSizeOptions.Box:return this.mediaSectionUtils.switchToInline(b,cc.MediaPreviewType.MultipleImages);case a.MediaSizeOptions.Column:return this.mediaSectionUtils.switchToColumnBackground(b,cc.MediaPreviewType.MultipleImages);case a.MediaSizeOptions.Strip:return this.mediaSectionUtils.switchToStrip(b,cc.MediaPreviewType.MultipleImages);default:return this.$q.reject("Can't set gallery to size "+c)}},b.prototype.setVideoOption=function(b,c){switch(c){case a.MediaSizeOptions.Background:return this.mediaSectionUtils.switchToBackground(b,cc.MediaPreviewType.Video);case a.MediaSizeOptions.BackgroundHeader:return this.mediaSectionUtils.switchToBackgroundHeader(b,cc.MediaPreviewType.Video);case a.MediaSizeOptions.BackgroundFull:return this.mediaSectionUtils.switchToFullListBackground(b,cc.MediaPreviewType.Video);case a.MediaSizeOptions.BackgroundList:return this.mediaSectionUtils.switchToListBackground(b,cc.MediaPreviewType.Video);case a.MediaSizeOptions.Box:return this.mediaSectionUtils.switchToInline(b,cc.MediaPreviewType.ExtVideo);case a.MediaSizeOptions.Column:return this.mediaSectionUtils.switchToColumnBackground(b,cc.MediaPreviewType.Video);case a.MediaSizeOptions.Strip:return this.mediaSectionUtils.switchToStrip(b,cc.MediaPreviewType.Video);default:return this.$q.reject("Can't set video to size "+c)}},b.prototype.setPatternOption=function(b,c){switch(c){case a.MediaSizeOptions.Background:return this.mediaSectionUtils.switchToBackground(b,cc.MediaPreviewType.Pattern);case a.MediaSizeOptions.BackgroundHeader:return this.mediaSectionUtils.switchToBackgroundHeader(b,cc.MediaPreviewType.Pattern);case a.MediaSizeOptions.BackgroundFull:return this.mediaSectionUtils.switchToFullListBackground(b,cc.MediaPreviewType.Pattern);case a.MediaSizeOptions.BackgroundList:return this.mediaSectionUtils.switchToListBackground(b,cc.MediaPreviewType.Pattern);case a.MediaSizeOptions.Column:return this.mediaSectionUtils.switchToColumnBackground(b,cc.MediaPreviewType.Pattern);default:return this.$q.reject("Can't set pattern to size "+c)}},b.prototype.getImageOptions=function(b){switch(this.mediaSectionUtils.getMediaLayoutFormat(b)){case a.MediaLayoutFormats.Inline:var c=this.flags.imageFitMode&&this.mediaSectionUtils.isFitMode(b);if(b.isListHeader()&&!c)return this.buildOptions([a.MediaSizeOptions.CroppedHeader,a.MediaSizeOptions.BackgroundHeader,a.MediaSizeOptions.BackgroundList,a.MediaSizeOptions.BackgroundFull]);var d=c?a.MediaSizeOptions.Uncropped:a.MediaSizeOptions.Cropped;return this.flags.imageFitMode?this.buildOptions([a.MediaSizeOptions.Cropped,a.MediaSizeOptions.Uncropped,a.MediaSizeOptions.Background],d):this.buildOptions([a.MediaSizeOptions.Cropped,a.MediaSizeOptions.Background],d);case a.MediaLayoutFormats.Strip:return b.isListHeader()?this.buildOptions([a.MediaSizeOptions.StripHeader,a.MediaSizeOptions.BackgroundHeader,a.MediaSizeOptions.BackgroundList,a.MediaSizeOptions.BackgroundFull]):this.flags.imageFitMode?this.buildOptions([a.MediaSizeOptions.Strip,a.MediaSizeOptions.Uncropped,a.MediaSizeOptions.Background]):this.buildOptions([a.MediaSizeOptions.Strip,a.MediaSizeOptions.Background]);case a.MediaLayoutFormats.Column:return this.flags.imageFitMode?this.buildOptions([a.MediaSizeOptions.Column,a.MediaSizeOptions.Uncropped,a.MediaSizeOptions.Background]):this.buildOptions([a.MediaSizeOptions.Column,a.MediaSizeOptions.Background]);case a.MediaLayoutFormats.Background:if(b.isListHeader()){if(b.isUserHidden())return this.buildOptions([a.MediaSizeOptions.BackgroundList]);var e=this.mediaSectionUtils.listBackgroundType(b),f=[a.MediaSizeOptions.BackgroundHeader,a.MediaSizeOptions.BackgroundList,a.MediaSizeOptions.BackgroundFull];return this.buildOptions(f,e)}return this.mediaSectionUtils.isShapeVisible(b)?this.buildOptions([a.MediaSizeOptions.Background]):this.mediaSectionUtils.layoutHasColumns(b)?this.flags.imageFitMode?this.buildOptions([a.MediaSizeOptions.Column,a.MediaSizeOptions.Uncropped,a.MediaSizeOptions.Background],a.MediaSizeOptions.Background):this.buildOptions([a.MediaSizeOptions.Column,a.MediaSizeOptions.Background],a.MediaSizeOptions.Background):this.mediaSectionUtils.layoutHasOnMedia(b)?this.flags.imageFitMode?this.buildOptions([a.MediaSizeOptions.Uncropped,a.MediaSizeOptions.Background],a.MediaSizeOptions.Background):this.buildOptions([a.MediaSizeOptions.Background]):this.mediaSectionUtils.layoutHasStrip(b)?this.flags.imageFitMode?this.buildOptions([a.MediaSizeOptions.Strip,a.MediaSizeOptions.Uncropped,a.MediaSizeOptions.Background],a.MediaSizeOptions.Background):this.buildOptions([a.MediaSizeOptions.Strip,a.MediaSizeOptions.Background],a.MediaSizeOptions.Background):this.flags.imageFitMode?this.buildOptions([a.MediaSizeOptions.Cropped,a.MediaSizeOptions.Uncropped,a.MediaSizeOptions.Background],a.MediaSizeOptions.Background):this.buildOptions([a.MediaSizeOptions.Cropped,a.MediaSizeOptions.Background],a.MediaSizeOptions.Background);default:throw new Error("Uknown media layout format")}},b.prototype.getGalleryOptions=function(b){switch(this.mediaSectionUtils.getMediaLayoutFormat(b)){case a.MediaLayoutFormats.Inline:return this.buildOptions([a.MediaSizeOptions.Box,a.MediaSizeOptions.Background]);case a.MediaLayoutFormats.Strip:return this.buildOptions([a.MediaSizeOptions.Strip,a.MediaSizeOptions.Background]);case a.MediaLayoutFormats.Column:return this.buildOptions([a.MediaSizeOptions.Column,a.MediaSizeOptions.Background]);case a.MediaLayoutFormats.Background:return b.isListHeader()?this.buildOptions([a.MediaSizeOptions.BackgroundHeader]):this.mediaSectionUtils.isShapeVisible(b)?this.buildOptions([a.MediaSizeOptions.Background]):this.mediaSectionUtils.layoutHasColumns(b)?this.buildOptions([a.MediaSizeOptions.Column,a.MediaSizeOptions.Background],a.MediaSizeOptions.Background):this.mediaSectionUtils.layoutHasOnMedia(b)?this.buildOptions([a.MediaSizeOptions.Background]):this.mediaSectionUtils.layoutHasStrip(b)?this.buildOptions([a.MediaSizeOptions.Strip,a.MediaSizeOptions.Background],a.MediaSizeOptions.Background):this.buildOptions([a.MediaSizeOptions.Box,a.MediaSizeOptions.Background],a.MediaSizeOptions.Background);default:throw new Error("Uknown media layout format")}},b.prototype.getVideoOptions=function(b){switch(this.mediaSectionUtils.getMediaLayoutFormat(b)){case a.MediaLayoutFormats.Strip:return this.buildOptions([a.MediaSizeOptions.Strip,a.MediaSizeOptions.Background]);case a.MediaLayoutFormats.Column:return this.buildOptions([a.MediaSizeOptions.Column,a.MediaSizeOptions.Background]);case a.MediaLayoutFormats.Background:if(b.isListHeader()){if(b.isUserHidden())return this.buildOptions([a.MediaSizeOptions.BackgroundList]);var c=this.mediaSectionUtils.listBackgroundType(b),d=[a.MediaSizeOptions.BackgroundHeader,a.MediaSizeOptions.BackgroundList,a.MediaSizeOptions.BackgroundFull];return this.buildOptions(d,c)}return this.mediaSectionUtils.isShapeVisible(b)?this.buildOptions([a.MediaSizeOptions.Background]):this.mediaSectionUtils.layoutHasColumns(b)?this.buildOptions([a.MediaSizeOptions.Column,a.MediaSizeOptions.Background],a.MediaSizeOptions.Background):this.mediaSectionUtils.layoutHasOnMedia(b)?this.buildOptions([a.MediaSizeOptions.Background]):this.mediaSectionUtils.layoutHasStrip(b)?this.buildOptions([a.MediaSizeOptions.Strip,a.MediaSizeOptions.Background],a.MediaSizeOptions.Background):this.buildOptions([a.MediaSizeOptions.Box,a.MediaSizeOptions.Background],a.MediaSizeOptions.Background);default:throw new Error("Uknown media layout format")}},b.prototype.getExternalVideoOptions=function(b){return this.buildOptions([a.MediaSizeOptions.Box,a.MediaSizeOptions.Background])},b.prototype.getPatternOptions=function(b){if(b.isListHeader()){if(b.isUserHidden())return this.buildOptions([a.MediaSizeOptions.BackgroundList]);var c=this.mediaSectionUtils.listBackgroundType(b),d=[a.MediaSizeOptions.BackgroundHeader,a.MediaSizeOptions.BackgroundList,a.MediaSizeOptions.BackgroundFull];return this.buildOptions(d,c)}return this.buildOptions([a.MediaSizeOptions.Background])},b.prototype.buildOptions=function(a,b){return void 0===b&&(b=null),b?{items:a,selectedIndex:a.findIndex(function(a){return a===b})}:{items:a,selectedIndex:0}},b.prototype.fixTargetType=function(a,b){return this.consumerMediaUtils.isVideo(b)?this.isVideoInlineSize(a)?cc.MediaPreviewType.ExtVideo:cc.MediaPreviewType.Video:b},b.prototype.isVideoInlineSize=function(b){return b===a.MediaSizeOptions.Box||b===a.MediaSizeOptions.Cropped||b===a.MediaSizeOptions.Uncropped},b.prototype.filterTabAsSlideshow=function(a){return this.flags.listItemSlideShow&&a.isListItem&&this.slideShowService.isSlideShow(a.identifyingNode)},b.prototype.getAllowedMediaTypes=function(a,b){return this.filterTabAsSlideshow(a)||this.mediaSectionUtils.isListHeaderHidden(a)?this.convertToMediaTypeTabs(b.filter(function(a){return a!==cc.MediaPreviewType.MultipleImages})):this.convertToMediaTypeTabs(b)},b.prototype.convertToMediaTypeTabs=function(a){var b=this;return a.map(function(a){return b.convertToMediaTypeTab(a)})},b.prototype.convertToMediaTypeTab=function(a,b,c){return void 0===b&&(b=!0),{mediaType:a,disabled:!b,tooltip:c}},b}();a.SectionMedia=b,angular.module("siteGeneratorEditorInternal").service("sectionMedia",b)}(sectionMedia||(sectionMedia={}));var sectionMedia;!function(a){var b=function(){function b(a,b,c,d,e){this.selections=a,this.nodeFetcher=b,this.modelTreeHelpers=c,this.modelTree=d,this.mediaOverrideManager=e}return b.$inject=["selections","nodeFetcher","modelTreeHelpers","modelTree","mediaOverrideManager"],b.prototype.set=function(a,b,c){this.selections.getForNode(a).mediaSizeOptions={mediaType:b,mediaSizeOption:c}},b.prototype.get=function(b){var c=this.selections.getForNode(b).mediaSizeOptions;return c||(this.modelTreeHelpers.isItemOfList(b)?{mediaType:cc.MediaPreviewType.SingleImage,mediaSizeOption:a.MediaSizeOptions.Cropped}:this.nodeFetcher.isNodeBody(b)?b.isListHeader()?{mediaType:cc.MediaPreviewType.SingleImage,mediaSizeOption:a.MediaSizeOptions.BackgroundFull}:{mediaType:cc.MediaPreviewType.SingleImage,mediaSizeOption:a.MediaSizeOptions.Background}:{mediaType:cc.MediaPreviewType.Clipart,mediaSizeOption:a.MediaSizeOptions.Box})},b}();a.MediaSectionCache=b,angular.module("siteGeneratorEditorInternal").service("mediaSectionCache",b)}(sectionMedia||(sectionMedia={}));var sectionMedia;!function(a){var b=function(){function b(a){this.$log=a,this.transitions={},this.initTransitions()}return b.$inject=["$log"],b.prototype.resolve=function(a,b,c){var d=_.get(this.transitions,c+"."+a+"."+b);if(!d){return(b?this.$log.info:this.$log.error)("couldn't find a target size from type: "+a+" size: "+(b||"unknown size(!!)")+" to "+c),b}return d},b.prototype.initTransitions=function(){var b=a.MediaSizeOptions,c=cc.MediaPreviewType;this.transitions[c.SingleImage]={},this.transitions[c.SingleImage][c.MultipleImages]={},this.transitions[c.SingleImage][c.MultipleImages][b.Box]=b.Cropped,this.transitions[c.SingleImage][c.ExtVideo]={},this.transitions[c.SingleImage][c.ExtVideo][b.Box]=b.Cropped,this.transitions[c.MultipleImages]={},this.transitions[c.MultipleImages][c.SingleImage]={},this.transitions[c.MultipleImages][c.SingleImage][b.Cropped]=b.Box,this.transitions[c.MultipleImages][c.SingleImage][b.Uncropped]=b.Box,this.transitions[c.MultipleImages][c.SingleImage][b.CroppedHeader]=b.BackgroundHeader,this.transitions[c.MultipleImages][c.SingleImage][b.StripHeader]=b.BackgroundHeader,this.transitions[c.MultipleImages][c.Video]={},this.transitions[c.MultipleImages][c.Pattern]={},this.transitions[c.ExtVideo]={},this.transitions[c.ExtVideo][c.SingleImage]={},this.transitions[c.ExtVideo][c.SingleImage][b.Cropped]=b.Box,this.transitions[c.ExtVideo][c.SingleImage][b.Uncropped]=b.Box,this.transitions[c.Video]={},this.transitions[c.Video][c.SingleImage]={},this.transitions[c.Video][c.SingleImage][b.CroppedHeader]=b.BackgroundHeader,this.transitions[c.Video][c.SingleImage][b.StripHeader]=b.BackgroundHeader,this.transitions[c.Pattern]={},this.transitions[c.Pattern][c.SingleImage]={},this.transitions[c.Pattern][c.SingleImage][b.CroppedHeader]=b.BackgroundHeader,this.transitions[c.Pattern][c.SingleImage][b.StripHeader]=b.BackgroundHeader,this.transitions[c.Pattern][c.SingleImage][b.Strip]=b.Background,this.transitions[c.Pattern][c.SingleImage][b.Column]=b.Background,this.transitions[c.Pattern][c.SingleImage][b.Cropped]=b.Background,this.transitions[c.Pattern][c.SingleImage][b.Uncropped]=b.Background,this.transitions[c.Pattern][c.Video]={},this.transitions[c.Pattern][c.Video][b.Strip]=b.Background,this.transitions[c.Pattern][c.Video][b.Column]=b.Background,this.transitions[c.Pattern][c.ExtVideo]={},this.transitions[c.Pattern][c.ExtVideo][b.Box]=b.Background,this.transitions[c.Pattern][c.MultipleImages]={},this.transitions[c.Pattern][c.MultipleImages][b.Box]=b.Background,this.transitions[c.Pattern][c.MultipleImages][b.Strip]=b.Background,this.transitions[c.Pattern][c.MultipleImages][b.Column]=b.Background},b}();a.MediaSizeResolver=b}(sectionMedia||(sectionMedia={})),angular.module("siteGeneratorEditorInternal").service("mediaSizeResolver",sectionMedia.MediaSizeResolver);var sectionMedia;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h){this.solutionFetcher=a,this.mediaOverrideManager=b,this.modelTree=c,this.nodeFetcher=d,this.sitePartTypes=e,this.modelTreeHelpers=f,this.consumerMediaUtils=g,this.sectionBackgroundManager=h}return a.$inject=["solutionFetcher","mediaOverrideManager","modelTree","nodeFetcher","sitePartTypes","modelTreeHelpers","consumerMediaUtils","sectionBackgroundManager"],a.prototype.toCoreType=function(a){switch(a){case cc.MediaPreviewType.Clipart:return core.MediaItemTypes.Clipart;case cc.MediaPreviewType.ExtVideo:return core.MediaItemTypes.ExtVideo;case cc.MediaPreviewType.Pattern:return core.MediaItemTypes.Pattern;case cc.MediaPreviewType.Shape:return core.MediaItemTypes.Shape;case cc.MediaPreviewType.MultipleImages:case cc.MediaPreviewType.SingleImage:return core.MediaItemTypes.Image;case cc.MediaPreviewType.Video:return core.MediaItemTypes.Video}},a.prototype.getType=function(a){var b=this.nodeFetcher.getNodeSitePart(a),c=this.solutionFetcher.getSectionSolution(a.containerPageId,this.modelTree.findIdentifyingNodeId(a),b);if(c)return a.isListHeader()&&!c[0].isListHeader()?this.getMediaTypeFromBackground(a):this.getInlineMediaType(a,c)},a.prototype.getTypeLabel=function(a){return this.consumerMediaUtils.mediaTypeToLabel(this.getType(a))},a.prototype.getInlineMediaType=function(a,b){var c=b[0].segments[0].getLE(),d=c.getMediaLayout();return this.modelTreeHelpers.isItemOfList(a)||d||!this.nodeFetcher.isNodeBody(a)?this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(a):this.getMediaTypeFromBackground(a)},a.prototype.getMediaTypeFromBackground=function(a){var b=this.sectionBackgroundManager.getBackgroundSingleOrList(a);if(!b)return null;switch(b.mediaType){case"image":return cc.MediaPreviewType.SingleImage;case"video":return cc.MediaPreviewType.Video;case"pattern":return cc.MediaPreviewType.Pattern;case"color":return null;case"gallery":return cc.MediaPreviewType.MultipleImages;default:return cc.MediaPreviewType.SingleImage}},a}();a.MediaTypeResolver=b}(sectionMedia||(sectionMedia={})),angular.module("siteGeneratorEditorInternal").service("mediaTypeResolver",sectionMedia.MediaTypeResolver);var GOOGLE_CUSTOM_SEARCH_PARAMS={API_KEY:"AIzaSyDpFJq5nEyslcM84d8vtPDSebsD2MDaKvI",ENGINE_ID:"002755370288863419013:qihq0vmslui"};angular.module("siteGeneratorEditorInternal").constant("GOOGLE_CUSTOM_SEARCH_PARAMS",GOOGLE_CUSTOM_SEARCH_PARAMS);var RECOMMENDED_TAB_PARAMS={IMAGE_PUBLIC_ROOT_GUID:"8aa61c23-bff9-4426-ae8c-c1fd569764bf",SHAPE_PUBLIC_ROOT_GUID:"b1dbbe33-cc31-4b23-b865-a81680f70976",CLIPART_PUBLIC_ROOT_GUID:"cfad1a19-5cae-4d27-9cb7-fbf39ab6b644",VIDEO_PUBLIC_ROOT_GUID:"d6b6b972-952c-4ab0-b46a-a6c05a0a94a5",BG_IMAGE_PUBLIC_ROOT_GUID:"c2a37dfc-36cf-4bfd-b940-55bac7bdc9e6",PRIVATE_IMAGES_AMOUNT:8,PUBLIC_IMAGES_AMOUNT:24,MEDIA_GALLERY_VERSION:"1.485.0"};angular.module("siteGeneratorStaticsConsumerAppInternal").constant("RECOMMENDED_TAB_PARAMS",RECOMMENDED_TAB_PARAMS);var GoogleImageSearch=function(){function a(a,b,c){this.GOOGLE_CUSTOM_SEARCH_PARAMS=a,this.$window=b,this.$http=c}return a.$inject=["GOOGLE_CUSTOM_SEARCH_PARAMS","$window","$http"],a.prototype.fromGoogleImage=function(a){return{link:a.link,title:a.title,width:a.image.width,height:a.image.height,webpageLink:a.image.contextLink}},a.prototype.search=function(a){var b=this,c=a.query.split(/\s/);return a.png&&c.indexOf("png")<0&&c.push("-png"),a.video&&c.indexOf("video")<0&&c.push("-video"),this.$http.get("https://www.googleapis.com/customsearch/v1",{params:{q:c.join(" "),num:a.maxResults,searchType:"image",rights:"(cc_publicdomain|cc_attribute|cc_sharealike|cc_noncommercial).-(cc_nonderived)",googlehost:"google.com",imgColorType:"color",imgType:"photo",cx:this.GOOGLE_CUSTOM_SEARCH_PARAMS.ENGINE_ID,key:this.GOOGLE_CUSTOM_SEARCH_PARAMS.API_KEY}}).then(function(c){return(c.data.items||[]).filter(function(c){if(0===a.hostnames.length)return!0;var d=b.$window.document.createElement("a");return d.href=c.link,a.hostnames.some(function(a){return d.hostname.endsWith("."+a)||d.hostname===a})}).map(function(a){return b.fromGoogleImage(a)})})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("googleImageSearch",GoogleImageSearch);var ManageTpaButton=function(){function a(a,b,c,d,e,f,g){this.tpaService=a,this.tpaSettings=b,this.$element=c,this.$scope=d,this.consumerBiLogger=e,this.osUtils=f,this.$attrs=g}return a.$inject=["tpaService","tpaSettings","$element","$scope","consumerBiLogger","osUtils","$attrs"],a.prototype.$postLink=function(){var a=this;this.$scope.$watch(function(){return a.tpaType},function(b){a.tpaSettings.registerTpaHandlers(b,a.node)}),this.$element.bind("click",function(){return a.$scope.$apply(function(){var b=a.tpaService.getAppIdByType(a.tpaType),c=a.tpaService.getInstanceId(a.node);a.consumerBiLogger.apps.clickOnManageApp(a.origin,b,a.tpaType,c),a.consumerBiLogger.provisioning.tpaIntent(c,b,a.getProvisionType(a.origin),"ADI"),a.tpaSettings.openManagement(a.origin,a.node,a.tpaType)})})},a.prototype.getProvisionType=function(a){return a===TpaSettings.SECTION_ORIGIN?"GFPP_MANAGE":"TOP_BAR_MANAGE"},Object.defineProperty(a.prototype,"tpaType",{get:function(){return this.tpaService.getNaiveType(this.$scope.$eval(this.$attrs[a.DIRECTIVE_NAME]))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"node",{get:function(){var b=this.$attrs[a.ATTR_KEYS.NODE];return b&&this.$scope.$eval(b)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"origin",{get:function(){return this.$attrs[a.ATTR_KEYS.ORIGIN]},enumerable:!0,configurable:!0}),a}();ManageTpaButton.DIRECTIVE_NAME="manageTpaButton",ManageTpaButton.ATTR_KEYS={NODE:"tpaNode",ORIGIN:"manageTpaButtonOrigin"},angular.module("siteGeneratorStaticsConsumerAppInternal").directive(ManageTpaButton.DIRECTIVE_NAME,function(){return{controller:ManageTpaButton,restrict:"A"}});var LocationManager=function(){function a(a,b){var c=this;this.locationApi=a,this.geoCoder=b,this.decodeLocation=function(a){return c.geoCoder.decode(a)}}return a.$inject=["locationApi","geoCoder"],a.prototype.getLocation=function(){return this.locationApi.getGeoLocation().then(this.decodeLocation)},a}();angular.module("siteGeneratorLocationManagerInternal").service("locationManager",LocationManager);var GeoCoder=function(){function a(a){this.$q=a}return a.$inject=["$q"],a.prototype.decode=function(a){var b={location:{lat:a.latitude,lng:a.longitude}},c=new google.maps.Geocoder,d=this.$q.defer();return c.geocode(b,function(a,b){switch(b){case google.maps.GeocoderStatus.OK:d.resolve(a[0]);break;case google.maps.GeocoderStatus.ZERO_RESULTS:d.resolve(null);break;default:d.reject(b)}}),d.promise},a}();angular.module("siteGeneratorLocationManagerInternal").service("geoCoder",GeoCoder);var TpaSectionManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G){var H=this;this.$q=a,this.$timeout=b,this.$translate=c,this.storyServices=d,this.miscUtils=e,this.CcDialogBuilder=f,this.applicationParameters=g,this.consumerBiLogger=h,this.consumerBiLoggerHelpers=i,this.flags=j,this.simpleSolutionManager=k,this.mobileSolutionManager=l,this.tpaService=m,this.tpaDefinition=n,this.nodeManipulationService=o,this.undoRedo=p,this.sitePartTypes=q,this.pagesManager=r,this.presetHelpers=s,this.layoutSolver=t,this.wizardService=u,this.notification=v,this.modelTree=w,this.applicationState=x,this.LayoutGroup=y,this.designKit=z,this.overlayManager=A,this.previewService=B,this.themeChooser=C,this.tpaSolutionManager=D,this.CONSUMER_DIALOGS=E,this.consumerMenu=F,this.defaultSections=G,this.sectionNode=function(a){return _.find(H.modelTree.getTpaNodes(),{contentElementType:a})}}return a.$inject=["$q","$timeout","$translate","storyServices","miscUtils","CcDialogBuilder","applicationParameters","consumerBiLogger","consumerBiLoggerHelpers","flags","simpleSolutionManager","mobileSolutionManager","tpaService","tpaDefinition","nodeManipulationService","undoRedo","sitePartTypes","pagesManager","presetHelpers","layoutSolver","wizardService","notification","modelTree","applicationState","LayoutGroup","designKit","overlayManager","previewService","themeChooser","tpaSolutionManager","CONSUMER_DIALOGS","consumerMenu","defaultSections"],a.prototype.popupAfterTpaAdded=function(a,b){var c=this;void 0===b&&(b=!1);var d=a.toLowerCase(),e="popups.after-tpa-"+d+"-add";if(!this.storyServices.story.popupConfigurations[e]){var f=b?"-section":"",g=this.$translate.instant("popups.after-tpa-"+d+"-add"+f+".text",{TPA:a});d===this.applicationParameters.tpaTypes.GetSubscribers.type.toLowerCase()&&(g=g+' <button class="p9b-text-button" ng-click="$ctrl.runCallback(\'open-learn-more\')">'+this.$translate.instant("popups.after-tpa-getsubscribers-learn-more")+"</button>");var h={heading:this.$translate.instant("popups.after-tpa-"+d+"-add.heading",{TPA:a}),text:g,acceptButtonText:this.miscUtils.translateIfPossible("popups.after-tpa-"+d+"-add.button")||this.$translate.instant("general.got-it"),hideFirstTimeCheckBox:!0,icon:d+".gif",biDialogName:this.CONSUMER_DIALOGS.TPA_AFTER_UPDATE,callback:function(a){"open-learn-more"===a&&c.CcDialogBuilder.showSupportIframe(c.$translate.instant("help.tpa.getsubscribers-learn-more"),"tpa-added-help")}};this.CcDialogBuilder.showFirstTimeNotice(h).then(function(a){c.storyServices.story.popupConfigurations[e]=!0})}},a.prototype.addTpaWidget=function(a,b,c){var d=this;return this.nodeManipulationService.addTpaWidget(a,b,c).then(function(b){var c=d.tpaService.getNaiveType(a.contentElementType);return d.createTpaPagesSolution(b,c)})},a.prototype.getSuggestionForHeader=function(a){var b=this.defaultSections.getSectionOfceType(a.node.contentElementType);return{ceType:b.ceType,id:b.id,rawSectionBrief:b}},a.prototype.createTpaPagesSolution=function(a,b,c,d){var e=this;return void 0===c&&(c={}),_.sequencePromises(a,function(a,f){a.alias=b;var g=_.find(a.children,function(a){return-1!==a.contentElementType.indexOf(b)});e.tpaSolutionManager.createTpaPageSolution(g,a).then(function(b){e.flags.mobileEditor&&e.mobileSolutionManager.createMobileSolution(e.sitePartTypes.BODY,b),0!==f||c.navigate||e.consumerBiLogger.pagesManager.addNewPageSuccess(d,g.getContentElementType(),a.getDisplayName(),g.getId(),"",0,0,"",e.tpaService.getAppId(g),"by app",!1),e.consumerBiLogger.pagesManager.addNewPageSuccess(d,g.getContentElementType(),a.getDisplayName(),g.getId(),"",0,0,"",e.tpaService.getAppId(g),"by app",!1),e.consumerBiLoggerHelpers.incExtraPagesCount()})})},a.prototype.addTpa=function(a,b,c){var d=this;void 0===b&&(b=void 0),void 0===c&&(c={navigate:!0,showMSG:!0});var e=this.$q.defer();return this.nodeManipulationService.addTpa(a,function(b){return d.postAddTpa(b,a,c).then(function(a){return e.resolve(a)})},b),e.promise},a.prototype.postAddTpa=function(a,b,c){var d=this;void 0===c&&(c={
navigate:!1,showMSG:!1});var e=b.contentElementType,f=this.consumerBiLoggerHelpers.getEditMode(),g=a[0];return this.createTpaPagesSolution(a,b.contentElementType,c,f).then(function(){if(c.navigate)return d.storyServices.story.selectedPage=g.id,d.pagesManager.goToPage(g.id).then(function(){if(e===d.applicationParameters.tpaTypes.Stores.type)return d.recalculateSiteHeader()}).then(function(){if(d.shouldPublish(b))return d.wizardService.publishStory(void 0,void 0,!0).catch(function(){return d.$q.when()})}).then(function(){var a=d.layoutSolver.getPartSolutions("body",d.storyServices.story.selectedPage),b=a.getSelectedSolution();if(d.storyServices.emitRenderedPart("body",b,a.getSolutionHeight(),d.storyServices.story.selectedPage,"desktop"),e===d.applicationParameters.tpaTypes.Stores.type)return d.storyServices.reRender("header")})}).then(function(){return c.showMSG&&d.notification.show(d.$translate.instant("popups.after-tpa-add.text",{TPA:b.getContentElementType()}),2e3),g})},Object.defineProperty(a.prototype,"isAddMode",{get:function(){return this.applicationState.isForcedAddMode()||this.applicationState.isAddMode()},enumerable:!0,configurable:!0}),a.prototype.provisionWidget=function(a,b,c){var d=a.getContentElementType(),e=this.tpaService.getNaiveType(d),f=this.tpaService.sectionType(e);return this.tpaService.isTpaAdded(e)||!f?this.$q.when(!0):"hidden"===f?this.provisionWidgetWithHiddenSections(a,b,c):this.provisionSectionForWidget(this.sectionNode(e),e)},a.prototype.provisionWidgetWithHiddenSections=function(a,b,c){var d=this;return this.addTpaWidget(a,b,c).then(function(a){console.log(""+a),d.wizardService.publishStory(void 0,void 0,!0)}).catch(function(){return d.$q.when()})},a.prototype.provisionSectionForWidget=function(a,b){var c=this;return this.addTpa(a,void 0,{showMSG:!0}).then(function(){if(b===c.applicationParameters.tpaTypes.Stores.type)return c.recalculateSiteHeader().then(function(){return c.storyServices.reRender("header")})}).then(function(){if(c.shouldPublish(a))return c.wizardService.publishStory(void 0,void 0,!0).catch(function(){return c.$q.when()})})},a.prototype.recalculateSiteHeader=function(){var a=this,b=this.layoutSolver.getSelectedSolution(this.sitePartTypes.HEADER);return b[0].isDirty=!0,b[0].calculateLayoutGroupStatus().then(function(){return a.simpleSolutionManager.detectAndHandleHeaderOrFooterFailure(a.sitePartTypes.HEADER)})},a.prototype.shouldPublish=function(a){return a.getContentElementType()!==this.applicationParameters.tpaTypes.GetSubscribers.type&&this.userCanPublish()},a.prototype.shouldPublishForTpaWidget=function(a){if(a.isTpaWidget){var b=this.tpaService.getNaiveType(a.getContentElementType());return this.applicationParameters.tpaTypes[b].publishAfterAddition&&this.userCanPublish()}},a.prototype.userCanPublish=function(){return!this.applicationState.isSupportStaffEditing(!1)},a.prototype.handleTpaWidgetPreviewSelected=function(a,b,c,d,e,f){var g=this,h=this.$q.defer(),i=d||this.overlayManager.dropTargetId,j=i!==DropTargetCalculator.FirstDropTargetId&&i;return this.provisionWidget(b,c,f).then(function(){g.nodeManipulationService.addNewContentElement(b,!1,a,function(b){return g.tpaSolutionManager.createTpaPageSolution(b,a,j).then(function(a){return g.flags.mobileEditor&&g.mobileSolutionManager.createMobileSolution(g.sitePartTypes.BODY,a),(e?g.$q.when():g.storyServices.reRender("body").then(function(){if(g.shouldPublishForTpaWidget(b))return g.wizardService.publishStory(void 0,void 0,!0)})).then(function(){return e?g.$q.when():g.waitForHeightChanged(a[0])}).then(function(){return h.resolve(b)})})},c,j)}),h.promise},a.prototype.waitForHeightChanged=function(a){var b=this,c=a.getBoundingHeight(),d=0;return _.whilePromises(function(a){return!a&&d<6},function(){return b.$timeout(function(){return d++,a.getBoundingHeight()!==c},500)})},a.prototype.handleTpaPreviewSelected=function(a,b,c,d,e){var f=this,g=this.$q.defer();this.isAddMode||delete b.node.dockToWidget;var h=b.preset&&!!_.get(b.preset,"data.isFullWidth");return b.node.setTpaFullWidth(h),this.isAddMode?b.node.isTpaWidget?this.handleTpaWidgetPreviewSelected(a,b.node,b.preset,c,d,e).then(function(a){f.consumerMenu.calcMenuAnchors().then(function(){var c=b.node.contentElementType;c=f.tpaService.getNaiveType(c),g.resolve(a),d||f.undoRedo.captureOperation(),f.popupAfterTpaAdded(c,!0)})}):b.node.isTpa&&this.addTpa(b.node,b.preset).then(function(a){f.consumerMenu.calcMenuAnchors().then(function(){var c=b.node.contentElementType,e=_.find(a.children,{contentElementType:c});g.resolve(e),d||f.undoRedo.captureOperation(!0,!1,!0),f.popupAfterTpaAdded(c)}).then(function(){return f.storyServices.recalculateCurrentPage()})}):this.tpaService.updateStyle(b.node,b.preset,b.isInverted,function(){f.setTpaBackground(b),f.undoRedo.captureOperation(!0,!1,!1,!0),g.resolve(b.node)}),g.promise},a.prototype.setTpaBackground=function(a){var b=this.simpleSolutionManager.getSectionSolution(a.node.containerPageId,a.node.id)[0],c=b.getLgData().strip.color;this.designKit.setTpaBg(b,a.isInverted),this.flags.invertTpaPalette&&c!==b.getLgData().strip.color&&this.storyServices.reRender("body",a.node.containerPageId)},a.prototype.solveTPACE=function(a,b,c,d,e,f){var g=this,h=a[b],i=this.presetHelpers.generateFlattenedListOfPreviewsForTpa(d,[h])[0];return this.handleTpaPreviewSelected(c,i,e,!0,f).then(function(a){return g.previewService.waitForChanges().then(function(){return g.flags.tpaHeader?{node:a,preview:i}:a})})},a}();angular.module("siteGeneratorBuilderInternal").service("tpaSectionManager",TpaSectionManager);var SectionManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da){this.$q=a,this.layoutSolver=b,this.CONSUMER_DIALOGS=c,this.$translate=d,this.modelTree=e,this.notification=f,this.storyServices=g,this.mediaOverride=h,this.mediaOverrideManager=i,this.miscUtils=j,this.undoRedo=k,this.tpaService=l,this.tpaDefinition=m,this.flags=n,this.applicationState=o,this.applicationParameters=p,this.sitePartTypes=q,this.simpleSolutionManager=r,this.solutionFetcher=s,this.mobileSolutionManager=t,this.layoutSelectionStoreProvider=u,this.designKit=v,this.siteModelData=w,this.contentElementGenerator=x,this.pagesManager=y,this.nodeManipulationService=z,this.contentManager=A,this.contentSource=B,this.defaultsService=C,this.presetHelpers=D,this.presetPreviewGenerator=E,this.presetPreviewSorter=F,this.$log=G,this.wizardService=H,this.CcDialogBuilder=I,this.consumerBiLogger=J,this.overlayManager=K,this.solutionManager=L,this.consumerDialogs=M,this.consumerMenu=N,this.healthCheck=O,this.errorReportService=P,this.Solution=Q,this.sectionBackgroundService=R,this.initBI=S,this.mergedHeaderService=T,this.wizContentManager=U,this.slideShowService=V,this.wizWebsite=W,this.wizPresetsFilter=X,this.siteConverterPresetPicker=Y,this.linkDetailsManager=Z,this.tpaSectionManager=$,this.tpaSolutionManager=_,this.nodeFetcher=aa,this.pubSub=ba,this.presetsStrategyFactory=ca,this.tpaHeader=da,this.totalSteps=0,this.currentStep=0}return a.$inject=["$q","layoutSolver","CONSUMER_DIALOGS","$translate","modelTree","notification","storyServices","mediaOverride","mediaOverrideManager","miscUtils","undoRedo","tpaService","tpaDefinition","flags","applicationState","applicationParameters","sitePartTypes","simpleSolutionManager","solutionFetcher","mobileSolutionManager","layoutSelectionStoreProvider","designKit","siteModelData","contentElementGenerator","pagesManager","nodeManipulationService","contentManager","contentSource","defaultsService","presetHelpers","presetPreviewGenerator","presetPreviewSorter","$log","wizardService","CcDialogBuilder","consumerBiLogger","overlayManager","solutionManager","consumerDialogs","consumerMenu","healthCheck","errorReportService","Solution","sectionBackgroundService","initBI","mergedHeaderService","wizContentManager","slideShowService","wizWebsite","wizPresetsFilter","siteConverterPresetPicker","linkDetailsManager","tpaSectionManager","tpaSolutionManager","nodeFetcher","pubSub","presetsStrategyFactory","tpaHeader"],a.prototype.setConfigurationForSection=function(a,b){var c,d=this.storyServices.story.selectedPage,e=this.layoutSolver.getSelectedSolution(this.sitePartTypes.BODY,d);if(this.flags.sectionMedia&&(c={bg:this.sectionBackgroundService.getBackground(a.node,"body",a.solution)},a.node.isList()&&(c.headerBg=this.sectionBackgroundService.getBackground(a.node,"header",a.solution))),this.isAddMode){var f=void 0,g=void 0;this.applicationState.isAddPage()||(b=b||this.overlayManager.dropTargetId,f=b===DropTargetCalculator.FirstDropTargetId?void 0:_.last(this.solutionFetcher.getSectionSolution(d,b)),g=e&&e[e.indexOf(f)+1]),this.designKit.setConfigurationForSection(a.solution,f,g,void 0,c),this.presetHelpers.preparePresetPreviewForRender(this.sitePartTypes.BODY,a)}else{var h=this.applicationState.getContentFocus();if(!h||!a.preset||this.applicationState.isSectionColorsMode())return;if(h.sitePart===this.sitePartTypes.BODY){var i=this.solutionFetcher.getSectionSolution(d,a.node.id);this.designKit.setSpecificConfigurationForSection(a.solution,i,void 0,c)}else this.designKit.setConfigurationForHeaderFooter(a.solution,h.sitePart);this.presetHelpers.preparePresetPreviewForRender(h.sitePart,a)}},a.prototype.forceAddMode=function(a){this.applicationState.forceAddMode(a)},Object.defineProperty(a.prototype,"isAddMode",{get:function(){return this.applicationState.isForcedAddMode()||this.applicationState.isAddMode()},enumerable:!0,configurable:!0}),a.prototype.getDefaultAnimationDefinition=function(){return{direction:this.simpleSolutionManager.Animation.Direction.REVERSE,type:this.simpleSolutionManager.Animation.Type.CROSS_FADE,duration:.5}},a.isNodeDuplicated=function(a){return!!a&&_.filter(_.map(a.getDependencies(),function(a){return a.containerPageId}),function(b){return!!b&&b!==a.containerPageId}).length>0},a.prototype.startAnimatedRender=function(a,b){return void 0===b&&(b=this.getDefaultAnimationDefinition()),this.storyServices.renderAnimated(a,ListSpanManager.MinBodyHeight,b)},a.prototype.popupAfterTpaAdded=function(a,b){this.tpaSectionManager.popupAfterTpaAdded(a,b)},a.prototype.addTpa=function(a,b,c){return void 0===b&&(b=void 0),this.tpaSectionManager.addTpa(a,b,c)},a.prototype.isHeaderCanBeAdded=function(a){return!(this.pagesManager.isHome(this.storyServices.story.selectedPage)&&a===DropTargetCalculator.FirstDropTargetId)},a.prototype.addTPAHeader=function(a,b,c){var d=this;return this.flags.tpaHeader&&this.isHeaderCanBeAdded(c)&&this.tpaHeader.isSupportHeader(a.contentElementType)?this.tpaHeader.get(a).then(function(e){return e?(d.setConfigurationForSection(e),d.addSectionToPage(e,b,c,!0)):(d.$log.warn("can't create tpa header for",a,b),d.$q.when())},function(a){console.log(a)}):this.$q.when()},a.prototype.addingTpaHeader=function(a,b,c){var d=this,e=this.tpaHeader.getPrevNodeInPage(a,c),f=null===e?DropTargetCalculator.FirstDropTargetId:e.id;return this.addTPAHeader(b.node,c,f).then(function(){return d.storyServices.reRender(),d.consumerMenu.calcMenuAnchors(),a})},a.prototype.handlePreviewSelected=function(a,b,c,d){var e=this;c=c||this.storyServices.story.selectedPage;var f=this.modelTree.getPageNodeById(c);if(a.isTpa)return this.tpaSectionManager.handleTpaPreviewSelected(f,a).then(function(c){if(b)return c;if(c.isTpa){var d=c.containerPageId;f=e.modelTree.getPageNodeById(d)}return e.addingTpaHeader(c,a,f)});if(a.previewNode.crop&&(a.node.crop=a.node.crop||[],_.defaults(a.node.crop,a.previewNode.crop)),a.previewNode.imageErrors&&a.previewNode.imageErrors.length>0&&this.errorReportService.reportError(a.node.containerPageId,a.node.id,"changeLayout",a.previewNode.imageErrors),b){var g=d?{sitePart:d}:this.applicationState.getContentFocus();return g.sitePart!==this.sitePartTypes.BODY?this.applyHeaderOrFooterPreset(a,g.sitePart,f):this.replaceSection(a,f)}return this.addSectionToPage(a,f,this.overlayManager.dropTargetId)},a.prototype.applyHeaderOrFooterPreset=function(a,b,c){var d=this;return this.$q.when().then(function(){return a.preset?d.layoutSolver.applyLayoutPreset(b,void 0,a.node,a.preset.data):(d.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(a.lss.clone(),b,b,d.layoutSelectionStoreProvider.getKeyMap(a.solution)),d.designKit.setSectionSelections(a.solution,a.selections),_.each(d.layoutSolver.getSelectedSolution(b),function(a){a.isDirty=!0}),d.layoutSolver.calculateSolverStatus(void 0,void 0,!0))}).then(function(){if(d.flags.mergedHeader&&b===d.sitePartTypes.HEADER){var e=_(a.flags).includes("fix");d.wizardService.setFixedHeader(e);var f=_(a.flags).includes("mergeHeader"),g=d.modelTree.getPageNodeById(d.modelTree.homePageId),h=d.mergedHeaderService.isHeaderMerged(g);if(f||h){var i=g===c?f:h;return d.mergedHeaderService.setHeaderMerged(i,g,!0)}}}).then(function(){return d.storyServices.reRender(b)}).then(function(){if(d.flags.mobileEditor){var a=d.mobileSolutionManager.getMobileSitePartSolution(b);d.simpleSolutionManager.setSolutionDirty(a)}}).then(function(){return d.undoRedo.captureOperation(),a.node})},a.prototype.replaceSection=function(a,b){var c=this;return this.$q.when().then(function(){c.modelTree.replaceNode(a.previewNode,b),_.each(a.solution,function(a){return a.setPage(b.id)});var d=c.solutionFetcher.getSectionSolution(b.id,a.previewNode.getId()),e=d.reduce(function(a,b){return b.getBoundingHeight()+a},0);c.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(a.lss,a.dummyPageId,b.id,c.layoutSelectionStoreProvider.getKeyMap(a.solution,a.previewNode),void 0,!1),a.selections&&c.designKit.setSectionSelections(a.solution,a.selections);var f={type:c.applicationState.isSectionColorsMode()?c.simpleSolutionManager.Animation.Type.NO_TRANSITION:c.simpleSolutionManager.Animation.Type.SLIDE_HORIZONTAL,direction:c.simpleSolutionManager.Animation.Direction.NORMAL};return c.simpleSolutionManager.replaceSectionOnPage(b.id,a.previewNode.getId(),a.solution).then(function(a){return a.oldHeight=e,c.startAnimatedRender(a,f)}).then(function(){if(c.flags.mobileEditor){var b=c.mobileSolutionManager.getMobileSolution(d);c.mobileSolutionManager.setMobileSolution(a.solution,b),c.simpleSolutionManager.setSolutionDirty(b)}}).then(function(){return c.undoRedo.captureOperation(),a.previewNode})})},a.prototype.addSectionToPage=function(a,b,c,d){var e=this;return void 0===c&&(c=DropTargetCalculator.FirstDropTargetId),void 0===d&&(d=!1),this.$q.when().then(function(){var f=e.layoutSelectionStoreProvider.getKeyMap(a.solution,a.previewNode),g=a.previewNode.getIds(),h=e.modelTree.addNewNodeWithValues(a.previewNode,b,c);_.each(a.solution,function(a){a.clearCache(),a.setPage(b.getId())});var i;if(e.flags.coreNewZigZag){var j=h.getIds(),k=_.zipObject(g,j);i=e.layoutSelectionStoreProvider.getMergedKeyMap(f,k)}else i=e.layoutSelectionStoreProvider.getKeyMap(a.solution,a.previewNode);e.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(a.lss,a.dummyPageId,b.getId(),i,f);var l=c!==DropTargetCalculator.FirstDropTargetId&&c,m=a.previewNode.getId();return e.simpleSolutionManager.addSectionToPage(b.getId(),m,a.solution,l).then(function(b){if(e.flags.mobileEditor&&e.mobileSolutionManager.createMobileSolution(e.sitePartTypes.BODY,a.solution),!d){b.oldHeight=OverlayManager.DropTargetHeight;var c={type:e.simpleSolutionManager.Animation.Type.CROSS_FADE,direction:e.simpleSolutionManager.Animation.Direction.NORMAL,duration:.5};return e.startAnimatedRender(b,c).then(function(){if(!a.previewNode.isList()){var b=e.overlayManager.listSpanManager.getSegmentByNodeId(m,e.sitePartTypes.BODY),c=b&&b.getLENoError(),d=c&&c.getLayoutBySubType("image");if(d&&e.mediaOverride.isUnexpectedHeight(c,d))return e.tpaSectionManager.waitForHeightChanged(a.solution[0])}}).then(function(){return e.consumerMenu.calcMenuAnchors()}).then(function(){e.undoRedo.captureOperation()})}}).then(function(){return e.flags.smartAssist&&e.pubSub.fire(PubSub.events.SECTION_ADDED,e.nodeFetcher.getNode(m).node),a.previewNode})})},a.prototype.duplicateSectionToMobile=function(a,b,c,d,e){if(this.flags.mobileEditor){var f=this.mobileSolutionManager.getMobileSolution(c.sourceSection),g=this.layoutSelectionStoreProvider.getKeyMap(f,a),h=this.mobileSolutionManager.createMobileSolution(this.sitePartTypes.BODY,c.newSection),i=this.layoutSelectionStoreProvider.getKeyMap(h,b);this.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(d,e,e,i,g,!0,!0)}},a.prototype.duplicateSection=function(a){var b=this,c=this.storyServices.story.selectedPage,d=this.modelTree.duplicateNode(a,this.modelTree.getPageNodeById(c));this.simpleSolutionManager.duplicateSection(c,a,d).then(function(e){var f,g=b.layoutSelectionStoreProvider.getLayoutSelectionStore().clone(),h=b.layoutSelectionStoreProvider.getKeyMap(e.sourceSection,a);if(b.flags.coreNewZigZag){var i=_.zipObject(a.getIds(),d.getIds());f=b.layoutSelectionStoreProvider.getMergedKeyMap(h,i)}else f=b.layoutSelectionStoreProvider.getKeyMap(e.newSection,d);return b.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(g,c,c,f,h,!0),b.duplicateSectionToMobile(a,d,e,g,c),b.simpleSolutionManager.addSectionToPage(c,d.id,e.newSection,a.id,!0,void 0,!0).then(function(a){return b.tpaSolutionManager.setTpaInitialHeight(e.newSection),b.startAnimatedRender(a)})}).then(function(){return b.consumerMenu.calcMenuAnchors()}).then(function(){b.flags.smartAssist&&b.pubSub.fire(PubSub.events.SECTION_DUPLICATED,d),b.consumerBiLogger.sectionManagement.sectionDuplicateSuccess(d.id,d.getContentElementType(),d.alias,b.tpaService.getAppId(d)),b.undoRedo.captureOperation()})},a.prototype.duplicatePage=function(a){var b=this,c=a.getId();return this.consumerBiLogger.pagesManager.duplicatePage(c),this.pagesManager.duplicatePage(a).then(function(d){var e=b.layoutSelectionStoreProvider.getNodesMap(a,d),f=b.layoutSelectionStoreProvider.getLayoutSelectionStore(),g=f.clone(),h=_(a.children).map(function(c){var d=b.solutionFetcher.getSectionSolution(a.id,c.id);return b.layoutSelectionStoreProvider.getKeyMap(d,c)}).flatten().value(),i=b.layoutSelectionStoreProvider.getMergedKeyMap(h,e);if(b.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(g,a.getId(),d.getId(),i,h,!0),b.flags.mobileEditor){var j=_(a.children).map(function(c){var d=b.solutionFetcher.getSectionSolution(a.id,c.id),e=b.mobileSolutionManager.getMobileSolution(d);return b.layoutSelectionStoreProvider.getKeyMap(e,c)}).flatten().value(),k=b.layoutSelectionStoreProvider.getMergedKeyMap(j,e);b.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(g,a.getId(),d.getId(),k,j,!0,!0)}var l=_.mapKeys(f.getSolutionLGs(a.getId()),function(a,b){return e[b]});f.setSolutionLGs(d.id,l),b.flags.smartAssist&&b.pubSub.fire(PubSub.events.PAGE_DUPLICATED,d),b.consumerBiLogger.pagesManager.duplicatePageSuccess(c)})},a.prototype.updateSection=function(a){var b,c=this,d=a.pageId,e=a.sectionId,f=_.get(a,"sectionData.fields"),g=this.modelTree.getPageNodeById(d),h=g.children.find(function(a){return a.id===e});b=a.listItemId?h.children.find(function(b){return b.id===a.listItemId}):h;var i=b&&b.contentElement.values;if(i)return _.each(f,function(a){a.key&&i[a.key]&&(i[a.key].value=a.value,_.isUndefined(a.visible)||(b.argsMatchingPolicy[a.key]=a.visible))}),this.layoutSolver.onNodeChanged().then(function(){return c.undoRedo.captureOperation()})},a.prototype.moveSectionToAnotherPage=function(a,b){var c,d=this,e=this.modelTree.getPageNodeById(this.storyServices.story.selectedPage),f=null;if(e&&b&&a&&e!==b){var g=_.last(b.children),h=g.getId(),i=this.layoutSelectionStoreProvider.getLayoutSelectionStore().clone();this.nodeManipulationService.moveNodeToPage(a,e,b)&&(this.applicationState.setSteady(!1),this.linkDetailsManager.updateLinkDetailsOnPageMove(a,e),f=this.simpleSolutionManager.removeSectionOnPage(e.getId(),a.getId(),!1).then(function(a){return c=a.oldSolution.slice(a.startIndex,a.startIndex+a.length),d.startAnimatedRender(a)}).then(function(){return d.applicationState.clearContentFocus(),d.storyServices.story.selectedPage=b.getId(),d.pagesManager.goToPage(b.getId())}).then(function(){return d.storyServices.recalculateCurrentPage()}).then(function(){d.nodeManipulationService.reassignSolutionSectionToPage(c,e,b);var f=d.layoutSelectionStoreProvider.getKeyMap(c,a);if(d.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(i,e.getId(),b.getId(),f,f,!0),d.flags.mobileEditor){var g=d.mobileSolutionManager.getMobileSolution(c);d.nodeManipulationService.reassignSolutionSectionToPage(g,e,b);var j=d.layoutSelectionStoreProvider.getKeyMap(g,a);d.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(i,e.getId(),b.getId(),j,j,!0,!0)}return d.simpleSolutionManager.addSectionToPage(b.getId(),a.getId(),c,h,!1,void 0,!0)}).then(function(a){return d.startAnimatedRender(a)}).then(function(){return d.consumerMenu.calcMenuAnchors()}).then(function(){d.undoRedo.captureOperation()}).finally(function(){d.applicationState.setSteady(!0)})),this.flags.smartAssist&&this.pubSub.fire(PubSub.events.SECTION_MOVED,a)}return this.$q.when(f)},a.prototype.makeIntoPage=function(a){var b,c,d=this,e=this.modelTree.findIdentifyingNode(a),f=e.isList()?e:a,g=this.storyServices.story.selectedPage;return this.applicationState.clearContentFocus(),this.applicationState.goToBuilder(!1),this.consumerBiLogger.contentEditor.switchListItemToPage(f.getId(),this.storyServices.story.selectedPage,f.getSpecificContentElementType(),f.alias),this.nodeManipulationService.makePageFromNode(a).then(function(c){d.flags.smartAssist&&d.pubSub.fire(PubSub.events.CREATED_PAGE_FROM_ITEM,c),b=c.containerPageId;var e=d.layoutSelectionStoreProvider.getLayoutSelectionStore().getOverrideByNode("media",a,"allowedMediaOverrides");return d.defaultsService.getPresetsForNode(c).then(function(a){var b=_.sortBy(a,function(a){return e!==_.get(a.data,["groups",0,"layouts",0,"mediaType"])});return _.whilePromises(function(a){return!(a&&a[0]||!b.length)},function(){var a=b.shift();if(a&&a.data&&!a.data.isTpa)return d.layoutSolver.createLayoutPresetPreviewSolutions([a],c,!0)})}).then(function(a){var e=a&&a[0];return e?(d.designKit.setConfigurationForSection(e.solution),d.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(e.lss,e.dummyPageId,b,d.layoutSelectionStoreProvider.getKeyMap(e.solution)),_.each(e.solution,function(a){a.setPage(b)}),d.modelTree.setContainerPageId(c,b),d.flags.mobileEditor&&d.mobileSolutionManager.createMobileSolution(d.sitePartTypes.BODY,e.solution),d.simpleSolutionManager.addSectionToPage(b,c.id,e.solution)):(d.$log.warn("cannot find applicable preset for created node "+c.id),d.modelTree.setContainerPageId(c,b),d.simpleSolutionManager.createJokerSection(c).then(function(a){return d.simpleSolutionManager.addSectionToPage(b,c.id,a,void 0,!0,c.contentElement,!0)}))})}).then(function(a){return c=a,d.storyServices.story.selectedPage=b,d.pagesManager.goToPage(b)}).then(function(){if(c)return d.startAnimatedRender(c)}).then(function(){return d.consumerMenu.calcMenuAnchors()}).then(function(){d.undoRedo.captureOperation(),d.applicationState.goToPageManager(),d.consumerBiLogger.contentEditor.itemMovedToAnotherPageSuccess(f.getId(),g,f.getSpecificContentElementType(),f.alias)})},a.prototype.addListItem=function(a,b,c){var d,e=this,f=a.containerPageId,g=a.getId();if(this.flags.mobileEditor){var h=this.solutionFetcher.getSectionSolution(f,g);d=this.mobileSolutionManager.getMobileSolution(h),this.mobileSolutionManager.addListItem(d,b,c)}return this.simpleSolutionManager.addListItem(f,g,b,c).then(function(b){if(e.flags.mobileEditor){var c=b.newSolution.slice(b.startIndex,b.startIndex+b.newLength);e.mobileSolutionManager.setMobileSolution(c,d),e.simpleSolutionManager.setSolutionDirty(d)}return e.selectFirstUnHiddenSlide(a),e.startAnimatedRender(b,{direction:e.simpleSolutionManager.Animation.Direction.REVERSE,type:e.simpleSolutionManager.Animation.Type.CROSS_FADE})}).then(function(){e.flags.smartAssist&&e.pubSub.fire(PubSub.events.LIST_ITEM_ADDED_OR_SHOWN,b)})},a.prototype.removeListItem=function(a,b,c){var d,e=this,f=a.containerPageId,g=a.getId();if(this.flags.mobileEditor){var h=this.solutionFetcher.getSectionSolution(f,g);d=this.mobileSolutionManager.getMobileSolution(h),this.mobileSolutionManager.removeListItem(d,c)}return this.simpleSolutionManager.removeListItem(f,g,b,c).then(function(b){if(e.flags.mobileEditor){var c=b.newSolution.slice(b.startIndex,b.startIndex+b.newLength);e.mobileSolutionManager.setMobileSolution(c,d),e.simpleSolutionManager.setSolutionDirty(d)}return e.selectFirstUnHiddenSlide(a),e.startAnimatedRender(b,{direction:e.simpleSolutionManager.Animation.Direction.REVERSE,type:e.simpleSolutionManager.Animation.Type.CROSS_FADE})}).then(function(){e.flags.smartAssist&&e.pubSub.fire(PubSub.events.LIST_ITEM_DELETED_OR_HIDDEN,b)})},a.prototype.selectFirstUnHiddenSlide=function(a){this.flags.listItemSlideShow&&this.flags.listItemNewDesign&&this.slideShowService.isSlideShow(a)&&this.slideShowService.selectUnhiddenItem(a,0)},a.prototype.getNodeIndexInPage=function(a){var b=this.modelTree.getPageNodeById(this.storyServices.story.selectedPage),c=_.filter(b.children,function(a){return!a.isUserHidden()});return _.findIndex(c,function(b){return b.getId()===a})},a.prototype.getAddSectionPosition=function(){var a=this.overlayManager.dropTargetId,b=a!==DropTargetCalculator.FirstDropTargetId&&a;return b?this.getNodeIndexInPage(b)+1:0},a.prototype.geSectionPositionInPage=function(a){return this.getNodeIndexInPage(a.getId())},a.prototype.showDeleteSectionPopup=function(b,c,d){var e=this;this.consumerBiLogger.sectionManagement.sectionMenuDeleteSectionClick(b.getId(),b.getContentElementType(),b.alias,this.tpaService.getAppId(b),c,a.isNodeDuplicated(b));var f={heading:this.$translate.instant("popups.deletesection.heading"),text:this.$translate.instant("popups.deletesection.text"),acceptButtonText:this.$translate.instant("general.delete"),rejectButtonText:this.$translate.instant("general.cancel"),icon:"delete-single.gif",biDialogName:this.CONSUMER_DIALOGS.DELETE_SECTION,onHelp:function(){e.CcDialogBuilder.showSupportIframe(e.$translate.instant("help.popup.deleteSection"),e.CONSUMER_DIALOGS.DELETE_SECTION_HELP)}};return(this.applicationState.isSilent()?this.$q.resolve():this.CcDialogBuilder.showNegativeConfirmation(f)).then(function(){return b.identifyingNode&&b.identifyingNode.isList()&&(b=b.identifyingNode),e.deleteSection(b,c)},function(){return d&&d(),e.$q.reject()})},a.prototype.showHideNodePopup=function(a){var b;if(a===this.sitePartTypes.HEADER)b=ConsumerDialogTypes.CANT_REMOVE_HEADER_POPUP;else{if(a!==this.sitePartTypes.FOOTER)return this.$q.when();b=ConsumerDialogTypes.CANT_REMOVE_FOOTER_POPUP}return this.consumerDialogs.showDialog(b)},a.prototype.countPagesContainingNode=function(a){var b=this;return this.modelTree.getPagesList().filter(function(c){return b.modelTree.findNodeAndParentAndPageByNodeId(a.getId(),c)}).length},a.prototype.clearTpa=function(a){var b=this;if(a.isTpaNode()){var c=this.tpaService.getNaiveType(a.contentElementType);if("hidden"===this.tpaService.sectionType(c)){var d=this.modelTree.getPagesNodes();if(0===d.reduce(function(a,d){var e=b.modelTree.getTpaWidgetsInPage(d,c);return a.concat(e)},[]).length){var e=d.filter(function(a){return a.tpaExtraPage===c})[0];this.nodeManipulationService.deletePageById(e.id,"body",_.noop,_.noop)}}}},a.prototype.deleteSection=function(b,c,d){var e=this;void 0===d&&(d=!1);var f=ob.deepClone(b),g=b.containerPageId,h="Contact"!==b.contentElementType&&this.countPagesContainingNode(b)<2;return this.nodeManipulationService.deleteNode(b,g,h,function(){e.applicationState.clearContentFocus(),e.simpleSolutionManager.removeSectionOnPage(g,b.getId(),h).then(function(a){return e.startAnimatedRender(a)}).then(function(){return e.clearTpa(b)}).then(function(){return e.consumerMenu.calcMenuAnchors()}).then(function(){e.applicationState.goToBuilder(!1),e.undoRedo.captureOperation()}).then(function(){if(e.tpaSectionManager.shouldPublishForTpaWidget(b)){var a=!!e.flags.mobileEditor;return e.wizardService.publishStory(void 0,void 0,a)}}).then(function(){e.flags.smartAssist&&e.pubSub.fire(PubSub.events.SECTION_DELETED,f),e.consumerBiLogger.sectionManagement.deleteSectionSuccess(b.getId(),b.getContentElementType(),b.alias,e.tpaService.getAppId(b),c,a.isNodeDuplicated(b)),d||e.notification.show("toasters.section-deleted","general.undo",function(){e.undoRedo.undo()})})})},a.prototype.addSection=function(a,b){var c=DropTargetCalculator.FirstDropTargetId;if(b)"GeneralDescription"!==a.contentElementType&&(c=a.getId());else{var d=a.containerPageId,e=this.overlayManager.listSpanManager.getAllInBody();if("footer"===d)e.length>0&&(c=e[e.length-1].node.getId());else{var f=_.findIndex(e,{node:a});f>0&&(c=e[f-1].node.getId())}}this.overlayManager.lockDropTarget(c),this.applicationState.goToAddSectionMode()},a.prototype.makeTpaSectionObject=function(a,b){return b&&(a.alias=b),{id:b||a.contentElementType,ceType:a.contentElementType,isTpa:!0,widgetNode:a,isRecommendedForPage:!0}},a.prototype.modifySectionRecommendationsBySelectedOffer=function(a,b){var c,d,e,f=this,g=function(g,h){void 0===h&&(h=g);var i=f.applicationParameters.tpaTypes[g]?f.applicationParameters.tpaTypes[g].type:g;if(b[i]){if(-1!==c.indexOf(h))return!1;var j=_.find(e,function(a){return a.contentElementType===h});if(j)return a.suggestions.splice(d,0,f.makeTpaSectionObject(j,f.$translate.instant("builder.sections."+AddSection.tpaWidgetAliases[h]))),d++,!0}};_.any(_.values(b))&&(c=a.suggestions.filter(function(a){return a.isRecommendedForPage}).map(function(a){return a.ceType}),d=_.findIndex(a.suggestions,function(a){return!a.isRecommendedForPage}),e=this.modelTree.getAvailableWidgetsNodes(),g(core.TpaTypes.Stores,core.TpaWidgetTypes.Stores_Slider_Gallery_Widget)||g(core.TpaTypes.Blog,core.TpaWidgetTypes.Blog_Post_Gallery),g(core.TpaTypes.GetSubscribers,core.TpaWidgetTypes.GetSubscribers_Widget),g(core.TpaWidgetTypes.Events_Single))},a.prototype.utilCreateSelectedOffersMap=function(){return _.reduce(this.storyServices.story.selectedOffers,function(a,b){return a[b.type]=b.checked||b.autoProvisioned,a},{})},a.prototype.postProcessSuggestedTpaSections=function(a){var b=this.modelTree.getAvailableWidgetsNodes();_.each(a,function(a){if(!a.isTpa){var c=_.find(b,function(b){return b.contentElementType===a.ceType});c&&(a.isTpa=!0,a.widgetNode=c)}})},a.prototype.addStepMessage=function(a){this.notification.showNextStep(a)},a.prototype.makeSectionsInGeneralPage=function(a,b){var c=this;void 0===b&&(b=!0),this.forceAddMode(!0);var d=this.contentManager.suggestedSectionsByPage(a.alias);b&&(this.totalSteps=d.length+1,this.currentStep=0);var e=DropTargetCalculator.FirstDropTargetId;return _.sequencePromises(d,function(d){return b&&c.addStepMessage(c.$translate.instant("builder.progress-bar.step-message.adding-section",{type:d.id||d.ceType})),c.makeSectionInPage(a,d,e).then(function(a){e=a&&a.id||e})}).then(function(){c.forceAddMode(!1),b&&c.addStepMessage(c.$translate.instant("builder.progress-bar.step-message.finishing-touches"))})},a.prototype.addNewPage=function(a){var b=this;return this.pagesManager.addPage(a).then(function(a){return a&&a.id?b.pagesManager.goToPage(a.id).then(function(){return b.storyServices.story.selectedPage=a.id,b.makeSectionsInGeneralPage(a,!1)}):b.$q.when()})},a.prototype.addSiteConverterStepsToProgressBar=function(a){var b=this;this.wizWebsite.siteConverterProgressSteps.forEach(function(c){return a(b.$translate.instant(c))})},a.prototype.addStepsToProgressBar=function(a,b,c){var d=this;this.addStepMessage(""),this.addStepMessage(this.$translate.instant("builder.progress-bar.step-message.header-and-footer")),c&&this.addStepMessage(this.$translate.instant("builder.progress-bar.step-message.online-content")),a.forEach(function(a){
d.addStepMessage(d.$translate.instant("builder.progress-bar.step-message.adding-section",{type:a.id||a.ceType}))}),b.forEach(function(a){d.addStepMessage(d.$translate.instant("builder.progress-bar.step-message.adding-page",{pageTitle:a.pageTitle}))}),this.addStepMessage(this.$translate.instant("builder.progress-bar.step-message.finishing-touches"))},a.prototype.getHomePageSections=function(a){var b=this.utilCreateSelectedOffersMap(),c=this.contentSource.suggestedSections(b.Stores);return a||this.modifySectionRecommendationsBySelectedOffer(c,b),this.postProcessSuggestedTpaSections(c.suggestions),c.suggestions.filter(function(a){return a.isRecommendedForPage})},a.prototype.getAdditionalPages=function(){if(this.wizWebsite.isConvertingSite())return[this.wizWebsite.createContactPage()];if(this.flags.fullSiteBuilder){var a=this.utilCreateSelectedOffersMap();return this.contentManager.suggestedPages(a[this.applicationParameters.tpaTypes.Stores.type],!1).pageSuggestions.filter(function(a){return a.isRecommendedPage})}return[]},a.prototype.handleSocialImages=function(a){return this.contentManager.isSocialImageEnabled()?(a(this.$translate.instant("builder.progress-bar.step-message.online-content")),this.contentManager.initSocialImages()):this.$q.when()},a.prototype.moveContactSectionToTheEnd=function(a){var b=a.findIndex(function(a){return"Contact"===a.ceType});b>-1&&a.splice(a.length-1,0,a.splice(b,1)[0])},a.prototype.buildSite=function(a,b,c,d,e){var f=this,g=b&&"Blog"===b.contentElementType;return this.forceAddMode(!0),this.wizWebsite.isConvertingSite()?this.addSiteConverterStepsToProgressBar(e):e(this.$translate.instant("builder.progress-bar.step-message.header-and-footer")),this.handleSocialImages(e).catch(function(a){return f.$log.error("Failed Uploading some media.",a)}).then(function(){var d=DropTargetCalculator.FirstDropTargetId;return f.flags.fullSiteBuilder&&f.moveContactSectionToTheEnd(c),_.sequencePromises(c,function(c){return f.wizWebsite.isConvertingSite()||e(f.$translate.instant("builder.progress-bar.step-message.adding-section",{type:c.id||c.ceType})),g&&"Blog"===c.ceType?(d=b.id,f.$q.when()):f.makeSectionInPage(a,c,d).then(function(a){return d=a&&a.id||d,a})})}).then(function(a){f.wizWebsite.isConvertingSite()&&a.forEach(function(a,b){f.setGalleryIfConfigured(a,c[b]),f.setSingleSectionTitle(a,b),f.setListItemTitles(a)})}).then(function(){return _.sequencePromises(d,function(a){return f.wizWebsite.isConvertingSite()||e(f.$translate.instant("builder.progress-bar.step-message.adding-page",{pageTitle:a.pageTitle})),f.addNewPage(a.pageTitle)})}).then(function(){return f.storyServices.story.selectedPage=f.modelTree.homePageId,f.pagesManager.goToPage(f.modelTree.homePageId)}).then(function(){f.forceAddMode(!1),e(f.$translate.instant("builder.progress-bar.step-message.finishing-touches"))})},a.prototype.makeSectionInPage=function(a,b,c){var d,e=this;if(b.isTpa&&(d=b.widgetNode,d.alias||(d.alias=b.rawSectionBrief&&b.rawSectionBrief.id)),!d){var f=this.modelTree.getDataHoldersAndExistingNodesForPage(a,b.ceType,b.rawSectionBrief.cardinality>1);if("Contact"===b.ceType){var g=f.existingNodes;d=g[0]||this.getDefaultContactNodes(b)[0]}else d=_.first(this.prepareDrafts(b));this.overrideDraftsContent([d],f.dataHolders)}var h=b.ceType.indexOf("Widget")>-1&&"Widget"!==b.ceType||d.isTpaNode&&d.isTpaNode();return d.isTpaWidget=h,this.wizWebsite.isConvertingSite()&&!h&&"Contact"!==d.contentElementType&&this.suggestionExists(b)?("Welcome"!==d.contentElementType&&(d.origin="siteconverter"),d.preferredMedia="image",this.getPresetsForSiteConverter(h,d,b).then(function(b){if(b)return e.setConfigurationForSection(b,c),e.addSectionToPage(b,a,c,!0)})):this.defaultsService.getPresetsForNode(d,b.ceType,!0).then(function(a){return h||(a=e.presetPreviewSorter.sort(a,d)),a}).then(function(f){var g=e.generatePresetIndex(f);if(h){var i=_.find(e.storyServices.story.selectedOffers,function(a){return a.type===b.ceType}),j=i&&i.data;return e.tpaSectionManager.solveTPACE(f,g,a,d,c,j).then(function(b){return e.flags.tpaHeader?e.addingTpaHeader(b.node,b.preview,a):b})}return e.flags.prettyAlgo?e.solvePrettyAlgo(d,f,a,c):e.solveCE(g,d,g,f,a,c)})},a.prototype.getPresetsForSiteConverter=function(a,b,c){var d=this;return this.defaultsService.getPresetsForNode(b,c.ceType,!0,!1,!0).then(function(a){return a=a.map(function(a){return{preset:a,maskIndex:0}}),d.siteConverterPresetPicker.getPresetPreviewForWizSection(a,c.data.contents,b)})},a.prototype.generatePresetIndex=function(a){return this.flags.noRandomForAutomationTests?0:_.random(Math.min(a.length-1,4))},a.prototype.solvePrettyAlgo=function(a,b,c,d){var e=10,f=5,g=this.presetPreviewGenerator.generateNewPreviews([a],b,0),h=this.layoutSolver.getPartSolutions(this.sitePartTypes.BODY,c.id,!0),i=h.getSelectedSolution(),j=this.Solution.calculateListSpans(i),k=c.children[c.children.length-1].id,l=j[k];l&&(g=this.presetHelpers.orderPresetsByPrettyAlgo(g,l));var m=g.filter(function(a){return a.score>0}),n=(m.length?m:g).slice(0,e).map(function(a,b,c){var d=Math.pow(a.score,f);return void 0===a.score?a.stackedScore=b:a.stackedScore=0===b?d:c[b-1].stackedScore+d,a});return this.applyPreviewToPage(n,c,d)},a.prototype.applyPreviewToPage=function(a,b,c){var d=this,e=this.getPrettyAlgoWeightedRandomPreview(a);return this.presetHelpers.calculateSolution(e,this.sitePartTypes.BODY).then(function(a){return d.setConfigurationForSection(a,c),d.addSectionToPage(a,b,c,!0).then(function(a){return a})},function(){if(a.splice(a.indexOf(e),1),a.length)return d.applyPreviewToPage(a,b,c)})},a.prototype.getPrettyAlgoWeightedRandomPreview=function(a){var b=a[a.length-1].stackedScore,c=Math.floor(Math.random()*b);return a.find(function(a){return c<=a.stackedScore})},a.prototype.solveCE=function(a,b,c,d,e,f){var g,h=this;if(this.flags.presetSettings)this.presetStrategy=this.presetsStrategyFactory.create(builder.PresetsStrategyType.Generic,builder.PresetsStrategyMode.Add),g=this.presetStrategy.generateListOfPreviews([b]);else{var i=this.presetPreviewGenerator.generateNewPreviews([b],[d[c]],0)[0];g=this.presetHelpers.calculateSolution(i,this.sitePartTypes.BODY)}return g.then(function(a){if(Array.isArray(a)){var b=a[0];return"Contact"===b.node.contentElementType&&h.wizWebsite.isConvertingSite()&&a.forEach(function(a){a.node.argsMatchingPolicy["Contact Media"]=!1}),h.presetStrategy.calculatePresetPreview(b,c)}return a}).then(function(a){if(a)return h.setConfigurationForSection(a,f),h.addSectionToPage(a,e,f,!0).then(function(a){return a})},function(){if(!h.flags.presetSettings)return c++,c===d.length&&(c=0),c===a?h.$q.when():h.solveCE(a,b,c,d,e,f)})},a.prototype.draftsToPrepare=function(b){return b.rawSectionBrief.cardinality>1||b.ceType===AddSection.OpeningHours||this.flags.tpaHeader&&b.ceType===TPAHeader.TPA_HEADER_CE_TYPE?a.ContentDraftsPerListSection:a.ContentDraftsPerSingleSection},a.prototype.getDefaultContactNodes=function(a){var b=this,c=[];_.each(this.modelTree.data.children,function(b){b.getContentElementType()===a.ceType&&c.push(b)});var d=this.siteModelData.getDefaultValuesForCeType(a.ceType);return _.each(c,function(c){b.contentElementGenerator.setupFieldLabels(c.contentElement,a),_.each(c.contentElement.values,function(a,b){""===a.value&&(c.contentElement.values[b].value=d[b])})}),c},a.prototype.recalculateSiteHeader=function(){return this.tpaSectionManager.recalculateSiteHeader()},a.prototype.prepareDrafts=function(a){var b=this,c=this.contentSource.prepareDrafts(a,this.draftsToPrepare(a)),d=a.rawSectionBrief.syncWithBooking,e=a.rawSectionBrief.preferredMedia;return this.flags.debugOnlyVideo&&(e="video"),_.map(c,function(c,f){var g=b.modelTree.createNodeFromCE(c,"999."+c.type+"_"+f);return g.syncWithBooking=d,g.preferredMedia=e,b.flags.staticTextsWithTranslate?g.alias=a.alias?a.alias:a.id?a.id:null:g.alias=a.id?a.id:null,_.forEach(g.children,function(a){return a.alias=g.alias}),c.items||(g.hiddenMedia=angular.copy(c.getHiddenMedia())),g.isDraft=!0,b.wizWebsite.isConvertingSite()&&b.modelTree.updateFieldsVisibility(g,void 0,void 0,!0),g})},a.prototype.restoreRemovedNode=function(a,b){var c=this;this.$log.warn("restoring node "+JSON.stringify(a));var d=_.find(b,function(b){return b.ceType===a.ceType}),e=this.modelTree.getPageNodeById(a.pageId);if(d&&e){var f=e.children[a.index-1];return this.makeSectionInPage(e,d,f&&!f.userHidden&&f.id||DropTargetCalculator.FirstDropTargetId).then(function(a){a&&c.$log.warn("restored node "+a.id)})}},a.prototype.onPageCalculated=function(a){var b=this;return this.detectAndHandlePageSolutionFailure(a).then(function(){if("header"!==a&&"footer"!==a){var c=b.layoutSolver.getSelectedSolution(b.sitePartTypes.BODY,a);b.tpaSolutionManager.setTpaInitialHeight(c)}b.flags.mobileEditor&&b.mobileSolutionManager.createPageMobileSolution(a)})},a.prototype.detectAndHandlePageSolutionFailure=function(a){var b=this;if("header"===a||"footer"===a)return this.simpleSolutionManager.detectAndHandleHeaderOrFooterFailure(a);var c=this.simpleSolutionManager.getSectionMap(a);return _.sequencePromises(c,function(c,d){return b.simpleSolutionManager.detectAndHandleSolutionFailure(a,d,void 0,c)}).then(function(){if(b.healthCheck.fixLog&&b.healthCheck.fixLog.removedNodes&&b.healthCheck.fixLog.removedNodes.length){var c=_.remove(b.healthCheck.fixLog.removedNodes,function(b){return b.pageId===a});if(c.length)return b.contentManager.initialize(b.storyServices.story).then(function(){var a=b.contentManager.suggestedSections().suggestions;return _.sequencePromises(c,function(c){return b.restoreRemovedNode(c,a)})})}})},a.prototype.recalculatePagesWithRemovedNodes=function(){var a=this;if(this.healthCheck.fixLog&&this.healthCheck.fixLog.removedNodes&&this.healthCheck.fixLog.removedNodes.length){this.initBI.reportStart({name:BIInitSteps.RecalculatePages,init:!0});var b=_(this.healthCheck.fixLog.removedNodes).groupBy("pageId").keys().value();return _.sequencePromises(b,function(b){return a.layoutSolver.calculatePage(b,!0)}).then(function(){return a.initBI.reportEnd({name:BIInitSteps.RecalculatePages,init:!0})})}return this.$q.resolve()},a.prototype.overrideDraftsContent=function(a,b){var c=this;if(b&&0!==b.length){if(b[0].isList()){var d=0;_.forEach(a[0].children,function(a,e){var f=a.getContentElementType();if("ListHeader"!==f&&"ListFooter"!==f){var g=c.getListItemByIndexAndType(d,f,b[0]),h=c.getContentKeysToOverride(f);_.forEach(h,function(b){a.contentElement.values[b].value=_.clone(g.contentElement.values[b].value)}),d++}})}else _.forEach(a,function(a,d){var e=a.getContentElement().usesSocialImages,f=a.getContentElementType(),g=b[d%b.length],h=c.getContentKeysToOverride(f);_.forEach(h,function(b){e&&"media"===a.contentElement.values[b].type||(a.contentElement.values[b].value=_.clone(g.contentElement.values[b].value))})})}},a.prototype.getListItemByIndexAndType=function(a,b,c){return"ListHeader"===b?this.modelTree.getListHeader(c):"ListFooter"===b?this.modelTree.getListFooter(c):this.modelTree.getListItems(c)[a]},a.prototype.getContentKeysToOverride=function(a){switch(a){case"Homepage_about":case"Inner_about":return["AboutBody"];case"OpeningHours":return["OpeningHoursDescription"];case"Welcome":return["WelcomeBody","WelcomeMedia"];case"Testimonial":return["CustomerQuote","CustomerName"];case"ListHeader":return["listTitle","listSubTitle"];case"ListFooter":return["button","listDescription"]}return[]},a.prototype.suggestionExists=function(a){return a&&a.data&&a.data.contents},a.prototype.setGalleryIfConfigured=function(a,b){var c=_.get(b,"data.contents.mediaDisplayType");if(a&&!a.isList()&&"gallery"===c){var d=this.mediaOverrideManager.getAvailableGalleries(a),e=this.miscUtils.getRandomItem(d);e&&this.mediaOverrideManager.setGallery(a,e.gallery)}},a.prototype.setSingleSectionTitle=function(a,b){a&&(a.alias=this.wizWebsite.composeNodeTitle(a,b,"Section"))},a.prototype.setListItemTitles=function(a){var b=this;a&&a.children&&a.children.length&&a.children.filter(function(a){return!a.isHeader&&!a.isFooter}).forEach(function(a,c){var d=b.wizWebsite.getCEValueBySubType(a,"title");d&&(d.value=b.wizWebsite.composeNodeTitle(a,c,"Item"))})},a}();SectionManager.ContentDraftsPerSingleSection=3,SectionManager.ContentDraftsPerListSection=1,SectionManager.FullWidthMediaOfStrip=1400,SectionManager.MaxStretch=1.1,SectionManager.AspectRatioDiff=.2,angular.module("siteGeneratorBuilderInternal").service("sectionManager",SectionManager);var MergedHeaderValidator=function(){function a(a,b,c,d){var e=this;this.pubSub=a,this.mergedHeaderService=b,this.consumerBiLogger=c,this.modelTree=d,this.validateUnmerged=function(){var a=e.modelTree.getPageNodeById(e.modelTree.homePageId);e.mergedHeaderService.isHeaderMerged(a)&&(e.mergedHeaderService.isHeaderMergeable(a)||e.unmerge(a))},this.validateMerged=function(){var a=e.modelTree.getPageNodeById(e.modelTree.homePageId);e.mergedHeaderService.isHeaderMerged(a)&&e.mergedHeaderService.isHeaderMergeable(a)&&e.merge(a)},this.merge=function(a){e.handleMerge(!0,a)},this.unmerge=function(a){e.handleMerge(!1,a)},this.handleMerge=function(a,b){var c=a?BIHeaderTypes.Transparent:BIHeaderTypes.Solid;e.consumerBiLogger.sectionDesign.changeHeaderTransparencyStart(BIInitator.System,c),e.mergedHeaderService.setHeaderMerged(a,b,a).then(function(){return e.consumerBiLogger.sectionDesign.changeHeaderTransparencySuccess(BIInitator.System,c)})}}return a.$inject=["pubSub","mergedHeaderService","consumerBiLogger","modelTree"],a.prototype.init=function(){this.pubSub.subscribe(PubSub.events.BEFORE_CAPTURE_OPERATION,this.validateUnmerged),this.pubSub.subscribe(PubSub.events.NEW_STATE_STORY_WAS_SET,this.validateMerged)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("mergedHeaderValidator",MergedHeaderValidator);var PagesPanelManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D){var E=this;this.CONSUMER_DIALOGS=a,this.applicationParameters=b,this.modelTree=c,this.tpaService=d,this.initService=e,this.pagesManager=f,this.notification=g,this.previewService=h,this.CcDialogBuilder=i,this.$translate=j,this.$state=k,this.undoRedo=l,this.menuService=m,this.flags=n,this.applicationState=o,this.$timeout=p,this.storyServices=q,this.consumerBiLogger=r,this.consumerBiLoggerHelpers=s,this.spinnerService=t,this.consumerMenu=u,this.$stateParams=v,this.documentServicesMediator=w,this.rendererSeo=x,this.pubSub=y,this.wizardService=z,this.sectionManager=A,this.nodeManipulationService=B,this.$q=C,this.simpleSolutionManager=D,this.saveChanges=function(){E.consumerMenu.calcMenuAnchors().then(function(){E.undoRedo.captureOperation()})},this.togglePageVisibility=function(a){var b=E.modelTree.getPageNodeById(a);E.pagesManager.togglePageVisibility(b),b.hidePage?(E.notification.show("toasters.page-hidden"),E.flags.smartAssist&&E.pubSub.fire(PubSub.events.PAGE_HIDDEN,b)):E.flags.smartAssist&&E.pubSub.fire(PubSub.events.PAGE_SHOWN,b),E.consumerBiLogger.pagesManager.hideShowPage(b.hidePage?"hide":"show",E.tpaService.getAppIdByPageNode(b)),E.saveChanges()}}return a.$inject=["CONSUMER_DIALOGS","applicationParameters","modelTree","tpaService","initService","pagesManager","notification","previewService","CcDialogBuilder","$translate","$state","undoRedo","menuService","flags","applicationState","$timeout","storyServices","consumerBiLogger","consumerBiLoggerHelpers","spinnerService","consumerMenu","$stateParams","documentServicesMediator","rendererSeo","pubSub","wizardService","sectionManager","nodeManipulationService","$q","simpleSolutionManager"],a.prototype.onMountPanel=function(){var a=this;this.initService.loaded().then(function(){var b=a.consumerBiLoggerHelpers.popPanelSource();if(a.consumerBiLogger.pagesManager.pagesPanelIsLoaded(b||"second topbar"),a.flags.dataFixerMenuItems&&a.removeDuplicateItems(a.menuService.menuItems),a.applicationState.isSelectedPageMode()){var c=a.$stateParams.pageId;if(c){var d=a.modelTree.getPageNodeById(c);a.goToPage(d)}}})},a.prototype.onUnmountPanel=function(){this.consumerBiLogger.pagesManager.pagesPanelWasClosed("pages panel")},a.prototype.cleanTpaWidgets=function(a){var b=this,c=[];_.each(this.modelTree.getPagesNodes(),function(d){c.push.apply(c,b.modelTree.getTpaWidgetsInPage(d,a))}),_.each(c,function(a){b.nodeManipulationService.deleteNode(a,a.containerPageId,void 0,function(){b.modelTree.markPageAsDirty(a.containerPageId),b.simpleSolutionManager.removeSectionFromSolutionLGs(a.containerPageId,a.id)})})},a.prototype.deletePage=function(a){var b=this,c=this.modelTree.getNodeById(a);if(!c)return this.$q.reject();var d=c.tpaSection||c.tpaExtraPage,e=this.tpaService.getAppIdByPageNode(c);return this.$q.resolve().then(function(){if(!b.pagesManager.isHome(a)){var c=b.modelTree.getNodeById(a),e=b.$q.defer();return d&&(_.each(b.pagesManager.getTpaExtraPages(d),function(c){c.id!==a&&b.nodeManipulationService.deletePageById(c.id,"body",_.noop,_.noop)}),b.cleanTpaWidgets(d)),b.nodeManipulationService.deletePageById(a,"body",b.setSelectedPage.bind(b),function(){b.flags.smartAssist&&b.pubSub.fire(PubSub.events.PAGE_DELETED,c),e.resolve()}),e.promise}}).then(function(){return b.consumerMenu.calcMenuAnchors()}).then(function(){return b.undoRedo.captureOperation()}).then(function(){if(d===b.applicationParameters.tpaTypes.Stores.type)return b.sectionManager.recalculateSiteHeader().then(function(){return b.storyServices.reRender("header")})}).then(function(){b.applicationState.isSupportStaffEditing()||b.previewService.waitForChanges().then(function(){var a=!!b.flags.mobileEditor;return b.wizardService.publishStory(void 0,void 0,a).catch(function(){return b.$q.resolve()})})}).then(function(){b.consumerBiLogger.pagesManager.deletePageSuccess(e)})},a.prototype.reorderPage=function(a,b,c){var d=this;this.goToPage(a);var e=this.modelTree.getNodeById(a.id);this.consumerBiLogger.pagesManager.reorderPage(b,c,this.tpaService.getAppIdByPageNode(e)),this.saveChanges(),this.$timeout(function(){return d.menuService.refresh()})},a.prototype.goToDesktopPage=function(a){var b=this;return this.pagesManager.goToPage(a.id).then(function(){return b.storyServices.story.selectedPage=a.id})},a.prototype.goToPage=function(a){var b=this;if(this.storyServices.story.selectedPage!==a.id){this.applicationState.goToPage(a.id);var c=this.modelTree.getNodeById(a.id),d=this.tpaService.getAppIdByPageNode(c);this.consumerBiLogger.pagesManager.clickOnPage(a.name,d,"pages panel");var e;e=this.applicationState.isInMobileEditMode()?this.applicationState.goToMobilePage(a.id):this.goToDesktopPage(a),e.then(function(){return b.$state.current.name===config.STATES.BUILDER_PAGES_SEO&&b.$state.go("^"),b.setSelectedPage(a.id)}).then(function(){b.consumerBiLogger.pagesManager.gotoPageSuccess(a.name,d,"pages panel")}).finally(function(){b.spinnerService.waitForStop().then(function(){var a=b.previewService.getOverlayContainer();a&&(a.scrollTop=0)})})}},a.prototype.renamePage=function(a,b){var c=this.modelTree.getNodeById(a);if(!c)throw a+" without a corresponding node";this.pagesManager.renamePage(a,b),this.consumerBiLogger.pagesManager.renamePage(this.tpaService.getAppIdByPageNode(c)),this.saveChanges()},a.prototype.setSelectedPage=function(a){return this.applicationState.clearContentFocus(),this.storyServices.story.selectedPage=a,this.storyServices.recalculateCurrentPage()},a.prototype.addPage=function(){this.consumerBiLogger.pagesManager.addPageClick("pages-panel"),this.applicationState.goToAddPageMode(),this.flags.keepPagesPanelOpen&&(this.applicationState.shouldReopenPagesPanel=!0)},a.prototype.canManagePage=function(a,b){void 0===b&&(b=!0);var c=this.modelTree.getNodeById(a.id);if(!c||!c.tpaExtraPage)return!!c;var d=this.tpaService.getNaiveType(c.tpaExtraPage);return b&&"hidden"===this.tpaService.sectionType(d)},a.prototype.goToDesktopEditMode=function(){var a=this;return this.consumerBiLoggerHelpers.setPanelSource("pages panel"),this.consumerBiLogger.builder.switchBuilderTypeMobileDesktopClick("pages panel","desktop"),this.consumerBiLoggerHelpers.resetLoadTime(),this.applicationState.disableMobileEditor().then(function(){var b=a.consumerBiLoggerHelpers.popPanelSource();b&&a.consumerBiLogger.builder.switchBuilderTypeMobileDesktopSuccess(b,"desktop")}).then(function(){return a.$state.go(config.STATES.BUILDER_ADD_PAGE)})},a.prototype.openPagesPanelHelp=function(){this.CcDialogBuilder.showSupportIframe(this.getHelpPopupLink(),this.CONSUMER_DIALOGS.PAGES_PANEL_HELP)},a.prototype.getHelpPopupLink=function(){return this.$translate.instant(this.applicationState.isInMobileEditMode()?"help.pages.mobile":"help.pages.menu")},a.prototype.closePagesPanel=function(){this.$state.go("^"),this.flags.keepPagesPanelOpen&&(this.applicationState.shouldReopenPagesPanel=!1)},a.prototype.isInMobileEditMode=function(){return this.applicationState.isInMobileEditMode()},a.prototype.isSelectedPage=function(a){return this.pagesManager.isSelectedPage(a)},a.prototype.isHiddenPage=function(a){return this.pagesManager.isHiddenPage(a)},Object.defineProperty(a.prototype,"menuItems",{get:function(){return this.menuService.menuItems},enumerable:!0,configurable:!0}),a.prototype.getMenuItems=function(a){return this.menuService.getMenuItems(a)},a.prototype.nameIsValid=function(a){return a.length<=DocumentServicesMediator.GENERAL_VALIDATIONS.PAGE_NAME_MAX_LENGTH&&!this.documentServicesMediator.hasEmoji(a)},a.prototype.isContainerOfUnmanageable=function(a){var b=this.modelTree.getNodeById(a.id);return b&&b.tpaSection},a.prototype.iconName=function(a){var b=this.modelTree.getNodeById(a.id);if(!b)return"";var c="";return this.pagesManager.isHome(a.id)?c="cc-icon-home":!b.tpaExtraPage&&b.alias&&b.alias===this.applicationParameters.tpaTypes.Blog.type?c="cc-icon-blog":!b.tpaExtraPage&&b.alias&&b.alias===this.applicationParameters.tpaTypes.Stores.type?c="cc-icon-store":!b.tpaExtraPage&&b.alias&&b.alias===this.applicationParameters.tpaTypes.Bookings.type&&(c="cc-icon-booking"),c},a.prototype.openActionsDialog=function(a,b,c){var d=this;this.consumerBiLogger.pagesManager.clickOnSettings(b.name);var e={idForActions:b.id,saveChanges:this.saveChanges,togglePageVisibility:this.togglePageVisibility,activePageRenameForm:c,setSelectedPage:function(a){return d.setSelectedPage(a)}},f={parent:angular.element(document.body),hasBackdrop:!1,clickOutsideToClose:!0,templateUrl:"views/page-menu-dialog.html",controller:PageMenuDialog,controllerAs:"$ctrl",locals:{$event:this.manipulateEvent(a),selected:e}};this.CcDialogBuilder.show(f)},a.prototype.fixPageNameIfNeeded=function(a){return this.nameIsValid(a)?a:this.documentServicesMediator.removeEmojis(a).slice(0,DocumentServicesMediator.GENERAL_VALIDATIONS.PAGE_NAME_MAX_LENGTH)},a.prototype.manipulateEvent=function(a){var b=angular.element(a.target).offset();return a.clientX=Math.round(b.left),a.clientY=Math.round(b.top),a},a.prototype.removeDuplicateItems=function(a){if(_.unique(a,function(a){return a.id}).length!==a.length){var b=[];a.forEach(function(c,d){a.slice(d+1).forEach(function(a){c.id===a.id&&b.push(d)})}),b.forEach(function(b){return a.splice(b,1)})}},a}();angular.module("siteGeneratorBuilderInternal").service("pagesPanelManager",PagesPanelManager);var builder;!function(a){var b=function(){function a(a,b,c,d,e,f,g){this.simpleSolutionManager=a,this.solutionFetcher=b,this.sectionManager=c,this.modelTree=d,this.spinnerService=e,this.flags=f,this.undoRedo=g}return a.$inject=["simpleSolutionManager","solutionFetcher","sectionManager","modelTree","spinnerService","flags","undoRedo"],a.prototype.isPartial=function(a){return 0===a.id.indexOf("Partial lg ")},a.prototype.switchColumnPosition=function(a){var b=this;this.spinnerService.waitForMe("switchColumnPosition");var c=a.containerPageId,d=a.id,e=this.solutionFetcher.getSectionSolution(c,d);if(!(1!==e.length||e[0].getSegmentSignature().length<2)){var f=e[0],g=f.getSegmentSignature(),h=this.switchColumnPositionInSignature(g),i=this.simpleSolutionManager.createSingleSegementLg(a,h,void 0,c,this.modelTree.getAllVisibleContentElements());return i.getLayoutSelectionStore().copyLgRelatedData(c,f.getUniqueIdForSolution(),i.getUniqueIdForSolution()),this.simpleSolutionManager.replaceSectionOnPage(c,d,[i]).then(function(a){var c={direction:b.simpleSolutionManager.Animation.Direction.REVERSE,type:b.simpleSolutionManager.Animation.Type.CROSS_FADE,duration:.1};return b.sectionManager.startAnimatedRender(a,c)}).then(function(){b.spinnerService.imDone("switchColumnPosition"),b.undoRedo.captureOperation()})}},a.prototype.switchColumnPositionInSignature=function(a){var b=a.split(""),c=b.pop();return b.unshift(c),b.join("")},a}();a.PartialSectionManager=b,angular.module("siteGeneratorBuilderInternal").service("partialSectionManager",b)}(builder||(builder={}));var builder;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){this.simpleSolutionManager=a,this.sectionManager=b,this.solutionFetcher=c,this.layoutSolver=d,this.storyServices=e,this.mobileSolutionManager=f,this.layoutSelectionStoreProvider=g,this.applicationState=h,this.mergedHeaderService=i,this.sitePartTypes=j,this.modelTree=k,this.undoRedo=l,this.flags=m,this.$q=n}return a.$inject=["simpleSolutionManager","sectionManager","solutionFetcher","layoutSolver","storyServices","mobileSolutionManager","layoutSelectionStoreProvider","applicationState","mergedHeaderService","sitePartTypes","modelTree","undoRedo","flags","$q"],a.prototype.handlePreviewSelected=function(a,b,c){var d=this;b=b||this.storyServices.story.selectedPage;var e=this.applicationState.getContentFocus();return this.$q.when().then(function(){var f=!0;c=c||e.sitePart,_.each(a.solution,function(a){return a.setPage(b)});var g=d.solutionFetcher.getSectionSolution(b,a.previewNode.getId(),c),h=c===d.sitePartTypes.BODY?b:c,i=d.layoutSelectionStoreProvider.getKeyMap(a.solution,a.previewNode);return d.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(a.lss,a.dummyPageId,h,i,void 0,!1,f),d.mobileSolutionManager.setMobileSolution(g,a.solution),d.storyServices.renderMobileSolution(c,b).then(function(){if(d.flags.mergedHeader&&c===d.sitePartTypes.HEADER&&d.mergedHeaderService.isHeaderMerged())return d.storyServices.renderMobileSolution(d.sitePartTypes.BODY,b)}).then(function(){}).catch(function(a){console.log(a)})}).then(function(){d.undoRedo.captureOperation()})},a.prototype.onPartCalculated=function(a,b){var c=this;if(a===this.sitePartTypes.BODY){var d=this.simpleSolutionManager.getSectionMap(b);return _.sequencePromises(d,function(d,e){var f=c.modelTree.findById(e,b);return c.mobileSolutionManager.detectAndHandleMobileSolutionFailure(a,b,f,d)})}var e=void 0;return e=a===this.sitePartTypes.HEADER?this.modelTree.getGeneralInformation():this.modelTree.getFooterInformation(),this.mobileSolutionManager.detectAndHandleMobileSolutionFailure(a,a,e,this.layoutSolver.getSelectedSolution(a))},a}();a.MobileSectionManager=b,angular.module("siteGeneratorBuilderInternal").service("mobileSectionManager",b);var c=function(){function a(a,b){this.solutionFetcher=a,this.mobileSolutionValidator=b}return a.$inject=["solutionFetcher","mobileSolutionValidator"],a.prototype.validateMobileSolution=function(a,b,c,d){var e=this.solutionFetcher.getSectionSolution(c,d,b);return this.mobileSolutionValidator.validate(b,a,e)},a}();a.MobileSectionValidator=c,angular.module("siteGeneratorBuilderInternal").service("mobileSectionValidator",c)}(builder||(builder={}));var PreviewScale=function(){function a(b,c,d,e,f,g,h){this.provider=b,this.$rootScope=c,this.$state=d,this.$timeout=e,this.$window=f,this.applicationParameters=g,this.flags=h,this.currentScale=a.DefaultScale,this.manualScale=null,this.disabled=!1,this.disabled=this.$state.includes(config.STATES.BUILDER_STORY_PREVIEW),this.ranges=b.rangesConfig,this.scaleFactor=this.flags.scaleFactor,this.init()}return a.$inject=["provider","$rootScope","$state","$timeout","$window","applicationParameters","flags"],a.prototype.reset=function(a){void 0===a&&(a=!1),this.manualScale&&!a||(this.manualScale=this.applicationParameters.isInMobileEditMode()?1:null,this.currentScale=this.disabled?this.getDefaultScale():this.getScaleForCurrentResolution())},a.prototype.getScaleFactor=function(){return this.scaleFactor},a.prototype.setScale=function(a){this.manualScale=this.ensureValidScale(a)},a.prototype.getScale=function(){return this.manualScale||this.currentScale},a.prototype.setScaleFactor=function(a){this.scaleFactor=+a.toFixed(2),this.reset()},a.prototype.zoomIn=function(b,c){void 0===c&&(c=1);var d=this.getScaleFactor();this.changeScaleFactor(d+a.ScaleFactorStep*c,b)},a.prototype.zoomOut=function(b,c){void 0===c&&(c=1);var d=this.getScaleFactor();this.changeScaleFactor(d-a.ScaleFactorStep*c,b)},a.prototype.changeScaleFactor=function(a,b){this.setScaleFactor(a),b&&this.enable()},a.prototype.getScaleForCurrentResolution=function(){var b=this,c=this.getViewportWidth(),d=this.getStageWidth(),e=_.find(this.ranges,function(a){return b.isValidConfiguration(a,c,d)});if(!e)return a.DefaultScale;var f=e.scale(c,d);return this.ensureValidScale(f*this.scaleFactor)},a.prototype.isValidConfiguration=function(a,b,c){return!!this.isInRange(b,a.viewport)&&(!a.stage||this.isInRange(c,a.stage))},a.prototype.isInRange=function(a,b){var c=b[0],d=b[1];return _.inRange(a,c,d)},a.prototype.init=function(){var a=this;this.reset(!0),this.$rootScope.$on("$stateChangeSuccess",function(b,c,d,e,f){if(e.name===config.STATES.BUILDER_STORY_PREVIEW)a.$timeout(function(){return a.enable()});else switch(c.name){case config.STATES.BUILDER_ADD_SECTION:break;case config.STATES.BUILDER_STORY_PREVIEW:a.disable();break;case config.STATES.BUILDER_STORY:a.$timeout(function(){return a.enable()});break;default:a.reset(!0)}})},a.prototype.ensureValidScale=function(b){return this.isValidScale(b)?b>a.MaxScale?a.MaxScale:b<a.MinScale?a.MinScale:b:this.getDefaultScale()},a.prototype.isValidScale=function(a){return"number"==typeof a&&!isNaN(a)},a.prototype.getDefaultScale=function(){return a.DefaultScale*this.scaleFactor},a.prototype.getStageWidth=function(){return this.getViewportWidth()-this.getPanelWidth()},a.prototype.getViewportWidth=function(){return this.$window.innerWidth},a.prototype.getPanelWidth=function(){return this.getPanelWidthFromState(this.$state.current)},a.prototype.getPanelWidthFromState=function(b){return b&&b.data&&b.data.panelWidth||a.DefaultPanelWidth},a.prototype.enable=function(){this.disabled=!1,this.reset()},a.prototype.disable=function(){this.disabled=!0,this.reset()},a}();PreviewScale.MinScale=.384615385,PreviewScale.MaxScale=10,PreviewScale.DefaultScale=.71,PreviewScale.DefaultPanelWidth=0,PreviewScale.MaxScaleFactor=1,PreviewScale.MinScaleFactor=.5,PreviewScale.ScaleFactorStep=.1;var PreviewScaleProvider=function(){function a(){this.rangesConfig=[]}return a.prototype.reset=function(){this.rangesConfig.length=0},a.prototype.range=function(a){if(!this.isRangeValid(a))throw"range: is not valid!, it won't be added";return this.rangesConfig.push(a),this.sortRanges(),this},a.prototype.sortRanges=function(){this.rangesConfig=this.rangesConfig.sort(function(a,b){return a.stage?-1:b.stage?1:0})},a.prototype.isRangeValid=function(a){var b=a.viewport,c=b[0],d=b[1];if(c>=d)return!1;if(a.stage){var e=a.stage,f=e[0],g=e[1];return f<g&&f>=c&&g<=d}return!0},a.prototype.$get=function(a){return a.instantiate(PreviewScale,{provider:this})},a.prototype.$get.$inject=["$injector"],a}();angular.module("siteGeneratorStaticsConsumerAppInternal").provider("previewScale",PreviewScaleProvider);var FakeBrowserBar=function(){function a(b,c,d,e,f){var g=this;this.$element=b,this.flags=c,this.$rootScope=d,this.applicationState=e,this.$translate=f;var h=$(".browser-url");this.$rootScope.$on("switchEditModeStart",function(b,c,d){h.addClass("mobile-browser-url");var e=g.getLength(a.getShortUrl(g.url));if(d&&e<a.MOBILE_BROWSER_URL_WIDTH){var f=g.getLength(g.url)-e;h.css({left:-f,width:"calc(100% + "+f+"px"}),h.addClass("clip-overflow")}else h.css({left:0,width:"100%"}),
h.removeClass("clip-overflow")}),this.$rootScope.$on("switchEditModeEnd",function(){g.isInMobileEditMode()||h.removeClass("mobile-browser-url")})}return a.$inject=["$element","flags","$rootScope","applicationState","$translate"],a.getShortUrl=function(a){return a.replace(/^(?:https?:\/\/)?(?:www\.)?/,"")},a.prototype.isInMobileEditMode=function(){return this.applicationState.isInMobileEditMode()},a.prototype.getLength=function(a){$("body").append('<div id="measureTextWidth" class="browser-url-width-measuring-defaults">'+a+"</div>");var b=document.getElementById("measureTextWidth").clientWidth;return $("#measureTextWidth").remove(),b},a.prototype.tooltipOptions=function(){return{interactive:!0,content:this.$translate.instant("tooltips.fake-browser-bar-url",{URL:this.url,shortUrl:a.getShortUrl(this.url)})}},a}();FakeBrowserBar.MOBILE_BROWSER_URL_WIDTH=149,angular.module("siteGeneratorStaticsConsumerAppInternal").component("fakeBrowserBar",{templateUrl:"views/preview/fake-browser-bar.html",controller:FakeBrowserBar,bindings:{label:"@",url:"@",onBarClick:"&"}});var LinkType;!function(a){a[a.None=0]="None",a[a.Page=1]="Page",a[a.Web=2]="Web",a[a.Document=3]="Document",a[a.Email=4]="Email",a[a.Phone=5]="Phone",a[a.Paypal=6]="Paypal"}(LinkType||(LinkType={}));var LinkDetails=function(){function a(a,b,c,d,e,f,g,h,i,j,k){var l=this;this.$scope=a,this.pagesManager=b,this.$q=c,this.linkDetailsManager=d,this.validation=e,this.$log=f,this.$translate=g,this.CONSUMER_DIALOGS=h,this.flags=i,this.clientTopology=j,this.CcDialogBuilder=k,this.ensureValueNotBroken(),this.initLinkOptions(),this.pageItemList=[],this.anchorItemList=void 0,this.draft=angular.copy(this.value),this.draft.file&&this.adjustFileToPanel(this.draft.file),this.setCurrentLinkType(),this.setCurrentPage(),this.setCurrentAnchor(),a.$on("linkDetails.save",function(a,b){l.save().then(function(a){b.resolve(a)})}),a.$watch("$ctrl.draft.targetPhone",function(a){l.draft.targetPhone=l.transformPhone(a),l.validate()}),a.$watch("$ctrl.draft.paypal",function(){l.validate()},!0),this.validate()}return a.$inject=["$scope","pagesManager","$q","linkDetailsManager","validation","$log","$translate","CONSUMER_DIALOGS","flags","clientTopology","CcDialogBuilder"],a.prototype.transformPhone=function(a){var b=this;return a?a.split("").filter(function(a){return b.validation.isPhone(a)}).join(""):""},a.prototype.onLinkOptionChanged=function(){this.currentLinkType===LinkType.Web&&this.linkDetailsManager.targetUrlIsDocument(this.draft.targetUrl)&&(this.draft.targetUrl=""),this.currentLinkType===LinkType.Page&&this.linkDetailsManager.setPageLink(this.draft,this.currentAnchor),this.validate()},a.prototype.onPageSelectionChanged=function(a){this.currentPage=a,this.draft.targetPage=this.currentPage.getId(),this.refreshAnchors(),this.currentAnchor=_.first(this.anchors)},a.prototype.onAnchorSelectionChanged=function(a){this.draft.link="anchor"===this.linkDetailsManager.getAnchorType(a)?this.linkDetailsManager.generateAnchorLink(a):void 0,this.currentAnchor=a},a.prototype.onFileChange=function(a){this.draft.file=a,this.draft.file.name=a.title},a.prototype.validate=function(){switch(this.currentLinkType){case LinkType.Web:this.isValid=void 0===this.draft.targetUrl||""===this.draft.targetUrl||this.validation.isUrl(this.draft.targetUrl);break;case LinkType.Email:this.isValid=void 0===this.draft.targetEmail||""===this.draft.targetEmail||this.validation.isEmail(this.draft.targetEmail);break;case LinkType.Phone:this.isValid=void 0===this.draft.targetPhone||""===this.draft.targetPhone||this.validation.isPhone(this.draft.targetPhone);break;case LinkType.Paypal:this.isValid=!this.draft.paypal||this.validation.isEmail(this.draft.paypal.email)&&(!this.draft.paypal.fixedAmount||this.draft.paypal.amount>0);break;default:this.isValid=!0}},Object.defineProperty(a.prototype,"isOptionNone",{get:function(){return this.currentLinkType===LinkType.None},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isOptionWeb",{get:function(){return this.currentLinkType===LinkType.Web},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isOptionPage",{get:function(){return this.currentLinkType===LinkType.Page},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isOptionEmail",{get:function(){return this.currentLinkType===LinkType.Email},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isOptionDocument",{get:function(){return this.currentLinkType===LinkType.Document},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isOptionPhone",{get:function(){return this.currentLinkType===LinkType.Phone},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isOptionPaypal",{get:function(){return this.currentLinkType===LinkType.Paypal},enumerable:!0,configurable:!0}),a.prototype.save=function(){var a=this,b=this.createLinkDetails(),c=this.$q.defer();return b.then(function(){return a.removeOldAnchor()}),b.then(function(b){return a.removeFile(b)}),b.then(function(b){return a.setNewValue(b)}),b.then(function(a){return c.resolve(a)}),c.promise},a.prototype.initLinkOptions=function(){this.linkOptions=[{label:this.$translate.instant("link-details.none.label"),value:LinkType.None},{label:this.$translate.instant("link-details.page.label"),value:LinkType.Page},{label:this.$translate.instant("link-details.web.label"),value:LinkType.Web},{label:this.$translate.instant("link-details.document.label"),value:LinkType.Document},{label:this.$translate.instant("link-details.email.label"),value:LinkType.Email},{label:this.$translate.instant("link-details.phone.label"),value:LinkType.Phone},{label:this.$translate.instant("link-details.paypal.label"),value:LinkType.Paypal}]},a.prototype.adjustFileToPanel=function(a){a.title=a.name,a.fileUrl=a.url},a.prototype.removeFile=function(a){return this.currentLinkType!==LinkType.Document&&delete a.file,this.$q.when(a)},a.prototype.setNewValue=function(a){this.value=a,this.draft=angular.copy(a)},a.prototype.setCurrentLinkType=function(){this.linkDetailsManager.isDocument(this.draft)?this.currentLinkType=LinkType.Document:this.linkDetailsManager.isPage(this.draft)?this.currentLinkType=LinkType.Page:this.linkDetailsManager.isEmail(this.draft)?this.currentLinkType=LinkType.Email:this.linkDetailsManager.isPhone(this.draft)?this.currentLinkType=LinkType.Phone:this.linkDetailsManager.isWeb(this.draft)?(this.linkDetailsManager.targetUrlIsDocument(this.draft.targetUrl)&&(this.draft.targetUrl=""),this.currentLinkType=LinkType.Web):this.linkDetailsManager.isPaypal(this.draft)?this.currentLinkType=LinkType.Paypal:this.currentLinkType=LinkType.None},a.prototype.setCurrentPage=function(){var a,b=this;if(!_.isEmpty(this.draft.link)||this.draft.targetPage){var c=this.draft&&this.draft.link&&this.draft.link.nodeId||this.draft.targetPage,d=this.linkDetailsManager.findNodeById(c);a=d?d.isPage()?d:this.pages.find(function(a){if(b.draft.link.targetPage)return a.getId()===b.draft.link.targetPage}):_.first(this.pages)}else a=_.first(this.pages);this.currentPage=a},a.prototype.setCurrentAnchor=function(){var a,b=this;a=_.isEmpty(this.draft.link)?_.first(this.anchors):this.anchors.find(function(a){return b.linkDetailsManager.getAnchorId(a)===b.draft.link.nodeId}),this.currentAnchor=a},Object.defineProperty(a.prototype,"pages",{get:function(){return _.isEmpty(this.pageItemList)&&(this.pageItemList=this.linkDetailsManager.getMainPages()),this.pageItemList},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"anchors",{get:function(){return _.isUndefined(this.anchorItemList)&&(this.anchorItemList=_.filter(this.currentPage.children,function(a){return a.alias||(a.alias=a.getContentElementType()),!a.userHidden}),this.anchorItemList.unshift({alias:this.$translate.instant("link-details.page.select-anchor.top-of-page"),id:this.currentPage.getId(),type:"page-anchor"})),this.anchorItemList},enumerable:!0,configurable:!0}),a.prototype.refreshAnchors=function(){this.anchorItemList=void 0},a.prototype.createLinkDetails=function(){var a=this.value,b=angular.copy(this.draft);switch(this.currentLinkType){case LinkType.Page:return a.targetPage===b.targetPage&&_.isEqual(a.link,b.link)?this.$q.when(a):this.linkDetailsManager.convertLinkDetailsToStatePage(b,this.currentAnchor);case LinkType.Web:return""!==b.targetUrl&&a.targetUrl!==b.targetUrl?this.linkDetailsManager.convertLinkDetailsToStateWeb(b,this.draft.targetUrl):this.$q.when(a);case LinkType.None:return this.linkDetailsManager.convertLinkDetailsToStateNone(b);case LinkType.Document:return a.file!==b.file?this.linkDetailsManager.convertLinkDetailsToStateDocument(b):this.$q.when(a);case LinkType.Email:return""!==b.targetEmail&&a.targetEmail!==b.targetEmail?this.linkDetailsManager.convertLinkDetailsToStateEmail(b,this.draft.targetEmail):this.$q.when(a);case LinkType.Phone:return""!==b.targetPhone&&a.targetPhone!==b.targetPhone?this.linkDetailsManager.convertLinkDetailsToStatePhone(b,this.draft.targetPhone):this.$q.when(a);case LinkType.Paypal:return this.paypalHasChanged(b,a)?this.linkDetailsManager.convertLinkDetailsToPaypal(b,this.draft.paypal):this.$q.when(a)}},a.prototype.paypalHasChanged=function(a,b){return!!a.paypal&&!_.isEqual(b.paypal,a.paypal)},a.prototype.removeLinkDetails=function(a){var b,c=this;return a.link&&(b=this.anchors.find(function(b){if("anchor"===c.linkDetailsManager.getAnchorType(b))return b.getId()===a.link.nodeId})),b&&this.pagesManager.removeAnchorLink(b),this.$q.when(null)},a.prototype.removeOldAnchor=function(){return this.removeLinkDetails(this.value)},a.prototype.ensureValueNotBroken=function(){_.isObject(this.value)||(this.$log.warn("linkDetails: empty value"),this.value={}),this.linkDetailsManager.isLinkBroken(this.value)&&(this.$log.warn("linkDetails: broken link, probably page or anchor was deleted"),this.value={})},a.prototype.openPhoneHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.link.phone"),this.CONSUMER_DIALOGS.LINK_DETAILS_HELP)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("linkDetails",{templateUrl:"views/editor/link-details.html",controller:LinkDetails,bindings:{value:"=",isValid:"="}});var LinkDetailsDocument=function(){function a(a,b,c,d){var e=this;this.mediaGalleryAdapter=a,this.$filter=b,this.$scope=c,this.$timeout=d,this.draft=angular.copy(this.file),c.$watch(function(){return e.file},function(){e.draft=angular.copy(e.file)})}return a.$inject=["mediaGalleryAdapter","$filter","$scope","$timeout"],Object.defineProperty(a.prototype,"hasFile",{get:function(){return!!this.draft},enumerable:!0,configurable:!0}),a.prototype.openFileDialog=function(){var a=this;this.mediaGalleryAdapter.selectDocument().then(function(b){if(a.onFileChange){var c=b[0];a.draft||(a.draft={}),a.onFileChange({result:c})}})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("linkDetailsDocument",{templateUrl:"views/editor/link-details-document.html",controller:LinkDetailsDocument,bindings:{file:"=?",onFileChange:"&?"}});var LinkDetailsPaypal=function(){function a(a,b,c){if(this.modelTree=a,this.linkDetailsManager=b,this.validation=c,!this.link){var d=this.linkDetailsManager.getBusinessNameAndEmail(),e=d.name,f=d.email;this.link={name:e,email:f,fixedAmount:!1}}this.items=Object.keys(Currencies).map(function(a){return{key:a,label:a}}),this.refreshCurrency()}return a.$inject=["modelTree","linkDetailsManager","validation"],Object.defineProperty(a.prototype,"fixedAmountTooltip",{get:function(){return"link-details-paypal.toggle."+(this.link.fixedAmount?"on":"off")},enumerable:!0,configurable:!0}),a.prototype.refreshCurrency=function(){var a=this;this.link.fixedAmount&&(this.selectedCurrency=this.items.find(function(b){return b.key===a.link.currency}))},a.prototype.fixedAmountChanged=function(a){this.link.fixedAmount=a,this.link.fixedAmount&&!this.link.currency&&(this.link.currency=Currencies.USD,this.refreshCurrency())},Object.defineProperty(a.prototype,"validationMessage",{get:function(){return this.validation.isEmail(this.link.email)?!this.link.fixedAmount||this.link.amount>0?void 0:"link-details.paypal.amount.validation":"link-details.email.error"},enumerable:!0,configurable:!0}),a.prototype.changeCurrency=function(a){this.link.currency=a},a}();angular.module("siteGeneratorEditorInternal").component("linkDetailsPaypal",{templateUrl:"views/editor/link-details-paypal.html",controller:LinkDetailsPaypal,bindings:{link:"="}});var editor;!function(a){var b=function(){function a(a,b,c,d,e,f,g){this.$scope=a,this.$q=b,this.CcDialogBuilder=c,this.$translate=d,this.CONSUMER_DIALOGS=e,this.linkDetailsManager=f,this.consumerBiLogger=g,this.isValid=!1}return a.$inject=["$scope","$q","CcDialogBuilder","$translate","CONSUMER_DIALOGS","linkDetailsManager","consumerBiLogger"],a.prototype.$postLink=function(){this.consumerBiLogger.contentEditor.linkDialogIsLoaded(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,this.source)},a.prototype.close=function(){this.consumerBiLogger.contentEditor.linkDialogClosed(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,this.source),this.onClose&&this.onClose()},a.prototype.save=function(){var a=this,b=this.$q.defer();this.$scope.$broadcast("linkDetails.save",b),b.promise.then(function(b){var c=a.linkDetailsManager.resolveLinkToType(b),d=a.linkDetailsManager.resolveTargetPage(b),e=a.resolvePlace(b);a.consumerBiLogger.contentEditor.linkDialogDoneClicked(a.node.getId(),a.node.getSpecificContentElementType(),a.node.alias,c,d,e,a.source),a.onSave&&a.onSave({linkDetails:b})})},a.prototype.help=function(){this.CcDialogBuilder.showSupportIframe(this.$translate.instant("help.link.menu"),this.CONSUMER_DIALOGS.LINK_DETAILS_HELP)},a.prototype.resolvePlace=function(a){return!0===a.isPageRef&&void 0===a.targetPage?a.link.nodeId:""},a}();a.LinkEditorPanel=b,angular.module("siteGeneratorEditorInternal").component("linkEditorPanel",{templateUrl:"views/editor/link-editor-panel.html",controller:a.LinkEditorPanel,bindings:{linkDetails:"=",node:"<",source:"<",onSave:"&",onClose:"&"}})}(editor||(editor={}));var Tester=function(){function a(){this.animationIcons=["Fade","Float","Fly","Fold","None","Slide","Turn"]}return a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("tester",{templateUrl:"views/tester.html",controller:Tester});var LogoColorPlayground=function(){function a(a){this.logoColorService=a,this.listOfLogos=[{url:"logos/0.png"}]}return a.$inject=["logoColorService"],a.prototype.calcPalette=function(a){var b=this,c=$('img[src="'+a.url+'"]'),d=c[0],e=c[1];a.palette=_.map(this.logoColorService.colorsFromImage(d),function(a){return b.logoColorService.rgbToHex(a)}),e.height=d.height,e.width=d.width},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("logoColorPlayground",{templateUrl:"views/logo-color-playground.html",controller:LogoColorPlayground}).directive("logoonload",function(){return{restrict:"A",link:function(a,b,c){b.bind("load",function(){})}}});var AnalysisPlayground=function(){function a(a,b,c,d,e,f){var g=this;this.$http=a,this.$timeout=b,this.CcDialogBuilder=c,this.$interval=d,this.$window=e,this.cookieManager=f,this.data={analyzer:"",userName:"",count:"10",comment:"",onlyPremium:!1,onlyPublished:!1,onlyMyTasks:!1,specialAnalyzerName:"SpecialAnalyzer",metasiteIds:"",specialAnalyzer:"// Use the Comment field for a description\nfunction SpecialAnalyzer() {}\nSpecialAnalyzer.prototype = new BasicDataAnalyzer();\nSpecialAnalyzer.prototype.getName = function () { return 'SpecialAnalyzer'; };\nSpecialAnalyzer.prototype.getDescription = function () { return 'Return special data'; };\n\nSpecialAnalyzer.prototype.parseData = function () {\n    var data = BasicDataAnalyzer.prototype.parseData.call(this);\n\n    // JsonPath documentation can be found at http://goessner.net/articles/JsonPath/\n    data['Number of pages'] =  blobJson.read('$..[?(@.type == \"page\")]').length;\n\n    // Find the editing distance of the Welcome section from the word \"Potpourri\"\n    data['welcome-distance'] = AnalyzerEngineHelpers.getLevenshteinDistance('Potpourri', cleanRichText(getSectionLongText(getSectionId('Welcome'))));\n\n    // Can either return an array, or a single hash\n    // Note that records do not have to include all of the same fields\n    return [\n       _.merge(_.clone(data), {'Life': 'good', 'I am': 'special'}),\n       _.merge(_.clone(data), {'I am not': 'very special', 'Life': 'meep'})\n    ];\n}\n\naddAnalyzer(new SpecialAnalyzer());\n"},this.results=[],this.analyzers=[],this.refreshingTasks=!1,this.superSecretEnabled=0,this.tasksRefreshInterval=3e3,this.data.userName=this.getUsername(),this.refreshTasksList(),this.refreshAnalyzersList(),d(function(){g.refreshTasksList()},this.tasksRefreshInterval)}return a.$inject=["$http","$timeout","CcDialogBuilder","$interval","$window","cookieManager"],a.prototype.getColorByStatus=function(a){return"done"===a?"#006400":"error"===a?"#c70000":"stale"===a?"#c70000":"started"===a?"#00009c":"processing"===a?"#00009c":"post-processing"===a?"#00009c":"#000000"},a.prototype.pz=function(a){return 1===(""+a).length?"0"+a:a},a.prototype.formatDateTime=function(a){return a.getFullYear()+"/"+this.pz(a.getUTCMonth())+"/"+this.pz(a.getDate())+" "+this.pz(a.getHours())+":"+this.pz(a.getMinutes())+":"+this.pz(a.getSeconds())},a.prototype.formatDateTimeString=function(a){return this.formatDateTime(new Date(a))},a.prototype.dateFromTask=function(a){return new Date(a[1].createdAt).getTime()},a.prototype.getTaskInfoLine=function(a){var b="--";return a[2].extra&&a[2].extra.length>0?a[2].extra:("started"!==a[2].status&&"processing"!==a[2].status&&"post-processing"!==a[2].status||(b="Running for "+Math.floor((Date.now()-new Date(a[1].createdAt).getTime())/1e3)+" seconds"),"error"===a[2].status&&(b=a[2].extra),"done"===a[2].status&&(b="Took "+Math.floor((new Date(a[2].endedAt).getTime()-new Date(a[1].createdAt).getTime())/1e3)+" seconds"),b)},a.prototype.refreshTasksList=function(){var a=this;this.refreshingTasks=!0,this.$http.get("/_api/onboarding-bo-server/analyzers/tasks/list").then(function(b){a.results=b.data.sort(function(a,b){return-1*(new Date(a[1].createdAt).getTime()-new Date(b[1].createdAt).getTime())}),a.refreshingTasks=!1})},a.prototype.refreshAnalyzersList=function(){var a=this;this.$http.get("/_api/onboarding-bo-server/analyzers/list").then(function(b){a.analyzers=b.data})},a.prototype.submitTask=function(){var a=this,b={name:this.data.analyzer,count:this.data.count,preFilterOnlyPremium:this.data.onlyPremium,preFilterOnlyPublished:this.data.onlyPublished,comment:this.data.comment,specialAnalyzer:"",specialAnalyzerName:"",metasiteIds:this.data.metasiteIds};this.superSecretEnabled&&(b.specialAnalyzer=this.data.specialAnalyzer,b.specialAnalyzerName=this.data.specialAnalyzerName),this.$http.post("/_api/onboarding-bo-server/analyzers/tasks/analyze/submit",b).then(function(){a.refreshTasksList()})},a.prototype.removeTask=function(a){var b=this;this.CcDialogBuilder.showNegativeConfirmation({heading:"Remove task",text:"Are you sure you want to remove this task?",acceptButtonText:"Remove",rejectButtonText:"Cancel",icon:"delete-single.gif",biDialogName:"bo-remove-task"}).then(function(){b.$http.get("/_api/onboarding-bo-server/analyzers/tasks/remove?id="+a).then(function(){b.refreshTasksList()})})},a.prototype.getUsername=function(){var a=this.cookieManager.readCookie("wixClient");return a?a.split("|")[0].replace(/"/,""):void 0},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("analysisPlayground",{templateUrl:"views/analysis-playground.html",controller:AnalysisPlayground});var ImageSearchDebug=function(){function a(a,b,c,d,e){var f=this;this.$scope=a,this.googleImageSearch=b,this.$q=c,this.$window=d,this.$http=e,this.availablePOS=[{name:"Dollar",code:"$"},{name:"Colon",code:":"},{name:"Comma",code:","},{name:"Period",code:"."},{name:"Left Quote",code:"````"},{name:"Right Quote",code:"''"},{name:"Left bracket",code:"-LRB-"},{name:"Right bracket",code:"-RRB-"},{name:"Email",code:"ADD"},{name:"Affix",code:"AFX"},{name:"Coordinating conjunction",code:"CC"},{name:"Cardinal number",code:"CD"},{name:"Determiner",code:"DT"},{name:"Existential there",code:"EX"},{name:"Foreign word",code:"FW"},{name:"Go with",code:"GW"},{name:"Hyphen",code:"HYPH"},{name:"Preposition or subordinating conjunction",code:"IN"},{name:"Adjective",code:"JJ"},{name:"Adjective, comparative",code:"JJR"},{name:"Adjective, superlative",code:"JJS"},{name:"List item marker",code:"LS"},{name:"Modal",code:"MD"},{name:"Superfluous punctuation",code:"NFP"},{name:"Noun, singular or mass",code:"NN"},{name:"Noun, plural",code:"NNS"},{name:"Proper noun, singular",code:"NNP"},{name:"Proper noun, plural",code:"NNPS"},{name:"Predeterminer",code:"PDT"},{name:"Possessive ending",code:"POS"},{name:"Personal pronoun",code:"PRP"},{name:"Possessive pronoun",code:"PRP$"},{name:"Adverb",code:"RB"},{name:"Adverb, comparative",code:"RBR"},{name:"Adverb, superlative",code:"RBS"},{name:"Particle",code:"RP"},{name:"Symbol",code:"SYM"},{name:"To",code:"TO"},{name:"Interjection",code:"UH"},{name:"Verb, base form",code:"VB"},{name:"Verb, past tense",code:"VBD"},{name:"Verb, gerund or present participle",code:"VBG"},{name:"Verb, past participle",code:"VBN"},{name:"Verb, non-3rd person singular present",code:"VBP"},{name:"Verb, 3rd person singular present",code:"VBZ"},{name:"Wh-determiner",code:"WDT"},{name:"Wh-pronoun",code:"WP"},{name:"Wh-pronoun, possessive",code:"WP$"},{name:"Wh-adverb",code:"WRB"},{name:"Unknown",code:"XX"}],this.selectedPOS={},this.availablePOS.forEach(function(a){return f.selectedPOS[a.code]=!0}),this.selectedPOS.VB=!1,this.selectedPOS.VBD=!1,this.selectedPOS.VBP=!1,this.selectedPOS.VBZ=!1,this.availableNLPEngines=["natural","nltk","nlp4j"],this.selectedNLPEngines={},this.availableNLPEngines.forEach(function(a){return f.selectedNLPEngines[a]=!0}),this.initDomains(),this.options={query:"",maxResults:5,png:!0,video:!0,hostnames:[]}}return a.$inject=["$scope","googleImageSearch","$q","$window","$http"],a.prototype.initDomains=function(){var a=this;this.domainGroups={public_domain:["pixabay.com","pexels.com","public-domain-image.com","publicdomainpictures.net","pdpics.com"],creative_commons:["wikipedia.org","upload.wikimedia.org","commons.wikimedia.org","flickr.com","geograph.org.uk","freestockphotos.biz","goodfreephotos.com","deviantart.com","vimeo.com","youtube.com"],all:[]},this.availableDomains=this.domainGroups.public_domain.concat(this.domainGroups.creative_commons),this.selectedDomains={},this.domainGroup="public_domain",this.$scope.$watch("$ctrl.domainGroup",function(){a.availableDomains.forEach(function(b){a.selectedDomains[b]=!1}),a.domainGroups[a.domainGroup].forEach(function(b){a.selectedDomains[b]=!0})})},a.prototype.getTerms=function(a){var b=this,c=[];return this.$http({method:"GET",url:"http://www.wix.com/_api/site-generator-http-api/health/parts_of_speech",params:{sentence:a}}).catch(function(a){}).then(function(d){if(void 0===d)console.log("no http-api");else{if(console.log("http-api",d.data),d.data.nltk){var e=d.data.nltk.map(function(a){return{text:a[0],pos:a[1]}});c.push({engine:"nltk",terms:e})}if(d.data.natural){var e=d.data.natural.map(function(a){return{text:a[0],pos:"N"===a[1]?"NN":a[1]}});c.push({engine:"natural",terms:e})}}return b.$http({method:"GET",url:"http://localhost:8080/",params:{sentence:a}})}).catch(function(a){}).then(function(a){if(void 0===a)console.log("no nlp4j");else{console.log("nlp4j",a.data);var b=[];a.data.split("\n").slice(2).filter(function(a){return a.length>0}).forEach(function(a,c,d){c%2==0&&b.push({text:d[c],pos:d[c+1]})}),c.push({engine:"nlp4j",terms:b})}return c})},a.prototype.getName=function(a){var b="";return this.availablePOS.some(function(c){if(c.code===a)return b=c.name,!0}),""===b&&(b="unrecognized code "+a),b},a.prototype.applyPOS=function(){var a=this;return this.$q.when(this.queries.trim().split("\n")).then(function(b){var c=b.map(function(b){return b=b.trim(),a.getTerms(b).then(function(a){return{query:b,results:a}})});return a.$q.all(c)}).then(function(b){var c=["Description of POS Tagging application:"];a.queries=b.map(function(b){var d=b;return console.log(d),d.results.filter(function(b){return a.selectedNLPEngines[b.engine]}).map(function(b){var d=b.terms.map(function(b){return b.text+" ("+(a.selectedPOS[b.pos]?"":"skipped, ")+a.getName(b.pos)+")"}).join(" ");return c.push("<"+b.engine+"> "+d),b}).map(function(b){return b.terms.filter(function(b){return a.selectedPOS[b.pos]}).map(function(a){return a.text})}).concat([d.query.split(" ")]).map(function(a){return a.join(" ")}).join("\n")}).join("\n"),c.push("<original>"),a.message=c.join("\n")})},a.prototype.search=function(){var a=this,b=this.queries.trim().split("\n");if(b.length>100)return void(this.message="Error: please enter no more than 100 queries");this.message="",this.$q.all(b.map(function(b){return a.googleImageSearch.search(angular.extend(angular.copy(a.options),{query:b,hostnames:Object.keys(a.selectedDomains).filter(function(b){return a.selectedDomains[b]})})).then(function(a){return{query:b,images:a}})})).then(function(b){a.results=b})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("imageSearchDebug",{template:'\n    <style>\n    image-search-debug {\n      width: 100%;\n      overflow: auto;\n    }\n    .result:hover .image {\n      visibility: visible;\n    }\n    .image {\n      visibility: hidden;\n    }\n    </style>\n    <textarea ng-model="$ctrl.queries" style="width: 100%;height: 300px;border: 1px solid black"></textarea>\n    <textarea style="width: 100%; height: 200px; font-family: monospace; white-space: nowrap; overflow: auto">{{$ctrl.message}}</textarea>\n    <p>\n      <label ng-repeat="pos in $ctrl.availablePOS">\n        <input type="checkbox" ng-model="$ctrl.selectedPOS[pos.code]">{{pos.name}}\n      </label>\n    </p>\n    <p>\n      <label ng-repeat="engine in $ctrl.availableNLPEngines">\n        <input type="checkbox" ng-model="$ctrl.selectedNLPEngines[engine]">{{engine}}\n      </label>\n      <button class="md-button md-raised" ng-click="$ctrl.applyPOS();">Apply Parts-of-Speech Tagging</button>\n    </p>\n    <p>\n      <select ng-model="$ctrl.domainGroup">\n        <option ng-repeat="(name, group) in $ctrl.domainGroups">{{name}}</option>\n      </select>\n      <label ng-repeat="domain in $ctrl.availableDomains">\n        <input type="checkbox" ng-model="$ctrl.selectedDomains[domain]">{{domain}}\n      </label>\n    </p>\n    <p>\n      <label><input type="checkbox" ng-model="$ctrl.options.png">Exclude png</label>\n      <label><input type="checkbox" ng-model="$ctrl.options.video">Exclude video</label>\n      <button class="md-button md-raised md-primary" ng-click="$ctrl.search();">Search</button>\n      <label><input type="number" ng-model="$ctrl.options.maxResults" step="1" min="1" max="10"> (from 1 to 10)</label>\n    </p>\n    <div ng-repeat="result in $ctrl.results" style="overflow: hidden" class="result">\n      <p style="float:left;padding:20px;font-weight:bold;font-size:1.5em">{{result.query}}</p>\n      <div class="image" style="float:left;" ng-repeat="image in result.images">\n        <a ng-href="{{image.webpageLink}}"><img title="{{image.title}}" alt="{{image.title}}" ng-src="{{image.link}}" style="width: 200px;"></a>\n        <span style="display: inherit;">{{image.width}}x{{image.height}}</span>\n      </div>\n    </div>\n    ',controller:ImageSearchDebug});var ServerSideTest=function(){function a(a,b,c){var d=this;this.cmsApi=a,this.serverSideRenderApi=b,this.$scope=c,this.businessName="",this.businessTypes=[],this.previousSuggestions=[],this.$scope.$watch("$ctrl.businessType",function(){var a=d.previousSuggestions.filter(function(a){return a.term===d.businessType});if(1===a.length)return d.industryId=a[0].industryId,void(d.structureId=a[0].structureId);d.cmsApi.suggest(d.businessType).then(function(a){d.previousSuggestions=a.filter(function(a){return"category"===a.type&&a.industryId&&a.structureId}),d.businessTypes=d.previousSuggestions.map(function(a){return a.term})})})}return a.$inject=["cmsApi","serverSideRenderApi","$scope"],a.prototype.reset=function(){this.taskId=void 0,this.siteId=void 0,this.industryId=void 0,this.structureId=void 0,this.businessName="",this.businessType=void 0,this.businessTypes=[],this.previousSuggestions=[],this.resetResults()},a.prototype.resetResults=function(){this.status=void 0,this.siteUrl=void 0,this.screenshotUrl=void 0},a.prototype.canRenderHomePage=function(){return void 0===this.taskId&&!!this.siteId},a.prototype.canCreateAndRender=function(){return void 0===this.taskId&&(this.businessName&&void 0!==this.industryId&&void 0!==this.structureId)},a.prototype.checkTaskState=function(){var a=this;void 0!==this.taskId&&this.serverSideRenderApi.getTaskStatus(this.taskId).then(function(b){if(void 0!==a.taskId)if(a.status="state: "+b.state+"\nstarted: "+new Date(b.createdAt),"wontfinish"===b.state)a.taskId=void 0;else{if("finished"!==b.state)return Promise.delay(1e3).then(function(){a.checkTaskState()});a.status+="\nfinished: "+new Date(b.updatedAt),a.screenshotUrl=b.screenshot,a.siteUrl="http://www.wix.com/website/builder#!/builder/story/"+b.siteId.instanceId+":"+b.siteId.metaSiteId,a.taskId=void 0}})},a.prototype.renderHomePage=function(){var a=this;this.canRenderHomePage()&&(console.log("render home page"),this.resetResults(),this.taskId=null,this.serverSideRenderApi.renderHomePage(this.siteId,void 0).then(function(b){console.log("the task is "+b),a.taskId=b,a.checkTaskState()}))},a.prototype.createAndRender=function(){var a=this;this.canCreateAndRender()&&(console.log("create and render"),this.resetResults(),this.taskId=null,this.serverSideRenderApi.createAndRender(this.structureId,this.industryId,this.businessName,void 0).then(function(b){console.log("the task is "+b),a.taskId=b,a.checkTaskState()}))},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("serverSideTest",{template:'\n    <style>\n.server-side-test {\n  background: white;\n  color: black;\n  width: 100%;\n  height: 100%;\n}\n.server-side-test .cc-panel-content {\n  float: left;\n}\n.server-side-test pre {\n  margin: 30px;\n  overflow: hidden;\n}\n    </style>\n    <div class="server-side-test">\n      <div class="cc-panel-content">\n        <p><c2-text-input label="Business name" value="$ctrl.businessName" disable-toggle="true"></c2-text-input></p>\n        <p><c2-text-input label="Business type" value="$ctrl.businessType" disable-toggle="true" autocomplete="$ctrl.businessTypes"></c2-text-input></p>\n        <p><button ng-class="{\'p9-primary\': true, \'-purple\': true, \'-disabled\': !$ctrl.canCreateAndRender()}" ng-disabled="!$ctrl.canCreateAndRender()" ng-click="$ctrl.createAndRender()">Create site and render it</button></p>\n\n        <p><c2-text-input label="Site id" value="$ctrl.siteId" disable-toggle="true"></c2-text-input></p>\n        <p><button ng-class="{\'p9-primary\': true, \'-purple\': true, \'-disabled\': !$ctrl.canRenderHomePage()}" ng-disabled="!$ctrl.canRenderHomePage()" ng-click="$ctrl.renderHomePage()">Render home page</button></p>\n\n        <pre>\n{{$ctrl.status}}\n<a ng-if="$ctrl.siteUrl" ng-href="{{$ctrl.siteUrl}}">Site</a>\n<a ng-if="$ctrl.screenshotUrl" ng-href="{{$ctrl.screenshotUrl}}">Screenshot</a>\n        </pre>\n        <p>\n          <button ng-class="{\'p9-primary\': true, \'-red\': true}" ng-click="$ctrl.reset()">reset</button>\n        </p>\n      </div>\n      <div class="cc-panel-content">\n      </div>\n    </div>\n    ',controller:ServerSideTest});var NotificationService=function(){function a(a,b,c,d,e,f,g){this.$rootScope=a,this.notify=b,this.spinnerService=c,this.defaultToastDuration=d,this.$translate=e,this.$timeout=f,this.applicationState=g,this.spinnerMessages=[]}
return a.$inject=["$rootScope","notify","spinnerService","defaultToastDuration","$translate","$timeout","applicationState"],a.prototype.initSpinnerSteps=function(a){this.totalSteps=a,this.currentStep=0,this.moveToNextMessage()},a.prototype.addSpinnerSteps=function(a){this.totalSteps+=a},a.prototype.showNextStep=function(a){this.showOnSpinner({totalSteps:this.totalSteps,currentStep:this.currentStep++,message:a})},a.prototype.hide=function(){this.shouldHide=!0},a.prototype.showOnSpinner=function(a){a&&this.spinnerMessages.push(a)},a.prototype.moveToNextMessage=function(){var a=this;(this.spinnerMessages.length>1||1===this.spinnerMessages.length&&this.shouldHide)&&this.spinnerMessages.shift(),(this.spinnerMessages.length>0||!this.shouldHide)&&this.$timeout(function(){return a.moveToNextMessage()},1400,!0)},a.prototype.getSpinnerMessage=function(){if(this.spinnerMessages.length)return _.first(this.spinnerMessages)},a.prototype.popSpinnerMessage=function(){if(this.spinnerMessages.length>1||1===this.spinnerMessages.length&&this.shouldHide)return this.spinnerMessages.shift()},a.prototype.show=function(a,b,c,d){if(!this.applicationState.isSilent()){var e=this,f=e.$rootScope,g=e.notify,h=e.$translate,i=e.defaultToastDuration;void 0===d&&(d="number"==typeof b?b:i);var j,k={message:h.instant(a),templateUrl:"views/pu2-notification.html",duration:Math.max(d,0)||"0"};b&&c&&(j=f.$new(),j.actionName=h.instant(b.toString()),j.action=c,k.scope=j),g(k)}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("notification",NotificationService),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("adiAutomation",["previewScale",function(a){return{restrict:"A",scope:!1,link:function(a,b,c){var d=c.adiAutomation;d&&angular.element(b).attr("adi-automation-label",d.toLowerCase().replace(/\s+/g,"-"))}}}]);var CnDrag=function(){function a(){this.DEFAULT_DRAG_CONFIG={autoScroll:1,dragClickables:!0,minimumMovement:5,type:"x,y",zIndexBoost:!0}}return a.prototype.wrapConfig=function(a,b){return _.assign({},this.DEFAULT_DRAG_CONFIG,b)},a.prototype.createDraggable=function(a,b){var c=this.wrapConfig(a,b);return Draggable.create(a,c)},a.prototype.removeDraggable=function(a){a&&a.kill()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("cnDrag",CnDrag);var SectionDrag=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=this;this.overlayManager=a,this.dropTargetCalculator=b,this.solutionSantaMediator=c,this.storyServices=d,this.applicationState=e,this.$rootScope=f,this.simpleSolutionManager=g,this.undoRedo=h,this.previewScale=i,this.sitePartTypes=j,this.nodeManipulationService=k,this.sectionManager=l,this.tpaService=m,this.consumerMenu=n,this.consumerBiLogger=o,this.$rootScope.$on("$stateChangeSuccess",function(a,b){b.name===config.STATES.BUILDER_ADD_SECTION&&p.calculateDropTarget()}),this.$rootScope.$on(ViewerScrollController.PreviewScrollEvent,function(){p.overlayManager.dropTargetId&&p.calculateDropTarget()}),this.listSpanManager=this.overlayManager.listSpanManager}return a.$inject=["overlayManager","dropTargetCalculator","solutionSantaMediator","storyServices","applicationState","$rootScope","simpleSolutionManager","undoRedo","previewScale","sitePartTypes","nodeManipulationService","sectionManager","tpaService","consumerMenu","consumerBiLogger"],a.prototype.onDragMouseMove=function(a){var b=this.getVisibleListSpans(),c=this.dropTargetCalculator.getClosestDropTargetInViewPort(a.clientY,b);this.overlayManager.setDropTarget(c)},a.prototype.startDrag=function(){var b=this;this.listSpansInSitePart=this.listSpanManager.getAllInBody();var c=_.findIndex(this.listSpansInSitePart,this.draggedListSpan),d=this.listSpanManager.getListSpanLayout(this.draggedListSpan),e=this.listSpansInSitePart.slice(c+1);return this.listSpanManager.toggleListSpanVisibility(this.draggedListSpan,!1).then(function(){return b.listSpanManager.setListSpanTop(b.draggedListSpan,a.HiddenListSpanTop)}).then(function(){return b.listSpanManager.moveListSpansByOffset(e,-d.height)}).then(function(){b.setPagePlaceholder(),b.previewScale.setScale(PreviewScale.MinScale)})},a.prototype.drop=function(){var a=this,b=this.draggedListSpan.node,c=this.sectionManager.geSectionPositionInPage(b),d=this.tpaService.getAppId(b),e=this.overlayManager.dropTargetId,f=this.storyServices.story.selectedPage,g=this.sectionManager.getAddSectionPosition();return c<g&&(g-=1),this.consumerBiLogger.sectionManagement.moveSectionWithinThePageClick(b.getId(),b.getContentElementType(),b.alias,g,c,"scroll",d),this.overlayManager.clearDropTarget(),this.nodeManipulationService.insertNodeAfter(f,b.id,e,!0),this.simpleSolutionManager.moveSectionOnPage(f,b.id,e).then(function(){return a.storyServices.reRender(a.sitePartTypes.BODY,f)}).then(function(){a.applicationState.setContentFocus(b.id,a.sitePartTypes.BODY),a.consumerMenu.calcMenuAnchors()}).then(function(){return a.endDrag()}).then(function(){a.overlayManager.calculateBodyHeight(),a.consumerBiLogger.sectionManagement.sectionMovedWithinThePageSuccess(b.getId(),b.getContentElementType(),b.alias,g,c,"scroll",d),a.undoRedo.captureOperation()})},a.prototype.cancelDrag=function(){var a=this;return this.listSpanManager.rerenderFromIndex().then(function(){return a.endDrag()})},a.prototype.endDrag=function(){var a=this;return this.listSpanManager.toggleListSpanVisibility(this.draggedListSpan,!0).then(function(){a.reset(),a.previewScale.reset(!0)})},a.prototype.setPagePlaceholder=function(){var a=this,b=_.sum(this.getVisibleListSpans(),function(b){return a.listSpanManager.getListSpanLayout(b).height});return this.listSpanManager.setPlaceholder(0,OverlayManager.DropTargetHeight+b)},a.prototype.getVisibleListSpans=function(){var a=this,b=_.isEmpty(this.listSpansInSitePart)?this.listSpanManager.getAllInBody():this.listSpansInSitePart;return _.reject(b,function(b){var c=b.node.id;return a.draggedListSpan&&c===a.draggedListSpan.node.id})},a.prototype.reset=function(){this.overlayManager.data.draggedListSpan=null,this.listSpansInSitePart=null,this.listSpanManager.clearPlaceholder()},a.prototype.calculateDropTarget=function(){!this.applicationState.isOnAddState()||this.overlayManager.data.draggedPresetPreview||this.overlayManager.dropTargetData.isDropTargetLocked||this.overlayManager.setDropTarget(this.dropTargetCalculator.getDropTargetInViewPort())},Object.defineProperty(a.prototype,"draggedListSpan",{get:function(){return this.overlayManager.data.draggedListSpan},enumerable:!0,configurable:!0}),a}();SectionDrag.HiddenListSpanTop=-9999,angular.module("siteGeneratorStaticsConsumerAppInternal").service("sectionDrag",SectionDrag);var DropTargetCalculator=function(){function a(a,b,c,d,e,f){this.overlayManager=a,this.previewService=b,this.previewScale=c,this.sitePartTypes=d,this.documentServicesMediator=e,this.$timeout=f}return a.$inject=["overlayManager","previewService","previewScale","sitePartTypes","documentServicesMediator","$timeout"],a.prototype.initDropTarget=function(){var a=this;if(this.previewScale.setScale(PreviewScale.MinScale),this.overlayManager.dropTargetId){var b=this.overlayManager.listSpanManager.getAllInBody();this.scrollToDropTargetCandidate(this.overlayManager.dropTargetId,b),this.$timeout(function(){a.overlayManager.unlockDropTarget()},0)}},a.prototype.scrollToDropTargetCandidate=function(b,c){var d=this.generateDropTargetCandidates(c),e=this.getYPositionByID(d,b),f=e-a.DistanceFromDropTarget;document.querySelector(Overlay.ViewportSelector).scrollTop=f},a.prototype.updateDropTarget=function(){this.overlayManager.setDropTarget(this.getDropTargetInViewPort())},a.prototype.getDropTargetInViewPort=function(){if(this.overlayManager.addTargetKnown)return this.overlayManager.dropTargetId;var b=document.querySelector(Overlay.ViewportSelector),c=this.overlayManager.listSpanManager.getAllInBody();return b&&0!==c.length?this.isAlmostTotallyScrolled(b)?c[c.length-1].node.id:this.calculateClosestDropTargetInViewPort(c,this.getSiteYScrollPosition()):a.FirstDropTargetId},a.prototype.isAlmostTotallyScrolled=function(a){return a.scrollHeight-a.scrollTop-a.clientHeight<=48},a.prototype.getClosestDropTargetInViewPort=function(a,b){var c=this.getActualClientY(a);return this.calculateClosestDropTargetInViewPort(b,c)},a.prototype.getActualClientY=function(b){return b+this.getSiteYScrollPosition()-a.TopBarHeight-a.OverlayTopOffset},a.prototype.calculateClosestDropTargetInViewPort=function(a,b){var c=this.generateDropTargetCandidates(a);return this.isLockedDropTargetInViewport(c)?this.overlayManager.dropTargetId:(this.overlayManager.unlockDropTarget(),this.detectBestDropTargetCandidate(c,b))},a.prototype.generateDropTargetCandidates=function(b){var c=this,d=this.previewScale.getScale();return[{yPosition:this.overlayManager.listSpanManager.getHeaderHeight()*d+a.OverlayTopOffset,nodeId:a.FirstDropTargetId}].concat(b.map(function(a){return{yPosition:c.overlayManager.listSpanManager.getListSpanAbsoluteLayout(a).scale(d).getBottom(),nodeId:a.node.id}}))},a.prototype.isLockedDropTargetInViewport=function(a){return this.overlayManager.dropTargetData.isDropTargetLocked&&this.isInViewPort(document.querySelector(Overlay.ViewportSelector),this.getYPositionByID(a,this.overlayManager.dropTargetId))},a.prototype.getYPositionByID=function(a,b){return _.find(a,{nodeId:this.overlayManager.dropTargetId}).yPosition},a.prototype.detectBestDropTargetCandidate=function(a,b){var c=this,d=document.querySelector(Overlay.ViewportSelector),e=_.filter(a,function(a){var b=a.yPosition;return c.isInViewPort(d,b)}),f=_.isEmpty(e)?a:e;return _.min(f,function(a){var c=a.yPosition;return Math.abs(b-c)}).nodeId},a.prototype.isInViewPort=function(a,b){var c=this.getSiteYScrollPosition(),d=c+a.clientHeight;return b>=c&&b<=d},a.prototype.getSiteYScrollPosition=function(){return this.documentServicesMediator.getSiteScroll().y},a}();DropTargetCalculator.TopBarHeight=72,DropTargetCalculator.OverlayTopOffset=54,DropTargetCalculator.DistanceFromDropTarget=100,DropTargetCalculator.FirstDropTargetId="0",angular.module("siteGeneratorStaticsConsumerAppInternal").service("dropTargetCalculator",DropTargetCalculator);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/intro/intro.html","<div class='backdrop' data-hook='animation-backdrop'></div>\n<div class='intro-loading' data-hook='loading'>\n<div class='message' translate='intro.loading-message'></div>\n</div>\n<div class='intro-content' data-hook='animation-content'>\n<ui-view></ui-view>\n<div class='cc-icon-wix-logo intro-logo'></div>\n</div>\n<svg>\n<filter id='intro-image-blur'>\n<feGaussianBlur stdDeviation='60'></feGaussianBlur>\n</filter>\n</svg>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/intro/intro-category-search.html","<div class='intro-box-content' ng-style='$ctrl.contentPosition'>\n<form class='search-form b01-big-text-field' data-hook='type-form' ng-submit='$ctrl.next()'>\n<label data-hook='input-label' translate='{{::$ctrl.getVerticalTranslation(&quot;intro.category-search.label&quot;)}}'></label>\n<md-autocomplete data-hook='input-container' hidden-override='false' intro-md-autocomplete intro-md-loaded='$ctrl.isListLoaded()' intro-md-on-select='$ctrl.onSelectedFromList($term)' md-autofocus='true' md-autoselect='false' md-delay='100' md-input-name='businessTypeInput' md-item-text='$ctrl.getDisplayText(category)' md-items='category in $ctrl.search()' md-menu-class='c01-big-list' md-no-cache='true' md-search-changed='$ctrl.onSearchChanged($term, $matches)' md-search-text='$ctrl.searchTerm' md-select-on-focus='true' md-select-on-match='true' md-selected-item='$ctrl.selected'>\n<md-item-templates data-hook='search-result-entry' intro-md-item-disabled='{{category.isTitle}}' ng-class='{&quot;is-related&quot;: category.isRelated, &quot;isExactMatch&quot;: category.isExactMatch}' ng-click='$ctrl.itemClicked($event, category.isTitle)' ng-mouseenter='$ctrl.relatedResultsEnter(category.isTitle)' ng-mouseleave='$ctrl.relatedResultsLeave()'>\n<span md-highlight-flags='gi' md-highlight-text='$ctrl.getHighlightText(category)'>{{ $ctrl.getDisplayText(category) }}</span>\n</md-item-templates>\n</md-autocomplete>\n<i class='cc-icon-search'></i>\n<intro-box-buttons is-next-disabled='!$ctrl.validCategory'></intro-box-buttons>\n</form>\n<div class='examples faded' data-hook='search-example-label' ng-if='!$ctrl.searchTerm'>\n<ul class='md-autocomplete-suggestions examplesList c01-big-list'>\n<li class='exampleTitle intro-md-item-disabled'>{{$ctrl.examplesTitle}}</li>\n<li class='exampleItem' ng-class='{&quot;is-related&quot;: true, &quot;isExactMatch&quot;: false}' ng-click='$ctrl.onExampleClick($event)' ng-mouseenter='$ctrl.relatedResultsEnter(false)' ng-mouseleave='$ctrl.relatedResultsLeave()' ng-repeat='example in $ctrl.getPreSuggestionsByVertical()'>{{::'intro.category-search.example-category.' + example | translate}}</li>\n</ul>\n</div>\n<div class='invalid-characters-title' data-hook='invalid-characters-message' ng-show='!$ctrl.isValidTerm()' translate='intro.category-search.invalid-characters-label'></div>\n<div class='no-category-matches' data-hook='no-category-matches' ng-if='$ctrl.isEmptySearch()'>\n<div class='icon'></div>\n<div class='title' translate='intro.category-search.no-result-label'></div>\n</div>\n</div>\n<div class='generic-popover' data-hook='empty-message' ng-if='$ctrl.shouldShowGenericPopover()' ng-style='$ctrl.genericPopoverPosition'>\n<div class='title' translate='intro.category-search.no-result-popover-label'></div>\n<ul>\n<li class='generic-item' data-hook='empty-suggestion' ng-click='$ctrl.onSelectFromEmptyList(category, $index)' ng-repeat='category in $ctrl.defaultCategories track by category.term'>\n{{category.term}}\n</li>\n</ul>\n</div>\n<div class='search-tip-title' data-hook='search-tip' ng-style='$ctrl.boxTipStyle' translate='intro.category-search.search-tip'></div>\n<div class='a01-buttons end'>\n<button data-hook='skip' ng-attr-type='button' ng-click='$ctrl.skip()'>\n<span class='button-text skip-button' translate='intro.skip-button'></span>\n<i class='cc-icon-intro-next-arrow'></i>\n<i class='cc-icon-intro-next-arrow'></i>\n</button>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/intro/intro-box-buttons.html","<button class='intro-box-back a02-text-button' data-hook='back' ng-click='$ctrl.onBack()' ng-if='$ctrl.back' ng-style='$ctrl.backStyle' type='button'>\n<i class='cc-icon-intro-next-arrow'></i>\n<span class='button-text' translate='intro.back-button'></span>\n</button>\n<button class='intro-box-next a02-text-button' data-hook='next' focus-if='$ctrl.focusNext' ng-click='$ctrl.onNext()' ng-disabled='$ctrl.isNextDisabled' ng-style='$ctrl.nextStyle'>\n<cc-svg-icon class='logo--uploading-spin' icon='misc:loader-circle-small' ng-if='$ctrl.isInProcess'></cc-svg-icon>\n<span cc-hide-tooltip='{{$ctrl.isHideTooltip}}' cc-tooltip-position='{{$ctrl.tooltipPosition}}' cc-tooltip='{{$ctrl.tooltipTitle}}' class='button-text' ng-if='!$ctrl.isInProcess' translate='intro.next-button'></span>\n<div class='intro-next-arrow-container' ng-if='!$ctrl.isInProcess'>\n<i class='cc-icon-intro-next-arrow'></i>\n</div>\n<i class='active-decorator big'></i>\n<i class='active-decorator medium'></i>\n<i class='active-decorator small'></i>\n</button>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/builder.html","<div class='builder' ng-class='{&#39;preview-mode&#39; : $builder.isPreview()}' ng-if='$builder.renderBuilder' ng-show='$builder.showBuilder' state-class=''>\n<top-bar class='not-in-preview'></top-bar>\n<div class='stage'>\n<div class='builder-panel-inner' ng-style='{width: $builder.panelWidth + &#39;px&#39;}' ui-view='builder-panel'></div>\n<preview></preview>\n<preview-mode-toggle ng-if='$builder.shouldShowPreviewToggle()'></preview-mode-toggle>\n<div class='mobile-preview-wrapper' ng-if='$builder.isMobilePreviewDisplay()'>\n<mobile-preview page='{{$builder.getMobilePreviewPageId()}}' preview-url='{{$builder.getMobilePreviewUrl()}}'></mobile-preview>\n</div>\n</div>\n<floating-undo-redo class='not-in-preview' ng-if='$builder.applicationState.isInMobileEditMode()'></floating-undo-redo>\n<floating-stage-controls class='not-in-preview' ng-if='!$builder.applicationState.isInMobileEditMode()'></floating-stage-controls>\n<floating-go-to-editor-link class='not-in-preview' ng-if='$builder.showFloatingGotoEditor()'></floating-go-to-editor-link>\n<div class='builder-overlay'></div>\n<logo-extraction-popup data-hook='logo-extraction-popup' ng-if='$builder.logoExtractionPopupService.shouldShowPopup()'></logo-extraction-popup>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/builder-edit.html","<div class='builder-add'>\n<node-editor child-id='$ctrl.childId' data-hook='node-editor' node-id='$ctrl.contentId'></node-editor>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/segment-overlay.html","<div class='segment-overlay' columns='$ctrl.columns' ng-class='{active: $ctrl.isSectionActive(),&#39;highlight&#39;: $ctrl.isSegmentHighlight(),&#39;listitem&#39;: $ctrl.isListItem}' ng-click='$ctrl.doClickOnSegmentOverlay($event)' ng-mouseenter='$ctrl.onMouseEnterSegment()' ng-mouseleave='$ctrl.onMouseLeaveSegment()' ng-style='$ctrl.style' segment-overlay-position='$ctrl.segment'>\n<div class='overlay-interact' ng-if='$ctrl.isListItem'>\n<div class='interact-wrap'>\n<cc-popover class='overlay-actions' data-hook='overlay-actions' margin-distance='20' on-trigger-off='$ctrl.onHideActionsMenu()' on-trigger-on='$ctrl.onShowActionsMenu()' window-margin-bottom='30'>\n<cc-popover-trigger data-hook='segment-overlay-actions-menu-trigger'>\n<div class='overlay-trigger-container'>\n<div class='overlay-title segment-title' data-hook='segment-overlay-title'>{{$ctrl.getTitle()}}</div>\n<div class='overlay-actions-button' data-hook='overlay-actions-icon'>\n<cc-svg-icon data-hook='segment-overlay-actions-icon-edit' icon='osi:edit'></cc-svg-icon>\n</div>\n</div>\n</cc-popover-trigger>\n<cc-popover-content>\n<cc-menu-item data-hook='{{:: action.name}}-button' label='{{:: action.label | translate}}' ng-click='$ctrl.runAction($event, action, $ctrl.node)' ng-repeat='action in $ctrl.listActionsMenu track by action.name' svg-icon='{{:: action.icon}}'></cc-menu-item>\n</cc-popover-content>\n</cc-popover>\n</div>\n</div>\n<slide-show-navigation-overlay ng-if='$ctrl.isShowSlideShowOverlay()' node='$ctrl.node'></slide-show-navigation-overlay>\n<component-overlay component='component' le-arg-list='$ctrl.leArgList' ng-if='!$ctrl.segment.node.isTpaNode()' ng-repeat='component in $ctrl.components track by component.field.key' node='$ctrl.node' segment='$ctrl.segment'></component-overlay>\n<div class='segment-component tpa-component component-overlay-no-actions-menu' component-overlay-position='component' manage-tpa-button-origin='ADI: segemnt component' manage-tpa-button='$ctrl.getTpaType(component)' ng-repeat='component in $ctrl.tpaComponents track by component.field.key' tpa-node='$ctrl.getTpaNode(component)'>\n<div class='overlay-interact'>\n<div class='interact-wrap'>\n<div class='overlay-title tpa-overlay-title'>{{$ctrl.getLayoutTitle(component)}}</div>\n</div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/component-overlay.html","<div cc-tooltip-options='{{:: $ctrl.getMenuTooltipOptions()}}' cc-tooltip-position='top' cc-tooltip='{{:: $ctrl.getMenuTooltip()}}' class='segment-component' component-overlay-position='$ctrl.component' data-hook='component-overlay' data-overlay-id='{{:: $ctrl.generateOverlayId()}}' ng-class='{media: $ctrl.component.layout.type === &#39;media&#39;, highlight: $ctrl.isComponentHighlight(), &#39;component-overlay-no-actions-menu&#39;: !$ctrl.hasActionsMenu()}' ng-click='$ctrl.handleClicks($event); $event.stopPropagation();' ng-dblclick='$event.stopPropagation();' ng-style='$ctrl.component.style'>\n<div class='overlay-interact'>\n<div class='interact-wrap'>\n<div class='overlay-title' data-hook='component-overlay-title' ng-if='!$ctrl.actionsMenu.length'>{{$ctrl.title}}</div>\n<cc-popover class='overlay-actions' data-hook='overlay-actions' margin-distance='20' ng-if='$ctrl.actionsMenu.length' on-trigger-off='$ctrl.onHideActionsMenu()' on-trigger-on='$ctrl.onShowActionsMenu()' window-margin-bottom='30'>\n<cc-popover-trigger data-hook='component-overlay-actions-menu-trigger'>\n<div class='overlay-trigger-container'>\n<div class='overlay-title' data-hook='component-overlay-title'>{{$ctrl.title}}</div>\n<div adi-automation='osi-comp-{{$ctrl.title}}' class='overlay-actions-button' data-hook='overlay-actions-icon'>\n<cc-svg-icon data-hook='component-overlay-actions-icon-edit' icon='osi:edit'></cc-svg-icon>\n</div>\n</div>\n</cc-popover-trigger>\n<cc-popover-content>\n<cc-menu-item data-hook='{{:: action.name}}-button' highlight-color='{{action.style.highlightColor}}' label='{{action.label | translate}}' ng-click='$ctrl.runAction(action)' ng-dblclick='$event.stopPropagation()' ng-repeat='action in $ctrl.simpleActionsMenu track by action.name' override-hover-color='{{:: action.style.color}}' svg-icon='{{:: action.icon}}'></cc-menu-item>\n<div ng-repeat='action in $ctrl.palleteActionsMenu track by $index'>\n<p17-divider></p17-divider>\n<p0-spacer></p0-spacer>\n<p27-palette-color-picker colors='$ctrl.getPallete(action).hexList' light-icon-index='$ctrl.getPallete(action).lightIconIndex' notification-getter='$ctrl.getMessage(action, index)' selected-index='$ctrl.getPallete(action).colorIndex' set-color-callback='$ctrl.setColor(action, index)'></p27-palette-color-picker>\n</div>\n</cc-popover-content>\n</cc-popover>\n<div class='interact-wrap-spacer'></div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/cropper-controls.html","<div class='cropper-tool-controls'>\n<div class='controllers'>\n<p5-slider max='100' min='0' ng-mousedown='startZoomChange($event)' ng-mouseup='endZoomChange($event)' on-value-change='setZoomValue(value)' step='1' type='{{type}}' units='&#39;%&#39;' value='zoom'></p5-slider>\n<div class='sub-controls'>\n<button cc-tooltip='crop_cancel' class='p9a-secondary common-controls-svg-font-icons-close-8' ng-click='closeCropper(false)'></button>\n<button cc-tooltip='crop_apply' class='p9a-secondary common-controls-svg-font-icons-check' ng-click='closeCropper(true)'></button>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/pages-panel.html","<script id='nodes_renderer_item.html' type='text/ng-template'>\n<li class='menu-item sub-page' data-nodrag='{{!$ctrl.canManagePage(item)}}' ng-class='{&#39;not-managed-page&#39; : !$ctrl.canManagePage(item)}' ng-include='&#39;nodes_renderer.html&#39;' ng-repeat='item in item.children track by item.id' ui-tree-node></li>\n<\/script>\n<script id='nodes_renderer.html' type='text/ng-template'>\n<div class='tree-node' ng-class='{&#39;selected-page&#39;: $ctrl.pagesManager.isSelectedPage(item.id), &#39;hidden-page&#39;: item.hide, &#39;edit-mode&#39;: renameForm.$visible}' ng-click='$ctrl.goToPage(item);'>\n<div class='icon cc-icon-subpage' disabled='disabled'></div>\n<div class='drag-area' ng-class='$ctrl.applicationState.isInMobileEditMode() ? &#39;extra-margin disabled-drag-pointer&#39; : &#39;&#39;' ng-if='$ctrl.canManagePage(item)' ui-tree-handle>\n<div class='icon cc-icon-drag-small' ng-if='!$ctrl.applicationState.isInMobileEditMode()'></div>\n</div>\n<form blur='submit' class='page-name-form' editable-form name='renameForm'>\n<div buttons='no' class='menu-name page-name' e-form='renameForm' e-ng-keydown='$ctrl.handleNodesRendererKeydown($event, item)' e-ng-keyup='$ctrl.handleNodesRendererKeyup($event, item)' e-placeholder='{{::&#39;pages_panel.rename-page.input.placeholder&#39; | translate}}' e-required editable-text='item.name' ng-dblclick='$ctrl.showRenameForm($event, renameForm, item)' onaftersave='$ctrl.afterRename(this, item)'>{{item.name}}</div>\n</form>\n<div class='icon custom-icon' ng-class='$ctrl.iconName(item)'></div>\n<div class='indications'>\n<div cc-tooltip-position='top' cc-tooltip='settings' class='icon settings-button cc-icon-settings' data-hook='page-settings' ng-click='$ctrl.openActionsDialog($event, item, renameForm);' ng-if='$ctrl.canManagePage(item) &amp;&amp; !$ctrl.applicationState.isInMobileEditMode()'></div>\n<div class='icon cc-icon-hide-eye' ng-click='$ctrl.canManagePage(item, false) &amp;&amp; $ctrl.togglePageVisibility(item.id)' ng-if='$ctrl.pagesManager.isHiddenPage(item.id) &amp;&amp; !$ctrl.applicationState.isInMobileEditMode()'></div>\n</div>\n</div>\n<div class='c11-paragraph seo-error' ng-if='item.error'>\n<span translate='pages_panel.page-name.error'></span>\n</div>\n<ul class='menu-list' data-nodrop-enabled='true' ng-if='$ctrl.isContainerOfUnmanageable(item)' ng-include='&#39;nodes_renderer_item.html&#39;' ng-model='item.children' ui-tree-nodes=''></ul>\n<ul class='menu-list' ng-if='!$ctrl.isContainerOfUnmanageable(item)' ng-include='&#39;nodes_renderer_item.html&#39;' ng-model='item.children' ui-tree-nodes=''></ul>\n<\/script>\n<div class='pages-panel-inner' data-hook='split-false'>\n<cc-panel-frame class='-with-corners' label='{{::&#39;pages_panel.title&#39; | translate}}' ng-class='{&#39;small-margin-important&#39;: $ctrl.applicationState.isInMobileEditMode()}' on-close='$ctrl.closePagesPanel()' on-help='$ctrl.openPagesPanelHelp()' show-close-button='true' show-footer='!$ctrl.applicationState.isInMobileEditMode()' show-help-button='true'>\n<cc-panel-body class='pages-panel-wrapper-inner'>\n<div class='menu-list-container' data-drag-enabled='!$ctrl.applicationState.isInMobileEditMode()' data-max-depth='2' ng-class='{&#39;extra-margin-bottom&#39;: $ctrl.applicationState.isInMobileEditMode()}' ui-tree='$ctrl.treeOptions'>\n<ul class='menu-list menu-list-primary' ng-model='$ctrl.menuService.menuItems' ui-tree-nodes>\n<li class='menu-item' data-hook='page-item-{{item.id}}' ng-class='{&#39;not-managed-page&#39; : !$ctrl.canManagePage(item)}' ng-include='&#39;nodes_renderer.html&#39;' ng-repeat='item in $ctrl.menuService.getMenuItems($ctrl.applicationState.isInMobileEditMode()) track by item.id' ui-tree-node></li>\n</ul>\n</div>\n</cc-panel-body>\n<cc-panel-footer>\n<button class='cc-x-height p9a-secondary -inverse add-page-button' data-hook='add-page-panel' ng-click='$ctrl.addPage()'>\n<span class='cc-x-height'>{{::'pages_panel.add-page.desktop' | translate}}</span>\n</button>\n</cc-panel-footer>\n</cc-panel-frame>\n<panel-message class='panel-icon' ng-if='$ctrl.applicationState.isInMobileEditMode()'>\n<div class='cc-icon-mobile-edit-notice'></div>\n<div class='mobile-message'>\n{{::'pages_panel.add-page.mobile.text' | translate}}\n<a class='link-to-desktop' data-hook='link-to-desktop-edit-mode' ng-click='$ctrl.goToDesktopEditMode()'>\n{{::'pages_panel.add-page.mobile.target' | translate}}\n</a>\n</div>\n</panel-message>\n</div>\n<div class='seo-panel' ui-view></div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict"
;a.put("views/pages-panel-split.html","<script id='nodes_renderer_item.html' type='text/ng-template'>\n<li class='menu-item sub-page' data-nodrag='{{!$ctrl.canManagePage(item)}}' ng-class='{&#39;not-managed-page&#39; : !$ctrl.canManagePage(item)}' ng-include='&#39;nodes_renderer.html&#39;' ng-repeat='item in item.children track by item.id' ui-tree-node></li>\n<\/script>\n<script id='nodes_renderer.html' type='text/ng-template'>\n<div class='tree-node' ng-class='{&#39;selected-page&#39;: $ctrl.isSelectedPage(item.id), &#39;hidden-page&#39;: item.hide, &#39;edit-mode&#39;: renameForm.$visible}' ng-click='$ctrl.goToPage(item);'>\n<div class='icon cc-icon-subpage' disabled='disabled'></div>\n<div class='drag-area' ng-class='$ctrl.isInMobileEditMode() ? &#39;extra-margin disabled-drag-pointer&#39; : &#39;&#39;' ng-if='$ctrl.canManagePage(item)' ui-tree-handle>\n<div class='icon cc-icon-drag-small' ng-if='!$ctrl.isInMobileEditMode()'></div>\n</div>\n<form blur='submit' class='page-name-form' editable-form name='renameForm'>\n<div buttons='no' class='menu-name page-name' e-form='renameForm' e-ng-keydown='$ctrl.handleNodesRendererKeydown($event, item)' e-ng-keyup='$ctrl.handleNodesRendererKeyup($event, item)' e-placeholder='{{::&#39;pages_panel.rename-page.input.placeholder&#39; | translate}}' e-required editable-text='item.name' ng-dblclick='$ctrl.showRenameForm($event, renameForm, item)' onaftersave='$ctrl.afterRename(this, item)'>{{item.name}}</div>\n</form>\n<div class='icon custom-icon' ng-class='$ctrl.iconName(item)'></div>\n<div class='indications'>\n<div cc-tooltip-position='top' cc-tooltip='settings' class='icon settings-button cc-icon-settings' data-hook='page-settings' ng-click='$ctrl.openActionsDialog($event, item, renameForm);' ng-if='$ctrl.canManagePage(item) &amp;&amp; !$ctrl.isInMobileEditMode()'></div>\n<div class='icon cc-icon-hide-eye' ng-click='$ctrl.canManagePage(item, false) &amp;&amp; $ctrl.togglePageVisibility(item.id)' ng-if='$ctrl.isHiddenPage(item.id) &amp;&amp; !$ctrl.isInMobileEditMode()'></div>\n</div>\n</div>\n<div class='c11-paragraph seo-error' ng-if='item.error'>\n<span translate='pages_panel.page-name.error'></span>\n</div>\n<ul class='menu-list' data-nodrop-enabled='true' ng-if='$ctrl.isContainerOfUnmanageable(item)' ng-include='&#39;nodes_renderer_item.html&#39;' ng-model='item.children' ui-tree-nodes=''></ul>\n<ul class='menu-list' ng-if='!$ctrl.isContainerOfUnmanageable(item)' ng-include='&#39;nodes_renderer_item.html&#39;' ng-model='item.children' ui-tree-nodes=''></ul>\n<\/script>\n<div class='pages-panel-inner' data-hook='split-true'>\n<cc-panel-frame class='-with-corners' label='{{::&#39;pages_panel.title&#39; | translate}}' ng-class='{&#39;small-margin-important&#39;: $ctrl.isInMobileEditMode()}' on-close='$ctrl.closePagesPanel()' on-help='$ctrl.openPagesPanelHelp()' show-close-button='true' show-footer='!$ctrl.isInMobileEditMode()' show-help-button='true'>\n<cc-panel-body class='pages-panel-wrapper-inner'>\n<div class='menu-list-container' data-drag-enabled='!$ctrl.isInMobileEditMode()' data-max-depth='2' ng-class='{&#39;extra-margin-bottom&#39;: $ctrl.isInMobileEditMode()}' ui-tree='$ctrl.treeOptions'>\n<ul class='menu-list menu-list-primary' ng-model='$ctrl.menuItems' ui-tree-nodes>\n<li class='menu-item' data-hook='page-item-{{item.id}}' ng-class='{&#39;not-managed-page&#39; : !$ctrl.canManagePage(item)}' ng-include='&#39;nodes_renderer.html&#39;' ng-repeat='item in $ctrl.getMenuItems($ctrl.isInMobileEditMode()) track by item.id' ui-tree-node></li>\n</ul>\n</div>\n</cc-panel-body>\n<cc-panel-footer>\n<button class='cc-x-height p9a-secondary -inverse add-page-button' data-hook='add-page-panel' ng-click='$ctrl.addPage()'>\n<span class='cc-x-height'>{{::'pages_panel.add-page.desktop' | translate}}</span>\n</button>\n</cc-panel-footer>\n</cc-panel-frame>\n<panel-message class='panel-icon' ng-if='$ctrl.isInMobileEditMode()'>\n<div class='cc-icon-mobile-edit-notice'></div>\n<div class='mobile-message'>\n{{::'pages_panel.add-page.mobile.text' | translate}}\n<a class='link-to-desktop' data-hook='link-to-desktop-edit-mode' ng-click='$ctrl.goToDesktopEditMode()'>\n{{::'pages_panel.add-page.mobile.target' | translate}}\n</a>\n</div>\n</panel-message>\n</div>\n<div class='seo-panel' ui-view></div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/page-menu-dialog.html","<md-dialog aria-label='List dialog' class='p4-action-menu page-menu-dialog md-transition-in' data-hook='page-menu-dialog' ng-style='{top: $ctrl.position.top, left: $ctrl.position.left}' role='menu'>\n<cc-menu-item icon='{{$ctrl.getTpaIcon($ctrl.tpaType)}}' label='{{::&#39;builder.manage-tpa-&#39; + $ctrl.tpaType | translate}}' manage-tpa-button-origin='ADI-pages-cog' manage-tpa-button='$ctrl.tpaType' ng-click='$ctrl.CcDialogBuilder.hide()' ng-hide='!$ctrl.tpaType'></cc-menu-item>\n<cc-menu-item icon='cc-icon-seo' label='{{::&#39;builder.pages-panel.settings.page-seo&#39; | translate}}' ng-click='$ctrl.goToPageSeo($ctrl.selected.idForActions);' ng-hide='$ctrl.isHiddenTpa'></cc-menu-item>\n<cc-menu-item icon='cc-icon-home' label='{{::&#39;builder.pages-panel.settings.set-as-homepage&#39; | translate}}' ng-click='$ctrl.setAsHomepage();' ng-hide='$ctrl.isHomepage() || !$ctrl.menuService.isOuterLevelById($ctrl.selected.idForActions) || $ctrl.isHiddenTpa'></cc-menu-item>\n<cc-menu-item icon='cc-icon-rename' label='{{::&#39;builder.pages-panel.settings.rename&#39; | translate}}' ng-click='$ctrl.rename();' ng-hide='$ctrl.isHiddenTpa'></cc-menu-item>\n<cc-menu-item icon='cc-icon-duplicate' label='{{::&#39;builder.pages-panel.settings.duplicate&#39; | translate}}' ng-click='$ctrl.duplicatePage();' ng-hide='$ctrl.tpaType'></cc-menu-item>\n<cc-menu-item data-hook='hide' icon='cc-icon-hide-eye' label='{{::&#39;builder.pages-panel.settings.hide&#39; | translate}}' ng-click='$ctrl.toggleVisibility();' ng-hide='$ctrl.pagesManager.isHiddenPage($ctrl.selected.idForActions) || $ctrl.isHiddenTpa'></cc-menu-item>\n<cc-menu-item icon='cc-icon-show-eye' label='{{::&#39;builder.pages-panel.settings.show&#39; | translate}}' ng-click='$ctrl.toggleVisibility();' ng-hide='!$ctrl.pagesManager.isHiddenPage($ctrl.selected.idForActions) || $ctrl.isHiddenTpa'></cc-menu-item>\n<cc-menu-item icon='cc-icon-subpage' label='{{::&#39;builder.pages-panel.settings.subpage&#39; | translate}}' ng-click='$ctrl.toggleSubMainPage();' ng-hide='$ctrl.hasNestedPages() || $ctrl.singlePage() || $ctrl.isHomepage() || !$ctrl.menuService.isOuterLevelById($ctrl.selected.idForActions) || $ctrl.isHiddenTpa'></cc-menu-item>\n<cc-menu-item icon='cc-icon-subpage' label='{{::&#39;builder.pages-panel.settings.main-page&#39; | translate}}' ng-click='$ctrl.toggleSubMainPage();' ng-hide='$ctrl.hasNestedPages() || $ctrl.singlePage() || $ctrl.menuService.isOuterLevelById($ctrl.selected.idForActions) || $ctrl.isHiddenTpa'></cc-menu-item>\n<cc-menu-item data-hook='delete' icon='cc-icon-delete' label='{{::&#39;builder.pages-panel.settings.delete&#39; | translate}}' ng-click='$ctrl.deletePage();' ng-hide='$ctrl.notDeletable()'></cc-menu-item>\n</md-dialog>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/seo-panel.html","<cc-panel-frame class='-with-corners' data-hook='panel-frame' label='{{$ctrl.state.displayName.value}} {{::&#39;builder.seo-panel.title&#39; | translate}}' on-close='$ctrl.closeSeoPanel()' on-help='$ctrl.openSeoPanelHelp()' show-close-button='true' show-help-button='true'>\n<div class='seo'>\n<c2-text-input change-value-on-blur='true' disable-toggle='true' help-tooltip='{{$ctrl.config.title.helpTooltip}}' is-show-validator-error='false' label='{{::&#39;builder.seo-panel.page-title.label&#39; | translate}}' on-blur='$ctrl.updateValueAndSaveForm(&#39;pageTitleSEO&#39;)' placeholder='$ctrl.defaults.pageTitleSEO' show-help-button='true' validation='$ctrl.config.title.validation' value='$ctrl.state.pageTitleSEO.value'></c2-text-input>\n<div ng-show='!$ctrl.seoErrorHandler.pageTitleSEO.isValid'>\n<div class='c11-paragraph seo-error'>{{ ::'seo_panel.title.validation' | translate }}</div>\n</div>\n<c2-text-input change-value-on-blur='true' disable-toggle='true' help-tooltip='{{$ctrl.config.description.helpTooltip}}' is-show-validator-error='false' label='{{::&#39;builder.seo-panel.description.label&#39; | translate}}' long='true' on-blur='$ctrl.saveForm(&#39;descriptionSEO&#39;)' placeholder='$ctrl.config.description.placeholder' show-help-button='true' validation='$ctrl.config.description.validation' value='$ctrl.state.descriptionSEO.value'></c2-text-input>\n<div ng-show='!$ctrl.seoErrorHandler.descriptionSEO.isValid'>\n<div class='c11-paragraph seo-error'>{{ ::'seo_panel.description.validation' | translate }}</div>\n</div>\n<c2-text-input change-value-on-blur='true' disable-toggle='true' help-tooltip='{{$ctrl.config.keywords.helpTooltip}}' is-show-validator-error='false' label='{{::&#39;builder.seo-panel.keywords.label&#39; | translate}}' long='true' on-blur='$ctrl.saveForm(&#39;metaKeywordsSEO&#39;)' placeholder='$ctrl.config.keywords.placeholder' show-help-button='true' validation='$ctrl.config.keywords.validation' value='$ctrl.state.metaKeywordsSEO.value'></c2-text-input>\n<div ng-show='!$ctrl.seoErrorHandler.metaKeywordsSEO.isValid'>\n<div class='c11-paragraph seo-error'>{{ ::'seo_panel.keywords.validation' | translate }}</div>\n</div>\n<c11-paragraph class='style-d' html=':: &#39;seo_panel.keywords.launch.note&#39; | translate'></c11-paragraph>\n<c14-checkbox item='$ctrl.indexableCheckbox' on-toggle='$ctrl.saveForm(&#39;indexable&#39;)'></c14-checkbox>\n<c2-text-input change-value-on-blur='true' class='seo-page-url' disable-toggle='true' is-disabled='true' label='{{::&#39;builder.seo-panel.page-url.label&#39; | translate}}' ng-if='!$ctrl.flags.editPageSeoManually' prefix='http://www.../' show-icon='true' value='$ctrl.state.pageUriSEO.value'></c2-text-input>\n<c2-text-input change-value-on-blur='true' class='seo-page-url' data-hook='seo-url' disable-toggle='true' help-tooltip='{{$ctrl.config.url.helpTooltip}}' is-disabled='false' is-show-validator-error='false' label='{{::&#39;builder.seo-panel.page-url.label&#39; | translate}}' ng-if='$ctrl.flags.editPageSeoManually' on-blur='$ctrl.updateValueAndSaveForm(&#39;pageUriSEO&#39;)' prefix='http://www.../' show-help-button='true' validation='$ctrl.config.url.validation' value='$ctrl.state.pageUriSEO.value'></c2-text-input>\n<div ng-if='$ctrl.flags.editPageSeoManually' ng-show='!$ctrl.seoErrorHandler.pageUriSEO.isValid'>\n<div class='c11-paragraph seo-error' data-hook='seo-url-error-message'>{{ ::'seo_panel.url.validation' | translate }}</div>\n</div>\n<div class='seo-wiz-container'>\n<div class='title'>{{ ::'seo_panel.keywords.launch.title' | translate }}</div>\n<div class='description text-t2'>{{ ::'seo_panel.keywords.launch.description' | translate }}</div>\n<a class='p9a-secondary cc-x-height -medium' data-hook='seo-wiz-link' href='{{::$ctrl.wixSEOWizUrl()}}' ng-click='$ctrl.onSEOWizClick()' target='_blank'>{{ ::'seo_panel.keywords.launch.button' | translate }}</a>\n</div>\n</div>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/spinner.html","<div class='spinner' ng-class='{firstTime: isFirstTime() || buildHomePagePhase, fatalError: isFatalError(), &#39;solid-background&#39;: isSolidBackground()}'>\n<div class='onboarding-preloader-circles' ng-show='!buildHomePagePhase &amp;&amp; showAnimations()'>\n<div class='onboarding-preloader-container onboarding-preloader-container1'>\n<div class='onboarding-preloader-circle onboarding-preloader-circle1'></div>\n<div class='onboarding-preloader-circle onboarding-preloader-circle2'></div>\n<div class='onboarding-preloader-circle onboarding-preloader-circle3'></div>\n</div>\n<div class='onboarding-preloader-container onboarding-preloader-container2'>\n<p class='msg'>{{getMessage()}}</p>\n</div>\n</div>\n<div class='onboarding-homepage-progress' ng-if='isSpinning' ng-show='buildHomePagePhase'>\n<div class='title'>{{getMessage()}}</div>\n<div class='progress-bar-spinner'>\n<div class='complete' ng-style='getProgressStyle()'></div>\n</div>\n<div class='subtitle'>{{subtitle}}</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/builder/drag-handle.html","<div class='handle-container'>\n<button cc-tooltip-position='left' cc-tooltip='overlay_move_up' class='p9c-primary -icon-only arrow up' ng-click='$ctrl.upClick({event: event})' ng-disabled='$ctrl.arrowUpDisabled'>\n<i class='cc-icon-arrow-up' ng-disabled='$ctrl.arrowUpDisabled'></i>\n</button>\n<a class='p9c-primary -icon-only handle' cn-canceled='$ctrl.dragCanceled({event: event})' cn-disable-if='$ctrl.dragDisabled' cn-dragend='$ctrl.dragEnd({event: event})' cn-draggable='$ctrl.draggable' cn-dragstart='$ctrl.dragStart({event: event})' cn-drop='$ctrl.drop({event: event})' ghost-selector='.draggable-ghost [data-hook=&#39;draggable-ghost&#39;]' ng-disabled='$ctrl.dragDisabled'>\n<i class='cc-icon-drag-small' ng-click='$ctrl.dragHandleClick()' ng-disabled='$ctrl.dragDisabled'></i>\n</a>\n<button cc-tooltip-position='left' cc-tooltip='overlay_move_down' class='p9c-primary -icon-only arrow down' ng-click='$ctrl.downClick({event: event})' ng-disabled='$ctrl.arrowDownDisabled'>\n<i class='cc-icon-arrow-down' ng-disabled='$ctrl.arrowDownDisabled'></i>\n</button>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/builder/switch-preset.html","<cc-panel-frame class='-with-corners' label='{{&#39;builder.section-design.panel-headline-text&#39; + $ctrl.partSuffix|translate}}' on-close='$ctrl.back()' on-help='$ctrl.help()' show-close-button='true' show-help-button='true'>\n<cc-panel-fixed-top>\n<c11-paragraph class='c11-paragraph' compile=':: $ctrl.getHeaderParagraphText()' data-hook='paragraph'></c11-paragraph>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='preview-list-wrap'>\n<preview-list current='$ctrl.current' draggable='false' intent='$ctrl.switchPresetIntent' ng-if='$ctrl.nodes' nodes='$ctrl.nodes' strategy='$ctrl.switchPresetStrategy'></preview-list>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/builder/switch-color.html","<cc-panel-frame class='-with-p16a-header -with-corners' label='{{:: &#39;builder.switch-color.panel-headline-text&#39; | translate}}' on-close='$ctrl.close()' on-help='$ctrl.help()' on-return='$ctrl.back()' show-close-button='true' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top>\n<div class='c11-paragraph' compile=':: $ctrl.titleParagraph' data-hook='title-paragraph'></div>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='preview-list-wrap'>\n<preview-list current='$ctrl.current' draggable='false' intent='$ctrl.switchColorIntent' load-callback='$ctrl.loadCallback({total})' ng-if='$ctrl.nodes' nodes='$ctrl.nodes' strategy='$ctrl.switchColorStrategy'></preview-list>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/loaders/open-site-loader.html","<div class='container'>\n<video autoplay loop ng-attr-poster='{{::$ctrl.wixAngularTopology.staticsUrl + &#39;/images/loaders/open-site-fallback.png&#39;}}' ng-attr-src='{{::$ctrl.getVideoUrl()}}'></video>\n<div class='video-text text-t2'>{{ ::'builder.open-site-loader.video-title' | translate }}</div>\n<div class='loader-messages'>\n<div class='loader-message message-1 font-t2'>{{ $ctrl.currentMessage }}</div>\n<div class='loader-message message-2 font-t2'>{{ $ctrl.currentMessage }}</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/preview/preview.html","<div class='preview-container'>\n<div class='preview-padding' ng-style='{ &#39;flex-basis&#39;: $ctrl.getPanelWidth() }'></div>\n<div class='preview-content' id='preview-content'>\n<div class='preset-preview-container'>\n<div class='draggable-ghost'>\n<div class='layout-preset-preview' data-hook='draggable-ghost' layout-preset-preview='' ng-if='!$ctrl.flags.mergedHeader &amp;&amp; $ctrl.presetPreview' preset-preview='$ctrl.presetPreview' scale='0.24' static='true'></div>\n<preset-preview data-hook='draggable-ghost' ng-if='$ctrl.flags.mergedHeader &amp;&amp; $ctrl.presetPreview' preset-preview='$ctrl.presetPreview' scale='0.24' static='true'></preset-preview>\n</div>\n</div>\n<overlay overlay-load></overlay>\n<fake-browser></fake-browser>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/floating-undo-redo.html","<div class='floating-button-box undo-redo -second-top-bar' ng-class='{&#39;no-zoom&#39;: $ctrl.applicationState.isInMobileEditMode()}'>\n<div cc-tooltip-position='left' cc-tooltip='menu_undo'>\n<div class='cc-icon-undo cc-icon-circle' data-hook='undo' ng-click='$ctrl.onClickUndo()' ng-disabled='!$ctrl.canUndo()'></div>\n</div>\n<div cc-tooltip-position='right' cc-tooltip='menu_redo'>\n<div class='cc-icon-redo cc-icon-circle' data-hook='redo' ng-click='$ctrl.onClickRedo()' ng-disabled='!$ctrl.canRedo()'></div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/floating-go-to-editor-link.html","<div cc-tooltip-position='left' cc-tooltip='floating-go-to-editor-link' class='floating-go-to-editor-link' data-hook='floating-go-to-editor-link' ng-class='$ctrl.isLeftPanelOpen ? &#39;floating-go-to-editor-link-left-panel-is-open&#39; : &#39;floating-go-to-editor-link-left-panel-is-closed&#39;' ng-click='$ctrl.onLinkClick()'>\n<div class='floating-go-to-editor-link-small-text' data-hook='floating-go-to-editor-link-small-text'>\n{{:: 'floating-go-to-editor-link.advanced-editor' | translate}}\n</div>\n<div class='floating-go-to-editor-link-large-text' data-hook='floating-go-to-editor-link-large-text'>\n{{:: 'floating-go-to-editor-link.use-advanced-editor' | translate}}\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/floating-stage-controls.html","<div class='floating-stage-controls' data-hook='floating-stage-controls' ng-class='$ctrl.isLeftPanelOpen ? &#39;floating-stage-controls-left-panel-is-open&#39; : &#39;floating-stage-controls-left-panel-is-closed&#39;' ng-hide='$ctrl.showChangeSectionHeight()'>\n<div class='floating-stage-controls-undo-redo'>\n<div cc-tooltip-position='top' cc-tooltip='menu_undo'>\n<div adi-automation='undo-btn' class='floating-stage-controls-large-icon cc-icon-undo' data-hook='floating-stage-controls-undo-btn' ng-click='$ctrl.onUndo()' ng-disabled='!$ctrl.canUndo'></div>\n<div adi-automation='undo-btn' class='floating-stage-controls-small-icon cc-icon-undo-small' data-hook='floating-stage-controls-undo-btn-small' ng-click='$ctrl.onUndo()' ng-disabled='!$ctrl.canUndo'></div>\n</div>\n<div cc-tooltip-position='top' cc-tooltip='menu_redo'>\n<div adi-automation='redo-btn' class='floating-stage-controls-large-icon cc-icon-redo' data-hook='floating-stage-controls-redo-btn' ng-click='$ctrl.onRedo()' ng-disabled='!$ctrl.canRedo'></div>\n<div adi-automation='redo-btn' class='floating-stage-controls-small-icon cc-icon-redo-small' data-hook='floating-stage-controls-redo-btn-small' ng-click='$ctrl.onRedo()' ng-disabled='!$ctrl.canRedo'></div>\n</div>\n</div>\n<div class='floating-stage-controls-divider'>\n<div class='floating-stage-controls-divider-content'></div>\n</div>\n<div class='floating-stage-controls-zoom'>\n<div cc-tooltip-position='top' cc-tooltip='zoom_out' title='zoom out'>\n<div adi-automation='zoom out btn' class='floating-stage-controls-large-icon cc-icon-zoom-out' data-hook='floating-stage-controls-zoom-out-btn' ng-click='$ctrl.onZoomOut()' ng-disabled='!$ctrl.canZoomOut'></div>\n<div adi-automation='zoom out btn' class='floating-stage-controls-small-icon cc-icon-zoom-out-small' data-hook='floating-stage-controls-zoom-out-btn-small' ng-click='$ctrl.onZoomOut()' ng-disabled='!$ctrl.canZoomOut'></div>\n</div>\n<div cc-tooltip-position='top' cc-tooltip='zoom_in' title='zoom in'>\n<div adi-automation='zoom in btn' class='floating-stage-controls-large-icon cc-icon-zoom-in' data-hook='floating-stage-controls-zoom-in-btn' ng-click='$ctrl.onZoomIn()' ng-disabled='!$ctrl.canZoomIn'></div>\n<div adi-automation='zoom in btn' class='floating-stage-controls-small-icon cc-icon-zoom-in-small' data-hook='floating-stage-controls-zoom-in-btn-small' ng-click='$ctrl.onZoomIn()' ng-disabled='!$ctrl.canZoomIn'></div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/top-bar/top-bar.html","<div class='wix-logo-icon wix-logo-old-design cc-icon-wix-logo' ng-show='!$ctrl.isPreviewDisplay()'></div>\n<div class='top-bar-sections -no-padding -force-tab-spacing' ng-show='!$ctrl.isPreviewDisplay()'>\n<div class='top-bar-section'>\n<pages-panel-dropdown active-tab='$ctrl.activeTab' class='dropdown-with-underline top-bar-tab tab-margin-right -accent-hover-text' ng-if='!$ctrl.isShowPagesDropDown()'></pages-panel-dropdown>\n<pages-dropdown-new-design active-tab='$ctrl.activeTab' class='dropdown-with-underline top-bar-tab tab-margin-right -accent-hover-text' ng-if='$ctrl.isShowPagesDropDown()'></pages-dropdown-new-design>\n<div class='top-bar-tab drop-down design-tab tab-margin-right -accent-hover-text' data-hook='design-tab-drop-down-section' ng-class='{&#39;active&#39;: $ctrl.activeTab === &#39;design&#39;}' ng-click='$ctrl.showSiteDesignDropdown()' ng-if='$ctrl.isInDesktopEditMode() &amp;&amp; !$ctrl.flags.popover' ng-mouseenter='$ctrl.showSiteDesignDropdown()' ng-mouseleave='$ctrl.hideSiteDesignDropdown()'>\n<div class='flex-center-grow'>\n<span>{{::'builder.design' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow design-tab-dropdown' data-hook='site-design-dropdown-menu' ng-attr-style='{{$ctrl.getSiteDesignDropdownStyle()}}' ng-show='$ctrl.shouldShowDropDownDesign()'>\n<ul class='sub-menu'>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-themes-button' ng-click='$ctrl.onClickDesign()'>\n<span>\n<span class='sub-menu-icon cc-icon-themes'></span>\n<span class='sub-menu-label'>{{::'design.themes.title' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding divider-container'>\n<span class='sub-menu-divider'></span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-colors-button' ng-click='$ctrl.openNewColorationPanel()'>\n<span>\n<span class='sub-menu-icon cc-icon-colours margin-style'></span>\n<span class='sub-menu-label'>{{::'design.colors.title' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-fonts-button' ng-click='$ctrl.openFonts()'>\n<span>\n<span class='sub-menu-icon cc-icon-fonts margin-style'></span>\n<span class='sub-menu-label'>{{::'design.fonts.title' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-animations-button' ng-click='$ctrl.openAnimationPanel()'>\n<span>\n<span class='sub-menu-icon cc-icon-animations margin-style'></span>\n<span class='sub-menu-label'>{{::'design.animations.title' | translate }}</span>\n</span>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<site-design-dropdown active-tab='$ctrl.activeTab' class='top-bar-tab tab-margin-right -accent-hover-text' data-hook='design-tab-drop-down-section' ng-if='$ctrl.isInDesktopEditMode() &amp;&amp; $ctrl.flags.popover'></site-design-dropdown>\n<add-tab-dropdown active-tab='$ctrl.activeTab' class='top-bar-tab tab-margin-right -accent-hover-text' ng-if='$ctrl.isInDesktopEditMode()'></add-tab-dropdown>\n<div class='top-bar-tab divider design-section-divider tab-margin-right' ng-if='($ctrl.showSingleTpa() || $ctrl.showMultiTpa()) &amp;&amp; !$ctrl.mobileMode'></div>\n<div class='top-bar-tab tab-with-underline manage-single-tpa -accent-hover-text' data-hook='manage-single-tpa' manage-tpa-button-origin='ADI-topbar-single' manage-tpa-button='$ctrl.singleTpaType()' ng-if='$ctrl.showSingleTpa()' tpa-node='$ctrl.getRelevantTPANode(&#39;{{ $ctrl.singleTpaType() }}&#39;)'>\n<div class='flex-center-grow'>\n<span>{{:: 'builder.manage-tpa-button' | translate }} {{$ctrl.singleTpa().menuItem.nameAsObject}}</span>\n</div>\n</div>\n<div class='top-bar-tab drop-down manage-multiple-tpa -accent-hover-text' ng-if='$ctrl.showMultiTpa()' ng-mouseenter='$ctrl.shouldShowManage = true' ng-mouseleave='$ctrl.shouldShowManage = false'>\n<div class='flex-center-grow'>\n<span data-hook='manage-multiple-apps-button'>{{::'builder.manage-apps' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow' ng-show='$ctrl.shouldShowManageDropDown()' ng-style='$ctrl.getManageDropdownStyle()'>\n<ul class='sub-menu' data-hook='manage-multiple-apps-sub-menu'>\n<li class='sub-menu-item text-with-icon' manage-tpa-button-origin='ADI-topbar-multiple' manage-tpa-button='tpaNaiveType' ng-repeat='(tpaNaiveType, manageableTPA) in $ctrl.getManageableTPAs()' tpa-node='$ctrl.getRelevantTPANode(&#39;{{ tpaNaiveType }}&#39;)'>\n<span>\n<span class='sub-menu-icon' ng-class='manageableTPA.menuItem.icon'></span>\n<span class='sub-menu-label'>{{::'builder.manage-tpa-sub-menu.label.' + manageableTPA.menuItem.nameAsObject.toLowerCase() | translate}}</span>\n</span>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class='top-bar-section'>\n<div class='top-bar-tab drop-down' ng-if='$ctrl.debugFeatures()'>\n<div class='flex-center-grow' ng-mouseenter='$ctrl.shouldShowStartOver = true' ng-mouseleave='$ctrl.shouldShowStartOver = false'>\nDebug\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow' ng-show='$ctrl.shouldShowStartOver'>\n<ul class='sub-menu'>\n<li class='sub-menu-item' ng-click='$ctrl.startOver()'>Start Over</li>\n<li class='sub-menu-item' ng-click='$ctrl.resetPageAlignment(2)' ng-if='$ctrl.showPageAlignment()'>PageWidth 2 columns</li>\n<li class='sub-menu-item' ng-click='$ctrl.resetPageAlignment(3)' ng-if='$ctrl.showPageAlignment()'>PageWidth 3 columns</li>\n<li class='sub-menu-item' ng-click='$ctrl.resetPageAlignment(4)' ng-if='$ctrl.showPageAlignment()'>PageWidth 4 columns</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<simple-saving-animation class='top-bar-tab wix-saving-old-design -attached-to-logo' data-hook='simple-saving-indicator' is-currently-saving='$ctrl.showSavingMessage' is-saved='$ctrl.showSavedMessage'></simple-saving-animation>\n<div cc-tooltip-position='bottom' cc-tooltip='menu_save' class='top-bar-tab tab-with-underline wix-saving-old-design -accent-hover-text' data-hook='topbar-manual-save' ng-click='$ctrl.onManualSave()' ng-if='$ctrl.isManualSave()'>\n<div class='flex-center-grow'>\n<span>{{::'builder.save' | translate }}</span>\n</div>\n</div>\n<switch-edit-mode-dropdown adi-automation='switch-edit-mode-dropdown' class='top-bar-tab drop-down tab-margin-right -accent-hover-text' ng-if='$ctrl.shouldShowSwitchEditMode()'></switch-edit-mode-dropdown>\n<div class='top-bar-tab divider switch-edit-mode-divider' ng-if='$ctrl.shouldShowSwitchEditMode()'></div>\n<div class='top-bar-tab tab-with-underline help-tab tab-margin-right tab-margin-left -accent-hover-text' data-hook='help-tab' ng-click='$ctrl.openMainHelp()'>\n<div class='flex-center-grow'>\n<span class='top-bar-help-text'>{{::'general.help' | translate }}</span>\n<span class='top-bar-help-symbol cc-icon-help-12x7'></span>\n</div>\n</div>\n<upgrade-tab-popup class='top-bar-tab tab-margin-right tab-margin-left upgrade-tab-popup' meta-site-id='$ctrl.storyServices.metaSiteId'></upgrade-tab-popup>\n<div class='top-bar-tab divider site-upgrade-divider'></div>\n<site-dropdown class='top-bar-tab tab-margin-right -accent-hover-text'></site-dropdown>\n<div cc-tooltip-position='bottom' cc-tooltip='menu_preview' class='top-bar-tab tab-with-underline preview-tab tab-margin-right -accent-hover-text -second-top-bar' data-hook='topbar-preview' ng-click='$ctrl.onClickPreview()'>\n<div class='flex-center-grow'>\n<span>{{::'builder.preview' | translate }}</span>\n</div>\n</div>\n<div cc-tooltip-position='bottom' cc-tooltip='menu_publish' class='top-bar-tab tab-with-underline publish-tab tab-margin-right -invert -second-top-bar' data-hook='topbar-publish' ng-class='{ &#39;publish-tab-loader&#39;: $ctrl.whilePublishing || $ctrl.afterPublishing }' ng-click='$ctrl.onClickPublish($event)'>\n<div class='flex-center-grow'>\n<span>{{::'builder.publish' | translate }}</span>\n<preloader-publish-completed completed='$ctrl.afterPublishing &amp;&amp; $ctrl.showPublishAnimation' in-progress='$ctrl.whilePublishing' inverted='true'></preloader-publish-completed>\n</div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict"
;a.put("views/top-bar/pages-panel-dropdown/pages-panel-dropdown.html","<div class='flex-center-grow'>\n<div class='drop-down pages-dropdown pages-panel-dropdown' data-hook='second-top-bar-pages-panel' ng-class='$ctrl.getCssClassesForPageTab()' ng-click='$ctrl.handlePagesDropDownClick($event)'>\n<span>\n{{::\"general.page\" | translate }}:&nbsp;\n</span>\n<span class='page-tab-title cc-ellipsis' data-hook='page-tab-title' ng-if='!$ctrl.flags.mergedHeader'>\n{{$ctrl.getSelectedPageName()}}\n</span>\n<span class='page-tab-title' data-hook='page-tab-title' ng-if='$ctrl.flags.mergedHeader'>\n<span class='cc-ellipsis'>{{$ctrl.getSelectedPageName()}}</span>\n<i class='top-bar-menu-home-icon cc-icon-home' data-hook='home-icon' ng-if='$ctrl.shouldShowHomeIcon()'></i>\n</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow pages-dropdown' ng-style='$ctrl.getPagesDropdownStyle()'>\n<ul cc-scrollbar class='sub-menu'>\n<li class='sub-menu-item' ng-click='$ctrl.goToPage(item, $event)' ng-repeat='item in ::$ctrl.menuService.menuItems | filter: { page:true } track by item.id'>\n<span class='cc-ellipsis sub-menu-label' ng-class='{&#39;-selected&#39;: $ctrl.pagesManager.isSelectedPage(item.id) }'>\n{{ item.name }}\n<i class='icon cc-icon-hide-eye' ng-if='item.hide'></i>\n</span>\n<ul>\n<li class='sub-menu-item -child' ng-click='$ctrl.goToPage(child, $event)' ng-repeat='child in ::item.children | filter: { page:true } track by child.id'>\n<span class='cc-ellipsis sub-menu-label' ng-class='{&#39;-selected&#39;: $ctrl.pagesManager.isSelectedPage(child.id) }'>\n{{ child.name }}\n<i class='icon cc-icon-hide-eye' ng-if='child.hide'></i>\n</span>\n</li>\n</ul>\n</li>\n</ul>\n<div class='manage-pages-div' data-hook='manage-pages'>\n<button class='p9-primary -small cc-x-height manage-pages' ng-click='$ctrl.onClickPages()'>\n<div class='cc-x-height'>{{::\"dropdown.manage-pages\" | translate }}</div>\n</button>\n</div>\n</div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/top-bar/pages-panel-dropdown/pages-dropdown-new-design.html","<div class='flex-center-grow' ng-mouseenter='$ctrl.showPagesDropdownNewDesign()' ng-mouseleave='$ctrl.hidePagesDropdownNewDesign()'>\n<div class='drop-down pages-dropdown pages-panel-dropdown' data-hook='second-top-bar-pages-panel' ng-class='$ctrl.getCssClassesForPageTab()' ng-click='$ctrl.handlePagesDropDownClick($event)'>\n<span>\n{{::\"general.page\" | translate }}:&nbsp;\n</span>\n<span class='page-tab-title cc-ellipsis' data-hook='page-tab-title'>\n{{$ctrl.getSelectedPageName()}}\n</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow pages-dropdown' ng-class='$ctrl.getDropdownAdditionalStyleBasedOnDevice()' ng-show='$ctrl.shouldShowDropDownDesign()' ng-style='$ctrl.getPagesDropdownStyle()'>\n<div class='site-pages-div' data-hook='site-pages'>\n<button class='site-pages-in-drop-down -small cc-x-height site-pages' ng-click='$ctrl.onClickPages(&#39;site pages&#39;)'>\n<div class='cc-x-height'>{{::\"dropdown.site-pages\" | translate }}</div>\n</button>\n</div>\n<div class='site-pages-dropdown-divider'></div>\n<ul cc-scrollbar class='sub-menu pages-dropdown-list' ng-class='$ctrl.getSubMenuAdditionalStyleBasedOnDevice()'>\n<li class='sub-menu-item' ng-class='{&#39;-selected-in-pages-dropdown&#39;: $ctrl.isMarkAsSelected(item.id) }' ng-click='$ctrl.goToPage(item, $event)' ng-repeat='item in $ctrl.menuService.getMenuItems($ctrl.applicationState.isInMobileEditMode()) track by item.id'>\n<span class='pages-dropdown-page-name cc-ellipsis sub-menu-label'>\n{{ item.name }}\n<i class='icon cc-icon-hide-eye' ng-if='item.hide'></i>\n</span>\n<ul>\n<li class='sub-menu-item -child no-padding-left' ng-class='{&#39;-selected-in-pages-dropdown&#39;: $ctrl.isMarkAsSelected(child.id) }' ng-click='$ctrl.goToPage(child, $event)' ng-repeat='child in item.children | filter: { page:true } track by child.id'>\n<span class='pages-dropdown-page-name cc-ellipsis sub-menu-label'>\n{{ child.name }}\n<i class='icon cc-icon-hide-eye' ng-if='child.hide'></i>\n</span>\n</li>\n</ul>\n</li>\n</ul>\n<div class='pages-dropdown-divider' ng-if='!$ctrl.isInMobileEditMode()'></div>\n<div class='manage-pages-div' data-hook='manage-pages' ng-if='!$ctrl.isInMobileEditMode()'>\n<button class='manage-pages-in-drop-down -small cc-x-height manage-pages sub-menu-label' ng-click='$ctrl.onClickPages(&#39;manage pages&#39;)'>\n<div class='cc-x-height'>{{::\"dropdown.manage-pages\" | translate }}</div>\n</button>\n</div>\n</div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/top-bar/add-tab-dropdown/add-tab-dropdown.html","<div adi-automation='topbar-add-dropdown' class='flex-center-grow drop-down add-tab add-tab-dropdown' data-hook='second-top-bar-add-section' ng-click='$ctrl.showAddSectionDropdown()' ng-mouseenter='$ctrl.showAddSectionDropdown()' ng-mouseleave='$ctrl.hideAddSectionDropdown()'>\n<span>{{::'general.add' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow add-tab-dropdown' data-hook='add-dropdown-menu' ng-attr-style='{{$ctrl.getAddSectionDropdownStyle()}}' ng-show='$ctrl.shouldShowDropDownDesign()'>\n<ul class='sub-menu'>\n<li class='sub-menu-item text-with-icon' data-hook='add-section-button' ng-class='$ctrl.getCssClassesForAddSectionTab()' ng-click='$ctrl.onClickAddSection()'>\n<span>\n<span class='sub-menu-icon cc-icon-section'></span>\n<span class='sub-menu-label'>{{::'builder.top-bar.add-section' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item text-with-icon' data-hook='add-page-button' ng-click='$ctrl.onClickAddPage()'>\n<span>\n<span class='sub-menu-icon cc-icon-page'></span>\n<span class='sub-menu-label'>{{::'general.page' | translate }}</span>\n</span>\n</li>\n</ul>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/top-bar/site-design-dropdown/site-design-dropdown.html","<cc-popover class='design-tab flex-center-grow' margin-distance='21' ng-class='{&#39;active&#39;: $ctrl.activeTab === &#39;design&#39;}'>\n<cc-popover-trigger>\n<div class='flex-center-grow'>\n<span>{{::'builder.design' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n</div>\n</cc-popover-trigger>\n<cc-popover-content ng-attr-style='{{$ctrl.getSiteDesignDropdownStyle()}}'>\n<ul class='drop-down sub-menu'>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-themes-button' ng-click='$ctrl.onClickDesign()'>\n<span>\n<span class='sub-menu-icon cc-icon-themes'></span>\n<span class='sub-menu-label'>{{::'design.themes.title' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding divider-container'>\n<span class='sub-menu-divider'></span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-colors-button' ng-click='$ctrl.openNewColorationPanel()'>\n<span>\n<span class='sub-menu-icon cc-icon-colours margin-style'></span>\n<span class='sub-menu-label'>{{::'design.colors.title' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-fonts-button' ng-click='$ctrl.openFonts()'>\n<span>\n<span class='sub-menu-icon cc-icon-fonts margin-style'></span>\n<span class='sub-menu-label'>{{::'design.fonts.title' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-animations-button' ng-click='$ctrl.openAnimationPanel()'>\n<span>\n<span class='sub-menu-icon cc-icon-animations margin-style'></span>\n<span class='sub-menu-label'>{{::'design.animations.title' | translate }}</span>\n</span>\n</li>\n</ul>\n</cc-popover-content>\n</cc-popover>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/top-bar/site-dropdown/site-dropdown.html","<div class='drop-down site-tab flex-center-grow' data-hook='site-tab' ng-if='!$ctrl.flags.popover' ng-mouseenter='$ctrl.showDropDown()' ng-mouseleave='$ctrl.hideDropDown()'>\n<span>{{::'builder.site' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow' ng-attr-style='{{$ctrl.getInlineCustomStyle()}}' ng-show='$ctrl.isShowDropDown()'>\n<ul class='sub-menu' ng-show='$ctrl.getMetadata()'>\n<li class='sub-menu-item business-info' data-hook='business-info' ng-click='$ctrl.onClickMyBusinessInfo($event)' ng-if='$ctrl.showBusinessInfo'>\n<span class='sub-menu-label'>{{::'builder.site-menu.my-business-info' | translate }}</span>\n</li>\n<li class='sub-menu-item my-dashboard' data-hook='my-dashboard' ng-click='$ctrl.onClickMyDashboard()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.my-dashboard' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item site-settings' data-hook='site-settings' ng-click='$ctrl.onClickSiteSettings()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.settings' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item connect-domain' data-hook='connect-domain' ng-click='$ctrl.onClickConnectDomain($event)'>\n<span class='sub-menu-label'>{{::'builder.site-menu.connect-domain' | translate }}</span>\n</li>\n<li adi-automation='site-dropdown-seo-wiz' class='sub-menu-item seo-wiz' data-hook='seo-wiz' ng-click='$ctrl.onClickSEOWiz()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.seo-wiz' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item new-site' data-hook='new-site' ng-click='$ctrl.onClickStartNewSite()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.start-new-site' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item view-site' data-hook='view-site' ng-click='$ctrl.onClickViewLiveSite()' ng-if='$ctrl.isSitePublished()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.view-live' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item feedback' data-hook='feedback' ng-click='$ctrl.onClickFeedback()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.feedback' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li ng-if='!$ctrl.applicationState.isInMobileEditMode()'>\n<go-to-editor-link></go-to-editor-link>\n</li>\n</ul>\n</div>\n</div>\n</div>\n<cc-popover class='site-tab flex-center-grow' margin-distance='21' ng-if='$ctrl.flags.popover' on-trigger-off='$ctrl.handleClosed()' on-trigger-on='$ctrl.handleOpened()'>\n<cc-popover-trigger>\n<div class='flex-center-grow' data-hook='site-tab'>\n<span>{{::'builder.site' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n</div>\n</cc-popover-trigger>\n<cc-popover-content>\n<ul class='drop-down sub-menu' ng-show='$ctrl.getMetadata()'>\n<li class='sub-menu-item business-info' data-hook='business-info' ng-click='$ctrl.onClickMyBusinessInfo($event)' ng-if='$ctrl.showBusinessInfo'>\n<span class='sub-menu-label'>{{::'builder.site-menu.my-business-info' | translate }}</span>\n</li>\n<li class='sub-menu-item my-dashboard' data-hook='my-dashboard' ng-click='$ctrl.onClickMyDashboard()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.my-dashboard' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item site-settings' data-hook='site-settings' ng-click='$ctrl.onClickSiteSettings()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.settings' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item connect-domain' data-hook='connect-domain' ng-click='$ctrl.onClickConnectDomain($event)'>\n<span class='sub-menu-label'>{{::'builder.site-menu.connect-domain' | translate }}</span>\n</li>\n<li adi-automation='site-dropdown-seo-wiz' class='sub-menu-item seo-wiz' data-hook='seo-wiz' ng-click='$ctrl.onClickSEOWiz()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.seo-wiz' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item new-site' data-hook='new-site' ng-click='$ctrl.onClickStartNewSite()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.start-new-site' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item view-site' data-hook='view-site' ng-click='$ctrl.onClickViewLiveSite()' ng-if='$ctrl.isSitePublished()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.view-live' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item feedback' data-hook='feedback' ng-click='$ctrl.onClickFeedback()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.feedback' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li ng-if='!$ctrl.applicationState.isInMobileEditMode()'>\n<go-to-editor-link></go-to-editor-link>\n</li>\n</ul>\n</cc-popover-content>\n</cc-popover>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/top-bar/site-dropdown/go-to-editor-link.html","<div class='go-to-editor-link'>\n<div class='go-to-editor-link-content'>\n<div class='go-to-editor-link-title' data-hook='go-to-editor-link-title' ng-bind-html=':: &#39;go-to-editor-link.title&#39; | translate'></div>\n<div class='go-to-editor-link-sub-title' data-hook='go-to-editor-link-sub-title' ng-bind-html=':: &#39;go-to-editor-link.sub-title&#39; | translate'></div>\n<div class='go-to-editor-link-button-container'>\n<div class='go-to-editor-link-button p9-primary -controlbtn' data-hook='go-to-editor-link-button' ng-bind-html=':: &#39;go-to-editor-link.button&#39; | translate' ng-click='$ctrl.goToEditor()'></div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/top-bar/upgrade-tab-popup/upgrade-tab-popup.html","<div class='flex-center-grow drop-down upgrade-tab' data-hook='upgrade-tab' ng-mouseenter='$ctrl.showDropDown()' ng-mouseleave='$ctrl.hideDropDown()'>\n<a class='upgrade-tab-text' ng-href='https://premium.wix.com/wix/api/premiumStart?siteGuid={{$ctrl.metaSiteId}}&amp;referralAdditionalInfo=onboarding-upgrade-direct' target='_blank'>{{::'builder.upgrade' | translate }}</a>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow upgrade-tab-sub-menu' ng-show='$ctrl.isShowDropDown()'>\n<upgrade-popup-default data-hook='top-bar-upgrade-popup-default' meta-site-id='$ctrl.metaSiteId' ng-if='!$ctrl.saleService.isSale()'></upgrade-popup-default>\n<upgrade-popup-seasonal-campaign data-hook='top-bar-upgrade-popup-seasonal-campaign' meta-site-id='$ctrl.metaSiteId' ng-if='$ctrl.saleService.isSale()'></upgrade-popup-seasonal-campaign>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/top-bar/upgrade-tab-popup/upgrade-popup-default.html","<div class='upgrade-drop-down'>\n<div class='upgrade-drop-down-content'>\n<div class='upgrade-drop-down-title'>{{::'builder.upgrade-dropdown.title' | translate }}</div>\n<ul class='upgrade-drop-down-list'>\n<li class='upgrade-drop-down-list-item'>\n<i class='cc-icon-check'></i>\n{{::'builder.upgrade-dropdown.bullet-1' | translate }}\n</li>\n<li class='upgrade-drop-down-list-item'>\n<i class='cc-icon-check'></i>\n{{::'builder.upgrade-dropdown.bullet-2' | translate }}\n</li>\n<li class='upgrade-drop-down-list-item'>\n<i class='cc-icon-check'></i>\n{{::'builder.upgrade-dropdown.bullet-3' | translate }}\n</li>\n</ul>\n<div class='buttons'>\n<a class='upgrade-drop-down-button p9a-secondary -inverse -purple -small' data-hook='compare-plans-button' ng-href='https://premium.wix.com/wix/api/premiumStart?siteGuid={{$ctrl.metaSiteId}}&amp;referralAdditionalInfo=onboarding-upgrade' target='_blank'>{{::'builder.upgrade-dropdown.compare-plans' | translate }}</a>\n<a class='upgrade-drop-down-button p9-primary -purple -small' data-hook='upgrade-button' ng-href='https://premium.wix.com/wix/api/premiumStart?siteGuid={{$ctrl.metaSiteId}}&amp;referralAdditionalInfo=onboarding-upgrade-direct' target='_blank'>{{::'builder.upgrade-dropdown.get-yearly-unlimited' | translate }}</a>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/top-bar/upgrade-tab-popup/upgrade-popup-seasonal-campaign.html","<div class='upgrade-drop-down -sale'>\n<div class='upgrade-drop-down-content'>\n<div class='upgrade-drop-down-title' ng-bind-html=':: &#39;builder.upgrade-dropdown.sale-title&#39; | translate'></div>\n<ul class='upgrade-drop-down-list'>\n<li class='upgrade-drop-down-list-item'>\n<i class='cc-icon-check'></i>\n{{::'builder.upgrade-dropdown.bullet-1' | translate }}\n</li>\n<li class='upgrade-drop-down-list-item'>\n<i class='cc-icon-check'></i>\n{{::'builder.upgrade-dropdown.bullet-2' | translate }}\n</li>\n<li class='upgrade-drop-down-list-item'>\n<i class='cc-icon-check'></i>\n{{::'builder.upgrade-dropdown.bullet-3' | translate }}\n</li>\n</ul>\n<div class='buttons'>\n<a class='upgrade-drop-down-button p9a-secondary -inverse -purple -small' data-hook='compare-plans-button' ng-href='https://premium.wix.com/wix/api/premiumStart?siteGuid={{$ctrl.metaSiteId}}&amp;referralAdditionalInfo=onboarding-upgrade' target='_blank'>{{::'builder.upgrade-dropdown.compare-plans' | translate }}</a>\n<a class='upgrade-drop-down-button p9-primary -purple -small' data-hook='upgrade-button' ng-href='https://premium.wix.com/wix/api/premiumStart?siteGuid={{$ctrl.metaSiteId}}&amp;referralAdditionalInfo=onboarding-upgrade-direct' target='_blank'>{{::'builder.upgrade-dropdown.upgrade-save-50' | translate }}</a>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/builder/list-span-tools.html","<div class='list-span-tools'>\n<div class='dynamic-layer' data-hook='buttons-strip' ng-show='$ctrl.shouldShowButtons()'>\n<div class='spacer-elastic header-coloration-style' ng-if='$ctrl.isHeader() &amp;&amp; $ctrl.flags.debugHeaderFooterColoration'>\n<div class='vertical-menu'>\n<div class='column'>\n<button class='stage-btn round edit edit-icon' ng-class='{&#39;-active&#39;: true}' ng-click='$ctrl.headerColorationItemClicked(item.value)' ng-repeat='item in ::$ctrl.colorationItems.header.lightItems track by $index' ng-show='true'>{{ ::item.text }}</button>\n</div>\n</div>\n</div>\n<div class='spacer-elastic header-coloration-style header-coloration-dark-style' ng-if='$ctrl.isHeader() &amp;&amp; $ctrl.flags.debugHeaderFooterColoration'>\n<div class='vertical-menu'>\n<div class='column'>\n<button class='stage-btn round edit edit-icon' ng-class='{&#39;-active&#39;: true}' ng-click='$ctrl.headerColorationItemClicked(item.value)' ng-repeat='item in ::$ctrl.colorationItems.header.darkItems track by $index' ng-show='true'>{{ ::item.text }}</button>\n</div>\n</div>\n</div>\n<div class='spacer-elastic footer-coloration-style' ng-if='$ctrl.isFooter() &amp;&amp; $ctrl.flags.debugHeaderFooterColoration'>\n<div class='vertical-menu'>\n<div class='column'>\n<button class='stage-btn round edit edit-icon' ng-class='{&#39;-active&#39;: true}' ng-click='$ctrl.footerColorationItemClicked(item.value)' ng-repeat='item in ::$ctrl.colorationItems.footer.lightItems track by $index' ng-show='true'>{{ ::item.text }}</button>\n</div>\n</div>\n</div>\n<div class='spacer-elastic footer-coloration-style footer-coloration-dark-style' ng-if='$ctrl.isFooter() &amp;&amp; $ctrl.flags.debugHeaderFooterColoration'>\n<div class='vertical-menu'>\n<div class='column'>\n<button class='stage-btn round edit edit-icon' ng-class='{&#39;-active&#39;: true}' ng-click='$ctrl.footerColorationItemClicked(item.value)' ng-repeat='item in ::$ctrl.colorationItems.footer.darkItems track by $index' ng-show='true'>{{ ::item.text }}</button>\n</div>\n</div>\n</div>\n<div class='spacer-elastic'></div>\n<div class='overlay-tools-center'>\n<div class='vertical-menu switch-and-tpa-menu'>\n<div class='column left-menu' ng-if='$ctrl.shouldShowButtons() &amp;&amp; !$ctrl.showChangeSectionHeight()'>\n<button cc-tooltip-position='top' cc-tooltip='{{ $ctrl.getEditButtonTooltip() }}' class='stage-btn round edit' data-hook='edit-button' ng-class='{&#39;-active&#39;: $ctrl.applicationState.isInEditMode() &amp;&amp; !$ctrl.stateIsHover()}' ng-click='$ctrl.onToggleEditMode()' ng-if='::$ctrl.flags.changeTPAEditButtonText' ng-show='$ctrl.isEdit'>{{ $ctrl.isTpa() ? 'tpa.settings' : 'builder.edit-section-button' | translate}}</button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_edit' class='stage-btn round edit' data-hook='edit-button' ng-class='{&#39;-active&#39;: $ctrl.applicationState.isInEditMode() &amp;&amp; !$ctrl.stateIsHover()}' ng-click='$ctrl.onToggleEditMode()' ng-if='::!$ctrl.flags.changeTPAEditButtonText' ng-show='$ctrl.isEdit'>{{ ::'builder.edit-section-button' | translate}}</button>\n<button cc-tooltip-options='{{ $ctrl.getLayoutChangeTooltipOptions() }}' cc-tooltip-position='top' cc-tooltip='{{ $ctrl.getSwitchButtonTooltip() }}' class='stage-btn round tour-element-switch-layout edit' data-hook='change-layout-button' ng-class='{&#39;-active&#39;: $ctrl.applicationState.isSwitchPresetMode() &amp;&amp; $ctrl.isContentFocused()}' ng-click='$ctrl.onTogglePresetState()' ng-show='$ctrl.isDesigns'>{{::$ctrl.getSwitchButtonText() | translate}}</button>\n<button cc-tooltip='{{ $ctrl.getTpaTooltip() }}' class='stage-btn round manage' data-hook='manage-tpa-button' manage-tpa-button-origin='ADI-section' manage-tpa-button='$ctrl.getTpaType()' ng-if='$ctrl.isManage' tpa-node='$ctrl.contentDesignatedListSpan.node'>{{::'builder.manage-tpa-button' | translate}}</button>\n</div>\n</div>\n</div>\n<div class='spacer-elastic'>\n<div class='vertical-menu debug-actions-panel' ng-if='$ctrl.isHeader() &amp;&amp; $ctrl.flags.debugHeaderColumns'>\n<div class='row'>\n<button class='stage-btn round edit' ng-click='$ctrl.headerUseColumnsClicked()' ng-if='$ctrl.flags.debugHeaderColumns'>{{ ($ctrl.isHeaderColumnsEnabled() ? '*' : '') + 'Columns' }}</button>\n<button class='stage-btn round edit' ng-click='$ctrl.headerColumnsFullWidthClicked()' ng-if='$ctrl.flags.debugHeaderColumns'>{{ ($ctrl.isHeaderColumnsFullWidthEnabled() ? '*' : '') + 'Full width' }}</button>\n</div>\n</div>\n<div class='vertical-menu more-actions-panel' ng-if='$ctrl.isOnBody() &amp;&amp; !$ctrl.isMobileEditMode() &amp;&amp; !$ctrl.showChangeSectionHeight()'>\n<div class='column'>\n<button cc-tooltip-position='top' cc-tooltip='overlay_gear' class='stage-btn cc-icon-actions cc-icon-circle tour-more-actions-panel' data-hook='more-actions' ng-click='$ctrl.toggleShowMoreActions()' ng-if='$ctrl.showActions()'></button>\n<div class='more-actions-menu' ng-if='$ctrl.showMoreActions' ng-mouseenter='$ctrl.mamMouseEnter()' ng-mouseleave='$ctrl.mamMouseLeave()'>\n<button class='stage-btn cc-icon-close-12 cc-icon-circle cc-icon-white close-more-actions-btn' data-hook='close-more-actions' ng-click='$ctrl.toggleShowMoreActions()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_delete' class='stage-btn cc-icon-delete cc-icon-circle' ng-click='$ctrl.onDelete()' ng-hide='!$ctrl.canManipulate()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_move_page' class='stage-btn cc-icon-move-to cc-icon-circle' ng-click='$ctrl.moveAwayFlow()' ng-disabled='!$ctrl.canMoveAwayFlow()' ng-hide='!$ctrl.canManipulate()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_duplicate_section' class='stage-btn cc-icon-duplicate cc-icon-circle' ng-click='$ctrl.duplicateSection()' ng-hide='!$ctrl.canDuplicate()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_duplicate_section' class='stage-btn cc-icon-replace cc-icon-circle' ng-click='$ctrl.incrementColor()' ng-hide='!$ctrl.showSectionColorButton()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_enlarge_section_height' class='stage-btn cc-icon-arrow-up cc-icon-circle' ng-click='$ctrl.changeSectionHeight(true)' ng-hide='!$ctrl.showChangeSectionHeight()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_shrink_section_height' class='stage-btn cc-icon-arrow-down cc-icon-circle' ng-click='$ctrl.changeSectionHeight(false)' ng-hide='!$ctrl.showChangeSectionHeight()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_print_additional_height' class='stage-btn cc-icon-pause cc-icon-circle' ng-click='$ctrl.printAdditionalHeight()' ng-hide='!$ctrl.showPrintAdditionalHeightButton()'></button>\n<button cc-tooltip-position='top' cc-tooltip='Change map style' class='stage-btn cc-icon-customise-design cc-icon-circle' ng-click='$ctrl.changeMapStyle()' ng-hide='!$ctrl.showMapStyles()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_change_column_position' class='stage-btn cc-icon-intro-next-arrow cc-icon-circle' ng-click='$ctrl.moveColumn()' ng-hide='!$ctrl.showMoveColumnButton()'></button>\n<c19-toggle ng-if='$ctrl.showPageAlignmentButton()' on-value-change='$ctrl.togglePageAlignment(value)' type='c19a' value='$ctrl.alignmentValue'></c19-toggle>\n</div>\n</div>\n</div>\n<section-height adi-automation='section-height' change-section-height='$ctrl.changeSectionHeight(toBigger, totalClicks)' is-change-height-disabled='$ctrl.isChangeHeightDisabled(buttonName)' ng-if='$ctrl.showChangeSectionHeight() &amp;&amp; $ctrl.isContentFocused() &amp;&amp; !$ctrl.isMobileEditMode()' set-change-height-state='$ctrl.setChangeHeightState()'></section-height>\n<drag-handle arrow-down-disabled='!$ctrl.canMove(true)' arrow-up-disabled='!$ctrl.canMove(false)' class='stage-btn tour-drag-handle' data-hook='drag-handle' drag-disabled='!$ctrl.isDragEnabled()' list-span='$ctrl.contentDesignatedListSpan' ng-if='$ctrl.shouldShowDragHandle() &amp;&amp; !$ctrl.isMobileEditMode() &amp;&amp; !$ctrl.showChangeSectionHeight()'></drag-handle>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/builder/section-height.html","<div class='vertical-menu more-actions-panel' data-hook='change-height-toolbar'>\n<div class='column change-height-toolbar'>\n<div adi-automation='section-height-close' class='action-button close'>\n<div class='cc-icon-close-8' data-hook='close-change-height' ng-click='$ctrl.setChangeSectionHeightState()'></div>\n</div>\n<div adi-automation='section-height-plus-button' class='action-button plus' ng-class='{&#39;disabled&#39;: $ctrl.isChangeSectionHeightDisabled(&#39;plus&#39;)}' ng-click='$ctrl.resizeSectionHeight(true)'>\n<cc-svg-icon cc-tooltip-position='top' cc-tooltip='overlay_enlarge_section_height' data-hook='change-height-plus' icon='primitives:plus'></cc-svg-icon>\n</div>\n<div adi-automation='section-height-minus-button' class='action-button minus' ng-class='{&#39;disabled&#39;: $ctrl.isChangeSectionHeightDisabled(&#39;minus&#39;)}' ng-click='$ctrl.resizeSectionHeight(false)'>\n<cc-svg-icon cc-tooltip-position='top' cc-tooltip='overlay_shrink_section_height' data-hook='change-height-minus' icon='primitives:minus'></cc-svg-icon>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/builder/logo-extraction-popup.html","<div class='logo-extraction-popup'>\n<div class='popup-tooltip-arrow'></div>\n<logo-color-extraction-wizard auto-start-prepare-palette='false' context='builder' enable-replace-logo='false' first-step='$ctrl.getFirstStep()' get-prepare-palette-promise='$ctrl.getPreparePalettePromise(logoOrigin)' logo-persistence='$ctrl.getPersistenceHandler()' on-create-palette-click='$ctrl.createLogoPaletteClick(logoExtractorStep)' on-done='$ctrl.onDone(logoColoration)' on-save-palette-click='$ctrl.saveLogoPaletteClick(logoColoration)' on-skip-click='$ctrl.skipLogoPaletteClick(logoExtractorStep)'></logo-color-extraction-wizard>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/preview/fake-browser.html","<div class='browser-wrapper' data-hook='browser-wrapper' ng-class='{ preview: $ctrl.isPreviewDisplay() }' ng-style='$ctrl.extraWidthIfDefined()'>\n<div class='stage-cover'></div>\n<cc-panel-frame class='cover' ng-mouseleave='$ctrl.onMouseLeave()' ng-show='$ctrl.isFakeBrowserHeightFixed()' show-close-button='false' show-header='false' show-return-button='false'>\n<div class='section' ng-click='$ctrl.handleListSpanClick(listSpan)' ng-mouseenter='$ctrl.handleListSpanMouseEnter(listSpan)' ng-repeat='listSpan in $ctrl.getListSpans() track by listSpan.listNodeId' ng-style='$ctrl.getStyleFromListSpan(listSpan)'></div>\n</cc-panel-frame>\n<fake-browser-bar label='{{ $ctrl.getBarLabel() }}' ng-if='!$ctrl.isPreviewDisplay()' on-bar-click='$ctrl.openConnectDomainDialog($event)' url='{{ $ctrl.getSiteUrl() }}'></fake-browser-bar>\n<div ng-class='{&#39;mobile-preview-wrapper&#39;:$ctrl.isPreviewDisplay() &amp;&amp; $ctrl.isInMobileEditMode()}'>\n<div ng-class='{&#39;mobile-preview&#39;:$ctrl.isPreviewDisplay() &amp;&amp; $ctrl.isInMobileEditMode()}'>\n<div class='mobile-frame previewMode' ng-if='$ctrl.isPreviewDisplay() &amp;&amp; $ctrl.isInMobileEditMode()'>\n<div class='mobile-frame-top'></div>\n<div class='site-shadow'></div>\n<div class='mobile-frame-bottom'></div>\n</div>\n<div ng-class='{&#39;mobile-preview-container&#39;:$ctrl.isPreviewDisplay() &amp;&amp; $ctrl.isInMobileEditMode()}' ng-style='$ctrl.getWidthWithScrollbar()'>\n<viewer class='inner-wrapper' ng-class='{&#39;preview&#39;: $ctrl.isPreviewDisplay()}' ng-style='$ctrl.extraWidthIfDefined()'></viewer>\n</div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict"
;a.put("views/preview/overlay.html","<div class='overlay-backdrop overlay-backdrop-transparent' data-hook='overlay-backdrop' ng-click='$overlay.overlayBackdropClicked()' ng-show='$overlay.isShowOverlayBackdrop()'></div>\n<div class='overlay-viewport' ng-class='{&#39;mobile-fixed-height-viewport&#39;: $overlay.isFakeBrowserHeightFixed()}' ng-show='!$overlay.isPreviewDisplay()'>\n<div class='hover-highlight' overlay-highlight-style='hover'></div>\n<div class='active-highlight' overlay-highlight-style='active'></div>\n<div class='overlay-on-top' ng-mouseleave='$overlay.onMouseLeave($event)'>\n<list-span-tools content-designated-list-span='$overlay.getFocusedListSpan()' ng-class='{&#39;no-transition&#39;: !$overlay.shouldAddTransition()}' ng-if='$overlay.showFocusedListSpan' state='focus'></list-span-tools>\n<list-span-tools content-designated-list-span='$overlay.getHoveredListSpan()' ng-class='{&#39;no-transition&#39;: true}' ng-if='$overlay.showHoveredListSpan' state='hover'></list-span-tools>\n<div class='overlay-padding' data-hook='site-overlay'>\n<div class='overlay-container'>\n<solution-overlay adjust-to-scale='$overlay.height(&quot;header&quot;)' class='header-overlay' data-hook='overlay-header' ng-if='$overlay.data(&quot;header&quot;)' render-data='$overlay.data(&quot;header&quot;)'></solution-overlay>\n<solution-overlay adjust-to-scale='$overlay.height(&quot;body&quot;)' data-hook='overlay-body' ng-if='$overlay.data(&quot;body&quot;)' render-data='$overlay.data(&quot;body&quot;)'></solution-overlay>\n<solution-overlay adjust-to-scale='$overlay.height(&quot;footer&quot;)' class='footer-overlay' data-hook='overlay-footer' ng-if='$overlay.data(&quot;footer&quot;)' render-data='$overlay.data(&quot;footer&quot;)'></solution-overlay>\n</div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/animations/preloader-completed.html","<div class='preloader-completed'>\n<div class='completed-icon cc-icon-check'></div>\n<div class='completed-icon-mask cc-icon-check'></div>\n<div class='circle'></div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/animations/preloader-publish-completed.html","<div class='publish-completed-container' data-hook='publish-completed-container' ng-class='{ &#39;in-progress&#39; : $ctrl.inProgress, &#39;completed&#39; : $ctrl.completed, &#39;inverted&#39;: $ctrl.inverted }' ng-show='$ctrl.inProgress || $ctrl.completed'>\n<svg class='circle'>\n<circle class='circle-path'></circle>\n</svg>\n<svg class='checkmark' viewbox='0 0 9.76 9.07'>\n<polyline class='checkmark-path' points='0.36 5.03 3.5 8.29 9.36 0.29'></polyline>\n</svg>\n<svg class='floating f1 star-cross' viewbox='0 0 5.25 5.25'>\n  <line x1='5.25' y1='2.63' y2='2.63'></line>\n  <line x1='2.63' x2='2.62' y2='5.25'></line>\n</svg>\n<svg class='floating f2 star-cross' viewbox='0 0 5.25 5.25'>\n  <line x1='5.25' y1='2.63' y2='2.63'></line>\n  <line x1='2.63' x2='2.62' y2='5.25'></line>\n</svg>\n<svg class='floating f3 small-circle'>\n  <circle></circle>\n</svg>\n<svg class='floating f4 small-circle'>\n  <circle></circle>\n</svg>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/animations/simple-saving-animation.html","<div class='save-state-tab flex-center-grow'>\n<div class='saving-animated' ng-show='$ctrl.isCurrentlySaving'>{{ ::'builder.saving' | translate }}</div>\n<div cc-tooltip-options='{{ {offsetY: 24} }}' cc-tooltip-position='bottom' cc-tooltip='menu_saved_text' class='saved-message' ng-show='!$ctrl.isCurrentlySaving'>{{ ::'builder.saved' | translate }}</div>\n<preloader-completed ng-show='$ctrl.isSaved'></preloader-completed>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/preview/fake-browser-bar.html","<div class='browser-toolbar' ng-class='{&quot;mobile-toolbar&quot;: $ctrl.applicationState.isInMobileEditMode()}'>\n<span class='browser-address-bar'>\n<div class='browser-url-wrapper'>\n<div class='browser-url' data-hook='url' ng-attr-cc-tooltip-options='{{ $ctrl.isInMobileEditMode() &amp;&amp; $ctrl.tooltipOptions() }}' ng-attr-cc-tooltip-position='{{ $ctrl.isInMobileEditMode() &amp;&amp; &quot;top&quot; }}' ng-attr-cc-tooltip='{{ $ctrl.isInMobileEditMode() &amp;&amp; &quot;user_web_address&quot; }}' ng-class='{&quot;cursor-pointer&quot;: $ctrl.isInMobileEditMode()}'>{{ $ctrl.url }}</div>\n</div>\n</span>\n<button cc-tooltip-position='top' cc-tooltip='overlay_connect_domain' class='browser-label' data-hook='label' ng-click='$ctrl.onBarClick()' ng-if='$ctrl.label'>{{ $ctrl.label }}</button>\n</div>\n<progress-bar ng-if='$ctrl.flags.mobileEditor'>;</progress-bar>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/preview/solution-overlay.html","<empty-page adjust-to-scale base-height='{{$solutionOverlay.dropTargetHeight}}' base-width='{{$solutionOverlay.dropTargetWidth}}' ng-if='$solutionOverlay.isInDesktopEditMode &amp;&amp; $solutionOverlay.isBodySitePart() &amp;&amp; $solutionOverlay.overlayManager.isCurrentPageEmpty'></empty-page>\n<list-span-overlay class='list-span-overlay-wrapper' list-span-overlay-position='listSpan' list-span='listSpan' ng-click='$solutionOverlay.isAddMode() &amp;&amp; $solutionOverlay.handleSolutionOverlayClick(listSpan)' ng-if='$solutionOverlay.renderData' ng-mouseenter='$solutionOverlay.handleSolutionOverlayMouseEnter(listSpan)' ng-repeat='listSpan in $solutionOverlay.renderData.listSpans track by listSpan.node.getId()'></list-span-overlay>\n<drop-target-overlay adjust-to-scale='' base-height='{{$solutionOverlay.dropTargetHeight}}' base-width='{{$solutionOverlay.dropTargetWidth}}' class='drop-target-overlay-wrapper' ng-if='$solutionOverlay.isBodySitePart()' ng-show='$solutionOverlay.shouldShowDropStrip()'></drop-target-overlay>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/preview/drop-target-overlay.html","<ul class='wrapper'>\n<li class='inner-block'>\n<span>{{ $ctrl.dragText }}</span>\n</li>\n</ul>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/preview/empty-page.html","<div class='drop-area' data-hook='empty-page-overlay' dnd-drop='$ctrl.onDrop()' dnd-list='[]' ng-click='$ctrl.onAdd()'>\n<div class='empty-indicator'>\n<button cc-tooltip-position='top' cc-tooltip='overlay_plus' class='stage-btn insert cc-icon-add-large' ng-show='!$ctrl.isOnAddState()'></button>\n<div class='title' translate='{{$ctrl.isOnAddState()? &#39;builder.empty-page-title-active&#39;: &#39;builder.empty-page-title&#39;}}'></div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/list-span-overlay.html","<div class='list-span-overlay' data-hook='focus-list-span' ng-class='{&#39;tpa-span&#39;: $ctrl.isTpa(), &#39;has-presets&#39;: $ctrl.hasPresets()}' ng-click='$ctrl.handleListSpanOverlayClick()' ng-dblclick='$ctrl.handleListSpanOverlayDblClick()'>\n<div class='layout-group-overlay' data-hook='layout-group-overlay' layout-group-overlay-position='lg' ng-if='$ctrl.isShowSegmentOverlay() &amp;&amp; !$ctrl.slideShowService.isSlideShowLG(lg)' ng-repeat='lg in $ctrl.listSpan.groups'>\n<segment-overlay adi-automation='osi-comp-node-id-{{:: segment.node ? segment.node.id : &#39;&#39;}}' columns='lg.columns' ng-if='!$ctrl.assistantManager.isInActiveTask()' ng-repeat='segment in lg.segments track by segment.node.id' segment='segment'></segment-overlay>\n</div>\n<div class='layout-group-overlay layout-group-slideshow-overlay' data-hook='layout-group-slideshow-overlay' layout-group-overlay-position='lg' ng-if='$ctrl.isShowSegmentOverlay() &amp;&amp; $ctrl.slideShowService.isSlideShowLG(lg)' ng-repeat='lg in $ctrl.getSlideshowLG()'>\n<segment-overlay adi-automation='osi-comp-node-slideshow-id-{{:: segment.node ? segment.node.id : &#39;&#39;}}' columns='lg.columns' ng-if='!$ctrl.assistantManager.isInActiveTask()' ng-repeat='segment in lg.segments track by segment.node.id' segment='segment'></segment-overlay>\n</div>\n</div>\n<button cc-tooltip-position='top' cc-tooltip='overlay_plus' class='stage-btn insert insert-above cc-icon-add-large' ng-click='$ctrl.onAdd(false); $event.stopPropagation();' ng-if='$ctrl.canAddSection &amp;&amp; $ctrl.listSpan.sitePart !== &#39;header&#39; &amp;&amp; !$ctrl.showChangeSectionHeight()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_plus' class='stage-btn insert insert-below cc-icon-add-large' ng-click='$ctrl.onAdd(true); $event.stopPropagation();' ng-if='$ctrl.canAddSection &amp;&amp; $ctrl.listSpan.sitePart !== &#39;footer&#39; &amp;&amp; !$ctrl.showChangeSectionHeight()'></button>\n<div class='list-span-overlay-debug-info' ng-click='$ctrl.printPrettyAlgoInfo()' ng-if=':: $ctrl.flags.prettyAlgo &amp;&amp; $ctrl.flags.debug'>\n<p>\nScore: {{:: $ctrl.getPrettyAlgoScore()}}\n</p>\n<p>\nRules:\n<ul>\n<li ng-repeat='ruleName in ::$ctrl.prettyAlgoGetRuleNames()'>\n{{:: ruleName}}\n</li>\n</ul>\n</p>\n</div>\n<div class='list-span-overlay-debug-info list-span-overlay-opacity-debug' ng-click='$ctrl.printSiteConverterDebugData()' ng-if='$ctrl.flags.debugWizSiteConverter'>SiteConverter</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/first-time-mobile-editor-tooltip.html","<div class='cc-generic-popup first-time-mobile-editor-tooltip'>\n<div class='cc-popup-header'>\n<div class='cc-aux-menu'>\n<button class='cc-aux-btn cc-icon-close-10' ng-click='$ctrl.onHide()'></button>\n</div>\n</div>\n<img class='cc-popup-icon' relative-src='images/popups/{{$ctrl.icon}}'>\n<div class='text-h4 cc-popup-heading' compile='$ctrl.heading'></div>\n<p class='cc-popup-text' compile='$ctrl.text'></p>\n<div class='cc-popup-footer cc-multi-page-popup-footer'>\n<button class='cc-x-height p9-primary -medium' ng-click='$ctrl.onAction()'>\n<span class='cc-x-height'>{{ $ctrl.buttonText }}</span>\n</button>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/builder/add-section.html","<div class='builder-left-panel'>\n<div class='add-section'>\n<p16-panel-header label='{{($ctrl.pageMode ? &#39;builder.add-page&#39; : &#39;builder.add-section&#39;) | translate }}' on-close='$ctrl.back()' on-help='$ctrl.onHelp()' show-close-button='true' show-help-button='true'></p16-panel-header>\n<div class='content'>\n<div class='section-list-wrap'>\n<div cc-scrollbar class='section-list'>\n<div class='remaining-suggested-sections' ng-show='false'>{{$ctrl.remainingSuggestedSections}}</div>\n<span class='section-subtitle' ng-if='$ctrl.recommendedSections &amp;&amp; $ctrl.recommendedSections.length'>{{::'builder.add-section-recommended' | translate }}</span>\n<div adi-automation='{{::section.ceType}}' class='section-button-container tour-element-recommended-section' data-hook='section' ng-class='{selected: $ctrl.isSectionSelected(section)}' ng-repeat='section in $ctrl.recommendedSections track by section.id'>\n<div class='section-button' data-hook='section-button' ng-class='{&#39;already-used&#39;: $ctrl.isOnPage(section)}' ng-click='$ctrl.setSelectedSection(section, true)'>\n<span cc-tooltip-options='{{:: {content: $ctrl.sectionAlias(section)} }}' cc-tooltip='section-name'>{{ $ctrl.sectionAlias(section) }}</span>\n<div class='already-used-check cc-icon-check'></div>\n</div>\n</div>\n<span class='section-subtitle' ng-if='$ctrl.otherSections &amp;&amp; $ctrl.otherSections.length'>{{::'builder.add-section-others' | translate }}</span>\n<div adi-automation='{{::section.ceType}}' class='section-button-container' data-hook='section' ng-class='{selected: $ctrl.isSectionSelected(section)}' ng-repeat='section in $ctrl.otherSections track by section.id'>\n<div class='section-button' data-hook='section-button' ng-class='{&#39;already-used&#39;: $ctrl.isOnPage(section)}' ng-click='$ctrl.setSelectedSection(section, true)'>\n<span cc-tooltip-options='{{:: {content: $ctrl.sectionAlias(section)} }}' cc-tooltip='section-name'>{{ $ctrl.sectionAlias(section) }}</span>\n<div class='already-used-check cc-icon-check'></div>\n</div>\n</div>\n<span class='more-sections' ng-click='$ctrl.toggleMoreSections()' ng-if='!$ctrl.showMoreSections &amp;&amp; $ctrl.moreSections &amp;&amp; $ctrl.moreSections.length'>\n{{::'builder.add-section-see-all' | translate }}\n<div class='cc-icon-arrow-down'></div>\n</span>\n<div adi-automation='{{::section.ceType}}' class='section-button-container' data-hook='section' ng-class='{selected: $ctrl.isSectionSelected(section)}' ng-if='$ctrl.showMoreSections' ng-repeat='section in $ctrl.moreSections track by section.id'>\n<div class='section-button' data-hook='section-button' ng-class='{&#39;already-used&#39;: $ctrl.isOnPage(section)}' ng-click='$ctrl.setSelectedSection(section, true)'>\n<span cc-tooltip-options='{{:: {content: $ctrl.sectionAlias(section)} }}' cc-tooltip='section-name'>{{ $ctrl.sectionAlias(section) }}</span>\n<div class='already-used-check cc-icon-check'></div>\n</div>\n</div>\n<span class='more-sections less-sections' ng-click='$ctrl.toggleMoreSections()' ng-if='$ctrl.showMoreSections &amp;&amp; $ctrl.moreSections &amp;&amp; $ctrl.moreSections.length'>\n{{::'builder.add-section-see-less' | translate }}\n<div class='cc-icon-arrow-up'></div>\n</span>\n</div>\n</div>\n<div class='preview-list-wrap'>\n<preview-list data-page-mode='$ctrl.pageMode' data-page-name='$ctrl.pageName' draggable='!$ctrl.pageMode' intent='$ctrl.addSectionIntent' ng-if='$ctrl.nodes' nodes='$ctrl.nodes' reload-after-add='$ctrl.reloadAfterAddingSection($nodeId)' selected-section='$ctrl.selectedSection' strategy='$ctrl.addSectionStrategy'></preview-list>\n</div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/builder/preview-list.html","<div class='preview-list-container' is-done-loading='{{$ctrl.isDoneLoading}}'>\n<div cc-scrollbar class='preview-list' data-hook='preview-list-container'>\n<div class='page-blank' ng-if='$ctrl.pageMode &amp;&amp; $ctrl.showBlankPage'>\n<div class='browser-toolbar'></div>\n<div class='page-blank-label'>\n{{:: 'general.blank' | translate }}\n</div>\n<div class='browser-bottom'></div>\n<div class='page-blank-overlay' ng-click='$ctrl.createBlankPage()'>\n<div class='page-blank-overlay-title'>{{::$ctrl.overlayTitle}}</div>\n</div>\n</div>\n<div class='preview-section sections faded' cn-canceled='$ctrl.onCanceled(event)' cn-disable-if='!$ctrl.draggable || $ctrl.pageMode' cn-dragend='$ctrl.onDragEnd(event)' cn-draggable='preview' cn-dragstart='$ctrl.onDragStart(event, draggable)' cn-drop='$ctrl.onDrop(event, draggable)' data-hook='preset-preview' ghost-selector='&gt; [data-hook=&#39;draggable-preview&#39;]' ng-class='{selected: $ctrl.isSelected(preview), &#39;mobile-width&#39;: $ctrl.applicationState.isInMobileEditMode()}' ng-if='!$ctrl.showBlankPage' ng-repeat='preview in $ctrl.previews' preset-preview='preview' section-ready>\n<div class='preview-section-container'>\n<div class='preview-section-loading' ng-class='{selected: $ctrl.isSelected(preview), &#39;smaller-border&#39;: $ctrl.isSelected(preview) &amp;&amp; $ctrl.applicationState.isInMobileEditMode(), &#39;smaller-dimensions&#39;: $ctrl.applicationState.isInMobileEditMode(), &#39;page-mode&#39;: $ctrl.pageMode}' ng-mouseenter='$ctrl.onHoverPreview($event, true)' ng-mouseleave='$ctrl.onHoverPreview($event, false)'>\n<div class='preview-linked-message' ng-if='preview.sourcePageName'>{{:: 'builder.preview-linked-page-content' | translate }} {{preview.sourcePageName}}</div>\n<div class='preview-linked-message' ng-if='$ctrl.flags.useColumnsDebug &amp;&amp; $ctrl.isPresetResponsive(preview)'>Responsive</div>\n<div class='preview-flag-message' ng-if='$ctrl.flags.mergedHeader &amp;&amp; preview.flags[0] === &#39;fix&#39;'>{{:: 'builder.preview-flags.fix' | translate }}</div>\n<div class='preview-flag-message' ng-if='$ctrl.flags.listItemSlideShow &amp;&amp; preview.flags[0] === &#39;slideShowPreset&#39;'>{{:: 'builder.preview-flags.slideshow' | translate }}</div>\n<div class='preview-linked-message-bottom-left' ng-click='$ctrl.printBgOpacityData(preview)' ng-if='$ctrl.flags.sectionMedia &amp;&amp; $ctrl.flags.debug'>Opacity</div>\n<div class='preview-linked-message' ng-if='preview.sourceName &amp;&amp; !preview.sourcePageName'>{{:: 'builder.preview-linked-content' | translate }} {{preview.sourceName}}</div>\n<div class='preview-linked-message' ng-click='$ctrl.printPrettyAlgoInfo(preview)' ng-if=':: $ctrl.flags.prettyAlgo &amp;&amp; $ctrl.flags.debug'>\n<p>\n{{:: preview.prettyAlgo.score}}\n</p>\n<p ng-repeat='ruleName in ::$ctrl.prettyAlgoGetRuleNames(preview)'>\n{{:: ruleName}}\n</p>\n</div>\n<div class='browser-toolbar' ng-if='$ctrl.pageMode'></div>\n<div class='preview-content'>\n<div class='layout-preset-preview' data-hook='draggable-preview' layout-preset-preview ng-if='!preview.isTpa &amp;&amp; !($ctrl.flags.mergedHeader || $ctrl.flags.listItemSlideShow)' on-before-render='$ctrl.onPresetPreviewBeforeRender(preview)' preset-preview='preview' preview-position='$ctrl.draggable &amp;&amp; $ctrl.overlayManager.dropTargetId' scale='$ctrl.scale'></div>\n<preset-preview data-hook='draggable-preview' flags='preview.flags' is-selected='$ctrl.isSelected(preview)' ng-if='!preview.isTpa &amp;&amp; ($ctrl.flags.mergedHeader || $ctrl.flags.listItemSlideShow)' on-before-render='$ctrl.onPresetPreviewBeforeRender(preview)' preset-preview='$ctrl.wrapWithSiblingsIfNeeded(preview)' preview-position='$ctrl.draggable &amp;&amp; $ctrl.overlayManager.dropTargetId' scale='$ctrl.scale'></preset-preview>\n<tpa-preview data-hook='draggable-preview' is-inverted='preview.isInverted' ng-class='{&#39;full-width&#39;: preview.preset.data.isFullWidth}' ng-if='preview.isTpa' tpa-preset='preview.preset'></tpa-preview>\n</div>\n<div class='browser-bottom' ng-if='$ctrl.pageMode'></div>\n<div class='preview-overlay' data-hook='preview-overlay' ng-class='{&#39;slide-show-preset&#39;: $ctrl.slideShowPresetUtils.debugSlideShowPreset(preview)}' ng-click='$ctrl.selectPreset(preview, $event)' ng-if='!$ctrl.isSelected(preview)' preset-type='{{preview.node.contentElementType + &#39; &#39; + preview.node.alias}}'>\n<div class='preview-overlay-title'>{{::$ctrl.overlayTitle}}</div>\n<div class='info' ng-click='$event.stopPropagation();$ctrl.debugInfo(preview);' ng-if=':: $ctrl.isDebugMode()'></div>\n</div>\n<span data-hook='selected-overlay' ng-if='$ctrl.isSelected(preview)'>\n<div class='preview-overlay-selected'>\n<cc-svg-icon data-hook='selected-icon' icon='coloration:selected' is-corner-icon='true'></cc-svg-icon>\n</div>\n</span>\n</div>\n</div>\n<div class='customize-design-container' ng-class='{&#39;transition-delay&#39;: $ctrl.unsettingPreviewIsInView, &#39;selected&#39;: $ctrl.isSelected(preview)}' ng-if='::$ctrl.shouldShowCustomizeDesignDropdown(preview)' ng-show='$ctrl.isSelected(preview)'>\n<div class='customize-design' ng-if='$ctrl.isSelected(preview)'>\n<div class='customize-design-button p9-primary -small' data-hook='customize-design-button' ng-click='$ctrl.goToColorationPanel(preview)' ng-if='::!$ctrl.flags.popover' ng-mouseenter='$ctrl.showSectionDesignMenu(preview)' ng-mouseleave='$ctrl.hideSectionDesignMenu()'>\n<cc-svg-icon class='change-colors-icon' data-hook='change-tpa-colors-button-icon' icon='design:color' ng-show='$ctrl.flags.invertTpaPalette &amp;&amp; preview.isTpa'></cc-svg-icon>\n{{ $ctrl.getPresetButtonText(preview) }}\n<div class='cc-icon-arrow-down' data-hook='customize-design-button-arrow-down' ng-hide='$ctrl.flags.invertTpaPalette &amp;&amp; preview.isTpa'></div>\n<section-design-menu-deprecated item='preview' ng-if='!$ctrl.flags.mergedHeader &amp;&amp; $ctrl.isMenuVisible' on-option-clicked='$ctrl.hideSectionDesignMenu()'></section-design-menu-deprecated>\n<section-design-menu item='preview' ng-if='$ctrl.flags.mergedHeader &amp;&amp; $ctrl.isMenuVisible' on-design-updated='$ctrl.handleCurrentPreviewUpdate' on-option-clicked='$ctrl.hideSectionDesignMenu()'></section-design-menu>\n</div>\n<cc-popover ng-if='::$ctrl.flags.popover'>\n<cc-popover-trigger>\n<div class='customize-design-button p9-primary -small' data-hook='customize-design-button'>\n{{::'builder.section-design.customize-design' | translate }}\n<div class='cc-icon-arrow-down'></div>\n</div>\n</cc-popover-trigger>\n<cc-popover-content>\n<section-design-menu-deprecated item='preview' ng-if='::!$ctrl.flags.mergedHeader'></section-design-menu-deprecated>\n<section-design-menu item='preview' ng-if='::$ctrl.flags.mergedHeader'></section-design-menu>\n</cc-popover-content>\n</cc-popover>\n<p17-divider></p17-divider>\n</div>\n</div>\n</div>\n<div class='preview-section-placeholder preview-section' ng-class='{&#39;mobile-width&#39;: $ctrl.applicationState.isInMobileEditMode()}'>\n<div class='placeholders faded stagger darkest-stage-background placeholder-opacity faded' ng-class='$ctrl.getPlaceholderClassName()' ng-if=':: $ctrl.isShowPlaceholdersInPresets' ng-repeat='placeholder in $ctrl.placeholders' ng-style=':: $ctrl.getPlaceholderBackgroundColor()'></div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/design-panel.html","<cc-panel-frame class='-with-corners' data-hook='panel-frame' label='{{:: &#39;builder.design-panel.title&#39; | translate }}' on-close='$ctrl.closeDesignPanel()' on-help='$ctrl.openDesignPanelHelp()' show-close-button='true' show-help-button='true'>\n<cc-panel-fixed-top>\n<c11-paragraph html=':: &#39;builder.design_description&#39; | translate'></c11-paragraph>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='kits'>\n<div class='kit-option clickable' data-hook='kit' ng-class='{&#39;transition-delay&#39;: $ctrl.unsettingKitIsInView, selected: $ctrl.isActiveKit(kit)}' ng-click='!$ctrl.isActiveKit(kit) &amp;&amp; $ctrl.setKit(kit, $index)' ng-init='$last &amp;&amp; $ctrl.scrollToSelectedKit(&#39;immediate&#39;)' ng-repeat='kit in ::$ctrl.colorThemeKits' ng-style='{backgroundColor: $ctrl.getKitDisplayColor(kit)}'>\n<kit-thumbnail kit='kit' ng-class='{selected: $ctrl.isActiveKit(kit)}'></kit-thumbnail>\n<div class='customize-design' ng-if='$ctrl.isActiveKit(kit)'>\n<div adi-automation='customize-button' class='customize-design-button p9-primary -small' data-hook='customize-button' ng-click='!$ctrl.flags.siteDesignKitMenu &amp;&amp; $ctrl.customizeKit()' ng-if='!$ctrl.flags.popover' ng-mouseenter='$ctrl.flags.siteDesignKitMenu &amp;&amp; $ctrl.showSiteDesignMenu()' ng-mouseleave='$ctrl.flags.siteDesignKitMenu &amp;&amp; $ctrl.hideSiteDesignMenu()'>\n{{::'design.kit.customize-design'|translate}}\n<div class='cc-icon-arrow-down' ng-if='$ctrl.flags.siteDesignKitMenu'></div>\n<site-design-menu data-hook='site-design-menu' kit='kit' ng-if='$ctrl.flags.siteDesignKitMenu &amp;&amp; $ctrl.isActiveKit(kit) &amp;&amp; $ctrl.isMenuVisible' on-option-clicked='$ctrl.hideSiteDesignMenu()'></site-design-menu>\n</div>\n<cc-popover ng-if='$ctrl.flags.popover'>\n<cc-popover-trigger>\n<button adi-automation='customize-button' class='customize-design-button p9-primary -small' data-hook='customize-button' ng-click='!$ctrl.flags.siteDesignKitMenu &amp;&amp; $ctrl.customizeKit()' ng-mouseenter='$ctrl.flags.siteDesignKitMenu &amp;&amp; $ctrl.showSiteDesignMenu()' ng-mouseleave='$ctrl.flags.siteDesignKitMenu &amp;&amp; $ctrl.hideSiteDesignMenu()'>\n{{::'design.kit.customize-design'|translate}}\n<div class='cc-icon-arrow-down' ng-if='$ctrl.flags.siteDesignKitMenu'></div>\n</button>\n</cc-popover-trigger>\n<cc-popover-content>\n<site-design-menu data-hook='site-design-menu' kit='kit' ng-if='$ctrl.flags.siteDesignKitMenu &amp;&amp; $ctrl.isActiveKit(kit)' on-option-clicked='$ctrl.hideSiteDesignMenu()'></site-design-menu>\n</cc-popover-content>\n</cc-popover>\n<p17-divider></p17-divider>\n</div>\n</div>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/design-panel-kit.html","<cc-panel-frame class='-with-p16a-header -with-corners' data-hook='cc-panel-frame' label='{{$ctrl.getKitName()}}' on-close='$ctrl.close()' on-help='$ctrl.onHelp()' on-reset='$ctrl.onReset()' on-return='$ctrl.backToDesign()' show-close-button='true' show-help-button='true' show-reset-button='$ctrl.kitHasOverrides()' show-return-button='true'>\n<div class='design-panel-content-new' ng-if='$ctrl.isLoaded'>\n<div class='design-subpanel color-palette-panel'>\n<div class='p8-label'>{{:: 'design.coloration.palette.title' | translate }}</div>\n<div class='color-palette'>\n<kit-palette data-hook='color-palette' kit-colors='$ctrl.kitColors' ng-click='$ctrl.openNewColorationPanel()'></kit-palette>\n<button cc-tooltip='design_coloration_palette_edit' class='edit-palette-icon-button p9a-secondary -icon-only' data-hook='color-palette-edit-button-six-colors' ng-click='$ctrl.openNewColorationPanel()' ng-if='$ctrl.is6ColorsPalette()'>\n<i class='cc-icon-edit'></i>\n</button>\n<button cc-tooltip='design_coloration_palette_edit' class='p9a-secondary -controlbtn' data-hook='color-palette-edit-button' ng-click='$ctrl.openNewColorationPanel()' ng-if='!$ctrl.is6ColorsPalette()'>\n{{:: 'design.coloration.palette.edit' | translate }}\n</button>\n</div>\n</div>\n<p17-divider></p17-divider>\n<div class='design-subpanel'>\n<div class='p8-label'>{{:: 'design.fonts.title' | translate }}</div>\n<div class='font-container'>\n<font-thumbnail font-data='$ctrl.selectedFontData' has-background='false' ng-click='$ctrl.goToFontsPanel()'></font-thumbnail>\n<button cc-tooltip='design_change_font' class='p9a-secondary -controlbtn font-edit-button' ng-click='$ctrl.goToFontsPanel()'>{{:: 'design.kit.font.edit' | translate }}</button>\n</div>\n</div>\n<p17-divider></p17-divider>\n<div class='design-subpanel animations-container'>\n<div class='p8-label'>{{:: 'design.animations.title' | translate }}</div>\n<div animation-name='{{$ctrl.getActiveAnimation()}}' class='animations-thumbnail -with-button' data-hook='animations-control'>\n<div class='icon-container' ng-click='$ctrl.goToAnimationPanel()'>\n<c20-graphic-radio icon='&#39;animation:&#39; + $ctrl.getActiveAnimation()' label='icon'></c20-graphic-radio>\n<span class='animation-label' data-hook='animation-label'>\n{{$ctrl.getActiveAnimation()}}\n</span>\n</div>\n<button cc-tooltip='design_change_animation' class='p9a-secondary -controlbtn' data-hook='animation-edit-button' ng-click='$ctrl.goToAnimationPanel()'>\n{{:: 'design.coloration.palette.edit' | translate }}\n</button>\n</div>\n</div>\n</div>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict"
;a.put("views/design/coloration-panel.html","<coloration-panel-overlay loader-text='{{:: &#39;design.coloration.basic.loader.text&#39; | translate}}' show-backdrop='$ctrl.showBackdrop' show-loader='$ctrl.showLoader'></coloration-panel-overlay>\n<cc-panel-frame class='-with-p16a-header -with-corners' data-hook='coloration-panel' help-tooltip='design_coloration_help' label='{{:: &#39;design.coloration.basic.panelheader&#39; | translate}}' ng-if='!$ctrl.flags.newColorationPalettes &amp;&amp; $ctrl.isReadyToBeDisplayed' on-close='$ctrl.closePanel()' on-help='$ctrl.openHelp()' on-return='$ctrl.backToDesignKit()' show-close-button='true' show-return-button='true' show-scroll='false'>\n<cc-panel-fixed-top>\n<div class='coloration-panel-content'>\n<div class='coloration-panel-your-palette' data-hook='coloration-panel-your-palette'>\n<div class='main-color-label p8-label -centered'>{{:: 'design.coloration.basic.palettetitle' | translate }}</div>\n<p21-color-tag color='{{$ctrl.mainColor}}' data-main-color icon='edit' ng-class='{&#39;loading&#39;: $ctrl.showLoader}' on-click='$ctrl.changeMainColor(color)' show-icon='true' size='lg' tooltip='design_coloration_main_color'></p21-color-tag>\n</div>\n<p17-divider></p17-divider>\n<div class='coloration-panel-light-dark-mode'>\n<coloration-mode-selector></coloration-mode-selector>\n</div>\n</div>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='coloration-panel-content'>\n<div class='palettes-top-spacer'></div>\n<div class='logo-palette' data-hook='logo-palette-section' ng-if='$ctrl.isLogoPaletteAvailable()'>\n<p6-control-header help-tooltip='design_coloration_logo_palette' hide-toggle-button='true' label=':: &#39;design.coloration.basic.logoPalette.title&#39; | translate' show-help-button='true'></p6-control-header>\n<kit-palette data-hook='logo-palette' is-selectable='true' is-selected='$ctrl.isLogoPaletteSelected()' kit-colors='$ctrl.getLogoColors()' ng-class='{&#39;-selected&#39;: $ctrl.isLogoPaletteSelected()}' ng-click='$ctrl.selectLogoPalette()'></kit-palette>\n<div class='palettes-top-spacer'></div>\n</div>\n<p6-control-header help-tooltip='design_coloration_palette_list' hide-toggle-button='true' label=':: &#39;design.coloration.basic.palettes.title&#39; | translate' show-help-button='true'></p6-control-header>\n<palette-list on-list-shown='$ctrl.onPaletteListShown(withAnimation)'></palette-list>\n</div>\n</cc-panel-body>\n<cc-panel-footer>\n<button class='p9a-secondary -inverse advanced-editing-button' ng-click='$ctrl.goToAdvancedPaletteEditing()'>\n{{:: 'design.coloration.basic.advanced' | translate}}\n</button>\n</cc-panel-footer>\n</cc-panel-frame>\n<cc-panel-frame class='-with-p16a-header -with-corners' data-hook='coloration-panel' help-tooltip='design_coloration_help' label='{{:: &#39;design.coloration.basic.panelheadernew&#39; | translate}}' ng-if='$ctrl.flags.newColorationPalettes &amp;&amp; $ctrl.isReadyToBeDisplayed' on-close='$ctrl.closePanel()' on-help='$ctrl.openHelp()' on-return='$ctrl.backToDesignKit()' show-close-button='true' show-return-button='true' show-scroll='false'>\n<cc-panel-fixed-top>\n<div class='coloration-panel-content'>\n<div class='coloration-panel-your-palette align-left' data-hook='coloration-panel-your-palette'>\n<p6-control-header hide-toggle-button='true' label=':: &#39;design.coloration.basic.palettetitle&#39; | translate' show-help-button='false'></p6-control-header>\n<p21-color-tag color='{{$ctrl.mainColor}}' data-main-color icon='edit' ng-class='{&#39;loading&#39;: $ctrl.showLoader}' on-click='$ctrl.changeMainColor(color)' show-icon='true' size='md' tooltip='design_coloration_main_color'></p21-color-tag>\n</div>\n<p17-divider></p17-divider>\n</div>\n<c3-dropdown-list button-text=':: &#39;design.coloration.color-mode-selector-new.button-edit&#39; | translate' class='gray-label' container-class='my-container-class' disable-toggle='true' dont-open-for-one='true' items='$ctrl.dropdownItems' label-key='label' label='{{:: &#39;design.coloration.color-mode-selector-new.mode-title&#39; | translate}}' no-hover='true' on-button-click='$ctrl.changeColorationMode()' show-button='true' show-titles='true' value='$ctrl.dropdownItems[0]'>\n<div class='coloration-panel-light-dark-mode'>\n<coloration-mode-selector></coloration-mode-selector>\n</div>\n</c3-dropdown-list>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='coloration-panel-content'>\n<div class='palettes-top-spacer'></div>\n<div class='logo-palette' data-hook='logo-palette-section' ng-if='$ctrl.isLogoPaletteAvailable()'>\n<p6-control-header help-tooltip='design_coloration_logo_palette' hide-toggle-button='true' label=':: &#39;design.coloration.basic.logoPalette.title&#39; | translate' show-help-button='true'></p6-control-header>\n<kit-palette data-hook='logo-palette' is-selectable='true' is-selected='$ctrl.isLogoPaletteSelected()' kit-colors='$ctrl.getLogoColors()' ng-class='{&#39;-selected&#39;: $ctrl.isLogoPaletteSelected()}' ng-click='$ctrl.selectLogoPalette()'></kit-palette>\n<div class='palettes-top-spacer'></div>\n</div>\n<p6-control-header help-tooltip='design_coloration_palette_list' hide-toggle-button='true' label=':: &#39;design.coloration.basic.palettes.title&#39; | translate' show-help-button='true'></p6-control-header>\n<palette-list on-list-shown='$ctrl.onPaletteListShown(withAnimation)' on-palette-selected='$ctrl.populateDropdownItems()'></palette-list>\n</div>\n</cc-panel-body>\n<cc-panel-footer>\n<button class='p9-primary cc-x-height' ng-click='$ctrl.goToAdvancedPaletteEditing()'>\n{{:: 'design.coloration.basic.change-palette-colors' | translate}}\n</button>\n</cc-panel-footer>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/coloration-panel-overlay.html","<div class='overlay-backdrop' data-hook='backdrop' ng-class='{&#39;loading&#39;: $ctrl.showLoader}' ng-show='$ctrl.showBackdrop'>\n<div class='coloration-panel-loader' data-hook='loader' ng-show='$ctrl.showLoader'>\n<div class='spinner-icon'>\n<cc-svg-icon icon='coloration:replace'></cc-svg-icon>\n</div>\n<div class='text' ng-bind-html='$ctrl.loaderText'></div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/animation-panel.html","<cc-panel-frame class='-with-p16a-header animation-panel -with-corners' label='{{ ::&#39;design.animations.panel-title&#39; | translate }}' on-close='$ctrl.closePanel()' on-help='$ctrl.onHelp()' on-return='$ctrl.backToDesignKit()' show-close-button='true' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top></cc-panel-fixed-top>\n<cc-panel-body>\n<div class='animation-panel-content'>\n<p6-control-header class='animation-panel-label' help-tooltip='animation_animation_type_help' hide-toggle-button='true' label=':: &#39;design.animations.component-animation.title&#39; | translate' show-help-button='true'></p6-control-header>\n<div class='cc-primitives-in-row flex-wrap animation-thumbnails' data-hook='animation-thumbnails'>\n<c20-graphic-radio icon='&#39;animation:&#39; + pattern.iconClass' is-selected='pattern == $ctrl.activeAnimationPattern' label='pattern.label' ng-mouseenter='$ctrl.previewAnimationPattern(pattern)' ng-repeat='pattern in $ctrl.animationPatterns' on-click='$ctrl.setAnimationPattern(pattern)' selected-icon='&#39;animation:&#39; + pattern.iconClass + &#39;Selected&#39;'></c20-graphic-radio>\n</div>\n<section-override-warning data-hook='animation-section-override' on-override-sections='$ctrl.overrideAnimationPatternOnSections()' override-message=':: &#39;builder.section-override-warning.animations&#39; | translate' show='$ctrl.askOverrideAnimationPatternSections'></section-override-warning>\n<p17-divider></p17-divider>\n<p6-control-header class='animation-panel-label -separated-label' help-tooltip='animation_scroll_effects_help' hide-toggle-button='true' label=':: &#39;design.animations.scroll-type.title&#39; | translate' show-help-button='true'></p6-control-header>\n<p3-dropdown-list class='transition-dropdown-list' container-class='scroll-type-dropdown-container' data-hook='scroll-type-dropdown' items='$ctrl.scrollTypeOptions' label-key='label' on-selection-change='$ctrl.setScrollType(item.value)' track-by-key='value' value='$ctrl.activeScrollType'></p3-dropdown-list>\n<section-override-warning data-hook='scroll-type-section-override' divider='true' on-override-sections='$ctrl.overrideScrollTypeOnSections()' override-message=':: &#39;builder.section-override-warning.scroll-type&#39; | translate' show='$ctrl.askOverrideScrollTypeSections'></section-override-warning>\n<p6-control-header class='animation-panel-label -separated-label' help-tooltip='animation_page_transition_help' hide-toggle-button='true' label=':: &#39;design.animations.page-transition.title&#39; | translate' show-help-button='true'></p6-control-header>\n<p3-dropdown-list class='transition-dropdown-list' container-class='page-transition-dropdown-container' data-hook='page-transition-dropdown' items='$ctrl.pagesTransitionNames' ng-if='!$ctrl.flags.staticTextsWithTranslate' on-selection-change='$ctrl.setPagesTransition(item)' value='$ctrl.activePagesTransition'></p3-dropdown-list>\n<p3-dropdown-list class='transition-dropdown-list' container-class='page-transition-dropdown-container' data-hook='page-transition-dropdown' items='$ctrl.pagesTransitionNames' label-key='label' ng-if='$ctrl.flags.staticTextsWithTranslate' on-selection-change='$ctrl.setPagesTransition(item.value)' track-by-key='value' value='$ctrl.activePagesTransition'></p3-dropdown-list>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/font-panel.html","<cc-panel-frame class='-with-p16a-header font-panel -with-corners' label=' {{ ::&#39;design.fonts.panel-title&#39; | translate }}' on-close='$ctrl.closePanel()' on-help='$ctrl.showHelp()' on-return='$ctrl.backToDesignKit()' show-close-button='true' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top>\n<c11-paragraph html=':: &#39;design.fonts.site-tip&#39; | translate'></c11-paragraph>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='font-panel-content' ng-if='$ctrl.ready'>\n<div class='font-item' data-hook='font-item' ng-init='$last &amp;&amp; $ctrl.scrollToSelectedFont(&#39;immediate&#39;)' ng-repeat='kit in $ctrl.fontOptions'>\n<font-thumbnail font-data='kit' font-scale='$ctrl.getFontScale(kit)' is-selectable='!$ctrl.isSelectedKit(kit)' is-selected='$ctrl.isSelectedKit(kit)' on-click='$ctrl.setFontKit(kit, $index)'></font-thumbnail>\n<div class='selected-section' ng-if='$ctrl.isSelectedKit(kit)'>\n<div class='font-panel-set-size-container'>\n<font-size-slider on-set-value='$ctrl.setFontSize(value)' value='$ctrl.selectedFontSize'></font-size-slider>\n</div>\n<section-override-warning data-hook='font-size-section-override' on-override-sections='$ctrl.overrideFontSizeOnSections()' override-message=':: &#39;builder.section-override-warning.font-size&#39; | translate' show='$ctrl.askOverrideFontSizeSections'></section-override-warning>\n<p17-divider></p17-divider>\n</div>\n</div>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/slideshow-animation-panel.html","<cc-panel-frame class='slideshow-animation-panel -with-p16a-header animation-panel' label='{{ ::&#39;design.animations.section-panel-title&#39; | translate }}' on-close='$ctrl.closePanel()' on-help='$ctrl.showSectionAnimationHelp()' on-return='$ctrl.back()' show-close-button='true' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top></cc-panel-fixed-top>\n<cc-panel-body>\n<div class='animation-panel-content'>\n<c11-paragraph class='c11-paragraph section-explanation' compile=':: &#39;design.animations.preview&#39; | translate' data-hook='title-paragraph'></c11-paragraph>\n<p6-control-header class='animation-panel-label' hide-toggle-button='true' label=':: &#39;design.animations.slideshow-animation.title&#39; | translate'></p6-control-header>\n<div class='cc-primitives-in-row flex-wrap animation-thumbnails -section' data-hook='animation-thumbnails'>\n<c20-graphic-radio icon='&#39;animation:&#39; + pattern.iconClass' is-selected='pattern == $ctrl.activeAnimationPattern' label='pattern.label' ng-repeat='pattern in $ctrl.animationPatterns' on-click='$ctrl.setAnimationPattern(pattern)' selected-icon='&#39;animation:&#39; + pattern.selectedIconClass'></c20-graphic-radio>\n</div>\n<P17-DIVIDER class='slideshow-transition-time'></P17-DIVIDER>\n<div class='transition-time-slider'>\n<div class='transition-time-slider-label p8-label' data-hook='transitionTime'>{{ 'design.animations.slideshow-transition-time.label' | translate: {transitionTime: $ctrl.getTransitionTime()} }}</div>\n<p5-slider class='transition-time-slider-control' max='6' min='2' on-value-change='$ctrl.setTransitionTime(value)' step='1' stepper='false' type='p5a' value='$ctrl.transition.time'></p5-slider>\n</div>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/section-animation-panel.html","<cc-panel-frame class='-with-p16a-header animation-panel' label='{{ ::&#39;design.animations.section-panel-title&#39; | translate }}' on-close='$ctrl.closePanel()' on-help='$ctrl.showSectionAnimationHelp()' on-return='$ctrl.back()' show-close-button='true' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top></cc-panel-fixed-top>\n<cc-panel-body>\n<div class='animation-panel-content'>\n<c11-paragraph class='c11-paragraph section-explanation' compile=':: &#39;design.animations.section-tip&#39; | translate' data-hook='title-paragraph'></c11-paragraph>\n<p6-control-header class='animation-panel-label' hide-toggle-button='true' label=':: &#39;design.animations.component-animation.title&#39; | translate'></p6-control-header>\n<div class='cc-primitives-in-row flex-wrap animation-thumbnails -section' data-hook='animation-thumbnails'>\n<c20-graphic-radio icon='&#39;animation:&#39; + pattern.iconClass' is-selected='pattern == $ctrl.activeAnimationPattern' label='pattern.label' ng-mouseenter='$ctrl.previewAnimationPattern(pattern)' ng-repeat='pattern in $ctrl.animationPatterns' on-click='$ctrl.setAnimationPattern(pattern)' selected-icon='&#39;animation:&#39; + pattern.iconClass + &#39;Selected&#39;'></c20-graphic-radio>\n</div>\n<div ng-if='$ctrl.scrollTypeChangeable'>\n<p17-divider></p17-divider>\n<p6-control-header class='animation-panel-label -separated-label' hide-toggle-button='true' label=':: &#39;design.animations.scroll-type.title&#39; | translate'></p6-control-header>\n<p3-dropdown-list class='transition-dropdown-list' container-class='scroll-type-dropdown-container' data-hook='scroll-type-dropdown' items='$ctrl.scrollTypeOptions' label-key='label' on-selection-change='$ctrl.setScrollType(item.value)' track-by-key='value' value='$ctrl.activeScrollType'></p3-dropdown-list>\n</div>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/section-background-panel.html","<cc-panel-frame adi-automation='{{:: $ctrl.automationAttribute }}' class='-with-p16a-header -with-corners' label='{{:: $ctrl.label}}' on-close='$ctrl.closePanel()' on-help='$ctrl.onHelp()' on-return='$ctrl.goToPrevState()' scroll-disabled='$ctrl.shouldShowBackdrop' show-close-button='true' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top>\n<div class='c11-paragraph' data-hook='panel-paragraph-text'>\n{{'builder.section-background.panel-paragraph-text' | translate}}\n</div>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='background-panel' data-hook='background-panel' ng-class='{&#39;show-background-off&#39;: !$ctrl.showBackground}'>\n<div class='background-items'>\n<div adi-automation='background-item' class='background-item' data-hook='background' ng-class='{&#39;-selected&#39;: background.isSelected, &#39;-with-label&#39;: background.label}' ng-repeat='background in $ctrl.backgrounds track by $id(background)'>\n<p25-background-preview data='background.data' is-selected='background.isSelected' on-click='$ctrl.selectBackground(background)' size='&#39;big&#39;'></p25-background-preview>\n</div>\n</div>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/section-background-options/section-background-settings.html","<div class='background-settings p4-action-menu' ng-if='!$ctrl.flags.imagePositionsAsRectangles'>\n<div class='close-button' data-hook='close' ng-click='$ctrl.onClose()'>\n<i class='cc-icon-close-12'></i>\n</div>\n<section-background-settings-image data-hook='image-settings' ng-if='$ctrl.isImage()'></section-background-settings-image>\n</div>\n<div class='background-settings p4-action-menu image-positions' ng-show='$ctrl.flags.imagePositionsAsRectangles'>\n<c26-image-position body='{{:: $ctrl.getHeaderBody()}}' footer-content-text='{{:: $ctrl.getFooterTextForParallax()}}' footer-link='$ctrl.goToPreview()' header-title='{{:: $ctrl.getHeaderTitle()}}' ng-if='$ctrl.isImage()' on-close='$ctrl.onClose()' on-position-clicked='$ctrl.positionClicked({index})' rectangles-count-each-row='3' rectangles-count='9' selected-rectangle='{{ $ctrl.selectedPositionIndex}}' show-footer='$ctrl.shouldShowParallaxParagraph'></c26-image-position>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/section-background-options/section-background-settings-image.html","<div class='image-settings'>\n<p6-control-header hide-toggle-button='true' label=':: &#39;builder.section-background.background-settings.image.title&#39; | translate'></p6-control-header>\n<div class='c11-paragraph' data-hook='parallax-paragraph' ng-if='$ctrl.shouldShowParallaxParagraph'>\n<span wix-translate-compile='builder.section-background.background-settings.image.parallax-paragraph'></span>\n</div>\n<div class='cc-primitives-in-row flex-wrap radios' data-hook='animation-thumbnails'>\n<c20-graphic-radio icon='&#39;background-options:&#39; + option.iconClass' is-selected='option.key == $ctrl.activeAligmentOption' label='option.label' ng-repeat='option in $ctrl.options' on-click='$ctrl.setAligmentOption(option)' selected-icon='&#39;background-options:&#39; + option.iconClass + &#39;Selected&#39;'></c20-graphic-radio>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/section-font-panel.html","<cc-panel-frame class='-with-p16a-header section-font-panel -with-corners' label='{{ ::$ctrl.panelTitle}}' on-close='$ctrl.closePanel()' on-help='$ctrl.showHelp()' on-return='$ctrl.backToSectionDesign()' show-close-button='true' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top>\n<c11-paragraph class='c11-paragraph' compile='$ctrl.panelDescription' data-hook='title-paragraph'></c11-paragraph>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='font-panel-content' ng-if='$ctrl.ready'>\n<font-thumbnail font-data='$ctrl.selectedFont' font-scale='$ctrl.selectedFontSize' is-selectable='false' large-bg='true'></font-thumbnail>\n<div class='font-panel-set-size-container'>\n<font-size-slider on-set-value='$ctrl.setFontSize(value)' value='$ctrl.selectedFontSize'></font-size-slider>\n</div>\n<p17-divider></p17-divider>\n<div data-hook='text-position-controls' ng-if='$ctrl.isPositionFeature &amp;&amp; $ctrl.showVerticalPositionControls'>\n<p0-spacer size='large'></p0-spacer>\n<div class='p8-label'>{{ ::'design.fonts.position-on-media' | translate }}</div>\n<p0-spacer></p0-spacer>\n<div class='cc-primitives-in-row'>\n<div class='rectangles-container'>\n<p26-image-position letter-of-selected='T' on-position-clicked='$ctrl.positionClicked(index)' rectangles-count-each-row='3' rectangles-count='9' selected-rectangle='$ctrl.selectedPositionIndex'></p26-image-position>\n</div>\n</div>\n</div>\n<p0-spacer></p0-spacer>\n<p17-divider ng-if='$ctrl.isPositionFeature &amp;&amp; $ctrl.showVerticalPositionControls'>)</p17-divider>\n<div data-hook='alignment-toolbar'>\n<p0-spacer size='large'></p0-spacer>\n<div class='p8-label'>{{ ::'design.fonts.text-alignment.label' | translate }}</div>\n<p0-spacer></p0-spacer>\n<div class='cc-primitives-in-row flex-wrap'>\n<c20-graphic-radio adi-automation='Section Alignment Left' complex='false' data-hook='alignment-option-left-{{$ctrl.isAlignmentSelected(&#39;left&#39;) ? &#39;selected&#39; : &#39;unselected&#39;}}' icon='&#39;alignment:AlignLeft&#39;' is-selected='$ctrl.isAlignmentSelected(&#39;left&#39;)' label='::&#39;design.fonts.text-alignment.left&#39; | translate' on-click='$ctrl.alignSection(&#39;left&#39;)' small='true'></c20-graphic-radio>\n<p0-spacer is-horizontal='true' size='medium'></p0-spacer>\n<c20-graphic-radio adi-automation='Section Alignment Center' complex='false' data-hook='alignment-option-center-{{$ctrl.isAlignmentSelected(&#39;center&#39;) ? &#39;selected&#39; : &#39;unselected&#39;}}' icon='&#39;alignment:AlignCenter&#39;' is-selected='$ctrl.isAlignmentSelected(&#39;center&#39;)' label='::&#39;design.fonts.text-alignment.center&#39; | translate' on-click='$ctrl.alignSection(&#39;center&#39;)' small='true'></c20-graphic-radio>\n<p0-spacer is-horizontal='true' size='medium'></p0-spacer>\n<c20-graphic-radio adi-automation='Section Alignment Right' complex='false' data-hook='alignment-option-right-{{$ctrl.isAlignmentSelected(&#39;right&#39;) ? &#39;selected&#39; : &#39;unselected&#39;}}' icon='&#39;alignment:AlignRight&#39;' is-selected='$ctrl.isAlignmentSelected(&#39;right&#39;)' label='::&#39;design.fonts.text-alignment.right&#39; | translate' on-click='$ctrl.alignSection(&#39;right&#39;)' small='true'></c20-graphic-radio>\n</div>\n</div>\n<p0-spacer></p0-spacer>\n<p17-divider ng-if='$ctrl.showSplitParagraph()'>)</p17-divider>\n<div data-hook='paragraph-split-toolbar' ng-if='$ctrl.showSplitParagraph()'>\n<p0-spacer size='large'></p0-spacer>\n<div class='p8-label'>{{ ::'design.fonts.split-parapraph.title' | translate }}</div>\n<p0-spacer></p0-spacer>\n<div class='cc-primitives-in-row flex-wrap'>\n<c20-graphic-radio adi-automation='split paragraph split' complex='false' data-hook='split-parapraph-split {{$ctrl.isSplitParagraph ? &#39;selected&#39; : &#39;unselected&#39;}}' icon='&#39;split:ParagraphSplit&#39;' is-selected='$ctrl.isSplitParagraph' label='::&#39;design.fonts.paragraph-columns.split&#39; | translate' on-click='$ctrl.setSplitParagraph(true)' small='true'></c20-graphic-radio>\n<p0-spacer is-horizontal='true' size='medium'></p0-spacer>\n<c20-graphic-radio adi-automation='split paragraph merge' complex='false' data-hook='split-parapraph-merge {{$ctrl.isSplitParagraph ? &#39;unselected&#39; : &#39;selected&#39;}}' icon='&#39;split:ParagraphMerge&#39;' is-selected='!$ctrl.isSplitParagraph' label='::&#39;design.fonts.paragraph-columns.merge&#39; | translate' on-click='$ctrl.setSplitParagraph(false)' small='true'></c20-graphic-radio>\n</div>\n</div>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/section-design/body-section-design-menu.html","<div class='body-section-design-menu'>\n<cc-menu-item data-hook='media-button' label='{{:: &quot;builder.section-design.menu.media&quot; | translate }}' ng-click='$ctrl.openMediaPanel()' ng-if='$ctrl.flags.sectionMedia &amp;&amp; $ctrl.showMedia' svg-icon='design:media'></cc-menu-item>\n<cc-menu-item data-hook='color-button' label='{{::&quot;builder.section-design.menu.color&quot; | translate }}' ng-click='$ctrl.openColorPanel()' ng-if='!$ctrl.isHeader' svg-icon='design:color'></cc-menu-item>\n<cc-menu-item data-hook='font-button' label='{{ ::$ctrl.fontPanelTitle}}' ng-click='$ctrl.openFontPanel()' ng-if='!$ctrl.isHeader' svg-icon='design:font'></cc-menu-item>\n<cc-menu-item data-hook='height-button' label='{{::&quot;builder.section-design.menu.height&quot; | translate }}' ng-click='$ctrl.openHeightPanel($event)' ng-if='$ctrl.isHeightSupported()' svg-icon='design:height'></cc-menu-item>\n<cc-menu-item data-hook='animations-button' label='{{::&quot;builder.section-design.menu.animations&quot; | translate }}' ng-click='$ctrl.openAnimationPanel()' ng-if='!$ctrl.isHeader &amp;&amp; !$ctrl.isSlideShow()' svg-icon='design:animations'></cc-menu-item>\n<cc-menu-item data-hook='animations-button' label='{{::&quot;builder.section-design.menu.animations&quot; | translate }}' ng-click='$ctrl.openSlideshowAnimationPanel()' ng-if='!$ctrl.isHeader &amp;&amp; $ctrl.isSlideShow() &amp;&amp; $ctrl.isSlideShowTransition()' svg-icon='design:animations'></cc-menu-item>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/section-design/header-design-menu.html","<div class='header-design-menu' data-hook='header-design-menu'>\n<header-type on-updated='$ctrl.handleTypeUpdate'></header-type>\n<header-background colors-source='$ctrl.colorsSource' on-updated='$ctrl.handleBackgroundUpdate()'></header-background>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/section-design/section-design-menu.html","<div aria-describedby='list-item-menu' aria-label='{{ $ctrl.item.label }}' class='section-design-menu' data-hook='section-design-menu' ng-class='{&#39;top&#39;: $ctrl.isAllMenuVisible === false, &#39;notready&#39;: $ctrl.notReady(), &#39;p4-action-menu&#39;: (!$ctrl.flags.popover), &#39;header&#39;: $ctrl.isHeader}' role='menu' tabindex='-1'>\n<body-section-design-menu item='::$ctrl.item' ng-if='::!$ctrl.isHeader' on-option-clicked='$ctrl.onOptionClicked()'></body-section-design-menu>\n<header-design-menu ng-if='::$ctrl.isHeader' on-design-updated='$ctrl.onDesignUpdated'></header-design-menu>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/section-design/section-design-menu-deprecated.html","<div aria-describedby='list-item-menu' aria-label='{{ $ctrl.item.label }}' class='section-design-menu' data-hook='section-design-menu' ng-class='{&#39;top&#39;: $ctrl.isAllMenuVisible === false, &#39;notready&#39;: $ctrl.notReady(), &#39;p4-action-menu&#39;: !$ctrl.flags.popover}' role='menu' tabindex='-1'>\n<cc-menu-item data-hook='background-button' label='{{:: &quot;builder.section-design.menu.background&quot; | translate }}' ng-click='$ctrl.openBackgroundPanel()' ng-if='$ctrl.flags.sectionMedia &amp;&amp; $ctrl.showBackground &amp;&amp; !$ctrl.isListNode' svg-icon='design:background'></cc-menu-item>\n<cc-menu-item data-hook='background-button' label='{{:: &quot;builder.section-design.menu.background&quot; | translate }}' ng-click='$ctrl.openListBackgroundPanel()' ng-if='$ctrl.flags.sectionMedia &amp;&amp; $ctrl.showBackground &amp;&amp; $ctrl.isListNode &amp;&amp; !$ctrl.listBackgroundOptions' svg-icon='design:background'></cc-menu-item>\n<div class='section-list' ng-if='$ctrl.flags.sectionMedia &amp;&amp; $ctrl.showBackground &amp;&amp; $ctrl.listBackgroundOptions'>\n<div class='p4-item just-text'>{{::\"builder.section-design.menu.background\" | translate }}</div>\n<cc-menu-item data-hook='headerbg-button' label='{{:: &quot;builder.section-design.menu.headerbg&quot; | translate }}' ng-click='$ctrl.openHeaderBackgroundPanel()' svg-icon-from-inline='true' svg-icon-hover='design:headerbg_hover' svg-icon='design:headerbg'></cc-menu-item>\n<cc-menu-item data-hook='listbg-button' label='{{:: &quot;builder.section-design.menu.listbg&quot; | translate }}' ng-click='$ctrl.openListBackgroundPanel()' svg-icon-from-inline='true' svg-icon-hover='design:listbg_hover' svg-icon='design:listbg'></cc-menu-item>\n<p17-divider></p17-divider>\n</div>\n<cc-menu-item data-hook='color-button' label='{{::&quot;builder.section-design.menu.color&quot; | translate }}' ng-click='$ctrl.openColorPanel()' ng-if='!$ctrl.isHeader' svg-icon='design:color'></cc-menu-item>\n<cc-menu-item data-hook='font-button' label='{{ ::$ctrl.fontPanelTitle}}' ng-click='$ctrl.openFontPanel()' ng-if='!$ctrl.isHeader' svg-icon='design:font'></cc-menu-item>\n<cc-menu-item data-hook='animations-button' label='{{::&quot;builder.section-design.menu.animations&quot; | translate }}' ng-click='$ctrl.openAnimationPanel()' ng-if='!$ctrl.isHeader' svg-icon='design:animations'></cc-menu-item>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/header-design/header-background.html","<div class='header-background' data-hook='header-background' ng-if='$ctrl.shouldShowHeaderBackground'>\n<p17-divider></p17-divider>\n<p6-control-header hide-toggle-button='true' label=':: &#39;design.header.bgcolor.title&#39; | translate'></p6-control-header>\n<c11-paragraph class='c11-paragraph' compile='$ctrl.description' data-hook='title-paragraph'></c11-paragraph>\n<palette-color-picker colors-size='xs' colors='$ctrl.colors' on-color-selected='$ctrl.onColorSelected(selection)' selected-color='$ctrl.current'></palette-color-picker>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict"
;a.put("views/design/header-design/header-type.html","<div class='header-type cc-primitives-in-row flex-wrap radios'>\n<p6-control-header hide-toggle-button='true' label=':: &#39;design.header.type.title&#39; | translate'></p6-control-header>\n<c20-graphic-radio adi-automation='header-type' data-hook='header-type-solid' hover-img-url='::$ctrl.getHoverImgURL(&#39;solid&#39;)' icon='::&#39;header-design:solid&#39;' is-selected='$ctrl.isSolid' label='::&#39;design.header.type.solid&#39; | translate' on-click='$ctrl.setSolid()'></c20-graphic-radio>\n<c20-graphic-radio adi-automation='header-type' data-hook='header-type-transparent' disabled-icon='&#39;header-design:transparent-disabled&#39;' hover-img-url='::$ctrl.getHoverImgURL($ctrl.enableTransparent ? &#39;transparent&#39; : &#39;transparent-disabled&#39;)' icon='::&#39;header-design:transparent&#39;' is-selected='$ctrl.isTransparent' label='::&#39;design.header.type.transparent&#39; | translate' ng-disabled='::!$ctrl.enableTransparent' on-click='$ctrl.setTransparent()' tooltip='{{:: (!$ctrl.enableTransparent ? &#39;design_header_type_transparent_disabled&#39; : $ctrl.isCurrentPageHomepage ? &#39;design_header_type_transparent_home&#39; : &#39;design_header_type_transparent_non_home&#39;)}}'></c20-graphic-radio>\n<c20-graphic-radio adi-automation='header-type' data-hook='header-type-fixed' hover-img-url='::$ctrl.getHoverImgURL(&#39;fixed&#39;)' icon='::&#39;header-design:fixed&#39;' is-selected='$ctrl.isFixed' label='::&#39;design.header.type.fixed&#39; | translate' on-click='$ctrl.setFixed()' tooltip='design_header_type_fixed'></c20-graphic-radio>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/site-design-menu.html","<div aria-describedby='list-item-menu' aria-label='{{ $ctrl.item.label }}' class='site-design-menu' data-hook='site-design-menu' ng-class='{&#39;top&#39;: $ctrl.isAllMenuVisible === false, &#39;notready&#39;: $ctrl.notReady(), &#39;p4-action-menu&#39;: !$ctrl.flags.popover}' role='menu' tabindex='-1'>\n<cc-menu-item data-hook='color-button' label='{{::&#39;design.colors.title&#39; | translate }}' ng-click='$ctrl.openColorPanel()' svg-icon='design:color'></cc-menu-item>\n<cc-menu-item data-hook='font-button' label='{{::&#39;design.fonts.title&#39; | translate }}' ng-click='$ctrl.openFontPanel()' svg-icon='design:font'></cc-menu-item>\n<cc-menu-item data-hook='animations-button' label='{{::&#39;design.animations.title&#39; | translate }}' ng-click='$ctrl.openAnimationPanel()' svg-icon='design:animations'></cc-menu-item>\n<p17-divider ng-if='$ctrl.kitHasOverrides()'></p17-divider>\n<cc-menu-item data-hook='reset-button' label='{{:: &#39;design.kit.reset.button&#39; | translate }}' ng-click='$ctrl.onReset()' ng-if='$ctrl.kitHasOverrides()' svg-icon='design:reset'></cc-menu-item>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/section-override-warning.html","<div class='style-d section-override-warning-container' data-hook='section-override-warning-body' ng-if='$ctrl.show'>\n<p class='c11-paragraph'>\n<span compile='$ctrl.overrideMessage + $ctrl.$translate.instant(&#39;builder.section-override-warning.replace-sections&#39;)' data-hook='initial-message' ng-if='$ctrl.showOverrideQuery()'></span>\n<span data-hook='success-message' ng-if='$ctrl.showSuccess()'>\n<i class='cc-icon-checkbox-check confirm'></i>\n{{ :: 'builder.section-override-warning.success' | translate }}\n</span>\n</p>\n<p17-divider ng-if='$ctrl.divider'></p17-divider>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/hex-input.html","<p1-text-input class='palette-color-input' data-hook='hex-input-input' max-length='8' on-blur='$ctrl.setColor()' on-change-value='$ctrl.colorChange(value)' on-focus='$ctrl.selectColorText($event)' select-on-focus='false' value='$ctrl.editableColor.value'></p1-text-input>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/palette-color.html","<div class='palette-color-container'>\n<p21-color-tag color='{{$ctrl.color}}' on-click='$ctrl.onIconClick({$event: $event, color: $ctrl.color})' show-icon='true' size='md'></p21-color-tag>\n<div class='palette-color-info'>\n<div class='palette-color-label' data-hook='palette-color-label'>\n{{:: $ctrl.label}}\n</div>\n<hex-input color='$ctrl.color' on-text-change='$ctrl.onTextChange()'></hex-input>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/palette-list.html","<div class='palette-list' ng-class='{&#39;animate-palettes&#39;: $ctrl.showAnimation}'>\n<kit-palette data-hook='palette-list-item' is-selectable='true' is-selected='$ctrl.isCustomSelected' kit-colors='$ctrl.customPalette.colors' ng-class='{&#39;-selected&#39;: $ctrl.isCustomSelected}' ng-click='$ctrl.selectCustom()' ng-if='!$ctrl.flags.newColorationPalettes &amp;&amp; !!$ctrl.customPalette'></kit-palette>\n<kit-palette data-hook='palette-list-item' is-selectable='true' is-selected='$ctrl.isCustomSelected' kit-colors='$ctrl.visibleCustomPalette.colors' ng-class='{&#39;-selected&#39;: $ctrl.isCustomSelected}' ng-click='$ctrl.selectCustom()' ng-if='$ctrl.flags.newColorationPalettes &amp;&amp; !!$ctrl.customPalette'></kit-palette>\n<kit-palette data-hook='palette-list-item' is-selectable='true' is-selected='$index === $ctrl.selectedIndex' kit-colors='palette.colors' list-enter-end='$ctrl.handleListAnimationEnd()' ng-class='{&#39;-selected&#39;: $index === $ctrl.selectedIndex}' ng-click='$ctrl.select($index)' ng-if='!$ctrl.flags.newColorationPalettes' ng-repeat='palette in $ctrl.palettes track by ($index + palette.colors.mainColor)'></kit-palette>\n<kit-palette data-hook='palette-list-item' is-selectable='true' is-selected='$index === $ctrl.selectedIndex' kit-colors='palette.colors' list-enter-end='$ctrl.handleListAnimationEnd()' ng-class='{&#39;-selected&#39;: $index === $ctrl.selectedIndex}' ng-click='$ctrl.select($index)' ng-if='$ctrl.flags.newColorationPalettes' ng-repeat='palette in $ctrl.visiblePalettes track by ($index + palette.colors.mainColor)'></kit-palette>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kit-palette.html","<p24-palette colors='$ctrl.colors' is-selectable='$ctrl.isSelectable' is-selected='$ctrl.isSelected'></p24-palette>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/advanced-palette-editing.html","<coloration-panel-overlay loader-text='{{:: &#39;design.coloration.advanced.readability.loader&#39; | translate}}' show-backdrop='$ctrl.showLoader' show-loader='$ctrl.showLoader'></coloration-panel-overlay>\n<cc-panel-frame class='-with-p16a-header -with-corners' data-hook='advanced-palette-editing-panel' label='{{:: &#39;design.coloration.advanced.panelheader&#39; | translate}}' ng-class='{&#39;-colors-not-readable&#39;: $ctrl.areColorsReadable === false}' on-close='$ctrl.closePanel()' on-help='$ctrl.openHelp()' on-return='$ctrl.backToColoration()' show-close-button='true' show-footer='true' show-help-button='false' show-return-button='true'>\n<div class='advanced-editing-header'>\n<div class='advanced-editing-title'>\n<span class='advanced-editing-title-text' data-hook='advanced-editing-title-text'>{{:: 'design.coloration.advanced.title' | translate }}</span>\n<div cc-tooltip='design_advanced_colors_reset' class='p9b-text-button cc-x-height advanced-editing-reset' data-hook='advanced-editing-reset' ng-click='$ctrl.resetColors()' ng-show='$ctrl.shouldShowReset()'>\n{{:: 'design.coloration.advanced.reset' | translate }}\n</div>\n</div>\n<div class='advanced-editing-description' data-hook='advanced-editing-description'>\n{{:: 'design.coloration.advanced.description' | translate }}\n</div>\n</div>\n<div class='palette-colors'>\n<palette-color color='$ctrl.colors.mainColor' label='{{:: &#39;design.coloration.advanced.main.color&#39; | translate }}' on-icon-click='$ctrl.openColorPicker($event, color, $ctrl.colorsStateEnum.mainColor)' on-text-change='$ctrl.changeColorsByHex()'></palette-color>\n<palette-color color='$ctrl.colors.secondaryColor' label='{{:: &#39;design.coloration.advanced.secondary.color&#39; | translate }}' ng-if='$ctrl.colors.secondaryColor' on-icon-click='$ctrl.openColorPicker($event, color, $ctrl.colorsStateEnum.secondaryColor)' on-text-change='$ctrl.changeColorsByHex()'></palette-color>\n<palette-color color='$ctrl.colors.thirdColor' label='{{:: &#39;design.coloration.advanced.third.color&#39; | translate }}' ng-if='$ctrl.colors.thirdColor' on-icon-click='$ctrl.openColorPicker($event, color, $ctrl.colorsStateEnum.thirdColor)' on-text-change='$ctrl.changeColorsByHex()'></palette-color>\n<palette-color color='$ctrl.colors.fourthColor' label='{{:: &#39;design.coloration.advanced.fourth.color&#39; | translate }}' ng-if='$ctrl.colors.fourthColor' on-icon-click='$ctrl.openColorPicker($event, color, $ctrl.colorsStateEnum.fourthColor)' on-text-change='$ctrl.changeColorsByHex()'></palette-color>\n<palette-color color='$ctrl.colors.white' label='{{:: &#39;design.coloration.advanced.light.color&#39; | translate }}' ng-if='$ctrl.colors.white' on-icon-click='$ctrl.openColorPicker($event, color, $ctrl.colorsStateEnum.white)' on-text-change='$ctrl.changeColorsByHex()'></palette-color>\n<palette-color color='$ctrl.colors.black' label='{{:: &#39;design.coloration.advanced.dark.color&#39; | translate }}' ng-if='$ctrl.colors.black' on-icon-click='$ctrl.openColorPicker($event, color, $ctrl.colorsStateEnum.black)' on-text-change='$ctrl.changeColorsByHex()'></palette-color>\n</div>\n<cc-panel-footer>\n<div class='readability-expert'>\n<cc-svg-icon icon='coloration:positive-validation-outline-small' ng-show='$ctrl.areColorsReadable'></cc-svg-icon>\n<div class='readability-expert-message -positive' ng-show='$ctrl.areColorsReadable'>\n<div class='message-line'>{{:: 'design.coloration.advanced.readability.positive' | translate }}</div>\n<button cc-tooltip='design_coloration_readability_positive' class='p9b-text-button -medium'>\n{{:: 'design.coloration.advanced.readability.learn.more' | translate }}\n</button>\n</div>\n<div class='readability-expert-message -negative' ng-show='$ctrl.areColorsReadable === false'>\n<div class='message-line'>{{:: 'design.coloration.advanced.readability.negative' | translate }}</div>\n<button cc-tooltip-options='{{ {offsetX: 24} }}' cc-tooltip='design_coloration_readability_negative' class='p9b-text-button -medium'>\n{{:: 'design.coloration.advanced.readability.learn.more' | translate }}\n</button>\n</div>\n</div>\n<button class='fix-readability p9-primary -small -with-icon' data-hook='fix-readability-button' ng-click='$ctrl.fixColors()' ng-show='$ctrl.areColorsReadable === false'>\n<cc-svg-icon icon='coloration:magic-wand'></cc-svg-icon>\n<span>{{:: 'design.coloration.advanced.readability.fix' | translate }}</span>\n</button>\n</cc-panel-footer>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/advanced-color-picker.html","<div class='advanced-color-picker-inner' ng-class='{&#39;loaded&#39;: $ctrl.loaded}'>\n<color-picker api='$ctrl.api' event-api='$ctrl.eventAPI' ng-model='$ctrl.selectedColor' options='$ctrl.options'></color-picker>\n<div class='color-picker-hue-hor' data-hue ng-mousedown='$ctrl.changeHue($event)'>\n<div class='handle' data-handle></div>\n</div>\n<div class='hex-input-wrapper'>\n<div class='color-picker-swatch' data-hook='swatch' ng-style='{backgroundColor: $ctrl.selectedColor}'></div>\n<label class='hex-value'>{{:: 'design.coloration.basic.hex-value' | translate}}</label>\n<hex-input color='$ctrl.selectedColor' on-text-change='$ctrl.textChange(color)' on-text-changing='$ctrl.textChanging(color)' on-text-fixed='$ctrl.onTextFixed()'></hex-input>\n</div>\n<div class='dialog-buttons'>\n<button class='p9a-secondary -small' data-hook='palette-color-dialog-cancel' ng-click='$ctrl.cancelClick()'>\n<div class='cc-x-height'>{{ ::'general.cancel' | translate }}</div>\n</button>\n<button class='p9-primary -small' data-hook='palette-color-dialog-confirm' ng-class='{&#39;-disabled&#39;: !$ctrl.hexIsValid}' ng-click='$ctrl.confirmClick()' ng-disabled='!$ctrl.hexIsValid'>\n<div class='cc-x-height'>{{ ::'general.apply' | translate }}</div>\n</button>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/coloration-mode-selector.html","<p3-dropdown-list data-hook='coloration-mode-selector-dropdown' help-tooltip='design_coloration_mode_toggle' items='$ctrl.dropdownItems' label-key='label' no-hover='true' on-selection-change='$ctrl.onDropdownSelectionChange(item)' track-by-key='value' value='$ctrl.dropdownValue'></p3-dropdown-list>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kit-thumbnail.html","<ng-include src='::$ctrl.thumbnailTemplate()'></ng-include>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/font/font-thumbnail.html","<div class='font-thumbnail' data-hook='font-thumbnail' ng-class='{ &quot;selected&quot; : $ctrl.isSelected, &quot;selectable&quot;: $ctrl.isSelectable, &quot;has-background&quot;: $ctrl.hasBackground, &quot;background-lg&quot;: $ctrl.hasBackground &amp;&amp; $ctrl.largeBg }' ng-click='$ctrl.onClick({value: $ctrl.fontData})' ng-style='$ctrl.getThumbnailStyle()'>\n<div class='font-name' data-hook='font-title' ng-style='$ctrl.getNameFontStyle()'>{{ ::$ctrl.fontData.name.title }}</div>\n<div class='font-description' data-hook='font-description' ng-style='$ctrl.getDescriptionFontStyle()'>{{ ::$ctrl.fontData.description.title }}</div>\n<cc-svg-icon data-hook='font-selected' icon='coloration:selected' is-corner-icon='true' ng-if='$ctrl.isSelected'></cc-svg-icon>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/font/font-size-slider.html","<div class='font-size-slider'>\n<div class='font-size-slider-label p8-label' data-hook='label'>{{ 'design.fonts.font-size.label' | translate: {sizeLabel: $ctrl.sizeLabel} }}</div>\n<p5-slider class='font-size-slider-control' data-hook='slider' icon-after='design:font-size-large' icon-before='design:font-size-small' max='$ctrl.maxFontSize' min='$ctrl.minFontSize' on-value-change='$ctrl.onFontSizeChange(value)' on-value-settle='$ctrl.setFontSize(value)' step='1' stepper-ticks='false' stepper='true' type='p5a' value='$ctrl.value'></p5-slider>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/agile-kit.html","<div class='agile-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='agile-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/army-kit.html","<div class='army-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='army-bg-top' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='army-left-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='army-right-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='army-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L3&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/black-ice-kit.html","<div class='black-ice-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='black-ice-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='black-ice-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L3&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/bold-kit.html","<div class='bold-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='bold-bg-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='bold-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/bounce-kit.html","<div class='bounce-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='bounce-big-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='bounce-small-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='bounce-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D3&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/bouquet-kit.html","<div class='bouquet-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='bouquet-top-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='bouquet-bottom-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='bouquet-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/breeze-kit.html","<div class='breeze-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='breeze-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='breeze-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D3&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/cadenza-kit.html","<div class='cadenza-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='cadenza-top-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.fourthColor)}'></div>\n<div class='cadenza-bottom-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='cadenza-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/charming-kit.html","<div class='charming-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.thirdColor)}'>\n<div class='charming-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='charming-box-middle' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='charming-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.fourthColor)}'></div>\n<div class='charming-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/chic-kit.html","<div class='chic-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='chic-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='chic-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='chic-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L2&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/classic-kit.html","<div class='classic-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'>\n<div class='classic-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;), borderColor: $ctrl.getTextColor(&#39;D3&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/clean-kit.html","<div class='clean-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='clean-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='clean-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/deep-forest-kit.html","<div class='deep-forest-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'>\n<div class='deep-forest-bg-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='deep-forest-bg-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.main)}'></div>\n<div class='deep-forest-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/delight-kit.html","<div class='delight-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='delight-bg-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='delight-bg-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='delight-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/dynamic-kit.html","<div class='dynamic-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.black)}'>\n<div class='dynamic-line-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='dynamic-line-middle' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='dynamic-line-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='dynamic-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/elegant-kit.html","<div class='elegant-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='elegant-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='elegant-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L3&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}
angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/evolution-kit.html","<div class='evolution-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='evolution-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='evolution-box-bottom' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='evolution-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/fresh-kit.html","<div class='fresh-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='fresh-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D3&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/fun-kit.html","<div class='fun-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='fun-bg-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='fun-big-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.thirdColor)}'></div>\n<div class='fun-small-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.fourthColor)}'></div>\n<div class='fun-small-line-1' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='fun-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L2&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/funky-kit.html","<div class='funky-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='funky-left-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.thirdColor)}'></div>\n<div class='funky-middle-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='funky-right-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.fourthColor)}'></div>\n<div class='funky-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/fuse-kit.html","<div class='fuse-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.thirdColor)}'>\n<div class='fuse-small-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='fuse-big-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='fuse-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D3&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/hi-rise-kit.html","<div class='hi-rise-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='hi-rise-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L3&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/horizon-kit.html","<div class='horizon-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='horizon-box-top' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='horizon-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/indulge-kit.html","<div class='indulge-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.black)}'>\n<div class='indulge-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='indulge-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='indulge-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/innovative-kit.html","<div class='innovative-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='innovative-small-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='innovative-big-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='innovative-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D3&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/intensity-kit.html","<div class='intensity-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='intensity-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='intensity-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/jet-black-kit.html","<div class='jet-black-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='jet-black-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D3&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/maison-kit.html","<div class='maison-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'>\n<div class='maison-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white), borderColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='maison-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/merlot-kit.html","<div class='merlot-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.white)}'>\n<div class='merlot-bg-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='merlot-bg-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='merlot-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/midnight-kit.html","<div class='midnight-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='midnight-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D3&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/minimal-kit.html","<div class='minimal-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'>\n<div class='minimal-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='minimal-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='minimal-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/organic-kit.html","<div class='organic-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='organic-line-1' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='organic-line-2' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.thirdColor)}'></div>\n<div class='organic-line-3' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.fourthColor)}'></div>\n<div class='organic-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/playground-kit.html","<div class='playground-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='playground-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='playground-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/pure-kit.html","<div class='pure-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.fourthColor)}'>\n<div class='pure-line-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.thirdColor)}'></div>\n<div class='pure-line-middle' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.fourthColor)}'></div>\n<div class='pure-line-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='pure-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/rosewater-kit.html","<div class='rosewater-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='rosewater-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='rosewater-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/royal-kit.html","<div class='royal-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='royal-big-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='royal-small-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='royal-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/rustic-kit.html","<div class='rustic-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='rustic-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='rustic-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/serene-kit.html","<div class='serene-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'>\n<div class='serene-left-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='serene-middle-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='serene-right-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='serene-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/sincere-kit.html","<div class='sincere-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='sincere-line-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='sincere-line-middle' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='sincere-line-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='sincere-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/skyscraper-kit.html","<div class='skyscraper-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'>\n<div class='skyscraper-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='skyscraper-box-middle' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='skyscraper-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='skyscraper-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/smart-kit.html","<div class='smart-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='smart-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='smart-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/soho-kit.html","<div class='soho-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='soho-bg-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='soho-bg-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='soho-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/sophisticated-kit.html","<div class='sophisticated-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='sophisticated-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='sophisticated-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='sophisticated-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/spark-kit.html","<div class='spark-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'>\n<div class='spark-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='spark-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='spark-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/sugar-kit.html","<div class='sugar-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='sugar-small-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='sugar-big-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='sugar-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L2&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D3&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/tender-kit.html","<div class='tender-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='tender-line-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='tender-line-middle' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.thirdColor)}'></div>\n<div class='tender-line-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.fourthColor)}'></div>\n<div class='tender-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/timeless-kit.html","<div class='timeless-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='timeless-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='timeless-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict"
;a.put("views/design/kits/unplugged-kit.html","<div class='unplugged-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='unplugged-line-1' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='unplugged-line-2' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='unplugged-line-3' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='unplugged-line-4' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='unplugged-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/upbeat-kit.html","<div class='upbeat-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='upbeat-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='upbeat-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/vintage-kit.html","<div class='vintage-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'>\n<div class='vintage-top-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='vintage-bottom-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='vintage-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/kits/vogue-kit.html","<div class='vogue-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='vogue-small-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='vogue-big-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='vogue-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/editor/tpa-manage-dialog.html","<md-dialog aria-describedby='tpa-manage-dialog' aria-label='tpa-manage-dialog' class='tpa-manage-dialog md-transition-in' ng-class='[{ &#39;-fullscreen&#39;: $ctrl.fullScreen , &#39;-no-header&#39;: !$ctrl.showHeader}, &#39;-type-&#39; + $ctrl.type]' role='dialog' tabindex='-1'>\n<iframe ng-if='$ctrl.fullScreen' ng-src='{{$ctrl.manageUrl | trustUrl}}'></iframe>\n<cc-panel-frame label='{{$ctrl.title}}' ng-if='!$ctrl.fullScreen' on-close='$ctrl.close()' on-help='$ctrl.help()' show-close-button='true' show-header='$ctrl.showHeader' show-help-button='true'>\n<iframe ng-src='{{$ctrl.manageUrl | trustUrl}}'></iframe>\n</cc-panel-frame>\n</md-dialog>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/palette-color-picker.html","<div class='colors-container'>\n<div class='color-wrapper' ng-repeat='selection in $ctrl.colors track by $index'>\n<p21-color-tag color='{{selection.color}}' is-selected='$ctrl.isSelected(selection)' on-click='$ctrl.colorClick(selection)' size='{{$ctrl.colorsSize || &#39;sm&#39;}}'></p21-color-tag>\n</div>\n<div class='color-wrapper' ng-if='$ctrl.showAddColor'>\n<p21-color-tag is-placeholder='true' on-click='$ctrl.placeholderClick()' size='{{$ctrl.colorsSize || &#39;sm&#39;}}' tooltip='design_coloration_add_color'></p21-color-tag>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/palette-color-dialog.html","<md-dialog aria-label='Choose Color dialog' class='colors-dialog' ng-class='[$ctrl.layout, {&#39;has-paragraph&#39;: $ctrl.getParagraph()}]'>\n<div class='dialog-arrow'></div>\n<div class='dialog-inner'>\n<p16-panel-header label='{{::&#39;design.coloration.customize-palette.title&#39; | translate: {colorTypeName: $ctrl.colorTypeName} }}' ng-class='{&#39;show-return-button&#39;: $ctrl.showReturnButton}' on-close='$ctrl.onClose()' on-return='$ctrl.onReturn()' show-close-button='true' show-return-button='$ctrl.showReturnButton'></p16-panel-header>\n<c11-paragraph html='$ctrl.getParagraph()' ng-show='$ctrl.getParagraph()'></c11-paragraph>\n<palette-color-picker colors='$ctrl.colors' data-hook='palette-color-picker' ng-if='!$ctrl.isAdvancedMode()' on-color-selected='$ctrl.colorSelected(selection)' on-placeholder-click='$ctrl.placeholderClick()' selected-color='$ctrl.selectedColor' show-add-color='true'></palette-color-picker>\n<advanced-color-picker data-hook='advanced-color-picker' ng-if='$ctrl.isAdvancedMode()' on-cancel='$ctrl.onClose()' on-color-selected='$ctrl.colorSelected(selection)' selected-color='$ctrl.selectedColor' show-buttons='true'></advanced-color-picker>\n</div>\n</md-dialog>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/design/color-mode-dialog.html","<md-dialog adi-automation='color mode dialog' aria-label='Choose Coloration Mode dialog' class='color-mode-dialog' ng-class='[&#39;top&#39;,&#39;bottom&#39;]'>\n<div class='dialog-arrow'></div>\n<div class='dialog-inner'>\n<p16-panel-header label='{{::&#39;design.coloration.color-mode-selector-new.dialog.title&#39; | translate: {colorTypeName: $ctrl.colorTypeName} }}' ng-class='{&#39;show-return-button&#39;: $ctrl.showReturnButton}' on-close='$ctrl.onClose()' show-close-button='true'></p16-panel-header>\n<c20-graphic-radio-control adi-automation='color mode toggles' help-tool-tip='brightness' label='{{:: &#39;design.coloration.color-mode-selector-new.dialog.mode-title&#39; | translate}}' on-select='$ctrl.onModeChange(item)' radio-items='$ctrl.modes' selected-radio='$ctrl.activeMode' show-help-button='true' size='small'></c20-graphic-radio-control>\n<p17-divider ng-if='$ctrl.isNewColoration'></p17-divider>\n<c20-graphic-radio-control adi-automation='coloration level toggles' help-tool-tip='saturation' label='{{:: &#39;design.coloration.color-mode-selector-new.dialog.coloration-level-title&#39; | translate}}' ng-if='$ctrl.isNewColoration' on-select='$ctrl.onColorationLevelChange(item)' radio-items='$ctrl.levels' selected-radio='$ctrl.activeLevel' show-help-button='true' size='small'></c20-graphic-radio-control>\n</div>\n</md-dialog>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/tester.html","<open-site-loader></open-site-loader>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/logo-color-playground.html","<cc-panel-frame>\n<h2>Logo Color Extraction</h2>\n<p0-spacer></p0-spacer>\n<div ng-repeat='image in $ctrl.listOfLogos' style='background: repeating-linear-gradient(45deg, #EEE, #EEE 5px, #CCC 5px, #CCC 10px); width: 1500px'>\n<img logoonload='$ctrl.calcPalette(image)' ng-src='{{ image.url }}'>\n<div ng-style='{&#39;background-color&#39;:image.palette[0]}' style='padding: 20px; display: inline-block'>\n<img ng-src='{{ image.url }}'>\n</div>\n<p24-palette colors='image.palette'></p24-palette>\n<p0-spacer></p0-spacer>\n</div>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/common/hidden-background.html","<div class='hidden-background c11-paragraph' data-hook='inner' ng-class='{&#39;-with-hide-link&#39;: $ctrl.shouldShowHideLink}' ng-if='$ctrl.showElement'>\n<span class='label' data-hook='label' wix-translate-compile='common.hidden-background.label'></span>\n<span class='hide-media' data-hook='hide-media' ng-if='$ctrl.shouldShowHideLink' wix-translate-compile='common.hidden-background.hide-media'></span>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/assistant-tip.html","<div class='assistant-tip' ng-class='$ctrl.componentClass'>\n<div class='header' ng-if='$ctrl.showTitle'>\n<cc-svg-icon icon='coloration:magic-wand'></cc-svg-icon>\n{{$ctrl.titleText}}\n</div>\n<p17-divider ng-if='$ctrl.showDivider'></p17-divider>\n<div class='message' ng-bind-html='$ctrl.text'></div>\n<div class='action'>\n<button adi-automation='assistant tip button' ng-class='$ctrl.buttonClass' ng-click='$ctrl.onAction()'>\n{{$ctrl.actionText}}\n</button>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/editor/go-to-editor-popup.html","<div class='go-to-editor-popup'>\n<div class='go-to-editor-popup-close'>\n<i class='cc-icon-close-24' data-hook='close-button' ng-click='$ctrl.cancel()'></i>\n</div>\n<div class='go-to-editor-popup-content'>\n<div class='go-to-editor-popup-title' data-hook='title'>\n{{:: 'go-to-editor-popup.title' | translate}}\n</div>\n<div class='go-to-editor-popup-list-editor-features'>\n<div class='go-to-editor-popup-editor-feature'>\n<div class='go-to-editor-popup-editor-feature-circle'></div>\n<div class='go-to-editor-popup-editor-feature-content' data-hook='editor-feature1'>\n{{:: 'go-to-editor-popup.editor-feature1' | translate}}\n</div>\n</div>\n<div class='go-to-editor-popup-editor-feature'>\n<div class='go-to-editor-popup-editor-feature-circle'></div>\n<div class='go-to-editor-popup-editor-feature-content' data-hook='editor-feature2'>\n{{:: 'go-to-editor-popup.editor-feature2' | translate}}\n</div>\n</div>\n<div class='go-to-editor-popup-editor-feature'>\n<div class='go-to-editor-popup-editor-feature-circle'></div>\n<div class='go-to-editor-popup-editor-feature-content' data-hook='editor-feature3'>\n{{:: 'go-to-editor-popup.editor-feature3' | translate}}\n</div>\n</div>\n<div class='go-to-editor-popup-editor-feature'>\n<div class='go-to-editor-popup-editor-feature-circle'></div>\n<div class='go-to-editor-popup-editor-feature-content' data-hook='editor-feature4'>\n{{:: 'go-to-editor-popup.editor-feature4' | translate}}\n</div>\n</div>\n</div>\n<div class='divider-wrapper'>\n<p17-divider></p17-divider>\n</div>\n<div class='go-to-editor-popup-warning' data-hook='warning'>\n<i class='cc-icon-info go-to-editor-popup-warning-icon'></i>\n<div class='go-to-editor-popup-warning-text'>\n{{:: 'go-to-editor-popup.warning' | translate}}\n</div>\n</div>\n<div class='go-to-editor-popup-list-action-buttons'>\n<div class='go-to-editor-popup-action-button-wrapper'>\n<div class='go-to-editor-popup-action-button p9-primary' data-hook='cancel-button' ng-click='$ctrl.cancel()'>\n{{:: 'go-to-editor-popup.cancel' | translate}}\n</div>\n</div>\n<div class='go-to-editor-popup-action-button-wrapper'>\n<div class='go-to-editor-popup-action-button p9a-secondary' data-hook='go-to-editor-button' ng-click='$ctrl.handleGoToEditor()'>\n{{:: 'go-to-editor-popup.go-to-editor' | translate}}\n</div>\n</div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/editor/catalog-styles-dialog.html","<div class='catalog-styles-dialog'>\n<cc-panel-frame label='{{::&#39;editor.catalog-styles.&#39; + $ctrl.catalogType + &#39;.title&#39; | translate}}' on-close='$ctrl.close()' show-close-button='true'>\n<cc-panel-fixed-top>\n<div class='c11-paragraph'>{{::'editor.catalog-styles.' + $ctrl.catalogType + '.description' | translate}}</div>\n</cc-panel-fixed-top>\n<div class='catalog'>\n<div ng-repeat='catalogId in $ctrl.catalogIds track by $index'>\n<div adi-automation='catalog-id-{{:: catalogId}}' class='catalog-item' ng-click='$ctrl.setCatalogItem(catalogId, $index)'>\n<div class='icon-wrapper' ng-if='$ctrl.isActiveCatalogItem(catalogId)'>\n<cc-svg-icon class='-small' data-hook='selected-icon' icon='coloration:selected' is-corner-icon='true'></cc-svg-icon>\n</div>\n<catalog-styles-preview catalog-id='catalogId' catalog-type='$ctrl.catalogType' ng-class='{ last: $index===$ctrl.catalogIds.length-1 }' text='$ctrl.text'></catalog-styles-preview>\n</div>\n</div>\n</div>\n</cc-panel-frame>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/editor/node-editor.html","<div class='node-editor' data-hook='node-editor-wrapper' ng-class='{ &quot;-is-nested-visible&quot;: $ctrl.showNested || $ctrl.showMediaSettings, &quot;-is-subnested-visible&quot;: $ctrl.showNested &amp;&amp; $ctrl.showMediaSettings }' ng-if='::$ctrl.node &amp;&amp; !$ctrl.isTpa()'>\n<single-panel data-hook='single-panel' is-item='false' ng-if='::($ctrl.node &amp;&amp; !$ctrl.isList)' node='$ctrl.node'></single-panel>\n<list-panel data-hook='list-panel' ng-if='::($ctrl.node &amp;&amp; $ctrl.isList)' node='$ctrl.node' on-item-to-page='$ctrl.makeIntoPage()'></list-panel>\n<div class='nested-panel' data-hook='nested-panel' ng-if='$ctrl.showNested'>\n<single-panel child-id='$ctrl.childId' is-item='true' ng-if='$ctrl.isItemEditor' node='$ctrl.editedNode' on-item-to-page='$ctrl.makeIntoPage($ctrl.editedNode)'></single-panel>\n<social-panel edited-node='$ctrl.editedNode' is-item='false' ng-if='$ctrl.isSocialEditor'></social-panel>\n</div>\n</div>\n<div class='node-editor' ng-if='::($ctrl.node &amp;&amp; $ctrl.isTpa())'>\n<tpa-editor node='$ctrl.node'></tpa-editor>\n</div>\n<media-settings-panel change='$ctrl.fullUpdateViewer(event)' class='node-editor' close='$ctrl.hideMediaSettingsEditor()' ng-class='{ &quot;-is-third-panel&quot;: $ctrl.showNested }' ng-if='$ctrl.applicationState.isMediaSettingsActive()' node='$ctrl.editedNode || $ctrl.node'></media-settings-panel>\n<div class='node-editor' ng-if='::($ctrl.node &amp;&amp; $ctrl.isTpa())'>\n<tpa-editor node='$ctrl.node'></tpa-editor>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/editor/single-panel.html","<cc-panel-frame data-hook='panel-frame' label='{{:: $ctrl.title}}' ng-class='{&#39;small-margin&#39;: $ctrl.applicationState.isInMobileEditMode()}' on-close='$ctrl.closeSinglePanel()' on-help='$ctrl.openSinglePanelHelp()' show-close-button='true' show-footer='$ctrl.isItem' show-help-button='true'>\n<name-in-menu-editor adi-automation='show-name' data-hook='name-in-menu-editor' ng-if='::$ctrl.showNameInMenuEditor()' node='$ctrl.node'></name-in-menu-editor>\n<content-element-editor child-id=':: $ctrl.childId' data-hook='ce-editor' is-item=':: $ctrl.isItem' node='$ctrl.node' on-item-to-page='$ctrl.onItemToPage()'></content-element-editor>\n<div class='extra-margin-bottom' ng-if='$ctrl.applicationState.isInMobileEditMode()'></div>\n<cc-panel-footer>\n<c10-item-navigation count='$ctrl.totalItems' current='$ctrl.currentItem' next-tooltip='next_item' previous-tooltip='previous_item'></c10-item-navigation>\n</cc-panel-footer>\n</cc-panel-frame>\n<panel-message class='content-panel-mobile-message panel-icon' ng-if='$ctrl.applicationState.isInMobileEditMode() &amp;&amp; !$ctrl.isNested'>\n<div class='cc-icon-mobile-edit-notice'></div>\n{{::'builder.mobile-panel-edit-notice' | translate}}\n</panel-message>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/editor/list-panel.html","<cc-panel-frame data-hook='panel-frame' label='{{::$ctrl.title}}' ng-class='{&#39;small-margin&#39;: $ctrl.applicationState.isInMobileEditMode()}' on-close='$ctrl.closeListPanel()' on-help='$ctrl.openListPanelHelp()' show-close-button='true' show-help-button='true'>\n<name-in-menu-editor adi-automation='show-name' data-hook='name-in-menu-editor' ng-if='$ctrl.showNameInMenuEditor()' node='$ctrl.node'></name-in-menu-editor>\n<content-element-editor data-hook='list-header' index='0' is-item='false' ng-if='$ctrl.showHeader' node='$ctrl.header' on-any-field-toggle='$ctrl.onAnyFieldToggle()'></content-element-editor>\n<c6-list data-hook='list' disable-list-link='$ctrl.applicationState.isInMobileEditMode()' enable-delete-on-single-item='true' help-tooltip='slideshow-transition-help' item-type='{{$ctrl.applicationState.isInMobileEditMode() ? &#39;p10m&#39; : &#39;&#39;}}' items='$ctrl.listItems' label='{{ ::$ctrl.getListItemsLabel()}}' on-add-new='$ctrl.onAdd()' on-delete='$ctrl.onDelete(item)' on-duplicate='$ctrl.onDuplicate(item)' on-edit='$ctrl.onEdit(item)' on-item-click='$ctrl.onItemClick(item)' on-item-double-click='$ctrl.onItemDoubleClick(item)' on-item-to-page='$ctrl.itemToPage(item)' on-order-change='$ctrl.onOrderChange(event)' on-toggle='$ctrl.onToggle(item)' override-label='::$ctrl.getOverrideLabel()' show-help-button='$ctrl.isShowSlideShowTooltip()' show-new-list-item-design='$ctrl.flags.listItemNewDesign'></c6-list>\n<content-element-editor data-hook='list-footer' index='0' is-item='false' ng-if='$ctrl.showFooter' node='$ctrl.footer' on-any-element-toggle='$ctrl.onAnyFieldToggle()'></content-element-editor>\n<div class='extra-margin-bottom' ng-if='$ctrl.applicationState.isInMobileEditMode()'></div>\n</cc-panel-frame>\n<panel-message class='content-panel-mobile-message panel-icon' ng-if='$ctrl.applicationState.isInMobileEditMode()'>\n<div class='cc-icon-mobile-edit-notice'></div>\n{{::'builder.mobile-panel-edit-notice' | translate}}\n</panel-message>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/editor/content-element-editor.html","<div class='content-element-editor' ng-mouseleave='$ctrl.resetLastHoveredField()'>\n<field-editor child-id=':: $ctrl.childId' data-click-arg='$ctrl.clickArg' data-highlight-arg='$ctrl.highlightArg' data-hook='editor-field' field-editor-focus field='field' ng-attr-node-id='{{:: $ctrl.nodeId}}' ng-click='$ctrl.onClicked(field)' ng-mouseenter='$ctrl.onMouseEnter(field)' ng-repeat='field in $ctrl.fields' node='$ctrl.node' on-field-toggle='$ctrl.onFieldToggle(field)' on-value-change='$ctrl.temporaryHighlight(field)' toggle-disabled='field.lastActiveField'></field-editor>\n<div class='p9b-text-button cc-control-padding' ng-click='$ctrl.onItemToPage($ctrl.node);' ng-if='$ctrl.onItemToPage &amp;&amp; $ctrl.isItem &amp;&amp; !$ctrl.isInMobileEditMode()'>{{::'builder.page-from-item' | translate}}</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/editor/field-editor.html","<div class='field-wrapper' field-title='{{::$ctrl.fieldTitle}}' ng-class='{&#39;highlight&#39;: $ctrl.isHighlighted, &#39;blink&#39;: $ctrl.blink}'>\n<c2-text-input active='$ctrl.field.active' adi-automation='{{::$ctrl.getAutomationLabel()}}' autocomplete-media='::$ctrl.isMediaAutocomplete' autocomplete='::$ctrl.field.suggestedContent' change-value-on-blur='true' data-hook='field-text-input' debounce-delay='::$ctrl.debounceDelay' disable-toggle='$ctrl.toggleDisabled' focused='$ctrl.field.focused' force-toggle='true' help-tooltip='{{::$ctrl.fieldData.helpTooltip}}' is-disabled='$ctrl.isInMobileEditMode' label='{{::$ctrl.fieldTitle}}' mobile='$ctrl.isInMobileEditMode' ng-if='::$ctrl.fieldEditorConfiguration.isTextInput($ctrl.fieldData)' on-change-value='$ctrl.onChange(value)' on-toggle='$ctrl.onMaskChange(visibility)' on-tooltip-link-click='$ctrl.goToDesktopContentPanel()' value-tooltip='{{::$ctrl.isInMobileEditMode ? &#39;mobile_text_field_disabled&#39; : null }}' value='$ctrl.textInputValue'></c2-text-input>\n<c2-text-input active='$ctrl.field.active' adi-automation='{{::$ctrl.getAutomationLabel()}}' change-value-on-blur='true' data-hook='field-long-text-input' debounce-delay='::$ctrl.debounceDelay' disable-toggle='$ctrl.toggleDisabled' focused='$ctrl.field.focused' help-tooltip='{{::$ctrl.fieldData.helpTooltip}}' is-disabled='$ctrl.isInMobileEditMode' label='{{::$ctrl.fieldTitle}}' long='true' ng-if='::$ctrl.fieldEditorConfiguration.isLongTextInput($ctrl.fieldData)' on-change-value='$ctrl.onChange(value)' on-toggle='$ctrl.onMaskChange(visibility)' value='$ctrl.fieldData.value'></c2-text-input>\n<c23-rich-text-input active='$ctrl.field.active' adi-automation='{{::$ctrl.getAutomationLabel()}}' change-value-on-blur='true' data-hook='field-rich-text-input' debounce-delay='::$ctrl.debounceDelay' default-formatting='$ctrl.designKitFormatting' disable-toggle='$ctrl.toggleDisabled' displayed-r-t-t-sections='::$ctrl.displayedRTTSections' focus-on-init='true' focused='$ctrl.field.focused' is-disabled='$ctrl.isInMobileEditMode' is-empty-value='$ctrl.isEmptyValue(value)' label='{{::$ctrl.fieldTitle}}' links-manager='$ctrl.richTextLinksManager' max-rows-on-blur='::$ctrl.maxRowsOnBlur' ng-if='::$ctrl.fieldEditorConfiguration.isRichTextInput($ctrl.fieldData)' on-change-value='$ctrl.onChange(value, true)' on-link-command='$ctrl.onRichTextLinkCommand(linkId)' on-run-command='$ctrl.onRichTextCommand(command, state)' on-toggle='$ctrl.onMaskChange(visibility)' styles-manager='$ctrl.richTextStylesManager' value='$ctrl.richTextValue'></c23-rich-text-input>\n<cc-button-editor active='$ctrl.field.active' adi-automation='{{::$ctrl.getAutomationLabel()}}' data-hook='field-button' debounce-delay='::$ctrl.debounceDelay' disable-toggle='$ctrl.toggleDisabled' focused='$ctrl.field.focused' label='{{::$ctrl.fieldTitle}}' link='$ctrl.field.data.linkAsILink' ng-if='::$ctrl.fieldEditorConfiguration.isButtonInput($ctrl.fieldData)' on-edit-link='$ctrl.onLinkItemEdit()' on-text-change='$ctrl.onChange(value)' on-toggle='$ctrl.onMaskChange(visibility)' text='$ctrl.fieldData.value.callToAction'></cc-button-editor>\n<media-editor active='$ctrl.field.active' adi-automation='{{::$ctrl.getAutomationLabel()}}' content-element='$ctrl.field.contentElement' data-hook='media-editor' field='$ctrl.field' media-tooltip='{{$ctrl.isInMobileEditMode ? &quot;mobile_media_edit_disabled&quot; : null}}' media='$ctrl.fieldData.value' ng-if='::$ctrl.fieldEditorConfiguration.isMedia($ctrl.fieldData)' node='$ctrl.node' on-media-change='$ctrl.onChange(value, richText, whatChanged)' on-toggle='$ctrl.onMaskChange(visibility)' on-tooltip-link-click='$ctrl.goToDesktopContentPanel()' toggle-disabled='$ctrl.toggleDisabled'></media-editor>\n<c8b-label-graphic active='$ctrl.field.active' adi-automation='{{::$ctrl.getAutomationLabel()}}' data-hook='social-buttons' disable-toggle='$ctrl.toggleDisabled' help-tooltip='{{::$ctrl.fieldData.helpTooltip}}' item-validator='$ctrl.socialLinksValidator.validateSocialLink(item)' items='$ctrl.socialItems' label='{{::&#39;builder.field-editor.social-title&#39; | translate }}' ng-if='::$ctrl.fieldEditorConfiguration.isSocialInput($ctrl.fieldData)' on-item-click='$ctrl.onSocialItemClick()' on-toggle='$ctrl.onMaskChange(visibility)' paragraph='::$ctrl.socialButtonsParagraph()' show-validation='true' validation-tooltip='social_validation'></c8b-label-graphic>\n<c19-toggle adi-automation='{{::$ctrl.getAutomationLabel()}}' data-hook='field-toggle' disable-toggle='$ctrl.toggleDisabled' help-tooltip='{{::$ctrl.fieldData.helpTooltip}}' label='{{::$ctrl.fieldTitle}}' ng-if='::$ctrl.fieldEditorConfiguration.isBoolean($ctrl.fieldData)' on-value-change='$ctrl.onMaskChange(value)' type='{{::$ctrl.fieldEditorConfiguration.isCheckbox($ctrl.fieldData) ? ($ctrl.isInMobileEditMode ? &#39;c19m&#39; : &#39;c19b&#39;) : &#39;c19a&#39; }}' value='$ctrl.field.active'></c19-toggle>\n<button adi-automation='{{::$ctrl.getAutomationLabel()}}' class='field-editor-text-manager-link' ng-click='$ctrl.openTextManager()' ng-if='::$ctrl.isTextField() &amp;&amp; $ctrl.isTextManagerEnabled()' ng-show='$ctrl.field.active'>\n<span class='field-edit-text-manager-link-icon cc-icon-move-to'></span>\n<span class='field-edit-text-manager-link-text'>\n{{:: 'text-manager.field-editor.link' | translate}}\n</span>\n</button>\n<div class='error c11-paragraph' data-hook='email-invalid-error' ng-if='$ctrl.field.active &amp;&amp; !$ctrl.isValid &amp;&amp; !!$ctrl.errorMessage'>{{ $ctrl.errorMessage }}</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/editor/media-editor.html","<c4-media-preview active='$ctrl.active' current-tab='$ctrl.currentTab' data-hook='media-preview' disable-media-change-button='$ctrl.disableMediaChangeButton' disable-toggle='$ctrl.isToggleDisabled()' dont-crop-toggle-text='{{::&#39;editor.media-settings.ms-options.uncropped&#39; | translate}}' dont-crop='$ctrl.imageFitMode' image-crop='$ctrl.isImageCropEnabled' label='{{ $ctrl.label }}' media-tooltip='{{$ctrl.mediaTooltip}}' media='$ctrl.media' ng-if='!$ctrl.showNewMediaControl()' on-change-gallery='$ctrl.changeGallery()' on-crop='$ctrl.openCropper()' on-dont-crop-change='$ctrl.onDontCropChange(value)' on-info='!$ctrl.disableMediaChangeButton &amp;&amp; $ctrl.openSettingsPanel()' on-media-change='$ctrl.mediaChange(mediaType)' on-media-type-change='$ctrl.mediaTypeChange(mediaType)' on-toggle='$ctrl.toggle(visibility)' on-tooltip-link-click='$ctrl.onTooltipLinkClick()' show-dont-crop='$ctrl.flags.imageFitMode &amp;&amp; !$ctrl.applicationState.isInMobileEditMode() &amp;&amp; !$ctrl.node.isListHeader()' tab-labels='$ctrl.tabLabels' type='{{::$ctrl.isInMobileEditMode ? &#39;c4m&#39; : &#39;c4&#39; }}' visible-tabs='$ctrl.visibleMediaTypes'></c4-media-preview>\n<c3-dropdown-list data-hook='aligment-dropdown' disable-toggle='true' items='$ctrl.imageAlignmentOptions' label-key='label' label='{{::&#39;builder.media-editor.image-position.title&#39; | translate}}' ng-if='!$ctrl.flags.imagePositionsAsRectangles &amp;&amp; $ctrl.canChangeAlignment() &amp;&amp; !$ctrl.showNewMediaControl()' on-selection-change='$ctrl.onAlignmentChange(item)' track-by-key='value' value='$ctrl.selectedImageAlignment'></c3-dropdown-list>\n<c24-media-preview active='$ctrl.active' current-media='$ctrl.currentMedia' current-tab='$ctrl.currentTab' customize-button-text='{{::&#39;builder.media-editor.edit-replace-button&#39; | translate}}' data-hook='new-media-preview' disable-media-change-button='$ctrl.disableMediaChangeButton' disable-toggle='$ctrl.isToggleDisabled()' label='{{::$ctrl.label}}' ng-if='$ctrl.showNewMediaControl()' on-change-gallery='$ctrl.changeGallery()' on-customize='$ctrl.onReplace()' on-media-change='$ctrl.mediaChange(mediaType)' on-toggle='$ctrl.toggle(visibility)' replace-button-text='{{::&#39;general.replace&#39; | translate}}' show-customize='true' show-header='true' show-tabs='false'></c24-media-preview>\n<image-positions-control label-title='builder.section-background.background-settings.image.title' ng-if='$ctrl.flags.imagePositionsAsRectangles &amp;&amp; $ctrl.canChangeAlignment() &amp;&amp; !$ctrl.flags.sectionMedia' on-alignment-changed='$ctrl.onAlignmentChange({value})' selected-position-image='{{$ctrl.selectedPositionImage}}' selected-position-index='{{$ctrl.selectedPositionIndex}}' selected-position-name='{{&#39;builder.section-background.background-settings.image.position.&#39; + $ctrl.selectedPositionName | translate}}'></image-positions-control>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/editor/link-editor-panel.html","<cc-panel-frame class='link-editor-panel' data-hook='link-details' label='{{::&#39;link-details.dialog.header&#39; | translate}}' on-close='$ctrl.close()' on-help='$ctrl.help()' show-close-button='true' show-help-button='true'>\n<link-details-holder>\n<div class='cc-link-details-divider'></div>\n<link-details is-valid='$ctrl.isValid' node='$ctrl.node' value='$ctrl.linkDetails'></link-details>\n<div class='cc-link-details-divider'></div>\n<div class='ld-actions-row'>\n<button adi-automation='{{::&#39;link-details.dialog.cancel&#39; | translate}}' class='p9b-text-button -medium' data-hook='link-editor-cancel' ng-click='$ctrl.close()'>\n{{::'link-details.dialog.cancel' | translate}}\n</button>\n<button adi-automation='{{::&#39;link-details.dialog.ok&#39; | translate}}' class='ld-accept p9-primary -medium' data-hook='link-editor-done' ng-class='{&#39;-disabled&#39;: !$ctrl.isValid }' ng-click='$ctrl.save()' ng-disabled='!$ctrl.isValid'>\n<span class='cc-x-height'>\n{{::'link-details.dialog.ok' | translate}}\n</span>\n</button>\n</div>\n</link-details-holder>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){
angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/editor/link-details.html","<div class='ld-wrapper'>\n<div class='ld-left-panel'>\n<div class='cc-link-details-left-container'>\n<p13-radio-buttons data-hook='link-type-radio' items='$ctrl.linkOptions' on-value-change='$ctrl.currentLinkType=value;$ctrl.onLinkOptionChanged();' value='$ctrl.currentLinkType'></p13-radio-buttons>\n</div>\n</div>\n<p17-vertical-divider></p17-vertical-divider>\n<div class='ld-right-panel'>\n<div class='details'>\n<div class='none' data-hook='none-section' ng-if='$ctrl.isOptionNone'>\n<div class='none-placeholder'></div>\n<div class='none-text'>{{::'link-details.none.text' | translate}}</div>\n</div>\n<div class='page' data-hook='page-section' ng-if='$ctrl.isOptionPage'>\n<div ng-if='$ctrl.pages.length &gt; 1'>\n<c3-dropdown-list data-hook='pages-dropdown' disable-toggle='true' items='$ctrl.pages' label-key='displayName' label='{{::&quot;link-details.page.select-page.text&quot; | translate}}' on-selection-change='$ctrl.onPageSelectionChanged(item)' track-by-key='id' value='$ctrl.currentPage'></c3-dropdown-list>\n</div>\n<c3-dropdown-list data-hook='anchors-dropdown' disable-toggle='true' items='$ctrl.anchors' label-key='alias' label='{{::&quot;link-details.page.select-anchor.text&quot; | translate}}' on-selection-change='$ctrl.onAnchorSelectionChanged(item)' track-by-key='$$hashKey' value='$ctrl.currentAnchor'></c3-dropdown-list>\n</div>\n<div class='web' data-hook='web-section' ng-if='$ctrl.isOptionWeb'>\n<c2-text-input data-hook='web-text-input' disable-toggle='true' is-disabled='false' label='{{::&quot;link-details.web.text&quot; | translate}}' on-change-value='$ctrl.draft.targetUrl=value;$ctrl.validate()' placeholder='::&quot;link-details.web.placeholder&quot; | translate' value='$ctrl.draft.targetUrl'></c2-text-input>\n<div class='validation-message' ng-if='!$ctrl.isValid'>{{::'link-details.web.error' |  translate}}</div>\n</div>\n<div class='document' data-hook='document-section' ng-if='$ctrl.isOptionDocument'>\n<link-details-document file='$ctrl.draft.file' on-file-change='$ctrl.onFileChange(result)'></link-details-document>\n</div>\n<div class='email' data-hook='email-section' ng-if='$ctrl.isOptionEmail'>\n<c2-text-input data-hook='email-text-input' disable-toggle='true' is-disabled='false' label='{{::&quot;link-details.email.text&quot; | translate}}' on-change-value='$ctrl.draft.targetEmail=value;$ctrl.validate()' placeholder='::&quot;link-details.email.placeholder&quot; | translate' value='$ctrl.draft.targetEmail'></c2-text-input>\n<div class='validation-message' ng-if='!$ctrl.isValid'>{{::'link-details.email.error' |  translate}}</div>\n</div>\n<div class='phone' data-hook='phone-section' ng-if='$ctrl.isOptionPhone'>\n<c2-text-input data-hook='phone-text-input' disable-toggle='true' is-disabled='false' label='{{::&quot;link-details.phone.text&quot; | translate }}' placeholder='::&quot;link-details.phone.placeholder&quot; | translate' value='$ctrl.draft.targetPhone'></c2-text-input>\n<div class='validation-message' ng-if='!$ctrl.isValid'>{{::'link-details.phone.error' |  translate}}</div>\n</div>\n<span class='info-text' ng-if='$ctrl.isOptionPhone'>\n<c11-paragraph class='info-text' html='::&quot;link-details.phone.help.text&quot; | translate'></c11-paragraph>\n<button class='p9b-text-button -small' ng-click='$ctrl.openPhoneHelp()'>{{::'link-details.phone.help.cta' | translate}}</button>\n</span>\n<div class='paypal' data-hook='paypal-section' ng-if='$ctrl.isOptionPaypal'>\n<link-details-paypal link='$ctrl.draft.paypal'></link-details-paypal>\n</div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/editor/link-details-document.html","<div class='link-details-document-inner'>\n<div class='no-file' data-hook='no-file-section' ng-if='!$ctrl.hasFile'>\n<div class='document-placeholder'></div>\n</div>\n<div class='replace-file-section' data-hook='replace-file-section' ng-if='$ctrl.hasFile'>\n<div class='p8-label'>{{::'link-details.document.text' | translate}}</div>\n<div class='file-name-label' data-hook='file-name-label' ng-bind='$ctrl.draft.name'></div>\n</div>\n<div class='open-file-button-wrapper' ng-class='{&#39;has-file&#39;: $ctrl.hasFile}'>\n<button class='p9a-secondary -medium cc-x-height' data-hook='open-file-button' ng-click='$ctrl.openFileDialog()'>\n<div class='cc-x-height'>{{:: $ctrl.file ? 'link-details.document.replace-file.button' : 'link-details.document.select-file.button' | translate}}</div>\n</button>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/editor/tpa-editor.html","<iframe frameborder='0' ng-src='{{$ctrl.iFrameUrl | trustUrl}}' scrolling='no'></iframe>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/editor/media-settings/media-size-dropdown.html","<c3-dropdown-list automation='{{$ctrl.automation}}' button-text='$ctrl.mediaSizeButtonText' button-tooltip='$ctrl.mediaSizeButtonTooltip' data-hook='media-size-dropdown-list' disable-toggle='true' dont-open-for-one='true' items='$ctrl.mediaSizeItems' label-key='label' label='{{:: &#39;editor.media-settings.media-size.label&#39; | translate}}' ng-if='$ctrl.mediaSizeItems.length &gt; 0' no-hover='$ctrl.hasSingleOption()' on-button-click='$ctrl.onMediaSizeButtonClick()' on-selection-change='$ctrl.onMediaSizeChanged(item)' show-button='$ctrl.showMediaSizeButton' value='$ctrl.selectedMediaSize'></c3-dropdown-list>\n<c11-paragraph class='c11-paragraph' compile=':: &#39;editor.media-settings.for-more-layouts&#39; | translate' data-hook='paragraph' ng-if='$ctrl.hasSingleOption()'></c11-paragraph>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/editor/media-settings/media-settings-panel.html","<cc-panel-frame class='-with-p16a-header -with-corners' label='{{:: &#39;editor.media-settings.title&#39; | translate}}' on-close='$ctrl.closePanel()' on-help='$ctrl.onHelp()' on-return='$ctrl.goToPrevState()' show-close-button='true' show-help-button='true' show-return-button='true'>\n<media-chooser data-hook='media-chooser' media-size='$ctrl.currentMediaSize' ng-if='$ctrl.node' node='$ctrl.node' on-media-change='$ctrl.onMediaChange()' on-media-type-change='$ctrl.onMediaTypeChange(mediaType)'></media-chooser>\n<media-size-dropdown adi-automation='media-size-dropdown-container' automation='media-size' class='media-size-dropdown' data-hook='media-size-dropdown' media-type='$ctrl.currentMediaType' ng-if='$ctrl.node &amp;&amp; $ctrl.showMediaSize()' node='$ctrl.node' on-button-click='$ctrl.onMediaSizeAction(mediaSize)' on-media-size-change='$ctrl.onMediaSizeChange(mediaSize)'></media-size-dropdown>\n<image-settings data-hook='image-settings' media-value='$ctrl.activeMedia' ng-if='$ctrl.showImageSettings()' node='$ctrl.node' show-description='$ctrl.isImageType()'></image-settings>\n<ext-video-settings data-hook='ext-video-settings' media-value='$ctrl.activeMedia' ng-if='$ctrl.showVideoSettings()'></ext-video-settings>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/editor/media-settings/media-position-panel.html","<c26-image-position body='{{:: &#39;builder.section-background.background-settings.image.body&#39; | translate }}' header-title='{{:: &#39;builder.section-background.background-settings.image.lower-title&#39; | translate }}' on-close='$ctrl.onClose()' on-position-clicked='$ctrl.onSelectedPositionClick(index)' rectangles-count-each-row='3' rectangles-count='9' selected-rectangle='{{$ctrl.selectedPosition}}'></c26-image-position>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/editor/media-settings/ext-video-settings.html","<div class='ext-video-settings'>\n<c2-text-input adi-automation='media-settings-video-url' change-value-on-blur='true' data-hook='settings-media-url' disable-toggle='true' label='{{:: &#39;editor.media-settings.ext-video.video-url.label&#39; | translate}}' on-blur='$ctrl.changeVideoUrl(value, true)' on-change-value='$ctrl.changeVideoUrl(value)' placeholder='&#39;editor.media-settings.ext-video.video-url.placeholder&#39; | translate' value='$ctrl.mediaValue.videoUrl'></c2-text-input>\n<c19-toggle adi-automation='media-settings-autoplay' label='{{:: &#39;editor.media-settings.ext-video.autoplay.label&#39; | translate }}' on-value-change='$ctrl.handleVideoSettingsChanged(value)' type='c19a' value='$ctrl.mediaValue.playmode.autoplay'></c19-toggle>\n<c19-toggle adi-automation='media-settings-play-in-loop' label='{{:: &#39;editor.media-settings.ext-video.loop.label&#39; | translate }}' on-value-change='$ctrl.handleVideoSettingsChanged(value)' type='c19a' value='$ctrl.mediaValue.playmode.loop'></c19-toggle>\n<c3-dropdown-list automation='media-settings-video-controls' disable-toggle='true' items='$ctrl.videoControlOptions' label-key='label' label='{{:: &#39;editor.media-settings.ext-video.controls.label&#39; | translate }}' on-selection-change='$ctrl.changeVideoControlOption(item)' track-by-key='id' value='$ctrl.selectedVideoControlOption'></c3-dropdown-list>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/editor/media-settings/image-settings.html","<div class='image-settings'>\n<c2-text-input adi-automation='image-settings-title' change-value-on-blur='true' class='is-image-panel' data-hook='settings-media-title' debounce-delay='1000' disable-toggle='true' label='{{:: &#39;editor.media-settings.title-label&#39; | translate}}' on-change-value='$ctrl.onChangeMediaTitle(value)' placeholder=':: &#39;editor.media-settings.title-placeholder&#39; | translate' value='$ctrl.mediaValue.Title'></c2-text-input>\n<c2-text-input adi-automation='image-settings-description' change-value-on-blur='true' data-hook='settings-media-description' debounce-delay='1000' disable-toggle='true' label='{{:: &#39;editor.media-settings.description-label&#39; | translate}}' long='true' ng-if='$ctrl.showDescription' on-change-value='$ctrl.onChangeMediaDescription(value)' placeholder=':: &#39;editor.media-settings.description-placeholder&#39; | translate' value='$ctrl.mediaValue.Description'></c2-text-input>\n<c5-link-input adi-automation='image-settings-link' data-hook='settings-media-link' disable-toggle='true' label='{{:: &#39;editor.media-settings.link-label&#39; | translate}}' link='$ctrl.linkAsILink' on-edit-link='$ctrl.changeLink()'></c5-link-input>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/editor/media-settings/media-chooser.html","<div class='media-chooser'>\n<c24-media-preview active='true' color-button-text='{{:: &#39;editor.media-settings.gallery.change-color&#39; | translate}}' current-media='$ctrl.media' current-tab='$ctrl.currentMediaType' data-hook='media-preview' disable-media-change-button='$ctrl.disableMediaChangeButton' label='{{:: &#39;editor.media-settings.media-type&#39; | translate}}' on-color-click='$ctrl.onColorClick()' on-customize='$ctrl.onCustomize()' on-media-change='$ctrl.onReplaceClick(mediaType)' on-media-type-change='$ctrl.onMediaTypeChanged(mediaType)' organize-media-button-text='{{:: &#39;editor.media-settings.gallery.organize-media&#39; | translate}}' replace-button-text='{{::&#39;general.replace&#39; | translate}}' show-header='false' show-tabs='true' size='big' tab-labels='$ctrl.tabLabels' visible-tabs='$ctrl.visibleMediaTypes'></c24-media-preview>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/assistant/assistant-menu-new.html","<div class='assistant-menu-new' data-hook='assistant-menu'>\n<div class='assistant-menu-new-header-container'>\n<assistant-menu-header on-close='$ctrl.close()'></assistant-menu-header>\n</div>\n<div cc-scrollbar class='assistant-menu-new-bucket-list-container' ng-if='!$ctrl.smartAssistFlag'>\n<assistant-menu-bucket-list data-hook='assistant-menu-new-bucket-list'></assistant-menu-bucket-list>\n</div>\n<div class='assistant-menu-new-tab-list-container' ng-if='$ctrl.smartAssistFlag'>\n<assistant-tab-list></assistant-tab-list>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/assistant/assistant-menu-header.html","<div class='assistant-menu-header'>\n<div class='assistant-menu-header-close-btn'>\n<i adi-automation='assistant-close-menu' class='cc-icon-close-10' data-hook='assistant-menu-header-close-btn' ng-click='$ctrl.close()'></i>\n</div>\n<div class='assistant-menu-header-content'>\n<div class='assistant-menu-header-title' data-hook='assistant-menu-header-title'>\n{{:: $ctrl.getTitleTranslationKey() | translate}}\n</div>\n<div class='assistant-menu-header-description' data-hook='assistant-menu-header-description' ng-if='!$ctrl.smartAssistFlag' wix-translate-compile='{{:: $ctrl.getDescription()}}'></div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/assistant/assistant-menu-bucket-list.html","<div class='assistant-menu-bucket-container' data-active-bucket='{{!bucket.collapse}}' ng-repeat='bucket in $ctrl.bucketList track by bucket.id'>\n<assistant-menu-bucket adi-automation='assistant-bucket-{{::bucket.id}}' description='bucket.description' icon-class='bucket.iconClass' is-collapsed='bucket.collapse' is-locked='bucket.lock' is-skip-expand-animation='bucket.isSkipExpandAnimation' name='bucket.name' on-bucket-complete-by-skip='$ctrl.bucketCompleteBySkip(bucket)' on-header-click='$ctrl.bucketHeaderClicked(bucket)' on-last-task-completed-animation-end='$ctrl.onLastTaskCompletedAnimationEnd(bucket)' task-ids='bucket.taskIds'></assistant-menu-bucket>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/assistant/assistant-menu-bucket.html","<div adi-automation='assistant-bucket-is-collapsed-{{$ctrl.isCollapsed}}' class='assistant-bucket' ng-class='{&#39;assistant-bucket-locked&#39;: $ctrl.isLocked, &#39;assistant-bucket-collapsed&#39;: $ctrl.isCollapsed, &#39;assistant-bucket-collapse-state-animation&#39;: $ctrl.animatingCollapseState}'>\n<div class='assistant-bucket-header'>\n<div adi-automation='assistant-bucket-header' class='assistant-bucket-header-click-area-mask' data-hook='assistant-menu-bucket-header' ng-click='$ctrl.headerClick()'></div>\n<div class='assistant-bucket-icon-container'>\n<div class='assistant-bucket-icon' data-hook='assistant-menu-bucket-icon' ng-class='$ctrl.iconClass'></div>\n</div>\n<div class='assistant-bucket-hover-icon-container'>\n<div class='assistant-bucket-hover-icon-rotation-container'>\n<div class='assistant-bucket-hover-icon cc-icon-assistant-bucket-arrow'></div>\n</div>\n</div>\n<div class='assistant-bucket-name' data-hook='assistant-menu-bucket-name'>\n{{$ctrl.name}}\n</div>\n</div>\n<collapse-expand class='assistant-bucket-content' name='$ctrl.name' ng-if='!$ctrl.isLocked &amp;&amp; !$ctrl.isCollapsed' skip-expand-animation='$ctrl.isSkipExpandAnimation'>\n<div class='assistant-bucket-description' data-hook='assistant-menu-bucket-description'>\n{{$ctrl.description}}\n</div>\n<div class='assistant-bucket-task-list-container'>\n<assistant-menu-task-list on-last-task-completed-animation-end='$ctrl.onLastTaskCompletedAnimationEnd()' on-task-skip='$ctrl.onTaskSkip(taskId)' task-ids='$ctrl.taskIds'></assistant-menu-task-list>\n</div>\n</collapse-expand>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/assistant/assistant-menu-task-list.html","<div class='assistant-menu-task-container' ng-repeat='task in $ctrl.taskList track by task.id'>\n<assistant-menu-task adi-automation='assistant-task-{{::task.id}}' is-animate-task-completed='task.isAnimateTaskCompleted' is-animate-task-unlocked='task.isAnimateTaskUnlocked' is-completed='task.isCompleted' is-locked='task.isLocked' name='task.name' on-execute='$ctrl.startTask(task.id)' on-skip='$ctrl.skipTask(task.id)' on-task-completed-animation-end='task.onTaskCompletedAnimationEnd()'></assistant-menu-task>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/assistant/assistant-menu-task.html","<div class='assistant-menu-task' ng-class='{&#39;assistant-menu-task-task-completed&#39;: $ctrl.isCompleted, &#39;assistant-menu-task-task-locked&#39;: $ctrl.isLocked, &#39;assistant-menu-task-complete-animation&#39;: $ctrl.isAnimateTaskCompleted, &#39;assistant-menu-task-unlock-animation&#39;: $ctrl.isAnimateTaskUnlocked}'>\n<div adi-automation='assistant-task-definition' class='assistant-menu-task-definition' data-hook='assistant-menu-task-section' ng-click='!$ctrl.isLocked ? $ctrl.onExecute() : undefined'>\n<div class='assistant-menu-task-icon-container'>\n<div class='assistant-menu-task-icon-border-mask'></div>\n<div class='assistant-menu-task-icon-content'>\n<div class='cc-icon-assistant-bucket-play'></div>\n</div>\n</div>\n<div class='assistant-menu-task-name' data-hook='assistant-menu-task-name'>\n{{$ctrl.name}}\n</div>\n<div class='assistant-menu-task-done-section'>\n<div class='cc-icon-check'></div>\n<div class='assistant-menu-task-done-text' data-hook='assistant-menu-task-done-text'>\n{{::'assistant-menu-task.done' | translate}}\n</div>\n</div>\n</div>\n<div class='assistant-menu-task-skip-button-section' data-hook='assistant-menu-task-skip-button' ng-click='$ctrl.skip()' ng-if='$ctrl.isShowSkipSection'>\n<div adi-automation='assistant-task-skip-button' class='assistant-menu-task-skip-button' data-hook='assistant-menu-task-skip-text'>\n{{::'assistant-menu-task.skip' | translate}}\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/assistant/assistant-video.html","<div class='assistant-video-container' ng-if='$ctrl.assistantVideoService.isShowVideo()'>\n<div class='assistant-video'>\n<i adi-automation='close-video' class='cc-aux-btn cc-icon-circle cc-icon-close-10 close-assistant-video' ng-click='$ctrl.assistantVideoService.close()'></i>\n<iframe allowfullscreen frameborder='0' ng-src='{{ $ctrl.assistantVideoService.getAssistantVideoUrl() | trustUrl }}'></iframe>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/assistant/assistant-tab-list.html","<div class='assistant-tab-list'>\n<div class='assistant-tab-header-list'>\n<div adi-automation='assistant-bucket-list-tab-header' class='assistant-tab-header' data-hook='assistant-bucket-list-tab-header' ng-class='{&#39;assistant-tab-header-selected selected&#39;: $ctrl.bucketListTabSelected}' ng-click='$ctrl.bucketListTabClick()'>\n{{:: 'assistant-tab-list.bucket-list-tab-header' | translate }}\n</div>\n<div adi-automation='assistant-smart-assist-tab-header' class='assistant-tab-header assistant-smart-assist-tab-header' data-hook='assistant-smart-assist-tab-header' ng-class='{&#39;assistant-tab-header-selected selected&#39;: $ctrl.smartAssistTabSelected}' ng-click='$ctrl.smartAssistTabClick()'>\n<span class='smart-assist-tab-label' data-hook='assistant-smart-assist-tab-header-label'>{{:: 'assistant-tab-list.smart-assist-tab-header' | translate }}</span>\n<smart-assist-badge></smart-assist-badge>\n</div>\n</div>\n<div cc-scrollbar class='assistant-tab-content'>\n<div class='assistant-bucket-list-tab-container' ng-if='$ctrl.bucketListTabSelected'>\n<assistant-bucket-list-tab></assistant-bucket-list-tab>\n</div>\n<smart-assist-tab go-to-assistant-bucket='$ctrl.emptyStateButtonClick()' ng-if='$ctrl.smartAssistTabSelected'></smart-assist-tab>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/assistant/assistant-bucket-list-tab.html","<div class='assistant-bucket-list-tab'>\n<div class='assistant-bucket-list-tab-header' data-hook='assistant-bucket-list-tab-header' wix-translate-compile='{{:: &#39;assistant-menu.assistant-video-description-smartAssist&#39;}}'></div>\n<div class='assistant-bucket-list-tab-content'>\n<assistant-menu-bucket-list></assistant-menu-bucket-list>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/assistant/smart-assist-tab.html","<div adi-automation='smart-assist-tab' class='smart-assist-tab'>\n<div class='smart-assist-tab-conainer'>\n<smart-assist-empty-state data-hook='smart-assist-empty-state' go-to-assistant-bucket='$ctrl.goToAssistantBucket()' ng-if='$ctrl.displayEmptyState'></smart-assist-empty-state>\n<div class='smart-assist-issue-list' ng-if='!$ctrl.displayEmptyState'>\n<div class='smart-assist-divider-general-container' ng-if='$ctrl.generalIssuesExist'>\n<div class='smart-assist-divider-general' data-hook='smart-assist-divider-general'>\n{{::'smart-assist.dividers.general' | translate }}\n</div>\n<collapse-expand class='smart-assist-issue-container' ng-if='!$ctrl.isMuted(issue)' ng-repeat='issue in $ctrl.generalDividerList track by issue.id' skip-expand-animation='true'>\n<smart-assist-issue adi-automation='issue-container-general' data-hook='smart-assist-issue-{{:: issue.id}}' icon='issue.icon' on-fix='issue.fix()' on-mute='$ctrl.onMuteIssue(issue)' text='issue.text'></smart-assist-issue>\n</collapse-expand>\n</div>\n<div ng-if='$ctrl.pageRelatedIssuesExist'>\n<div class='smart-assist-divider-page' data-hook='smart-assist-divider-page' ng-if='!$ctrl.allPageIssuesAreComplete(pageDivider)' ng-repeat='pageDivider in $ctrl.pageDividerList track by pageDivider.pageId'>\n{{:: 'smart-assist.dividers.page' | translate: {pageName: pageDivider.pageName} }}\n<div class='smart-assist-divider-section' data-hook='smart-assist-divider-section' ng-if='!$ctrl.allSectionIssuesAreComplete(sectionDivider)' ng-repeat='sectionDivider in pageDivider.sections track by sectionDivider.sectionPosition' skip-expand-animation='true'>\n{{:: 'smart-assist.dividers.section' | translate: {sectionName: sectionDivider.sectionName} }}\n<collapse-expand class='smart-assist-issue-container' ng-if='!$ctrl.isMuted(issue)' ng-repeat='issue in sectionDivider.issues track by issue.id' skip-expand-animation='true'>\n<smart-assist-issue adi-automation='issue-container-{{:: pageDivider.pageName}}-{{:: sectionDivider.sectionName}}' data-hook='smart-assist-issue-{{:: issue.id}}' icon='issue.icon' on-fix='issue.fix()' on-mute='$ctrl.onMuteIssue(issue)' text='issue.text'></smart-assist-issue>\n</collapse-expand>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/assistant/smart-assist-badge.html","<div adi-automation='smart-assist-badge' class='smart-assist-badge' data-hook='smart-assist-badge' ng-if='!$ctrl.hide'>\n<span>{{ $ctrl.displayedNumOfIssues }}</span>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/assistant/smart-assist-issue.html","<div class='smart-assist-issue'>\n<i adi-automation='smart-assist-issue-mute-btn' class='cc-icon-close-10' data-hook='smart-assist-issue-mute-btn' ng-click='$ctrl.onMute()'></i>\n<div class='smart-assist-issue-details'>\n<div class='smart-assist-issue-icon' data-hook='smart-assist-issue-icon' ng-class='&#39;{{:: $ctrl.icon}}&#39;'></div>\n<div class='smart-assist-issue-content'>\n<div class='smart-assist-issue-text' data-hook='smart-assist-issue-text' wix-translate-compile='{{:: $ctrl.text }}'></div>\n<div class='smart-assist-issue-actions-container'>\n<div adi-automation='smart-assist-issue-fix-button' class='smart-assist-issue-button smart-assist-issue-fix-button' data-hook='smart-assist-fix-button' ng-click='$ctrl.onFix()'>\n{{:: 'smart-assist.issue.fix' | translate }}\n</div>\n</div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(a){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){"use strict";a.put("views/assistant/smart-assist-empty-state.html","<div class='smart-assist-empty-state-container'>\n<div class='illustration' data-hook='smart-assist-empty-state-illustration' ng-class='{&#39;illustration-after-success&#39;: $ctrl.issuesExisted, &#39;illustration-before-success&#39;: !$ctrl.issuesExisted}'></div>\n<div class='title'>\n{{:: $ctrl.issuesExisted ?  'smart-assist.empty-state.after-suggestions.title' : 'smart-assist.empty-state.before-suggestions.title' | translate}}\n</div>\n<div class='description' data-hook='smart-assist-empty-state-description'>\n{{:: $ctrl.issuesExisted ? 'smart-assist.empty-state.after-suggestions.description' : 'smart-assist.empty-state.before-suggestions.description' | translate}}\n</div>\n<button class='tour-button -primary action' data-hook='smart-assist-empty-state-go-to-assistant-bucket' ng-click='$ctrl.goToAssistantBucket()'>\n{{:: 'smart-assist.empty-state.go-to-assistant-bucket' | translate}}\n</button>\n</div>\n")}]);var ValuesDiff=function(){function a(a,b){this.oldValue=a,this.newValue=b}return a}(),NodeChangeReporterService=function(){function a(a,b,c,d){this.applicationState=a,this.modelTree=b,this.socialLinkManager=c,this.consumerBiLogger=d}return a.$inject=["applicationState","modelTree","socialLinkManager","consumerBiLogger"],a.prototype.handleValuesChanges=function(a,b){var c=_.last(b.key.split("."));if(a.contentElement&&this.isFieldRelevant(a.contentElement.type,b.key)&&this.clonedNode[c]){var d=this.getChangedValuesOfObjects(this.clonedNode[c],b);d&&d.newValue!==d.oldValue&&(this.sendBiEvents(b,c,d),this.init(a))}},a.prototype.init=function(a){var b=this.modelTree.getNodeByContentElementName("Social"),c=this.modelTree.getNodeByContentElementName("Contact"),d=a.contentElement?a.contentElement.values:{};this.clonedNode=_.merge({},b.contentElement.values,c.contentElement.values,d)},a.prototype.isFieldRelevant=function(a,b){return"GeneralDescription"===a&&("BusinessName"===b||"Logo"===b||"MainEmail"===b||"Contact.phone number"===b||"Social.SocialButtons"===b)},a.prototype.getAction=function(a,b){var c="edit";return b?a||(c="remove"):c="add",c},a.prototype.sendBiEvents=function(a,b,c){var d=this.getFieldName(b,a,c.newValue),e=this.getFieldType(b),f=this.getAction(c.newValue,c.oldValue);this.consumerBiLogger.intro.infoCardAddEditRemoveInfo(d,e,c.newValue.length,f,"header",null)},a.prototype.getChangedObject=function(a,b){if(a.length>b.length){var c=a[a.length-1];return new ValuesDiff(c.targetUrl,"")}if(a.length<b.length){var d=b[b.length-1];return new ValuesDiff("",d.targetUrl)}var e;return _.find(a,function(a,c){_.isEqual(a,b[c])||(e=new ValuesDiff(a.targetUrl,b[c].targetUrl))}),e?new ValuesDiff(e.oldValue,e.newValue):new ValuesDiff("","")},a.prototype.getRelevantFieldsFromObjects=function(a,b){return a.map(function(a){var c={};return b.forEach(function(b){var d=_.get(a,b),e=_.last(b.split(".")).toString();c[e]=d}),c})},a.prototype.getChangedValuesForSocial=function(a,b){var c=["Link.targetUrl"],d=this.getRelevantFieldsFromObjects(a.value,c),e=this.getRelevantFieldsFromObjects(b,c),f=this.getChangedObject(d,e);return new ValuesDiff(f.oldValue,f.newValue)},a.prototype.getChangedValuesForLogo=function(a,b){var c=["active","relativeUri"],d=this.getRelevantFieldsFromObjects(a.value,c),e=this.getRelevantFieldsFromObjects(b.node.contentElement.values.Logo.value,c),f=d.find(function(a){return!0===a.active}),g=e.find(function(a){return!0===a.active});return f&&g?new ValuesDiff(f.relativeUri,g.relativeUri):new ValuesDiff("","")},a.prototype.getChangedValuesOfObjects=function(a,b){if("media"===a.type){if("social"===a.subType){var c=b.field.value||b.field;return this.getChangedValuesForSocial(a,c)}return this.getChangedValuesForLogo(a,b)}return new ValuesDiff(a.value,b.field.value)},a.prototype.getFieldType=function(a){return"SocialButtons"===a?"social":"Logo"===a?"logo":"text"},a.prototype.getFieldName=function(a,b,c){return"SocialButtons"===a?this.socialLinkManager.getPlatformNameByUrl(c)||this.socialLinkManager.invalidPlatformName:"MainEmail"===a?"email":"BusinessName"===a?"company name":"Logo"===a?"logo":"phone number"===a?"phone":b.key},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("nodeChangeReporter",NodeChangeReporterService);var NodeEditorBiReporter=function(){function a(a,b,c,d,e,f){this.consumerBiLogger=a,this.mediaOverrideManager=b,this.storyServices=c,this.siteModelData=d,this.defaultContent=e,this.contentNormalizer=f,this.fieldsThatShouldBeSanitized=["MainEmail","Contact.phone number"]}return a.$inject=["consumerBiLogger","mediaOverrideManager","storyServices","siteModelData","defaultContent","contentNormalizer"],a.prototype.reportBi=function(a,b,c){
if(a.maskChanged)this.consumerBiLogger.contentEditor.componentWasHiddenSuccess(a.node.getId(),a.node.getSpecificContentElementType(),a.node.alias||"",a.key,a.field.subType,b[a.key]?"unhide":"hide",a.BIOrigin);else if("text"===a.field.type)this.consumerBiLogger.contentEditor.fieldWasUpdatedSuccess(a.node.getId(),a.node.getSpecificContentElementType(),a.node.alias||"",a.key,a.field.subType,this.shouldSanitizePersonallyIdentifiableInfo(a)?"":this.getFieldValue(a),this.getFieldValue(a).length,0,this.isDefaultValue(a,c));else if(a.subField)this.consumerBiLogger.contentEditor.fieldWasUpdatedSuccess(a.node.getId(),a.node.getSpecificContentElementType(),a.node.alias||"",a.subField.name,a.subField.type,a.subField.value,a.subField.value.length,0,void 0);else{var d=a.field.subType,e=0;if("image"===d){var f=a.node.contentElement.getValuesByMediaType();if(f.image){var g=f.image[0];e=_.get(g,"fileInput.face.length")||0}}var h=this.mediaOverrideManager.getFieldDataType(d,a.node);this.consumerBiLogger.contentEditor.fieldWasUpdatedSuccess(a.node.getId(),a.node.getSpecificContentElementType(),a.node.alias||"",a.key,h,"",0,e,void 0)}},a.prototype.shouldSanitizePersonallyIdentifiableInfo=function(a){return a.key&&this.fieldsThatShouldBeSanitized.indexOf(a.key)>-1},a.prototype.isDefaultValue=function(a,b){var c=this.getFieldValue(a);if(!a.key||!c)return!1;if("Contact.phone number"===a.key&&c===this.defaultContent.ValuesData.ContactSingle["phone number"])return!0;var d=this.siteModelData.getDefaultValues(a.node,this.storyServices.story,b);return!!d&&c===d[a.key]},a.prototype.getFieldValue=function(a){return a.field&&a.field.value?this.contentNormalizer.normalizeRichText(a.field.value):""},a}();angular.module("siteGeneratorEditorInternal").service("nodeEditorBiReporter",NodeEditorBiReporter);var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},NodeEditorManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E){var F=this;this.$stateParams=a,this.flags=b,this.editorEventManager=c,this.applicationState=d,this.spinnerService=e,this.nodeChangeReporter=f,this.nodeEditorBiReporter=g,this.consumerBiLogger=h,this.consumerBiLoggerHelpers=i,this.wizardService=j,this.nodeFetcher=k,this.undoRedo=l,this.sectionManager=m,this.solutionFetcher=n,this.simpleSolutionManager=o,this.modelTree=p,this.logoHandler=q,this.mobileSolutionManager=r,this.linkDetailsManager=s,this.storyServices=t,this.notification=u,this.osUtils=v,this.focusKeeper=w,this.pubSub=x,this.onstageActionsManager=y,this.ONSTAGE_EVENTS=z,this.listPanelManager=A,this.layoutSelectionStoreProvider=B,this.$injector=C,this.sectionBackgroundService=D,this.catalogStylesManager=E,this.mediaSettingsActive=!1,y.subscribe(z.EDIT_LIST_ITEM,function(a){!F.consumerBiLoggerHelpers.getPanelSource()&&F.consumerBiLoggerHelpers.setPanelSource(BIOrigins.OSI),F.loadItemEditor(F.listPanelManager.generateItem(a))}),y.subscribe(z.LIST_ITEM_TO_PAGE,function(a){F.makeIntoPage(a)}),y.subscribe(this.ONSTAGE_EVENTS.OPEN_SOCIAL_PANEL,function(){if(!F.isSocialEditor()){C.get("contentElementFieldManager").resetFocus(),F.loadSocialEditor()}}),this.flags.overrideFieldColor&&y.subscribe(this.ONSTAGE_EVENTS.OVERRIDE_TEXT_COLOR,function(a){F.overrideTextColor(a)})}return a.$inject=["$stateParams","flags","editorEventManager","applicationState","spinnerService","nodeChangeReporter","nodeEditorBiReporter","consumerBiLogger","consumerBiLoggerHelpers","wizardService","nodeFetcher","undoRedo","sectionManager","solutionFetcher","simpleSolutionManager","modelTree","logoHandler","mobileSolutionManager","linkDetailsManager","storyServices","notification","osUtils","focusKeeper","pubSub","onstageActionsManager","ONSTAGE_EVENTS","listPanelManager","layoutSelectionStoreProvider","$injector","sectionBackgroundService","catalogStylesManager"],a.prototype.overrideTextColor=function(a){var b=this,c=this.layoutSelectionStoreProvider.getLayoutSelectionStore(),d=this.onstageActionsManager.getSegment(),e=c.getFieldColorOverride(d,a.data.subType),f=a.actionData.name;if(f!==e){var g=_.get(a,"data.subType");c.setFieldColorOverride(d,g,f);var h=_.get(d,"node.alias")||"",i=d.node?d.node.getSpecificContentElementType():"";f?this.consumerBiLogger.contentEditor.changeContentColorClick(a.data.subType,d.node.id,f,"",h,i):this.consumerBiLogger.contentEditor.resetContentColorClick(a.data.subType,d.node.id,h,i),this.storyServices.reRender().then(function(){b.undoRedo.captureOperation(),f?b.consumerBiLogger.contentEditor.changeContentColorSuccess(a.data.subType,d.node.id,f,"",h,i):b.consumerBiLogger.contentEditor.resetContentColorSuccess(a.data.subType,d.node.id,h,i)})}},a.prototype.showMediaSettings=function(){this.mediaSettingsActive=!0},a.prototype.hideMediaSettings=function(){this.mediaSettingsActive=!1},a.prototype.loadSocialEditor=function(){this.applicationState.goToEditMode(a.SOCIAL_ID)},a.prototype.loadItemEditor=function(a){this.applicationState.goToEditMode(a.id)},a.prototype.isSocialEditor=function(){return this.$stateParams.childId===a.SOCIAL_ID},a.prototype.isItemEditor=function(){return this.$stateParams.childId&&this.$stateParams.childId!==a.SOCIAL_ID},a.prototype.makeIntoPage=function(a){var b=this;this.spinnerService.waitForMe("makeIntoPage"),this.sectionManager.makeIntoPage(a).then(function(){b.linkButtonFieldIfEmpty(a,b.storyServices.story.selectedPage),b.spinnerService.imDone("makeIntoPage")})},a.prototype.linkButtonFieldIfEmpty=function(a,b){var c=a.contentElement,d=_.find(c.values,function(a){return"button"===a.type}),e=d?d.value:{};this.linkDetailsManager.isNone(e)&&(e.isPageRef=!0,e.targetPage=b,e.link={pageId:b})},a.prototype.setReferenceFieldsVisibility=function(a,b,c,d,e){var f=this;this.consumerBiLogger.contentEditor.hideComponentFromSite(c?"unhide":"hide",b,d,e);var g=function(){return Promise.all(a.map(function(a){var d=a.referenceFields[b]!==c,e=f.isLastVisibleField(a,b);return d&&!e?(a.referenceFields[b]=c,f.wizardService.onReferenceFieldChanged(a,b,!0)):Promise.resolve()})).then(function(){f.consumerBiLogger.contentEditor.hideComponentFromSiteSuccess(c?"unhide":"hide",b,d,e)})},h=function(){return f.storyServices.recalculateCurrentPage(!0)},i=function(){return f.simpleSolutionManager.ensureHeaderAndFooterVisibility()},j=function(){return f.afterUpdateComplete()};return g().then(h).then(i).then(j)},a.prototype.isLastVisibleField=function(a,b){var c=__assign({},a.getArgsMatchingPolicy(),a.getReferenceFields()),d=function(){return Object.keys(c).filter(function(a){return c[a]}).length};return c[b]&&1===d()},a.prototype.updateViewer=function(a){var b=this,c=this.nodeFetcher.getCurrentNodeResult(),d=c.node,e=c.sitePart;if(this.applicationState.isInMobileEditMode())return this.updateMobileViewer(a);var f,g,h;if(this.nodeChangeReporter.handleValuesChanges(d,a),a.field.type===core.ElementTypes.FixedHeader)return this.consumerBiLogger.contentEditor.fieldWasUpdatedSuccess(a.node.getId(),a.node.getSpecificContentElementType(),a.node.alias||"",a.key,"boolean",this.wizardService.isFixedHeader(),0,0,void 0),void this.afterUpdateComplete(a);if(a.maskChanged){h=a.isReferencedField?a.node.getReferenceFields():a.node.getArgsMatchingPolicy();var i=a.node.hasVisibleFields();f=!i,g=i&&a.node.isUserHidden()}if("media"===a.field.type&&"Logo"===a.key){var j=!h||!!h.Logo;this.logoHandler.handleLogoChange(a,j)}if(f&&this.canBeRemoved(a.node))return this.sectionManager.showDeleteSectionPopup(a.node,"hide-or-delete-all-elements",function(){b.restoreFieldMask(a,h)});if(f&&"GeneralDescription"===a.node.contentElement.type)return this.sectionManager.showHideNodePopup(e).finally(function(){return b.restoreFieldMask(a,h)});var k=void 0;if(a.isReferencedField)k=this.handleReferenceFieldChanged(a);else{a.maskChanged&&this.spinnerService.waitForMe("editingNode");var l=this.getParent(a),m=void 0,n=!1;if(f&&a.node.contentElement.isSpecialListItem()){m=this.simpleSolutionManager.removeListSpecialItem(a.node.containerPageId,d.getId(),a.node.getId()),this.flags.coreEmptyLe?a.node.userHidden=!0:this.modelTree.updateNodeVisibility(a.node,l,!1);var o=a.node.getContentElement().getDependencies();_.each(o,function(c){if(c!==a.node&&c.containerPageId){var d=b.modelTree.findIdentifyingNode(c);b.modelTree.updateFieldsVisibility(c,d,a.key),b.flags.coreEmptyLe?c.userHidden=c.userHidden||!c.hasVisibleFields():b.modelTree.updateNodeVisibility(c,d),c.userHidden&&(b.modelTree.markPageAsDirty(c.containerPageId),b.simpleSolutionManager.removeListSpecialItemFromSolutionLGs(c.containerPageId,d.getId(),c.getContentElementType()))}})}else if(g&&a.node.contentElement.isSpecialListItem())m=this.addListSpecialItem(a),this.modelTree.updateFieldsVisibility(a.node,l,a.key,!0),this.modelTree.updateNodeVisibility(a.node,l,!0);else{var p,q=a.node.containerPageId,r=this.nodeFetcher.getCurrentCorrectNodeId(),s=this.getSectionSolution(),t=s.reduce(function(a,b){return b.getBoundingHeight()+a},0);this.flags.mobileEditor&&(p=this.mobileSolutionManager.getMobileSolution(s)),m=this.wizardService.onSynchronousFieldChanged(a.node,a.key,l,a.maskChanged).then(function(){return b.simpleSolutionManager.detectAndHandleSolutionFailure(q,r,a.node.getContentElement())}).then(function(a){if(a)return n=!0,a.oldHeight=t,a;if(b.doReplaceSectionOnFieldChanged()){var c=b.getSectionSolution();if(c.reduce(function(a,b){return b.getBoundingHeight()+a},0)!==t)return b.simpleSolutionManager.replaceSectionOnPage(q,r,c).then(function(a){return a.oldHeight=t,a})}}).then(function(a){if(b.flags.mobileEditor){var c=void 0;c=a&&a.newSolution?a.newSolution.slice(a.startIndex,a.startIndex+a.newLength):b.getSectionSolution();var d=p;b.mobileSolutionManager.setMobileSolution(c,d),b.simpleSolutionManager.setSolutionDirty(d)}return a})}k=m.then(function(c){return b.handleLayoutChanged(c,n,"GeneralDescription"===a.node.getContentElementType()||b.modelTree.isReferenceField(a.node.getContentElementType(),a.field.name))})}return k.then(function(){return b.finishUpdateViewer(a,h)})},a.prototype.getParent=function(a){var b=this.modelTree.findIdentifyingNode(a.node);return b.isList()?b:null},a.prototype.addListSpecialItem=function(a){var b,c=this;this.flags.mobileEditor&&(b=this.mobileSolutionManager.getMobileSolution(this.getSectionSolution()),this.mobileSolutionManager.addListItem(b,a.node));var d=this.nodeFetcher.getCurrentNode();return this.simpleSolutionManager.addListSpecialItem(a.node.containerPageId,d.getId(),a.node).then(function(a){if(c.flags.mobileEditor){var d=a&&a.newSolution||c.getSectionSolution();c.mobileSolutionManager.setMobileSolution(d,b),c.simpleSolutionManager.setSolutionDirty(b)}return a})},a.prototype.doReplaceSectionOnFieldChanged=function(){var a=this.nodeFetcher.getCurrentCorrectNodeId();return"header"!==a&&"footer"!==a},a.prototype.updateMobileViewer=function(a){var b=this,c=this.nodeFetcher.getCurrentActiveNode();this.spinnerService.waitForMe("mobileNodeChange");var d=this.getSectionSolution(),e=this.mobileSolutionManager.getMobileSolution(d);return this.simpleSolutionManager.setSolutionDirty(e),this.mobileSolutionManager.calculatePart(this.nodeFetcher.getCurrentNodeResult().sitePart,c.containerPageId).then(function(){return b.storyServices.renderMobileSolution(b.nodeFetcher.getCurrentNodeResult().sitePart,c.containerPageId)}).then(function(){b.afterUpdateComplete(),b.spinnerService.imDone("mobileNodeChange")})},a.prototype.getSectionSolution=function(){var a=this.nodeFetcher.getCurrentNodeResult();return this.solutionFetcher.getSectionSolution(a.node.containerPageId,this.nodeFetcher.getCurrentCorrectNodeId(),a.sitePart)},a.prototype.canBeRemoved=function(a){return!a.contentElement.isSpecialListItem()&&("GeneralDescription"!==a.contentElement.type&&!(this.flags.coreEmptyLe&&!a.isListItem&&this.sectionBackgroundService.getBackground(a).mediaType!==core.BgMediaTypes.COLOR))},a.prototype.restoreFieldMask=function(a,b){var c=this;if(b[a.key]=!0,!a.field.value){var d=void 0;return d=a.isReferencedField?this.wizardService.onReferenceFieldChanged(a.node,a.key,!0):this.wizardService.onSynchronousFieldChanged(a.node,a.key,null,!0,!0),d.then(function(){return c.simpleSolutionManager.detectAndHandleSolutionFailure(a.node.containerPageId,c.nodeFetcher.getCurrentCorrectNodeId(),a.node.getContentElement())}).then(function(){return c.handleLayoutChanged(void 0,void 0,!0)}).then(function(){return c.finishUpdateViewer(a,b)})}},a.prototype.handleLayoutChanged=function(a,b,c){var d,e=this;if(a&&!this.sameSolution(a.newSolution,a.oldSolution)){var f={direction:this.simpleSolutionManager.Animation.Direction.REVERSE,type:this.simpleSolutionManager.Animation.Type.CROSS_FADE,duration:.1};d=this.sectionManager.startAnimatedRender(a,f).then(function(){b&&e.notification.show("toasters.could-not-fit-text",2e3)})}else d=c?this.storyServices.reRender():this.storyServices.reRenderParts();return this.osUtils.isIE&&(d=d.then(function(){e.focusKeeper.restoreFocus()})),d},a.prototype.finishUpdateViewer=function(a,b){var c=this;return this.simpleSolutionManager.ensureHeaderAndFooterVisibility().then(function(a){if(a)return c.handleLayoutChanged(void 0,void 0,!0)}).then(function(){c.nodeEditorBiReporter.reportBi(a,b,c.getParent(a)),c.afterUpdateComplete(a),a.maskChanged&&c.spinnerService.imDone("editingNode")})},a.prototype.afterUpdateComplete=function(a){this.flags.sectionMedia&&a&&a.field.type===core.ElementTypes.Media||this.undoRedo.captureOperation(!1),this.pubSub.fire(PubSub.events.CONTENT_UPDATED)},a.prototype.sameSolution=function(a,b){return a.reduce(function(a,c,d){return a&&c===b[d]},!0)&&a.length===b.length},a.prototype.handleReferenceFieldChanged=function(a){var b,c=this;return this.flags.mobileEditor&&(b=this.mobileSolutionManager.getMobileSolution(this.getSectionSolution())),this.wizardService.onReferenceFieldChanged(a.node,a.key,a.maskChanged).then(function(){return c.simpleSolutionManager.detectAndHandleSolutionFailure(a.node.containerPageId,c.nodeFetcher.getCurrentCorrectNodeId(),a.node.getContentElement())}).then(function(){if(c.flags.mobileEditor){var a=c.getSectionSolution();c.mobileSolutionManager.setMobileSolution(a,b),c.simpleSolutionManager.setSolutionDirty(b)}}).then(function(){return c.handleLayoutChanged(void 0,void 0,!0)})},a}();NodeEditorManager.SOCIAL_ID="social",angular.module("siteGeneratorEditorInternal").service("nodeEditorManager",NodeEditorManager);var ListPanelManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v=this;this.$q=a,this.$translate=b,this.flags=c,this.onstageActionsManager=d,this.ONSTAGE_EVENTS=e,this.editorEventManager=f,this.nodeTitleManager=g,this.nodeFetcher=h,this.modelTree=i,this.nodeManipulationService=j,this.spinnerService=k,this.sectionManager=l,this.undoRedo=m,this.consumerBiLogger=n,this.notification=o,this.CONSUMER_DIALOGS=p,this.contentManager=q,this.CcDialogBuilder=r,this.storyServices=s,this.pubSub=t,this.slideShowService=u,d.subscribe(e.HIDE_LIST_ITEM,function(a){v.onToggle(v.generateItem(a)).then(function(){t.fire(PubSub.events.LIST_ITEMS_UPDATED)})}),d.subscribe(e.DELETE_LIST_ITEM,function(a){v.onDelete(v.generateItem(a)).then(function(){t.fire(PubSub.events.LIST_ITEMS_UPDATED)})}),d.subscribe(e.DUPLICATE_LIST_ITEM,function(a){v.onDuplicate(v.generateItem(a)).then(function(){t.fire(PubSub.events.LIST_ITEMS_UPDATED)})})}return a.$inject=["$q","$translate","flags","onstageActionsManager","ONSTAGE_EVENTS","editorEventManager","nodeTitleManager","nodeFetcher","modelTree","nodeManipulationService","spinnerService","sectionManager","undoRedo","consumerBiLogger","notification","CONSUMER_DIALOGS","contentManager","CcDialogBuilder","storyServices","pubSub","slideShowService"],a.prototype.generateItem=function(a,b){return{id:a.id,label:this.nodeTitleManager.getNodeTitleValue(a),hidden:a.isUserHidden(),selected:a.id===b}},a.prototype.onDuplicate=function(a,b,c){var d=this.nodeFetcher.getCurrentNode();b&&this.consumerBiLogger.contentEditor.clickOnAddDuplicateItemInAList(d.getId(),d.getSpecificContentElementType(),d.alias,"duplicate");var e=this.realIndexAndStatus(a,d);this.spinnerService.waitForMe("onDuplicate");var f=d.children.length;d.children[f-1].isListFooter()&&f--;var g=this.modelTree.duplicateListItem(e.childNode,d,f);return this.addListItem(g,f,"toasters.list-item-duplicated","onDuplicate",c)},a.prototype.onDelete=function(a){var b=this,c=this.nodeFetcher.getCurrentNode(),d=this.getVisibleItems(c);if(1===d.length&&d[0].getId()===a.id)return this.sectionManager.showDeleteSectionPopup(c,"hide-or-delete-all-elements"),this.$q.when();var e=this.realIndexAndStatus(a,c),f={heading:this.$translate.instant("popups.delete-list-item.heading"),text:this.$translate.instant("popups.delete-list-item.text"),acceptButtonText:this.$translate.instant("general.delete"),rejectButtonText:this.$translate.instant("general.cancel"),icon:"delete-single.gif",biDialogName:this.CONSUMER_DIALOGS.CONFIRM_DELETE_LIST_ITEM};return this.CcDialogBuilder.showNegativeConfirmation(f).then(function(){b.spinnerService.waitForMe("onDelete");var a=b;b.nodeManipulationService.deleteNode(e.childNode,b.storyServices.story.selectedPage,!1,function(){b.removeListItem(e.indexInVisibleItemsIgnoringHeader,null,"onDelete",e.childNode).then(function(){b.notification.show("toasters.list-item-deleted","general.undo",function(){a.undoRedo.undo()}),b.consumerBiLogger.contentEditor.valueWasDeleted(c.getId(),c.getSpecificContentElementType(),c.alias,"list","list item")})})})},a.prototype.onToggle=function(a,b,c){var d=this,e=this.nodeFetcher.getCurrentNode(),f=this.realIndexAndStatus(a,e);if(f.shown){return 1===this.getVisibleItems(e).length?(this.sectionManager.showDeleteSectionPopup(e,"hide-or-delete-all-elements",function(){e.userHidden=!1,f.childNode.userHidden=!1,a.hidden=!1}),this.$q.when()):(this.nodeManipulationService.toggleNodeInlist(e,f.childNode),this.spinnerService.waitForMe("onToggleHide"),this.slideShowService.isItemExist(e.getId(),f.childNode)&&this.slideShowService.selectNextUnHiddenItem(e,f.childNode.id),b&&this.consumerBiLogger.contentEditor.clickOnHideShowOnItemInListItems("hide",e.getId(),e.getSpecificContentElementType(),e.alias),this.removeListItem(f.indexInVisibleItemsIgnoringHeader,"List item hidden","onToggleHide",f.childNode).then(function(){b&&d.consumerBiLogger.contentEditor.clickOnHideShowOnItemInListItemsSuccess("hide",e.getId(),e.getSpecificContentElementType(),e.alias)}))}return this.nodeManipulationService.toggleNodeInlist(e,f.childNode),this.spinnerService.waitForMe("onToggleShow"),b&&this.consumerBiLogger.contentEditor.clickOnHideShowOnItemInListItems("unhide",e.getId(),e.getSpecificContentElementType(),e.alias),this.addListItem(f.childNode,f.indexInVisibleItemsIgnoringHeader,"List item shown","onToggleShow",c).then(function(){b&&d.consumerBiLogger.contentEditor.clickOnHideShowOnItemInListItemsSuccess("unhide",e.getId(),e.getSpecificContentElementType(),e.alias)})},a.prototype.createNewNodeFromCE=function(a,b){var c=this.nodeManipulationService.addNodeToList(b);return _.each(a.values,function(a,b){return c.contentElement.values[b]=a}),c},a.prototype.getSectionSuggestionByNode=function(a){var b={rawSectionBrief:{id:a.alias,ceType:a.getContentElementType(),cardinality:2}},c=this.contentManager.suggestedSections().suggestions,d=c&&c.find(function(b){return b.id===a.alias});return d&&d.rawSectionBrief.cardinality>1&&(b.rawSectionBrief.item=d.rawSectionBrief.item),b},a.prototype.createNewCEDraft=function(a){var b=this.getSectionSuggestionByNode(a),c=this.modelTree.getListItems(a).length;return this.contentManager.prepareDrafts(b,1,c)[0].items[0]},a.prototype.createItemNodeAndAddToList=function(a){var b=this.createNewCEDraft(a),c=this.createNewNodeFromCE(b,a),d="onAdd";return this.spinnerService.waitForMe(d),this.addListItem(c,void 0,"toasters.list-item-added",d,a)},a.prototype.addListItem=function(a,b,c,d,e){var f=this,g=e||this.nodeFetcher.getCurrentNode();return this.sectionManager.addListItem(g,a,b).then(function(){f.handleAfterUpdateList(c,d),f.consumerBiLogger.contentEditor.addDuplicateItemSuccess(g.getId(),g.getSpecificContentElementType(),g.alias,"onAdd"===d?"new":"duplicate")})},a.prototype.removeListItem=function(a,b,c,d){var e=this,f=this.$q.when();return("onDelete"!==c||!d.userHidden)&&(f=this.sectionManager.removeListItem(this.nodeFetcher.getCurrentNode(),d,a)),f.then(function(){e.handleAfterUpdateList(b,c)})},a.prototype.getVisibleItems=function(a){var b=a.getContentElementType();return _.filter(a.children,function(a){return a.getContentElementType()===b&&!a.userHidden})},a.prototype.handleAfterUpdateList=function(a,b){this.undoRedo.captureOperation(!1),a&&this.notification.show(a,2e3),this.spinnerService.imDone(b)},a.prototype.realIndexAndStatus=function(a,b){var c=this.getRealItem(a,b),d=this.nodeManipulationService.nodeIndexAndStatus(b,c);if(!d)throw"cannot toggle a non list item from this flow";return d.childNode=c,d},a.prototype.getRealItem=function(a,b){return _.find(b.children,function(b){return b.id===a.id})},a}();angular.module("siteGeneratorEditorInternal").service("listPanelManager",ListPanelManager);var SocialLinksHelpers=function(){function a(a){this.mediaGallery=a}return a.$inject=["mediaGallery"],a.prototype.extractSocialLinks=function(a){var b=this;return _.map(a.contentElement.values.SocialButtons.value,function(c){return{platform:c.platform,url:c.Link.targetUrl,hidden:!!_.get(a.hiddenMedia,["icon",b.mediaGallery.getItemId(c)])}})},a}();angular.module("siteGeneratorEditorInternal").service("socialLinksHelpers",SocialLinksHelpers);var SocialPanelManager=function(){function a(a,b,c,d,e,f,g,h){this.modelTree=a,this.introDataFormatter=b,this.socialLinkManager=c,this.mediaGallery=d,this.ReferenceFieldTypes=e,this.editorEventManager=f,this.undoRedo=g,this.pubSub=h,this.socialNode=this.modelTree.getNodeByContentElementName("Social")}return a.$inject=["modelTree","introDataFormatter","socialLinkManager","mediaGallery","ReferenceFieldTypes","editorEventManager","undoRedo","pubSub"],a.prototype.updateSocialLinks=function(a,b,c){var d=this;void 0===c&&(c=this.socialNode);var e=_.get(c.contentElement.getValuesByMediaType(),["icon","length"])||0,f=this.introDataFormatter.createSocialButtons(a);c.contentElement.values.SocialButtons.value.length=0,c.contentElement.values.SocialButtons.value=f,c.hiddenMedia.icon={},_.each(f,function(b,e){(a[e].hidden||a[e].platform===d.socialLinkManager.invalidPlatformName)&&(c.hiddenMedia.icon[d.mediaGallery.getItemId(b)]=!0)}),c.contentElement.fillValuesByMediaType();var g=_.get(c.contentElement.getValuesByMediaType(),["icon","length"])||0,h=e>0&&0===g,i=0===e&&g>0,j=h||i;j&&(b.getReferenceFields()[this.ReferenceFieldTypes.SOCIAL]=i);var k={node:b,isReferencedField:!0,key:this.ReferenceFieldTypes.SOCIAL,field:c.contentElement.values.SocialButtons.value,maskChanged:j,whatChanged:IEditEventType.ValueChange,parent:null};this.editorEventManager.nodeChanged(k),this.undoRedo.captureOperation(),this.pubSub.fire(PubSub.events.SOCIAL_LINKS_UPDATED)},a}();angular.module("siteGeneratorEditorInternal").service("socialPanelManager",SocialPanelManager);var FirstTimeMobileEditorTooltip=function(){function a(){}return a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("firstTimeMobileEditorTooltip",{templateUrl:"views/first-time-mobile-editor-tooltip.html",controller:FirstTimeMobileEditorTooltip,bindings:{heading:"=",text:"=",icon:"=",buttonText:"=",onHide:"&",onAction:"&"}});var AssistiveMessage=function(){function a(a,b,c,d,e,f){this.$q=a,this.TourAttachedTooltip=b,this.$compile=c,this.$timeout=d,this.$translate=e,this.$rootScope=f}return a.$inject=["$q","TourAttachedTooltip","$compile","$timeout","$translate","$rootScope"],a.prototype.selectFirstIfDefined=function(a,b){return void 0!==a?a:b},a.prototype.show=function(a){var b=this,c=new this.TourAttachedTooltip,d=angular.element("<div>"),e=this.selectFirstIfDefined(a.durationBeforeEntrance,150),f=this.selectFirstIfDefined(a.durationOfEntrance,250),g=this.selectFirstIfDefined(a.animationYOffset,12),h=this.selectFirstIfDefined(a.animationXOffset,0),i=this.selectFirstIfDefined(a.durationOfExit,150),j=this.$q.defer(),k=function(){d.remove(),c.element.css({opacity:"0"}),b.$timeout(function(){return c.destroy()},i+200),j.resolve()},l=Object.assign({titleText:"ADI Assistant",actionText:this.$translate.instant("general.got-it"),xOffset:0,showTitle:!1,showDivider:!1,onAction:function(){a.onActionCallback&&a.onActionCallback(),k()},onHide:function(){a.onHideCallback&&a.onHideCallback(),k()}},a);d.on("click",k),d.css({position:"fixed",top:"0px",left:"0px",width:"calc(100%)",height:"calc(100%)",zIndex:"1000"}),angular.element("body").append(d);var m=Object.assign(this.$rootScope.$new(),l,{componentClass:"no-title-with-p9-primary-button",buttonClass:"p9-primary -small"});return c.setContent(this.$compile(l.template?l.template:'<assistant-tip\n        text="text" title-text="titleText" component-class="componentClass" action-text="actionText" button-class="buttonClass" show-title="showTitle" show-divider="showDivider" on-action="onAction()"\n        ></assistant-tip>')(m)),c.attachTo(l.target,builders.AssistantPositionX.Right,builders.AssistantPositionY.Center),this.$timeout(function(){c.element.find("."+TourAttachedTooltip.CONTENT_CLASS).css({transform:"translateX("+l.xOffset+"px)"}),c.arrowElement.css({transform:"translateX("+l.xOffset+"px)"}),c.element.css({marginLeft:h+"px",marginTop:g+"px",opacity:"0",zIndex:"1001",display:"block"}),b.$timeout(function(){return c.element.css({opacity:"1",marginTop:"0px",marginLeft:"0px",transition:"margin-top "+f+"ms ease-in-out,\n             opacity "+f+"ms ease-in-out,\n             margin-left "+f+"ms ease-in-out"})},e),b.$timeout(function(){return c.element.css({transition:"margin-top "+i+"ms ease-in-out, \n              opacity "+i+"ms ease-in-out"})},e+f+200)}),j.promise},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("assistiveMessage",AssistiveMessage);var AssistantTip=function(){function a(){}return a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("assistantTip",{controller:AssistantTip,templateUrl:"views/assistant-tip.html",bindings:{text:"=",titleText:"=?",buttonClass:"=",showTitle:"=?",showDivider:"=?",componentClass:"=?",actionText:"=",onAction:"&"}});var AssistantVideo=function(){function a(a){this.assistantVideoService=a}return a.$inject=["assistantVideoService"],a}();angular.module("siteGeneratorTourManagerInternal").component("assistantVideo",{controller:AssistantVideo,templateUrl:"views/assistant/assistant-video.html"});var TipManager=function(){function a(a,b,c,d,e,f,g,h){var i=this;this.ccTip=a,this.tipContent=b,this.tipStorageManager=c,this.TipManagerTypeMap=d,this.$rootScope=e,this.$injector=f,this.flags=g,this.consumerBiLogger=h,this.$rootScope.$on("$stateChangeSuccess",function(){i.hide()}),this.typeMap=d,this.createNewTipDebounce=_.debounce(function(a,b){i.createNewTip(a,b)},800)}return a.$inject=["ccTip","tipContent","tipStorageManager","TipManagerTypeMap","$rootScope","$injector","flags","consumerBiLogger"],a.prototype.show=function(a,b){var c=this;this.shouldDisplayTip(a,b)?this.tipStorageManager.getTip(b+"-"+a).then(function(){c.hide()}).catch(function(){c.showTip(a,b)}):this.hide()},a.prototype.hide=function(){this.lastTip&&this.ccTip.hide(this.lastTip)},a.prototype.shouldDisplayTip=function(a,b){return!1},a.prototype.showTip=function(a,b){this.consumerBiLogger.tips.show(b,a),this.lastTip?this.lastTipType===a?this.ccTip.update(this.lastTip,this.tipContent.get(a,b.toLowerCase())):(this.hide(),this.createNewTipDebounce(a,b)):this.createNewTipDebounce(a,b)},a.prototype.isClickEvent=function(a){return a&&"click"===a.type},a.prototype.createNewTip=function(a,b){var c=this;this.lastTipType=a,this.lastTip=this.ccTip.build(angular.extend(this.tipContent.get(a,b.toLowerCase()),{style:angular.extend(this.getPosition(a),{zIndex:1}),onHide:function(d){c.isClickEvent(d)&&c.consumerBiLogger.tips.close(a,b),c.lastTip=void 0}})),this.ccTip.show(this.lastTip)},a.prototype.getPosition=function(a){var b={top:"109px",left:"335px"},c={top:"93px",left:"497px"};return a===this.TipManagerTypeMap.ADD?c:b},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("tipManager",TipManager);var TipManagerTypeMap=function(){function a(){this.ADD="add",this.EDIT="edit"}return a}();angular.module("siteGeneratorStaticsConsumerAppInternal").constant("TipManagerTypeMap",new TipManagerTypeMap);var TipContent=function(){function a(a,b){this.TipContentTypeMap=a,this.$translate=b}return a.$inject=["TipContentTypeMap","$translate"],a.prototype.getKey=function(a){return"tip_content."+this.currentName.toLowerCase()+"-tip."+this.currentType+"-mode."+a},a.prototype.getTranslation=function(a){return this.$translate.instant(this.getKey(a))},a.prototype.initParams=function(a,b){this.currentType=a,this.currentName=b},a.prototype.isTitle=function(a,b){return this.initParams(a,b),this.getTranslation("title")!==this.getKey("title")},a.prototype.get=function(a,b){return this.initParams(a,b),{scope:{contact:{name:this.$translate.instant("tip_content.contact.name"),profession:this.$translate.instant("tip_content.contact.profession"),img:"images/tip/rachael.jpg"},title:this.getTranslation("title"),footer:{closeButton:this.getTranslation("footer_button")}},template:this.getTranslation("content_template")}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("tipContent",TipContent);var TipContentTypeMap=function(){function a(){this.WELCOME="Welcome",this.ABOUT="About",this.PRODUCTS="Products",this.HOURS="Hours",this.ABOUT_US="About Us",this.OUR_HISTORY="Our History",this.ALL_PRUDUCTS="All Products",this.SPECIAL_EVENTS="Special Events",this.WEDDING_SERVICES="Wedding Services",this.SPECIALITY_ITEMS="Specialty Items",this.BAKING_CLASSES="Baking Classes",this.NEWS_AND_UPDATES="News & Updates",this.SUBSCRIBE="Subscribe",this.MEET_THE_TEAM="Meet the Team",this.OPENING_HOURS="Opening Hours",this.CONTACT="Contact"}return a}();angular.module("siteGeneratorStaticsConsumerAppInternal").constant("TipContentTypeMap",new TipContentTypeMap);var TipStorageManager=function(){function a(a,b,c){this.wixCache=a,this.$q=b,this.storyServices=c}return a.$inject=["wixCache","$q","storyServices"],a.prototype.getTip=function(a){var b=this;return this.getCache().then(function(c){return b.$q(function(d,e){b.isNameExists(c,a)?d():(b.setStorageName(c,a),e())})})},a.prototype.getStorageKey=function(){return"cc-tip-"+this.storyServices.story.id},a.prototype.getNameId=function(a){return a.toLowerCase().replace(/ /g,"-")},a.prototype.getCache=function(){return this.wixCache.get(this.getStorageKey(),{namespace:"ob"}).then(function(a){return a}).catch(function(){return{}})},a.prototype.setStorageName=function(a,b){a[this.getNameId(b)]=!0,this.wixCache.set(this.getStorageKey(),a,{namespace:"ob"})},a.prototype.isNameExists=function(a,b){return!!a[this.getNameId(b)]},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("tipStorageManager",TipStorageManager);var DragHandle=function(){function a(a,b,c,d,e,f,g,h,i,j,k){var l=this;this.sectionManager=a,this.consumerBiLogger=b,this.undoRedo=c,this.applicationState=d,this.overlayManager=e,this.sectionDrag=f,this.simpleSolutionManager=g,this.nodeManipulationService=h,this.consumerMenu=i,this.sitePartTypes=j,this.tpaService=k,this.upClick=function(){return l.moveSection(!1)},this.downClick=function(){return l.moveSection(!0)}}return a.$inject=["sectionManager","consumerBiLogger","undoRedo","applicationState","overlayManager","sectionDrag","simpleSolutionManager","nodeManipulationService","consumerMenu","sitePartTypes","tpaService"],a.prototype.moveSection=function(a){
var b=this,c=this.listSpan.node,d=this.sectionManager.geSectionPositionInPage(c),e=a?d+1:d-1,f=a?"down":"up",g=this.tpaService.getAppId(c);this.consumerBiLogger.sectionManagement.moveSectionWithinThePageClick(c.getId(),c.getContentElementType(),c.alias,e,d,f,g);var h={direction:this.simpleSolutionManager.Animation.Direction.NORMAL,type:this.simpleSolutionManager.Animation.Type.CROSS_FADE},i=c.containerPageId,j=c.id,k=this.nodeManipulationService.moveNode(j,i,a);if(-1!==k){var l=a?[j,k]:[k,j],m=l[0],n=l[1];this.applicationState.clearContentFocus(),this.simpleSolutionManager.swapAdjacentSectionsOnPage(i,m,n).then(function(a){return b.sectionManager.startAnimatedRender(a,h)}).then(function(){b.applicationState.setContentFocus(j,b.sitePartTypes.BODY),b.overlayManager.calculateBodyHeight(),b.consumerMenu.calcMenuAnchors(),b.consumerBiLogger.sectionManagement.sectionMovedWithinThePageSuccess(c.getId(),c.getContentElementType(),c.alias,e,d,f,g),b.undoRedo.captureOperation()})}},a.prototype.dragHandleClick=function(){this.applicationState.setContentFocus(this.listSpan.node.id,this.listSpan.sitePart)},a.prototype.dragStart=function(){var a=this.listSpan.node,b=this.sectionManager.geSectionPositionInPage(a),c=this.tpaService.getAppId(a);return this.consumerBiLogger.sectionManagement.moveSectionWithinThePageStartDragging(a.getId(),a.getContentElementType(),a.alias,b,c),this.undoRedo.disableAutoSave(),this.applicationState.setSteady(!1),this.overlayManager.data.draggedListSpan=this.listSpan,this.sectionDrag.startDrag()},a.prototype.dragEnd=function(){this.applicationState.setSteady(!0),this.undoRedo.enableAutoSave()},a.prototype.dragCanceled=function(){var a=this;return this.sectionDrag.cancelDrag().then(function(){a.overlayManager.clearDropTarget(),a.applicationState.setContentFocus(a.listSpan.node.id,a.listSpan.sitePart)})},a.prototype.drop=function(){this.sectionDrag.drop()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("dragHandle",{templateUrl:"views/builder/drag-handle.html",controller:DragHandle,bindings:{listSpan:"=",dragDisabled:"=",arrowUpDisabled:"=",arrowDownDisabled:"="}}),angular.module("siteGeneratorEditorInternal").factory("mediaFrame",["$window",function(a){return a.MediaFrame}]),angular.module("siteGeneratorCommon").factory("wixmp",["$window",function(a){return a.wixmp}]);var WixmpServices=function(){function a(a,b){this.consumerBiLogger=a,this.$q=b}return a.$inject=["consumerBiLogger","$q"],a.prototype.getSocialImages=function(a,b){var c=this;if(this.itemList&&!b)return this.$q.when(this.itemList);var d=this.$q.defer();return this.privateMediaSource||(this.privateMediaSource=new wixmp.Source(wixmp.sources.PRIVATE)),this.privateMediaSource.items.search(a," ").then(function(a){c.itemList=a,d.resolve(a)}),d.promise},Object.defineProperty(a.prototype,"socialImages",{get:function(){if(this.itemList&&this.itemList.data&&this.itemList.data.length)return this.itemList},enumerable:!0,configurable:!0}),a.prototype.getImagesByFolderId=function(a){return this.privateMediaSource||(this.privateMediaSource=new wixmp.Source(wixmp.sources.PRIVATE)),this.privateMediaSource.items.search(a," ").then(function(a){return a.data})},a.prototype.removeFolders=function(a){this.privateMediaSource||(this.privateMediaSource=new wixmp.Source(wixmp.sources.PRIVATE));var b=this.privateMediaSource.folders.remove(a);return Promise.all(b.map(function(a){return a.catch(function(){return null})}))},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("wixmpServices",WixmpServices);var videoControlOptions;!function(a){a[a.NEVER=0]="NEVER",a[a.ON_HOVER=1]="ON_HOVER",a[a.ALWAYS=2]="ALWAYS"}(videoControlOptions||(videoControlOptions={}));var MediaSettingsPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=this;this.CONSUMER_DIALOGS=a,this.$scope=b,this.mediaOverrideManager=c,this.linkDetailsManager=d,this.linkEditorCAB=e,this.consumerMediaUtils=f,this.CcDialogBuilder=g,this.consumerBiLoggerHelpers=h,this.consumerBiLogger=i,this.$translate=j,this.flags=k,this.videoProvidersUtils=l,this.storyServices=m,this.documentServicesMediator=n,this.mediaEditorManager=o,this.nodeFetcher=p,this.initService=q,this.applicationState=r,this.overlayManager=s,this.FIELD_CHANGE_DEBOUNCE_IN_MS=500,this.mediaTypes=cc.MediaPreviewType,this.mediaPreviewTypes=[this.mediaTypes.SingleImage,this.mediaTypes.Video,this.mediaTypes.ExtVideo,this.mediaTypes.Shape,this.mediaTypes.Clipart],this.videoControlOptions=[{id:videoControlOptions.NEVER,label:this.$translate.instant("editor.media-settings.ext-video.controls.option.never")},{id:videoControlOptions.ON_HOVER,label:this.$translate.instant("editor.media-settings.ext-video.controls.option.on-hover")},{id:videoControlOptions.ALWAYS,label:this.$translate.instant("editor.media-settings.ext-video.controls.option.always")}],this.init=function(){var a=t.node||t.nodeFetcher.getCurrentNode();t._node=a.isList()?a.children[0]:a,t.mediaType=t.extractMediaType(t._node),t.mediaValues=t.mediaOverrideManager.getMediaValues(t._node),t.mediaValue=t.mediaOverrideManager.getActiveMediaValue(t._node),t.updateILink(),t.segment=t.mediaEditorManager.getCurrentSegment(),t.segment&&t.segment.shouldAlignImage()&&t.setDropDownOfPosition(),t.mediaType===t.mediaTypes.ExtVideo&&(t.mediaValue.controls||(t.mediaValue.controls=videoControlOptions.ALWAYS),t.setCurrentVideoControlOption(t.mediaValue)),t.consumerBiLoggerHelpers.openedPanelStack.push("media settings"),t.consumerBiLogger.contentEditor.panelIsLoaded(t._node.getId(),t._node.getSpecificContentElementType(),t._node.alias,t.consumerBiLoggerHelpers.popPanelSource())},this.handleMediaChange=function(a,b,c,d){t.consumerMediaUtils.biReplaceMediaApproved(t._node,t.mediaType,b,BIOrigins.MediaSettingsPanel),a&&t._node.contentElement.fillValuesByMediaType(),t.init(),t.change({event:t.mediaEditorManager.createEvent(BIOrigins.EditPanel,IEditEventType.ValueChange,c,d)})},this.handleCancellingOfMediaChange=function(){t.consumerMediaUtils.biReplaceMediaClosed(t._node,t.mediaType,BIOrigins.MediaSettingsPanel)},this.changeVideoUrl=_.debounce(function(a,b){try{var c=t.videoProvidersUtils.getVideoThumbnailUrl(a);if(c)t.lastValidVideoUrl=a;else{if(!b)return;t.mediaValue.videoUrl=t.lastValidVideoUrl,c=t.videoProvidersUtils.getVideoThumbnailUrl(t.lastValidVideoUrl)}t.mediaValue.thumbnailUrl="string"==typeof c?c:"",t.videoProvidersUtils.isVimeo(a)?t.mediaValue.uri="/videos/"+t.videoProvidersUtils.getVimeoId(a):delete t.mediaValue.uri,t.handleVideoSettingsChanged()}catch(a){}},this.FIELD_CHANGE_DEBOUNCE_IN_MS),this.disableMediaChangeButton=!1,this.debug=this.flags.debug}return a.$inject=["CONSUMER_DIALOGS","$scope","mediaOverrideManager","linkDetailsManager","linkEditorCAB","consumerMediaUtils","CcDialogBuilder","consumerBiLoggerHelpers","consumerBiLogger","$translate","flags","videoProvidersUtils","storyServices","documentServicesMediator","mediaEditorManager","nodeFetcher","initService","applicationState","overlayManager"],a.prototype.$onInit=function(){this.initService.loaded().then(this.init)},a.prototype.setDropDownOfPosition=function(){var a=this;this.setImageAlignmentOptions(),this.$scope.$watch(function(){return a.segment.getAlignment()},this.setSelectedImageAlignment.bind(this)),this.flags.imagePositionsAsRectangles&&this.$scope.$watch(function(){return a.segment.getAlignment()},this.setPositionsAsRectanglesVars.bind(this))},a.prototype.setImageAlignmentOptions=function(){this.imageAlignmentOptions=this.mediaOverrideManager.listAlignmentOptions()},a.prototype.setSelectedImageAlignment=function(a){this.selectedImageAlignment=this.mediaOverrideManager.getAlignmentOption(a)},a.prototype.setPositionsAsRectanglesVars=function(a){var b=ImagePositions.getLabelDetailsByPosName(a);this.selectedPositionName=b.selectedPosition,this.selectedPositionImage=b.imagePosition,this.selectedPositionIndex=ImagePositions.invertedPosToDetails[a]},Object.defineProperty(a.prototype,"title",{get:function(){switch(this.mediaType){case this.mediaTypes.SingleImage:return this.$translate.instant("editor.media-settings.image-settings.title");case this.mediaTypes.Video:return this.$translate.instant("editor.media-settings.video-settings.title");case this.mediaTypes.ExtVideo:return this.$translate.instant("editor.media-settings.ext-video-settings.title");case this.mediaTypes.Shape:return this.$translate.instant("editor.media-settings.shape-settings.title");case this.mediaTypes.Clipart:return this.$translate.instant("editor.media-settings.clipart-settings.title")}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"changeButtonText",{get:function(){switch(this.mediaType){case this.mediaTypes.ExtVideo:return this.$translate.instant("editor.media-settings.button-search");default:return this.$translate.instant("editor.media-settings.button-replace")}},enumerable:!0,configurable:!0}),a.prototype.extractMediaType=function(a){return this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(this._node)},a.prototype.setCurrentVideoControlOption=function(a){this.selectedVideoControlOption=this.videoControlOptions[a.controls],this.lastValidVideoUrl=a.videoUrl},a.prototype.openMediaSettingsPanelHelp=function(){var a="help.mediasettings.image";switch(this.mediaType){case this.mediaTypes.SingleImage:a="help.mediasettings.image";break;case this.mediaTypes.Video:a="help.mediasettings.bgVideo";break;case this.mediaTypes.ExtVideo:a="help.mediasettings.extVideo";break;case this.mediaTypes.Shape:a="help.mediasettings.shape";break;case this.mediaTypes.Clipart:a="help.mediasettings.clipart"}this.CcDialogBuilder.showSupportIframe(this.$translate.instant(a),this.CONSUMER_DIALOGS.MEDIA_SETTINGS_PANEL_HELP)},a.prototype.closeMediaSettingsPanel=function(){this.consumerBiLogger.contentEditor.panelClosed(this._node.getId(),this._node.getSpecificContentElementType(),this._node.alias),this.consumerBiLoggerHelpers.openedPanelStack.pop(),this.close()},a.prototype.changeMedia=function(){var a=this;if(!this.disableMediaChangeButton){this.disableMediaChangeButton=!0,this.consumerMediaUtils.biReplaceMediaClick(this._node,this.mediaType),this.consumerMediaUtils.biCheckIfReplaceLogoClick(this._node,BIOrigins.ClipartSettingsPanel);var b=this.mediaEditorManager.getMediaValueProjection(),c=Object.keys(b)[0],d=this.consumerMediaUtils.getChangeMediaMethod(this._node,this.mediaType),e={contentElement:this._node.contentElement,media:this._node.contentElement.values[c].value};this.consumerBiLoggerHelpers.organizeMediaNode=this._node,this.consumerMediaUtils.biReplaceMediaLoaded(this._node,this.mediaType,BIOrigins.MediaSettingsPanel),d(e,this.segment).then(function(d){return a.handleMediaChange(d.isChanged,d.numTotal,b,c)},function(){return a.handleCancellingOfMediaChange()}).finally(function(){a.disableMediaChangeButton=!1})}},a.prototype.handleVideoSettingsChanged=function(){this.change({event:this.mediaEditorManager.createEvent(BIOrigins.EditPanel,IEditEventType.VideoSettingsChange)})},a.prototype.onChangeMediaTitle=function(a){a.length>DocumentServicesMediator.GENERAL_VALIDATIONS.MAX_MEDIA_TITLE_LENGTH&&(a=a.substr(0,DocumentServicesMediator.GENERAL_VALIDATIONS.MAX_MEDIA_TITLE_LENGTH)),this.mediaValue.Title=a,this.change({event:this.mediaEditorManager.createEvent(BIOrigins.EditPanel,IEditEventType.MediaTitleChange)})},a.prototype.onChangeMediaDescription=function(a){a.length>DocumentServicesMediator.GENERAL_VALIDATIONS.MAX_MEDIA_DESCRIPTION_LENGTH&&(a=a.substr(0,DocumentServicesMediator.GENERAL_VALIDATIONS.MAX_MEDIA_DESCRIPTION_LENGTH)),this.mediaValue.Description=a,this.change({event:this.mediaEditorManager.createEvent(BIOrigins.EditPanel,IEditEventType.MediaDescriptionChange)})},a.prototype.showFaces=function(){var a=this.mediaValue,b=_.get(a,"fileInput.face"),c=document.createElement("div"),d=document.createElement("IMG"),e=500/a.height;c.appendChild(d),d.src="https://static.wixstatic.com/"+a.fileUrl,d.style.height="500px",d.style.position="fixed",d.style.overflowY="scroll",d.style.overflowX="scroll",d.style.top="0",d.style.left="0",document.body.appendChild(c),_.each(b,function(a){var b=document.createElement("div");b.style.position="fixed",b.style.top=a.y*e+"px",b.style.left=a.x*e+"px",b.style.height=a.height*e+"px",b.style.width=a.width*e+"px",b.style.border="2px solid red",c.appendChild(b)});var f=function(a){"Escape"===a.key&&document.body.removeChild(c),angular.element(window).unbind("keydown",f)};angular.element(window).keydown(f)},a.prototype.changeVideoControlOption=function(a){this.mediaValue.controls=a.id,this.handleVideoSettingsChanged()},a.prototype.changeLink=function(){var a=this,b={linkDetails:this.mediaValue.Link,node:this._node,biSource:"media"};this.linkEditorCAB.show(b).then(function(b){a.mediaValue.Link=b,a.updateILink(),a.handleVideoSettingsChanged()})},a.prototype.updateILink=function(){this.linkAsILink=this.linkDetailsManager.generateILink(this.mediaValue.Link)},a.prototype.canChangeAlignment=function(){return this.segment&&this.segment.shouldAlignImage()},a.prototype.onAlignmentChange=function(a){var b=_.get(this,"segment.node.contentElement.allValuesByMediaType.image[0].relativeUri");this.segment.updateAlignment(b,a.value),this.change({event:this.mediaEditorManager.createEvent(BIOrigins.EditPanel,IEditEventType.AlignmentChange,void 0,void 0,{name:this.$translate.instant("editor.media-settings.image-position.title"),type:"dropdown",value:a.value})})},a}();angular.module("siteGeneratorEditorInternal").component("mediaSettingsPanel",{templateUrl:"views/editor/media-settings-panel.html",controller:MediaSettingsPanel,bindings:{change:"&",close:"&",node:"="}});var editor;!function(a){var b=function(){function a(a,b,c,d){var e=this;this.sectionMedia=a,this.$translate=b,this.$scope=c,this.applicationState=d,this.showMediaSizeButton=!1,this.refreshMediaSizeOptions(),this.onMediaSizeChange&&this.selectedMediaSize&&this.onMediaSizeChange({mediaSize:this.selectedMediaSize.key}),this.$scope.$watch(function(){return e.mediaType},function(){e.refreshMediaSizeOptions()})}return a.$inject=["sectionMedia","$translate","$scope","applicationState"],a.prototype.onMediaSizeChanged=function(a){var b=this,c=this.selectedMediaSize;this.sectionMedia.setOption(this.node,this.mediaType,a.key).then(function(d){if(!d)return void(b.selectedMediaSize=c);b.selectedMediaSize=a,b.refreshMediaSizeButton(),b.onMediaSizeChange&&b.onMediaSizeChange({mediaSize:a.key})})},a.prototype.onMediaSizeButtonClick=function(){this.onButtonClick&&this.onButtonClick({mediaSize:this.selectedMediaSize.key})},a.prototype.hasSingleOption=function(){return 1===this.mediaSizeItems.length},a.prototype.refreshMediaSizeOptions=function(){var a=this,b=function(b){return a.$translate.instant(("editor.media-settings.ms-options."+b).toLowerCase())},c=this.sectionMedia.getOptions(this.node,this.mediaType),d=c.selectedIndex>=0&&c.selectedIndex<c.items.length?c.selectedIndex:0;this.mediaSizeItems=c.items.map(function(a,c){return{key:a,label:b(a)}}),this.selectedMediaSize=c.items.length>0?this.mediaSizeItems[d]:null,this.mediaSizeItems.length>0&&this.refreshMediaSizeButton()},a.prototype.refreshMediaSizeButton=function(){switch(this.mediaType){case cc.MediaPreviewType.SingleImage:var a="editor.media-settings.ms-options.image."+this.selectedMediaSize.key.toLowerCase()+".button";this.mediaSizeButtonText=this.$translate.instant(a),this.mediaSizeButtonTooltip="media-settings.size-button."+this.selectedMediaSize.key.toLowerCase(),this.showMediaSizeButton=!0;break;case cc.MediaPreviewType.MultipleImages:this.mediaSizeButtonText=this.$translate.instant("editor.media-settings.ms-options.gallery.all.button"),this.mediaSizeButtonTooltip="media-settings.size-button.gallery",this.showMediaSizeButton=this.showButtonForGallery();break;default:return void(this.showMediaSizeButton=!1)}},a.prototype.showButtonForGallery=function(){return this.selectedMediaSize.key===sectionMedia.MediaSizeOptions.Box||this.selectedMediaSize.key===sectionMedia.MediaSizeOptions.Column||this.selectedMediaSize.key===sectionMedia.MediaSizeOptions.Strip},a.prototype.goToSwitchPreset=function(){this.applicationState.goToSwitchPresetMode(BIOrigins.MediaSetting)},a}();a.MediaSizeDropdown=b}(editor||(editor={})),angular.module("siteGeneratorEditorInternal").component("mediaSizeDropdown",{templateUrl:"views/editor/media-settings/media-size-dropdown.html",controller:editor.MediaSizeDropdown,bindings:{node:"<",mediaType:"<",onMediaSizeChange:"&",onButtonClick:"&",automation:"@?"}});var editor;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=this;this.applicationState=a,this.initService=b,this.nodeFetcher=c,this.solutionFetcher=d,this.mediaEditorManager=e,this.mediaFitCAB=f,this.imagePositionCAB=g,this.mediaOverrideManager=h,this.consumerBiLogger=i,this.sectionMedia=j,this.mediaSectionUtils=k,this.nodeChangeReporter=l,this.pubSub=m,this.headerPresetUtils=n,this.$element=o,this.consumerBiLoggerHelpers=p,this.consumerMediaUtils=q,this.galleryTypeCAB=r,this.CcDialogBuilder=s,this.$translate=t,this.modelTreeHelpers=u,this.CONSUMER_DIALOGS=v,this.initService.loaded().then(function(){w.init()}),this.unsubscribe=m.subscribe(PubSub.events.NEW_STATE_STORY_WAS_SET,function(){w.refreshMediaSize(),w.init()})}return a.$inject=["applicationState","initService","nodeFetcher","solutionFetcher","mediaEditorManager","mediaFitCAB","imagePositionCAB","mediaOverrideManager","consumerBiLogger","sectionMedia","mediaSectionUtils","nodeChangeReporter","pubSub","headerPresetUtils","$element","consumerBiLoggerHelpers","consumerMediaUtils","galleryTypeCAB","CcDialogBuilder","$translate","modelTreeHelpers","CONSUMER_DIALOGS"],a.prototype.$onDestroy=function(){this.unsubscribe&&this.unsubscribe()},a.prototype.refreshMediaSize=function(){this.currentMediaSize=this.sectionMedia.getSelectedOption(this.node)},a.prototype.onMediaChange=function(a){a===IEditEventType.GalleryLayoutChange?this.mediaSectionUtils.updateGalleryOnViewer(this.node):this.refreshActiveMedia()},a.prototype.onMediaTypeChange=function(a){this.currentMediaType=a,this.refreshMediaSize(),this.refreshActiveMedia()},a.prototype.onMediaSizeChange=function(a){this.currentMediaSize=a},a.prototype.onMediaSizeAction=function(a){switch(this.currentMediaType){case cc.MediaPreviewType.SingleImage:this.onSingleImageAction(a);break;case cc.MediaPreviewType.MultipleImages:this.openGalleryType()}},a.prototype.openGalleryType=function(){this.galleryTypeCAB.openGalleryType(this.node,this.sizeDropdownElement())},a.prototype.onSingleImageAction=function(a){switch(a){case sectionMedia.MediaSizeOptions.Cropped:this.openCropper();break;case sectionMedia.MediaSizeOptions.Uncropped:this.openFitMode();break;default:this.openImagePosition()}},a.prototype.showImageSettings=function(){return this.activeMedia&&(this.isImageType()||this.isSmallImageType())},a.prototype.isSmallImageType=function(){return this.currentMediaType===cc.MediaPreviewType.Clipart||this.currentMediaType===cc.MediaPreviewType.Shape},a.prototype.isImageType=function(){return this.currentMediaType===cc.MediaPreviewType.SingleImage&&(!this.currentMediaSize||this.currentMediaSize===sectionMedia.MediaSizeOptions.Cropped||this.currentMediaSize===sectionMedia.MediaSizeOptions.Uncropped)},a.prototype.showVideoSettings=function(){return this.activeMedia&&this.currentMediaType===cc.MediaPreviewType.ExtVideo&&(!this.currentMediaSize||this.currentMediaSize===sectionMedia.MediaSizeOptions.Box)},a.prototype.showMediaSize=function(){return this.currentMediaType!==cc.MediaPreviewType.Shape&&this.nodeFetcher.isNodeBody(this.node)},a.prototype.closePanel=function(){this.closeBI(),this.applicationState.goToBuilder()},a.prototype.goToPrevState=function(){this.applicationState.goToEditMode(this.modelTreeHelpers.isItemOfList(this.node)?this.node.id:null)},a.prototype.onHelp=function(){var a=this.$translate.instant("help.section.sectionMedia.mediaSettingsPanel");this.CcDialogBuilder.showSupportIframe(a,this.CONSUMER_DIALOGS.MEDIA_SETTINGS_PANEL_HELP)},a.prototype.openCropper=function(){this.consumerBiLogger.contentEditor.cropImageDialogIsShown(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.mediaEditorManager.openCropper()},a.prototype.openFitMode=function(){return this.mediaFitCAB.open(this.node,!0,this.sizeDropdownElement())},a.prototype.openImagePosition=function(){var a={target:this.sizeDropdownElement(),node:this.node,background:this.currentMediaSize===sectionMedia.MediaSizeOptions.Background||this.currentMediaSize===sectionMedia.MediaSizeOptions.BackgroundFull||this.currentMediaSize===sectionMedia.MediaSizeOptions.BackgroundList||this.currentMediaSize===sectionMedia.MediaSizeOptions.BackgroundHeader};this.imagePositionCAB.show(a)},a.prototype.sizeDropdownElement=function(){return this.galleryTypeCAB.getSizeDropdownButton()},a.prototype.refreshActiveMedia=function(){this.activeMedia=this.sectionMedia.getMedia(this.node),this.activeMedia||this.applicationState.goToEditMode()},a.prototype.closeBI=function(){this.consumerBiLogger.contentEditor.panelClosed(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.consumerBiLogger.contentEditor.closeMediaWindow(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,this.consumerMediaUtils.mediaTypeToString(this.currentMediaType),this.consumerMediaUtils.mediaTypeToGalleryType(this.currentMediaType),BIOrigins.MediaSetting)},a.prototype.openBI=function(){this.consumerBiLoggerHelpers.openedPanelStack.push("media settings"),this.consumerBiLogger.contentEditor.panelIsLoaded(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,this.consumerBiLoggerHelpers.popPanelSource()),this.consumerBiLogger.contentEditor.mediaSettingsShow(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,this.consumerMediaUtils.mediaTypeToString(this.currentMediaType),this.consumerMediaUtils.mediaTypeToGalleryType(this.currentMediaType))},a.prototype.init=function(){this.node=this.nodeFetcher.getCurrentActiveNode(),this.applicationState.isFooterContent()&&this.applicationState.goToEditMode(this.node.id),this.node||this.applicationState.goToBuilder(),this.nodeFetcher.isNodeBody(this.node)||this.nodeChangeReporter.init(this.node),this.currentMediaType=this.sectionMedia.getMediaType(this.node),this.openBI(),this.refreshActiveMedia()},a}();a.MediaSettingsPanelNew=b}(editor||(editor={})),angular.module("siteGeneratorEditorInternal").component("mediaSettingsPanelNew",{templateUrl:"views/editor/media-settings/media-settings-panel.html",controller:editor.MediaSettingsPanelNew});var editor;!function(a){var b=function(){function a(a,b,c,d,e){this.mediaAlignment=a,this.consumerBiLogger=b,this.sectionMedia=c,this.undoRedo=d,this.modelTree=e}return a.$inject=["mediaAlignment","consumerBiLogger","sectionMedia","undoRedo","modelTree"],a.prototype.$postLink=function(){var a=this.background?this.mediaAlignment.getBackgroundAlignment(this.node):this.mediaAlignment.getInlineAlignment(this.node);this.selectedPosition=ImagePositions.invertedPosToDetails[a]},a.prototype.setPosition=function(a,b){if(this.background){var c=b===sectionMedia.MediaSizeOptions.BackgroundHeader?"header":void 0;return this.mediaAlignment.setBackgroundAlignment(this.modelTree.findIdentifyingNode(this.node),a,c)}return this.mediaAlignment.setInlineAlignment(this.node,a)},a.prototype.onSelectedPositionClick=function(a){var b=this,c=this.sectionMedia.getSelectedOption(this.node),d=ImagePositions.posToDetails[a];this.consumerBiLogger.sectionDesign.changeBackgroundImagePositionClick(d,c,this.node.alias,this.node.getSpecificContentElementType()),this.setPosition(d,c).then(function(){b.undoRedo.captureOperation(!1),b.consumerBiLogger.sectionDesign.changeBackgroundImagePositionSuccess(d,c,b.node.alias,b.node.getSpecificContentElementType())})},a}();a.MediaPositionPanel=b,angular.module("siteGeneratorEditorInternal").component("mediaPositionPanel",{templateUrl:"views/editor/media-settings/media-position-panel.html",controller:b,bindings:{node:"<",background:"<",onClose:"&"}})}(editor||(editor={}));var ExtVideoSettings=function(){function a(a,b,c){var d=this;this.mediaEditorManager=a,this.videoProvidersUtils=b,this.$translate=c,this.FIELD_CHANGE_DEBOUNCE_IN_MS=500,this.videoControlOptions=[{id:videoControlOptions.NEVER,label:this.$translate.instant("editor.media-settings.ext-video.controls.option.never")},{id:videoControlOptions.ON_HOVER,label:this.$translate.instant("editor.media-settings.ext-video.controls.option.on-hover")},{id:videoControlOptions.ALWAYS,label:this.$translate.instant("editor.media-settings.ext-video.controls.option.always")}],this.changeVideoUrl=_.debounce(function(a,b){try{var c=d.videoProvidersUtils.getVideoThumbnailUrl(a);if(c)d.lastValidVideoUrl=a;else{if(!b)return;d.mediaValue.videoUrl=d.lastValidVideoUrl,c=d.videoProvidersUtils.getVideoThumbnailUrl(d.lastValidVideoUrl)}d.mediaValue.thumbnailUrl="string"==typeof c?c:"",d.videoProvidersUtils.isVimeo(a)?d.mediaValue.uri="/videos/"+d.videoProvidersUtils.getVimeoId(a):delete d.mediaValue.uri,d.handleVideoSettingsChanged()}catch(a){}},this.FIELD_CHANGE_DEBOUNCE_IN_MS),this.init()}return a.$inject=["mediaEditorManager","videoProvidersUtils","$translate"],a.prototype.init=function(){this.mediaValue.controls||(this.mediaValue.controls=videoControlOptions.ALWAYS),this.setCurrentVideoControlOption(this.mediaValue)},a.prototype.handleVideoSettingsChanged=function(){this.mediaEditorManager.handleMediaPropertiesChange(IEditEventType.VideoSettingsChange)},a.prototype.changeVideoControlOption=function(a){this.mediaValue.controls=a.id,this.handleVideoSettingsChanged()},a.prototype.setCurrentVideoControlOption=function(a){this.selectedVideoControlOption=this.videoControlOptions[a.controls],this.lastValidVideoUrl=a.videoUrl},a}();angular.module("siteGeneratorEditorInternal").component("extVideoSettings",{templateUrl:"views/editor/media-settings/ext-video-settings.html",controller:ExtVideoSettings,bindings:{mediaValue:"<"}});var ImageSettings=function(){function a(a,b,c,d,e){this.mediaEditorManager=a,this.nodeEditorManager=b,this.linkDetailsManager=c,this.linkEditorCAB=d,this.$scope=e,this.init()}return a.$inject=["mediaEditorManager","nodeEditorManager","linkDetailsManager","linkEditorCAB","$scope"],a.prototype.init=function(){var a=this;this.$scope.$watch("$ctrl.mediaValue",function(){return a.updateILink()})},a.prototype.onChangeMediaTitle=function(a){a=this.insureTextLength(a,DocumentServicesMediator.GENERAL_VALIDATIONS.MAX_MEDIA_TITLE_LENGTH),this.mediaValue.Title=a,this.mediaEditorManager.handleMediaPropertiesChange(IEditEventType.MediaTitleChange)},a.prototype.onChangeMediaDescription=function(a){a=this.insureTextLength(a,DocumentServicesMediator.GENERAL_VALIDATIONS.MAX_MEDIA_DESCRIPTION_LENGTH),this.mediaValue.Description=a,this.mediaEditorManager.handleMediaPropertiesChange(IEditEventType.MediaDescriptionChange)},a.prototype.changeLink=function(){var a=this,b={linkDetails:this.mediaValue.Link,node:this.node,biSource:"media"};this.linkEditorCAB.show(b).then(function(b){a.mediaValue.Link=b,a.updateILink(),a.mediaEditorManager.handleMediaPropertiesChange(IEditEventType.ValueChange)})},a.prototype.insureTextLength=function(a,b){return a.substr(0,Math.min(a.length,b))},a.prototype.updateILink=function(){this.linkAsILink=this.linkDetailsManager.generateILink(this.mediaValue.Link)},a}();angular.module("siteGeneratorEditorInternal").component("imageSettings",{templateUrl:"views/editor/media-settings/image-settings.html",controller:ImageSettings,bindings:{node:"<",mediaValue:"<",showDescription:"<?"}});var MediaChooser=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){this.flags=a,this.mediaEditorManager=b,this.applicationState=c,this.consumerMediaUtils=d,this.mediaOverrideManager=e,this.PresetMediaType=f,this.notification=g,this.undoRedo=h,this.editorEventManager=i,this.mediaSectionUtils=j,this.$scope=k,this.sectionMedia=l,this.nodeFetcher=m,this.$translate=n,this.modelTreeHelpers=o,this.pubSub=p,this.modelTree=q,this.init()}return a.$inject=["flags","mediaEditorManager","applicationState","consumerMediaUtils","mediaOverrideManager","PresetMediaType","notification","undoRedo","editorEventManager","mediaSectionUtils","$scope","sectionMedia","nodeFetcher","$translate","modelTreeHelpers","pubSub","modelTree"],a.prototype.initTabLabels=function(){return a={},a[cc.MediaPreviewType.SingleImage]=this.$translate.instant("editor.media-settings.tabs.image"),a[cc.MediaPreviewType.MultipleImages]=this.$translate.instant("editor.media-settings.tabs.gallery"),a[cc.MediaPreviewType.Video]=this.$translate.instant("editor.media-settings.tabs.video"),a[cc.MediaPreviewType.ExtVideo]=this.$translate.instant("editor.media-settings.tabs.video"),a[cc.MediaPreviewType.Pattern]=this.$translate.instant("editor.media-settings.tabs.pattern"),a[cc.MediaPreviewType.Clipart]=this.$translate.instant("editor.media-settings.tabs.image"),a[cc.MediaPreviewType.Shape]=this.$translate.instant("editor.media-settings.tabs.shape"),a;var a},Object.defineProperty(a.prototype,"currentMediaType",{get:function(){return this.mediaEditorManager.getCurrentMediaType()},enumerable:!0,configurable:!0}),a.prototype.init=function(){var a=this;this.node||console.log("no node"),this.contentElement=this.node.contentElement,this.field=this.mediaSectionUtils.getMediaField(this.contentElement),this.isInMobileEditMode=this.applicationState.isInMobileEditMode(),this.tabLabels=this.initTabLabels(),this.initInternal(),this.$scope.$watchGroup(["$ctrl.mediaSize","$ctrl.node"],function(b,c){b!==c&&a.initInternal()})},a.prototype.initInternal=function(){var a=this.sectionMedia.getMediaType(this.node),b=this.mediaSectionUtils.getMediaLayoutFormat(this.node);this.mediaEditorManager.setCurrentMediaType(a),this.mediaOverride=this.mediaOverrideManager.getAllowedMediaOverride(this.node.isListHeader()?this.node:this.modelTree.findIdentifyingNode(this.node)),this.visibleMediaTypes=this.sectionMedia.getVisibleMediaTypes(this.node,b,this.mediaOverride),_.isUndefined(a)||this.updateMedia()},a.prototype.onMediaTypeChanged=function(a){var b=this;this.mediaEditorManager.setCurrentMediaType(a),this.consumerMediaUtils.biSwitchMediaTypeClick(this.node,a),this.sectionMedia.setOption(this.node,a).then(function(){b.updateMedia(),b.onMediaTypeChanged&&b.onMediaTypeChange({mediaType:a}),b.pubSub.fire(PubSub.events.MEDIA_TYPE_CHANGE)}),this.modelTreeHelpers.isItemOfList(this.node)&&this.notification.show("toasters.list-item-media-type-changed","general.undo",function(){b.undoRedo.undo()})},a.prototype.getModeForSectionBackground=function(){if(!this.nodeIsList())return SectionBackgroundModes.NONE;switch(this.sectionMedia.getSelectedOption(this.node)){case sectionMedia.MediaSizeOptions.BackgroundHeader:return SectionBackgroundModes.HEADER;case sectionMedia.MediaSizeOptions.BackgroundList:return SectionBackgroundModes.LIST;default:return SectionBackgroundModes.NONE}},a.prototype.onReplaceClick=function(){var a=this;if(this.mediaEditorManager.getCurrentMediaType()===cc.MediaPreviewType.Pattern)return void this.applicationState.goToSectionBackgroundPanel(BIOrigins.MediaSettingsPanel,this.getModeForSectionBackground());this.disableMediaChangeButton||(this.disableMediaChangeButton=!0,this.mediaEditorManager.mediaChange(this.field,this.contentElement,BIOrigins.MediaSettingsPanel).then(function(){a.updateMedia(),a.onMediaChange&&a.onMediaChange()}).finally(function(){a.disableMediaChangeButton=!1}))},a.prototype.onColorClick=function(){this.applicationState.goToSectionColorPanel(BIOrigins.MediaSetting)},a.prototype.updateMedia=function(){this.media=this.sectionMedia.getMediaByType(this.node,this.mediaEditorManager.getCurrentMediaType())},a.prototype.nodeIsList=function(){var a=_.get(this.node,"nodeDescription.isListItem")&&"ListHeader"!==this.node.contentElementType&&"ListFooter"!==this.node.contentElementType
;return this.node.isListItem||a},a}();angular.module("siteGeneratorEditorInternal").component("mediaChooser",{templateUrl:"views/editor/media-settings/media-chooser.html",controller:MediaChooser,bindings:{node:"<",onMediaTypeChange:"&",onMediaChange:"&",mediaSize:"<"}});var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ImagePositions=function(a){function b(b,c,d,e,f){var g=a.call(this,c)||this;return g.$translate=b,g.$timeout=c,g.nodeFetcher=d,g.applicationState=e,g.backgroundScrollService=f,g.initScrollType(),g}return __extends(b,a),b.$inject=["$translate","$timeout","nodeFetcher","applicationState","backgroundScrollService"],b.prototype.initScrollType=function(){var a=this.nodeFetcher.getCurrentNode();if(a){var b=this.backgroundScrollService.getActiveScrollType(a);this.shouldShowParallaxParagraph=_([this.backgroundScrollService.SCROLL_TYPE.PARALLAX,this.backgroundScrollService.SCROLL_TYPE.PARALLAX_ZOOM]).contains(b)}},b.prototype.toggleDropDown=function(){this.isShowDropDown()?this.hideDropDown():this.showDropDown(),this.isShowDropDown()?this.closeWhenClickOutside(["image-positions"]):this.onDropdownClose()},b.getLabelDetailsByPosName=function(a){return{imagePosition:"image-positions:"+a.replace("_","-"),selectedPosition:a}},b.prototype.positionClicked=function(a){var c=a.index,d=b.posToDetails[c],e=b.getLabelDetailsByPosName(d);this.selectedPositionImage=e.imagePosition,this.selectedPositionName=e.selectedPosition,this.onAlignmentChanged&&this.onAlignmentChanged({value:d})},b.prototype.goToPreview=function(){this.applicationState.goToPreview(!0)},b.prototype.getHeaderTitle=function(){return this.$translate.instant("builder.section-background.background-settings.image.lower-title")},b.prototype.getHeaderBody=function(){return this.$translate.instant("builder.section-background.background-settings.image.body")},b.prototype.getFooterTextForParallax=function(){return this.$translate.instant("builder.section-background.background-settings.image.parallax-paragraph")},b}(BaseDropDown);ImagePositions.posToDetails={1:"top_left",2:"top",3:"top_right",4:"left",5:"center",6:"right",7:"bottom_left",8:"bottom",9:"bottom_right"},ImagePositions.invertedPosToDetails=_.invert(ImagePositions.posToDetails),angular.module("siteGeneratorBuilderInternal").component("imagePositions",{templateUrl:"views/editor/image-positions.html",controller:ImagePositions,bindings:{onAlignmentChanged:"&",selectedPositionName:"@",selectedPositionImage:"@",selectedPositionIndex:"@",shouldShowParallaxParagraph:"&"}});var ImagePositionsControl=function(){function a(a){this.$translate=a}return a.$inject=["$translate"],a.prototype.getLabelTitle=function(){return this.$translate.instant(this.labelTitle)},a}();angular.module("siteGeneratorBuilderInternal").component("imagePositionsControl",{templateUrl:"views/editor/image-positions-control.html",controller:ImagePositionsControl,bindings:{labelTitle:"@",onAlignmentChanged:"&",selectedPositionName:"@",selectedPositionImage:"@",selectedPositionIndex:"@",shouldShowParallaxParagraph:"&"}}),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("obRightClick",["$parse",function(a){return function(b,c,d){var e=a(d.obRightClick);c.bind("contextmenu",function(a){b.$apply(function(){a.preventDefault(),e(b,{$event:a})})})}}]);var GotoBuilderPopup=function(){function a(a,b,c,d,e,f,g,h,i,j){this.$scope=a,this.$window=b,this.CcDialogBuilder=c,this.wizardService=d,this.spinnerService=e,this.consumerBiLogger=f,this.wixAngularTopology=g,this.applicationState=h,this.storyServices=i,this.flags=j,f.builder.goToEditorNotificationPageView()}return a.$inject=["$scope","$window","CcDialogBuilder","wizardService","spinnerService","consumerBiLogger","wixAngularTopology","applicationState","storyServices","flags"],a.prototype.goToEditor=function(){var a=this;this.consumerBiLogger.builder.goToEditorContinueToProEditorClick(),this.CcDialogBuilder.cancel(),this.spinnerService.waitForMe("renderForEditor"),this.applicationState.setGoToEditorState(!0),this.wizardService.publishStory("",!0).then(function(){return a.storyServices.story&&a.storyServices.story.markAsMajorRevision()}).then(function(){a.applicationState.setGoToEditorState(!1),a.$window.onbeforeunload=null,a.spinnerService.imDone("renderForEditor"),a.consumerBiLogger.builder.goToEditorContinueToProEditorSuccess(),a.onGoToEditor()})},a.prototype.cancel=function(){this.consumerBiLogger.builder.goToEditorClosePage(),this.CcDialogBuilder.cancel()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("gotoEditorDialog",{templateUrl:"views/editor/goto-editor-dialog.html",controller:GotoBuilderPopup,bindings:{onGoToEditor:"&"}});var GoToEditorService=function(){function a(a,b,c,d,e,f){this.clientTopology=a,this.applicationState=b,this.$document=c,this.CcDialogBuilder=d,this.CONSUMER_DIALOGS=e,this.$window=f}return a.$inject=["clientTopology","applicationState","$document","CcDialogBuilder","CONSUMER_DIALOGS","$window"],a.prototype.buildGoToEditorTemplate=function(){return'\n      <md-dialog aria-label="Go to Editor Dialog" class="go-to-editor-popup-wrapper">\n        <go-to-editor-popup on-go-to-editor="goToEditor()"></go-to-editor-popup>\n      </md-dialog>\n    '},a.prototype.openInternalLink=function(a){var b=this.getStoryMetadataByKey(a);if(b){var c=URI(b);c.addQuery("editorSessionId",this.clientTopology.esi),c.addQuery("onboarding","true"),this.$window.location.href=c}},a.prototype.getStoryMetadataByKey=function(a){var b=this.applicationState.getStoryMetadata();return b&&b[a]},a.prototype.launchDialog=function(){var a=this;this.CcDialogBuilder.show({parent:this.$document.body,biDialogName:this.CONSUMER_DIALOGS.GOTO_EDITOR,template:this.buildGoToEditorTemplate(),controller:["$scope",function(b){var c=function(){a.openInternalLink("htmlEditorUri")};b.goToEditor=c}]})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("goToEditorService",GoToEditorService);var GoToEditorPopup=function(){function a(a,b,c,d,e,f,g,h){this.CcDialogBuilder=a,this.consumerBiLogger=b,this.spinnerService=c,this.wizardService=d,this.storyServices=e,this.flags=f,this.$translate=g,this.$window=h,this.consumerBiLogger.builder.goToEditorNotificationPageView()}return a.$inject=["CcDialogBuilder","consumerBiLogger","spinnerService","wizardService","storyServices","flags","$translate","$window"],a.prototype.cancel=function(){this.consumerBiLogger.builder.goToEditorClosePage(),this.closeDialog()},a.prototype.handleGoToEditor=function(){var a=this;this.consumerBiLogger.builder.goToEditorContinueToProEditorClick(),this.openLoader(),this.wizardService.publishStory("",!0).then(function(){return a.handleRevision()}).then(function(){return a.closeDialog()}).then(function(){return a.goToEditor()})},a.prototype.closeDialog=function(){this.CcDialogBuilder.cancel()},a.prototype.isMarkAsMajorRevisionAvailable=function(){return this.storyServices.story},a.prototype.openLoader=function(){this.spinnerService.isSolidBackground=!0,this.spinnerService.overrideMessage=this.$translate.instant("go-to-editor-popup.spinner-message"),this.spinnerService.waitForMe("renderForEditor")},a.prototype.handleRevision=function(){if(this.isMarkAsMajorRevisionAvailable())return this.storyServices.story.markAsMajorRevision()},a.prototype.goToEditor=function(){this.$window.onbeforeunload=null,this.consumerBiLogger.builder.goToEditorContinueToProEditorSuccess(),this.onGoToEditor()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("goToEditorPopup",{templateUrl:"views/editor/go-to-editor-popup.html",controller:GoToEditorPopup,bindings:{onGoToEditor:"&"}}),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("cropperController",["$window","flags","consumerBiLogger",function(a,b,c){return{restrict:"E",link:function(b,d){var e,f,g,h=b.onOutsideClick;b.consumerBiLogger=c,a.requestAnimationFrame(function(){e=d.find(".controllers"),f=d.find(".cropper-tool-overlay"),g=d.find(".cropper-tool-outline-container"),f.on("click",h),g.on("click",h)})}}}]);var CnDraggable=function(){function a(a,b,c,d,e,f){var g=this;this.$element=a,this.$scope=b,this.$q=c,this.cnDrag=d,this.sectionDrag=e,this.previewService=f,this.$ghostContainer=this.createGhostContainer(),this.$ghostContainer.appendTo(this.previewService.getOverlay()),b.$watch(function(){return g.cnDraggable},function(){return b.$evalAsync(function(){return g.setDraggable()})}),b.$on("$destroy",function(){return g.$ghostContainer.remove()})}return a.$inject=["$element","$scope","$q","cnDrag","sectionDrag","previewService"],a.prototype.createGhostContainer=function(){return angular.element("<div></div>").addClass("cn-ghost-container")},a.prototype.getGhostElem=function(){if(this.ghostSelector){if(0===this.ghostSelector.indexOf(">"))return this.$element.find(this.ghostSelector.replace(/>/,""));var a=angular.element(this.ghostSelector);return!_.isEmpty(a)&&a}return this.$element},a.prototype.getDropTarget=function(){return angular.element(a.DROP_TARGET_SELECTOR)},a.prototype.moveGhostUnderCursor=function(a){var b=this.$ghostContainer,c=b.get(0).getBoundingClientRect(),d=(c.left+c.right)/2,e=(c.top+c.bottom)/2,f=a.clientX-d-50,g=a.clientY-e+20;TweenMax.set(b,{x:f<0?"-="+-f:"+="+f,y:g<0?"-="+-g:"+="+g})},a.prototype.toggleDropTarget=function(b,c){var d=this;this.hasHoverStateChanged(b,c)&&setTimeout(function(){c?b.addClass(a.DROP_TARGET_HOVERED_CLASS).trigger("dragenter"):b.removeClass(a.DROP_TARGET_HOVERED_CLASS).trigger("dragleave"),b.data("hovered",c),d.$scope.$apply()})},a.prototype.hasHoverStateChanged=function(a,b){return a.data("hovered")!==b},a.prototype.cloneGhost=function(a){var b=a.get(0).cloneNode(!0),c=a.get(0).getBoundingClientRect(),d=c.height,e=c.width;this.$ghostContainer.css({height:d,width:e}).empty().append(b)},a.prototype.cleanGhost=function(){var a=this,b=this.$q.defer(),c=1,d=function(){c-=.2,TweenMax.set(a.$ghostContainer,{opacity:c}),c>0?requestAnimationFrame(d):b.resolve()};return requestAnimationFrame(d),b.promise},a.prototype.setDraggable=function(){this.cnDrag.removeDraggable(this.draggedInstance),this.draggedInstance=this.createDraggable(),this.cnDisableIf&&this.draggedInstance.disable("dndDragover")},a.prototype.createDraggable=function(){var b=this,c=this.getDropTarget();this.$ghostContainer.css("transform","rotate(-2deg)");var d=this.cnDrag.createDraggable(this.$ghostContainer,{trigger:this.$element,cursor:"-webkit-grab",onDragStart:function(a){b.cloneGhost(b.getGhostElem()),b.moveGhostUnderCursor(a),d.update(!0),b.cnDragstart({event:a,draggable:b.cnDraggable})},onDragEnd:function(e){b.cleanGhost().then(function(){d.hitTest(a.DROP_TARGET_SELECTOR)?b.cnDrop({event:e,draggable:b.cnDraggable}):b.cnCanceled({event:e}),b.toggleDropTarget(c,!1),TweenMax.set(b.$ghostContainer,{clearProps:"transform,scale,opacity"}),b.cnDragend({event:e,item:b.cnDraggable})})},onDrag:function(e){b.moveGhostUnderCursor(e),d.update(!0),b.toggleDropTarget(c,d.hitTest(a.DROP_TARGET_SELECTOR)),b.sectionDrag.onDragMouseMove(e)}})[0];return d},a}();CnDraggable.DROP_TARGET_HOVERED_CLASS="dndDragover",CnDraggable.DROP_TARGET_SELECTOR="drop-target-overlay",angular.module("siteGeneratorStaticsConsumerAppInternal").directive("cnDraggable",function(){return{controller:CnDraggable,controllerAs:"$draggable",bindToController:!0,restrict:"A",scope:{cnDraggable:"=",cnDragstart:"&",cnDragend:"&",cnCanceled:"&",cnDrop:"&",cnDisableIf:"=",ghostSelector:"@"}}});var FloatingUndoRedo=function(){function a(a,b,c){var d=this;this.flags=a,this.applicationState=b,this.undoRedo=c,this.onClickUndo=function(){return d.undoRedo.undo(!0)},this.onClickRedo=function(){return d.undoRedo.redo(!0)},this.canUndo=function(){return d.undoRedo.canUndo()},this.canRedo=function(){return d.undoRedo.canRedo()}}return a.$inject=["flags","applicationState","undoRedo"],a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("floatingUndoRedo",{templateUrl:"views/floating-undo-redo.html",controller:FloatingUndoRedo});var FloatingGoToEditorLink=function(){function a(a,b,c){this.goToEditorService=a,this.applicationState=b,this.consumerBiLogger=c}return a.$inject=["goToEditorService","applicationState","consumerBiLogger"],a.prototype.onLinkClick=function(){this.goToEditorService.launchDialog(),this.consumerBiLogger.builder.topBarGoToEditorClick("floating button")},Object.defineProperty(a.prototype,"isLeftPanelOpen",{get:function(){return this.applicationState.isLeftPanelOpen()},enumerable:!0,configurable:!0}),a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("floatingGoToEditorLink",{templateUrl:"views/floating-go-to-editor-link.html",controller:FloatingGoToEditorLink});var FloatingStageControls=function(){function a(a,b,c,d,e){this.undoRedo=a,this.previewScale=b,this.applicationState=c,this.consumerBiLogger=d,this.sectionHeightService=e,this.onZoomOut=_.debounce(this.zoomOut,150),this.onZoomIn=_.debounce(this.zoomIn,150)}return a.$inject=["undoRedo","previewScale","applicationState","consumerBiLogger","sectionHeightService"],a.prototype.onUndo=function(){this.undoRedo.undo(!0)},a.prototype.onRedo=function(){this.undoRedo.redo(!0)},a.prototype.showChangeSectionHeight=function(){return this.sectionHeightService.showChangeSectionHeight()},Object.defineProperty(a.prototype,"canUndo",{get:function(){return this.undoRedo.canUndo()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"canRedo",{get:function(){return this.undoRedo.canRedo()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"canZoomOut",{get:function(){return this.isZoomEnabled()&&this.previewScale.getScaleFactor()>PreviewScale.MinScaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"canZoomIn",{get:function(){return this.isZoomEnabled()&&this.previewScale.getScaleFactor()<PreviewScale.MaxScaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isLeftPanelOpen",{get:function(){return this.applicationState.isLeftPanelOpen()},enumerable:!0,configurable:!0}),a.prototype.zoomOut=function(){this.canZoomOut&&(this.previewScale.zoomOut(!0),this.consumerBiLogger.builder.zoomInOut("zoom out",Math.round(100*this.previewScale.getScaleFactor())))},a.prototype.zoomIn=function(){this.canZoomIn&&(this.previewScale.zoomIn(!0),this.consumerBiLogger.builder.zoomInOut("zoom in",Math.round(100*this.previewScale.getScaleFactor())))},a.prototype.isZoomEnabled=function(){return!this.applicationState.isOnAddState()&&this.applicationState.isInDesktopEditMode()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("floatingStageControls",{controller:FloatingStageControls,templateUrl:"views/floating-stage-controls.html"});var SaleService=function(){function a(a,b,c,d){this.dealerApi=a,this.previewService=b,this.consumerBiLogger=c,this.flags=d}return a.$inject=["dealerApi","previewService","consumerBiLogger","flags"],a.prototype.loadCampaign=function(){var a=this,b=this.previewService.getMetaSiteId();return this.campaignID=null,this.dealerApi.getCampaign(b).then(function(b){a.campaignID=b.campaignId}).catch(function(b){return a.consumerBiLogger.err(BIErrorCodes.GetCampaignFailed,"failed to get campaign"+b)})},a.prototype.isSale=function(){return this.campaignID&&this.campaignID.length>0},a}();SaleService.SaleCampaignId="seasonal-campaign",SaleService.NewUserPersonalCampaignId="new-user-personal-campaign",angular.module("siteGeneratorStaticsConsumerAppInternal").service("saleService",SaleService);var LogoManager=function(){function a(a,b,c,d){this.$rootScope=a,this.clientTopology=b,this.wixmp=c,this.$timeout=d,this.UPLOAD_ERROR_TIMEOUT=5e3,this.registerUploadHandler()}return a.$inject=["$rootScope","clientTopology","wixmp","$timeout"],a.prototype.setContext=function(a){this.ctx=a,this.ctx.persistence.init&&this.ctx.persistence.init(),this.uploadingLogo=!1,this.hasUploadError=!1,this.updateLogoUrl()},a.prototype.doneWithThisContext=function(){this.ctx=void 0,this.uploadingLogo=!1,this.hasUploadError=!1,this.logoUrl=void 0},a.prototype.registerUploadHandler=function(){var a=this;this.wixmp.Uploader.on("uploadQueueFinished",function(b){if(b&&0!==b.length)if(!b[0].serverResponse||200!==b[0].serverResponse.code&&200!==b[0].serverResponse.status)a.setUploadError();else{var c=a.ctx.persistence.getLogoURL();a.ctx.persistence.setLogo(b[0]),a.logoUrl=a.ctx.persistence.getLogoURL(),a.uploadingLogo=!1,a.ctx.onFieldChanged("business logo","logo",c,a.logoUrl,Date.now()-a.uploadStartTime)}else a.setUploadError();a.$rootScope.$apply()})},a.prototype.deleteLogo=function(){this.ctx.usePlaceholderOnDelete&&(this.ctx.onFieldChanged("business logo display","logo",this.ctx.persistence.isLogoVisible(),!1),this.ctx.persistence.hideLogo(),this.updateLogoUrl())},a.prototype.updateLogoUrl=function(){var a=this.ctx.persistence.isLogoVisible(),b=this.ctx.persistence.getLogoURL();if(!a||!b){var c=Math.floor(4*Math.random())+2;b=this.clientTopology.staticsUrl+"/images/intro/logo-placeholder"+c+".png"}this.logoUrl=b},a.prototype.getMediaUrl=function(){return this.logoUrl},a.prototype.uploadLogo=function(a){var b=this;if(!this.uploadingLogo){if(this.$timeout.cancel(this.uploadErrorTimeout),this.hasUploadError=!1,!a)return void this.deleteLogo();this.uploadingLogo=!0;var c=this.wixmp.Source(this.wixmp.sources.PRIVATE),d=_.assign(a,{mediaType:"picture",file:a});try{this.uploadStartTime=Date.now();this.wixmp.Uploader.upload([{uploadFn:c.item.upload,source:d}])[0].deferred.promise.catch(function(a){b.setUploadError()})}catch(a){this.setUploadError()}this.$rootScope.$apply()}},a.prototype.setUploadError=function(){var a=this;this.uploadingLogo=!1,this.hasUploadError=!0,this.wixmp.Uploader.clearQueue(),this.uploadErrorTimeout=this.$timeout(function(){return a.hasUploadError=!1},this.UPLOAD_ERROR_TIMEOUT)},a.prototype.cleanUp=function(){this.ctx&&this.ctx.persistence.cleanUp&&this.ctx.persistence.cleanUp()},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("logoManager",LogoManager);var PreloaderService=function(){function a(){this.isActive=!1}return Object.defineProperty(a.prototype,"isShown",{get:function(){return this.isActive},enumerable:!0,configurable:!0}),a.prototype.start=function(){this.isActive=!0},a.prototype.stop=function(){this.isActive=!1},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("preloaderService",PreloaderService);var AssistantMenuBucketServiceNS;!function(a){a.bucketId={PREVIEW:"PREVIEW",CHANGE_CONTENT:"CHANGE_CONTENT",CHANGE_SITE_DESIGN:"CHANGE_SITE_DESIGN",CHANGE_SECTION_DESIGN:"CHANGE_SECTION_DESIGN",PUBLISH:"PUBLISH",CONNECT_DOMAIN:"CONNECT_DOMAIN",SEO:"SEO"};var b=function(){function b(b,c,d,e,f,g){var h=this;this.$translate=b,this.flags=c,this.$rootScope=d,this.assistantManager=e,this.assistantTaskFetcher=f,this.assistantUtils=g,this.definitions=(i={},i[a.bucketId.PREVIEW]={translationKeys:{name:"assistant-menu-bucket.preview.name",description:"assistant-menu-bucket.preview.description"},taskIds:function(){return h.getPreviewTaskIds()}},i[a.bucketId.CHANGE_CONTENT]={translationKeys:{name:"assistant-menu-bucket.change-content.name",description:"assistant-menu-bucket.change-content.description"},taskIds:function(){return["editContentTask","addSectionTask","addPageTask"]}},i[a.bucketId.CHANGE_SITE_DESIGN]={translationKeys:{name:"assistant-menu-bucket.change-site-design.name",description:"assistant-menu-bucket.change-site-design.description"},taskIds:function(){return["entireWebsiteDesignTask","colorDesignTask","fontPanelTask","animationTask"]}},i[a.bucketId.CHANGE_SECTION_DESIGN]={translationKeys:{name:"assistant-menu-bucket.change-section-design.name",description:"assistant-menu-bucket.change-section-design.description"},taskIds:function(){return["changeLayoutTask","customizeSectionDesign"]}},i[a.bucketId.PUBLISH]={translationKeys:{name:"assistant-menu-bucket.publish.name",description:"assistant-menu-bucket.publish.description"},taskIds:function(){return["publishTask"]}},i[a.bucketId.CONNECT_DOMAIN]={translationKeys:{name:"assistant-menu-bucket.connect-domain.name",description:"assistant-menu-bucket.connect-domain.description"},taskIds:function(){return["connectDomainTask"]}},i[a.bucketId.SEO]={translationKeys:{name:"assistant-menu-bucket.seo.name",description:"assistant-menu-bucket.seo.description"},taskIds:function(){return h.getSeoTaskIds()}},i),this.flags.assistantBucketsNoSkip&&(this.setupOnTaskComplete(),this.setupOnTaskStarted());var i}return b.$inject=["$translate","flags","$rootScope","assistantManager","assistantTaskFetcher","assistantUtils"],b.prototype.setupOnTaskComplete=function(){var a=this;this.$rootScope.$on(builders.AssistantAction.EVENTS.TASK_COMPLETE,function(){if(a.findActiveBucketTask()===a.assistantManager.getActiveTask()){var b=a.activeBucketId,c=a.isBucketLastTaskActive(b),d=a.bucketsOrder[a.bucketsOrder.indexOf(b)+1];c&&d?a.markBucketAsActive(d):c||a.markNextBucketTaskAsActive(b)}})},b.prototype.setupOnTaskStarted=function(){var a=this;this.$rootScope.$on(builders.AssistantAction.EVENTS.TASK_START,function(){var b=a.assistantManager.getActiveTask();if(a.isActiveBucketContainsTask(b.id)){var c=a.findActiveBucketTask();if(c===b)return;c&&a.markTaskAsInactive(c),a.markTaskAsActive(b)}})},b.prototype.bucketName=function(a){return this.$translate.instant(this.definitions[a].translationKeys.name)},b.prototype.bucketDescription=function(a){return this.$translate.instant(this.definitions[a].translationKeys.description)},b.prototype.bucketTaskIds=function(a){return this.definitions[a].taskIds()},b.prototype.onBucketSelected=function(a){this.markBucketAsActive(a)},Object.defineProperty(b.prototype,"bucketsOrder",{get:function(){return this.flags.assistantBucketsDesignFirst?[a.bucketId.PREVIEW,a.bucketId.CHANGE_SITE_DESIGN,a.bucketId.CHANGE_SECTION_DESIGN,a.bucketId.CHANGE_CONTENT,a.bucketId.PUBLISH,a.bucketId.CONNECT_DOMAIN,a.bucketId.SEO]:[a.bucketId.PREVIEW,a.bucketId.CHANGE_CONTENT,a.bucketId.CHANGE_SITE_DESIGN,a.bucketId.CHANGE_SECTION_DESIGN,a.bucketId.PUBLISH,a.bucketId.CONNECT_DOMAIN,a.bucketId.SEO]},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"activeBucketId",{get:function(){var a=this,b=this.bucketsOrder.findIndex(function(b){return a.bucketTaskIds(b).some(function(b){return a.assistantTaskFetcher.getTask(b).currentlyActive})});return-1!==b?this.bucketsOrder[b]:this.bucketsOrder[0]},enumerable:!0,configurable:!0}),b.prototype.isBucketLastTaskActive=function(a){var b=this.assistantManager.getActiveTask(),c=this.bucketTaskIds(a);return c.indexOf(b.id)===c.length-1},b.prototype.markBucketAsActive=function(a){var b=this.bucketTaskIds(a),c=this.assistantTaskFetcher.getTask(b[0]),d=this.findActiveBucketTask();d&&this.markTaskAsInactive(d),this.markTaskAsActive(c)},b.prototype.markNextBucketTaskAsActive=function(a){var b=this.assistantManager.getActiveTask();this.markTaskAsInactive(b);var c=this.findNextTask(a,b);this.markTaskAsActive(c)},b.prototype.markTaskAsActive=function(a){a.currentlyActive=!0,this.assistantUtils.saveTaskData(a)},b.prototype.markTaskAsInactive=function(a){a.currentlyActive=!1,this.assistantUtils.saveTaskData(a)},b.prototype.findNextTask=function(a,b){var c=this.bucketTaskIds(a).indexOf(b.id);return this.assistantTaskFetcher.getTask(this.bucketTaskIds(a)[c+1])},b.prototype.findActiveBucketTask=function(){var a=this,b=this.activeBucketId;return this.bucketTaskIds(b).map(function(b){return a.assistantTaskFetcher.getTask(b)}).find(function(a){return a.currentlyActive})},b.prototype.isActiveBucketContainsTask=function(a){var b=this,c=this.activeBucketId;return void 0!==this.bucketTaskIds(c).map(function(a){return b.assistantTaskFetcher.getTask(a)}).find(function(b){return b.id===a})},b.prototype.getSeoTaskIds=function(){var a=["pageSEOTask"];return this.flags.seoWizTour?a.concat(["seoWizTask"]):a},b.prototype.getPreviewTaskIds=function(){var a=["previewTask"];return this.flags.tpaTours?a.concat(this.assistantTaskFetcher.getTpaTaskIds()):a},b}();a.AssistantMenuBucketService=b,angular.module("siteGeneratorTourManagerInternal").service("assistantMenuBucketService",b)}(AssistantMenuBucketServiceNS||(AssistantMenuBucketServiceNS={}));var AssistantAnimationManagerNS;!function(a){a.animationType={TASK_COMPLETED:"TASK_COMPLETED"};var b=function(){function b(a,b){this.assistantManager=a,this.$rootScope=b,this.pendingTaskAnimations=[],this.listenToAssistantEvents()}return b.$inject=["assistantManager","$rootScope"],b.prototype.taskAnimationsAreDone=function(){this.pendingTaskAnimations=[]},b.prototype.animationIsDone=function(a){this.pendingTaskAnimations=this.pendingTaskAnimations.filter(function(b){return b.taskId!==a})},b.prototype.getTaskAnimation=function(a){var b=this.pendingTaskAnimations.find(function(b){return b.taskId===a});return b?b.animationType:void 0},b.prototype.listenToAssistantEvents=function(){this.listenToTaskCompletedEvent()},b.prototype.listenToTaskCompletedEvent=function(){var b=this;this.$rootScope.$on(builders.AssistantAction.EVENTS.TASK_COMPLETE,function(){var c=b.assistantManager.getActiveTask();c.isComplete||b.pendingTaskAnimations.push({taskId:c.id,animationType:a.animationType.TASK_COMPLETED})})},b}();a.AssistantAnimationManager=b,angular.module("siteGeneratorTourManagerInternal").service("assistantAnimationManager",b)}(AssistantAnimationManagerNS||(AssistantAnimationManagerNS={})),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("collapseExpand",["$timeout","$parse","$log",function(a,b,c){return{restrict:"E",scope:{skipExpandAnimation:"<",name:"<"},transclude:!0,template:"<ng-transclude></ng-transclude>",link:function(a,b,c){var d=new Promise(function(c){a.$applyAsync(function(){var a=b.children()[0].clientHeight;c(a)})}),e=function(){if(""!==b[0].style.height)return void b.css("height",0);var a=b.children()[0].clientHeight;b.css("height",a),requestAnimationFrame(function(){b.css("height",0)})},f=function(c){a.skipExpandAnimation?b.css("height",c):requestAnimationFrame(function(){b.css("height",c)})};!function(){a.skipExpandAnimation||b.css("height",0)}();var g=!1;d.then(function(a){g||f(a)}),a.$on("$destroy",function(){g=!0,e()})}}}]);
//# sourceMappingURL=scripts.js.map